{
  "id": "data-taxonomy",
  "version": 1,
  "description": "Source de verite des champs, enums et conventions pour les JSONs de gameplay.",
  "units": {
    "distance": "m",
    "weight": "kg",
    "time": [
      "tour",
      "minute",
      "heure",
      "jour"
    ]
  },
  "unitsFields": {
    "distanceMeters": [
      "action.targeting.range.min",
      "action.targeting.range.max",
      "action.conditions.distance_max.max",
      "action.conditions.distance_between.min",
      "action.conditions.distance_between.max",
      "weapon.properties.reach",
      "weapon.properties.range.normal",
      "weapon.properties.range.long",
      "weapon.properties.thrown.normal",
      "weapon.properties.thrown.long",
      "enemy.combatStats.moveRange",
      "enemy.movement.speed",
      "enemy.vision.range",
      "enemy.combatProfile.preferredRangeMin",
      "enemy.combatProfile.preferredRangeMax",
      "enemy.combatProfile.avoidRangeMin",
      "enemy.combatProfile.avoidRangeMax",
      "enemy.behavior.preferredRangeMin",
      "enemy.behavior.preferredRangeMax",
      "enemy.behavior.panicRange"
    ],
    "weightKg": [
      "weapon.weight",
      "armor.weight",
      "object.weight"
    ]
  },
  "sources": {
    "actionTypes": "src/game/actionTypes.ts",
    "actionEngine": "src/game/actionEngine.ts",
    "reactionTypes": "src/game/reactionTypes.ts",
    "effectTypes": "src/game/effectTypes.ts",
    "damageTypes": "src/game/damageTypes.ts",
    "gameBoard": "src/GameBoard.tsx"
  },
  "creatureTypes": [
    "ABERRATION",
    "BEAST",
    "CELESTIAL",
    "CONSTRUCT",
    "DRAGON",
    "ELEMENTAL",
    "FEY",
    "FIEND",
    "GIANT",
    "HUMANOID",
    "MONSTROSITY",
    "OOZE",
    "PLANT",
    "UNDEAD"
  ],
  "sizeCategories": [
    "TINY",
    "SMALL",
    "MEDIUM",
    "LARGE",
    "HUGE",
    "GARGANTUAN"
  ],
  "movementTypes": [
    "WALK",
    "CLIMB",
    "SWIM",
    "FLY",
    "BURROW"
  ],
  "damageTypes": [
    "ACID",
    "BLUDGEONING",
    "COLD",
    "FIRE",
    "FORCE",
    "LIGHTNING",
    "NECROTIC",
    "PIERCING",
    "POISON",
    "PSYCHIC",
    "RADIANT",
    "SLASHING",
    "THUNDER"
  ],
  "damageTags": [
    "MAGICAL",
    "NON_MAGICAL",
    "SILVERED",
    "ADAMANTINE",
    "SPELL",
    "WEAPON",
    "MELEE",
    "RANGED",
    "AREA"
  ],
  "conditionTypes": [
    "BLINDED",
    "CHARMED",
    "DEAFENED",
    "FRIGHTENED",
    "GRAPPLED",
    "INCAPACITATED",
    "INVISIBLE",
    "PARALYZED",
    "PETRIFIED",
    "POISONED",
    "PRONE",
    "RESTRAINED",
    "STUNNED",
    "UNCONSCIOUS",
    "EXHAUSTION"
  ],
  "senses": [
    "BLINDSIGHT",
    "DARKVISION",
    "TREMORSENSE",
    "TRUESIGHT",
    "SCENT"
  ],
  "abilities": [
    "FOR",
    "DEX",
    "CON",
    "INT",
    "SAG",
    "CHA"
  ],
  "resolutionTypes": [
    "ATTACK_ROLL",
    "SAVING_THROW",
    "ABILITY_CHECK",
    "NO_ROLL"
  ],
  "attackKinds": [
    "MELEE_WEAPON",
    "RANGED_WEAPON",
    "MELEE_SPELL",
    "RANGED_SPELL",
    "SPECIAL"
  ],
  "outcomeFlags": [
    "HIT",
    "MISS",
    "CRIT",
    "SAVE_SUCCESS",
    "SAVE_FAIL",
    "AUTO_SUCCESS",
    "AUTO_FAIL",
    "PARTIAL"
  ],
  "targetingConstraints": [
    "LINE_OF_SIGHT",
    "LINE_OF_EFFECT",
    "HOSTILE_ONLY",
    "ALLY_ONLY",
    "NOT_SELF",
    "NOT_UNCONSCIOUS",
    "WITHIN_REACH",
    "WITHIN_RANGE",
    "REQUIRES_FREE_HAND",
    "REQUIRES_SPEECH",
    "REQUIRES_COMPONENTS"
  ],
  "areaShapes": [
    "SPHERE",
    "CONE",
    "LINE",
    "CUBE",
    "CYLINDER"
  ],
  "enginePhases": [
    "BUILD_INTENT",
    "GATHER_OPTIONS",
    "VALIDATE_LEGALITY",
    "TARGETING",
    "PRE_RESOLUTION_WINDOW",
    "RESOLVE_CHECK",
    "ON_OUTCOME",
    "APPLY_TARGET_EFFECTS",
    "APPLY_WORLD_EFFECTS",
    "POST_RESOLUTION_WINDOW",
    "COMMIT"
  ],
  "action": {
    "model": "./action-model.json",
    "category": [
      "attack",
      "movement",
      "support",
      "control",
      "defense",
      "item",
      "reaction"
    ],
    "actionCost": {
      "actionType": [
        "action",
        "bonus",
        "reaction",
        "free"
      ],
      "movementCost": "number"
    },
    "targeting": {
      "target": [
        "enemy",
        "player",
        "hostile",
        "ally",
        "self",
        "cell",
        "emptyCell"
      ],
      "range.shape": [
        "SPHERE",
        "CONE",
        "LINE",
        "CUBE",
        "CYLINDER"
      ],
      "range.min": "number",
      "range.max": "number",
      "maxTargets": "number",
      "requiresLos": "boolean"
    },
    "usage": {
      "perTurn": "number|null",
      "perEncounter": "number|null",
      "resource": {
        "name": "string",
        "pool": "string|null",
        "min": "number|null"
      }
    },
    "resolution": {
      "kind": [
        "ATTACK_ROLL",
        "SAVING_THROW",
        "ABILITY_CHECK",
        "NO_ROLL"
      ],
      "critRule": [
        "double-dice",
        "double-total"
      ]
    },
    "attack": {
      "bonus": "number",
      "critRange": "number (default 20)"
    },
    "damage": {
      "formula": "string",
      "critRule": [
        "double-dice",
        "double-total"
      ],
      "damageType": "damageTypeId"
    },
    "conditions": {
      "types": [
        "ACTOR_CREATURE_TYPE_IS",
        "TARGET_CREATURE_TYPE_IS",
        "ACTOR_HAS_TAG",
        "TARGET_HAS_TAG",
        "ACTOR_CREATURE_HAS_TAG",
        "TARGET_CREATURE_HAS_TAG",
        "ACTOR_HAS_CONDITION",
        "TARGET_HAS_CONDITION",
        "ACTOR_CONDITION_STACKS",
        "TARGET_CONDITION_STACKS",
        "ACTOR_DAMAGE_IMMUNE",
        "TARGET_DAMAGE_IMMUNE",
        "ACTOR_DAMAGE_RESIST",
        "TARGET_DAMAGE_RESIST",
        "ACTOR_DAMAGE_VULNERABLE",
        "TARGET_DAMAGE_VULNERABLE",
        "ACTOR_HAS_RESOURCE",
        "TARGET_HAS_RESOURCE",
        "ACTOR_SIZE_IS",
        "TARGET_SIZE_IS",
        "ACTOR_CAN_MOVE",
        "TARGET_CAN_MOVE",
        "TARGET_ALIVE",
        "DISTANCE_MAX",
        "DISTANCE_BETWEEN",
        "RESOURCE_AT_LEAST",
        "STAT_BELOW_PERCENT",
        "OUTCOME_HAS",
        "PHASE_IS",
        "ACTOR_VALUE",
        "TARGET_VALUE",
        "AND",
        "OR",
        "NOT"
      ]
    },
    "ops": [
      "DealDamage",
      "Heal",
      "ApplyCondition",
      "CreateZone",
      "SpendResource",
      "MoveForced",
      "LogEvent",
      "PlayVisualEffect",
      "MoveTo",
      "GrantTempHp",
      "ModifyPathLimit",
      "ToggleTorch",
      "SetKillerInstinctTarget"
    ],
    "hooks": {
      "phases": [
        "BUILD_INTENT",
        "GATHER_OPTIONS",
        "VALIDATE_LEGALITY",
        "TARGETING",
        "PRE_RESOLUTION_WINDOW",
        "RESOLVE_CHECK",
        "ON_OUTCOME",
        "APPLY_TARGET_EFFECTS",
        "APPLY_WORLD_EFFECTS",
        "POST_RESOLUTION_WINDOW",
        "COMMIT"
      ]
    },
    "outcomes": [
      "HIT",
      "MISS",
      "CRIT",
      "SAVE_SUCCESS",
      "SAVE_FAIL",
      "AUTO_SUCCESS",
      "AUTO_FAIL",
      "PARTIAL"
    ],
    "tags": {
      "reserved": [
        "move-type"
      ]
    }
  },
  "moveType": {
    "model": "./move-type-model.json",
    "extends": "action",
    "requiredTags": [
      "move-type"
    ],
    "movement": {
      "pathLimitMultiplier": "number",
      "modeId": "string"
    }
  },
  "enemy": {
    "model": "./enemy-model.json",
    "armesDefaut": {
      "main_droite": "string|null",
      "main_gauche": "string|null",
      "mains": "string|null"
    },
    "proficiencies": {
      "weapons": "string[]",
      "armors": "string[]",
      "tools": "string[]"
    }
  },
  "character": {
    "model": "./character-model.json",
    "identity": {
      "id": "string",
      "nom": {
        "nomcomplet": "string",
        "prenom": "string?",
        "surnom": "string?"
      },
      "age": "number?",
      "sexe": "string?",
      "taille": "number?",
      "poids": "number?",
      "alignement": "string?",
      "raceId": "string",
      "backgroundId": "string"
    },
    "progression": {
      "classe": "Record<string|number, { classeId, subclasseId?, niveau }>",
      "niveauGlobal": "number?",
      "xp": "number?",
      "maitriseBonus": "number?",
      "progressionHistory": "Array<{ source, level, type, payload }>"
    },
    "stats": {
      "caracs": "object (includes modFOR/modDEX/etc per ability)",
      "competences": "string[]",
      "expertises": "string[]",
      "proficiencies": "object",
      "savingThrows": "string[]",
      "initiative": "string|number",
      "percPassive": "number?"
    },
    "combat": {
      "combatStats": "object",
      "pvActuels": "number?",
      "pvTmp": "number?",
      "movementModes": "object|string[]",
      "visionProfile": "object",
      "actionIds": "string[]",
      "reactionIds": "string[]"
    },
    "inventory": {
      "inventoryItems": "Array<{ instanceId, storedIn?, contenu?, equippedSlot? }>",
      "materielSlots": "object",
      "argent": "object"
    },
    "choices": {
      "choiceSelections": "object",
      "creationLocks": "object",
      "classLocks": "object"
    },
    "spellcastingState": {
      "totalCasterLevel": "number",
      "slots": "object",
      "sources": "Record<string, { focusInstanceId?, slots?, preparedSpellIds?, knownSpellIds? }>",
      "slotJustifications": "Array<{ source, classLevel, slotsByLevel }>"
    },
    "derived": {
      "grants": "object"
    },
    "personalization": {
      "appearance": "object",
      "descriptionPersonnage": "object",
      "profileDetails": "object",
      "notes": "string?"
    }
  },
  "weapon": {
    "model": "./weapon-model.json",
    "type": [
      "arme"
    ],
    "subtype": [
      "simple",
      "martiale",
      "speciale",
      "monastique"
    ],
    "category": [
      "melee",
      "distance",
      "polyvalent"
    ],
    "rarity": [
      "commune",
      "peu_commune",
      "rare",
      "tres_rare",
      "legendaire"
    ],
    "fields": {
      "id": "string",
      "name": "string",
      "label": "string",
      "descriptionCourte": "string",
      "descriptionLongue": "string",
      "allowStack": "boolean",
      "harmonisable": "boolean",
      "focalisateur": "boolean",
      "weight": "number",
      "size": "number",
      "value": {
        "platinum": "number",
        "gold": "number",
        "silver": "number",
        "copper": "number"
      },
      "tags": "string[]",
      "properties": {
        "finesse": "boolean",
        "light": "boolean",
        "heavy": "boolean",
        "twoHanded": "boolean",
        "reach": "number",
        "versatile": "string|null",
        "thrown": {
          "normal": "number",
          "long": "number"
        },
        "ammunition": "boolean",
        "loading": "boolean",
        "reload": "number|null",
        "range": {
          "normal": "number",
          "long": "number"
        },
        "special": "string|null"
      },
      "attack": {
        "mod": "string",
        "bonus": "string|number|null"
      },
      "damage": {
        "dice": "string",
        "damageType": "damageTypeId",
        "alt": {
          "dice": "string",
          "condition": "string"
        }
      },
      "effectOnHit": {
        "mod": "string",
        "damage": "string",
        "damageType": "damageTypeId"
      },
      "links": {
        "actionId": "string|null",
        "effectId": "string|null"
      }
    }
  },
  "reaction": {
    "model": "./reaction-model.json",
    "trigger": {
      "event": [
        "movement.leave_reach",
        "movement.enter_reach",
        "visibility.first_seen"
      ],
      "source": [
        "hostile",
        "ally",
        "player",
        "enemy",
        "self",
        "any"
      ]
    },
    "conditions": {
      "types": [
        "ACTOR_ALIVE",
        "TARGET_ALIVE",
        "REACTION_AVAILABLE",
        "REACTION_UNUSED_COMBAT",
        "DISTANCE_MAX",
        "TARGET_FIRST_SEEN",
        "TARGET_IS_CLOSEST_VISIBLE",
        "TARGET_VISIBLE"
      ]
    }
  },
  "visualEffectType": {
    "model": "./visual-effect-model.json",
    "definition": {
      "id": "string",
      "label": "string",
      "tags": "string[]",
      "appearance": {
        "spriteKey": "string",
        "animationSpeed": "number",
        "animationLoop": "boolean",
        "scale": "number",
        "targetSize": "number",
        "scaleRange": {
          "min": "number",
          "max": "number"
        },
        "tint": "number",
        "tintRange": {
          "dark": "number",
          "light": "number"
        },
        "alpha": "number",
        "alphaRange": {
          "min": "number",
          "max": "number"
        }
      },
      "placement": {
        "allowedFloors": "string[]",
        "blockedFloors": "string[]",
        "allowedFloorTags": "string[]",
        "blockedFloorTags": "string[]",
        "avoidLiquid": "boolean"
      },
      "hazard": {
        "damageFormula": "string",
        "statusRoll": {
          "die": "number",
          "trigger": "number",
          "statusId": "string"
        },
        "onTraverse": "boolean"
      },
      "light": {
        "radius": "number",
        "color": "number"
      }
    }
  },
  "map": {
    "model": "./map-model.json"
  },
  "race": {
    "model": "./race-model.json"
  },
  "passif": {
    "model": "./passif-model.json"
  },
  "currency": {
    "value": {
      "platinum": "number",
      "gold": "number",
      "silver": "number",
      "copper": "number"
    }
  },
  "restTypes": [
    "short_rest",
    "long_rest"
  ],
  "commonFlags": {
    "harmonisable": "boolean"
  },
  "formulaTokens": {
    "tokens": [
      "attackBonus",
      "moveRange",
      "level",
      "niveau",
      "modFOR",
      "modDEX",
      "modCON",
      "modINT",
      "modSAG",
      "modCHA"
    ]
  },
  "runtimeSupport": {
    "ops": {
      "supportedByActionEngine": [
        "DealDamage",
        "Heal",
        "ApplyCondition",
        "CreateZone",
        "SpendResource",
        "MoveForced",
        "MoveTo",
        "GrantTempHp",
        "LogEvent"
      ],
      "supportedByGameBoard": [
        "ModifyPathLimit",
        "ToggleTorch",
        "SetKillerInstinctTarget",
        "PlayVisualEffect"
      ],
      "knownInData": [
        "LogEvent",
        "DealDamage",
        "Heal",
        "ApplyCondition",
        "CreateZone",
        "SpendResource",
        "MoveForced",
        "MoveTo",
        "GrantTempHp",
        "ModifyPathLimit",
        "ToggleTorch",
        "SetKillerInstinctTarget",
        "PlayVisualEffect"
      ]
    }
  },
  "tags": {
    "allowed": [
      "academique",
      "arme",
      "armure",
      "attack",
      "barrel",
      "bludgeoning",
      "bouclier",
      "bourse",
      "bow",
      "brazier",
      "bush",
      "cave",
      "chair",
      "channel-divinity",
      "class",
      "cleric",
      "connector",
      "control",
      "crate",
      "defense",
      "deplacement",
      "distance",
      "domain",
      "door",
      "ecriture",
      "effect",
      "endommagee",
      "example",
      "fence",
      "fire",
      "hazard",
      "holy_symbol",
      "improvise",
      "insigne",
      "intermediaire",
      "jet",
      "legere",
      "log",
      "lourde",
      "low",
      "lumiere",
      "melee",
      "militaire",
      "mobilite",
      "monnaie",
      "move-type",
      "movement",
      "nature",
      "objet",
      "paquetage",
      "peace",
      "piece",
      "piercing",
      "pillar",
      "prop",
      "ranged",
      "reaction",
      "resource",
      "rock",
      "rubble",
      "sac",
      "slashing",
      "soin",
      "souvenir",
      "spell",
      "stairs",
      "stalagmite",
      "starter",
      "statue",
      "stone",
      "structure",
      "subclass",
      "support",
      "survie",
      "table",
      "torch",
      "tree",
      "utilitaire",
      "utility",
      "vegetation",
      "vetement",
      "visibility",
      "wall",
      "wood"
    ]
  }
}

