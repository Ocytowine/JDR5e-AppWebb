const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-Ck6Ns6Ok.js","assets/webworkerAll-DwJaeqp7.js","assets/colorToUniform-BVVeWOFp.js","assets/WebGPURenderer-jNAQbF3x.js","assets/SharedSystems-DLfA9nDP.js","assets/WebGLRenderer-BwLQvY2p.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Vc(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Vu={exports:{}},Ys={},Yu={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf;function vg(){if(Pf)return ze;Pf=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function x(I){return I===null||typeof I!="object"?null:(I=y&&I[y]||I["@@iterator"],typeof I=="function"?I:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,b={};function w(I,G,Ae){this.props=I,this.context=G,this.refs=b,this.updater=Ae||_}w.prototype.isReactComponent={},w.prototype.setState=function(I,G){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,G,"setState")},w.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function A(){}A.prototype=w.prototype;function P(I,G,Ae){this.props=I,this.context=G,this.refs=b,this.updater=Ae||_}var E=P.prototype=new A;E.constructor=P,k(E,w.prototype),E.isPureReactComponent=!0;var M=Array.isArray,Y=Object.prototype.hasOwnProperty,N={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function ie(I,G,Ae){var Re,Fe={},Ie=null,Ge=null;if(G!=null)for(Re in G.ref!==void 0&&(Ge=G.ref),G.key!==void 0&&(Ie=""+G.key),G)Y.call(G,Re)&&!$.hasOwnProperty(Re)&&(Fe[Re]=G[Re]);var Ee=arguments.length-2;if(Ee===1)Fe.children=Ae;else if(1<Ee){for(var Ne=Array(Ee),tt=0;tt<Ee;tt++)Ne[tt]=arguments[tt+2];Fe.children=Ne}if(I&&I.defaultProps)for(Re in Ee=I.defaultProps,Ee)Fe[Re]===void 0&&(Fe[Re]=Ee[Re]);return{$$typeof:i,type:I,key:Ie,ref:Ge,props:Fe,_owner:N.current}}function ae(I,G){return{$$typeof:i,type:I.type,key:G,ref:I.ref,props:I.props,_owner:I._owner}}function te(I){return typeof I=="object"&&I!==null&&I.$$typeof===i}function se(I){var G={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Ae){return G[Ae]})}var ve=/\/+/g;function ge(I,G){return typeof I=="object"&&I!==null&&I.key!=null?se(""+I.key):G.toString(36)}function Me(I,G,Ae,Re,Fe){var Ie=typeof I;(Ie==="undefined"||Ie==="boolean")&&(I=null);var Ge=!1;if(I===null)Ge=!0;else switch(Ie){case"string":case"number":Ge=!0;break;case"object":switch(I.$$typeof){case i:case e:Ge=!0}}if(Ge)return Ge=I,Fe=Fe(Ge),I=Re===""?"."+ge(Ge,0):Re,M(Fe)?(Ae="",I!=null&&(Ae=I.replace(ve,"$&/")+"/"),Me(Fe,G,Ae,"",function(tt){return tt})):Fe!=null&&(te(Fe)&&(Fe=ae(Fe,Ae+(!Fe.key||Ge&&Ge.key===Fe.key?"":(""+Fe.key).replace(ve,"$&/")+"/")+I)),G.push(Fe)),1;if(Ge=0,Re=Re===""?".":Re+":",M(I))for(var Ee=0;Ee<I.length;Ee++){Ie=I[Ee];var Ne=Re+ge(Ie,Ee);Ge+=Me(Ie,G,Ae,Ne,Fe)}else if(Ne=x(I),typeof Ne=="function")for(I=Ne.call(I),Ee=0;!(Ie=I.next()).done;)Ie=Ie.value,Ne=Re+ge(Ie,Ee++),Ge+=Me(Ie,G,Ae,Ne,Fe);else if(Ie==="object")throw G=String(I),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ge}function ut(I,G,Ae){if(I==null)return I;var Re=[],Fe=0;return Me(I,Re,"","",function(Ie){return G.call(Ae,Ie,Fe++)}),Re}function J(I){if(I._status===-1){var G=I._result;G=G(),G.then(function(Ae){(I._status===0||I._status===-1)&&(I._status=1,I._result=Ae)},function(Ae){(I._status===0||I._status===-1)&&(I._status=2,I._result=Ae)}),I._status===-1&&(I._status=0,I._result=G)}if(I._status===1)return I._result.default;throw I._result}var oe={current:null},ne={transition:null},ee={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:ne,ReactCurrentOwner:N};function re(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:ut,forEach:function(I,G,Ae){ut(I,function(){G.apply(this,arguments)},Ae)},count:function(I){var G=0;return ut(I,function(){G++}),G},toArray:function(I){return ut(I,function(G){return G})||[]},only:function(I){if(!te(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},ze.Component=w,ze.Fragment=t,ze.Profiler=o,ze.PureComponent=P,ze.StrictMode=s,ze.Suspense=d,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,ze.act=re,ze.cloneElement=function(I,G,Ae){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var Re=k({},I.props),Fe=I.key,Ie=I.ref,Ge=I._owner;if(G!=null){if(G.ref!==void 0&&(Ie=G.ref,Ge=N.current),G.key!==void 0&&(Fe=""+G.key),I.type&&I.type.defaultProps)var Ee=I.type.defaultProps;for(Ne in G)Y.call(G,Ne)&&!$.hasOwnProperty(Ne)&&(Re[Ne]=G[Ne]===void 0&&Ee!==void 0?Ee[Ne]:G[Ne])}var Ne=arguments.length-2;if(Ne===1)Re.children=Ae;else if(1<Ne){Ee=Array(Ne);for(var tt=0;tt<Ne;tt++)Ee[tt]=arguments[tt+2];Re.children=Ee}return{$$typeof:i,type:I.type,key:Fe,ref:Ie,props:Re,_owner:Ge}},ze.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:l,_context:I},I.Consumer=I},ze.createElement=ie,ze.createFactory=function(I){var G=ie.bind(null,I);return G.type=I,G},ze.createRef=function(){return{current:null}},ze.forwardRef=function(I){return{$$typeof:h,render:I}},ze.isValidElement=te,ze.lazy=function(I){return{$$typeof:m,_payload:{_status:-1,_result:I},_init:J}},ze.memo=function(I,G){return{$$typeof:p,type:I,compare:G===void 0?null:G}},ze.startTransition=function(I){var G=ne.transition;ne.transition={};try{I()}finally{ne.transition=G}},ze.unstable_act=re,ze.useCallback=function(I,G){return oe.current.useCallback(I,G)},ze.useContext=function(I){return oe.current.useContext(I)},ze.useDebugValue=function(){},ze.useDeferredValue=function(I){return oe.current.useDeferredValue(I)},ze.useEffect=function(I,G){return oe.current.useEffect(I,G)},ze.useId=function(){return oe.current.useId()},ze.useImperativeHandle=function(I,G,Ae){return oe.current.useImperativeHandle(I,G,Ae)},ze.useInsertionEffect=function(I,G){return oe.current.useInsertionEffect(I,G)},ze.useLayoutEffect=function(I,G){return oe.current.useLayoutEffect(I,G)},ze.useMemo=function(I,G){return oe.current.useMemo(I,G)},ze.useReducer=function(I,G,Ae){return oe.current.useReducer(I,G,Ae)},ze.useRef=function(I){return oe.current.useRef(I)},ze.useState=function(I){return oe.current.useState(I)},ze.useSyncExternalStore=function(I,G,Ae){return oe.current.useSyncExternalStore(I,G,Ae)},ze.useTransition=function(){return oe.current.useTransition()},ze.version="18.3.1",ze}var Tf;function Yc(){return Tf||(Tf=1,Yu.exports=vg()),Yu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef;function _g(){if(Ef)return Ys;Ef=1;var i=Yc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(h,d,p){var m,y={},x=null,_=null;p!==void 0&&(x=""+p),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(_=d.ref);for(m in d)s.call(d,m)&&!l.hasOwnProperty(m)&&(y[m]=d[m]);if(h&&h.defaultProps)for(m in d=h.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:h,key:x,ref:_,props:y,_owner:o.current}}return Ys.Fragment=t,Ys.jsx=u,Ys.jsxs=u,Ys}var Mf;function wg(){return Mf||(Mf=1,Vu.exports=_g()),Vu.exports}var z=wg(),Ra={},Xu={exports:{}},Zt={},qu={exports:{}},Ku={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rf;function Sg(){return Rf||(Rf=1,(function(i){function e(ne,ee){var re=ne.length;ne.push(ee);e:for(;0<re;){var I=re-1>>>1,G=ne[I];if(0<o(G,ee))ne[I]=ee,ne[re]=G,re=I;else break e}}function t(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var ee=ne[0],re=ne.pop();if(re!==ee){ne[0]=re;e:for(var I=0,G=ne.length,Ae=G>>>1;I<Ae;){var Re=2*(I+1)-1,Fe=ne[Re],Ie=Re+1,Ge=ne[Ie];if(0>o(Fe,re))Ie<G&&0>o(Ge,Fe)?(ne[I]=Ge,ne[Ie]=re,I=Ie):(ne[I]=Fe,ne[Re]=re,I=Re);else if(Ie<G&&0>o(Ge,re))ne[I]=Ge,ne[Ie]=re,I=Ie;else break e}}return ee}function o(ne,ee){var re=ne.sortIndex-ee.sortIndex;return re!==0?re:ne.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var d=[],p=[],m=1,y=null,x=3,_=!1,k=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(ne){for(var ee=t(p);ee!==null;){if(ee.callback===null)s(p);else if(ee.startTime<=ne)s(p),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(p)}}function M(ne){if(b=!1,E(ne),!k)if(t(d)!==null)k=!0,J(Y);else{var ee=t(p);ee!==null&&oe(M,ee.startTime-ne)}}function Y(ne,ee){k=!1,b&&(b=!1,A(ie),ie=-1),_=!0;var re=x;try{for(E(ee),y=t(d);y!==null&&(!(y.expirationTime>ee)||ne&&!se());){var I=y.callback;if(typeof I=="function"){y.callback=null,x=y.priorityLevel;var G=I(y.expirationTime<=ee);ee=i.unstable_now(),typeof G=="function"?y.callback=G:y===t(d)&&s(d),E(ee)}else s(d);y=t(d)}if(y!==null)var Ae=!0;else{var Re=t(p);Re!==null&&oe(M,Re.startTime-ee),Ae=!1}return Ae}finally{y=null,x=re,_=!1}}var N=!1,$=null,ie=-1,ae=5,te=-1;function se(){return!(i.unstable_now()-te<ae)}function ve(){if($!==null){var ne=i.unstable_now();te=ne;var ee=!0;try{ee=$(!0,ne)}finally{ee?ge():(N=!1,$=null)}}else N=!1}var ge;if(typeof P=="function")ge=function(){P(ve)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,ut=Me.port2;Me.port1.onmessage=ve,ge=function(){ut.postMessage(null)}}else ge=function(){w(ve,0)};function J(ne){$=ne,N||(N=!0,ge())}function oe(ne,ee){ie=w(function(){ne(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ne){ne.callback=null},i.unstable_continueExecution=function(){k||_||(k=!0,J(Y))},i.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<ne?Math.floor(1e3/ne):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(ne){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var re=x;x=ee;try{return ne()}finally{x=re}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ne,ee){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var re=x;x=ne;try{return ee()}finally{x=re}},i.unstable_scheduleCallback=function(ne,ee,re){var I=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?I+re:I):re=I,ne){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=re+G,ne={id:m++,callback:ee,priorityLevel:ne,startTime:re,expirationTime:G,sortIndex:-1},re>I?(ne.sortIndex=re,e(p,ne),t(d)===null&&ne===t(p)&&(b?(A(ie),ie=-1):b=!0,oe(M,re-I))):(ne.sortIndex=G,e(d,ne),k||_||(k=!0,J(Y))),ne},i.unstable_shouldYield=se,i.unstable_wrapCallback=function(ne){var ee=x;return function(){var re=x;x=ee;try{return ne.apply(this,arguments)}finally{x=re}}}})(Ku)),Ku}var If;function kg(){return If||(If=1,qu.exports=Sg()),qu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff;function bg(){if(Ff)return Zt;Ff=1;var i=Yc(),e=kg();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,r){u(n,r),u(n+"Capture",r)}function u(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function x(n){return d.call(y,n)?!0:d.call(m,n)?!1:p.test(n)?y[n]=!0:(m[n]=!0,!1)}function _(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k(n,r,a,c){if(r===null||typeof r>"u"||_(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function b(n,r,a,c,f,g,v){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=g,this.removeEmptyString=v}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){w[n]=new b(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];w[r]=new b(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){w[n]=new b(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){w[n]=new b(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){w[n]=new b(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){w[n]=new b(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){w[n]=new b(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){w[n]=new b(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){w[n]=new b(n,5,!1,n.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function P(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(A,P);w[r]=new b(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(A,P);w[r]=new b(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(A,P);w[r]=new b(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){w[n]=new b(n,1,!1,n.toLowerCase(),null,!1,!1)}),w.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){w[n]=new b(n,1,!1,n.toLowerCase(),null,!0,!0)});function E(n,r,a,c){var f=w.hasOwnProperty(r)?w[r]:null;(f!==null?f.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(k(r,a,f,c)&&(a=null),c||f===null?x(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(r=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(r):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var M=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),N=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),se=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),ut=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ee(n){return n===null||typeof n!="object"?null:(n=ne&&n[ne]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,I;function G(n){if(I===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);I=r&&r[1]||""}return`
`+I+n}var Ae=!1;function Re(n,r){if(!n||Ae)return"";Ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(O){var c=O}Reflect.construct(n,[],r)}else{try{r.call()}catch(O){c=O}n.call(r.prototype)}else{try{throw Error()}catch(O){c=O}n()}}catch(O){if(O&&c&&typeof O.stack=="string"){for(var f=O.stack.split(`
`),g=c.stack.split(`
`),v=f.length-1,C=g.length-1;1<=v&&0<=C&&f[v]!==g[C];)C--;for(;1<=v&&0<=C;v--,C--)if(f[v]!==g[C]){if(v!==1||C!==1)do if(v--,C--,0>C||f[v]!==g[C]){var T=`
`+f[v].replace(" at new "," at ");return n.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",n.displayName)),T}while(1<=v&&0<=C);break}}}finally{Ae=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function Fe(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function Ie(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $:return"Fragment";case N:return"Portal";case ae:return"Profiler";case ie:return"StrictMode";case ge:return"Suspense";case Me:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case se:return(n.displayName||"Context")+".Consumer";case te:return(n._context.displayName||"Context")+".Provider";case ve:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ut:return r=n.displayName||null,r!==null?r:Ie(n.type)||"Memo";case J:r=n._payload,n=n._init;try{return Ie(n(r))}catch{}}return null}function Ge(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(r);case 8:return r===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ee(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ne(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function tt(n){var r=Ne(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){c=""+v,g.call(this,v)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function tn(n){n._valueTracker||(n._valueTracker=tt(n))}function nn(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Ne(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Gt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function rn(n,r){var a=r.checked;return re({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ht(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Ee(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Dr(n,r){r=r.checked,r!=null&&E(n,"checked",r,!1)}function Qn(n,r){Dr(n,r);var a=Ee(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Zn(n,r.type,a):r.hasOwnProperty("defaultValue")&&Zn(n,r.type,Ee(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function _t(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Zn(n,r,a){(r!=="number"||Gt(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ct=Array.isArray;function kn(n,r,a,c){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ee(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function as(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Or(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(ct(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Ee(a)}}function ls(n,r){var a=Ee(r.value),c=Ee(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function bn(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function $r(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function us(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?$r(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mr,_o=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,f)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(mr=mr||document.createElement("div"),mr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=mr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function jn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wo=["Webkit","ms","Moz","O"];Object.keys(Dn).forEach(function(n){wo.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Dn[r]=Dn[n]})});function cs(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Dn.hasOwnProperty(n)&&Dn[n]?(""+r).trim():r+"px"}function hs(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=cs(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var Nr=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vt(n,r){if(r){if(Nr[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function ds(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fs=null;function Ur(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ps=null,On=null,gr=null;function pe(n){if(n=Is(n)){if(typeof ps!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Vo(r),ps(n.stateNode,n.type,r))}}function ms(n){On?gr?gr.push(n):gr=[n]:On=n}function gi(){if(On){var n=On,r=gr;if(gr=On=null,pe(n),r)for(n=0;n<r.length;n++)pe(r[n])}}function So(n,r){return n(r)}function ko(){}var yi=!1;function bo(n,r,a){if(yi)return n(r,a);yi=!0;try{return So(n,r,a)}finally{yi=!1,(On!==null||gr!==null)&&(ko(),gi())}}function Jn(n,r){var a=n.stateNode;if(a===null)return null;var c=Vo(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var xi=!1;if(h)try{var er={};Object.defineProperty(er,"passive",{get:function(){xi=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{xi=!1}function Co(n,r,a,c,f,g,v,C,T){var O=Array.prototype.slice.call(arguments,3);try{r.apply(a,O)}catch(V){this.onError(V)}}var yr=!1,vi=null,_i=!1,gs=null,ul={onError:function(n){yr=!0,vi=n}};function Wr(n,r,a,c,f,g,v,C,T){yr=!1,vi=null,Co.apply(ul,arguments)}function cl(n,r,a,c,f,g,v,C,T){if(Wr.apply(this,arguments),yr){if(yr){var O=vi;yr=!1,vi=null}else throw Error(t(198));_i||(_i=!0,gs=O)}}function $n(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function wi(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Ao(n){if($n(n)!==n)throw Error(t(188))}function hl(n){var r=n.alternate;if(!r){if(r=$n(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Ao(f),n;if(g===c)return Ao(f),r;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var v=!1,C=f.child;C;){if(C===a){v=!0,a=f,c=g;break}if(C===c){v=!0,c=f,a=g;break}C=C.sibling}if(!v){for(C=g.child;C;){if(C===a){v=!0,a=g,c=f;break}if(C===c){v=!0,c=g,a=f;break}C=C.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function Po(n){return n=hl(n),n!==null?To(n):null}function To(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=To(n);if(r!==null)return r;n=n.sibling}return null}var Gr=e.unstable_scheduleCallback,Eo=e.unstable_cancelCallback,dl=e.unstable_shouldYield,fl=e.unstable_requestPaint,ht=e.unstable_now,pl=e.unstable_getCurrentPriorityLevel,ys=e.unstable_ImmediatePriority,Mo=e.unstable_UserBlockingPriority,Si=e.unstable_NormalPriority,ml=e.unstable_LowPriority,Ro=e.unstable_IdlePriority,Qe=null,Ze=null;function qe(n){if(Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Qe,n,void 0,(n.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:gl,ot=Math.log,xr=Math.LN2;function gl(n){return n>>>=0,n===0?32:31-(ot(n)/xr|0)|0}var Hr=64,Vr=4194304;function vr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Yr(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,v=a&268435455;if(v!==0){var C=v&~f;C!==0?c=vr(C):(g&=v,g!==0&&(c=vr(g)))}else v=a&~f,v!==0?c=vr(v):g!==0&&(c=vr(g));if(c===0)return 0;if(r!==0&&r!==c&&(r&f)===0&&(f=c&-c,g=r&-r,f>=g||f===16&&(g&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-sn(r),f=1<<a,c|=n[a],r&=~f;return c}function S(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-sn(g),C=1<<v,T=f[v];T===-1?((C&a)===0||(C&c)!==0)&&(f[v]=S(C,r)):T<=r&&(n.expiredLanes|=C),g&=~C}}function L(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function D(){var n=Hr;return Hr<<=1,(Hr&4194240)===0&&(Hr=64),n}function U(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function X(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-sn(r),n[r]=a}function Q(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-sn(a),g=1<<f;r[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function K(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-sn(a),f=1<<c;f&r|n[c]&r&&(n[c]|=r),a&=~f}}var W=0;function Se(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Pe,ke,Le,ue,de,be=!1,Ve=[],je=null,Oe=null,Ye=null,bt=new Map,dt=new Map,Nn=[],yl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uh(n,r){switch(n){case"focusin":case"focusout":je=null;break;case"dragenter":case"dragleave":Oe=null;break;case"mouseover":case"mouseout":Ye=null;break;case"pointerover":case"pointerout":bt.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(r.pointerId)}}function xs(n,r,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},r!==null&&(r=Is(r),r!==null&&ke(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function U0(n,r,a,c,f){switch(r){case"focusin":return je=xs(je,n,r,a,c,f),!0;case"dragenter":return Oe=xs(Oe,n,r,a,c,f),!0;case"mouseover":return Ye=xs(Ye,n,r,a,c,f),!0;case"pointerover":var g=f.pointerId;return bt.set(g,xs(bt.get(g)||null,n,r,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,dt.set(g,xs(dt.get(g)||null,n,r,a,c,f)),!0}return!1}function ch(n){var r=Xr(n.target);if(r!==null){var a=$n(r);if(a!==null){if(r=a.tag,r===13){if(r=wi(a),r!==null){n.blockedOn=r,de(n.priority,function(){Le(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Io(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=vl(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);fs=c,a.target.dispatchEvent(c),fs=null}else return r=Is(a),r!==null&&ke(r),n.blockedOn=a,!1;r.shift()}return!0}function hh(n,r,a){Io(n)&&a.delete(r)}function W0(){be=!1,je!==null&&Io(je)&&(je=null),Oe!==null&&Io(Oe)&&(Oe=null),Ye!==null&&Io(Ye)&&(Ye=null),bt.forEach(hh),dt.forEach(hh)}function vs(n,r){n.blockedOn===r&&(n.blockedOn=null,be||(be=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,W0)))}function _s(n){function r(f){return vs(f,n)}if(0<Ve.length){vs(Ve[0],n);for(var a=1;a<Ve.length;a++){var c=Ve[a];c.blockedOn===n&&(c.blockedOn=null)}}for(je!==null&&vs(je,n),Oe!==null&&vs(Oe,n),Ye!==null&&vs(Ye,n),bt.forEach(r),dt.forEach(r),a=0;a<Nn.length;a++)c=Nn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Nn.length&&(a=Nn[0],a.blockedOn===null);)ch(a),a.blockedOn===null&&Nn.shift()}var ki=M.ReactCurrentBatchConfig,Fo=!0;function G0(n,r,a,c){var f=W,g=ki.transition;ki.transition=null;try{W=1,xl(n,r,a,c)}finally{W=f,ki.transition=g}}function H0(n,r,a,c){var f=W,g=ki.transition;ki.transition=null;try{W=4,xl(n,r,a,c)}finally{W=f,ki.transition=g}}function xl(n,r,a,c){if(Fo){var f=vl(n,r,a,c);if(f===null)Bl(n,r,c,Lo,a),uh(n,c);else if(U0(f,n,r,a,c))c.stopPropagation();else if(uh(n,c),r&4&&-1<yl.indexOf(n)){for(;f!==null;){var g=Is(f);if(g!==null&&Pe(g),g=vl(n,r,a,c),g===null&&Bl(n,r,c,Lo,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else Bl(n,r,c,null,a)}}var Lo=null;function vl(n,r,a,c){if(Lo=null,n=Ur(c),n=Xr(n),n!==null)if(r=$n(n),r===null)n=null;else if(a=r.tag,a===13){if(n=wi(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Lo=n,null}function dh(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pl()){case ys:return 1;case Mo:return 4;case Si:case ml:return 16;case Ro:return 536870912;default:return 16}default:return 16}}var _r=null,_l=null,zo=null;function fh(){if(zo)return zo;var n,r=_l,a=r.length,c,f="value"in _r?_r.value:_r.textContent,g=f.length;for(n=0;n<a&&r[n]===f[n];n++);var v=a-n;for(c=1;c<=v&&r[a-c]===f[g-c];c++);return zo=f.slice(n,1<c?1-c:void 0)}function Bo(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function jo(){return!0}function ph(){return!1}function on(n){function r(a,c,f,g,v){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?jo:ph,this.isPropagationStopped=ph,this}return re(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),r}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wl=on(bi),ws=re({},bi,{view:0,detail:0}),V0=on(ws),Sl,kl,Ss,Do=re({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ss&&(Ss&&n.type==="mousemove"?(Sl=n.screenX-Ss.screenX,kl=n.screenY-Ss.screenY):kl=Sl=0,Ss=n),Sl)},movementY:function(n){return"movementY"in n?n.movementY:kl}}),mh=on(Do),Y0=re({},Do,{dataTransfer:0}),X0=on(Y0),q0=re({},ws,{relatedTarget:0}),bl=on(q0),K0=re({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Q0=on(K0),Z0=re({},bi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),J0=on(Z0),em=re({},bi,{data:0}),gh=on(em),tm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function im(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=rm[n])?!!r[n]:!1}function Cl(){return im}var sm=re({},ws,{key:function(n){if(n.key){var r=tm[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Bo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?nm[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cl,charCode:function(n){return n.type==="keypress"?Bo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),om=on(sm),am=re({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yh=on(am),lm=re({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cl}),um=on(lm),cm=re({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),hm=on(cm),dm=re({},Do,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fm=on(dm),pm=[9,13,27,32],Al=h&&"CompositionEvent"in window,ks=null;h&&"documentMode"in document&&(ks=document.documentMode);var mm=h&&"TextEvent"in window&&!ks,xh=h&&(!Al||ks&&8<ks&&11>=ks),vh=" ",_h=!1;function wh(n,r){switch(n){case"keyup":return pm.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ci=!1;function gm(n,r){switch(n){case"compositionend":return Sh(r);case"keypress":return r.which!==32?null:(_h=!0,vh);case"textInput":return n=r.data,n===vh&&_h?null:n;default:return null}}function ym(n,r){if(Ci)return n==="compositionend"||!Al&&wh(n,r)?(n=fh(),zo=_l=_r=null,Ci=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return xh&&r.locale!=="ko"?null:r.data;default:return null}}var xm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kh(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!xm[n.type]:r==="textarea"}function bh(n,r,a,c){ms(c),r=Wo(r,"onChange"),0<r.length&&(a=new wl("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var bs=null,Cs=null;function vm(n){Uh(n,0)}function Oo(n){var r=Mi(n);if(nn(r))return n}function _m(n,r){if(n==="change")return r}var Ch=!1;if(h){var Pl;if(h){var Tl="oninput"in document;if(!Tl){var Ah=document.createElement("div");Ah.setAttribute("oninput","return;"),Tl=typeof Ah.oninput=="function"}Pl=Tl}else Pl=!1;Ch=Pl&&(!document.documentMode||9<document.documentMode)}function Ph(){bs&&(bs.detachEvent("onpropertychange",Th),Cs=bs=null)}function Th(n){if(n.propertyName==="value"&&Oo(Cs)){var r=[];bh(r,Cs,n,Ur(n)),bo(vm,r)}}function wm(n,r,a){n==="focusin"?(Ph(),bs=r,Cs=a,bs.attachEvent("onpropertychange",Th)):n==="focusout"&&Ph()}function Sm(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Oo(Cs)}function km(n,r){if(n==="click")return Oo(r)}function bm(n,r){if(n==="input"||n==="change")return Oo(r)}function Cm(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Cn=typeof Object.is=="function"?Object.is:Cm;function As(n,r){if(Cn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!d.call(r,f)||!Cn(n[f],r[f]))return!1}return!0}function Eh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Mh(n,r){var a=Eh(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Eh(a)}}function Rh(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Rh(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Ih(){for(var n=window,r=Gt();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Gt(n.document)}return r}function El(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function Am(n){var r=Ih(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Rh(a.ownerDocument.documentElement,a)){if(c!==null&&El(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=Mh(a,g);var v=Mh(a,c);f&&v&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(r),n.extend(v.node,v.offset)):(r.setEnd(v.node,v.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Pm=h&&"documentMode"in document&&11>=document.documentMode,Ai=null,Ml=null,Ps=null,Rl=!1;function Fh(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rl||Ai==null||Ai!==Gt(c)||(c=Ai,"selectionStart"in c&&El(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ps&&As(Ps,c)||(Ps=c,c=Wo(Ml,"onSelect"),0<c.length&&(r=new wl("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Ai)))}function $o(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Pi={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionend:$o("Transition","TransitionEnd")},Il={},Lh={};h&&(Lh=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function No(n){if(Il[n])return Il[n];if(!Pi[n])return n;var r=Pi[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Lh)return Il[n]=r[a];return n}var zh=No("animationend"),Bh=No("animationiteration"),jh=No("animationstart"),Dh=No("transitionend"),Oh=new Map,$h="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(n,r){Oh.set(n,r),l(r,[n])}for(var Fl=0;Fl<$h.length;Fl++){var Ll=$h[Fl],Tm=Ll.toLowerCase(),Em=Ll[0].toUpperCase()+Ll.slice(1);wr(Tm,"on"+Em)}wr(zh,"onAnimationEnd"),wr(Bh,"onAnimationIteration"),wr(jh,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(Dh,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function Nh(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,cl(c,r,void 0,n),n.currentTarget=null}function Uh(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(r)for(var v=c.length-1;0<=v;v--){var C=c[v],T=C.instance,O=C.currentTarget;if(C=C.listener,T!==g&&f.isPropagationStopped())break e;Nh(f,C,O),g=T}else for(v=0;v<c.length;v++){if(C=c[v],T=C.instance,O=C.currentTarget,C=C.listener,T!==g&&f.isPropagationStopped())break e;Nh(f,C,O),g=T}}}if(_i)throw n=gs,_i=!1,gs=null,n}function nt(n,r){var a=r[Ul];a===void 0&&(a=r[Ul]=new Set);var c=n+"__bubble";a.has(c)||(Wh(r,n,2,!1),a.add(c))}function zl(n,r,a){var c=0;r&&(c|=4),Wh(a,n,c,r)}var Uo="_reactListening"+Math.random().toString(36).slice(2);function Es(n){if(!n[Uo]){n[Uo]=!0,s.forEach(function(a){a!=="selectionchange"&&(Mm.has(a)||zl(a,!1,n),zl(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Uo]||(r[Uo]=!0,zl("selectionchange",!1,r))}}function Wh(n,r,a,c){switch(dh(r)){case 1:var f=G0;break;case 4:f=H0;break;default:f=xl}a=f.bind(null,r,a,n),f=void 0,!xi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function Bl(n,r,a,c,f){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var C=c.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(v===4)for(v=c.return;v!==null;){var T=v.tag;if((T===3||T===4)&&(T=v.stateNode.containerInfo,T===f||T.nodeType===8&&T.parentNode===f))return;v=v.return}for(;C!==null;){if(v=Xr(C),v===null)return;if(T=v.tag,T===5||T===6){c=g=v;continue e}C=C.parentNode}}c=c.return}bo(function(){var O=g,V=Ur(a),q=[];e:{var H=Oh.get(n);if(H!==void 0){var le=wl,he=n;switch(n){case"keypress":if(Bo(a)===0)break e;case"keydown":case"keyup":le=om;break;case"focusin":he="focus",le=bl;break;case"focusout":he="blur",le=bl;break;case"beforeblur":case"afterblur":le=bl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=X0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=um;break;case zh:case Bh:case jh:le=Q0;break;case Dh:le=hm;break;case"scroll":le=V0;break;case"wheel":le=fm;break;case"copy":case"cut":case"paste":le=J0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=yh}var fe=(r&4)!==0,wt=!fe&&n==="scroll",B=fe?H!==null?H+"Capture":null:H;fe=[];for(var R=O,j;R!==null;){j=R;var Z=j.stateNode;if(j.tag===5&&Z!==null&&(j=Z,B!==null&&(Z=Jn(R,B),Z!=null&&fe.push(Ms(R,Z,j)))),wt)break;R=R.return}0<fe.length&&(H=new le(H,he,null,a,V),q.push({event:H,listeners:fe}))}}if((r&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",H&&a!==fs&&(he=a.relatedTarget||a.fromElement)&&(Xr(he)||he[tr]))break e;if((le||H)&&(H=V.window===V?V:(H=V.ownerDocument)?H.defaultView||H.parentWindow:window,le?(he=a.relatedTarget||a.toElement,le=O,he=he?Xr(he):null,he!==null&&(wt=$n(he),he!==wt||he.tag!==5&&he.tag!==6)&&(he=null)):(le=null,he=O),le!==he)){if(fe=mh,Z="onMouseLeave",B="onMouseEnter",R="mouse",(n==="pointerout"||n==="pointerover")&&(fe=yh,Z="onPointerLeave",B="onPointerEnter",R="pointer"),wt=le==null?H:Mi(le),j=he==null?H:Mi(he),H=new fe(Z,R+"leave",le,a,V),H.target=wt,H.relatedTarget=j,Z=null,Xr(V)===O&&(fe=new fe(B,R+"enter",he,a,V),fe.target=j,fe.relatedTarget=wt,Z=fe),wt=Z,le&&he)t:{for(fe=le,B=he,R=0,j=fe;j;j=Ti(j))R++;for(j=0,Z=B;Z;Z=Ti(Z))j++;for(;0<R-j;)fe=Ti(fe),R--;for(;0<j-R;)B=Ti(B),j--;for(;R--;){if(fe===B||B!==null&&fe===B.alternate)break t;fe=Ti(fe),B=Ti(B)}fe=null}else fe=null;le!==null&&Gh(q,H,le,fe,!1),he!==null&&wt!==null&&Gh(q,wt,he,fe,!0)}}e:{if(H=O?Mi(O):window,le=H.nodeName&&H.nodeName.toLowerCase(),le==="select"||le==="input"&&H.type==="file")var me=_m;else if(kh(H))if(Ch)me=bm;else{me=Sm;var _e=wm}else(le=H.nodeName)&&le.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(me=km);if(me&&(me=me(n,O))){bh(q,me,a,V);break e}_e&&_e(n,H,O),n==="focusout"&&(_e=H._wrapperState)&&_e.controlled&&H.type==="number"&&Zn(H,"number",H.value)}switch(_e=O?Mi(O):window,n){case"focusin":(kh(_e)||_e.contentEditable==="true")&&(Ai=_e,Ml=O,Ps=null);break;case"focusout":Ps=Ml=Ai=null;break;case"mousedown":Rl=!0;break;case"contextmenu":case"mouseup":case"dragend":Rl=!1,Fh(q,a,V);break;case"selectionchange":if(Pm)break;case"keydown":case"keyup":Fh(q,a,V)}var we;if(Al)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Ci?wh(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(xh&&a.locale!=="ko"&&(Ci||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Ci&&(we=fh()):(_r=V,_l="value"in _r?_r.value:_r.textContent,Ci=!0)),_e=Wo(O,Te),0<_e.length&&(Te=new gh(Te,n,null,a,V),q.push({event:Te,listeners:_e}),we?Te.data=we:(we=Sh(a),we!==null&&(Te.data=we)))),(we=mm?gm(n,a):ym(n,a))&&(O=Wo(O,"onBeforeInput"),0<O.length&&(V=new gh("onBeforeInput","beforeinput",null,a,V),q.push({event:V,listeners:O}),V.data=we))}Uh(q,r)})}function Ms(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Wo(n,r){for(var a=r+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=Jn(n,a),g!=null&&c.unshift(Ms(n,g,f)),g=Jn(n,r),g!=null&&c.push(Ms(n,g,f))),n=n.return}return c}function Ti(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gh(n,r,a,c,f){for(var g=r._reactName,v=[];a!==null&&a!==c;){var C=a,T=C.alternate,O=C.stateNode;if(T!==null&&T===c)break;C.tag===5&&O!==null&&(C=O,f?(T=Jn(a,g),T!=null&&v.unshift(Ms(a,T,C))):f||(T=Jn(a,g),T!=null&&v.push(Ms(a,T,C)))),a=a.return}v.length!==0&&n.push({event:r,listeners:v})}var Rm=/\r\n?/g,Im=/\u0000|\uFFFD/g;function Hh(n){return(typeof n=="string"?n:""+n).replace(Rm,`
`).replace(Im,"")}function Go(n,r,a){if(r=Hh(r),Hh(n)!==r&&a)throw Error(t(425))}function Ho(){}var jl=null,Dl=null;function Ol(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var $l=typeof setTimeout=="function"?setTimeout:void 0,Fm=typeof clearTimeout=="function"?clearTimeout:void 0,Vh=typeof Promise=="function"?Promise:void 0,Lm=typeof queueMicrotask=="function"?queueMicrotask:typeof Vh<"u"?function(n){return Vh.resolve(null).then(n).catch(zm)}:$l;function zm(n){setTimeout(function(){throw n})}function Nl(n,r){var a=r,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),_s(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);_s(r)}function Sr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Yh(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Ei=Math.random().toString(36).slice(2),Un="__reactFiber$"+Ei,Rs="__reactProps$"+Ei,tr="__reactContainer$"+Ei,Ul="__reactEvents$"+Ei,Bm="__reactListeners$"+Ei,jm="__reactHandles$"+Ei;function Xr(n){var r=n[Un];if(r)return r;for(var a=n.parentNode;a;){if(r=a[tr]||a[Un]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Yh(n);n!==null;){if(a=n[Un])return a;n=Yh(n)}return r}n=a,a=n.parentNode}return null}function Is(n){return n=n[Un]||n[tr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Mi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Vo(n){return n[Rs]||null}var Wl=[],Ri=-1;function kr(n){return{current:n}}function rt(n){0>Ri||(n.current=Wl[Ri],Wl[Ri]=null,Ri--)}function Je(n,r){Ri++,Wl[Ri]=n.current,n.current=r}var br={},zt=kr(br),Yt=kr(!1),qr=br;function Ii(n,r){var a=n.type.contextTypes;if(!a)return br;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=r[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=f),f}function Xt(n){return n=n.childContextTypes,n!=null}function Yo(){rt(Yt),rt(zt)}function Xh(n,r,a){if(zt.current!==br)throw Error(t(168));Je(zt,r),Je(Yt,a)}function qh(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in r))throw Error(t(108,Ge(n)||"Unknown",f));return re({},a,c)}function Xo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||br,qr=zt.current,Je(zt,n),Je(Yt,Yt.current),!0}function Kh(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=qh(n,r,qr),c.__reactInternalMemoizedMergedChildContext=n,rt(Yt),rt(zt),Je(zt,n)):rt(Yt),Je(Yt,a)}var nr=null,qo=!1,Gl=!1;function Qh(n){nr===null?nr=[n]:nr.push(n)}function Dm(n){qo=!0,Qh(n)}function Cr(){if(!Gl&&nr!==null){Gl=!0;var n=0,r=W;try{var a=nr;for(W=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}nr=null,qo=!1}catch(f){throw nr!==null&&(nr=nr.slice(n+1)),Gr(ys,Cr),f}finally{W=r,Gl=!1}}return null}var Fi=[],Li=0,Ko=null,Qo=0,fn=[],pn=0,Kr=null,rr=1,ir="";function Qr(n,r){Fi[Li++]=Qo,Fi[Li++]=Ko,Ko=n,Qo=r}function Zh(n,r,a){fn[pn++]=rr,fn[pn++]=ir,fn[pn++]=Kr,Kr=n;var c=rr;n=ir;var f=32-sn(c)-1;c&=~(1<<f),a+=1;var g=32-sn(r)+f;if(30<g){var v=f-f%5;g=(c&(1<<v)-1).toString(32),c>>=v,f-=v,rr=1<<32-sn(r)+f|a<<f|c,ir=g+n}else rr=1<<g|a<<f|c,ir=n}function Hl(n){n.return!==null&&(Qr(n,1),Zh(n,1,0))}function Vl(n){for(;n===Ko;)Ko=Fi[--Li],Fi[Li]=null,Qo=Fi[--Li],Fi[Li]=null;for(;n===Kr;)Kr=fn[--pn],fn[pn]=null,ir=fn[--pn],fn[pn]=null,rr=fn[--pn],fn[pn]=null}var an=null,ln=null,at=!1,An=null;function Jh(n,r){var a=xn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function ed(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,an=n,ln=Sr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,an=n,ln=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Kr!==null?{id:rr,overflow:ir}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=xn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,an=n,ln=null,!0):!1;default:return!1}}function Yl(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Xl(n){if(at){var r=ln;if(r){var a=r;if(!ed(n,r)){if(Yl(n))throw Error(t(418));r=Sr(a.nextSibling);var c=an;r&&ed(n,r)?Jh(c,a):(n.flags=n.flags&-4097|2,at=!1,an=n)}}else{if(Yl(n))throw Error(t(418));n.flags=n.flags&-4097|2,at=!1,an=n}}}function td(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;an=n}function Zo(n){if(n!==an)return!1;if(!at)return td(n),at=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Ol(n.type,n.memoizedProps)),r&&(r=ln)){if(Yl(n))throw nd(),Error(t(418));for(;r;)Jh(n,r),r=Sr(r.nextSibling)}if(td(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){ln=Sr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}ln=null}}else ln=an?Sr(n.stateNode.nextSibling):null;return!0}function nd(){for(var n=ln;n;)n=Sr(n.nextSibling)}function zi(){ln=an=null,at=!1}function ql(n){An===null?An=[n]:An.push(n)}var Om=M.ReactCurrentBatchConfig;function Fs(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(v){var C=f.refs;v===null?delete C[g]:C[g]=v},r._stringRef=g,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Jo(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function rd(n){var r=n._init;return r(n._payload)}function id(n){function r(B,R){if(n){var j=B.deletions;j===null?(B.deletions=[R],B.flags|=16):j.push(R)}}function a(B,R){if(!n)return null;for(;R!==null;)r(B,R),R=R.sibling;return null}function c(B,R){for(B=new Map;R!==null;)R.key!==null?B.set(R.key,R):B.set(R.index,R),R=R.sibling;return B}function f(B,R){return B=Fr(B,R),B.index=0,B.sibling=null,B}function g(B,R,j){return B.index=j,n?(j=B.alternate,j!==null?(j=j.index,j<R?(B.flags|=2,R):j):(B.flags|=2,R)):(B.flags|=1048576,R)}function v(B){return n&&B.alternate===null&&(B.flags|=2),B}function C(B,R,j,Z){return R===null||R.tag!==6?(R=$u(j,B.mode,Z),R.return=B,R):(R=f(R,j),R.return=B,R)}function T(B,R,j,Z){var me=j.type;return me===$?V(B,R,j.props.children,Z,j.key):R!==null&&(R.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===J&&rd(me)===R.type)?(Z=f(R,j.props),Z.ref=Fs(B,R,j),Z.return=B,Z):(Z=ka(j.type,j.key,j.props,null,B.mode,Z),Z.ref=Fs(B,R,j),Z.return=B,Z)}function O(B,R,j,Z){return R===null||R.tag!==4||R.stateNode.containerInfo!==j.containerInfo||R.stateNode.implementation!==j.implementation?(R=Nu(j,B.mode,Z),R.return=B,R):(R=f(R,j.children||[]),R.return=B,R)}function V(B,R,j,Z,me){return R===null||R.tag!==7?(R=si(j,B.mode,Z,me),R.return=B,R):(R=f(R,j),R.return=B,R)}function q(B,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return R=$u(""+R,B.mode,j),R.return=B,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Y:return j=ka(R.type,R.key,R.props,null,B.mode,j),j.ref=Fs(B,null,R),j.return=B,j;case N:return R=Nu(R,B.mode,j),R.return=B,R;case J:var Z=R._init;return q(B,Z(R._payload),j)}if(ct(R)||ee(R))return R=si(R,B.mode,j,null),R.return=B,R;Jo(B,R)}return null}function H(B,R,j,Z){var me=R!==null?R.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return me!==null?null:C(B,R,""+j,Z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Y:return j.key===me?T(B,R,j,Z):null;case N:return j.key===me?O(B,R,j,Z):null;case J:return me=j._init,H(B,R,me(j._payload),Z)}if(ct(j)||ee(j))return me!==null?null:V(B,R,j,Z,null);Jo(B,j)}return null}function le(B,R,j,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return B=B.get(j)||null,C(R,B,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Y:return B=B.get(Z.key===null?j:Z.key)||null,T(R,B,Z,me);case N:return B=B.get(Z.key===null?j:Z.key)||null,O(R,B,Z,me);case J:var _e=Z._init;return le(B,R,j,_e(Z._payload),me)}if(ct(Z)||ee(Z))return B=B.get(j)||null,V(R,B,Z,me,null);Jo(R,Z)}return null}function he(B,R,j,Z){for(var me=null,_e=null,we=R,Te=R=0,Et=null;we!==null&&Te<j.length;Te++){we.index>Te?(Et=we,we=null):Et=we.sibling;var We=H(B,we,j[Te],Z);if(We===null){we===null&&(we=Et);break}n&&we&&We.alternate===null&&r(B,we),R=g(We,R,Te),_e===null?me=We:_e.sibling=We,_e=We,we=Et}if(Te===j.length)return a(B,we),at&&Qr(B,Te),me;if(we===null){for(;Te<j.length;Te++)we=q(B,j[Te],Z),we!==null&&(R=g(we,R,Te),_e===null?me=we:_e.sibling=we,_e=we);return at&&Qr(B,Te),me}for(we=c(B,we);Te<j.length;Te++)Et=le(we,B,Te,j[Te],Z),Et!==null&&(n&&Et.alternate!==null&&we.delete(Et.key===null?Te:Et.key),R=g(Et,R,Te),_e===null?me=Et:_e.sibling=Et,_e=Et);return n&&we.forEach(function(Lr){return r(B,Lr)}),at&&Qr(B,Te),me}function fe(B,R,j,Z){var me=ee(j);if(typeof me!="function")throw Error(t(150));if(j=me.call(j),j==null)throw Error(t(151));for(var _e=me=null,we=R,Te=R=0,Et=null,We=j.next();we!==null&&!We.done;Te++,We=j.next()){we.index>Te?(Et=we,we=null):Et=we.sibling;var Lr=H(B,we,We.value,Z);if(Lr===null){we===null&&(we=Et);break}n&&we&&Lr.alternate===null&&r(B,we),R=g(Lr,R,Te),_e===null?me=Lr:_e.sibling=Lr,_e=Lr,we=Et}if(We.done)return a(B,we),at&&Qr(B,Te),me;if(we===null){for(;!We.done;Te++,We=j.next())We=q(B,We.value,Z),We!==null&&(R=g(We,R,Te),_e===null?me=We:_e.sibling=We,_e=We);return at&&Qr(B,Te),me}for(we=c(B,we);!We.done;Te++,We=j.next())We=le(we,B,Te,We.value,Z),We!==null&&(n&&We.alternate!==null&&we.delete(We.key===null?Te:We.key),R=g(We,R,Te),_e===null?me=We:_e.sibling=We,_e=We);return n&&we.forEach(function(xg){return r(B,xg)}),at&&Qr(B,Te),me}function wt(B,R,j,Z){if(typeof j=="object"&&j!==null&&j.type===$&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Y:e:{for(var me=j.key,_e=R;_e!==null;){if(_e.key===me){if(me=j.type,me===$){if(_e.tag===7){a(B,_e.sibling),R=f(_e,j.props.children),R.return=B,B=R;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===J&&rd(me)===_e.type){a(B,_e.sibling),R=f(_e,j.props),R.ref=Fs(B,_e,j),R.return=B,B=R;break e}a(B,_e);break}else r(B,_e);_e=_e.sibling}j.type===$?(R=si(j.props.children,B.mode,Z,j.key),R.return=B,B=R):(Z=ka(j.type,j.key,j.props,null,B.mode,Z),Z.ref=Fs(B,R,j),Z.return=B,B=Z)}return v(B);case N:e:{for(_e=j.key;R!==null;){if(R.key===_e)if(R.tag===4&&R.stateNode.containerInfo===j.containerInfo&&R.stateNode.implementation===j.implementation){a(B,R.sibling),R=f(R,j.children||[]),R.return=B,B=R;break e}else{a(B,R);break}else r(B,R);R=R.sibling}R=Nu(j,B.mode,Z),R.return=B,B=R}return v(B);case J:return _e=j._init,wt(B,R,_e(j._payload),Z)}if(ct(j))return he(B,R,j,Z);if(ee(j))return fe(B,R,j,Z);Jo(B,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,R!==null&&R.tag===6?(a(B,R.sibling),R=f(R,j),R.return=B,B=R):(a(B,R),R=$u(j,B.mode,Z),R.return=B,B=R),v(B)):a(B,R)}return wt}var Bi=id(!0),sd=id(!1),ea=kr(null),ta=null,ji=null,Kl=null;function Ql(){Kl=ji=ta=null}function Zl(n){var r=ea.current;rt(ea),n._currentValue=r}function Jl(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Di(n,r){ta=n,Kl=ji=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(qt=!0),n.firstContext=null)}function mn(n){var r=n._currentValue;if(Kl!==n)if(n={context:n,memoizedValue:r,next:null},ji===null){if(ta===null)throw Error(t(308));ji=n,ta.dependencies={lanes:0,firstContext:n}}else ji=ji.next=n;return r}var Zr=null;function eu(n){Zr===null?Zr=[n]:Zr.push(n)}function od(n,r,a,c){var f=r.interleaved;return f===null?(a.next=a,eu(r)):(a.next=f.next,f.next=a),r.interleaved=a,sr(n,c)}function sr(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Ar=!1;function tu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ad(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function or(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Pr(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ue&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,sr(n,a)}return f=c.interleaved,f===null?(r.next=r,eu(c)):(r.next=f.next,f.next=r),c.interleaved=r,sr(n,a)}function na(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,K(n,a)}}function ld(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?f=g=r:g=g.next=r}else f=g=r;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function ra(n,r,a,c){var f=n.updateQueue;Ar=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var T=C,O=T.next;T.next=null,v===null?g=O:v.next=O,v=T;var V=n.alternate;V!==null&&(V=V.updateQueue,C=V.lastBaseUpdate,C!==v&&(C===null?V.firstBaseUpdate=O:C.next=O,V.lastBaseUpdate=T))}if(g!==null){var q=f.baseState;v=0,V=O=T=null,C=g;do{var H=C.lane,le=C.eventTime;if((c&H)===H){V!==null&&(V=V.next={eventTime:le,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var he=n,fe=C;switch(H=r,le=a,fe.tag){case 1:if(he=fe.payload,typeof he=="function"){q=he.call(le,q,H);break e}q=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,H=typeof he=="function"?he.call(le,q,H):he,H==null)break e;q=re({},q,H);break e;case 2:Ar=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,H=f.effects,H===null?f.effects=[C]:H.push(C))}else le={eventTime:le,lane:H,tag:C.tag,payload:C.payload,callback:C.callback,next:null},V===null?(O=V=le,T=q):V=V.next=le,v|=H;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;H=C,C=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);if(V===null&&(T=q),f.baseState=T,f.firstBaseUpdate=O,f.lastBaseUpdate=V,r=f.shared.interleaved,r!==null){f=r;do v|=f.lane,f=f.next;while(f!==r)}else g===null&&(f.shared.lanes=0);ti|=v,n.lanes=v,n.memoizedState=q}}function ud(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Ls={},Wn=kr(Ls),zs=kr(Ls),Bs=kr(Ls);function Jr(n){if(n===Ls)throw Error(t(174));return n}function nu(n,r){switch(Je(Bs,r),Je(zs,n),Je(Wn,Ls),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:us(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=us(r,n)}rt(Wn),Je(Wn,r)}function Oi(){rt(Wn),rt(zs),rt(Bs)}function cd(n){Jr(Bs.current);var r=Jr(Wn.current),a=us(r,n.type);r!==a&&(Je(zs,n),Je(Wn,a))}function ru(n){zs.current===n&&(rt(Wn),rt(zs))}var ft=kr(0);function ia(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var iu=[];function su(){for(var n=0;n<iu.length;n++)iu[n]._workInProgressVersionPrimary=null;iu.length=0}var sa=M.ReactCurrentDispatcher,ou=M.ReactCurrentBatchConfig,ei=0,pt=null,Ct=null,Pt=null,oa=!1,js=!1,Ds=0,$m=0;function Bt(){throw Error(t(321))}function au(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Cn(n[a],r[a]))return!1;return!0}function lu(n,r,a,c,f,g){if(ei=g,pt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,sa.current=n===null||n.memoizedState===null?Gm:Hm,n=a(c,f),js){g=0;do{if(js=!1,Ds=0,25<=g)throw Error(t(301));g+=1,Pt=Ct=null,r.updateQueue=null,sa.current=Vm,n=a(c,f)}while(js)}if(sa.current=ua,r=Ct!==null&&Ct.next!==null,ei=0,Pt=Ct=pt=null,oa=!1,r)throw Error(t(300));return n}function uu(){var n=Ds!==0;return Ds=0,n}function Gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?pt.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function gn(){if(Ct===null){var n=pt.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var r=Pt===null?pt.memoizedState:Pt.next;if(r!==null)Pt=r,Ct=n;else{if(n===null)throw Error(t(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Pt===null?pt.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function Os(n,r){return typeof r=="function"?r(n):r}function cu(n){var r=gn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Ct,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var C=v=null,T=null,O=g;do{var V=O.lane;if((ei&V)===V)T!==null&&(T=T.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),c=O.hasEagerState?O.eagerState:n(c,O.action);else{var q={lane:V,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};T===null?(C=T=q,v=c):T=T.next=q,pt.lanes|=V,ti|=V}O=O.next}while(O!==null&&O!==g);T===null?v=c:T.next=C,Cn(c,r.memoizedState)||(qt=!0),r.memoizedState=c,r.baseState=v,r.baseQueue=T,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,pt.lanes|=g,ti|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function hu(n){var r=gn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=r.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);Cn(g,r.memoizedState)||(qt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),a.lastRenderedState=g}return[g,c]}function hd(){}function dd(n,r){var a=pt,c=gn(),f=r(),g=!Cn(c.memoizedState,f);if(g&&(c.memoizedState=f,qt=!0),c=c.queue,du(md.bind(null,a,c,n),[n]),c.getSnapshot!==r||g||Pt!==null&&Pt.memoizedState.tag&1){if(a.flags|=2048,$s(9,pd.bind(null,a,c,f,r),void 0,null),Tt===null)throw Error(t(349));(ei&30)!==0||fd(a,r,f)}return f}function fd(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=pt.updateQueue,r===null?(r={lastEffect:null,stores:null},pt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function pd(n,r,a,c){r.value=a,r.getSnapshot=c,gd(r)&&yd(n)}function md(n,r,a){return a(function(){gd(r)&&yd(n)})}function gd(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Cn(n,a)}catch{return!0}}function yd(n){var r=sr(n,1);r!==null&&Mn(r,n,1,-1)}function xd(n){var r=Gn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:n},r.queue=n,n=n.dispatch=Wm.bind(null,pt,n),[r.memoizedState,n]}function $s(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=pt.updateQueue,r===null?(r={lastEffect:null,stores:null},pt.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function vd(){return gn().memoizedState}function aa(n,r,a,c){var f=Gn();pt.flags|=n,f.memoizedState=$s(1|r,a,void 0,c===void 0?null:c)}function la(n,r,a,c){var f=gn();c=c===void 0?null:c;var g=void 0;if(Ct!==null){var v=Ct.memoizedState;if(g=v.destroy,c!==null&&au(c,v.deps)){f.memoizedState=$s(r,a,g,c);return}}pt.flags|=n,f.memoizedState=$s(1|r,a,g,c)}function _d(n,r){return aa(8390656,8,n,r)}function du(n,r){return la(2048,8,n,r)}function wd(n,r){return la(4,2,n,r)}function Sd(n,r){return la(4,4,n,r)}function kd(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function bd(n,r,a){return a=a!=null?a.concat([n]):null,la(4,4,kd.bind(null,r,n),a)}function fu(){}function Cd(n,r){var a=gn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&au(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Ad(n,r){var a=gn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&au(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function Pd(n,r,a){return(ei&21)===0?(n.baseState&&(n.baseState=!1,qt=!0),n.memoizedState=a):(Cn(a,r)||(a=D(),pt.lanes|=a,ti|=a,n.baseState=!0),r)}function Nm(n,r){var a=W;W=a!==0&&4>a?a:4,n(!0);var c=ou.transition;ou.transition={};try{n(!1),r()}finally{W=a,ou.transition=c}}function Td(){return gn().memoizedState}function Um(n,r,a){var c=Rr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Ed(n))Md(r,a);else if(a=od(n,r,a,c),a!==null){var f=Nt();Mn(a,n,c,f),Rd(a,r,c)}}function Wm(n,r,a){var c=Rr(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ed(n))Md(r,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var v=r.lastRenderedState,C=g(v,a);if(f.hasEagerState=!0,f.eagerState=C,Cn(C,v)){var T=r.interleaved;T===null?(f.next=f,eu(r)):(f.next=T.next,T.next=f),r.interleaved=f;return}}catch{}finally{}a=od(n,r,f,c),a!==null&&(f=Nt(),Mn(a,n,c,f),Rd(a,r,c))}}function Ed(n){var r=n.alternate;return n===pt||r!==null&&r===pt}function Md(n,r){js=oa=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Rd(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,K(n,a)}}var ua={readContext:mn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},Gm={readContext:mn,useCallback:function(n,r){return Gn().memoizedState=[n,r===void 0?null:r],n},useContext:mn,useEffect:_d,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,aa(4194308,4,kd.bind(null,r,n),a)},useLayoutEffect:function(n,r){return aa(4194308,4,n,r)},useInsertionEffect:function(n,r){return aa(4,2,n,r)},useMemo:function(n,r){var a=Gn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Gn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=Um.bind(null,pt,n),[c.memoizedState,n]},useRef:function(n){var r=Gn();return n={current:n},r.memoizedState=n},useState:xd,useDebugValue:fu,useDeferredValue:function(n){return Gn().memoizedState=n},useTransition:function(){var n=xd(!1),r=n[0];return n=Nm.bind(null,n[1]),Gn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=pt,f=Gn();if(at){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),Tt===null)throw Error(t(349));(ei&30)!==0||fd(c,r,a)}f.memoizedState=a;var g={value:a,getSnapshot:r};return f.queue=g,_d(md.bind(null,c,g,n),[n]),c.flags|=2048,$s(9,pd.bind(null,c,g,a,r),void 0,null),a},useId:function(){var n=Gn(),r=Tt.identifierPrefix;if(at){var a=ir,c=rr;a=(c&~(1<<32-sn(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=Ds++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=$m++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Hm={readContext:mn,useCallback:Cd,useContext:mn,useEffect:du,useImperativeHandle:bd,useInsertionEffect:wd,useLayoutEffect:Sd,useMemo:Ad,useReducer:cu,useRef:vd,useState:function(){return cu(Os)},useDebugValue:fu,useDeferredValue:function(n){var r=gn();return Pd(r,Ct.memoizedState,n)},useTransition:function(){var n=cu(Os)[0],r=gn().memoizedState;return[n,r]},useMutableSource:hd,useSyncExternalStore:dd,useId:Td,unstable_isNewReconciler:!1},Vm={readContext:mn,useCallback:Cd,useContext:mn,useEffect:du,useImperativeHandle:bd,useInsertionEffect:wd,useLayoutEffect:Sd,useMemo:Ad,useReducer:hu,useRef:vd,useState:function(){return hu(Os)},useDebugValue:fu,useDeferredValue:function(n){var r=gn();return Ct===null?r.memoizedState=n:Pd(r,Ct.memoizedState,n)},useTransition:function(){var n=hu(Os)[0],r=gn().memoizedState;return[n,r]},useMutableSource:hd,useSyncExternalStore:dd,useId:Td,unstable_isNewReconciler:!1};function Pn(n,r){if(n&&n.defaultProps){r=re({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function pu(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:re({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var ca={isMounted:function(n){return(n=n._reactInternals)?$n(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Nt(),f=Rr(n),g=or(c,f);g.payload=r,a!=null&&(g.callback=a),r=Pr(n,g,f),r!==null&&(Mn(r,n,f,c),na(r,n,f))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Nt(),f=Rr(n),g=or(c,f);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=Pr(n,g,f),r!==null&&(Mn(r,n,f,c),na(r,n,f))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Nt(),c=Rr(n),f=or(a,c);f.tag=2,r!=null&&(f.callback=r),r=Pr(n,f,c),r!==null&&(Mn(r,n,c,a),na(r,n,c))}};function Id(n,r,a,c,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,v):r.prototype&&r.prototype.isPureReactComponent?!As(a,c)||!As(f,g):!0}function Fd(n,r,a){var c=!1,f=br,g=r.contextType;return typeof g=="object"&&g!==null?g=mn(g):(f=Xt(r)?qr:zt.current,c=r.contextTypes,g=(c=c!=null)?Ii(n,f):br),r=new r(a,g),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ca,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),r}function Ld(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&ca.enqueueReplaceState(r,r.state,null)}function mu(n,r,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},tu(n);var g=r.contextType;typeof g=="object"&&g!==null?f.context=mn(g):(g=Xt(r)?qr:zt.current,f.context=Ii(n,g)),f.state=n.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(pu(n,r,g,a),f.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&ca.enqueueReplaceState(f,f.state,null),ra(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function $i(n,r){try{var a="",c=r;do a+=Fe(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:r,stack:f,digest:null}}function gu(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function yu(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Ym=typeof WeakMap=="function"?WeakMap:Map;function zd(n,r,a){a=or(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){ya||(ya=!0,Iu=c),yu(n,r)},a}function Bd(n,r,a){a=or(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=r.value;a.payload=function(){return c(f)},a.callback=function(){yu(n,r)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){yu(n,r),typeof c!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})}),a}function jd(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Ym;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(a)||(f.add(a),n=ag.bind(null,n,r,a),r.then(n,n))}function Dd(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Od(n,r,a,c,f){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=or(-1,1),r.tag=2,Pr(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Xm=M.ReactCurrentOwner,qt=!1;function $t(n,r,a,c){r.child=n===null?sd(r,null,a,c):Bi(r,n.child,a,c)}function $d(n,r,a,c,f){a=a.render;var g=r.ref;return Di(r,f),c=lu(n,r,a,c,g,f),a=uu(),n!==null&&!qt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~f,ar(n,r,f)):(at&&a&&Hl(r),r.flags|=1,$t(n,r,c,f),r.child)}function Nd(n,r,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!Ou(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=g,Ud(n,r,g,c,f)):(n=ka(a.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,(n.lanes&f)===0){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:As,a(v,c)&&n.ref===r.ref)return ar(n,r,f)}return r.flags|=1,n=Fr(g,c),n.ref=r.ref,n.return=r,r.child=n}function Ud(n,r,a,c,f){if(n!==null){var g=n.memoizedProps;if(As(g,c)&&n.ref===r.ref)if(qt=!1,r.pendingProps=c=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(qt=!0);else return r.lanes=n.lanes,ar(n,r,f)}return xu(n,r,a,c,f)}function Wd(n,r,a){var c=r.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Ui,un),un|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Je(Ui,un),un|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Je(Ui,un),un|=c}else g!==null?(c=g.baseLanes|a,r.memoizedState=null):c=a,Je(Ui,un),un|=c;return $t(n,r,f,a),r.child}function Gd(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function xu(n,r,a,c,f){var g=Xt(a)?qr:zt.current;return g=Ii(r,g),Di(r,f),a=lu(n,r,a,c,g,f),c=uu(),n!==null&&!qt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~f,ar(n,r,f)):(at&&c&&Hl(r),r.flags|=1,$t(n,r,a,f),r.child)}function Hd(n,r,a,c,f){if(Xt(a)){var g=!0;Xo(r)}else g=!1;if(Di(r,f),r.stateNode===null)da(n,r),Fd(r,a,c),mu(r,a,c,f),c=!0;else if(n===null){var v=r.stateNode,C=r.memoizedProps;v.props=C;var T=v.context,O=a.contextType;typeof O=="object"&&O!==null?O=mn(O):(O=Xt(a)?qr:zt.current,O=Ii(r,O));var V=a.getDerivedStateFromProps,q=typeof V=="function"||typeof v.getSnapshotBeforeUpdate=="function";q||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==c||T!==O)&&Ld(r,v,c,O),Ar=!1;var H=r.memoizedState;v.state=H,ra(r,c,v,f),T=r.memoizedState,C!==c||H!==T||Yt.current||Ar?(typeof V=="function"&&(pu(r,a,V,c),T=r.memoizedState),(C=Ar||Id(r,a,C,c,H,T,O))?(q||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=T),v.props=c,v.state=T,v.context=O,c=C):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,ad(n,r),C=r.memoizedProps,O=r.type===r.elementType?C:Pn(r.type,C),v.props=O,q=r.pendingProps,H=v.context,T=a.contextType,typeof T=="object"&&T!==null?T=mn(T):(T=Xt(a)?qr:zt.current,T=Ii(r,T));var le=a.getDerivedStateFromProps;(V=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==q||H!==T)&&Ld(r,v,c,T),Ar=!1,H=r.memoizedState,v.state=H,ra(r,c,v,f);var he=r.memoizedState;C!==q||H!==he||Yt.current||Ar?(typeof le=="function"&&(pu(r,a,le,c),he=r.memoizedState),(O=Ar||Id(r,a,O,c,H,he,T)||!1)?(V||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,he,T),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,he,T)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=he),v.props=c,v.state=he,v.context=T,c=O):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&H===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&H===n.memoizedState||(r.flags|=1024),c=!1)}return vu(n,r,a,c,g,f)}function vu(n,r,a,c,f,g){Gd(n,r);var v=(r.flags&128)!==0;if(!c&&!v)return f&&Kh(r,a,!1),ar(n,r,g);c=r.stateNode,Xm.current=r;var C=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&v?(r.child=Bi(r,n.child,null,g),r.child=Bi(r,null,C,g)):$t(n,r,C,g),r.memoizedState=c.state,f&&Kh(r,a,!0),r.child}function Vd(n){var r=n.stateNode;r.pendingContext?Xh(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Xh(n,r.context,!1),nu(n,r.containerInfo)}function Yd(n,r,a,c,f){return zi(),ql(f),r.flags|=256,$t(n,r,a,c),r.child}var _u={dehydrated:null,treeContext:null,retryLane:0};function wu(n){return{baseLanes:n,cachePool:null,transitions:null}}function Xd(n,r,a){var c=r.pendingProps,f=ft.current,g=!1,v=(r.flags&128)!==0,C;if((C=v)||(C=n!==null&&n.memoizedState===null?!1:(f&2)!==0),C?(g=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Je(ft,f&1),n===null)return Xl(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(v=c.children,n=c.fallback,g?(c=r.mode,g=r.child,v={mode:"hidden",children:v},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=ba(v,c,0,null),n=si(n,c,a,null),g.return=r,n.return=r,g.sibling=n,r.child=g,r.child.memoizedState=wu(a),r.memoizedState=_u,n):Su(r,v));if(f=n.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return qm(n,r,v,c,C,f,a);if(g){g=c.fallback,v=r.mode,f=n.child,C=f.sibling;var T={mode:"hidden",children:c.children};return(v&1)===0&&r.child!==f?(c=r.child,c.childLanes=0,c.pendingProps=T,r.deletions=null):(c=Fr(f,T),c.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=Fr(C,g):(g=si(g,v,a,null),g.flags|=2),g.return=r,c.return=r,c.sibling=g,r.child=c,c=g,g=r.child,v=n.child.memoizedState,v=v===null?wu(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~a,r.memoizedState=_u,c}return g=n.child,n=g.sibling,c=Fr(g,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function Su(n,r){return r=ba({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function ha(n,r,a,c){return c!==null&&ql(c),Bi(r,n.child,null,a),n=Su(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function qm(n,r,a,c,f,g,v){if(a)return r.flags&256?(r.flags&=-257,c=gu(Error(t(422))),ha(n,r,v,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(g=c.fallback,f=r.mode,c=ba({mode:"visible",children:c.children},f,0,null),g=si(g,f,v,null),g.flags|=2,c.return=r,g.return=r,c.sibling=g,r.child=c,(r.mode&1)!==0&&Bi(r,n.child,null,v),r.child.memoizedState=wu(v),r.memoizedState=_u,g);if((r.mode&1)===0)return ha(n,r,v,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var C=c.dgst;return c=C,g=Error(t(419)),c=gu(g,c,void 0),ha(n,r,v,c)}if(C=(v&n.childLanes)!==0,qt||C){if(c=Tt,c!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|v))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,sr(n,f),Mn(c,n,f,-1))}return Du(),c=gu(Error(t(421))),ha(n,r,v,c)}return f.data==="$?"?(r.flags|=128,r.child=n.child,r=lg.bind(null,n),f._reactRetry=r,null):(n=g.treeContext,ln=Sr(f.nextSibling),an=r,at=!0,An=null,n!==null&&(fn[pn++]=rr,fn[pn++]=ir,fn[pn++]=Kr,rr=n.id,ir=n.overflow,Kr=r),r=Su(r,c.children),r.flags|=4096,r)}function qd(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Jl(n.return,r,a)}function ku(n,r,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Kd(n,r,a){var c=r.pendingProps,f=c.revealOrder,g=c.tail;if($t(n,r,c.children,a),c=ft.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&qd(n,a,r);else if(n.tag===19)qd(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Je(ft,c),(r.mode&1)===0)r.memoizedState=null;else switch(f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&ia(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),ku(r,!1,f,a,g);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&ia(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}ku(r,!0,a,null,g);break;case"together":ku(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function da(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function ar(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),ti|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=Fr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Fr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Km(n,r,a){switch(r.tag){case 3:Vd(r),zi();break;case 5:cd(r);break;case 1:Xt(r.type)&&Xo(r);break;case 4:nu(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,f=r.memoizedProps.value;Je(ea,c._currentValue),c._currentValue=f;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Je(ft,ft.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Xd(n,r,a):(Je(ft,ft.current&1),n=ar(n,r,a),n!==null?n.sibling:null);Je(ft,ft.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return Kd(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Je(ft,ft.current),c)break;return null;case 22:case 23:return r.lanes=0,Wd(n,r,a)}return ar(n,r,a)}var Qd,bu,Zd,Jd;Qd=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},bu=function(){},Zd=function(n,r,a,c){var f=n.memoizedProps;if(f!==c){n=r.stateNode,Jr(Wn.current);var g=null;switch(a){case"input":f=rn(n,f),c=rn(n,c),g=[];break;case"select":f=re({},f,{value:void 0}),c=re({},c,{value:void 0}),g=[];break;case"textarea":f=as(n,f),c=as(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ho)}Vt(a,c);var v;a=null;for(O in f)if(!c.hasOwnProperty(O)&&f.hasOwnProperty(O)&&f[O]!=null)if(O==="style"){var C=f[O];for(v in C)C.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(o.hasOwnProperty(O)?g||(g=[]):(g=g||[]).push(O,null));for(O in c){var T=c[O];if(C=f!=null?f[O]:void 0,c.hasOwnProperty(O)&&T!==C&&(T!=null||C!=null))if(O==="style")if(C){for(v in C)!C.hasOwnProperty(v)||T&&T.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in T)T.hasOwnProperty(v)&&C[v]!==T[v]&&(a||(a={}),a[v]=T[v])}else a||(g||(g=[]),g.push(O,a)),a=T;else O==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,C=C?C.__html:void 0,T!=null&&C!==T&&(g=g||[]).push(O,T)):O==="children"?typeof T!="string"&&typeof T!="number"||(g=g||[]).push(O,""+T):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(o.hasOwnProperty(O)?(T!=null&&O==="onScroll"&&nt("scroll",n),g||C===T||(g=[])):(g=g||[]).push(O,T))}a&&(g=g||[]).push("style",a);var O=g;(r.updateQueue=O)&&(r.flags|=4)}},Jd=function(n,r,a,c){a!==c&&(r.flags|=4)};function Ns(n,r){if(!at)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function jt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function Qm(n,r,a){var c=r.pendingProps;switch(Vl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(r),null;case 1:return Xt(r.type)&&Yo(),jt(r),null;case 3:return c=r.stateNode,Oi(),rt(Yt),rt(zt),su(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Zo(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,An!==null&&(zu(An),An=null))),bu(n,r),jt(r),null;case 5:ru(r);var f=Jr(Bs.current);if(a=r.type,n!==null&&r.stateNode!=null)Zd(n,r,a,c,f),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return jt(r),null}if(n=Jr(Wn.current),Zo(r)){c=r.stateNode,a=r.type;var g=r.memoizedProps;switch(c[Un]=r,c[Rs]=g,n=(r.mode&1)!==0,a){case"dialog":nt("cancel",c),nt("close",c);break;case"iframe":case"object":case"embed":nt("load",c);break;case"video":case"audio":for(f=0;f<Ts.length;f++)nt(Ts[f],c);break;case"source":nt("error",c);break;case"img":case"image":case"link":nt("error",c),nt("load",c);break;case"details":nt("toggle",c);break;case"input":Ht(c,g),nt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},nt("invalid",c);break;case"textarea":Or(c,g),nt("invalid",c)}Vt(a,g),f=null;for(var v in g)if(g.hasOwnProperty(v)){var C=g[v];v==="children"?typeof C=="string"?c.textContent!==C&&(g.suppressHydrationWarning!==!0&&Go(c.textContent,C,n),f=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&Go(c.textContent,C,n),f=["children",""+C]):o.hasOwnProperty(v)&&C!=null&&v==="onScroll"&&nt("scroll",c)}switch(a){case"input":tn(c),_t(c,g,!0);break;case"textarea":tn(c),bn(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Ho)}c=f,r.updateQueue=c,c!==null&&(r.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=$r(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Un]=r,n[Rs]=c,Qd(n,r,!1,!1),r.stateNode=n;e:{switch(v=ds(a,c),a){case"dialog":nt("cancel",n),nt("close",n),f=c;break;case"iframe":case"object":case"embed":nt("load",n),f=c;break;case"video":case"audio":for(f=0;f<Ts.length;f++)nt(Ts[f],n);f=c;break;case"source":nt("error",n),f=c;break;case"img":case"image":case"link":nt("error",n),nt("load",n),f=c;break;case"details":nt("toggle",n),f=c;break;case"input":Ht(n,c),f=rn(n,c),nt("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=re({},c,{value:void 0}),nt("invalid",n);break;case"textarea":Or(n,c),f=as(n,c),nt("invalid",n);break;default:f=c}Vt(a,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var T=C[g];g==="style"?hs(n,T):g==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&_o(n,T)):g==="children"?typeof T=="string"?(a!=="textarea"||T!=="")&&jn(n,T):typeof T=="number"&&jn(n,""+T):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?T!=null&&g==="onScroll"&&nt("scroll",n):T!=null&&E(n,g,T,v))}switch(a){case"input":tn(n),_t(n,c,!1);break;case"textarea":tn(n),bn(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ee(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?kn(n,!!c.multiple,g,!1):c.defaultValue!=null&&kn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Ho)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return jt(r),null;case 6:if(n&&r.stateNode!=null)Jd(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Jr(Bs.current),Jr(Wn.current),Zo(r)){if(c=r.stateNode,a=r.memoizedProps,c[Un]=r,(g=c.nodeValue!==a)&&(n=an,n!==null))switch(n.tag){case 3:Go(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Go(c.nodeValue,a,(n.mode&1)!==0)}g&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Un]=r,r.stateNode=c}return jt(r),null;case 13:if(rt(ft),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(at&&ln!==null&&(r.mode&1)!==0&&(r.flags&128)===0)nd(),zi(),r.flags|=98560,g=!1;else if(g=Zo(r),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Un]=r}else zi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;jt(r),g=!1}else An!==null&&(zu(An),An=null),g=!0;if(!g)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(ft.current&1)!==0?At===0&&(At=3):Du())),r.updateQueue!==null&&(r.flags|=4),jt(r),null);case 4:return Oi(),bu(n,r),n===null&&Es(r.stateNode.containerInfo),jt(r),null;case 10:return Zl(r.type._context),jt(r),null;case 17:return Xt(r.type)&&Yo(),jt(r),null;case 19:if(rt(ft),g=r.memoizedState,g===null)return jt(r),null;if(c=(r.flags&128)!==0,v=g.rendering,v===null)if(c)Ns(g,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(v=ia(n),v!==null){for(r.flags|=128,Ns(g,!1),c=v.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)g=a,n=c,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Je(ft,ft.current&1|2),r.child}n=n.sibling}g.tail!==null&&ht()>Wi&&(r.flags|=128,c=!0,Ns(g,!1),r.lanes=4194304)}else{if(!c)if(n=ia(v),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Ns(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!at)return jt(r),null}else 2*ht()-g.renderingStartTime>Wi&&a!==1073741824&&(r.flags|=128,c=!0,Ns(g,!1),r.lanes=4194304);g.isBackwards?(v.sibling=r.child,r.child=v):(a=g.last,a!==null?a.sibling=v:r.child=v,g.last=v)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=ht(),r.sibling=null,a=ft.current,Je(ft,c?a&1|2:a&1),r):(jt(r),null);case 22:case 23:return ju(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(un&1073741824)!==0&&(jt(r),r.subtreeFlags&6&&(r.flags|=8192)):jt(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function Zm(n,r){switch(Vl(r),r.tag){case 1:return Xt(r.type)&&Yo(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Oi(),rt(Yt),rt(zt),su(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return ru(r),null;case 13:if(rt(ft),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));zi()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return rt(ft),null;case 4:return Oi(),null;case 10:return Zl(r.type._context),null;case 22:case 23:return ju(),null;case 24:return null;default:return null}}var fa=!1,Dt=!1,Jm=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Ni(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){yt(n,r,c)}else a.current=null}function Cu(n,r,a){try{a()}catch(c){yt(n,r,c)}}var ef=!1;function eg(n,r){if(jl=Fo,n=Ih(),El(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var v=0,C=-1,T=-1,O=0,V=0,q=n,H=null;t:for(;;){for(var le;q!==a||f!==0&&q.nodeType!==3||(C=v+f),q!==g||c!==0&&q.nodeType!==3||(T=v+c),q.nodeType===3&&(v+=q.nodeValue.length),(le=q.firstChild)!==null;)H=q,q=le;for(;;){if(q===n)break t;if(H===a&&++O===f&&(C=v),H===g&&++V===c&&(T=v),(le=q.nextSibling)!==null)break;q=H,H=q.parentNode}q=le}a=C===-1||T===-1?null:{start:C,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dl={focusedElem:n,selectionRange:a},Fo=!1,ce=r;ce!==null;)if(r=ce,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ce=n;else for(;ce!==null;){r=ce;try{var he=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var fe=he.memoizedProps,wt=he.memoizedState,B=r.stateNode,R=B.getSnapshotBeforeUpdate(r.elementType===r.type?fe:Pn(r.type,fe),wt);B.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var j=r.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){yt(r,r.return,Z)}if(n=r.sibling,n!==null){n.return=r.return,ce=n;break}ce=r.return}return he=ef,ef=!1,he}function Us(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&Cu(r,a,g)}f=f.next}while(f!==c)}}function pa(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function Au(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function tf(n){var r=n.alternate;r!==null&&(n.alternate=null,tf(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Un],delete r[Rs],delete r[Ul],delete r[Bm],delete r[jm])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function nf(n){return n.tag===5||n.tag===3||n.tag===4}function rf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||nf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Pu(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ho));else if(c!==4&&(n=n.child,n!==null))for(Pu(n,r,a),n=n.sibling;n!==null;)Pu(n,r,a),n=n.sibling}function Tu(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Tu(n,r,a),n=n.sibling;n!==null;)Tu(n,r,a),n=n.sibling}var Rt=null,Tn=!1;function Tr(n,r,a){for(a=a.child;a!==null;)sf(n,r,a),a=a.sibling}function sf(n,r,a){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Qe,a)}catch{}switch(a.tag){case 5:Dt||Ni(a,r);case 6:var c=Rt,f=Tn;Rt=null,Tr(n,r,a),Rt=c,Tn=f,Rt!==null&&(Tn?(n=Rt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Rt.removeChild(a.stateNode));break;case 18:Rt!==null&&(Tn?(n=Rt,a=a.stateNode,n.nodeType===8?Nl(n.parentNode,a):n.nodeType===1&&Nl(n,a),_s(n)):Nl(Rt,a.stateNode));break;case 4:c=Rt,f=Tn,Rt=a.stateNode.containerInfo,Tn=!0,Tr(n,r,a),Rt=c,Tn=f;break;case 0:case 11:case 14:case 15:if(!Dt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&Cu(a,r,v),f=f.next}while(f!==c)}Tr(n,r,a);break;case 1:if(!Dt&&(Ni(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){yt(a,r,C)}Tr(n,r,a);break;case 21:Tr(n,r,a);break;case 22:a.mode&1?(Dt=(c=Dt)||a.memoizedState!==null,Tr(n,r,a),Dt=c):Tr(n,r,a);break;default:Tr(n,r,a)}}function of(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Jm),r.forEach(function(c){var f=ug.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function En(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,v=r,C=v;e:for(;C!==null;){switch(C.tag){case 5:Rt=C.stateNode,Tn=!1;break e;case 3:Rt=C.stateNode.containerInfo,Tn=!0;break e;case 4:Rt=C.stateNode.containerInfo,Tn=!0;break e}C=C.return}if(Rt===null)throw Error(t(160));sf(g,v,f),Rt=null,Tn=!1;var T=f.alternate;T!==null&&(T.return=null),f.return=null}catch(O){yt(f,r,O)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)af(r,n),r=r.sibling}function af(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(En(r,n),Hn(n),c&4){try{Us(3,n,n.return),pa(3,n)}catch(fe){yt(n,n.return,fe)}try{Us(5,n,n.return)}catch(fe){yt(n,n.return,fe)}}break;case 1:En(r,n),Hn(n),c&512&&a!==null&&Ni(a,a.return);break;case 5:if(En(r,n),Hn(n),c&512&&a!==null&&Ni(a,a.return),n.flags&32){var f=n.stateNode;try{jn(f,"")}catch(fe){yt(n,n.return,fe)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,v=a!==null?a.memoizedProps:g,C=n.type,T=n.updateQueue;if(n.updateQueue=null,T!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&Dr(f,g),ds(C,v);var O=ds(C,g);for(v=0;v<T.length;v+=2){var V=T[v],q=T[v+1];V==="style"?hs(f,q):V==="dangerouslySetInnerHTML"?_o(f,q):V==="children"?jn(f,q):E(f,V,q,O)}switch(C){case"input":Qn(f,g);break;case"textarea":ls(f,g);break;case"select":var H=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var le=g.value;le!=null?kn(f,!!g.multiple,le,!1):H!==!!g.multiple&&(g.defaultValue!=null?kn(f,!!g.multiple,g.defaultValue,!0):kn(f,!!g.multiple,g.multiple?[]:"",!1))}f[Rs]=g}catch(fe){yt(n,n.return,fe)}}break;case 6:if(En(r,n),Hn(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(fe){yt(n,n.return,fe)}}break;case 3:if(En(r,n),Hn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{_s(r.containerInfo)}catch(fe){yt(n,n.return,fe)}break;case 4:En(r,n),Hn(n);break;case 13:En(r,n),Hn(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Ru=ht())),c&4&&of(n);break;case 22:if(V=a!==null&&a.memoizedState!==null,n.mode&1?(Dt=(O=Dt)||V,En(r,n),Dt=O):En(r,n),Hn(n),c&8192){if(O=n.memoizedState!==null,(n.stateNode.isHidden=O)&&!V&&(n.mode&1)!==0)for(ce=n,V=n.child;V!==null;){for(q=ce=V;ce!==null;){switch(H=ce,le=H.child,H.tag){case 0:case 11:case 14:case 15:Us(4,H,H.return);break;case 1:Ni(H,H.return);var he=H.stateNode;if(typeof he.componentWillUnmount=="function"){c=H,a=H.return;try{r=c,he.props=r.memoizedProps,he.state=r.memoizedState,he.componentWillUnmount()}catch(fe){yt(c,a,fe)}}break;case 5:Ni(H,H.return);break;case 22:if(H.memoizedState!==null){cf(q);continue}}le!==null?(le.return=H,ce=le):cf(q)}V=V.sibling}e:for(V=null,q=n;;){if(q.tag===5){if(V===null){V=q;try{f=q.stateNode,O?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=q.stateNode,T=q.memoizedProps.style,v=T!=null&&T.hasOwnProperty("display")?T.display:null,C.style.display=cs("display",v))}catch(fe){yt(n,n.return,fe)}}}else if(q.tag===6){if(V===null)try{q.stateNode.nodeValue=O?"":q.memoizedProps}catch(fe){yt(n,n.return,fe)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===n)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===n)break e;for(;q.sibling===null;){if(q.return===null||q.return===n)break e;V===q&&(V=null),q=q.return}V===q&&(V=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:En(r,n),Hn(n),c&4&&of(n);break;case 21:break;default:En(r,n),Hn(n)}}function Hn(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(nf(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(jn(f,""),c.flags&=-33);var g=rf(n);Tu(n,g,f);break;case 3:case 4:var v=c.stateNode.containerInfo,C=rf(n);Pu(n,C,v);break;default:throw Error(t(161))}}catch(T){yt(n,n.return,T)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function tg(n,r,a){ce=n,lf(n)}function lf(n,r,a){for(var c=(n.mode&1)!==0;ce!==null;){var f=ce,g=f.child;if(f.tag===22&&c){var v=f.memoizedState!==null||fa;if(!v){var C=f.alternate,T=C!==null&&C.memoizedState!==null||Dt;C=fa;var O=Dt;if(fa=v,(Dt=T)&&!O)for(ce=f;ce!==null;)v=ce,T=v.child,v.tag===22&&v.memoizedState!==null?hf(f):T!==null?(T.return=v,ce=T):hf(f);for(;g!==null;)ce=g,lf(g),g=g.sibling;ce=f,fa=C,Dt=O}uf(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ce=g):uf(n)}}function uf(n){for(;ce!==null;){var r=ce;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Dt||pa(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Dt)if(a===null)c.componentDidMount();else{var f=r.elementType===r.type?a.memoizedProps:Pn(r.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&ud(r,g,c);break;case 3:var v=r.updateQueue;if(v!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}ud(r,v,a)}break;case 5:var C=r.stateNode;if(a===null&&r.flags&4){a=C;var T=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&a.focus();break;case"img":T.src&&(a.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var O=r.alternate;if(O!==null){var V=O.memoizedState;if(V!==null){var q=V.dehydrated;q!==null&&_s(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Dt||r.flags&512&&Au(r)}catch(H){yt(r,r.return,H)}}if(r===n){ce=null;break}if(a=r.sibling,a!==null){a.return=r.return,ce=a;break}ce=r.return}}function cf(n){for(;ce!==null;){var r=ce;if(r===n){ce=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ce=a;break}ce=r.return}}function hf(n){for(;ce!==null;){var r=ce;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{pa(4,r)}catch(T){yt(r,a,T)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var f=r.return;try{c.componentDidMount()}catch(T){yt(r,f,T)}}var g=r.return;try{Au(r)}catch(T){yt(r,g,T)}break;case 5:var v=r.return;try{Au(r)}catch(T){yt(r,v,T)}}}catch(T){yt(r,r.return,T)}if(r===n){ce=null;break}var C=r.sibling;if(C!==null){C.return=r.return,ce=C;break}ce=r.return}}var ng=Math.ceil,ma=M.ReactCurrentDispatcher,Eu=M.ReactCurrentOwner,yn=M.ReactCurrentBatchConfig,Ue=0,Tt=null,St=null,It=0,un=0,Ui=kr(0),At=0,Ws=null,ti=0,ga=0,Mu=0,Gs=null,Kt=null,Ru=0,Wi=1/0,lr=null,ya=!1,Iu=null,Er=null,xa=!1,Mr=null,va=0,Hs=0,Fu=null,_a=-1,wa=0;function Nt(){return(Ue&6)!==0?ht():_a!==-1?_a:_a=ht()}function Rr(n){return(n.mode&1)===0?1:(Ue&2)!==0&&It!==0?It&-It:Om.transition!==null?(wa===0&&(wa=D()),wa):(n=W,n!==0||(n=window.event,n=n===void 0?16:dh(n.type)),n)}function Mn(n,r,a,c){if(50<Hs)throw Hs=0,Fu=null,Error(t(185));X(n,a,c),((Ue&2)===0||n!==Tt)&&(n===Tt&&((Ue&2)===0&&(ga|=a),At===4&&Ir(n,It)),Qt(n,c),a===1&&Ue===0&&(r.mode&1)===0&&(Wi=ht()+500,qo&&Cr()))}function Qt(n,r){var a=n.callbackNode;F(n,r);var c=Yr(n,n===Tt?It:0);if(c===0)a!==null&&Eo(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&Eo(a),r===1)n.tag===0?Dm(ff.bind(null,n)):Qh(ff.bind(null,n)),Lm(function(){(Ue&6)===0&&Cr()}),a=null;else{switch(Se(c)){case 1:a=ys;break;case 4:a=Mo;break;case 16:a=Si;break;case 536870912:a=Ro;break;default:a=Si}a=wf(a,df.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function df(n,r){if(_a=-1,wa=0,(Ue&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Gi()&&n.callbackNode!==a)return null;var c=Yr(n,n===Tt?It:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=Sa(n,c);else{r=c;var f=Ue;Ue|=2;var g=mf();(Tt!==n||It!==r)&&(lr=null,Wi=ht()+500,ri(n,r));do try{sg();break}catch(C){pf(n,C)}while(!0);Ql(),ma.current=g,Ue=f,St!==null?r=0:(Tt=null,It=0,r=At)}if(r!==0){if(r===2&&(f=L(n),f!==0&&(c=f,r=Lu(n,f))),r===1)throw a=Ws,ri(n,0),Ir(n,c),Qt(n,ht()),a;if(r===6)Ir(n,c);else{if(f=n.current.alternate,(c&30)===0&&!rg(f)&&(r=Sa(n,c),r===2&&(g=L(n),g!==0&&(c=g,r=Lu(n,g))),r===1))throw a=Ws,ri(n,0),Ir(n,c),Qt(n,ht()),a;switch(n.finishedWork=f,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:ii(n,Kt,lr);break;case 3:if(Ir(n,c),(c&130023424)===c&&(r=Ru+500-ht(),10<r)){if(Yr(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){Nt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=$l(ii.bind(null,n,Kt,lr),r);break}ii(n,Kt,lr);break;case 4:if(Ir(n,c),(c&4194240)===c)break;for(r=n.eventTimes,f=-1;0<c;){var v=31-sn(c);g=1<<v,v=r[v],v>f&&(f=v),c&=~g}if(c=f,c=ht()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*ng(c/1960))-c,10<c){n.timeoutHandle=$l(ii.bind(null,n,Kt,lr),c);break}ii(n,Kt,lr);break;case 5:ii(n,Kt,lr);break;default:throw Error(t(329))}}}return Qt(n,ht()),n.callbackNode===a?df.bind(null,n):null}function Lu(n,r){var a=Gs;return n.current.memoizedState.isDehydrated&&(ri(n,r).flags|=256),n=Sa(n,r),n!==2&&(r=Kt,Kt=a,r!==null&&zu(r)),n}function zu(n){Kt===null?Kt=n:Kt.push.apply(Kt,n)}function rg(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!Cn(g(),f))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ir(n,r){for(r&=~Mu,r&=~ga,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-sn(r),c=1<<a;n[a]=-1,r&=~c}}function ff(n){if((Ue&6)!==0)throw Error(t(327));Gi();var r=Yr(n,0);if((r&1)===0)return Qt(n,ht()),null;var a=Sa(n,r);if(n.tag!==0&&a===2){var c=L(n);c!==0&&(r=c,a=Lu(n,c))}if(a===1)throw a=Ws,ri(n,0),Ir(n,r),Qt(n,ht()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,ii(n,Kt,lr),Qt(n,ht()),null}function Bu(n,r){var a=Ue;Ue|=1;try{return n(r)}finally{Ue=a,Ue===0&&(Wi=ht()+500,qo&&Cr())}}function ni(n){Mr!==null&&Mr.tag===0&&(Ue&6)===0&&Gi();var r=Ue;Ue|=1;var a=yn.transition,c=W;try{if(yn.transition=null,W=1,n)return n()}finally{W=c,yn.transition=a,Ue=r,(Ue&6)===0&&Cr()}}function ju(){un=Ui.current,rt(Ui)}function ri(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Fm(a)),St!==null)for(a=St.return;a!==null;){var c=a;switch(Vl(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Yo();break;case 3:Oi(),rt(Yt),rt(zt),su();break;case 5:ru(c);break;case 4:Oi();break;case 13:rt(ft);break;case 19:rt(ft);break;case 10:Zl(c.type._context);break;case 22:case 23:ju()}a=a.return}if(Tt=n,St=n=Fr(n.current,null),It=un=r,At=0,Ws=null,Mu=ga=ti=0,Kt=Gs=null,Zr!==null){for(r=0;r<Zr.length;r++)if(a=Zr[r],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var v=g.next;g.next=f,c.next=v}a.pending=c}Zr=null}return n}function pf(n,r){do{var a=St;try{if(Ql(),sa.current=ua,oa){for(var c=pt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}oa=!1}if(ei=0,Pt=Ct=pt=null,js=!1,Ds=0,Eu.current=null,a===null||a.return===null){At=1,Ws=r,St=null;break}e:{var g=n,v=a.return,C=a,T=r;if(r=It,C.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var O=T,V=C,q=V.tag;if((V.mode&1)===0&&(q===0||q===11||q===15)){var H=V.alternate;H?(V.updateQueue=H.updateQueue,V.memoizedState=H.memoizedState,V.lanes=H.lanes):(V.updateQueue=null,V.memoizedState=null)}var le=Dd(v);if(le!==null){le.flags&=-257,Od(le,v,C,g,r),le.mode&1&&jd(g,O,r),r=le,T=O;var he=r.updateQueue;if(he===null){var fe=new Set;fe.add(T),r.updateQueue=fe}else he.add(T);break e}else{if((r&1)===0){jd(g,O,r),Du();break e}T=Error(t(426))}}else if(at&&C.mode&1){var wt=Dd(v);if(wt!==null){(wt.flags&65536)===0&&(wt.flags|=256),Od(wt,v,C,g,r),ql($i(T,C));break e}}g=T=$i(T,C),At!==4&&(At=2),Gs===null?Gs=[g]:Gs.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var B=zd(g,T,r);ld(g,B);break e;case 1:C=T;var R=g.type,j=g.stateNode;if((g.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Er===null||!Er.has(j)))){g.flags|=65536,r&=-r,g.lanes|=r;var Z=Bd(g,C,r);ld(g,Z);break e}}g=g.return}while(g!==null)}yf(a)}catch(me){r=me,St===a&&a!==null&&(St=a=a.return);continue}break}while(!0)}function mf(){var n=ma.current;return ma.current=ua,n===null?ua:n}function Du(){(At===0||At===3||At===2)&&(At=4),Tt===null||(ti&268435455)===0&&(ga&268435455)===0||Ir(Tt,It)}function Sa(n,r){var a=Ue;Ue|=2;var c=mf();(Tt!==n||It!==r)&&(lr=null,ri(n,r));do try{ig();break}catch(f){pf(n,f)}while(!0);if(Ql(),Ue=a,ma.current=c,St!==null)throw Error(t(261));return Tt=null,It=0,At}function ig(){for(;St!==null;)gf(St)}function sg(){for(;St!==null&&!dl();)gf(St)}function gf(n){var r=_f(n.alternate,n,un);n.memoizedProps=n.pendingProps,r===null?yf(n):St=r,Eu.current=null}function yf(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=Qm(a,r,un),a!==null){St=a;return}}else{if(a=Zm(a,r),a!==null){a.flags&=32767,St=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{At=6,St=null;return}}if(r=r.sibling,r!==null){St=r;return}St=r=n}while(r!==null);At===0&&(At=5)}function ii(n,r,a){var c=W,f=yn.transition;try{yn.transition=null,W=1,og(n,r,a,c)}finally{yn.transition=f,W=c}return null}function og(n,r,a,c){do Gi();while(Mr!==null);if((Ue&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(Q(n,g),n===Tt&&(St=Tt=null,It=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||xa||(xa=!0,wf(Si,function(){return Gi(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=yn.transition,yn.transition=null;var v=W;W=1;var C=Ue;Ue|=4,Eu.current=null,eg(n,a),af(a,n),Am(Dl),Fo=!!jl,Dl=jl=null,n.current=a,tg(a),fl(),Ue=C,W=v,yn.transition=g}else n.current=a;if(xa&&(xa=!1,Mr=n,va=f),g=n.pendingLanes,g===0&&(Er=null),qe(a.stateNode),Qt(n,ht()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)f=r[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(ya)throw ya=!1,n=Iu,Iu=null,n;return(va&1)!==0&&n.tag!==0&&Gi(),g=n.pendingLanes,(g&1)!==0?n===Fu?Hs++:(Hs=0,Fu=n):Hs=0,Cr(),null}function Gi(){if(Mr!==null){var n=Se(va),r=yn.transition,a=W;try{if(yn.transition=null,W=16>n?16:n,Mr===null)var c=!1;else{if(n=Mr,Mr=null,va=0,(Ue&6)!==0)throw Error(t(331));var f=Ue;for(Ue|=4,ce=n.current;ce!==null;){var g=ce,v=g.child;if((ce.flags&16)!==0){var C=g.deletions;if(C!==null){for(var T=0;T<C.length;T++){var O=C[T];for(ce=O;ce!==null;){var V=ce;switch(V.tag){case 0:case 11:case 15:Us(8,V,g)}var q=V.child;if(q!==null)q.return=V,ce=q;else for(;ce!==null;){V=ce;var H=V.sibling,le=V.return;if(tf(V),V===O){ce=null;break}if(H!==null){H.return=le,ce=H;break}ce=le}}}var he=g.alternate;if(he!==null){var fe=he.child;if(fe!==null){he.child=null;do{var wt=fe.sibling;fe.sibling=null,fe=wt}while(fe!==null)}}ce=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,ce=v;else e:for(;ce!==null;){if(g=ce,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Us(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,ce=B;break e}ce=g.return}}var R=n.current;for(ce=R;ce!==null;){v=ce;var j=v.child;if((v.subtreeFlags&2064)!==0&&j!==null)j.return=v,ce=j;else e:for(v=R;ce!==null;){if(C=ce,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:pa(9,C)}}catch(me){yt(C,C.return,me)}if(C===v){ce=null;break e}var Z=C.sibling;if(Z!==null){Z.return=C.return,ce=Z;break e}ce=C.return}}if(Ue=f,Cr(),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Qe,n)}catch{}c=!0}return c}finally{W=a,yn.transition=r}}return!1}function xf(n,r,a){r=$i(a,r),r=zd(n,r,1),n=Pr(n,r,1),r=Nt(),n!==null&&(X(n,1,r),Qt(n,r))}function yt(n,r,a){if(n.tag===3)xf(n,n,a);else for(;r!==null;){if(r.tag===3){xf(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Er===null||!Er.has(c))){n=$i(a,n),n=Bd(r,n,1),r=Pr(r,n,1),n=Nt(),r!==null&&(X(r,1,n),Qt(r,n));break}}r=r.return}}function ag(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=Nt(),n.pingedLanes|=n.suspendedLanes&a,Tt===n&&(It&a)===a&&(At===4||At===3&&(It&130023424)===It&&500>ht()-Ru?ri(n,0):Mu|=a),Qt(n,r)}function vf(n,r){r===0&&((n.mode&1)===0?r=1:(r=Vr,Vr<<=1,(Vr&130023424)===0&&(Vr=4194304)));var a=Nt();n=sr(n,r),n!==null&&(X(n,r,a),Qt(n,a))}function lg(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),vf(n,a)}function ug(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),vf(n,a)}var _f;_f=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Yt.current)qt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return qt=!1,Km(n,r,a);qt=(n.flags&131072)!==0}else qt=!1,at&&(r.flags&1048576)!==0&&Zh(r,Qo,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;da(n,r),n=r.pendingProps;var f=Ii(r,zt.current);Di(r,a),f=lu(null,r,c,n,f,a);var g=uu();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Xt(c)?(g=!0,Xo(r)):g=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,tu(r),f.updater=ca,r.stateNode=f,f._reactInternals=r,mu(r,c,n,a),r=vu(null,r,c,!0,g,a)):(r.tag=0,at&&g&&Hl(r),$t(null,r,f,a),r=r.child),r;case 16:c=r.elementType;e:{switch(da(n,r),n=r.pendingProps,f=c._init,c=f(c._payload),r.type=c,f=r.tag=hg(c),n=Pn(c,n),f){case 0:r=xu(null,r,c,n,a);break e;case 1:r=Hd(null,r,c,n,a);break e;case 11:r=$d(null,r,c,n,a);break e;case 14:r=Nd(null,r,c,Pn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Pn(c,f),xu(n,r,c,f,a);case 1:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Pn(c,f),Hd(n,r,c,f,a);case 3:e:{if(Vd(r),n===null)throw Error(t(387));c=r.pendingProps,g=r.memoizedState,f=g.element,ad(n,r),ra(r,c,null,a);var v=r.memoizedState;if(c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){f=$i(Error(t(423)),r),r=Yd(n,r,c,a,f);break e}else if(c!==f){f=$i(Error(t(424)),r),r=Yd(n,r,c,a,f);break e}else for(ln=Sr(r.stateNode.containerInfo.firstChild),an=r,at=!0,An=null,a=sd(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(zi(),c===f){r=ar(n,r,a);break e}$t(n,r,c,a)}r=r.child}return r;case 5:return cd(r),n===null&&Xl(r),c=r.type,f=r.pendingProps,g=n!==null?n.memoizedProps:null,v=f.children,Ol(c,f)?v=null:g!==null&&Ol(c,g)&&(r.flags|=32),Gd(n,r),$t(n,r,v,a),r.child;case 6:return n===null&&Xl(r),null;case 13:return Xd(n,r,a);case 4:return nu(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Bi(r,null,c,a):$t(n,r,c,a),r.child;case 11:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Pn(c,f),$d(n,r,c,f,a);case 7:return $t(n,r,r.pendingProps,a),r.child;case 8:return $t(n,r,r.pendingProps.children,a),r.child;case 12:return $t(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,f=r.pendingProps,g=r.memoizedProps,v=f.value,Je(ea,c._currentValue),c._currentValue=v,g!==null)if(Cn(g.value,v)){if(g.children===f.children&&!Yt.current){r=ar(n,r,a);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var C=g.dependencies;if(C!==null){v=g.child;for(var T=C.firstContext;T!==null;){if(T.context===c){if(g.tag===1){T=or(-1,a&-a),T.tag=2;var O=g.updateQueue;if(O!==null){O=O.shared;var V=O.pending;V===null?T.next=T:(T.next=V.next,V.next=T),O.pending=T}}g.lanes|=a,T=g.alternate,T!==null&&(T.lanes|=a),Jl(g.return,a,r),C.lanes|=a;break}T=T.next}}else if(g.tag===10)v=g.type===r.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=a,C=v.alternate,C!==null&&(C.lanes|=a),Jl(v,a,r),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===r){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}$t(n,r,f.children,a),r=r.child}return r;case 9:return f=r.type,c=r.pendingProps.children,Di(r,a),f=mn(f),c=c(f),r.flags|=1,$t(n,r,c,a),r.child;case 14:return c=r.type,f=Pn(c,r.pendingProps),f=Pn(c.type,f),Nd(n,r,c,f,a);case 15:return Ud(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Pn(c,f),da(n,r),r.tag=1,Xt(c)?(n=!0,Xo(r)):n=!1,Di(r,a),Fd(r,c,f),mu(r,c,f,a),vu(null,r,c,!0,n,a);case 19:return Kd(n,r,a);case 22:return Wd(n,r,a)}throw Error(t(156,r.tag))};function wf(n,r){return Gr(n,r)}function cg(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,r,a,c){return new cg(n,r,a,c)}function Ou(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hg(n){if(typeof n=="function")return Ou(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ve)return 11;if(n===ut)return 14}return 2}function Fr(n,r){var a=n.alternate;return a===null?(a=xn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ka(n,r,a,c,f,g){var v=2;if(c=n,typeof n=="function")Ou(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case $:return si(a.children,f,g,r);case ie:v=8,f|=8;break;case ae:return n=xn(12,a,r,f|2),n.elementType=ae,n.lanes=g,n;case ge:return n=xn(13,a,r,f),n.elementType=ge,n.lanes=g,n;case Me:return n=xn(19,a,r,f),n.elementType=Me,n.lanes=g,n;case oe:return ba(a,f,g,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case te:v=10;break e;case se:v=9;break e;case ve:v=11;break e;case ut:v=14;break e;case J:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=xn(v,a,r,f),r.elementType=n,r.type=c,r.lanes=g,r}function si(n,r,a,c){return n=xn(7,n,c,r),n.lanes=a,n}function ba(n,r,a,c){return n=xn(22,n,c,r),n.elementType=oe,n.lanes=a,n.stateNode={isHidden:!1},n}function $u(n,r,a){return n=xn(6,n,null,r),n.lanes=a,n}function Nu(n,r,a){return r=xn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function dg(n,r,a,c,f){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=U(0),this.expirationTimes=U(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Uu(n,r,a,c,f,g,v,C,T){return n=new dg(n,r,a,C,T),r===1?(r=1,g===!0&&(r|=8)):r=0,g=xn(3,null,null,r),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},tu(g),n}function fg(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function Sf(n){if(!n)return br;n=n._reactInternals;e:{if($n(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Xt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Xt(a))return qh(n,a,r)}return r}function kf(n,r,a,c,f,g,v,C,T){return n=Uu(a,c,!0,n,f,g,v,C,T),n.context=Sf(null),a=n.current,c=Nt(),f=Rr(a),g=or(c,f),g.callback=r??null,Pr(a,g,f),n.current.lanes=f,X(n,f,c),Qt(n,c),n}function Ca(n,r,a,c){var f=r.current,g=Nt(),v=Rr(f);return a=Sf(a),r.context===null?r.context=a:r.pendingContext=a,r=or(g,v),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=Pr(f,r,v),n!==null&&(Mn(n,f,v,g),na(n,f,v)),v}function Aa(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bf(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Wu(n,r){bf(n,r),(n=n.alternate)&&bf(n,r)}function pg(){return null}var Cf=typeof reportError=="function"?reportError:function(n){console.error(n)};function Gu(n){this._internalRoot=n}Pa.prototype.render=Gu.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));Ca(n,r,null,null)},Pa.prototype.unmount=Gu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;ni(function(){Ca(null,n,null,null)}),r[tr]=null}};function Pa(n){this._internalRoot=n}Pa.prototype.unstable_scheduleHydration=function(n){if(n){var r=ue();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Nn.length&&r!==0&&r<Nn[a].priority;a++);Nn.splice(a,0,n),a===0&&ch(n)}};function Hu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ta(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Af(){}function mg(n,r,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var O=Aa(v);g.call(O)}}var v=kf(r,c,n,0,null,!1,!1,"",Af);return n._reactRootContainer=v,n[tr]=v.current,Es(n.nodeType===8?n.parentNode:n),ni(),v}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var C=c;c=function(){var O=Aa(T);C.call(O)}}var T=Uu(n,0,!1,null,null,!1,!1,"",Af);return n._reactRootContainer=T,n[tr]=T.current,Es(n.nodeType===8?n.parentNode:n),ni(function(){Ca(r,T,a,c)}),T}function Ea(n,r,a,c,f){var g=a._reactRootContainer;if(g){var v=g;if(typeof f=="function"){var C=f;f=function(){var T=Aa(v);C.call(T)}}Ca(r,v,n,f)}else v=mg(a,r,n,f,c);return Aa(v)}Pe=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=vr(r.pendingLanes);a!==0&&(K(r,a|1),Qt(r,ht()),(Ue&6)===0&&(Wi=ht()+500,Cr()))}break;case 13:ni(function(){var c=sr(n,1);if(c!==null){var f=Nt();Mn(c,n,1,f)}}),Wu(n,1)}},ke=function(n){if(n.tag===13){var r=sr(n,134217728);if(r!==null){var a=Nt();Mn(r,n,134217728,a)}Wu(n,134217728)}},Le=function(n){if(n.tag===13){var r=Rr(n),a=sr(n,r);if(a!==null){var c=Nt();Mn(a,n,r,c)}Wu(n,r)}},ue=function(){return W},de=function(n,r){var a=W;try{return W=n,r()}finally{W=a}},ps=function(n,r,a){switch(r){case"input":if(Qn(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var f=Vo(c);if(!f)throw Error(t(90));nn(c),Qn(c,f)}}}break;case"textarea":ls(n,a);break;case"select":r=a.value,r!=null&&kn(n,!!a.multiple,r,!1)}},So=Bu,ko=ni;var gg={usingClientEntryPoint:!1,Events:[Is,Mi,Vo,ms,gi,Bu]},Vs={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yg={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Po(n),n===null?null:n.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||pg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ma.isDisabled&&Ma.supportsFiber)try{Qe=Ma.inject(yg),Ze=Ma}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gg,Zt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hu(r))throw Error(t(200));return fg(n,r,null,a)},Zt.createRoot=function(n,r){if(!Hu(n))throw Error(t(299));var a=!1,c="",f=Cf;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=Uu(n,1,!1,null,null,a,!1,c,f),n[tr]=r.current,Es(n.nodeType===8?n.parentNode:n),new Gu(r)},Zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Po(r),n=n===null?null:n.stateNode,n},Zt.flushSync=function(n){return ni(n)},Zt.hydrate=function(n,r,a){if(!Ta(r))throw Error(t(200));return Ea(null,n,r,!0,a)},Zt.hydrateRoot=function(n,r,a){if(!Hu(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",v=Cf;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),r=kf(r,null,n,1,a??null,f,!1,g,v),n[tr]=r.current,Es(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,f]:r.mutableSourceEagerHydrationData.push(a,f);return new Pa(r)},Zt.render=function(n,r,a){if(!Ta(r))throw Error(t(200));return Ea(null,n,r,!1,a)},Zt.unmountComponentAtNode=function(n){if(!Ta(n))throw Error(t(40));return n._reactRootContainer?(ni(function(){Ea(null,null,n,!1,function(){n._reactRootContainer=null,n[tr]=null})}),!0):!1},Zt.unstable_batchedUpdates=Bu,Zt.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!Ta(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Ea(n,r,a,!1,c)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Lf;function Cg(){if(Lf)return Xu.exports;Lf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Xu.exports=bg(),Xu.exports}var zf;function Ag(){if(zf)return Ra;zf=1;var i=Cg();return Ra.createRoot=i.createRoot,Ra.hydrateRoot=i.hydrateRoot,Ra}var Pg=Ag();const Tg=Vc(Pg);var Ce=Yc();const Eg="modulepreload",Mg=function(i){return"/"+i},Bf={},Za=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=u(t.map(p=>{if(p=Mg(p),p in Bf)return;Bf[p]=!0;const m=p.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":Eg,m||(x.as="script"),x.crossOrigin="",x.href=p,d&&x.setAttribute("nonce",d),document.head.appendChild(x),m)return new Promise((_,k)=>{x.addEventListener("load",_),x.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};var xe=(i=>(i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i.ShapeBuilder="shape-builder",i.Batcher="batcher",i))(xe||{});const Ac=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},Ia=(i,e)=>Ac(i).priority??e,Lt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(Ac).forEach(e=>{e.type.forEach(t=>{var s,o;return(o=(s=this._removeHandlers)[t])==null?void 0:o.call(s,e)})}),this},add(...i){return i.map(Ac).forEach(e=>{e.type.forEach(t=>{var l,u;const s=this._addHandlers,o=this._queue;s[t]?(u=s[t])==null||u.call(s,e):(o[t]=o[t]||[],(l=o[t])==null||l.push(e))})}),this},handle(i,e,t){var u;const s=this._addHandlers,o=this._removeHandlers;if(s[i]||o[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=e,o[i]=t;const l=this._queue;return l[i]&&((u=l[i])==null||u.forEach(h=>e(h)),delete l[i]),this},handleByMap(i,e){return this.handle(i,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(i,e,t=-1){return this.handle(i,s=>{e.findIndex(l=>l.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((l,u)=>Ia(u.value,t)-Ia(l.value,t)))},s=>{const o=e.findIndex(l=>l.name===s.name);o!==-1&&e.splice(o,1)})},handleByList(i,e,t=-1){return this.handle(i,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((o,l)=>Ia(l,t)-Ia(o,t)))},s=>{const o=e.indexOf(s.ref);o!==-1&&e.splice(o,1)})},mixin(i,...e){for(const t of e)Object.defineProperties(i.prototype,Object.getOwnPropertyDescriptors(t))}},Rg={extension:{type:xe.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Za(()=>import("./browserAll-Ck6Ns6Ok.js"),__vite__mapDeps([0,1,2]))}},Ig={extension:{type:xe.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Za(()=>import("./webworkerAll-DwJaeqp7.js"),__vite__mapDeps([1,2]))}};class Ft{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new Ft(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Qu={exports:{}},jf;function Fg(){return jf||(jf=1,(function(i){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function o(d,p,m){this.fn=d,this.context=p,this.once=m||!1}function l(d,p,m,y,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var _=new o(m,y||d,x),k=t?t+p:p;return d._events[k]?d._events[k].fn?d._events[k]=[d._events[k],_]:d._events[k].push(_):(d._events[k]=_,d._eventsCount++),d}function u(d,p){--d._eventsCount===0?d._events=new s:delete d._events[p]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],m,y;if(this._eventsCount===0)return p;for(y in m=this._events)e.call(m,y)&&p.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},h.prototype.listeners=function(p){var m=t?t+p:p,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var x=0,_=y.length,k=new Array(_);x<_;x++)k[x]=y[x].fn;return k},h.prototype.listenerCount=function(p){var m=t?t+p:p,y=this._events[m];return y?y.fn?1:y.length:0},h.prototype.emit=function(p,m,y,x,_,k){var b=t?t+p:p;if(!this._events[b])return!1;var w=this._events[b],A=arguments.length,P,E;if(w.fn){switch(w.once&&this.removeListener(p,w.fn,void 0,!0),A){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,y),!0;case 4:return w.fn.call(w.context,m,y,x),!0;case 5:return w.fn.call(w.context,m,y,x,_),!0;case 6:return w.fn.call(w.context,m,y,x,_,k),!0}for(E=1,P=new Array(A-1);E<A;E++)P[E-1]=arguments[E];w.fn.apply(w.context,P)}else{var M=w.length,Y;for(E=0;E<M;E++)switch(w[E].once&&this.removeListener(p,w[E].fn,void 0,!0),A){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,m);break;case 3:w[E].fn.call(w[E].context,m,y);break;case 4:w[E].fn.call(w[E].context,m,y,x);break;default:if(!P)for(Y=1,P=new Array(A-1);Y<A;Y++)P[Y-1]=arguments[Y];w[E].fn.apply(w[E].context,P)}}return!0},h.prototype.on=function(p,m,y){return l(this,p,m,y,!1)},h.prototype.once=function(p,m,y){return l(this,p,m,y,!0)},h.prototype.removeListener=function(p,m,y,x){var _=t?t+p:p;if(!this._events[_])return this;if(!m)return u(this,_),this;var k=this._events[_];if(k.fn)k.fn===m&&(!x||k.once)&&(!y||k.context===y)&&u(this,_);else{for(var b=0,w=[],A=k.length;b<A;b++)(k[b].fn!==m||x&&!k[b].once||y&&k[b].context!==y)&&w.push(k[b]);w.length?this._events[_]=w.length===1?w[0]:w:u(this,_)}return this},h.prototype.removeAllListeners=function(p){var m;return p?(m=t?t+p:p,this._events[m]&&u(this,m)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,i.exports=h})(Qu)),Qu.exports}var Lg=Fg();const Ln=Vc(Lg),zg=Math.PI*2,Bg=180/Math.PI,jg=Math.PI/180;class Ot{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Ot(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Zu.x=0,Zu.y=0,Zu}}const Zu=new Ot;class De{constructor(e=1,t=0,s=0,o=1,l=0,u=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,o,l,u){return this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new Ot;const s=e.x,o=e.y;return t.x=this.a*s+this.c*o+this.tx,t.y=this.b*s+this.d*o+this.ty,t}applyInverse(e,t){t=t||new Ot;const s=this.a,o=this.b,l=this.c,u=this.d,h=this.tx,d=this.ty,p=1/(s*u+l*-o),m=e.x,y=e.y;return t.x=u*p*m+-l*p*y+(d*l-h*u)*p,t.y=s*p*y+-o*p*m+(-d*s+h*o)*p,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.a,l=this.c,u=this.tx;return this.a=o*t-this.b*s,this.b=o*s+this.b*t,this.c=l*t-this.d*s,this.d=l*s+this.d*t,this.tx=u*t-this.ty*s,this.ty=u*s+this.ty*t,this}append(e){const t=this.a,s=this.b,o=this.c,l=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*s+e.b*l,this.c=e.c*t+e.d*o,this.d=e.c*s+e.d*l,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*s+e.ty*l+this.ty,this}appendFrom(e,t){const s=e.a,o=e.b,l=e.c,u=e.d,h=e.tx,d=e.ty,p=t.a,m=t.b,y=t.c,x=t.d;return this.a=s*p+o*y,this.b=s*m+o*x,this.c=l*p+u*y,this.d=l*m+u*x,this.tx=h*p+d*y+t.tx,this.ty=h*m+d*x+t.ty,this}setTransform(e,t,s,o,l,u,h,d,p){return this.a=Math.cos(h+p)*l,this.b=Math.sin(h+p)*l,this.c=-Math.sin(h-d)*u,this.d=Math.cos(h-d)*u,this.tx=e-(s*this.a+o*this.c),this.ty=t-(s*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,o=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,o=this.c,l=this.d,u=e.pivot,h=-Math.atan2(-o,l),d=Math.atan2(s,t),p=Math.abs(h+d);return p<1e-5||Math.abs(zg-p)<1e-5?(e.rotation=d,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=d),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(o*o+l*l),e.position.x=this.tx+(u.x*t+u.y*o),e.position.y=this.ty+(u.x*s+u.y*l),e}invert(){const e=this.a,t=this.b,s=this.c,o=this.d,l=this.tx,u=e*o-t*s;return this.a=o/u,this.b=-t/u,this.c=-s/u,this.d=e/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(e*this.ty-t*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new De;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Og.identity()}static get shared(){return Dg.identity()}}const Dg=new De,Og=new De,li=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ui=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ci=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],hi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Pc=[],op=[],Fa=Math.sign;function $g(){for(let i=0;i<16;i++){const e=[];Pc.push(e);for(let t=0;t<16;t++){const s=Fa(li[i]*li[t]+ci[i]*ui[t]),o=Fa(ui[i]*li[t]+hi[i]*ui[t]),l=Fa(li[i]*ci[t]+ci[i]*hi[t]),u=Fa(ui[i]*ci[t]+hi[i]*hi[t]);for(let h=0;h<16;h++)if(li[h]===s&&ui[h]===o&&ci[h]===l&&hi[h]===u){e.push(h);break}}}for(let i=0;i<16;i++){const e=new De;e.set(li[i],ui[i],ci[i],hi[i],0,0),op.push(e)}}$g();const Ke={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>li[i],uY:i=>ui[i],vX:i=>ci[i],vY:i=>hi[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>Pc[i][e],sub:(i,e)=>Pc[i][Ke.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?Ke.S:Ke.N:Math.abs(e)*2<=Math.abs(i)?i>0?Ke.E:Ke.W:e>0?i>0?Ke.SE:Ke.SW:i>0?Ke.NE:Ke.NW,matrixAppendRotationInv:(i,e,t=0,s=0)=>{const o=op[Ke.inv(e)];o.tx=t,o.ty=s,i.append(o)},transformRectCoords:(i,e,t,s)=>{const{x:o,y:l,width:u,height:h}=i,{x:d,y:p,width:m,height:y}=e;return t===Ke.E?(s.set(o+d,l+p,u,h),s):t===Ke.S?s.set(m-l-h+d,o+p,h,u):t===Ke.W?s.set(m-o-u+d,y-l-h+p,u,h):t===Ke.N?s.set(l+d,y-o-u+p,h,u):s.set(o+d,l+p,u,h)}},La=[new Ot,new Ot,new Ot,new Ot];class lt{constructor(e=0,t=0,s=0,o=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new lt(0,0,0,0)}clone(){return new lt(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,d=this.y,p=s*(1-o),m=s-p,y=h-p,x=h+l+p,_=d-p,k=d+u+p,b=h+m,w=h+l-m,A=d+m,P=d+u-m;return e>=y&&e<=x&&t>=_&&t<=k&&!(e>b&&e<w&&t>A&&t<P)}intersects(e,t){if(!t){const ie=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=ie)return!1;const te=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>te}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const h=La[0].set(e.left,e.top),d=La[1].set(e.left,e.bottom),p=La[2].set(e.right,e.top),m=La[3].set(e.right,e.bottom);if(p.x<=h.x||d.y<=h.y)return!1;const y=Math.sign(t.a*t.d-t.b*t.c);if(y===0||(t.apply(h,h),t.apply(d,d),t.apply(p,p),t.apply(m,m),Math.max(h.x,d.x,p.x,m.x)<=s||Math.min(h.x,d.x,p.x,m.x)>=o||Math.max(h.y,d.y,p.y,m.y)<=l||Math.min(h.y,d.y,p.y,m.y)>=u))return!1;const x=y*(d.y-h.y),_=y*(h.x-d.x),k=x*s+_*l,b=x*o+_*l,w=x*s+_*u,A=x*o+_*u;if(Math.max(k,b,w,A)<=x*h.x+_*h.y||Math.min(k,b,w,A)>=x*m.x+_*m.y)return!1;const P=y*(h.y-p.y),E=y*(p.x-h.x),M=P*s+E*l,Y=P*o+E*l,N=P*s+E*u,$=P*o+E*u;return!(Math.max(M,Y,N,$)<=P*h.x+E*h.y||Math.min(M,Y,N,$)>=P*m.x+E*m.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),l=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=o-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),l=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=o,this.height=l-o,this}getBounds(e){return e||(e=new lt),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,o=e.x+e.width,l=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(e,t,s,o){return this.x=e,this.y=t,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Ju={default:-1};function vt(i="default"){return Ju[i]===void 0&&(Ju[i]=-1),++Ju[i]}const Df=new Set,Xe="8.0.0",Ng="8.3.4",qi={quiet:!1,noColor:!1},Be=(i,e,t=3)=>{if(qi.quiet||Df.has(e))return;let s=new Error().stack;const o=`${e}
Deprecated since v${i}`,l=typeof console.groupCollapsed=="function"&&!qi.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(t).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),Df.add(e)};Object.defineProperties(Be,{quiet:{get:()=>qi.quiet,set:i=>{qi.quiet=i},enumerable:!0,configurable:!1},noColor:{get:()=>qi.noColor,set:i=>{qi.noColor=i},enumerable:!0,configurable:!1}});const ap=()=>{};function Ji(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Of(i){return!(i&i-1)&&!!i}function lp(i){const e={};for(const t in i)i[t]!==void 0&&(e[t]=i[t]);return e}const $f=Object.create(null);function Ug(i){const e=$f[i];return e===void 0&&($f[i]=vt("resource")),e}const up=class cp extends Ln{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...cp.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Be(Xe,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Ug(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};up.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let es=up;const hp=class dp extends Ln{constructor(e={}){super(),this.options=e,this.uid=vt("textureSource"),this._resourceType="textureSource",this._resourceId=vt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...dp.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new es(lp(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=vt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const o=Math.round(e*s),l=Math.round(t*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=vt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Of(this.pixelWidth)&&Of(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};hp.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let zn=hp;class Xc extends zn{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Xc.extension=xe.TextureSource;const Nf=new De;class Wg{constructor(e,t){this.mapCoord=new De,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let o=0;o<e.length;o+=2){const l=e[o],u=e[o+1];t[o]=l*s.a+u*s.c+s.tx,t[o+1]=l*s.b+u*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,o=e.trim;o&&(Nf.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Nf));const l=e.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,d=this.clampOffset/l._resolution;return u[0]=(e.frame.x+h+d)/l.width,u[1]=(e.frame.y+h+d)/l.height,u[2]=(e.frame.x+e.frame.width-h+d)/l.width,u[3]=(e.frame.y+e.frame.height-h+d)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=e.frame.width===l.width&&e.frame.height===l.height&&e.rotate===0,!0}}class $e extends Ln{constructor({source:e,label:t,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:h,rotate:d,dynamic:p}={}){if(super(),this.uid=vt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new lt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new zn,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:m,height:y}=this._source;this.frame.width=m,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Wg(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:o}=this._source,l=t.x/s,u=t.y/o,h=t.width/s,d=t.height/o;let p=this.rotate;if(p){const m=h/2,y=d/2,x=l+m,_=u+y;p=Ke.add(p,Ke.NW),e.x0=x+m*Ke.uX(p),e.y0=_+y*Ke.uY(p),p=Ke.add(p,2),e.x1=x+m*Ke.uX(p),e.y1=_+y*Ke.uY(p),p=Ke.add(p,2),e.x2=x+m*Ke.uX(p),e.y2=_+y*Ke.uY(p),p=Ke.add(p,2),e.x3=x+m*Ke.uX(p),e.y3=_+y*Ke.uY(p)}else e.x0=l,e.y0=u,e.x1=l+h,e.y1=u,e.x2=l+h,e.y2=u+d,e.x3=l,e.y3=u+d}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Be(Xe,"Texture.baseTexture is now Texture.source"),this._source}}$e.EMPTY=new $e({label:"EMPTY",source:new zn({label:"EMPTY"})});$e.EMPTY.destroy=ap;$e.WHITE=new $e({source:new Xc({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});$e.WHITE.destroy=ap;function Gg(i,e,t){const{width:s,height:o}=t.orig,l=t.trim;if(l){const u=l.width,h=l.height;i.minX=l.x-e._x*s,i.maxX=i.minX+u,i.minY=l.y-e._y*o,i.maxY=i.minY+h}else i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*o,i.maxY=i.minY+o}const Uf=new De;class Fn{constructor(e=1/0,t=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Uf,this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new lt);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Uf,this}set(e,t,s,o){this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}addFrame(e,t,s,o,l){l||(l=this.matrix);const u=l.a,h=l.b,d=l.c,p=l.d,m=l.tx,y=l.ty;let x=this.minX,_=this.minY,k=this.maxX,b=this.maxY,w=u*e+d*t+m,A=h*e+p*t+y;w<x&&(x=w),A<_&&(_=A),w>k&&(k=w),A>b&&(b=A),w=u*s+d*t+m,A=h*s+p*t+y,w<x&&(x=w),A<_&&(_=A),w>k&&(k=w),A>b&&(b=A),w=u*e+d*o+m,A=h*e+p*o+y,w<x&&(x=w),A<_&&(_=A),w>k&&(k=w),A>b&&(b=A),w=u*s+d*o+m,A=h*s+p*o+y,w<x&&(x=w),A<_&&(_=A),w>k&&(k=w),A>b&&(b=A),this.minX=x,this.minY=_,this.maxX=k,this.maxY=b}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:h,c:d,d:p,tx:m,ty:y}=e;let x=u*t+d*s+m,_=h*t+p*s+y;this.minX=x,this.minY=_,this.maxX=x,this.maxY=_,x=u*o+d*s+m,_=h*o+p*s+y,this.minX=x<this.minX?x:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=_>this.maxY?_:this.maxY,x=u*t+d*l+m,_=h*t+p*l+y,this.minX=x<this.minX?x:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=_>this.maxY?_:this.maxY,x=u*o+d*l+m,_=h*o+p*l+y,this.minX=x<this.minX?x:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=_>this.maxY?_:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,o){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Fn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,o){let l=this.minX,u=this.minY,h=this.maxX,d=this.maxY;o||(o=this.matrix);const p=o.a,m=o.b,y=o.c,x=o.d,_=o.tx,k=o.ty;for(let b=t;b<s;b+=2){const w=e[b],A=e[b+1],P=p*w+y*A+_,E=m*w+x*A+k;l=P<l?P:l,u=E<u?E:u,h=P>h?P:h,d=E>d?E:d}this.minX=l,this.minY=u,this.maxX=h,this.maxY=d}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var Hg={grad:.9,turn:360,rad:360/(2*Math.PI)},ur=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},Mt=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},wn=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},fp=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},Wf=function(i){return{r:wn(i.r,0,255),g:wn(i.g,0,255),b:wn(i.b,0,255),a:wn(i.a)}},ec=function(i){return{r:Mt(i.r),g:Mt(i.g),b:Mt(i.b),a:Mt(i.a,3)}},Vg=/^#([0-9a-f]{3,8})$/i,za=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},pp=function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=Math.max(e,t,s),u=l-Math.min(e,t,s),h=u?l===e?(t-s)/u:l===t?2+(s-e)/u:4+(e-t)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a:o}},mp=function(i){var e=i.h,t=i.s,s=i.v,o=i.a;e=e/360*6,t/=100,s/=100;var l=Math.floor(e),u=s*(1-t),h=s*(1-(e-l)*t),d=s*(1-(1-e+l)*t),p=l%6;return{r:255*[s,h,u,u,d,s][p],g:255*[d,s,s,h,u,u][p],b:255*[u,u,d,s,s,h][p],a:o}},Gf=function(i){return{h:fp(i.h),s:wn(i.s,0,100),l:wn(i.l,0,100),a:wn(i.a)}},Hf=function(i){return{h:Mt(i.h),s:Mt(i.s),l:Mt(i.l),a:Mt(i.a,3)}},Vf=function(i){return mp((t=(e=i).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},oo=function(i){return{h:(e=pp(i)).h,s:(o=(200-(t=e.s))*(s=e.v)/100)>0&&o<200?t*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,s,o},Yg=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Xg=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qg=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Kg=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Tc={string:[[function(i){var e=Vg.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Mt(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?Mt(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=qg.exec(i)||Kg.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:Wf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=Yg.exec(i)||Xg.exec(i);if(!e)return null;var t,s,o=Gf({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(Hg[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Vf(o)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=o===void 0?1:o;return ur(e)&&ur(t)&&ur(s)?Wf({r:Number(e),g:Number(t),b:Number(s),a:Number(l)}):null},"rgb"],[function(i){var e=i.h,t=i.s,s=i.l,o=i.a,l=o===void 0?1:o;if(!ur(e)||!ur(t)||!ur(s))return null;var u=Gf({h:Number(e),s:Number(t),l:Number(s),a:Number(l)});return Vf(u)},"hsl"],[function(i){var e=i.h,t=i.s,s=i.v,o=i.a,l=o===void 0?1:o;if(!ur(e)||!ur(t)||!ur(s))return null;var u=(function(h){return{h:fp(h.h),s:wn(h.s,0,100),v:wn(h.v,0,100),a:wn(h.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(l)});return mp(u)},"hsv"]]},Yf=function(i,e){for(var t=0;t<e.length;t++){var s=e[t][0](i);if(s)return[s,e[t][1]]}return[null,void 0]},Qg=function(i){return typeof i=="string"?Yf(i.trim(),Tc.string):typeof i=="object"&&i!==null?Yf(i,Tc.object):[null,void 0]},tc=function(i,e){var t=oo(i);return{h:t.h,s:wn(t.s+100*e,0,100),l:t.l,a:t.a}},nc=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},Xf=function(i,e){var t=oo(i);return{h:t.h,s:t.s,l:wn(t.l+100*e,0,100),a:t.a}},Ec=(function(){function i(e){this.parsed=Qg(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return Mt(nc(this.rgba),2)},i.prototype.isDark=function(){return nc(this.rgba)<.5},i.prototype.isLight=function(){return nc(this.rgba)>=.5},i.prototype.toHex=function(){return e=ec(this.rgba),t=e.r,s=e.g,o=e.b,u=(l=e.a)<1?za(Mt(255*l)):"","#"+za(t)+za(s)+za(o)+u;var e,t,s,o,l,u},i.prototype.toRgb=function(){return ec(this.rgba)},i.prototype.toRgbString=function(){return e=ec(this.rgba),t=e.r,s=e.g,o=e.b,(l=e.a)<1?"rgba("+t+", "+s+", "+o+", "+l+")":"rgb("+t+", "+s+", "+o+")";var e,t,s,o,l},i.prototype.toHsl=function(){return Hf(oo(this.rgba))},i.prototype.toHslString=function(){return e=Hf(oo(this.rgba)),t=e.h,s=e.s,o=e.l,(l=e.a)<1?"hsla("+t+", "+s+"%, "+o+"%, "+l+")":"hsl("+t+", "+s+"%, "+o+"%)";var e,t,s,o,l},i.prototype.toHsv=function(){return e=pp(this.rgba),{h:Mt(e.h),s:Mt(e.s),v:Mt(e.v),a:Mt(e.a,3)};var e},i.prototype.invert=function(){return Yn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),Yn(tc(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),Yn(tc(this.rgba,-e))},i.prototype.grayscale=function(){return Yn(tc(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),Yn(Xf(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),Yn(Xf(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?Yn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Mt(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=oo(this.rgba);return typeof e=="number"?Yn({h:e,s:t.s,l:t.l,a:t.a}):Mt(t.h)},i.prototype.isEqual=function(e){return this.toHex()===Yn(e).toHex()},i})(),Yn=function(i){return i instanceof Ec?i:new Ec(i)},qf=[],Zg=function(i){i.forEach(function(e){qf.indexOf(e)<0&&(e(Ec,Tc),qf.push(e))})};function Jg(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in t)s[t[o]]=o;var l={};i.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,d,p=s[this.toHex()];if(p)return p;if(u!=null&&u.closest){var m=this.toRgb(),y=1/0,x="black";if(!l.length)for(var _ in t)l[_]=new i(t[_]).toRgb();for(var k in t){var b=(h=m,d=l[k],Math.pow(h.r-d.r,2)+Math.pow(h.g-d.g,2)+Math.pow(h.b-d.b,2));b<y&&(y=b,x=k)}return x}},e.string.push([function(u){var h=u.toLowerCase(),d=h==="transparent"?"#0000":t[h];return d?new i(d).toRgb():null},"name"])}Zg([Jg]);const ts=class no{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof no)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((l,u)=>l===t[u]);if(e!==null&&t!==null){const l=Object.keys(e),u=Object.keys(t);return l.length!==u.length?!1:l.every(h=>e[h]===t[h])}return e===t}toRgba(){const[e,t,s,o]=this._components;return{r:e,g:t,b:s,a:o}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(o*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,o,l]=this._components;return e[0]=t,e[1]=s,e[2]=o,e[3]=l,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,o]=this._components;return e[0]=t,e[1]=s,e[2]=o,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,o,l]=no._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return t&&(s=s*e+.5|0,o=o*e+.5|0,l=l*e+.5|0),(e*255<<24)+(s<<16)+(o<<8)+l}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,o,l;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,o,l=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,o,l=255]=e,t/=255,s/=255,o/=255,l/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const h=no.HEX_PATTERN.exec(e);h&&(e=`#${h[2]}`)}const u=Yn(e);u.isValid()&&({r:t,g:s,b:o,a:l}=u.rgba,t/=255,s/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((o,l)=>{e[l]=Math.min(Math.max(o,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof no||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};ts.shared=new ts;ts._temp=new ts;ts.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let kt=ts;const e2={cullArea:null,cullable:!1,cullableChildren:!0};let rc=0;const Kf=500;function st(...i){rc!==Kf&&(rc++,rc===Kf?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}const vo={_registeredResources:new Set,register(i){this._registeredResources.add(i)},unregister(i){this._registeredResources.delete(i)},release(){this._registeredResources.forEach(i=>i.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(i){return this._registeredResources.has(i)},reset(){this._registeredResources.clear()}};class t2{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class n2{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new t2(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const Sn=new n2;vo.register(Sn);const r2={get isCachedAsTexture(){var i;return!!((i=this.renderGroup)!=null&&i.isCachedAsTexture)},cacheAsTexture(i){typeof i=="boolean"&&i===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(i===!0?{}:i))},updateCacheTexture(){var i;(i=this.renderGroup)==null||i.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(i){Be("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(i)}};function i2(i,e,t){const s=i.length;let o;if(e>=s||t===0)return;t=e+t>s?s-e:t;const l=s-t;for(o=e;o<l;++o)i[o]=i[o+t];i.length=l}const s2={allowChildren:!0,removeChildren(i=0,e){var l;const t=e??this.children.length,s=t-i,o=[];if(s>0&&s<=t){for(let h=t-1;h>=i;h--){const d=this.children[h];d&&(o.push(d),d.parent=null)}i2(this.children,i,t);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(o);for(let h=0;h<o.length;++h){const d=o[h];(l=d.parentRenderLayer)==null||l.detach(d),this.emit("childRemoved",d,this,h),o[h].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){const e=this.getChildAt(i);return this.removeChild(e)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,e)},getChildIndex(i){const e=this.children.indexOf(i);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(i,e){this.allowChildren||Be(Xe,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${i}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(i.parent){const o=i.parent.children.indexOf(i);if(i.parent===this&&o===e)return i;o!==-1&&i.parent.children.splice(o,1)}e===t.length?t.push(i):t.splice(e,0,i),i.parent=this,i.didChange=!0,i._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,e),i.emit("added",this),i},swapChildren(i,e){if(i===e)return;const t=this.getChildIndex(i),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=i;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var i;(i=this.parent)==null||i.removeChild(this)},reparentChild(...i){return i.length===1?this.reparentChildAt(i[0],this.children.length):(i.forEach(e=>this.reparentChildAt(e,this.children.length)),i[0])},reparentChildAt(i,e){if(i.parent===this)return this.setChildIndex(i,e),i;const t=i.worldTransform.clone();i.removeFromParent(),this.addChildAt(i,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),i.setFromMatrix(t),i},replaceChild(i,e){i.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(i)),e.setFromMatrix(i.localTransform),e.updateLocalTransform(),this.removeChild(i)}},o2={collectRenderables(i,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(i,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,i):this.collectRenderablesWithEffects(i,e,t))},collectRenderablesSimple(i,e,t){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(i,e,t)},collectRenderablesWithEffects(i,e,t){const{renderPipes:s}=e;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,i)}this.collectRenderablesSimple(i,e,t);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,i)}}};class Qf{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class a2{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return Sn.get(s.maskClass,e)}return e}returnMaskEffect(e){Sn.return(e)}}const Mc=new a2;Lt.handleByList(xe.MaskEffect,Mc._effectClasses);const l2={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)},addEffect(i){this.effects.indexOf(i)===-1&&(this.effects.push(i),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(i){const e=this.effects.indexOf(i);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(i){const e=this._maskEffect;(e==null?void 0:e.mask)!==i&&(e&&(this.removeEffect(e),Mc.returnMaskEffect(e),this._maskEffect=null),i!=null&&(this._maskEffect=Mc.getMaskEffect(i),this.addEffect(this._maskEffect)))},get mask(){var i;return(i=this._maskEffect)==null?void 0:i.mask},setMask(i){this._maskOptions={...this._maskOptions,...i},i.mask&&(this.mask=i.mask),this._markStructureAsChanged()},set filters(i){var l;!Array.isArray(i)&&i&&(i=[i]);const e=this._filterEffect||(this._filterEffect=new Qf);i=i;const t=(i==null?void 0:i.length)>0,s=((l=e.filters)==null?void 0:l.length)>0,o=t!==s;i=Array.isArray(i)?i.slice(0):i,e.filters=Object.freeze(i),o&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=i??null))},get filters(){var i;return(i=this._filterEffect)==null?void 0:i.filters},set filterArea(i){this._filterEffect||(this._filterEffect=new Qf),this._filterEffect.filterArea=i},get filterArea(){var i;return(i=this._filterEffect)==null?void 0:i.filterArea}},u2={label:null,get name(){return Be(Xe,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){Be(Xe,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,e=!1){return this.getChildByLabel(i,e)},getChildByLabel(i,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const o=t[s];if(o.label===i||i instanceof RegExp&&i.test(o.label))return o}if(e)for(let s=0;s<t.length;s++){const l=t[s].getChildByLabel(i,!0);if(l)return l}return null},getChildrenByLabel(i,e=!1,t=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===i||i instanceof RegExp&&i.test(l.label))&&t.push(l)}if(e)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(i,!0,t);return t}},Wt=Sn.getPool(De),dr=Sn.getPool(Fn),c2=new De,h2={getFastGlobalBounds(i,e){e||(e=new Fn),e.clear(),this._getGlobalBoundsRecursive(!!i,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(i,e,t){let s=e;if(i&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=dr.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(i,s,t)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(c2).invert()),e.addBounds(s),dr.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),dr.return(s))}};function gp(i,e,t){t.clear();let s,o;return i.parent?e?s=i.parent.worldTransform:(o=Wt.get().identity(),s=qc(i,o)):s=De.IDENTITY,yp(i,t,s,e),o&&Wt.return(o),t.isValid||t.set(0,0,0,0),t}function yp(i,e,t,s){var h,d;if(!i.visible||!i.measurable)return;let o;s?o=i.worldTransform:(i.updateLocalTransform(),o=Wt.get(),o.appendFrom(i.localTransform,t));const l=e,u=!!i.effects.length;if(u&&(e=dr.get().clear()),i.boundsArea)e.addRect(i.boundsArea,o);else{const p=i.bounds;p&&!p.isEmpty()&&(e.matrix=o,e.addBounds(p));for(let m=0;m<i.children.length;m++)yp(i.children[m],e,o,s)}if(u){for(let p=0;p<i.effects.length;p++)(d=(h=i.effects[p]).addBounds)==null||d.call(h,e);l.addBounds(e,De.IDENTITY),dr.return(e)}s||Wt.return(o)}function qc(i,e){const t=i.parent;return t&&(qc(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function xp(i,e){if(i===16777215||!e)return e;if(e===16777215||!i)return i;const t=i>>16&255,s=i>>8&255,o=i&255,l=e>>16&255,u=e>>8&255,h=e&255,d=t*l/255|0,p=s*u/255|0,m=o*h/255|0;return(d<<16)+(p<<8)+m}const Zf=16777215;function Jf(i,e){return i===Zf?e:e===Zf?i:xp(i,e)}function Xa(i){return((i&255)<<16)+(i&65280)+(i>>16&255)}const d2={getGlobalAlpha(i){if(i)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(i=new De,e){if(e)return i.copyFrom(this.worldTransform);this.updateLocalTransform();const t=qc(this,Wt.get().identity());return i.appendFrom(this.localTransform,t),Wt.return(t),i},getGlobalTint(i){if(i)return this.renderGroup?Xa(this.renderGroup.worldColor):this.parentRenderGroup?Xa(Jf(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Jf(e,t.localColor),t=t.parent;return Xa(e)}};function vp(i,e,t){return e.clear(),t||(t=De.IDENTITY),_p(i,e,t,i,!0),e.isValid||e.set(0,0,0,0),e}function _p(i,e,t,s,o){var d,p;let l;if(o)l=Wt.get(),l=t.copyTo(l);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const m=i.localTransform;l=Wt.get(),l.appendFrom(m,t)}const u=e,h=!!i.effects.length;if(h&&(e=dr.get().clear()),i.boundsArea)e.addRect(i.boundsArea,l);else{i.renderPipeId&&(e.matrix=l,e.addBounds(i.bounds));const m=i.children;for(let y=0;y<m.length;y++)_p(m[y],e,l,s,!1)}if(h){for(let m=0;m<i.effects.length;m++)(p=(d=i.effects[m]).addLocalBounds)==null||p.call(d,e,s);u.addBounds(e,De.IDENTITY),dr.return(e)}Wt.return(l)}function wp(i,e){const t=i.children;for(let s=0;s<t.length;s++){const o=t[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,h=e.index;(e.data[h]!==l||e.data[h+1]!==u)&&(e.data[e.index]=l,e.data[e.index+1]=u,e.didChange=!0),e.index=h+2,o.children.length&&wp(o,e)}return e.didChange}const f2=new De,p2={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(i,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=i/e*t:this.scale.x=t},_setHeight(i,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=i/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Fn});const i=this._localBoundsCacheData;return i.index=1,i.didChange=!1,i.data[0]!==this._didViewChangeTick&&(i.didChange=!0,i.data[0]=this._didViewChangeTick),wp(this,i),i.didChange&&vp(this,i.localBounds,f2),i.localBounds},getBounds(i,e){return gp(this,i,e||new Fn)}},m2={_onRender:null,set onRender(i){const e=this.renderGroup||this.parentRenderGroup;if(!i){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}},g2={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(y2))}};function y2(i,e){return i._zIndex-e._zIndex}const x2={getGlobalPosition(i=new Ot,e=!1){return this.parent?this.parent.toGlobal(this._position,i,e):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,e,t=!1){const s=this.getGlobalTransform(Wt.get(),t);return e=s.apply(i,e),Wt.return(s),e},toLocal(i,e,t,s){e&&(i=e.toGlobal(i,t,s));const o=this.getGlobalTransform(Wt.get(),s);return t=o.applyInverse(i,t),Wt.return(o),t}};class Sp{constructor(){this.uid=vt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let v2=0;class _2{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new es(this.textureOptions)}createTexture(e,t,s){const o=new zn({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new $e({source:o,label:`texturePool_${v2++}`})}getOptimalTexture(e,t,s=1,o){let l=Math.ceil(e*s-1e-6),u=Math.ceil(t*s-1e-6);l=Ji(l),u=Ji(u);const h=(l<<17)+(u<<1)+(o?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let d=this._texturePool[h].pop();return d||(d=this.createTexture(l,u,o)),d.source._resolution=s,d.source.width=l/s,d.source.height=u/s,d.source.pixelWidth=l,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=e,d.frame.height=t,d.updateUvs(),this._poolKeyHash[d.uid]=h,d}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const kp=new _2;vo.register(kp);class w2{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new De,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Sp,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(kp.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new De),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new De),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new De),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function S2(i,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(i[s]=e[s])}const ic=new Ft(null),Ba=new Ft(null),sc=new Ft(null,1,1),ja=new Ft(null),e1=1,k2=2,oc=4;class Jt extends Ln{constructor(e={}){var t,s;super(),this.uid=vt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new De,this.relativeGroupTransform=new De,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Ft(this,0,0),this._scale=sc,this._pivot=Ba,this._origin=ja,this._skew=ic,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],S2(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(o=>this.addChild(o)),(s=e.parent)==null||s.addChild(this)}static mixin(e){Be("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Lt.mixin(Jt,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Be(Xe,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let o=0;o<e.length;o++)this.addChild(e[o]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let o=0;o<e.length;o++)this.removeChild(e[o]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=Sn.get(w2,this),this.groupTransform=De.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),Sn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new De),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*Bg}set angle(e){this.rotation=e*jg}get pivot(){return this._pivot===Ba&&(this._pivot=new Ft(this,0,0)),this._pivot}set pivot(e){this._pivot===Ba&&(this._pivot=new Ft(this,0,0),this._origin!==ja&&st("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===ic&&(this._skew=new Ft(this,0,0)),this._skew}set skew(e){this._skew===ic&&(this._skew=new Ft(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===sc&&(this._scale=new Ft(this,1,1)),this._scale}set scale(e){this._scale===sc&&(this._scale=new Ft(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===ja&&(this._origin=new Ft(this,0,0)),this._origin}set origin(e){this._origin===ja&&(this._origin=new Ft(this,0,0),this._pivot!==Ba&&st("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,h=s._x,d=s._y,p=o._x,m=o._y,y=-l._x,x=-l._y;t.a=this._cx*h,t.b=this._sx*h,t.c=this._cy*d,t.d=this._sy*d,t.tx=u._x-(p*t.a+m*t.c)+(y*t.a+x*t.c)-y,t.ty=u._y-(p*t.b+m*t.d)+(y*t.b+x*t.d)-x}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=e1,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=kt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=e1,this._onUpdate())}get tint(){return Xa(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=k2,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=oc,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=oc,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=oc,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var o;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let l=0;l<t.length;++l)t[l].destroy(e);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}Lt.mixin(Jt,s2,h2,x2,m2,p2,l2,u2,g2,e2,r2,d2,o2);class Kc extends Jt{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Fn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:o}=e;return s>=t.minX&&s<=t.maxX&&o>=t.minY&&o<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var t,s;super.destroy(e),this._bounds=null;for(const o in this._gpuData)(s=(t=this._gpuData[o]).destroy)==null||s.call(t);this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:o}=t;o.blendMode.pushBlendMode(this,this.groupBlendMode,e),o[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let d=0;d<h;d++)u[d].collectRenderables(e,t,s);o.blendMode.popBlendMode(e)}}class Br extends Kc{constructor(e=$e.EMPTY){e instanceof $e&&(e={texture:e});const{texture:t=$e.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...h}=e;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Ft({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof $e?new Br(e):new Br($e.from(e,t))}set texture(e){e||(e=$e.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Gg(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Be("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:o,height:l}=t.orig;s.minX=-e._x*o,s.maxX=s.minX+o,s.minY=-e._y*l,s.maxY=s.minY+l}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const b2=new Fn;function bp(i,e,t){const s=b2;i.measurable=!0,gp(i,t,s),e.addBoundsMask(s),i.measurable=!1}function Cp(i,e,t){const s=dr.get();i.measurable=!0;const o=Wt.get().identity(),l=Ap(i,t,o);vp(i,s,l),i.measurable=!1,e.addBoundsMask(s),Wt.return(o),dr.return(s)}function Ap(i,e,t){return i?(i!==e&&(Ap(i.parent,e,t),i.updateLocalTransform(),t.append(i.localTransform)),t):(st("Mask bounds, renderable is not inside the root container"),t)}class Pp{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Br),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||bp(this.mask,e,t)}addLocalBounds(e,t){Cp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof Br}}Pp.extension=xe.MaskEffect;class Tp{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}Tp.extension=xe.MaskEffect;class Ep{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){bp(this.mask,e,t)}addLocalBounds(e,t){Cp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof Jt}}Ep.extension=xe.MaskEffect;const C2={createCanvas:(i,e)=>{const t=document.createElement("canvas");return t.width=i,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,e)=>fetch(i,e),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};let t1=C2;const et={get(){return t1},set(i){t1=i}};class Mp extends zn{constructor(e){e.resource||(e.resource=et.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const o=super.resize(e,t,s);return o&&this.resizeCanvas(),o}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Mp.extension=xe.TextureSource;class pi extends zn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}pi.extension=xe.TextureSource;var Rc=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(Rc||{});class ac{constructor(e,t=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=o}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Rp=class cn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ac(null,null,1/0),this.deltaMS=1/cn.targetFPMS,this.elapsedMS=1/cn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Rc.NORMAL){return this._addListener(new ac(e,t,s))}addOnce(e,t,s=Rc.NORMAL){return this._addListener(new ac(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const l=e-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=e-l%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*cn.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,cn.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!cn._shared){const e=cn._shared=new cn;e.autoStart=!0,e._protected=!0}return cn._shared}static get system(){if(!cn._system){const e=cn._system=new cn;e.autoStart=!0,e._protected=!0}return cn._system}};Rp.targetFPMS=.06;let Da=Rp,lc;async function Ip(){return lc??(lc=(async()=>{var u;const e=et.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(h=>{const d=document.createElement("video");d.onloadeddata=()=>h(d),d.onerror=()=>h(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),e.deleteFramebuffer(o),e.deleteTexture(s),(u=e.getExtension("WEBGL_lose_context"))==null||u.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),lc}const il=class Fp extends zn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...Fp.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=Da.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Ip(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Da.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Da.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Da.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};il.extension=xe.TextureSource;il.defaultOptions={...zn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};il.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let ao=il;const In=(i,e,t=!1)=>(Array.isArray(i)||(i=[i]),e?i.map(s=>typeof s=="string"||t?e(s):s):i);class A2{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||st(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=In(e);let o;for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];if(p.test(t)){o=p.getCacheableAssets(s,t);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(d=>{l.set(d,t)});const u=[...l.keys()],h={cacheKeys:u,keys:s};s.forEach(d=>{this._cacheMap.set(d,h)}),u.forEach(d=>{const p=o?o[d]:t;this._cache.has(d)&&this._cache.get(d)!==p&&st("[Cache] already has key:",d),this._cache.set(d,l.get(d))})}remove(e){if(!this._cacheMap.has(e)){st(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(o=>{this._cache.delete(o)}),t.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const it=new A2,Ic=[];Lt.handleByList(xe.TextureSource,Ic);function Lp(i={}){const e=i&&i.resource,t=e?i.resource:i,s=e?i:{resource:i};for(let o=0;o<Ic.length;o++){const l=Ic[o];if(l.test(t))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function P2(i={},e=!1){const t=i&&i.resource,s=t?i.resource:i,o=t?i:{resource:i};if(!e&&it.has(s))return it.get(s);const l=new $e({source:Lp(o)});return l.on("destroy",()=>{it.has(s)&&it.remove(s)}),e||it.set(s,l),l}function T2(i,e=!1){return typeof i=="string"?it.get(i):i instanceof zn?new $e({source:i}):P2(i,e)}$e.from=T2;zn.from=Lp;Lt.add(Pp,Tp,Ep,ao,pi,Mp,Xc);var jr=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(jr||{});function Rn(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Xs(i){return i.split("?")[0].split("#")[0]}function E2(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M2(i,e,t){return i.replace(new RegExp(E2(e),"g"),t)}function R2(i,e){let t="",s=0,o=-1,l=0,u=-1;for(let h=0;h<=i.length;++h){if(h<i.length)u=i.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(o===h-1||l===1))if(o!==h-1&&l===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const d=t.lastIndexOf("/");if(d!==t.length-1){d===-1?(t="",s=0):(t=t.slice(0,d),s=t.length-1-t.lastIndexOf("/")),o=h,l=0;continue}}else if(t.length===2||t.length===1){t="",s=0,o=h,l=0;continue}}}else t.length>0?t+=`/${i.slice(o+1,h)}`:t=i.slice(o+1,h),s=h-o-1;o=h,l=0}else u===46&&l!==-1?++l:l=-1}return t}const dn={toPosix(i){return M2(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){Rn(i),i=this.toPosix(i);const e=/^file:\/\/\//.exec(i);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(i);return t?t[0]:""},toAbsolute(i,e,t){if(Rn(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const s=Xs(this.toPosix(e??et.get().getBaseUrl())),o=Xs(this.toPosix(t??this.rootname(s)));return i=this.toPosix(i),i.startsWith("/")?dn.join(o,i.slice(1)):this.isAbsolute(i)?i:this.join(s,i)},normalize(i){if(Rn(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let e="";const t=i.startsWith("/");this.hasProtocol(i)&&(e=this.rootname(i),i=i.slice(e.length));const s=i.endsWith("/");return i=R2(i),i.length>0&&s&&(i+="/"),t?`/${i}`:e+i},isAbsolute(i){return Rn(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const s=i[t];if(Rn(s),s.length>0)if(e===void 0)e=s;else{const o=i[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(i){if(Rn(i),i.length===0)return".";i=this.toPosix(i);let e=i.charCodeAt(0);const t=e===47;let s=-1,o=!0;const l=this.getProtocol(i),u=i;i=i.slice(l.length);for(let h=i.length-1;h>=1;--h)if(e=i.charCodeAt(h),e===47){if(!o){s=h;break}}else o=!1;return s===-1?t?"/":this.isUrl(u)?l+i:l:t&&s===1?"//":l+i.slice(0,s)},rootname(i){Rn(i),i=this.toPosix(i);let e="";if(i.startsWith("/")?e="/":e=this.getProtocol(i),this.isUrl(i)){const t=i.indexOf("/",e.length);t!==-1?e=i.slice(0,t):e=i,e.endsWith("/")||(e+="/")}return e},basename(i,e){Rn(i),e&&Rn(e),i=Xs(this.toPosix(i));let t=0,s=-1,o=!0,l;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";let u=e.length-1,h=-1;for(l=i.length-1;l>=0;--l){const d=i.charCodeAt(l);if(d===47){if(!o){t=l+1;break}}else h===-1&&(o=!1,h=l+1),u>=0&&(d===e.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=h))}return t===s?s=h:s===-1&&(s=i.length),i.slice(t,s)}for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!o){t=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":i.slice(t,s)},extname(i){Rn(i),i=Xs(this.toPosix(i));let e=-1,t=0,s=-1,o=!0,l=0;for(let u=i.length-1;u>=0;--u){const h=i.charCodeAt(u);if(h===47){if(!o){t=u+1;break}continue}s===-1&&(o=!1,s=u+1),h===46?e===-1?e=u:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||s===-1||l===0||l===1&&e===s-1&&e===t+1?"":i.slice(e,s)},parse(i){Rn(i);const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;i=Xs(this.toPosix(i));let t=i.charCodeAt(0);const s=this.isAbsolute(i);let o;e.root=this.rootname(i),s||this.hasProtocol(i)?o=1:o=0;let l=-1,u=0,h=-1,d=!0,p=i.length-1,m=0;for(;p>=o;--p){if(t=i.charCodeAt(p),t===47){if(!d){u=p+1;break}continue}h===-1&&(d=!1,h=p+1),t===46?l===-1?l=p:m!==1&&(m=1):l!==-1&&(m=-1)}return l===-1||h===-1||m===0||m===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&s?e.base=e.name=i.slice(1,h):e.base=e.name=i.slice(u,h)):(u===0&&s?(e.name=i.slice(1,l),e.base=i.slice(1,h)):(e.name=i.slice(u,l),e.base=i.slice(u,h)),e.ext=i.slice(l,h)),e.dir=this.dirname(i),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function zp(i,e,t,s,o){const l=e[t];for(let u=0;u<l.length;u++){const h=l[u];t<e.length-1?zp(i.replace(s[t],h),e,t+1,s,o):o.push(i.replace(s[t],h))}}function I2(i){const e=/\{(.*?)\}/g,t=i.match(e),s=[];if(t){const o=[];t.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),zp(i,o,0,t,s)}else s.push(i);return s}const Ja=i=>!Array.isArray(i);class is{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return In(t||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>(u==null?void 0:u.src)??u):l!=null&&l.src?l.src:l,!0)}addManifest(e){this._manifest&&st("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let o=t;Array.isArray(t)||(o=Object.entries(t).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,h=l.alias;let d;if(typeof h=="string"){const p=this._createBundleAssetId(e,h);s.push(p),d=[h,p]}else{const p=h.map(m=>this._createBundleAssetId(e,m));s.push(...p),d=[...h,...p]}this.add({...l,alias:d,src:u})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=l=>{this.hasKey(l)&&st(`[Resolver] already has key: ${l} overwriting`)},In(t).forEach(l=>{const{src:u}=l;let{data:h,format:d,loadParser:p,parser:m}=l;const y=In(u).map(b=>typeof b=="string"?I2(b):Array.isArray(b)?b:[b]),x=this.getAlias(l);Array.isArray(x)?x.forEach(s):s(x);const _=[],k=b=>{const w=this._parsers.find(A=>A.test(b));return{...w==null?void 0:w.parse(b),src:b}};y.forEach(b=>{b.forEach(w=>{let A={};if(typeof w!="object"?A=k(w):(h=w.data??h,d=w.format??d,(w.loadParser||w.parser)&&(p=w.loadParser??p,m=w.parser??m),A={...k(w.src),...w}),!x)throw new Error(`[Resolver] alias is undefined for this asset: ${A.src}`);A=this._buildResolvedAsset(A,{aliases:x,data:h,format:d,loadParser:p,parser:m,progressSize:l.progressSize}),_.push(A)})}),x.forEach(b=>{this._assetMap[b]=_})})}resolveBundle(e){const t=Ja(e);e=In(e);const s={};return e.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),h={};for(const d in u){const p=u[d];h[this._extractAssetIdFromBundle(o,d)]=p}s[o]=h}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const o in t)s[o]=t[o].src;return s}return t.src}resolve(e){const t=Ja(e);e=In(e);const s={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u==null||u.priority.forEach(h=>{u.params[h].forEach(d=>{const p=l.filter(m=>m[h]?m[h]===d:!1);p.length&&(l=p)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:o,loadParser:l,parser:u,format:h,progressSize:d}=t;return(this._basePath||this._rootPath)&&(e.src=dn.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=l??e.loadParser,e.parser=u??e.parser,e.format=h??e.format??F2(e.src),d!==void 0&&(e.progressSize=d),e}}is.RETINA_PREFIX=/@([0-9\.]+)x/;function F2(i){return i.split(".").pop().split("?").shift().split("#").shift()}const Fc=(i,e)=>{const t=e.split("?")[1];return t&&(i+=`?${t}`),i},Bp=class ro{constructor(e,t){this.linkedSheets=[];let s=e;(e==null?void 0:e.source)instanceof zn&&(s={texture:e,data:t});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof $e?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const h=parseFloat(l.meta.scale);h?(this.resolution=h,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=ro.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=ro.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const o=this._frameKeys[t],l=this._frames[o],u=l.frame;if(u){let h=null,d=null;const p=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,m=new lt(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);l.rotated?h=new lt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new lt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(d=new lt(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new $e({source:this.textureSource,frame:h,orig:m,trim:d,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const o=e[t][s];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ro.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ro.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Bp.BATCH_SIZE=1e3;let n1=Bp;const L2=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function jp(i,e,t){const s={};if(i.forEach(o=>{s[o]=e}),Object.keys(e.textures).forEach(o=>{s[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=dn.dirname(i[0]);e.linkedSheets.forEach((l,u)=>{const h=jp([`${o}/${e.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,h)})}return s}const z2={extension:xe.Asset,cache:{test:i=>i instanceof n1,getCacheableAssets:(i,e)=>jp(i,e,!1)},resolver:{extension:{type:xe.ResolveParser,name:"resolveSpritesheet"},test:i=>{const t=i.split("?")[0].split("."),s=t.pop(),o=t.pop();return s==="json"&&L2.includes(o)},parse:i=>{var t;const e=i.split(".");return{resolution:parseFloat(((t=is.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:e[e.length-2],src:i}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:xe.LoadParser,priority:jr.Normal,name:"spritesheetLoader"},async testParse(i,e){return dn.extname(e.src).toLowerCase()===".json"&&!!i.frames},async parse(i,e,t){var y,x;const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=(e==null?void 0:e.data)??{};let h=dn.dirname(e.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let d;if(s instanceof $e)d=s;else{const _=Fc(h+(o??i.meta.image),e.src);d=(await t.load([{src:_,data:l}]))[_]}const p=new n1({texture:d.source,data:i,cachePrefix:u});await p.parse();const m=(y=i==null?void 0:i.meta)==null?void 0:y.related_multi_packs;if(Array.isArray(m)){const _=[];for(const b of m){if(typeof b!="string")continue;let w=h+b;(x=e.data)!=null&&x.ignoreMultiPack||(w=Fc(w,e.src),_.push(t.load({src:w,data:{textureOptions:l,ignoreMultiPack:!0}})))}const k=await Promise.all(_);p.linkedSheets=k,k.forEach(b=>{b.linkedSheets=[p].concat(p.linkedSheets.filter(w=>w!==b))})}return p},async unload(i,e,t){await t.unload(i.textureSource._sourceOrigin),i.destroy(!1)}}};Lt.add(z2);const uc=Object.create(null),r1=Object.create(null);function Qc(i,e){let t=r1[i];return t===void 0&&(uc[e]===void 0&&(uc[e]=1),r1[i]=t=uc[e]++),t}let Hi;function Dp(){return(!Hi||Hi!=null&&Hi.isContextLost())&&(Hi=et.get().createCanvas().getContext("webgl",{})),Hi}let Oa;function B2(){if(!Oa){Oa="mediump";const i=Dp();i&&i.getShaderPrecisionFormat&&(Oa=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?"highp":"mediump")}return Oa}function j2(i,e,t){return e?i:t?(i=i.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${i}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${i}
        `}function D2(i,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(i.substring(0,9)!=="precision"){let o=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${i}`}else if(s!=="highp"&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}function O2(i,e){return e?`#version 300 es
${i}`:i}const $2={},N2={};function U2(i,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?$2:N2;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,i.indexOf("#define SHADER_NAME")!==-1?i:`${`#define SHADER_NAME ${e}`}
${i}`}function W2(i,e){return e?i.replace("#version 300 es",""):i}const cc={stripVersion:W2,ensurePrecision:D2,addProgramDefines:j2,setProgramName:U2,insertVersion:O2},qs=Object.create(null),Op=class Lc{constructor(e){e={...Lc.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:B2()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let o=e.fragment,l=e.vertex;Object.keys(cc).forEach(u=>{const h=s[u];o=cc[u](o,h,!0),l=cc[u](l,h,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Qc(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,qs[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return qs[t]||(qs[t]=new Lc(e),qs[t]._cacheKey=t),qs[t]}};Op.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let $p=Op;const i1={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function G2(i){return i1[i]??i1.float32}const H2={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function V2({source:i,entryPoint:e}){const t={},s=i.indexOf(`fn ${e}`);if(s!==-1){const o=i.indexOf("->",s);if(o!==-1){const l=i.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const d=H2[h[3]]??"float32";t[h[2]]={location:parseInt(h[1],10),format:d,stride:G2(d).stride,offset:0,instance:!1,start:0}}}}return t}function hc(i){var y,x;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,p=(y=i.match(e))==null?void 0:y.map(_=>({group:parseInt(_.match(t)[1],10),binding:parseInt(_.match(s)[1],10),name:_.match(o)[2],isUniform:_.match(o)[1]==="<uniform>",type:_.match(l)[1]}));if(!p)return{groups:[],structs:[]};const m=((x=i.match(u))==null?void 0:x.map(_=>{const k=_.match(d)[1],b=_.match(h).reduce((w,A)=>{const[P,E]=A.split(":");return w[P.trim()]=E.trim(),w},{});return b?{name:k,members:b}:null}).filter(({name:_})=>p.some(k=>k.type===_)))??[];return{groups:p,structs:m}}var io=(i=>(i[i.VERTEX=1]="VERTEX",i[i.FRAGMENT=2]="FRAGMENT",i[i.COMPUTE=4]="COMPUTE",i))(io||{});function Y2({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:io.VERTEX|io.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:io.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:io.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function X2({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function q2(i,e){const t=new Set,s=new Set,o=[...i.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),l=[...i.groups,...e.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:o,groups:l}}const Ks=Object.create(null);class sl{constructor(e){var h,d;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:o,gpuLayout:l,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=s,t.source===s.source){const p=hc(t.source);this.structsAndGroups=p}else{const p=hc(s.source),m=hc(t.source);this.structsAndGroups=q2(p,m)}this.layout=o??X2(this.structsAndGroups),this.gpuLayout=l??Y2(this.structsAndGroups),this.autoAssignGlobalUniforms=((h=this.layout[0])==null?void 0:h.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((d=this.layout[1])==null?void 0:d.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Qc(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=V2(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Ks[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Ks[t]||(Ks[t]=new sl(e),Ks[t]._cacheKey=t),Ks[t]}}const Np=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],K2=Np.reduce((i,e)=>(i[e]=!0,i),{});function Q2(i,e){switch(i){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Up=class Wp{constructor(e,t){this._touched=0,this.uid=vt("uniform"),this._resourceType="uniformGroup",this._resourceId=vt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...Wp.defaultOptions,...t},this.uniformStructures=e;const s={};for(const o in e){const l=e[o];if(l.name=o,l.size=l.size??1,!K2[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,d]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${h}', size: ${d} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${Np.join(", ")}`)}l.value??(l.value=Q2(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Qc(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};Up.defaultOptions={ubo:!1,isStatic:!1};let Gp=Up;class qa{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const o=e[s];this.setResource(o,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){var o,l;const s=this.resources[t];e!==s&&(s&&((o=e.off)==null||o.call(e,"change",this.onResourceChange,this)),(l=e.on)==null||l.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){var t;const e=this.resources;for(const s in e){const o=e[s];(t=o==null?void 0:o.off)==null||t.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var zc=(i=>(i[i.WEBGL=1]="WEBGL",i[i.WEBGPU=2]="WEBGPU",i[i.BOTH=3]="BOTH",i))(zc||{});class Zc extends Ln{constructor(e){super(),this.uid=vt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:h}=e;this.gpuProgram=t,this.glProgram=s,u===void 0&&(u=0,t&&(u|=zc.WEBGPU),s&&(u|=zc.WEBGL)),this.compatibleRenderers=u;const d={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&o&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&o&&h)for(const p in h)for(const m in h[p]){const y=h[p][m];d[y]={group:p,binding:m,name:y}}else if(t&&o&&!h){const p=t.structsAndGroups.groups;h={},p.forEach(m=>{h[m.group]=h[m.group]||{},h[m.group][m.binding]=m.name,d[m.name]=m})}else if(l){o={},h={},t&&t.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,d[y.name]=y});let p=0;for(const m in l)d[m]||(o[99]||(o[99]=new qa,this._ownedBindGroups.push(o[99])),d[m]={group:99,binding:p,name:m},h[99]=h[99]||{},h[99][p]=m,p++);for(const m in l){const y=m;let x=l[m];!x.source&&!x._resourceType&&(x=new Gp(x));const _=d[y];_&&(o[_.group]||(o[_.group]=new qa,this._ownedBindGroups.push(o[_.group])),o[_.group].setResource(x,_.binding))}}this.groups=o,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(o,d)}addResource(e,t,s){var o,l;(o=this._uniformBindMap)[t]||(o[t]={}),(l=this._uniformBindMap[t])[s]||(l[s]=e),this.groups[t]||(this.groups[t]=new qa,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const o in t){const l=t[o];Object.defineProperty(s,l.name,{get(){return e[l.group].getResource(l.binding)},set(u){e[l.group].setResource(u,l.binding)}})}return s}destroy(e=!1){var t,s;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...o}=e;let l,u;return t&&(l=sl.from(t)),s&&(u=$p.from(s)),new Zc({gpuProgram:l,glProgram:u,...o})}}const Bc=[];Lt.handleByNamedList(xe.Environment,Bc);async function Z2(i){if(!i)for(let e=0;e<Bc.length;e++){const t=Bc[e];if(t.value.test()){await t.value.load();return}}}let Qs;function J2(){if(typeof Qs=="boolean")return Qs;try{Qs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Qs=!1}return Qs}function s1(i,e,t=2){const s=e&&e.length,o=s?e[0]*t:i.length;let l=Hp(i,0,o,t,!0);const u=[];if(!l||l.next===l.prev)return u;let h,d,p;if(s&&(l=iy(i,e,l,t)),i.length>80*t){h=i[0],d=i[1];let m=h,y=d;for(let x=t;x<o;x+=t){const _=i[x],k=i[x+1];_<h&&(h=_),k<d&&(d=k),_>m&&(m=_),k>y&&(y=k)}p=Math.max(m-h,y-d),p=p!==0?32767/p:0}return ho(l,u,t,h,d,p,0),u}function Hp(i,e,t,s,o){let l;if(o===my(i,e,t,s)>0)for(let u=e;u<t;u+=s)l=o1(u/s|0,i[u],i[u+1],l);else for(let u=t-s;u>=e;u-=s)l=o1(u/s|0,i[u],i[u+1],l);return l&&ns(l,l.next)&&(po(l),l=l.next),l}function mi(i,e){if(!i)return i;e||(e=i);let t=i,s;do if(s=!1,!t.steiner&&(ns(t,t.next)||gt(t.prev,t,t.next)===0)){if(po(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function ho(i,e,t,s,o,l,u){if(!i)return;!u&&l&&uy(i,s,o,l);let h=i;for(;i.prev!==i.next;){const d=i.prev,p=i.next;if(l?ty(i,s,o,l):ey(i)){e.push(d.i,i.i,p.i),po(i),i=p.next,h=p.next;continue}if(i=p,i===h){u?u===1?(i=ny(mi(i),e),ho(i,e,t,s,o,l,2)):u===2&&ry(i,e,t,s,o,l):ho(mi(i),e,t,s,o,l,1);break}}}function ey(i){const e=i.prev,t=i,s=i.next;if(gt(e,t,s)>=0)return!1;const o=e.x,l=t.x,u=s.x,h=e.y,d=t.y,p=s.y,m=Math.min(o,l,u),y=Math.min(h,d,p),x=Math.max(o,l,u),_=Math.max(h,d,p);let k=s.next;for(;k!==e;){if(k.x>=m&&k.x<=x&&k.y>=y&&k.y<=_&&so(o,h,l,d,u,p,k.x,k.y)&&gt(k.prev,k,k.next)>=0)return!1;k=k.next}return!0}function ty(i,e,t,s){const o=i.prev,l=i,u=i.next;if(gt(o,l,u)>=0)return!1;const h=o.x,d=l.x,p=u.x,m=o.y,y=l.y,x=u.y,_=Math.min(h,d,p),k=Math.min(m,y,x),b=Math.max(h,d,p),w=Math.max(m,y,x),A=jc(_,k,e,t,s),P=jc(b,w,e,t,s);let E=i.prevZ,M=i.nextZ;for(;E&&E.z>=A&&M&&M.z<=P;){if(E.x>=_&&E.x<=b&&E.y>=k&&E.y<=w&&E!==o&&E!==u&&so(h,m,d,y,p,x,E.x,E.y)&&gt(E.prev,E,E.next)>=0||(E=E.prevZ,M.x>=_&&M.x<=b&&M.y>=k&&M.y<=w&&M!==o&&M!==u&&so(h,m,d,y,p,x,M.x,M.y)&&gt(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;E&&E.z>=A;){if(E.x>=_&&E.x<=b&&E.y>=k&&E.y<=w&&E!==o&&E!==u&&so(h,m,d,y,p,x,E.x,E.y)&&gt(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;M&&M.z<=P;){if(M.x>=_&&M.x<=b&&M.y>=k&&M.y<=w&&M!==o&&M!==u&&so(h,m,d,y,p,x,M.x,M.y)&&gt(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function ny(i,e){let t=i;do{const s=t.prev,o=t.next.next;!ns(s,o)&&Yp(s,t,t.next,o)&&fo(s,o)&&fo(o,s)&&(e.push(s.i,t.i,o.i),po(t),po(t.next),t=i=o),t=t.next}while(t!==i);return mi(t)}function ry(i,e,t,s,o,l){let u=i;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&dy(u,h)){let d=Xp(u,h);u=mi(u,u.next),d=mi(d,d.next),ho(u,e,t,s,o,l,0),ho(d,e,t,s,o,l,0);return}h=h.next}u=u.next}while(u!==i)}function iy(i,e,t,s){const o=[];for(let l=0,u=e.length;l<u;l++){const h=e[l]*s,d=l<u-1?e[l+1]*s:i.length,p=Hp(i,h,d,s,!1);p===p.next&&(p.steiner=!0),o.push(hy(p))}o.sort(sy);for(let l=0;l<o.length;l++)t=oy(o[l],t);return t}function sy(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const s=(i.next.y-i.y)/(i.next.x-i.x),o=(e.next.y-e.y)/(e.next.x-e.x);t=s-o}return t}function oy(i,e){const t=ay(i,e);if(!t)return e;const s=Xp(t,i);return mi(s,s.next),mi(t,t.next)}function ay(i,e){let t=e;const s=i.x,o=i.y;let l=-1/0,u;if(ns(i,t))return t;do{if(ns(i,t.next))return t.next;if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>l&&(l=y,u=t.x<t.next.x?t:t.next,y===s))return u}t=t.next}while(t!==e);if(!u)return null;const h=u,d=u.x,p=u.y;let m=1/0;t=u;do{if(s>=t.x&&t.x>=d&&s!==t.x&&Vp(o<p?s:l,o,d,p,o<p?l:s,o,t.x,t.y)){const y=Math.abs(o-t.y)/(s-t.x);fo(t,i)&&(y<m||y===m&&(t.x>u.x||t.x===u.x&&ly(u,t)))&&(u=t,m=y)}t=t.next}while(t!==h);return u}function ly(i,e){return gt(i.prev,i,e.prev)<0&&gt(e.next,i,i.next)<0}function uy(i,e,t,s){let o=i;do o.z===0&&(o.z=jc(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,cy(o)}function cy(i){let e,t=1;do{let s=i,o;i=null;let l=null;for(e=0;s;){e++;let u=s,h=0;for(let p=0;p<t&&(h++,u=u.nextZ,!!u);p++);let d=t;for(;h>0||d>0&&u;)h!==0&&(d===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,h--):(o=u,u=u.nextZ,d--),l?l.nextZ=o:i=o,o.prevZ=l,l=o;s=u}l.nextZ=null,t*=2}while(e>1);return i}function jc(i,e,t,s,o){return i=(i-t)*o|0,e=(e-s)*o|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function hy(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Vp(i,e,t,s,o,l,u,h){return(o-u)*(e-h)>=(i-u)*(l-h)&&(i-u)*(s-h)>=(t-u)*(e-h)&&(t-u)*(l-h)>=(o-u)*(s-h)}function so(i,e,t,s,o,l,u,h){return!(i===u&&e===h)&&Vp(i,e,t,s,o,l,u,h)}function dy(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!fy(i,e)&&(fo(i,e)&&fo(e,i)&&py(i,e)&&(gt(i.prev,i,e.prev)||gt(i,e.prev,e))||ns(i,e)&&gt(i.prev,i,i.next)>0&&gt(e.prev,e,e.next)>0)}function gt(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function ns(i,e){return i.x===e.x&&i.y===e.y}function Yp(i,e,t,s){const o=Na(gt(i,e,t)),l=Na(gt(i,e,s)),u=Na(gt(t,s,i)),h=Na(gt(t,s,e));return!!(o!==l&&u!==h||o===0&&$a(i,t,e)||l===0&&$a(i,s,e)||u===0&&$a(t,i,s)||h===0&&$a(t,e,s))}function $a(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Na(i){return i>0?1:i<0?-1:0}function fy(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&Yp(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function fo(i,e){return gt(i.prev,i,i.next)<0?gt(i,e,i.next)>=0&&gt(i,i.prev,e)>=0:gt(i,e,i.prev)<0||gt(i,i.next,e)<0}function py(i,e){let t=i,s=!1;const o=(i.x+e.x)/2,l=(i.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==i);return s}function Xp(i,e){const t=Dc(i.i,i.x,i.y),s=Dc(e.i,e.x,e.y),o=i.next,l=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,s.next=t,t.prev=s,l.next=s,s.prev=l,s}function o1(i,e,t,s){const o=Dc(i,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function po(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Dc(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function my(i,e,t,s){let o=0;for(let l=e,u=t-s;l<t;l+=s)o+=(i[u]-i[l])*(i[l+1]+i[u+1]),u=l;return o}const gy=s1.default||s1;var qp=(i=>(i[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i))(qp||{});class yy{constructor(e){this.items=[],this._name=e}emit(e,t,s,o,l,u,h,d){const{name:p,items:m}=this;for(let y=0,x=m.length;y<x;y++)m[y][p](e,t,s,o,l,u,h,d);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const xy=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Kp=class Qp extends Ln{constructor(e){super(),this.uid=vt("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...xy,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await Z2(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...Qp.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof Jt&&(s={container:s},t&&(Be(Xe,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:kt.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const o=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=qp.ALL);const{clear:s,clearColor:o,target:l}=e;kt.shared.setValue(o??this.background.colorRgba),t.renderTarget.clear(l,s,kt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new yy(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(e,t){const s=t.reduce((o,l)=>(o[l.name]=l.value,o),{});e.forEach(o=>{const l=o.value,u=o.name,h=s[u];this.renderPipes[u]=new l(this,h?new h:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&vo.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!J2())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Kp.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Zp=Kp,Ua;function vy(i){return Ua!==void 0||(Ua=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:i??Zp.defaultOptions.failIfMajorPerformanceCaveat};try{if(!et.get().getWebGLRenderingContext())return!1;let o=et.get().createCanvas().getContext("webgl",e);const l=!!((t=o==null?void 0:o.getContextAttributes())!=null&&t.stencil);if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,l}catch{return!1}})()),Ua}let Wa;async function _y(i={}){return Wa!==void 0||(Wa=await(async()=>{const e=et.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(i)).requestDevice(),!0}catch{return!1}})()),Wa}const a1=["webgl","webgpu","canvas"];async function wy(i){let e=[];i.preference?(e.push(i.preference),a1.forEach(l=>{l!==i.preference&&e.push(l)})):e=a1.slice();let t,s={};for(let l=0;l<e.length;l++){const u=e[l];if(u==="webgpu"&&await _y()){const{WebGPURenderer:h}=await Za(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-jNAQbF3x.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]));t=h,s={...i,...i.webgpu};break}else if(u==="webgl"&&vy(i.failIfMajorPerformanceCaveat??Zp.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await Za(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-BwLQvY2p.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]));t=h,s={...i,...i.webgl};break}else if(u==="canvas")throw s={...i},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const o=new t;return await o.init(s),o}const Jp="8.14.3";class e0{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,Jp)}static destroy(){}}e0.extension=xe.Application;class Sy{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,Jp)}destroy(){this._renderer=null}}Sy.extension={type:[xe.WebGLSystem,xe.WebGPUSystem],name:"initHook",priority:-10};const t0=class Oc{constructor(...e){this.stage=new Jt,e[0]!==void 0&&Be(Xe,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new Jt),this.renderer=await wy(e),Oc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Be(Xe,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=Oc._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};t0._plugins=[];let n0=t0;Lt.handleByList(xe.Application,n0._plugins);Lt.add(e0);class r0 extends Ln{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Be(Xe,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Be(Xe,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Be(Xe,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Be(Xe,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Be(Xe,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(t=this.chars[s].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class ky{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let o=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(e,t,s=!1,o=this.resetTtl){let l=this.items[e];return s||l!==void 0?(l.value=t,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function i0(i=1e3,e=0,t=!1){if(isNaN(i)||i<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new ky(i,e,t)}const by=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function el(i){const e=typeof i.fontSize=="number"?`${i.fontSize}px`:i.fontSize;let t=i.fontFamily;Array.isArray(i.fontFamily)||(t=i.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let o=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!by.includes(o)&&(o=`"${o}"`),t[s]=o}return`${i.fontStyle} ${i.fontVariant} ${i.fontWeight} ${e} ${t.join(",")}`}const dc={willReadFrequently:!0},Bn=class ye{static get experimentalLetterSpacingSupported(){let e=ye._experimentalLetterSpacingSupported;if(e===void 0){const t=et.get().getCanvasRenderingContext2D().prototype;e=ye._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,o,l,u,h,d,p){this.text=e,this.style=t,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=d,this.fontProperties=p}static measureText(e=" ",t,s=ye._canvas,o=t.wordWrap){var P;const l=`${e}-${t.styleKey}-wordWrap-${o}`;if(ye._measurementCache.has(l))return ye._measurementCache.get(l);const u=el(t),h=ye.measureFont(u);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);const d=ye.__context;d.font=u;const m=(o?ye._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),y=new Array(m.length);let x=0;for(let E=0;E<m.length;E++){const M=ye._measureText(m[E],t.letterSpacing,d);y[E]=M,x=Math.max(x,M)}const _=((P=t._stroke)==null?void 0:P.width)||0;let k=x+_;t.dropShadow&&(k+=t.dropShadow.distance);const b=t.lineHeight||h.fontSize;let w=Math.max(b,h.fontSize+_)+(m.length-1)*(b+t.leading);t.dropShadow&&(w+=t.dropShadow.distance);const A=new ye(e,t,k,w,m,y,b+t.leading,x,h);return ye._measurementCache.set(l,A),A}static _measureText(e,t,s){let o=!1;ye.experimentalLetterSpacingSupported&&(ye.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(e);let u=l.width;const h=-l.actualBoundingBoxLeft;let p=l.actualBoundingBoxRight-h;if(u>0)if(o)u-=t,p-=t;else{const m=(ye.graphemeSegmenter(e).length-1)*t;u+=m,p+=m}return Math.max(u,p)}static _wordWrap(e,t,s=ye._canvas){const o=s.getContext("2d",dc);let l=0,u="",h="";const d=Object.create(null),{letterSpacing:p,whiteSpace:m}=t,y=ye._collapseSpaces(m),x=ye._collapseNewlines(m);let _=!y;const k=t.wordWrapWidth+p,b=ye._tokenize(e);for(let w=0;w<b.length;w++){let A=b[w];if(ye._isNewline(A)){if(!x){h+=ye._addLine(u),_=!y,u="",l=0;continue}A=" "}if(y){const E=ye.isBreakingSpace(A),M=ye.isBreakingSpace(u[u.length-1]);if(E&&M)continue}const P=ye._getFromCache(A,p,d,o);if(P>k)if(u!==""&&(h+=ye._addLine(u),u="",l=0),ye.canBreakWords(A,t.breakWords)){const E=ye.wordWrapSplit(A);for(let M=0;M<E.length;M++){let Y=E[M],N=Y,$=1;for(;E[M+$];){const ae=E[M+$];if(!ye.canBreakChars(N,ae,A,M,t.breakWords))Y+=ae;else break;N=ae,$++}M+=$-1;const ie=ye._getFromCache(Y,p,d,o);ie+l>k&&(h+=ye._addLine(u),_=!1,u="",l=0),u+=Y,l+=ie}}else{u.length>0&&(h+=ye._addLine(u),u="",l=0);const E=w===b.length-1;h+=ye._addLine(A,!E),_=!1,u="",l=0}else P+l>k&&(_=!1,h+=ye._addLine(u),u="",l=0),(u.length>0||!ye.isBreakingSpace(A)||_)&&(u+=A,l+=P)}return h+=ye._addLine(u,!1),h}static _addLine(e,t=!0){return e=ye._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,o){let l=s[e];return typeof l!="number"&&(l=ye._measureText(e,t,o)+t,s[e]=l),l}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!ye.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ye._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ye._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1];if(ye.isBreakingSpace(l,u)||ye._isNewline(l)){s!==""&&(t.push(s),s=""),l==="\r"&&u===`
`?(t.push(`\r
`),o++):t.push(l);continue}s+=l}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,o,l){return!0}static wordWrapSplit(e){return ye.graphemeSegmenter(e)}static measureFont(e){if(ye._fonts[e])return ye._fonts[e];const t=ye._context;t.font=e;const s=t.measureText(ye.METRICS_STRING+ye.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return ye._fonts[e]=o,o}static clearMetrics(e=""){e?delete ye._fonts[e]:ye._fonts={}}static get _canvas(){if(!ye.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",dc);if(s!=null&&s.measureText)return ye.__canvas=t,t;e=et.get().createCanvas()}catch{e=et.get().createCanvas()}e.width=e.height=10,ye.__canvas=e}return ye.__canvas}static get _context(){return ye.__context||(ye.__context=ye._canvas.getContext("2d",dc)),ye.__context}};Bn.METRICS_STRING="|q";Bn.BASELINE_SYMBOL="M";Bn.BASELINE_MULTIPLIER=1.4;Bn.HEIGHT_MULTIPLIER=2;Bn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return e=>{const t=i.segment(e),s=[];let o=0;for(const l of t)s[o++]=l.segment;return s}}return i=>[...i]})();Bn.experimentalLetterSpacing=!1;Bn._fonts={};Bn._newlines=[10,13];Bn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Bn._measurementCache=i0(1e3);let Kn=Bn;const l1=[{offset:0,color:"white"},{offset:1,color:"black"}],Jc=class $c{constructor(...e){this.uid=vt("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=Cy(e);t={...t.type==="radial"?$c.defaultRadialOptions:$c.defaultLinearOptions,...lp(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:kt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:o}=this.end,l=s-e,u=o-t;const h=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const w=e;e=s,s=w,l*=-1}if(u<0){const w=t;t=o,o=w,u*=-1}}const d=this.colorStops.length?this.colorStops:l1,p=this._textureSize,{canvas:m,context:y}=c1(p,1),x=h?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);u1(x,d),y.fillStyle=x,y.fillRect(0,0,p,1),this.texture=new $e({source:new pi({resource:m,addressMode:this._wrapMode})});const _=Math.sqrt(l*l+u*u),k=Math.atan2(u,l),b=new De;b.scale(_/p,1),b.rotate(k),b.translate(e,t),this.textureSpace==="local"&&b.scale(p,p),this.transform=b}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:l1,t=this._textureSize,{canvas:s,context:o}=c1(t,t),{x:l,y:u}=this.center,{x:h,y:d}=this.outerCenter,p=this.innerRadius,m=this.outerRadius,y=h-m,x=d-m,_=t/(m*2),k=(l-y)*_,b=(u-x)*_,w=o.createRadialGradient(k,b,p*_,(h-y)*_,(d-x)*_,m*_);u1(w,e),o.fillStyle=e[e.length-1].color,o.fillRect(0,0,t,t),o.fillStyle=w,o.translate(k,b),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-k,-b),o.fillRect(0,0,t,t),this.texture=new $e({source:new pi({resource:s,addressMode:this._wrapMode})});const A=new De;A.scale(1/_,1/_),A.translate(y,x),this.textureSpace==="local"&&A.scale(t,t),this.transform=A}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Jc.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Jc.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let pr=Jc;function u1(i,e){for(let t=0;t<e.length;t++){const s=e[t];i.addColorStop(s.offset,s.color)}}function c1(i,e){const t=et.get().createCanvas(i,e),s=t.getContext("2d");return{canvas:t,context:s}}function Cy(i){let e=i[0]??{};return(typeof e=="number"||i[1])&&(Be("8.5.2","use options object instead"),e={type:"linear",start:{x:i[0],y:i[1]},end:{x:i[2],y:i[3]},textureSpace:i[4],textureSize:i[5]??pr.defaultLinearOptions.textureSize}),e}const h1={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class ol{constructor(e,t){this.uid=vt("fillPattern"),this._tick=0,this.transform=new De,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=h1[t].addressModeU,e.source.style.addressModeV=h1[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var fc,d1;function Ay(){if(d1)return fc;d1=1,fc=t;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(l){var u=[];return l.replace(e,function(h,d,p){var m=d.toLowerCase();for(p=o(p),m=="m"&&p.length>2&&(u.push([d].concat(p.splice(0,2))),m="l",d=d=="m"?"l":"L");;){if(p.length==i[m])return p.unshift(d),u.push(p);if(p.length<i[m])throw new Error("malformed path data");u.push([d].concat(p.splice(0,i[m])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return fc}var Py=Ay();const Ty=Vc(Py);function Ey(i,e){const t=Ty(i),s=[];let o=null,l=0,u=0;for(let h=0;h<t.length;h++){const d=t[h],p=d[0],m=d;switch(p){case"M":l=m[1],u=m[2],e.moveTo(l,u);break;case"m":l+=m[1],u+=m[2],e.moveTo(l,u);break;case"H":l=m[1],e.lineTo(l,u);break;case"h":l+=m[1],e.lineTo(l,u);break;case"V":u=m[1],e.lineTo(l,u);break;case"v":u+=m[1],e.lineTo(l,u);break;case"L":l=m[1],u=m[2],e.lineTo(l,u);break;case"l":l+=m[1],u+=m[2],e.lineTo(l,u);break;case"C":l=m[5],u=m[6],e.bezierCurveTo(m[1],m[2],m[3],m[4],l,u);break;case"c":e.bezierCurveTo(l+m[1],u+m[2],l+m[3],u+m[4],l+m[5],u+m[6]),l+=m[5],u+=m[6];break;case"S":l=m[3],u=m[4],e.bezierCurveToShort(m[1],m[2],l,u);break;case"s":e.bezierCurveToShort(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"Q":l=m[3],u=m[4],e.quadraticCurveTo(m[1],m[2],l,u);break;case"q":e.quadraticCurveTo(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"T":l=m[1],u=m[2],e.quadraticCurveToShort(l,u);break;case"t":l+=m[1],u+=m[2],e.quadraticCurveToShort(l,u);break;case"A":l=m[6],u=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"a":l+=m[6],u+=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:st(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return e}class eh{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new eh(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-e,l=this.y-t;return o*=o,l*=l,o+l<=s}strokeContains(e,t,s,o=.5){if(this.radius===0)return!1;const l=this.x-e,u=this.y-t,h=this.radius,d=(1-o)*s,p=Math.sqrt(l*l+u*u);return p<=h+d&&p>h-(s-d)}getBounds(e){return e||(e=new lt),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class th{constructor(e=0,t=0,s=0,o=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=o}clone(){return new th(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,o=(t-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(e,t,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=s*(1-o),d=s-h,p=l-d,m=u-d,y=l+h,x=u+h,_=e-this.x,k=t-this.y,b=_*_/(p*p)+k*k/(m*m),w=_*_/(y*y)+k*k/(x*x);return b>1&&w<=1}getBounds(e){return e||(e=new lt),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function My(i,e,t,s,o,l){const u=i-t,h=e-s,d=o-t,p=l-s,m=u*d+h*p,y=d*d+p*p;let x=-1;y!==0&&(x=m/y);let _,k;x<0?(_=t,k=s):x>1?(_=o,k=l):(_=t+x*d,k=s+x*p);const b=i-_,w=e-k;return b*b+w*w}let Ry,Iy;class lo{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let o=0,l=t.length;o<l;o++)s.push(t[o].x,t[o].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let o=0;o<s;o+=2){const l=t[o],u=t[o+1],h=t[(o+2)%s],d=t[(o+3)%s];e+=(h-l)*(d+u)}return e<0}containsPolygon(e){const t=this.getBounds(Ry),s=e.getBounds(Iy);if(!t.containsRect(s))return!1;const o=e.points;for(let l=0;l<o.length;l+=2){const u=o[l],h=o[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const e=this.points.slice(),t=new lo(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const h=this.points[l*2],d=this.points[l*2+1],p=this.points[u*2],m=this.points[u*2+1];d>t!=m>t&&e<(p-h)*((t-d)/(m-d))+h&&(s=!s)}return s}strokeContains(e,t,s,o=.5){const l=s*s,u=l*(1-o),h=l-u,{points:d}=this,p=d.length-(this.closePath?0:2);for(let m=0;m<p;m+=2){const y=d[m],x=d[m+1],_=d[(m+2)%d.length],k=d[(m+3)%d.length],b=My(e,t,y,x,_,k),w=Math.sign((_-y)*(t-x)-(k-x)*(e-y));if(b<=(w<0?h:u))return!0}return!1}getBounds(e){e||(e=new lt);const t=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let h=0,d=t.length;h<d;h+=2){const p=t[h],m=t[h+1];s=p<s?p:s,o=p>o?p:o,l=m<l?m:l,u=m>u?m:u}return e.x=s,e.width=o-s,e.y=l,e.height=u-l,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Be("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Be("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Ga=(i,e,t,s,o,l,u)=>{const h=i-t,d=e-s,p=Math.sqrt(h*h+d*d);return p>=o-l&&p<=o+u};class nh{constructor(e=0,t=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=o,this.radius=l}getBounds(e){return e||(e=new lt),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new nh(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let o=e-(this.x+s),l=t-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=e-(this.x+this.width-s),o*o+l*l<=u)||(l=t-(this.y+this.height-s),o*o+l*l<=u)||(o=e-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(e,t,s,o=.5){const{x:l,y:u,width:h,height:d,radius:p}=this,m=s*(1-o),y=s-m,x=l+p,_=u+p,k=h-p*2,b=d-p*2,w=l+h,A=u+d;return(e>=l-m&&e<=l+y||e>=w-y&&e<=w+m)&&t>=_&&t<=_+b||(t>=u-m&&t<=u+y||t>=A-y&&t<=A+m)&&e>=x&&e<=x+k?!0:e<x&&t<_&&Ga(e,t,x,_,p,y,m)||e>w-p&&t<_&&Ga(e,t,w-p,_,p,y,m)||e>w-p&&t>A-p&&Ga(e,t,w-p,A-p,p,y,m)||e<x&&t>A-p&&Ga(e,t,x,A-p,p,y,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const s0={};function Fy(i,e,t){let s=2166136261;for(let o=0;o<e;o++)s^=i[o].uid,s=Math.imul(s,16777619),s>>>=0;return s0[s]||Ly(i,e,s,t)}function Ly(i,e,t,s){const o={};let l=0;for(let h=0;h<s;h++){const d=h<e?i[h]:$e.EMPTY.source;o[l++]=d.source,o[l++]=d.style}const u=new qa(o);return s0[t]=u,u}class f1{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function p1(i,e){const t=i.byteLength/8|0,s=new Float64Array(i,0,t);new Float64Array(e,0,t).set(s);const l=i.byteLength-t*8;if(l>0){const u=new Uint8Array(i,t*8,l);new Uint8Array(e,t*8,l).set(u)}}const zy={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var By=(i=>(i[i.DISABLED=0]="DISABLED",i[i.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",i[i.MASK_ACTIVE=2]="MASK_ACTIVE",i[i.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",i[i.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",i[i.NONE=5]="NONE",i))(By||{});function m1(i,e){return e.alphaMode==="no-premultiply-alpha"&&zy[i]||i}const jy=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Dy(i){let e="";for(let t=0;t<i;++t)t>0&&(e+=`
else `),t<i-1&&(e+=`if(test == ${t}.0){}`);return e}function Oy(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=jy.replace(/%forloop%/gi,Dy(i));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))i=i/2|0;else break}}finally{e.deleteShader(t)}return i}let Vi=null;function $y(){var e;if(Vi)return Vi;const i=Dp();return Vi=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),Vi=Oy(Vi,i),(e=i.getExtension("WEBGL_lose_context"))==null||e.loseContext(),Vi}class Ny{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class Uy{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new Ny,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const uo=[];let tl=0;vo.register({clear:()=>{if(uo.length>0)for(const i of uo)i&&i.destroy();uo.length=0,tl=0}});function g1(){return tl>0?uo[--tl]:new Uy}function y1(i){uo[tl++]=i}let Zs=0;const o0=class a0{constructor(e){this.uid=vt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...a0.defaultOptions,...e},e.maxTextures||(Be("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=$y());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new f1(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)y1(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=g1(),o=s.textures;o.clear();const l=t[this.elementStart];let u=m1(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,m=this.indexBuffer;let y=this._batchIndexSize,x=this._batchIndexStart,_="startBatch";const k=this.maxTextures;for(let b=this.elementStart;b<this.elementSize;++b){const w=t[b];t[b]=null;const P=w.texture._source,E=m1(w.blendMode,P),M=u!==E||h!==w.topology;if(P._batchTick===Zs&&!M){w._textureId=P._textureBindLocation,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,p,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,p,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}P._batchTick=Zs,(o.count>=k||M)&&(this._finishBatch(s,x,y-x,o,u,h,e,_),_="renderBatch",x=y,u=E,h=w.topology,s=g1(),o=s.textures,o.clear(),++Zs),w._textureId=P._textureBindLocation=o.count,o.ids[P.uid]=o.count,o.textures[o.count++]=P,w._batch=s,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,p,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,p,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,x,y-x,o,u,h,e,_),x=y,++Zs),this.elementStart=this.elementSize,this._batchIndexStart=x,this._batchIndexSize=y}_finishBatch(e,t,s,o,l,u,h,d){e.gpuBindGroup=null,e.bindGroup=null,e.action=d,e.batcher=this,e.textures=o,e.blendMode=l,e.topology=u,e.start=t,e.size=s,++Zs,this.batches[this.batchIndex++]=e,h.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new f1(t);p1(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let l=0;l<t.length;l++)o[l]=t[l];else p1(t.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,o){const l=e.indices,u=e.indexSize,h=e.indexOffset,d=e.attributeOffset;for(let p=0;p<u;p++)t[s++]=o+l[p+h]-d}destroy(e={}){var t;if(this.batches!==null){for(let s=0;s<this.batches.length;s++)y1(this.batches[s]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((t=this.shader)==null||t.destroy(),this.shader=null);for(let s=0;s<this._elements.length;s++)this._elements[s]&&(this._elements[s]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};o0.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Wy=o0;var en=(i=>(i[i.MAP_READ=1]="MAP_READ",i[i.MAP_WRITE=2]="MAP_WRITE",i[i.COPY_SRC=4]="COPY_SRC",i[i.COPY_DST=8]="COPY_DST",i[i.INDEX=16]="INDEX",i[i.VERTEX=32]="VERTEX",i[i.UNIFORM=64]="UNIFORM",i[i.STORAGE=128]="STORAGE",i[i.INDIRECT=256]="INDIRECT",i[i.QUERY_RESOLVE=512]="QUERY_RESOLVE",i[i.STATIC=1024]="STATIC",i))(en||{});class mo extends Ln{constructor(e){let{data:t,size:s}=e;const{usage:o,label:l,shrinkToFit:u}=e;super(),this.uid=vt("buffer"),this._resourceType="buffer",this._resourceId=vt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t==null?void 0:t.byteLength);const h=!!t;this.descriptor={size:s,usage:o,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&en.STATIC)}set static(e){e?this.descriptor.usage|=en.STATIC:this.descriptor.usage&=~en.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const o=this._data;if(this._data=e,this._dataInt32=null,!o||o.length!==e.length){!this.shrinkToFit&&o&&e.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=vt("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function l0(i,e){if(!(i instanceof mo)){let t=e?en.INDEX:en.VERTEX;i instanceof Array&&(e?(i=new Uint32Array(i),t=en.INDEX|en.COPY_DST):(i=new Float32Array(i),t=en.VERTEX|en.COPY_DST)),i=new mo({data:i,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return i}function Gy(i,e,t){const s=i.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const o=s.buffer.data;let l=1/0,u=1/0,h=-1/0,d=-1/0;const p=o.BYTES_PER_ELEMENT,m=(s.offset||0)/p,y=(s.stride||8)/p;for(let x=m;x<o.length;x+=y){const _=o[x],k=o[x+1];_>h&&(h=_),k>d&&(d=k),_<l&&(l=_),k<u&&(u=k)}return t.minX=l,t.minY=u,t.maxX=h,t.maxY=d,t}function Hy(i){return(i instanceof mo||Array.isArray(i)||i.BYTES_PER_ELEMENT)&&(i={buffer:i}),i.buffer=l0(i.buffer,!1),i}class Vy extends Ln{constructor(e={}){super(),this.uid=vt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Fn,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:o}=e;if(this.buffers=[],this.attributes={},t)for(const l in t)this.addAttribute(l,t[l]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=Hy(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=l0(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,Gy(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(s=>s.destroy()),(t=this.indexBuffer)==null||t.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Yy=new Float32Array(1),Xy=new Uint32Array(1);class qy extends Vy{constructor(){const t=new mo({data:Yy,label:"attribute-batch-buffer",usage:en.VERTEX|en.COPY_DST,shrinkToFit:!1}),s=new mo({data:Xy,label:"index-batch-buffer",usage:en.INDEX|en.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:o,offset:0},aUV:{buffer:t,format:"float32x2",stride:o,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function x1(i,e,t){if(i)for(const s in i){const o=s.toLocaleLowerCase(),l=e[o];if(l){let u=i[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&l.push(`//----${t}----//`),l.push(u)}else st(`${s} placement hook does not exist in shader`)}}const Ky=/\{\{(.*?)\}\}/g;function v1(i){var s;const e={};return(((s=i.match(Ky))==null?void 0:s.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{e[o]=[]}),e}function _1(i,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function w1(i,e,t=!1){const s=[];_1(e,s),i.forEach(h=>{h.header&&_1(h.header,s)});const o=s;t&&o.sort();const l=o.map((h,d)=>`       @location(${d}) ${h},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function S1(i,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function Qy(i){const t=/\b(\w+)\s*:/g.exec(i);return t?t[1]:""}function Zy(i){const e=/@.*?\s+/g;return i.replace(e,"")}function Jy(i,e){const t=[];S1(e,t),i.forEach(d=>{d.header&&S1(d.header,t)});let s=0;const o=t.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),l=t.sort().map(d=>`       var ${Zy(d)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(d=>` ${Qy(d)}`).join(`,
`)});`;let h=e.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${o}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function k1(i,e){let t=i;for(const s in e){const o=e[s];o.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const zr=Object.create(null),pc=new Map;let e3=0;function t3({template:i,bits:e}){const t=u0(i,e);if(zr[t])return zr[t];const{vertex:s,fragment:o}=r3(i,e);return zr[t]=c0(s,o,e),zr[t]}function n3({template:i,bits:e}){const t=u0(i,e);return zr[t]||(zr[t]=c0(i.vertex,i.fragment,e)),zr[t]}function r3(i,e){const t=e.map(u=>u.vertex).filter(u=>!!u),s=e.map(u=>u.fragment).filter(u=>!!u);let o=w1(t,i.vertex,!0);o=Jy(t,o);const l=w1(s,i.fragment,!0);return{vertex:o,fragment:l}}function u0(i,e){return e.map(t=>(pc.has(t)||pc.set(t,e3++),pc.get(t))).sort((t,s)=>t-s).join("-")+i.vertex+i.fragment}function c0(i,e,t){const s=v1(i),o=v1(e);return t.forEach(l=>{x1(l.vertex,s,l.name),x1(l.fragment,o,l.name)}),{vertex:k1(i,s),fragment:k1(e,o)}}const i3=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,s3=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,o3=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,a3=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,l3={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},u3={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function c3({bits:i,name:e}){const t=t3({template:{fragment:s3,vertex:i3},bits:[l3,...i]});return sl.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function h3({bits:i,name:e}){return new $p({name:e,...n3({template:{vertex:o3,fragment:a3},bits:[u3,...i]})})}const d3={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},f3={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},mc={};function p3(i){const e=[];if(i===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<i;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function m3(i){const e=[];if(i===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<i;t++)t===i-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function g3(i){return mc[i]||(mc[i]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${p3(i)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${m3(i)}
            `}}),mc[i]}const gc={};function y3(i){const e=[];for(let t=0;t<i;t++)t>0&&e.push("else"),t<i-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function x3(i){return gc[i]||(gc[i]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${i}];

            `,main:`

                ${y3(i)}
            `}}),gc[i]}const v3={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},_3={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},b1={};function w3(i){let e=b1[i];if(e)return e;const t=new Int32Array(i);for(let s=0;s<i;s++)t[s]=s;return e=b1[i]=new Gp({uTextures:{value:t,type:"i32",size:i}},{isStatic:!0}),e}class C1 extends Zc{constructor(e){const t=h3({name:"batch",bits:[f3,x3(e),_3]}),s=c3({name:"batch",bits:[d3,g3(e),v3]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:w3(e)}}),this.maxTextures=e}}let Js=null;const h0=class d0 extends Wy{constructor(e){super(e),this.geometry=new qy,this.name=d0.extension.name,this.vertexSize=6,Js??(Js=new C1(e.maxTextures)),this.shader=Js}packAttributes(e,t,s,o,l){const u=l<<16|e.roundPixels&65535,h=e.transform,d=h.a,p=h.b,m=h.c,y=h.d,x=h.tx,_=h.ty,{positions:k,uvs:b}=e,w=e.color,A=e.attributeOffset,P=A+e.attributeSize;for(let E=A;E<P;E++){const M=E*2,Y=k[M],N=k[M+1];t[o++]=d*Y+m*N+x,t[o++]=y*N+p*Y+_,t[o++]=b[M],t[o++]=b[M+1],s[o++]=w,s[o++]=u}}packQuadAttributes(e,t,s,o,l){const u=e.texture,h=e.transform,d=h.a,p=h.b,m=h.c,y=h.d,x=h.tx,_=h.ty,k=e.bounds,b=k.maxX,w=k.minX,A=k.maxY,P=k.minY,E=u.uvs,M=e.color,Y=l<<16|e.roundPixels&65535;t[o+0]=d*w+m*P+x,t[o+1]=y*P+p*w+_,t[o+2]=E.x0,t[o+3]=E.y0,s[o+4]=M,s[o+5]=Y,t[o+6]=d*b+m*P+x,t[o+7]=y*P+p*b+_,t[o+8]=E.x1,t[o+9]=E.y1,s[o+10]=M,s[o+11]=Y,t[o+12]=d*b+m*A+x,t[o+13]=y*A+p*b+_,t[o+14]=E.x2,t[o+15]=E.y2,s[o+16]=M,s[o+17]=Y,t[o+18]=d*w+m*A+x,t[o+19]=y*A+p*w+_,t[o+20]=E.x3,t[o+21]=E.y3,s[o+22]=M,s[o+23]=Y}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Js=new C1(e),this.shader=Js)}destroy(){this.shader=null,super.destroy()}};h0.extension={type:[xe.Batcher],name:"default"};let S3=h0;function k3(i,e,t,s,o,l,u,h=null){let d=0;t*=e,o*=l;const p=h.a,m=h.b,y=h.c,x=h.d,_=h.tx,k=h.ty;for(;d<u;){const b=i[t],w=i[t+1];s[o]=p*b+y*w+_,s[o+1]=m*b+x*w+k,o+=l,t+=e,d++}}function b3(i,e,t,s){let o=0;for(e*=t;o<s;)i[e]=0,i[e+1]=0,e+=t,o++}function f0(i,e,t,s,o){const l=e.a,u=e.b,h=e.c,d=e.d,p=e.tx,m=e.ty;t||(t=0),s||(s=2),o||(o=i.length/s-t);let y=t*s;for(let x=0;x<o;x++){const _=i[y],k=i[y+1];i[y]=l*_+h*k+p,i[y+1]=u*_+d*k+m,y+=s}}const C3=new De;class p0{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?xp(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||C3}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const go={extension:{type:xe.ShapeBuilder,name:"circle"},build(i,e){let t,s,o,l,u,h;if(i.type==="circle"){const M=i;if(u=h=M.radius,u<=0)return!1;t=M.x,s=M.y,o=l=0}else if(i.type==="ellipse"){const M=i;if(u=M.halfWidth,h=M.halfHeight,u<=0||h<=0)return!1;t=M.x,s=M.y,o=l=0}else{const M=i,Y=M.width/2,N=M.height/2;t=M.x+Y,s=M.y+N,u=h=Math.max(0,Math.min(M.radius,Math.min(Y,N))),o=Y-u,l=N-h}if(o<0||l<0)return!1;const d=Math.ceil(2.3*Math.sqrt(u+h)),p=d*8+(o?4:0)+(l?4:0);if(p===0)return!1;if(d===0)return e[0]=e[6]=t+o,e[1]=e[3]=s+l,e[2]=e[4]=t-o,e[5]=e[7]=s-l,!0;let m=0,y=d*4+(o?2:0)+2,x=y,_=p,k=o+u,b=l,w=t+k,A=t-k,P=s+b;if(e[m++]=w,e[m++]=P,e[--y]=P,e[--y]=A,l){const M=s-b;e[x++]=A,e[x++]=M,e[--_]=M,e[--_]=w}for(let M=1;M<d;M++){const Y=Math.PI/2*(M/d),N=o+Math.cos(Y)*u,$=l+Math.sin(Y)*h,ie=t+N,ae=t-N,te=s+$,se=s-$;e[m++]=ie,e[m++]=te,e[--y]=te,e[--y]=ae,e[x++]=ae,e[x++]=se,e[--_]=se,e[--_]=ie}k=o,b=l+h,w=t+k,A=t-k,P=s+b;const E=s-b;return e[m++]=w,e[m++]=P,e[--_]=E,e[--_]=w,o&&(e[m++]=A,e[m++]=P,e[--_]=E,e[--_]=A),!0},triangulate(i,e,t,s,o,l){if(i.length===0)return;let u=0,h=0;for(let m=0;m<i.length;m+=2)u+=i[m],h+=i[m+1];u/=i.length/2,h/=i.length/2;let d=s;e[d*t]=u,e[d*t+1]=h;const p=d++;for(let m=0;m<i.length;m+=2)e[d*t]=i[m],e[d*t+1]=i[m+1],m>0&&(o[l++]=d,o[l++]=p,o[l++]=d-1),d++;o[l++]=p+1,o[l++]=p,o[l++]=d-1}},A3={...go,extension:{...go.extension,name:"ellipse"}},P3={...go,extension:{...go.extension,name:"roundedRectangle"}},m0=1e-4,A1=1e-4;function T3(i){const e=i.length;if(e<6)return 1;let t=0;for(let s=0,o=i[e-2],l=i[e-1];s<e;s+=2){const u=i[s],h=i[s+1];t+=(u-o)*(h+l),o=u,l=h}return t<0?-1:1}function P1(i,e,t,s,o,l,u,h){const d=i-t*o,p=e-s*o,m=i+t*l,y=e+s*l;let x,_;u?(x=s,_=-t):(x=-s,_=t);const k=d+x,b=p+_,w=m+x,A=y+_;return h.push(k,b),h.push(w,A),2}function oi(i,e,t,s,o,l,u,h){const d=t-i,p=s-e;let m=Math.atan2(d,p),y=Math.atan2(o-i,l-e);h&&m<y?m+=Math.PI*2:!h&&m>y&&(y+=Math.PI*2);let x=m;const _=y-m,k=Math.abs(_),b=Math.sqrt(d*d+p*p),w=(15*k*Math.sqrt(b)/Math.PI>>0)+1,A=_/w;if(x+=A,h){u.push(i,e),u.push(t,s);for(let P=1,E=x;P<w;P++,E+=A)u.push(i,e),u.push(i+Math.sin(E)*b,e+Math.cos(E)*b);u.push(i,e),u.push(o,l)}else{u.push(t,s),u.push(i,e);for(let P=1,E=x;P<w;P++,E+=A)u.push(i+Math.sin(E)*b,e+Math.cos(E)*b),u.push(i,e);u.push(o,l),u.push(i,e)}return w*2}function E3(i,e,t,s,o,l){const u=m0;if(i.length===0)return;const h=e;let d=h.alignment;if(e.alignment!==.5){let ee=T3(i);d=(d-.5)*ee+.5}const p=new Ot(i[0],i[1]),m=new Ot(i[i.length-2],i[i.length-1]),y=s,x=Math.abs(p.x-m.x)<u&&Math.abs(p.y-m.y)<u;if(y){i=i.slice(),x&&(i.pop(),i.pop(),m.set(i[i.length-2],i[i.length-1]));const ee=(p.x+m.x)*.5,re=(m.y+p.y)*.5;i.unshift(ee,re),i.push(ee,re)}const _=o,k=i.length/2;let b=i.length;const w=_.length/2,A=h.width/2,P=A*A,E=h.miterLimit*h.miterLimit;let M=i[0],Y=i[1],N=i[2],$=i[3],ie=0,ae=0,te=-(Y-$),se=M-N,ve=0,ge=0,Me=Math.sqrt(te*te+se*se);te/=Me,se/=Me,te*=A,se*=A;const ut=d,J=(1-ut)*2,oe=ut*2;y||(h.cap==="round"?b+=oi(M-te*(J-oe)*.5,Y-se*(J-oe)*.5,M-te*J,Y-se*J,M+te*oe,Y+se*oe,_,!0)+2:h.cap==="square"&&(b+=P1(M,Y,te,se,J,oe,!0,_))),_.push(M-te*J,Y-se*J),_.push(M+te*oe,Y+se*oe);for(let ee=1;ee<k-1;++ee){M=i[(ee-1)*2],Y=i[(ee-1)*2+1],N=i[ee*2],$=i[ee*2+1],ie=i[(ee+1)*2],ae=i[(ee+1)*2+1],te=-(Y-$),se=M-N,Me=Math.sqrt(te*te+se*se),te/=Me,se/=Me,te*=A,se*=A,ve=-($-ae),ge=N-ie,Me=Math.sqrt(ve*ve+ge*ge),ve/=Me,ge/=Me,ve*=A,ge*=A;const re=N-M,I=Y-$,G=N-ie,Ae=ae-$,Re=re*G+I*Ae,Fe=I*G-Ae*re,Ie=Fe<0;if(Math.abs(Fe)<.001*Math.abs(Re)){_.push(N-te*J,$-se*J),_.push(N+te*oe,$+se*oe),Re>=0&&(h.join==="round"?b+=oi(N,$,N-te*J,$-se*J,N-ve*J,$-ge*J,_,!1)+4:b+=2,_.push(N-ve*oe,$-ge*oe),_.push(N+ve*J,$+ge*J));continue}const Ge=(-te+M)*(-se+$)-(-te+N)*(-se+Y),Ee=(-ve+ie)*(-ge+$)-(-ve+N)*(-ge+ae),Ne=(re*Ee-G*Ge)/Fe,tt=(Ae*Ge-I*Ee)/Fe,tn=(Ne-N)*(Ne-N)+(tt-$)*(tt-$),nn=N+(Ne-N)*J,Gt=$+(tt-$)*J,rn=N-(Ne-N)*oe,Ht=$-(tt-$)*oe,Dr=Math.min(re*re+I*I,G*G+Ae*Ae),Qn=Ie?J:oe,_t=Dr+Qn*Qn*P;tn<=_t?h.join==="bevel"||tn/P>E?(Ie?(_.push(nn,Gt),_.push(N+te*oe,$+se*oe),_.push(nn,Gt),_.push(N+ve*oe,$+ge*oe)):(_.push(N-te*J,$-se*J),_.push(rn,Ht),_.push(N-ve*J,$-ge*J),_.push(rn,Ht)),b+=2):h.join==="round"?Ie?(_.push(nn,Gt),_.push(N+te*oe,$+se*oe),b+=oi(N,$,N+te*oe,$+se*oe,N+ve*oe,$+ge*oe,_,!0)+4,_.push(nn,Gt),_.push(N+ve*oe,$+ge*oe)):(_.push(N-te*J,$-se*J),_.push(rn,Ht),b+=oi(N,$,N-te*J,$-se*J,N-ve*J,$-ge*J,_,!1)+4,_.push(N-ve*J,$-ge*J),_.push(rn,Ht)):(_.push(nn,Gt),_.push(rn,Ht)):(_.push(N-te*J,$-se*J),_.push(N+te*oe,$+se*oe),h.join==="round"?Ie?b+=oi(N,$,N+te*oe,$+se*oe,N+ve*oe,$+ge*oe,_,!0)+2:b+=oi(N,$,N-te*J,$-se*J,N-ve*J,$-ge*J,_,!1)+2:h.join==="miter"&&tn/P<=E&&(Ie?(_.push(rn,Ht),_.push(rn,Ht)):(_.push(nn,Gt),_.push(nn,Gt)),b+=2),_.push(N-ve*J,$-ge*J),_.push(N+ve*oe,$+ge*oe),b+=2)}M=i[(k-2)*2],Y=i[(k-2)*2+1],N=i[(k-1)*2],$=i[(k-1)*2+1],te=-(Y-$),se=M-N,Me=Math.sqrt(te*te+se*se),te/=Me,se/=Me,te*=A,se*=A,_.push(N-te*J,$-se*J),_.push(N+te*oe,$+se*oe),y||(h.cap==="round"?b+=oi(N-te*(J-oe)*.5,$-se*(J-oe)*.5,N-te*J,$-se*J,N+te*oe,$+se*oe,_,!1)+2:h.cap==="square"&&(b+=P1(N,$,te,se,J,oe,!1,_)));const ne=A1*A1;for(let ee=w;ee<b+w-2;++ee)M=_[ee*2],Y=_[ee*2+1],N=_[(ee+1)*2],$=_[(ee+1)*2+1],ie=_[(ee+2)*2],ae=_[(ee+2)*2+1],!(Math.abs(M*($-ae)+N*(ae-Y)+ie*(Y-$))<ne)&&l.push(ee,ee+1,ee+2)}function M3(i,e,t,s){const o=m0;if(i.length===0)return;const l=i[0],u=i[1],h=i[i.length-2],d=i[i.length-1],p=e||Math.abs(l-h)<o&&Math.abs(u-d)<o,m=t,y=i.length/2,x=m.length/2;for(let _=0;_<y;_++)m.push(i[_*2]),m.push(i[_*2+1]);for(let _=0;_<y-1;_++)s.push(x+_,x+_+1);p&&s.push(x+y-1,x)}function g0(i,e,t,s,o,l,u){const h=gy(i,e,2);if(!h)return;for(let p=0;p<h.length;p+=3)l[u++]=h[p]+o,l[u++]=h[p+1]+o,l[u++]=h[p+2]+o;let d=o*s;for(let p=0;p<i.length;p+=2)t[d]=i[p],t[d+1]=i[p+1],d+=s}const R3=[],I3={extension:{type:xe.ShapeBuilder,name:"polygon"},build(i,e){for(let t=0;t<i.points.length;t++)e[t]=i.points[t];return!0},triangulate(i,e,t,s,o,l){g0(i,R3,e,t,s,o,l)}},F3={extension:{type:xe.ShapeBuilder,name:"rectangle"},build(i,e){const t=i,s=t.x,o=t.y,l=t.width,u=t.height;return l>0&&u>0?(e[0]=s,e[1]=o,e[2]=s+l,e[3]=o,e[4]=s+l,e[5]=o+u,e[6]=s,e[7]=o+u,!0):!1},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[6],e[s+u+1]=i[7],u+=t,e[s+u]=i[4],e[s+u+1]=i[5],u+=t;const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2,o[l++]=h+1,o[l++]=h+3,o[l++]=h+2}},L3={extension:{type:xe.ShapeBuilder,name:"triangle"},build(i,e){return e[0]=i.x,e[1]=i.y,e[2]=i.x2,e[3]=i.y2,e[4]=i.x3,e[5]=i.y3,!0},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[4],e[s+u+1]=i[5];const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2}},z3=new De,B3=new lt;function j3(i,e,t,s){const o=e.matrix?i.copyFrom(e.matrix).invert():i.identity();if(e.textureSpace==="local"){const u=t.getBounds(B3);e.width&&u.pad(e.width);const{x:h,y:d}=u,p=1/u.width,m=1/u.height,y=-h*p,x=-d*m,_=o.a,k=o.b,b=o.c,w=o.d;o.a*=p,o.b*=p,o.c*=m,o.d*=m,o.tx=y*_+x*b+o.tx,o.ty=y*k+x*w+o.ty}else o.translate(e.texture.frame.x,e.texture.frame.y),o.scale(1/e.texture.source.width,1/e.texture.source.height);const l=e.texture.source.style;return!(e.fill instanceof pr)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(z3.copyFrom(s).invert()),o}const al={};Lt.handleByMap(xe.ShapeBuilder,al);Lt.add(F3,I3,L3,go,A3,P3);const D3=new lt,O3=new De;function $3(i,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let o=0;o<i.instructions.length;o++){const l=i.instructions[o];if(l.action==="texture")N3(l.data,s,t);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,d=l.data.style,p=l.data.hole;u&&p&&T1(p.shapePath,d,!0,s,t),p&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=p.shapePath.shapePrimitives),T1(h,d,u,s,t)}}}function N3(i,e,t){const s=[],o=al.rectangle,l=D3;l.x=i.dx,l.y=i.dy,l.width=i.dw,l.height=i.dh;const u=i.transform;if(!o.build(l,s))return;const{vertices:h,uvs:d,indices:p}=t,m=p.length,y=h.length/2;u&&f0(s,u),o.triangulate(s,h,2,y,p,m);const x=i.image,_=x.uvs;d.push(_.x0,_.y0,_.x1,_.y1,_.x3,_.y3,_.x2,_.y2);const k=Sn.get(p0);k.indexOffset=m,k.indexSize=p.length-m,k.attributeOffset=y,k.attributeSize=h.length/2-y,k.baseColor=i.style,k.alpha=i.alpha,k.texture=x,k.geometryData=t,e.push(k)}function T1(i,e,t,s,o){const{vertices:l,uvs:u,indices:h}=o;i.shapePrimitives.forEach(({shape:d,transform:p,holes:m})=>{const y=[],x=al[d.type];if(!x.build(d,y))return;const _=h.length,k=l.length/2;let b="triangle-list";if(p&&f0(y,p),t){const E=d.closePath??!0,M=e;M.pixelLine?(M3(y,E,l,h),b="line-list"):E3(y,M,!1,E,l,h)}else if(m){const E=[],M=y.slice();U3(m).forEach(N=>{E.push(M.length/2),M.push(...N)}),g0(M,E,l,2,k,h,_)}else x.triangulate(y,l,2,k,h,_);const w=u.length/2,A=e.texture;if(A!==$e.WHITE){const E=j3(O3,e,d,p);k3(l,2,k,u,w,2,l.length/2-k,E)}else b3(u,w,2,l.length/2-k);const P=Sn.get(p0);P.indexOffset=_,P.indexSize=h.length-_,P.attributeOffset=k,P.attributeSize=l.length/2-k,P.baseColor=e.color,P.alpha=e.alpha,P.texture=A,P.geometryData=o,P.topology=b,s.push(P)})}function U3(i){const e=[];for(let t=0;t<i.length;t++){const s=i[t].shape,o=[];al[s.type].build(s,o)&&e.push(o)}return e}class W3{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class G3{constructor(){this.instructions=new Sp}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new S3({maxTextures:t}),this.instructions.reset()}get geometry(){return Be(Ng,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const rh=class Nc{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Nc.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??Nc.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),$3(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=Sn.get(G3,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[e.uid],l=o.vertices.length,u=o.indices.length;for(let m=0;m<s.length;m++)s[m].applyTransform=!1;const h=t.batcher;h.ensureAttributeBuffer(l),h.ensureIndexBuffer(u),h.begin();for(let m=0;m<s.length;m++){const y=s[m];h.add(y)}h.finish(t.instructions);const d=h.geometry;d.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),d.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const p=h.batches;for(let m=0;m<p.length;m++){const y=p[m];y.bindGroup=Fy(y.textures.textures,y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new W3;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(Sn.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{Sn.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};rh.extension={type:[xe.WebGLSystem,xe.WebGPUSystem,xe.CanvasSystem],name:"graphicsContext"};rh.defaultOptions={bezierSmoothness:.5};let y0=rh;const H3=8,Ha=11920929e-14,V3=1;function x0(i,e,t,s,o,l,u,h,d,p){const y=Math.min(.99,Math.max(0,p??y0.defaultOptions.bezierSmoothness));let x=(V3-y)/1;return x*=x,Y3(e,t,s,o,l,u,h,d,i,x),i}function Y3(i,e,t,s,o,l,u,h,d,p){Uc(i,e,t,s,o,l,u,h,d,p,0),d.push(u,h)}function Uc(i,e,t,s,o,l,u,h,d,p,m){if(m>H3)return;const y=(i+t)/2,x=(e+s)/2,_=(t+o)/2,k=(s+l)/2,b=(o+u)/2,w=(l+h)/2,A=(y+_)/2,P=(x+k)/2,E=(_+b)/2,M=(k+w)/2,Y=(A+E)/2,N=(P+M)/2;if(m>0){let $=u-i,ie=h-e;const ae=Math.abs((t-u)*ie-(s-h)*$),te=Math.abs((o-u)*ie-(l-h)*$);if(ae>Ha&&te>Ha){if((ae+te)*(ae+te)<=p*($*$+ie*ie)){d.push(Y,N);return}}else if(ae>Ha){if(ae*ae<=p*($*$+ie*ie)){d.push(Y,N);return}}else if(te>Ha){if(te*te<=p*($*$+ie*ie)){d.push(Y,N);return}}else if($=Y-(i+u)/2,ie=N-(e+h)/2,$*$+ie*ie<=p){d.push(Y,N);return}}Uc(i,e,y,x,A,P,Y,N,d,p,m+1),Uc(Y,N,E,M,b,w,u,h,d,p,m+1)}const X3=8,q3=11920929e-14,K3=1;function Q3(i,e,t,s,o,l,u,h){const p=Math.min(.99,Math.max(0,h??y0.defaultOptions.bezierSmoothness));let m=(K3-p)/1;return m*=m,Z3(e,t,s,o,l,u,i,m),i}function Z3(i,e,t,s,o,l,u,h){Wc(u,i,e,t,s,o,l,h,0),u.push(o,l)}function Wc(i,e,t,s,o,l,u,h,d){if(d>X3)return;const p=(e+s)/2,m=(t+o)/2,y=(s+l)/2,x=(o+u)/2,_=(p+y)/2,k=(m+x)/2;let b=l-e,w=u-t;const A=Math.abs((s-l)*w-(o-u)*b);if(A>q3){if(A*A<=h*(b*b+w*w)){i.push(_,k);return}}else if(b=_-(e+l)/2,w=k-(t+u)/2,b*b+w*w<=h){i.push(_,k);return}Wc(i,e,t,p,m,_,k,h,d+1),Wc(i,_,k,y,x,l,u,h,d+1)}function v0(i,e,t,s,o,l,u,h){let d=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(d=2*Math.PI-d),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),h=Math.max(h,3);let p=d/h,m=o;p*=u?-1:1;for(let y=0;y<h+1;y++){const x=Math.cos(m),_=Math.sin(m),k=e+x*s,b=t+_*s;i.push(k,b),m+=p}}function J3(i,e,t,s,o,l){const u=i[i.length-2],d=i[i.length-1]-t,p=u-e,m=o-t,y=s-e,x=Math.abs(d*y-p*m);if(x<1e-8||l===0){(i[i.length-2]!==e||i[i.length-1]!==t)&&i.push(e,t);return}const _=d*d+p*p,k=m*m+y*y,b=d*m+p*y,w=l*Math.sqrt(_)/x,A=l*Math.sqrt(k)/x,P=w*b/_,E=A*b/k,M=w*y+A*p,Y=w*m+A*d,N=p*(A+P),$=d*(A+P),ie=y*(w+E),ae=m*(w+E),te=Math.atan2($-Y,N-M),se=Math.atan2(ae-Y,ie-M);v0(i,M+e,Y+t,l,te,se,p*m>y*d)}const co=Math.PI*2,yc={centerX:0,centerY:0,ang1:0,ang2:0},xc=({x:i,y:e},t,s,o,l,u,h,d)=>{i*=t,e*=s;const p=o*i-l*e,m=l*i+o*e;return d.x=p+u,d.y=m+h,d};function e8(i,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,o=Math.cos(i),l=Math.sin(i),u=Math.cos(i+e),h=Math.sin(i+e);return[{x:o-l*s,y:l+o*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const E1=(i,e,t,s)=>{const o=i*s-e*t<0?-1:1;let l=i*t+e*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},t8=(i,e,t,s,o,l,u,h,d,p,m,y,x)=>{const _=Math.pow(o,2),k=Math.pow(l,2),b=Math.pow(m,2),w=Math.pow(y,2);let A=_*k-_*w-k*b;A<0&&(A=0),A/=_*w+k*b,A=Math.sqrt(A)*(u===h?-1:1);const P=A*o/l*y,E=A*-l/o*m,M=p*P-d*E+(i+t)/2,Y=d*P+p*E+(e+s)/2,N=(m-P)/o,$=(y-E)/l,ie=(-m-P)/o,ae=(-y-E)/l,te=E1(1,0,N,$);let se=E1(N,$,ie,ae);h===0&&se>0&&(se-=co),h===1&&se<0&&(se+=co),x.centerX=M,x.centerY=Y,x.ang1=te,x.ang2=se};function n8(i,e,t,s,o,l,u,h=0,d=0,p=0){if(l===0||u===0)return;const m=Math.sin(h*co/360),y=Math.cos(h*co/360),x=y*(e-s)/2+m*(t-o)/2,_=-m*(e-s)/2+y*(t-o)/2;if(x===0&&_===0)return;l=Math.abs(l),u=Math.abs(u);const k=Math.pow(x,2)/Math.pow(l,2)+Math.pow(_,2)/Math.pow(u,2);k>1&&(l*=Math.sqrt(k),u*=Math.sqrt(k)),t8(e,t,s,o,l,u,d,p,m,y,x,_,yc);let{ang1:b,ang2:w}=yc;const{centerX:A,centerY:P}=yc;let E=Math.abs(w)/(co/4);Math.abs(1-E)<1e-7&&(E=1);const M=Math.max(Math.ceil(E),1);w/=M;let Y=i[i.length-2],N=i[i.length-1];const $={x:0,y:0};for(let ie=0;ie<M;ie++){const ae=e8(b,w),{x:te,y:se}=xc(ae[0],l,u,y,m,A,P,$),{x:ve,y:ge}=xc(ae[1],l,u,y,m,A,P,$),{x:Me,y:ut}=xc(ae[2],l,u,y,m,A,P,$);x0(i,Y,N,te,se,ve,ge,Me,ut),Y=Me,N=ut,b+=w}}function r8(i,e,t){const s=(u,h)=>{const d=h.x-u.x,p=h.y-u.y,m=Math.sqrt(d*d+p*p),y=d/m,x=p/m;return{len:m,nx:y,ny:x}},o=(u,h)=>{u===0?i.moveTo(h.x,h.y):i.lineTo(h.x,h.y)};let l=e[e.length-1];for(let u=0;u<e.length;u++){const h=e[u%e.length],d=h.radius??t;if(d<=0){o(u,h),l=h;continue}const p=e[(u+1)%e.length],m=s(h,l),y=s(h,p);if(m.len<1e-4||y.len<1e-4){o(u,h),l=h;continue}let x=Math.asin(m.nx*y.ny-m.ny*y.nx),_=1,k=!1;m.nx*y.nx-m.ny*-y.ny<0?x<0?x=Math.PI+x:(x=Math.PI-x,_=-1,k=!0):x>0&&(_=-1,k=!0);const b=x/2;let w,A=Math.abs(Math.cos(b)*d/Math.sin(b));A>Math.min(m.len/2,y.len/2)?(A=Math.min(m.len/2,y.len/2),w=Math.abs(A*Math.sin(b)/Math.cos(b))):w=d;const P=h.x+y.nx*A+-y.ny*w*_,E=h.y+y.ny*A+y.nx*w*_,M=Math.atan2(m.ny,m.nx)+Math.PI/2*_,Y=Math.atan2(y.ny,y.nx)-Math.PI/2*_;u===0&&i.moveTo(P+Math.cos(M)*w,E+Math.sin(M)*w),i.arc(P,E,w,M,Y,k),l=h}}function i8(i,e,t,s){const o=(h,d)=>Math.sqrt((h.x-d.x)**2+(h.y-d.y)**2),l=(h,d,p)=>({x:h.x+(d.x-h.x)*p,y:h.y+(d.y-h.y)*p}),u=e.length;for(let h=0;h<u;h++){const d=e[(h+1)%u],p=d.radius??t;if(p<=0){h===0?i.moveTo(d.x,d.y):i.lineTo(d.x,d.y);continue}const m=e[h],y=e[(h+2)%u],x=o(m,d);let _;if(x<1e-4)_=d;else{const w=Math.min(x/2,p);_=l(d,m,w/x)}const k=o(y,d);let b;if(k<1e-4)b=d;else{const w=Math.min(k/2,p);b=l(d,y,w/k)}h===0?i.moveTo(_.x,_.y):i.lineTo(_.x,_.y),i.quadraticCurveTo(d.x,d.y,b.x,b.y,s)}}const s8=new lt;class o8{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Fn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==e||l!==t)&&s.push(e,t),this}arc(e,t,s,o,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return v0(h,e,t,s,o,l,u),this}arcTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return J3(u,e,t,s,o,l),this}arcToSvg(e,t,s,o,l,u,h){const d=this._currentPoly.points;return n8(d,this._currentPoly.lastX,this._currentPoly.lastY,u,h,e,t,s,o,l),this}bezierCurveTo(e,t,s,o,l,u,h){this._ensurePoly();const d=this._currentPoly;return x0(this._currentPoly.points,d.lastX,d.lastY,e,t,s,o,l,u,h),this}quadraticCurveTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly;return Q3(this._currentPoly.points,u.lastX,u.lastY,e,t,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,o=s.length;for(let l=0;l<e.instructions.length;l++){const u=e.instructions[l];this[u.action](...u.data)}if(e.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const d=h.shape,p=l==null?void 0:l.shape;p&&p.containsPolygon(d)?(l.holes||(l.holes=[]),l.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):l=h}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,o,l){return this.drawShape(new lt(e,t,s,o),l),this}circle(e,t,s,o){return this.drawShape(new eh(e,t,s),o),this}poly(e,t,s){const o=new lo(e);return o.closePath=t,this.drawShape(o,s),this}regularPoly(e,t,s,o,l=0,u){o=Math.max(o|0,3);const h=-1*Math.PI/2+l,d=Math.PI*2/o,p=[];for(let m=0;m<o;m++){const y=h-m*d;p.push(e+s*Math.cos(y),t+s*Math.sin(y))}return this.poly(p,!0,u),this}roundPoly(e,t,s,o,l,u=0,h){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(e,t,s,o,u);const d=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,d);const p=-1*Math.PI/2+u,m=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let x=0;x<o;x++){const _=x*m+p,k=e+s*Math.cos(_),b=t+s*Math.sin(_),w=_+Math.PI+y,A=_-Math.PI-y,P=k+l*Math.cos(w),E=b+l*Math.sin(w),M=k+l*Math.cos(A),Y=b+l*Math.sin(A);x===0?this.moveTo(P,E):this.lineTo(P,E),this.quadraticCurveTo(k,b,M,Y,h)}return this.closePath()}roundShape(e,t,s=!1,o){return e.length<3?this:(s?i8(this,e,t,o):r8(this,e,t),this.closePath())}filletRect(e,t,s,o,l){if(l===0)return this.rect(e,t,s,o);const u=Math.min(s,o)/2,h=Math.min(u,Math.max(-u,l)),d=e+s,p=t+o,m=h<0?-h:0,y=Math.abs(h);return this.moveTo(e,t+y).arcTo(e+m,t+m,e+y,t,y).lineTo(d-y,t).arcTo(d-m,t+m,d,t+y,y).lineTo(d,p-y).arcTo(d-m,p-m,e+s-y,p,y).lineTo(e+y,p).arcTo(e+m,p-m,e,p-y,y).closePath()}chamferRect(e,t,s,o,l,u){if(l<=0)return this.rect(e,t,s,o);const h=Math.min(l,Math.min(s,o)/2),d=e+s,p=t+o,m=[e+h,t,d-h,t,d,t+h,d,p-h,d-h,p,e+h,p,e,p-h,e,t+h];for(let y=m.length-1;y>=2;y-=2)m[y]===m[y-2]&&m[y-1]===m[y-3]&&m.splice(y-1,2);return this.poly(m,!0,u)}ellipse(e,t,s,o,l){return this.drawShape(new th(e,t,s,o),l),this}roundRect(e,t,s,o,l,u){return this.drawShape(new nh(e,t,s,o,l),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new lo,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new lo,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,o=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const l=t.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const o=t[s],l=o.shape.getBounds(s8);o.transform?e.addRect(l,o.transform):e.addRect(l)}return e}}class fr{constructor(e,t=!1){this.instructions=[],this.uid=vt("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?Ey(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new o8(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,o,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(Ot.shared);let d=0,p=0;if(!u||u.action!=="bezierCurveTo")d=h.x,p=h.y;else{d=u.data[2],p=u.data[3];const m=h.x,y=h.y;d=m+(m-d),p=y+(y-p)}return this.instructions.push({action:"bezierCurveTo",data:[d,p,e,t,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(Ot.shared);let u=0,h=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=o.data[0],h=o.data[1];const d=l.x,p=l.y;u=d+(d-u),h=p+(p-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,e,t,s]}),this._dirty=!0,this}rect(e,t,s,o,l){return this.instructions.push({action:"rect",data:[e,t,s,o,l]}),this._dirty=!0,this}circle(e,t,s,o){return this.instructions.push({action:"circle",data:[e,t,s,o]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,o,l,u,h){l||(l=o/2);const d=-1*Math.PI/2+u,p=s*2,m=Math.PI*2/p,y=[];for(let x=0;x<p;x++){const _=x%2?l:o,k=x*m+d;y.push(e+_*Math.cos(k),t+_*Math.sin(k))}return this.poly(y,!0,h),this}clone(e=!1){const t=new fr;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];t.instructions.push({action:o.action,data:o.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,o=e.c,l=e.d,u=e.tx,h=e.ty;let d=0,p=0,m=0,y=0,x=0,_=0,k=0,b=0;for(let w=0;w<this.instructions.length;w++){const A=this.instructions[w],P=A.data;switch(A.action){case"moveTo":case"lineTo":d=P[0],p=P[1],P[0]=t*d+o*p+u,P[1]=s*d+l*p+h;break;case"bezierCurveTo":m=P[0],y=P[1],x=P[2],_=P[3],d=P[4],p=P[5],P[0]=t*m+o*y+u,P[1]=s*m+l*y+h,P[2]=t*x+o*_+u,P[3]=s*x+l*_+h,P[4]=t*d+o*p+u,P[5]=s*d+l*p+h;break;case"quadraticCurveTo":m=P[0],y=P[1],d=P[2],p=P[3],P[0]=t*m+o*y+u,P[1]=s*m+l*y+h,P[2]=t*d+o*p+u,P[3]=s*d+l*p+h;break;case"arcToSvg":d=P[5],p=P[6],k=P[0],b=P[1],P[0]=t*k+o*b,P[1]=s*k+l*b,P[5]=t*d+o*p+u,P[6]=s*d+l*p+h;break;case"circle":P[4]=eo(P[3],e);break;case"rect":P[4]=eo(P[4],e);break;case"ellipse":P[8]=eo(P[8],e);break;case"roundRect":P[5]=eo(P[5],e);break;case"addPath":P[0].transform(e);break;case"poly":P[2]=eo(P[2],e);break;default:st("unknown transform action",A.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function eo(i,e){return i?i.prepend(e):e.clone()}function xt(i,e,t){const s=i.getAttribute(e);return s?Number(s):t}function a8(i,e){const t=i.querySelectorAll("defs");for(let s=0;s<t.length;s++){const o=t[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=l8(u);break;case"radialgradient":e.defs[u.id]=u8();break}}}}function l8(i){const e=xt(i,"x1",0),t=xt(i,"y1",0),s=xt(i,"x2",1),o=xt(i,"y2",0),l=i.getAttribute("gradientUnits")||"objectBoundingBox",u=new pr(e,t,s,o,l==="objectBoundingBox"?"local":"global");for(let h=0;h<i.children.length;h++){const d=i.children[h],p=xt(d,"offset",0),m=kt.shared.setValue(d.getAttribute("stop-color")).toNumber();u.addColorStop(p,m)}return u}function u8(i){return st("[SVG Parser] Radial gradients are not yet supported"),new pr(0,0,1,0)}function M1(i){const e=i.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const R1={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function _0(i,e){const t=i.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in R1){const h=i.getAttribute(u);h&&I1(e,l,u,h.trim())}if(t){const u=t.split(";");for(let h=0;h<u.length;h++){const d=u[h].trim(),[p,m]=d.split(":");R1[p]&&I1(e,l,p,m.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function I1(i,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=M1(s);e.strokeStyle.fill=i.defs[o]}else e.strokeStyle.color=kt.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=M1(s);e.fillStyle.fill=i.defs[o]}else e.fillStyle.color=kt.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function c8(i){if(i.length<=2)return!0;const e=i.map(h=>h.area).sort((h,d)=>d-h),[t,s]=e,o=e[e.length-1],l=t/s,u=s/o;return!(l>3&&u<2)}function h8(i){return i.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function d8(i){const e=i.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],o=[];for(let m=0;m<t.length;m+=2)m+1<t.length&&(s.push(t[m]),o.push(t[m+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),h=Math.min(...o),d=Math.max(...o);return(u-l)*(d-h)}function F1(i,e){const t=new fr(i,!1);for(const s of t.instructions)e.instructions.push(s)}function f8(i,e){if(typeof i=="string"){const u=document.createElement("div");u.innerHTML=i.trim(),i=u.querySelector("svg")}const t={context:e,defs:{},path:new fr};a8(i,t);const s=i.children,{fillStyle:o,strokeStyle:l}=_0(i,t);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&w0(h,t,o,l)}return e}function w0(i,e,t,s){const o=i.children,{fillStyle:l,strokeStyle:u}=_0(i,e);l&&t?t={...t,...l}:l&&(t=l),u&&s?s={...s,...u}:u&&(s=u);const h=!t&&!s;h&&(t={color:0});let d,p,m,y,x,_,k,b,w,A,P,E,M,Y,N,$,ie;switch(i.nodeName.toLowerCase()){case"path":{Y=i.getAttribute("d");const ae=i.getAttribute("fill-rule"),te=h8(Y),se=ae==="evenodd",ve=te.length>1;if(se&&ve){const Me=te.map(J=>({path:J,area:d8(J)}));if(Me.sort((J,oe)=>oe.area-J.area),te.length>3||!c8(Me))for(let J=0;J<Me.length;J++){const oe=Me[J],ne=J===0;e.context.beginPath();const ee=new fr(void 0,!0);F1(oe.path,ee),e.context.path(ee),ne?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let J=0;J<Me.length;J++){const oe=Me[J],ne=J%2===1;e.context.beginPath();const ee=new fr(void 0,!0);F1(oe.path,ee),e.context.path(ee),ne?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const Me=ae?ae==="evenodd":!0;N=new fr(Y,Me),e.context.path(N),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":k=xt(i,"cx",0),b=xt(i,"cy",0),w=xt(i,"r",0),e.context.ellipse(k,b,w,w),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":d=xt(i,"x",0),p=xt(i,"y",0),$=xt(i,"width",0),ie=xt(i,"height",0),A=xt(i,"rx",0),P=xt(i,"ry",0),A||P?e.context.roundRect(d,p,$,ie,A||P):e.context.rect(d,p,$,ie),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":k=xt(i,"cx",0),b=xt(i,"cy",0),A=xt(i,"rx",0),P=xt(i,"ry",0),e.context.beginPath(),e.context.ellipse(k,b,A,P),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":m=xt(i,"x1",0),y=xt(i,"y1",0),x=xt(i,"x2",0),_=xt(i,"y2",0),e.context.beginPath(),e.context.moveTo(m,y),e.context.lineTo(x,_),s&&e.context.stroke(s);break;case"polygon":M=i.getAttribute("points"),E=M.match(/\d+/g).map(ae=>parseInt(ae,10)),e.context.poly(E,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":M=i.getAttribute("points"),E=M.match(/\d+/g).map(ae=>parseInt(ae,10)),e.context.poly(E,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{st(`[SVG parser] <${i.nodeName}> elements unsupported`);break}}h&&(t=null);for(let ae=0;ae<o.length;ae++)w0(o[ae],e,t,s)}function p8(i){return kt.isColorLike(i)}function L1(i){return i instanceof ol}function z1(i){return i instanceof pr}function m8(i){return i instanceof $e}function g8(i,e,t){const s=kt.shared.setValue(e??0);return i.color=s.toNumber(),i.alpha=s.alpha===1?t.alpha:s.alpha,i.texture=$e.WHITE,{...t,...i}}function y8(i,e,t){return i.texture=e,{...t,...i}}function B1(i,e,t){return i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,{...t,...i}}function j1(i,e,t){return e.buildGradient(),i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,i.textureSpace=e.textureSpace,{...t,...i}}function x8(i,e){const t={...e,...i},s=kt.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function di(i,e){if(i==null)return null;const t={},s=i;return p8(i)?g8(t,i,e):m8(i)?y8(t,i,e):L1(i)?B1(t,i,e):z1(i)?j1(t,i,e):s.fill&&L1(s.fill)?B1(s,s.fill,e):s.fill&&z1(s.fill)?j1(s,s.fill,e):x8(s,e)}function nl(i,e){const{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...d}=e,p=di(i,d);return p?{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...p}:null}const v8=new Ot,D1=new De,ih=class Xn extends Ln{constructor(){super(...arguments),this.uid=vt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new fr,this._transform=new De,this._fillStyle={...Xn.defaultFillStyle},this._strokeStyle={...Xn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Fn,this._boundsDirty=!0}clone(){const e=new Xn;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=di(e,Xn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=nl(e,Xn.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=di(e,Xn.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=di(e,Xn.defaultStrokeStyle),this}texture(e,t,s,o,l,u){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:o||0,dw:l||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?kt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new fr,this}fill(e,t){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&(o==null?void 0:o.action)==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(Be(Xe,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=di(e,Xn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Ot.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&(s==null?void 0:s.action)==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=nl(e,Xn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,o,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,s,o,l,u),this}arcTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(e,t,s,o,l,u,h){this._tick++;const d=this._transform;return this._activePath.arcToSvg(e,t,s,o,l,d.a*u+d.c*h+d.tx,d.b*u+d.d*h+d.ty),this}bezierCurveTo(e,t,s,o,l,u,h){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*e+d.c*t+d.tx,d.b*e+d.d*t+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*l+d.c*u+d.tx,d.b*l+d.d*u+d.ty,h),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,s,o){return this._tick++,this._activePath.ellipse(e,t,s,o,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*e+s.c*t+s.tx,u=s.b*e+s.d*t+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(e,t,s,o){return this._tick++,this._activePath.rect(e,t,s,o,this._transform.clone()),this}roundRect(e,t,s,o,l){return this._tick++,this._activePath.roundRect(e,t,s,o,l,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(e,t,s,o,l,u),this}roundPoly(e,t,s,o,l,u){return this._tick++,this._activePath.roundPoly(e,t,s,o,l,u),this}roundShape(e,t,s,o){return this._tick++,this._activePath.roundShape(e,t,s,o),this}filletRect(e,t,s,o,l){return this._tick++,this._activePath.filletRect(e,t,s,o,l),this}chamferRect(e,t,s,o,l,u){return this._tick++,this._activePath.chamferRect(e,t,s,o,l,u),this}star(e,t,s,o,l=0,u=0){return this._tick++,this._activePath.star(e,t,s,o,l,u,this._transform.clone()),this}svg(e){return this._tick++,f8(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,o,l,u){return e instanceof De?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,o,l,u),this)}transform(e,t,s,o,l,u){return e instanceof De?(this._transform.append(e),this):(D1.set(e,t,s,o,l,u),this._transform.append(D1),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],o=s.action;if(o==="fill"){const l=s.data;e.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;e.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,h=l.style.width*(1-u),d=l.path.bounds;e.addFrame(d.minX-h,d.minY-h,d.maxX+h,d.maxY+h)}}return e}containsPoint(e){var o;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let l=0;l<t.length;l++){const u=t[l],h=u.data,d=h.path;if(!u.action||!d)continue;const p=h.style,m=d.shapePath.shapePrimitives;for(let y=0;y<m.length;y++){const x=m[y].shape;if(!p||!x)continue;const _=m[y].transform,k=_?_.applyInverse(e,v8):e;if(u.action==="fill")s=x.contains(k.x,k.y);else{const w=p;s=x.strokeContains(k.x,k.y,w.width,w.alignment)}const b=h.hole;if(b){const w=(o=b.shapePath)==null?void 0:o.shapePrimitives;if(w)for(let A=0;A<w.length;A++)w[A].shape.contains(k.x,k.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};ih.defaultFillStyle={color:16777215,alpha:1,texture:$e.WHITE,matrix:null,fill:null,textureSpace:"local"};ih.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:$e.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let _n=ih;const sh=class Yi extends Ln{constructor(e={}){super(),this.uid=vt("textStyle"),this._tick=0,_8(e);const t={...Yi.defaultTextStyle,...e};for(const s in t){const o=s;this[o]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Yi.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Yi.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({..._n.defaultFillStyle,...e},()=>{this._fill=di({...this._originalFill},_n.defaultFillStyle)})),this._fill=di(e===0?"black":e,_n.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({..._n.defaultStrokeStyle,...e},()=>{this._stroke=nl({...this._originalStroke},_n.defaultStrokeStyle)})),this._stroke=nl(e,_n.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=Yi.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Yi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){var s,o,l,u;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const h=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(h),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(h),(l=this._stroke)!=null&&l.texture&&this._stroke.texture.destroy(h),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(h)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,o,l)=>(s[o]===l||(s[o]=l,t==null||t(o,l),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(kt.isColorLike(e)||e instanceof pr||e instanceof ol)}};sh.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};sh.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let yo=sh;function _8(i){const e=i;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=yo.defaultDropShadow;i.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Be(Xe,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(kt.isColorLike(t))s.color=t;else if(t instanceof pr||t instanceof ol)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");i.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Be(Xe,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&st("The number of fill colors must match the number of fill gradient stops.");const t=new pr({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),o=e.fill.map(l=>kt.shared.setValue(l).toNumber());s.forEach((l,u)=>{t.addColorStop(l,o[u])}),i.fill={fill:t}}}class w8{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=et.get().createCanvas();s.width=e,s.height=t;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=Ji(e),t=Ji(t);const o=(e<<17)+(t<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(e,t)),l}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:o}=t,l=(s<<17)+(o<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,o),this._canvasPool[l].push(e)}clear(){this._canvasPool={}}}const xo=new w8;vo.register(xo);const O1=1e5;function rl(i,e,t,s=0){if(i.texture===$e.WHITE&&!i.fill)return kt.shared.setValue(i.color).setAlpha(i.alpha??1).toHexa();if(i.fill){if(i.fill instanceof ol){const o=i.fill,l=e.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(De.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(i.fill instanceof pr){const o=i.fill,l=o.type==="linear",u=o.textureSpace==="local";let h=1,d=1;u&&t&&(h=t.width+s,d=t.height+s);let p,m=!1;if(l){const{start:y,end:x}=o;p=e.createLinearGradient(y.x*h,y.y*d,x.x*h,x.y*d),m=Math.abs(x.x-y.x)<Math.abs((x.y-y.y)*.1)}else{const{center:y,innerRadius:x,outerCenter:_,outerRadius:k}=o;p=e.createRadialGradient(y.x*h,y.y*d,x*h,_.x*h,_.y*d,k*h)}if(m&&u&&t){const y=t.lineHeight/d;for(let x=0;x<t.lines.length;x++){const _=(x*t.lineHeight+s/2)/d;o.colorStops.forEach(k=>{const b=_+k.offset*y;p.addColorStop(Math.floor(b*O1)/O1,kt.shared.setValue(k.color).toHex())})}}else o.colorStops.forEach(y=>{p.addColorStop(y.offset,kt.shared.setValue(y.color).toHex())});return p}}else{const o=e.createPattern(i.texture.source.resource,"repeat"),l=i.matrix.copyTo(De.shared);return l.scale(i.texture.frame.width,i.texture.frame.height),o.setTransform(l),o}return st("FillStyle not recognised",i),"red"}const S0=class k0 extends r0{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...k0.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=$e.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=el(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof es?t.textureStyle:new es(t.textureStyle)),this.fontMetrics=Kn.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){var w,A;const t=Kn.graphemeSegmenter(e).filter(P=>!this._currentChars.includes(P)).filter((P,E,M)=>M.indexOf(P)===E);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const h=this._style;let d=this._currentX,p=this._currentY,m=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,x=this._padding*y;let _=!1;const k=o.width/this.resolution,b=o.height/this.resolution;for(let P=0;P<t.length;P++){const E=t[P],M=Kn.measureText(E,h,o,!1);M.lineHeight=M.height;const Y=M.width*y,N=Math.ceil((h.fontStyle==="italic"?2:1)*Y),$=M.height*y,ie=N+x*2,ae=$+x*2;if(_=!1,E!==`
`&&E!=="\r"&&E!=="	"&&E!==" "&&(_=!0,m=Math.ceil(Math.max(ae,m))),d+ie>k&&(p+=m,m=ae,d=0,p+m>b)){u.update();const se=this._nextPage();o=se.canvasAndContext.canvas,l=se.canvasAndContext.context,u=se.texture.source,d=0,p=0,m=0}const te=Y/y-(((w=h.dropShadow)==null?void 0:w.distance)??0)-(((A=h._stroke)==null?void 0:A.width)??0);if(this.chars[E]={id:E.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:te,kerning:{}},_){this._drawGlyph(l,M,d+x,p+x,y,h);const se=u.width*y,ve=u.height*y,ge=new lt(d/se*u.width,p/ve*u.height,ie/se*u.width,ae/ve*u.height);this.chars[E].texture=new $e({source:u,frame:ge}),d+=Math.ceil(ie)}}u.update(),this._currentX=d,this._currentY=p,this._currentMaxCharHeight=m,this._skipKerning&&this._applyKerning(t,l)}get pageTextures(){return Be(Xe,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let o=0;o<e.length;o++){const l=e[o];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let d=s[l];d||(d=s[l]=t.measureText(l).width);let p=s[h];p||(p=s[h]=t.measureText(h).width);let m=t.measureText(l+h).width,y=m-(d+p);y&&(this.chars[l].kerning[h]=y),m=t.measureText(l+h).width,y=m-(d+p),y&&(this.chars[h].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=xo.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new $e({source:new pi({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:t,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=el(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const o=t._stroke,l=(o==null?void 0:o.width)??0;if(o&&(e.lineWidth=l,e.lineJoin=o.join,e.miterLimit=o.miterLimit,e.strokeStyle=rl(o,e)),t._fill&&(e.fillStyle=rl(t._fill,e)),t.dropShadow){const u=t.dropShadow,h=kt.shared.setValue(u.color).toArray(),d=u.blur*s,p=u.distance*s;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,e.shadowBlur=d,e.shadowOffsetX=Math.cos(u.angle)*p,e.shadowOffsetY=Math.sin(u.angle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,o,l,u){const h=t.text,d=t.fontProperties,p=u._stroke,m=((p==null?void 0:p.width)??0)*l,y=s+m/2,x=o-m/2,_=d.descent*l,k=t.lineHeight*l;let b=!1;u.stroke&&m&&(b=!0,e.strokeText(h,y,x+k-_));const{shadowBlur:w,shadowOffsetX:A,shadowOffsetY:P}=e;u._fill&&(b&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(h,y,x+k-_)),b&&(e.shadowBlur=w,e.shadowOffsetX=A,e.shadowOffsetY=P)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];xo.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};S0.defaultOptions={textureSize:512,style:new yo,mipmap:!0};let $1=S0;function S8(i,e,t,s){const o={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=t.baseLineOffset;let l=o.lines[0],u=null,h=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},p=t.baseMeasurementFontSize/e.fontSize,m=e.letterSpacing*p,y=e.wordWrapWidth*p,x=e.lineHeight?e.lineHeight*p:t.lineHeight,_=e.wordWrap&&e.breakWords,k=A=>{const P=l.width;for(let E=0;E<d.index;E++){const M=A.positions[E];l.chars.push(A.chars[E]),l.charPositions.push(M+P)}l.width+=A.width,h=!1,d.width=0,d.index=0,d.chars.length=0},b=()=>{let A=l.chars.length-1;if(s){let P=l.chars[A];for(;P===" ";)l.width-=t.chars[P].xAdvance,P=l.chars[--A]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,o.lines.push(l),o.height+=x},w=A=>A-m>y;for(let A=0;A<i.length+1;A++){let P;const E=A===i.length;E||(P=i[A]);const M=t.chars[P]||t.chars[" "];if(/(?:\s)/.test(P)||P==="\r"||P===`
`||E){if(!h&&e.wordWrap&&w(l.width+d.width)?(b(),k(d),E||l.charPositions.push(0)):(d.start=l.width,k(d),E||l.charPositions.push(0)),P==="\r"||P===`
`)b();else if(!E){const ie=M.xAdvance+(M.kerning[u]||0)+m;l.width+=ie,l.spaceWidth=ie,l.spacesIndex.push(l.charPositions.length),l.chars.push(P)}}else{const $=M.kerning[u]||0,ie=M.xAdvance+$+m;_&&w(l.width+d.width+ie)&&(k(d),b()),d.positions[d.index++]=d.width+$,d.chars.push(P),d.width+=ie}u=P}return b(),e.align==="center"?k8(o):e.align==="right"?b8(o):e.align==="justify"&&C8(o),o}function k8(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width/2-t.width/2;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function b8(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width-t.width;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function C8(i){const e=i.width;for(let t=0;t<i.lines.length;t++){const s=i.lines[t];let o=0,l=s.spacesIndex[o++],u=0;const h=s.spacesIndex.length,p=(e-s.width)/h;for(let m=0;m<s.charPositions.length;m++)m===l&&(l=s.spacesIndex[o++],u+=p),s.charPositions[m]+=u}}function A8(i){if(i==="")return[];typeof i=="string"&&(i=[i]);const e=[];for(let t=0,s=i.length;t<s;t++){const o=i[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let h=l,d=u;h<=d;h++)e.push(String.fromCharCode(h))}else e.push(...Array.from(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let Va=0;class P8{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=i0(1e3)}getFont(e,t){var u;let s=`${t.fontFamily}-bitmap`,o=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,o=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,o=!1),!it.has(s)){const h=Object.create(t);h.lineHeight=0;const d=new $1({style:h,overrideFill:o,overrideSize:!0,...this.defaultOptions});Va++,Va>50&&st("BitmapText",`You have dynamically created ${Va} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),d.once("destroy",()=>{Va--,it.remove(s)}),it.set(s,d)}const l=it.get(s);return(u=l.ensureCharacters)==null||u.call(l,e),l}getLayout(e,t,s=!0){const o=this.getFont(e,t),l=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=Kn.graphemeSegmenter(e),h=S8(u,t,o,s);return this.measureCache.set(l,h),h}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){var p,m,y,x;let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:(p=e[2])==null?void 0:p.chars,resolution:(m=e[2])==null?void 0:m.resolution,padding:(y=e[2])==null?void 0:y.padding,skipKerning:(x=e[2])==null?void 0:x.skipKerning},Be(Xe,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t==null?void 0:t.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const o=t.style,l=o instanceof yo?o:new yo(o),u=t.dynamicFill??this._canUseTintForStyle(l),h=new $1({style:l,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),d=A8(t.chars);return h.ensureCharacters(d.join("")),it.set(`${s}-bitmap`,h),h.once("destroy",()=>it.remove(`${s}-bitmap`)),h}uninstall(e){const t=`${e}-bitmap`,s=it.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const N1=new P8;class b0 extends r0{constructor(e,t){super();const{textures:s,data:o}=e;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:h,source:d,rotate:p}=s[u.page],m=Ke.transformRectCoords(u,h,p,new lt),y=new $e({frame:m,orig:new lt(0,0,u.width,u.height),source:d,rotate:p});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){N1.install(e)}static uninstall(e){N1.uninstall(e)}}const vc={test(i){return typeof i=="string"&&i.startsWith("info face=")},parse(i){const e=i.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in e){const x=e[y].match(/^[a-z]+/gm)[0],_=e[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),k={};for(const b in _){const w=_[b].split("="),A=w[0],P=w[1].replace(/"/gm,""),E=parseFloat(P),M=isNaN(E)?P:E;k[A]=M}t[x].push(k)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=t.info,[l]=t.common,[u]=t.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const h=t.page;for(let y=0;y<h.length;y++)s.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const p=t.char;for(let y=0;y<p.length;y++){const x=p[y],_=parseInt(x.id,10);let k=x.letter??x.char??String.fromCharCode(_);k==="space"&&(k=" "),d[_]=k,s.chars[k]={id:_,page:parseInt(x.page,10)||0,x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xOffset:parseInt(x.xoffset,10),yOffset:parseInt(x.yoffset,10),xAdvance:parseInt(x.xadvance,10),kerning:{}}}const m=t.kerning||[];for(let y=0;y<m.length;y++){const x=parseInt(m[y].first,10),_=parseInt(m[y].second,10),k=parseInt(m[y].amount,10);s.chars[d[_]].kerning[d[x]]=k}return s}},U1={test(i){const e=i;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(i){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=i.getElementsByTagName("info")[0],s=i.getElementsByTagName("common")[0],o=i.getElementsByTagName("distanceField")[0];o&&(e.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=i.getElementsByTagName("page"),u=i.getElementsByTagName("char"),h=i.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let p=0;p<l.length;p++)e.pages.push({id:parseInt(l[p].getAttribute("id"),10)||0,file:l[p].getAttribute("file")});const d={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let p=0;p<u.length;p++){const m=u[p],y=parseInt(m.getAttribute("id"),10);let x=m.getAttribute("letter")??m.getAttribute("char")??String.fromCharCode(y);x==="space"&&(x=" "),d[y]=x,e.chars[x]={id:y,page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xOffset:parseInt(m.getAttribute("xoffset"),10),yOffset:parseInt(m.getAttribute("yoffset"),10),xAdvance:parseInt(m.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<h.length;p++){const m=parseInt(h[p].getAttribute("first"),10),y=parseInt(h[p].getAttribute("second"),10),x=parseInt(h[p].getAttribute("amount"),10);e.chars[d[y]].kerning[d[m]]=x}return e}},W1={test(i){return typeof i=="string"&&i.match(/<font(\s|>)/)?U1.test(et.get().parseXML(i)):!1},parse(i){return U1.parse(et.get().parseXML(i))}},T8=[".xml",".fnt"],E8={extension:{type:xe.CacheParser,name:"cacheBitmapFont"},test:i=>i instanceof b0,getCacheableAssets(i,e){const t={};return i.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},M8={extension:{type:xe.LoadParser,priority:jr.Normal},name:"loadBitmapFont",id:"bitmap-font",test(i){return T8.includes(dn.extname(i).toLowerCase())},async testParse(i){return vc.test(i)||W1.test(i)},async parse(i,e,t){const s=vc.test(i)?vc.parse(i):W1.parse(i),{src:o}=e,{pages:l}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const x=l[y].file;let _=dn.join(dn.dirname(o),x);_=Fc(_,o),u.push({src:_,data:h})}const d=await t.load(u),p=u.map(y=>d[y.src]);return new b0({data:s,textures:p},o)},async load(i,e){return await(await et.get().fetch(i)).text()},async unload(i,e,t){await Promise.all(i.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),i.destroy()}};class R8{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const I8={extension:{type:xe.CacheParser,name:"cacheTextureArray"},test:i=>Array.isArray(i)&&i.every(e=>e instanceof $e),getCacheableAssets:(i,e)=>{const t={};return i.forEach(s=>{e.forEach((o,l)=>{t[s+(l===0?"":l+1)]=o})}),t}};async function C0(i){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(i)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const F8={extension:{type:xe.DetectionParser,priority:1},test:async()=>C0("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(e=>e!=="avif")},G1=["png","jpg","jpeg"],L8={extension:{type:xe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...G1],remove:async i=>i.filter(e=>!G1.includes(e))},z8="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function ll(i){return z8?!1:document.createElement("video").canPlayType(i)!==""}const B8={extension:{type:xe.DetectionParser,priority:0},test:async()=>ll("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(e=>e!=="mp4"&&e!=="m4v")},j8={extension:{type:xe.DetectionParser,priority:0},test:async()=>ll("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(e=>e!=="ogv")},D8={extension:{type:xe.DetectionParser,priority:0},test:async()=>ll("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(e=>e!=="webm")},O8={extension:{type:xe.DetectionParser,priority:0},test:async()=>C0("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(e=>e!=="webp")},A0=class Ka{constructor(){this.loadOptions={...Ka.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{var u,h;let o=null,l=null;if((t.parser||t.loadParser)&&(l=this._parserHash[t.parser||t.loadParser],t.loadParser&&st(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),l||st(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!l){for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];if(p.load&&((u=p.test)!=null&&u.call(p,e,t,this))){l=p;break}}if(!l)return st(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(e,t,this),s.parser=l;for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];p.parse&&p.parse&&await((h=p.testParse)==null?void 0:h.call(p,o,t,this))&&(o=await p.parse(o,t,this)||o,s.parser=p)}return o})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...Ka.defaultOptions,...this.loadOptions,onProgress:t}:{...Ka.defaultOptions,...this.loadOptions,...t||{}},{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:d}=s;let p=0;const m={},y=Ja(e),x=In(e,b=>({alias:[b],src:b,data:{}})),_=x.reduce((b,w)=>b+(w.progressSize||1),0),k=x.map(async b=>{const w=dn.toAbsolute(b.src);m[b.src]||(await this._loadAssetWithRetry(w,b,{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:d},m),p+=b.progressSize||1,o&&o(p/_))});return await Promise.all(k),y?m[x[0].src]:m}async unload(e){const s=In(e,o=>({alias:[o],src:o})).map(async o=>{var h,d;const l=dn.toAbsolute(o.src),u=this.promiseCache[l];if(u){const p=await u.promise;delete this.promiseCache[l],await((d=(h=u.parser)==null?void 0:h.unload)==null?void 0:d.call(h,p,o,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?st("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&st(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,o){let l=0;const{onError:u,strategy:h,retryCount:d,retryDelay:p}=s,m=y=>new Promise(x=>setTimeout(x,y));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),o[t.src]=await this.promiseCache[e].promise;return}catch(y){delete this.promiseCache[e],delete o[t.src],l++;const x=h!=="retry"||l>d;if(h==="retry"&&!x){u&&u(y,t),await m(p);continue}if(h==="skip"){u&&u(y,t);return}throw u&&u(y,t),new Error(`[Loader.load] Failed to load ${e}.
${y}`)}}};A0.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let $8=A0;function ss(i,e){if(Array.isArray(e)){for(const t of e)if(i.startsWith(`data:${t}`))return!0;return!1}return i.startsWith(`data:${e}`)}function os(i,e){const t=i.split("?")[0],s=dn.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const N8=".json",U8="application/json",W8={extension:{type:xe.LoadParser,priority:jr.Low},name:"loadJson",id:"json",test(i){return ss(i,U8)||os(i,N8)},async load(i){return await(await et.get().fetch(i)).json()}},G8=".txt",H8="text/plain",V8={name:"loadTxt",id:"text",extension:{type:xe.LoadParser,priority:jr.Low,name:"loadTxt"},test(i){return ss(i,H8)||os(i,G8)},async load(i){return await(await et.get().fetch(i)).text()}},Y8=["normal","bold","100","200","300","400","500","600","700","800","900"],X8=[".ttf",".otf",".woff",".woff2"],q8=["font/ttf","font/otf","font/woff","font/woff2"],K8=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Q8(i){const e=dn.extname(i),o=dn.basename(i,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let l=o.length>0;for(const h of o)if(!h.match(K8)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const Z8=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function J8(i){return Z8.test(i)?i:encodeURI(i)}const ex={extension:{type:xe.LoadParser,priority:jr.Low},name:"loadWebFont",id:"web-font",test(i){return ss(i,q8)||os(i,X8)},async load(i,e){var s,o,l;const t=et.get().getFontFaceSet();if(t){const u=[],h=((s=e.data)==null?void 0:s.family)??Q8(i),d=((l=(o=e.data)==null?void 0:o.weights)==null?void 0:l.filter(m=>Y8.includes(m)))??["normal"],p=e.data??{};for(let m=0;m<d.length;m++){const y=d[m],x=new FontFace(h,`url(${J8(i)})`,{...p,weight:y});await x.load(),t.add(x),u.push(x)}return it.has(`${h}-and-url`)?it.get(`${h}-and-url`).entries.push({url:i,faces:u}):it.set(`${h}-and-url`,{entries:[{url:i,faces:u}]}),u.length===1?u[0]:u}return st("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){const e=Array.isArray(i)?i:[i],t=e[0].family,s=it.get(`${t}-and-url`),o=s.entries.find(l=>l.faces.some(u=>e.indexOf(u)!==-1));o.faces=o.faces.filter(l=>e.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),e.forEach(l=>{et.get().getFontFaceSet().delete(l)}),s.entries.length===0&&it.remove(`${t}-and-url`)}};function oh(i,e=1){var s;const t=(s=is.RETINA_PREFIX)==null?void 0:s.exec(i);return t?parseFloat(t[1]):e}function ah(i,e,t){i.label=t,i._sourceOrigin=t;const s=new $e({source:i,label:t}),o=()=>{delete e.promiseCache[t],it.has(t)&&it.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(st("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{i.destroyed||(st("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const tx=".svg",nx="image/svg+xml",rx={extension:{type:xe.LoadParser,priority:jr.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(i){return ss(i,nx)||os(i,tx)},async load(i,e,t){var s;return((s=e.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?sx(i):ix(i,e,t,this.config.crossOrigin)},unload(i){i.destroy(!0)}};async function ix(i,e,t,s){var w,A,P;const o=await et.get().fetch(i),l=et.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=((w=e.data)==null?void 0:w.width)??l.width,h=((A=e.data)==null?void 0:A.height)??l.height,d=((P=e.data)==null?void 0:P.resolution)||oh(i),p=Math.ceil(u*d),m=Math.ceil(h*d),y=et.get().createCanvas(p,m),x=y.getContext("2d");x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(l,0,0,u*d,h*d);const{parseAsGraphicsContext:_,...k}=e.data??{},b=new pi({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:d,...k});return ah(b,t,i)}async function sx(i){const t=await(await et.get().fetch(i)).text(),s=new _n;return s.svg(t),s}const ox=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Qi=null,Gc=class{constructor(){Qi||(Qi=URL.createObjectURL(new Blob([ox],{type:"application/javascript"}))),this.worker=new Worker(Qi)}};Gc.revokeObjectURL=function(){Qi&&(URL.revokeObjectURL(Qi),Qi=null)};const ax=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Zi=null;class P0{constructor(){Zi||(Zi=URL.createObjectURL(new Blob([ax],{type:"application/javascript"}))),this.worker=new Worker(Zi)}}P0.revokeObjectURL=function(){Zi&&(URL.revokeObjectURL(Zi),Zi=null)};let H1=0,_c;class lx{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Gc;t.addEventListener("message",s=>{t.terminate(),Gc.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){var s;return this._run("loadImageBitmap",[e,(s=t==null?void 0:t.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){_c===void 0&&(_c=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<_c&&(this._createdWorkers++,e=new P0().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:e,arguments:t,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[H1]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:H1++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const V1=new lx,ux=[".jpeg",".jpg",".png",".webp",".avif"],cx=["image/jpeg","image/png","image/webp","image/avif"];async function hx(i,e){var o;const t=await et.get().fetch(i);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${t.status} ${t.statusText}`);const s=await t.blob();return((o=e==null?void 0:e.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const T0={name:"loadTextures",id:"texture",extension:{type:xe.LoadParser,priority:jr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return ss(i,cx)||os(i,ux)},async load(i,e,t){var l;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await V1.isImageBitmapSupported()?s=await V1.loadImageBitmap(i,e):s=await hx(i,e):s=await new Promise((u,h)=>{s=et.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=i,s.complete?u(s):(s.onload=()=>{u(s)},s.onerror=h)});const o=new pi({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((l=e.data)==null?void 0:l.resolution)||oh(i),...e.data});return ah(o,t,i)},unload(i){i.destroy(!0)}},dx=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let wc,Sc;function fx(i,e,t){t===void 0&&!e.startsWith("data:")?i.crossOrigin=mx(e):t!==!1&&(i.crossOrigin=typeof t=="string"?t:"anonymous")}function px(i){return new Promise((e,t)=>{i.addEventListener("canplaythrough",s),i.addEventListener("error",o),i.load();function s(){l(),e()}function o(u){l(),t(u)}function l(){i.removeEventListener("canplaythrough",s),i.removeEventListener("error",o)}})}function mx(i,e=globalThis.location){if(i.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(i,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function gx(){const i=[],e=[];for(const t of dx){const s=ao.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;ll(s)&&(i.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:i,validVideoMime:e}}const yx={name:"loadVideo",id:"video",extension:{type:xe.LoadParser,name:"loadVideo"},test(i){if(!wc||!Sc){const{validVideoExtensions:s,validVideoMime:o}=gx();wc=s,Sc=o}const e=ss(i,Sc),t=os(i,wc);return e||t},async load(i,e,t){var d,p;const s={...ao.defaultOptions,resolution:((d=e.data)==null?void 0:d.resolution)||oh(i),alphaMode:((p=e.data)==null?void 0:p.alphaMode)||await Ip(),...e.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(m=>{const y=l[m];y!==void 0&&o.setAttribute(m,y)}),s.muted===!0&&(o.muted=!0),fx(o,i,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(i.startsWith("data:"))h=i.slice(5,i.indexOf(";"));else if(!i.startsWith("blob:")){const m=i.split("?")[0].slice(i.lastIndexOf(".")+1).toLowerCase();h=ao.MIME_TYPES[m]||`video/${m}`}return u.src=i,h&&(u.type=h),new Promise(m=>{const y=async()=>{const x=new ao({...s,resource:o});o.removeEventListener("canplay",y),e.data.preload&&await px(o),m(ah(x,t,i))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",y),o.appendChild(u)})},unload(i){i.destroy(!0)}},E0={extension:{type:xe.ResolveParser,name:"resolveTexture"},test:T0.test,parse:i=>{var e;return{resolution:parseFloat(((e=is.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:i.split(".").pop(),src:i}}},xx={extension:{type:xe.ResolveParser,priority:-2,name:"resolveJson"},test:i=>is.RETINA_PREFIX.test(i)&&i.endsWith(".json"),parse:E0.parse};class vx{constructor(){this._detections=[],this._initialized=!1,this.resolver=new is,this.loader=new $8,this.cache=it,this._backgroundLoader=new R8(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var l,u;if(this._initialized){st("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let h=e.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}const t=((l=e.texturePreference)==null?void 0:l.resolution)??1,s=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:(u=e.texturePreference)==null?void 0:u.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=Ja(e),o=In(e).map(h=>{if(typeof h!="string"){const d=this.resolver.getAlias(h);return d.some(p=>!this.resolver.hasKey(p))&&this.add(h),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,t);return s?u[o[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const o=this.resolver.resolveBundle(e),l={},u=Object.keys(o);let h=0;const d=[],p=()=>{t==null||t(d.reduce((y,x)=>y+x,0)/h)},m=u.map((y,x)=>{const _=o[y],k=Object.values(_),w=[...new Set(k.flat())].reduce((A,P)=>A+(P.progressSize||1),0);return d.push(0),h+=w,this._mapLoadToResolve(_,A=>{d[x]=A*w,p()}).then(A=>{l[y]=A})});return await Promise.all(m),s?l[e[0]]:l}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return it.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=it.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,t);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const h=o[u.src],d=[u.src];u.alias&&d.push(...u.alias),d.forEach(p=>{l[p]=h}),it.set(d,h)}),l}async unload(e){this._initialized||await this.init();const t=In(e).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=In(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{it.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,o)=>t.indexOf(s)===o),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const Ki=new vx;Lt.handleByList(xe.LoadParser,Ki.loader.parsers).handleByList(xe.ResolveParser,Ki.resolver.parsers).handleByList(xe.CacheParser,Ki.cache.parsers).handleByList(xe.DetectionParser,Ki.detections);Lt.add(I8,L8,F8,O8,B8,j8,D8,W8,V8,ex,rx,T0,yx,M8,E8,E0,xx);const Y1={loader:xe.LoadParser,resolver:xe.ResolveParser,cache:xe.CacheParser,detection:xe.DetectionParser};Lt.handle(xe.Asset,i=>{const e=i.ref;Object.entries(Y1).filter(([t])=>!!e[t]).forEach(([t,s])=>Lt.add(Object.assign(e[t],{extension:e[t].extension??s})))},i=>{const e=i.ref;Object.keys(Y1).filter(t=>!!e[t]).forEach(t=>Lt.remove(e[t]))});class fi extends Kc{constructor(e){e instanceof _n&&(e={context:e});const{context:t,roundPixels:s,...o}=e||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new _n,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new fi(this._context.clone()):(this._ownedContext=null,new fi(this._context))}lineStyle(e,t,s){Be(Xe,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return e&&(o.width=e),t&&(o.color=t),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(e,t){Be(Xe,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){Be(Xe,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==_n.defaultStrokeStyle.width||e.color!==_n.defaultStrokeStyle.color||e.alpha!==_n.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Be(Xe,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Be(Xe,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Be(Xe,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Be(Xe,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Be(Xe,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Be(Xe,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class _x extends Kc{constructor(e,t){const{text:s,resolution:o,style:l,anchor:u,width:h,height:d,roundPixels:p,...m}=e;super({...m}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=s??"",this.style=l,this.resolution=o??null,this.allowChildren=!1,this._anchor=new Ft({_onUpdate:()=>{this.onViewUpdate()}}),u&&(this.anchor=u),this.roundPixels=p??!1,h!==void 0&&(this.width=h),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,s=this.bounds.height,o=-t*this.anchor.x;let l=0;return e.x>=o&&e.x<=o+t&&(l=-s*this.anchor.y,e.y>=l&&e.y<=l+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function wx(i,e){let t=i[0]??{};return(typeof t=="string"||i[1])&&(Be(Xe,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:i[1]}),t}let ai=null,cr=null;function Sx(i,e){ai||(ai=et.get().createCanvas(256,128),cr=ai.getContext("2d",{willReadFrequently:!0}),cr.globalCompositeOperation="copy",cr.globalAlpha=1),(ai.width<i||ai.height<e)&&(ai.width=Ji(i),ai.height=Ji(e))}function X1(i,e,t){for(let s=0,o=4*t*e;s<e;++s,o+=4)if(i[o+3]!==0)return!1;return!0}function q1(i,e,t,s,o){const l=4*e;for(let u=s,h=s*l+4*t;u<=o;++u,h+=l)if(i[h+3]!==0)return!1;return!0}function kx(...i){let e=i[0];e.canvas||(e={canvas:i[0],resolution:i[1]});const{canvas:t}=e,s=Math.min(e.resolution??1,1),o=e.width??t.width,l=e.height??t.height;let u=e.output;if(Sx(o,l),!cr)throw new TypeError("Failed to get canvas 2D context");cr.drawImage(t,0,0,o,l,0,0,o*s,l*s);const d=cr.getImageData(0,0,o,l).data;let p=0,m=0,y=o-1,x=l-1;for(;m<l&&X1(d,o,m);)++m;if(m===l)return lt.EMPTY;for(;X1(d,o,x);)--x;for(;q1(d,o,p,m,x);)++p;for(;q1(d,o,y,m,x);)--y;return++y,++x,cr.globalCompositeOperation="source-over",cr.strokeRect(p,m,y-p,x-m),cr.globalCompositeOperation="copy",u??(u=new lt),u.set(p/s,m/s,(y-p)/s,(x-m)/s),u}const K1=new lt;class bx{getCanvasAndContext(e){const{text:t,style:s,resolution:o=1}=e,l=s._getFinalPadding(),u=Kn.measureText(t||" ",s),h=Math.ceil(Math.ceil(Math.max(1,u.width)+l*2)*o),d=Math.ceil(Math.ceil(Math.max(1,u.height)+l*2)*o),p=xo.getOptimalCanvasAndContext(h,d);this._renderTextToCanvas(t,s,l,o,p);const m=s.trim?kx({canvas:p.canvas,width:h,height:d,resolution:1,output:K1}):K1.set(0,0,h,d);return{canvasAndContext:p,frame:m}}returnCanvasAndContext(e){xo.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,s,o,l){var E,M,Y,N;const{canvas:u,context:h}=l,d=el(t),p=Kn.measureText(e||" ",t),m=p.lines,y=p.lineHeight,x=p.lineWidths,_=p.maxLineWidth,k=p.fontProperties,b=u.height;if(h.resetTransform(),h.scale(o,o),h.textBaseline=t.textBaseline,(E=t._stroke)!=null&&E.width){const $=t._stroke;h.lineWidth=$.width,h.miterLimit=$.miterLimit,h.lineJoin=$.join,h.lineCap=$.cap}h.font=d;let w,A;const P=t.dropShadow?2:1;for(let $=0;$<P;++$){const ie=t.dropShadow&&$===0,ae=ie?Math.ceil(Math.max(1,b)+s*2):0,te=ae*o;if(ie){h.fillStyle="black",h.strokeStyle="black";const ge=t.dropShadow,Me=ge.color,ut=ge.alpha;h.shadowColor=kt.shared.setValue(Me).setAlpha(ut).toRgbaString();const J=ge.blur*o,oe=ge.distance*o;h.shadowBlur=J,h.shadowOffsetX=Math.cos(ge.angle)*oe,h.shadowOffsetY=Math.sin(ge.angle)*oe+te}else{if(h.fillStyle=t._fill?rl(t._fill,h,p,s*2):null,(M=t._stroke)!=null&&M.width){const ge=t._stroke.width*.5+s*2;h.strokeStyle=rl(t._stroke,h,p,ge)}h.shadowColor="black"}let se=(y-k.fontSize)/2;y-k.fontSize<0&&(se=0);const ve=((Y=t._stroke)==null?void 0:Y.width)??0;for(let ge=0;ge<m.length;ge++)w=ve/2,A=ve/2+ge*y+k.ascent+se,t.align==="right"?w+=_-x[ge]:t.align==="center"&&(w+=(_-x[ge])/2),(N=t._stroke)!=null&&N.width&&this._drawLetterSpacing(m[ge],t,l,w+s,A+s-ae,!0),t._fill!==void 0&&this._drawLetterSpacing(m[ge],t,l,w+s,A+s-ae)}}_drawLetterSpacing(e,t,s,o,l,u=!1){const{context:h}=s,d=t.letterSpacing;let p=!1;if(Kn.experimentalLetterSpacingSupported&&(Kn.experimentalLetterSpacing?(h.letterSpacing=`${d}px`,h.textLetterSpacing=`${d}px`,p=!0):(h.letterSpacing="0px",h.textLetterSpacing="0px")),d===0||p){u?h.strokeText(e,o,l):h.fillText(e,o,l);return}let m=o;const y=Kn.graphemeSegmenter(e);let x=h.measureText(e).width,_=0;for(let k=0;k<y.length;++k){const b=y[k];u?h.strokeText(b,m,l):h.fillText(b,m,l);let w="";for(let A=k+1;A<y.length;++A)w+=y[A];_=h.measureText(w).width,m+=x-_+d,x=_}}}const Q1=new bx;class Cx extends _x{constructor(...e){const t=wx(e,"Text");super(t,yo),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof es?t.textureStyle:new es(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let s=0,o=0;if(this._style.trim){const{frame:l,canvasAndContext:u}=Q1.getCanvasAndContext({text:this.text,style:this._style,resolution:1});Q1.returnCanvasAndContext(u),s=l.width,o=l.height}else{const l=Kn.measureText(this._text,this._style);s=l.width,o=l.height}e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*o,e.maxY=e.minY+o}}Lt.add(Rg,Ig);const Vn={nom:{nomcomplet:"Test Hero"},niveauGlobal:1,classe:{1:{classeId:"fighter"}},pvActuels:12,pvMax:12,CA:16,caracs:{force:{FOR:16},dexterite:{DEX:14,modDEX:2},constitution:{CON:14}}},Ax=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<!-- Created with Inkscape (http://www.inkscape.org/) -->\r
\r
<svg\r
   width="174.61385mm"\r
   height="234.6797mm"\r
   viewBox="0 0 174.61385 234.6797"\r
   version="1.1"\r
   id="svg1"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   sodipodi:docname="gentil.svg"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#191919"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#bd2727ff"\r
     inkscape:document-units="mm"\r
     inkscape:zoom="0.72604517"\r
     inkscape:cx="331.24661"\r
     inkscape:cy="485.50698"\r
     inkscape:window-width="1920"\r
     inkscape:window-height="1017"\r
     inkscape:window-x="1912"\r
     inkscape:window-y="-8"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="layer1"\r
     showgrid="true">\r
    <inkscape:grid\r
       id="grid1"\r
       units="mm"\r
       originx="-17.307133"\r
       originy="-20.032634"\r
       spacingx="0.99999998"\r
       spacingy="1"\r
       empcolor="#0099e5"\r
       empopacity="0.30196078"\r
       color="#0099e5"\r
       opacity="0.14901961"\r
       empspacing="5"\r
       enabled="true"\r
       visible="true" />\r
  </sodipodi:namedview>\r
  <defs\r
     id="defs1" />\r
  <g\r
     inkscape:label="Calque 1"\r
     inkscape:groupmode="layer"\r
     id="layer1"\r
     transform="translate(-17.307132,-20.032634)">\r
    <path\r
       d="m 69.048457,20.142976 c -0.141111,0.105834 -1.234722,0.282223 -2.434166,0.352778 -2.504723,0.176389 -3.633611,0.740834 -4.445,2.293056 -0.352778,0.599722 -0.9525,1.622778 -1.411111,2.328333 -0.881945,1.340556 -2.046111,4.233334 -2.328334,5.891389 -0.105833,0.564445 -0.599722,2.2225 -1.093611,3.633611 -0.458611,1.446389 -1.093611,4.021667 -1.375833,5.785556 -0.282222,1.763888 -0.740833,3.421944 -1.023056,3.774721 -0.282222,0.3175 -0.599722,0.811389 -0.740833,1.093611 -0.141111,0.282223 0.07056,0.141112 0.458611,-0.352777 0.846667,-1.023056 0.9525,-0.740834 0.211667,0.670277 -0.282222,0.564445 -0.423333,1.093612 -0.282222,1.199445 0.105833,0.105833 -0.176389,0.811389 -0.635,1.516944 -0.740834,1.234722 -0.811389,1.27 -1.128889,0.564445 -0.176389,-0.388056 -0.881945,-0.987778 -1.516945,-1.305278 -1.093611,-0.529167 -1.305277,-0.529167 -2.434166,0.03528 -1.940278,0.917222 -4.233333,3.139722 -5.115278,4.974167 -0.670278,1.411111 -1.27,1.975555 -3.598333,3.457222 -3.033889,1.905 -5.750277,4.797777 -7.161388,7.584722 -0.458612,0.917222 -1.305278,2.116666 -1.869723,2.681111 -1.305277,1.340555 -3.139722,6.0325 -2.575277,6.596944 0.246944,0.246945 1.411111,0.423334 2.892777,0.388056 l 2.434167,-0.03528 -0.176389,1.093611 c -0.105833,0.599722 -0.352778,2.187222 -0.564444,3.563056 -0.176389,1.340555 -0.599723,2.751666 -0.917223,3.069166 -0.423333,0.458611 -0.493888,1.023056 -0.3175,2.257778 0.211667,1.763889 0.705556,2.610555 1.481667,2.610555 0.352778,0 0.423333,0.3175 0.246945,1.093611 -0.105834,0.635 -0.03528,1.199445 0.176388,1.340556 0.246945,0.141111 0.282223,0.987778 0.07056,2.681111 -0.176388,1.375833 -0.211666,2.822222 -0.105833,3.280833 0.246945,1.093611 -0.529167,3.774722 -1.340555,4.515556 -0.388056,0.3175 -0.670278,0.846666 -0.670278,1.199444 0,0.317504 -0.493889,0.740834 -1.234722,1.023054 -1.693334,0.59972 -2.081389,1.44639 -1.799167,4.1275 0.352778,3.35139 -0.282222,6.70278 -1.446389,7.69056 -1.128889,0.98778 -1.234722,2.61055 -0.282222,4.40972 0.3175,0.635 0.635,1.79917 0.705555,2.61056 0.529167,5.53861 0.529167,5.82083 -0.03528,6.0325 -0.3175,0.10583 -0.599722,0.21166 -0.670277,0.21166 -0.03528,0 -0.176389,-0.635 -0.3175,-1.44639 -0.176388,-1.02305 -0.423333,-1.51694 -0.917222,-1.62277 -0.529166,-0.14112 -0.705555,-0.49389 -0.705555,-1.30528 -0.03528,-2.11667 -2.575278,-6.17361 -3.633611,-5.75028 -1.023056,0.38806 -1.093611,2.54 -0.246945,4.86833 0.705556,1.79917 0.740834,2.2225 0.352778,2.96334 -0.246944,0.49389 -0.352778,1.30527 -0.246944,1.905 0.141111,0.70555 0,1.5875 -0.458612,2.57527 -0.388055,0.84667 -0.705555,2.2225 -0.705555,3.06917 0,1.51694 0,1.51694 -0.776111,0.9525 -2.081389,-1.44639 -2.187222,-1.44639 -1.940278,-0.0706 0.105833,0.70556 0.529167,1.72862 0.881945,2.25778 0.846666,1.16417 3.563055,7.51417 4.656666,10.83028 1.305278,3.98639 3.386667,7.83167 5.432778,9.91305 2.786944,2.89278 3.986389,2.46945 5.185833,-1.86972 1.058333,-3.81 0.917222,-5.57389 -0.635,-7.83166 -0.705556,-1.02306 -1.340556,-1.76389 -1.375833,-1.5875 -0.03528,0.17639 -0.176389,0.74083 -0.282223,1.27 -0.3175,1.37583 -0.670277,1.23472 -1.340555,-0.56445 l -0.564444,-1.55222 2.151944,0.17639 c 1.199444,0.0705 3.175,0.28222 4.374444,0.49389 2.434166,0.35278 3.739444,0.0705 4.303889,-1.05834 0.599722,-1.05833 0.458611,-2.08138 -0.3175,-2.8575 -0.881945,-0.88194 -1.305278,-1.94027 -2.010834,-4.7625 -0.246944,-1.16416 -0.846666,-2.75167 -1.305277,-3.52778 -0.705556,-1.16416 -0.811389,-1.69333 -0.564445,-2.99861 0.141111,-0.88194 0.529167,-2.15194 0.881945,-2.82222 1.164166,-2.18722 1.234722,-2.43417 1.234722,-3.52778 0,-1.23472 1.093611,-3.56305 2.116666,-4.58611 0.388056,-0.38805 0.705556,-0.98778 0.705556,-1.34055 0,-0.35278 0.246944,-0.9525 0.529167,-1.37584 0.3175,-0.45861 0.529166,-1.37583 0.458611,-2.11666 -0.03528,-0.74084 0.282222,-2.99862 0.705555,-5.04473 0.423334,-2.04611 0.9525,-4.58611 1.128889,-5.67972 0.246945,-1.19944 0.987778,-2.99861 1.905,-4.550832 0.846667,-1.375834 1.834444,-3.386667 2.187222,-4.445 0.352778,-1.058333 0.776111,-1.905 0.917222,-1.905 0.141112,0 0.529167,0.529167 0.846667,1.128889 0.3175,0.635 1.411111,2.434166 2.363611,3.951111 1.340556,2.046111 1.869722,3.280833 2.046111,4.691942 0.141111,1.05834 0.564445,2.32834 0.917222,2.82222 2.293056,3.24556 2.328334,4.37445 0.352778,7.09084 -0.670278,0.91722 -1.905,2.92805 -2.716389,4.445 -1.552222,2.96333 -1.552222,3.10444 -1.058333,9.03111 0.03528,0.28222 -0.105833,2.64583 -0.3175,5.22111 -0.352778,4.23334 -0.529167,4.97417 -1.658055,7.40834 -1.869723,3.95111 -1.940278,4.19805 -2.293056,7.65527 -0.211667,2.08139 -0.211667,4.09223 0.03528,5.89139 0.352778,2.61056 0.3175,2.92806 -0.917222,7.69056 -1.481667,5.57389 -1.516945,5.32694 1.199444,6.0325 0.881944,0.24694 1.658056,0.70555 1.905,1.12889 0.9525,1.79916 -0.599722,8.5725 -3.457222,14.99305 -1.058334,2.43417 -4.621389,7.16139 -5.185833,6.94972 -0.564445,-0.21166 -1.023056,0.14112 -1.693334,1.37584 -0.529166,0.9525 -1.058333,1.23472 -2.328333,1.34055 -0.246944,0.0353 -0.458611,0.21167 -0.458611,0.38806 0,0.17639 -0.3175,0.74083 -0.670278,1.27 -0.634999,0.88194 -0.634999,1.05833 -0.211666,1.905 0.458611,0.88194 0.352777,1.19944 -1.305278,4.72722 l -1.799166,3.81 -0.07055,5.46806 c -0.07056,7.76111 -0.458612,12.94694 -1.305278,17.85055 l -0.740834,4.30389 -1.552222,0.77611 c -0.846666,0.42333 -1.481666,0.84667 -1.375833,0.9525 0.07056,0.10583 -0.07056,0.81139 -0.352778,1.62278 -0.458611,1.30528 -0.458611,1.51694 0,1.86972 1.093611,0.77611 1.27,2.15195 0.917222,6.42056 -0.211666,2.25777 -0.493888,4.97416 -0.635,5.96194 -0.176388,1.02306 -0.211666,2.01083 -0.105833,2.15195 0.493889,0.74083 9.524999,4.7625 11.429999,5.07999 2.645833,0.45862 9.489722,-0.21166 11.006666,-1.09361 0.917222,-0.49388 1.058334,-0.84666 1.164167,-2.25777 0.07055,-1.19945 -0.105833,-2.01084 -0.599722,-2.82223 -0.776111,-1.27 -6.632222,-7.05555 -8.466667,-8.32555 -1.09361,-0.77611 -1.164165,-0.9525 -0.9525,-2.29306 0.141111,-0.81139 0.529167,-1.69333 0.9525,-1.97555 0.493889,-0.42334 0.776111,-1.19945 1.023056,-2.99861 0.388055,-3.21028 4.7625,-14.78139 8.290277,-21.94278 1.481667,-2.92806 2.822223,-6.17361 2.998611,-7.19667 0.635001,-3.38666 3.598334,-7.3025 6.138334,-8.07861 0.811388,-0.28222 1.552222,-0.81139 1.905,-1.41111 0.493888,-0.88194 0.740833,-0.98778 2.187222,-0.91722 2.081389,0.10583 3.139722,0.70555 6.35,3.56305 1.446388,1.30528 3.069166,2.43417 3.598333,2.54 0.529167,0.10584 1.199444,0.56445 1.516944,1.02306 0.846667,1.30528 3.245556,8.29028 3.527778,10.23055 0.282222,2.04612 1.516944,6.52639 1.940278,6.985 0.141111,0.14112 0.141111,0.74084 0,1.27 -0.176389,0.56445 -0.211667,1.09362 -0.105834,1.19945 0.105834,0.10583 0.03528,0.38805 -0.141111,0.635 -0.529166,0.635 -0.881944,2.99861 -0.529166,3.24555 0.176388,0.10584 0.246944,0.9525 0.176388,1.86973 -0.246944,2.50472 0.493889,7.86694 1.164167,8.60777 0.811389,0.91723 3.280833,1.16417 6.244177,0.67028 4.833056,-0.81139 6.596945,-0.81139 10.583333,-0.0353 2.610561,0.49389 5.185841,0.74084 8.219731,0.74084 3.98639,0 4.445,-0.0706 5.11528,-0.74084 0.56444,-0.56444 0.70555,-0.98777 0.52916,-1.83444 -0.10583,-0.56444 -0.38805,-1.23472 -0.56444,-1.48167 -0.17639,-0.24694 -2.04611,-0.88194 -4.1275,-1.41111 -2.11667,-0.52916 -4.02167,-1.16416 -4.30389,-1.37583 -0.52917,-0.42333 -2.50472,-1.48167 -4.974173,-2.71639 -3.421944,-1.65806 -5.679722,-4.19806 -4.974167,-5.53861 0.246945,-0.42333 0.105834,-1.27 -0.388055,-2.71639 -0.635,-1.905 -0.705556,-2.61056 -0.493889,-7.05556 0.141111,-2.71638 0.3175,-5.43277 0.423333,-5.99722 0.105834,-0.59972 0.3175,-3.38666 0.423334,-6.24416 0.141111,-3.13973 0.423333,-5.36223 0.635,-5.60917 0.599722,-0.56444 1.516944,-0.17639 3.280833,1.44639 1.552222,1.41111 2.504722,1.62278 2.504722,0.52917 0,-0.77612 -1.234722,-3.10445 -1.940278,-3.70417 -1.023055,-0.84667 -1.234722,-1.5875 -0.846666,-2.99861 0.211666,-0.74084 0.599722,-1.5875 0.881944,-1.83445 0.282222,-0.28222 0.493889,-0.81139 0.493889,-1.19944 0,-1.48167 3.139733,-0.59972 8.255003,2.39889 0.84667,0.49389 2.89278,0.59972 3.175,0.17639 0.10584,-0.17639 -1.05833,-1.37584 -2.54,-2.68111 -2.54,-2.29306 -6.84389,-4.79778 -8.255003,-4.79778 -0.3175,0 -0.705556,-0.17639 -0.811389,-0.35278 -0.105834,-0.21167 -0.670278,-0.35278 -1.234723,-0.35278 -0.811389,0 -1.058333,-0.21166 -1.375833,-1.12889 -0.317499,-0.84666 -0.493889,-1.02305 -0.811389,-0.70555 -1.128889,1.12889 -1.199445,0.0353 -0.352778,-4.62139 0.352778,-1.86972 1.128889,-3.06917 1.128889,-1.69333 0,1.5875 0.635,0.35277 0.776111,-1.55223 0.105833,-1.30527 0.423333,-2.29305 0.917222,-2.92805 2.751673,-3.42195 3.245563,-4.72722 3.245563,-8.71361 0,-1.72861 0.17639,-3.03389 0.42333,-3.28084 0.45861,-0.45861 0.49389,-3.56305 0.10584,-10.58333 -0.24695,-4.1275 -0.21167,-4.65667 0.3175,-4.65667 0.59972,0 0.77611,0.56445 1.05833,3.42195 0.24694,2.46944 1.16417,4.1275 3.66889,6.56167 2.18722,2.18722 3.03389,2.2225 1.94028,0.14111 -0.35278,-0.635 -1.02306,-1.905 -1.48167,-2.78695 -0.77611,-1.48166 -0.81139,-1.69333 -0.35278,-2.71639 0.3175,-0.67027 0.74083,-1.09361 1.16417,-1.09361 0.38805,0 1.19944,-0.17639 1.79916,-0.38805 2.01084,-0.74084 10.05417,1.65805 13.22917,3.91583 0.91722,0.635 1.23472,0.70556 2.36361,0.38806 0.74083,-0.21167 1.83444,-0.38806 2.46944,-0.38806 1.5875,0 4.97417,1.12889 6.70278,2.2225 1.34055,0.84667 1.94028,0.98778 5.29167,1.09361 5.78555,0.24695 15.98083,2.25778 19.685,3.91583 0.98777,0.42334 2.8575,0.88195 4.19805,0.98778 1.34056,0.14111 3.10444,0.56445 3.95111,0.9525 1.09361,0.56445 3.73945,1.02306 9.91306,1.76389 9.17222,1.16417 14.9225,1.62278 14.9225,1.30528 0,-0.49389 -3.66889,-2.01084 -10.58334,-4.445 -3.98639,-1.41111 -8.07861,-2.8575 -9.10166,-3.21028 -1.05834,-0.38805 -2.68111,-0.70555 -3.66889,-0.70555 -0.98778,0 -2.68111,-0.35278 -3.91584,-0.84667 -1.23472,-0.45861 -3.35138,-0.91722 -4.83305,-1.05833 -4.55083,-0.35278 -16.05139,-3.59834 -19.93194,-5.60917 -1.12889,-0.59972 -2.08139,-0.74083 -4.93889,-0.77611 -3.73945,0 -6.10306,-0.74084 -7.83167,-2.36361 -0.70556,-0.635 -1.16417,-0.70556 -4.445,-0.67028 -4.65666,0.10583 -11.21833,-1.27 -12.24138,-2.50472 -1.44639,-1.72861 -0.38806,-3.31611 3.31611,-5.00945 1.76389,-0.81139 2.96333,-1.79917 2.61055,-2.18722 -0.10583,-0.0706 -1.55222,0.17639 -3.24555,0.59972 -3.4925,0.88194 -6.49111,2.54 -8.21972,4.51556 -1.37584,1.65805 -2.32834,1.97555 -3.13973,1.05833 -0.49389,-0.56444 -0.52916,-0.84667 -0.21166,-1.5875 0.84666,-1.76389 0.21166,-6.6675 -1.12889,-8.78417 -0.705564,-1.12889 -1.340564,-6.87917 -1.09362,-9.63083 0.246945,-2.2225 0.176389,-2.54 -0.493888,-3.21028 -0.670278,-0.67028 -0.740834,-1.16417 -0.776112,-4.30389 0,-2.46944 -0.246944,-4.23333 -0.705555,-5.67972 C 96.988477,101.5993 96.600422,99.835411 96.45931,98.812356 96.318199,97.7893 95.965422,96.484022 95.683199,95.919578 95.400977,95.319856 94.836533,93.450133 94.483755,91.7568 c -0.599722,-3.033889 -0.599722,-3.139722 0.03528,-3.704166 0.811389,-0.740834 1.622778,-3.316111 1.340555,-4.339167 -0.105833,-0.423333 0.03528,-1.869722 0.282223,-3.210278 0.282222,-1.340555 0.529166,-3.245555 0.529166,-4.233333 0,-1.763889 0,-1.799167 0.705556,-1.164167 0.599722,0.529167 0.811389,0.564445 1.763889,0.176389 1.763896,-0.740833 2.116676,-1.516944 1.587506,-3.4925 -0.49389,-1.905 -1.05834,-3.069166 -1.69334,-3.457222 -1.093611,-0.705555 -1.305278,-2.116666 -0.776111,-4.974166 0.917222,-4.7625 0.599722,-8.149167 -0.846667,-8.748889 -0.3175,-0.105833 -1.904999,-0.3175 -3.563055,-0.458611 l -2.963333,-0.211667 -0.105834,-3.175 c -0.141123,-3.845214 -0.4939,-5.150492 -1.834456,-7.302436 -1.375833,-2.151944 -2.575288,-2.928055 -4.480288,-2.822222 l -1.552222,0.07056 0.07055,-1.340555 c 0.07056,-1.975556 -0.246939,-3.598334 -1.305273,-6.173612 -0.493889,-1.27 -0.987777,-2.610555 -1.058333,-2.963333 -0.282222,-1.375833 -1.058333,-3.175 -1.834444,-4.233333 -0.458611,-0.599722 -0.811389,-1.27 -0.811389,-1.446389 0,-0.388056 -3.139722,-3.351389 -4.092222,-3.845278 -0.811389,-0.458611 -4.550834,-0.881945 -4.833056,-0.564445 z m 26.35251,79.798332 c -0.282222,0.317502 -0.776111,-0.423333 -0.599722,-0.917222 0.211667,-0.529166 0.246944,-0.493889 0.458611,0.105834 0.141111,0.352777 0.211667,0.740833 0.141111,0.811388 z m -20.249454,68.615272 1.5875,0.74084 0.599722,2.99861 c 1.375833,6.73805 1.164166,11.04194 -0.635,12.73528 -0.458611,0.42333 -0.846667,1.02305 -0.846667,1.30527 0,0.28223 -0.3175,0.91723 -0.705555,1.48167 -0.811389,1.16417 -1.023056,4.02167 -0.388056,5.57389 0.246945,0.56444 0.388056,1.79917 0.3175,2.75167 l -0.105833,1.72861 -2.116667,-3.13972 c -1.834444,-2.75167 -5.609166,-6.56167 -6.491111,-6.56167 -0.141111,0 -0.458611,-0.38806 -0.670278,-0.88195 -0.246944,-0.49388 -0.811388,-1.05833 -1.305277,-1.23472 -0.493889,-0.17639 -0.917223,-0.56444 -0.917223,-0.88194 -0.211666,-2.64584 -0.176388,-2.82222 1.128889,-4.23334 2.116667,-2.29305 7.373056,-11.71222 7.373056,-13.22916 0,-0.45861 0.881944,-0.24695 3.175,0.84666 z"\r
       id="path3"\r
       style="fill:currentColor;fill-opacity:1;stroke:none;stroke-width:0.0352778" />\r
  </g>\r
</svg>\r
`,Px=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<svg\r
   width="2342"\r
   height="3750"\r
   viewBox="0 0 2342 3750"\r
   version="1.1"\r
   id="svg1"\r
   sodipodi:docname="mechant.svg"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <defs\r
     id="defs1" />\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#ffffff"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#d1d1d1"\r
     inkscape:zoom="0.21733333"\r
     inkscape:cx="1171.0123"\r
     inkscape:cy="1875"\r
     inkscape:window-width="1920"\r
     inkscape:window-height="1017"\r
     inkscape:window-x="-"\r
     inkscape:window-y="-8"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="svg1" />\r
  <path\r
     fill-rule="nonzero"\r
     fill="#000000"\r
     fill-opacity="1"\r
     d="m 1179.4102,3716.9922 c -17.3907,-74.8555 -35.9414,-120.9844 -69.0313,-171.7774 -30.6094,-46.9726 -82.0898,-92.3789 -115.62499,-102 -9.15235,-2.625 -10.1875,-2.039 -14.46875,8.211 -2.53907,6.0703 -9.29688,27.6328 -15.01954,47.9101 -11.40625,40.4102 -25.3125,77.6563 -29,77.6563 -1.29296,0 -4.19531,-12.1133 -6.44921,-26.918 -6.85938,-45.0625 -25.47266,-111.832 -39.1875,-140.5703 -15.55469,-32.5898 -37.56641,-58.125 -60.26954,-69.918 -13.26171,-6.8906 -21.32421,-8.6875 -39.5039,-8.7929 -26.72266,-0.1563 -41.25781,5.8086 -60.45703,24.8164 -14.30469,14.164 -16.1836,14.9531 -16.28516,6.8594 -0.14062,-11.0079 -12.54687,-33.0313 -25.9375,-46.0235 -52.17578,-50.6328 -129.63672,-52.4961 -178.97266,-4.3008 -10.42578,10.1836 -21.48828,22.1836 -24.58203,26.6719 -5.5625,8.0625 -5.60937,7.9258 -4.17187,-11.4219 0.92187,-12.4336 11.65625,-51.1172 29.42578,-106.0351 62.49609,-193.1406 112.14844,-389.7969 155.69141,-616.6485 18.38671,-95.7812 35.44921,-222.3007 35.53125,-263.4609 l 0.0391,-17.1289 h -13.9961 c -32.30859,0 -86.14843,-21.6016 -135.19531,-54.2305 C 451.2891,2202.9102 384.21879,2073.8789 376.1602,1931.6914 l -2.07813,-36.6133 -92.28125,-185.9687 C 231.04687,1606.8203 167.20703,1474.6797 139.93359,1415.4609 76.816406,1278.4102 44.253906,1214.0586 17.546875,1173.6094 1.621094,1149.4805 -2.457031,1141.1289 1.300781,1140.3281 c 9.125,-1.9375 67.613281,12.9532 128.253909,32.6524 63.97656,20.789 114.91015,41.039 149.80859,59.5781 11.91406,6.3203 22.19141,10.9727 22.83203,10.332 0.64453,-0.6406 -6.85156,-34.75 -16.65625,-75.8008 -39.96484,-167.3398 -42.8164,-188.92964 -42.79297,-324.23043 0.0117,-82.66015 1.15625,-109.98046 5.83985,-139.60937 5.70703,-36.10156 23.48047,-112.28125 28.19531,-120.85156 2.13672,-3.87891 46.05469,69.26172 73.13281,121.80078 4.625,8.97265 11.3086,19.98047 14.85938,24.46094 l 6.44922,8.14843 7.98046,-17.9375 C 383.59375,709.01172 394.86328,683.32031 404.25,661.78125 442.76172,573.42969 496.08984,474 550.375,389.35156 c 9.78125,-15.26172 42.82031,-62.97265 73.42187,-106.04297 92.47657,-130.14843 130.32813,-180.25 132.13282,-174.89843 0.52734,1.57031 -3.46485,20.37109 -8.8711,41.78906 C 721.60937,251 718.21094,332 737.92187,367.83984 c 6.26954,11.39844 9.09766,13.5 19.33985,14.35157 15.53515,1.29687 20.58203,-1.5 82.62109,-45.72266 88.19531,-62.85938 122.33594,-82.6875 262.98829,-152.70703 50.1602,-24.97266 103.6289,-53.5 118.8008,-63.40234 40.8789,-26.64063 78.0976,-63.898442 97.6562,-97.757818 18.8321,-32.570312 19.3516,-32.203124 22.7032,16.007813 4.6406,66.839845 14.1093,105.718745 36.3984,149.460935 39.6289,77.75781 131.8516,149.3711 209.5,162.69141 26.8906,4.60937 41.2109,1.53906 61.5508,-13.20313 14.6797,-10.6289 35.6992,-47.6875 45.5781,-80.34765 10.5898,-35.05078 6.3516,-154.75 -7.5391,-212.890628 -0.9687,-4.039062 -0.3476,-7.339843 1.3711,-7.339843 5.0391,0 37.711,72.480471 57.3477,127.238281 9.9805,27.82031 29.4219,85.8125 43.2031,128.88281 29.3477,91.63672 46.9688,137.10938 72.8789,188.08985 19.2891,37.9375 83.0508,148.6289 89,154.48828 2.2188,2.1914 5.0313,0.57031 8.5195,-4.89844 19.4883,-30.47266 67.8711,-61.78125 106.2383,-68.76172 30.1407,-5.46875 31.6211,-2.66016 10.6211,20.03125 -22.9492,24.77734 -41.9375,63.57813 -49.4179,100.9375 -6.1602,30.76172 -5.543,104.87109 1.8984,228.39063 6.1016,101.17189 1.6406,283.24219 -8.4883,346.44139 l -1.9297,12.0078 35.5469,-20.2773 c 63.1797,-36.0625 178.2109,-81.5899 255.332,-101.082 17.0508,-4.3086 31.5782,-7.3204 32.3008,-6.6875 0.7188,0.6289 -6.7226,11.8085 -16.5312,24.8476 -42.1719,56.0508 -67.0704,92.3399 -95.8086,139.6328 -20.2422,33.3086 -84.3907,159.8594 -122.0118,240.6875 -34.7109,74.5703 -100.9687,208.5625 -127.4492,257.7422 l -23.3711,43.3789 8.5899,35.9297 c 16.332,68.2813 18.1992,120.6406 6.5,181.9883 -25.9492,136.0625 -111.0977,238.8125 -220.3477,265.8828 -25.1523,6.2305 -61.0625,6.8594 -84.3633,1.4805 -9.0976,-2.1016 -17.3789,-2.9805 -18.3984,-1.961 -4.8398,4.8282 8.7109,166.6875 23.0195,275.0703 17.5508,132.9375 27.0586,180.9141 70.461,355.5157 28.9687,116.5781 29.8789,119.8476 68.6992,247.1328 18.5117,60.7148 32.0703,110.7187 31.4101,115.8242 l -1.1796,8.9883 -4.2696,-8.5586 c -7.6523,-15.3281 -27.9804,-24.0664 -55.9804,-24.0664 -21.9102,0 -27.3789,1.3554 -49.5,12.2851 -29.7813,14.7227 -53.0586,38.4688 -58.8204,60.0157 -2.0898,7.7851 -4.5898,14.0351 -5.5585,13.8867 -0.9727,-0.1485 -9.1524,-9.2617 -18.1797,-20.2461 -20.6914,-25.1797 -39.4102,-35.2813 -69.2227,-37.336 -60.5976,-4.1835 -103.5703,40.6055 -123.25,128.4571 -9.0703,40.4883 -17.8281,95.0742 -17.8594,111.2929 -0.01,5.8321 -1.3086,10.6016 -2.8906,10.6016 -4.5898,0 -24.7695,-44.2031 -37.9805,-83.1992 -6.6875,-19.7383 -14.9375,-41.3984 -18.3476,-48.1367 l -6.1992,-12.2461 -11.3125,4.7226 c -43.5196,18.1836 -98.4805,81.2813 -124.461,142.8907 -14.9687,35.4882 -28.9883,82.4218 -37.3086,124.8437 -3.8711,19.7422 -8.1406,37.9609 -9.5,40.4883 -1.4882,2.8008 -5.8398,-9.9649 -11.1093,-32.625 z m 252.4492,-526.6289 c 3.8906,-143.336 6.4297,-182.332 19.8515,-305.0625 18.1993,-166.4805 34.3594,-261.8906 58.8282,-347.4727 14.3515,-50.1875 37.332,-110.7578 52.6015,-138.6679 5.3985,-9.8711 7.5391,-15.7383 4.7696,-13.0508 -6.1797,6.0117 -51.3204,90.9023 -63.0313,118.5195 -56.9883,134.5508 -90.5781,340.2422 -97.3281,596.0117 -3.1602,119.4805 5.8008,284.1328 17.1094,314.8203 1.3281,3.6055 2.7382,-17.6718 3.1289,-47.2812 0.3906,-29.6094 2.2304,-109.625 4.0703,-177.8164 z m -476.23831,206.4961 c 0,-2.168 2.36719,-23.0938 5.25782,-46.4922 4.29687,-34.7774 4.93359,-63.4024 3.49218,-156.7422 -1.72656,-111.3477 -5.07812,-159.8398 -20.32031,-293.6406 -22.0625,-193.7344 -77.27344,-378.336 -148.32812,-495.9727 -9.19532,-15.2304 -17.26172,-27.6914 -17.92188,-27.6914 -0.66016,0 3.71484,10.6485 9.72266,23.6602 36.0039,77.9804 83.30859,259.0898 109.29297,418.4375 28.6875,175.9179 46.22265,350.1601 50.98046,506.5312 1.26563,41.7227 3.54688,75.8594 5.06641,75.8594 1.51563,0 2.75781,-1.7773 2.75781,-3.9492 z m 707.76951,-177.1328 c -3.2617,-23.3282 -9.0117,-67.375 -12.789,-97.8789 -12.5821,-101.6602 -23.0625,-175.3789 -37.543,-264.2774 -7.8984,-48.4531 -16.0703,-100.207 -18.168,-115.0117 -9.4101,-66.6992 -7.3203,-3.0469 3.7891,115.0117 8.3789,88.9766 17.1406,155.0156 30.7617,231.7617 16.3399,92.086 35.4883,177.8164 38.8594,173.9766 0.5586,-0.6406 -1.6406,-20.2539 -4.9102,-43.582 z m -949.50779,-83.1953 c 16.32422,-93.6016 27.94922,-209.0079 31.05078,-308.3243 1.99219,-63.6757 -0.17187,-59.7031 -12.4375,22.836 -11.72656,78.9179 -28.77734,273.2695 -27.84375,317.375 0.34766,16.3008 1.54688,12.1523 9.23047,-31.8867 z m 514.98829,-8.211 c 22.2187,-19.0234 25.4883,-43.332 8.8008,-65.5586 -16.1133,-21.4648 -45.2617,-26.3398 -66.6133,-11.1367 -38.3867,27.3398 -18.0898,88.168 29.4414,88.168 12.3984,0 17.2617,-1.9649 28.3711,-11.4727 z m -13.7617,-365.2578 c 18.5625,-10.875 33.1406,-28.2422 45.1797,-53.793 8.6718,-18.3906 10.0625,-24.9882 9.9922,-47.4609 -0.1016,-30.0078 -6.9805,-48.8867 -26.5196,-72.7383 -42.4531,-51.8008 -123.2617,-33.3008 -142.8711,32.6914 -6.3203,21.2891 -6.3906,61.8086 -0.1523,82.8281 16.9101,56.9336 70.3711,84.2618 114.3711,58.4727 z m 110.8203,-103.7031 c 13.6289,-29.9688 22.25,-69.7578 22.4609,-103.5899 0.1602,-26.8281 -0.9687,-33.4804 -8.3906,-49.5078 -18.2109,-39.3125 -52.2109,-64.4336 -90.9414,-67.2031 -21.3672,-1.5273 -22.9492,-1.0977 -49.7695,13.5195 -34.418,18.7617 -47.1289,19.6836 -67.5703,4.8711 -45.0391,-32.6289 -88.5391,-30.6875 -124.0782,5.5196 -7.82419,7.9726 -15.46873,14.5 -16.98826,14.5 -3.83984,0 -17.79687,-31.668 -20.48047,-46.4688 -2.41796,-13.3203 0.16016,-28.5703 4.82422,-28.5703 1.61328,0 6.10938,9.5391 9.99219,21.1992 3.87891,11.6719 7.77344,21.2109 8.65234,21.2109 0.87891,0 8.46878,-5.789 16.85938,-12.8789 21.6719,-18.2617 43.0195,-26.9296 66.3906,-26.9296 16.3203,0 24.3086,2.3906 51.0313,15.1992 l 31.6875,15.1992 24.4297,-10.4688 c 55.5898,-23.8007 110.25,-13.0898 153.3711,30.0274 16.539,16.543 32.2812,44.8125 35.9101,64.4726 1.8594,10.0704 2.5899,10.8594 4.8516,5.3204 30.8398,-75.6719 66.789,-146.0704 97.039,-190.0313 23.0274,-33.4492 56.0079,-63.6211 79.6172,-72.8398 17.2735,-6.7383 24.9414,-7.4883 81.0625,-7.9297 66.7188,-0.5196 81.5196,-2.8907 114.4492,-18.2696 44.629,-20.8515 80.8985,-57.6914 105.6993,-107.3515 26.0507,-52.1797 34.0898,-90.3711 34,-161.5 -0.078,-57.7891 -3.25,-84.5899 -19.6993,-166.3985 -21.1679,-105.3515 -21.4609,-171.0312 -1.289,-290.3593 19.039,-112.6211 19.1992,-140.1211 1.2578,-213.6133 -25.0586,-102.6367 -62.8984,-173.5195 -126.4375,-236.8399 -57.4922,-57.289 -123.7109,-96.88668 -205.8594,-123.07809 C 1489.1992,921 1462.5703,916.85156 1422.0781,918.5 c -38.1992,1.57031 -54.3086,7.64062 -80.7578,30.46094 -25.0586,21.61718 -48.6406,78.78906 -76.5586,185.61716 l -7.6015,29.0703 -13.4297,-22.5898 c -30.0899,-50.6602 -95.6211,-94.6602 -190.2305,-127.7383 -85.77734,-29.99999 -150.83984,-40.78905 -244.69922,-40.62108 -76.19531,0.15234 -114.875,5.90234 -168.39062,25.01953 C 568,1023.6016 519.32422,1062.7109 494.09375,1115.3008 c -26.625,55.4805 -32.33984,108.2773 -29.84375,275.6875 1.03125,69.0898 1.22656,124.1523 0.43359,122.3515 -1.96875,-4.4609 -23.82422,-162.3203 -27.78125,-200.6484 -4.76953,-46.2617 -4.02734,-122.2812 1.50782,-154.0117 5.64453,-32.3594 24.76562,-89.2305 37.05468,-110.1992 11.125,-18.9805 42.41407,-56.30081 60.10157,-71.67191 56.8164,-49.38672 122.34375,-72.59765 223.70312,-79.23828 48.76953,-3.19922 56.28906,-4.39844 54.91016,-8.80859 -0.87891,-2.82031 -8.45703,-21.89063 -16.84375,-42.39063 -16.83985,-41.16015 -28.78516,-89.58984 -34.03516,-137.97265 -4.05859,-37.38672 -4.15625,-96.07813 -0.17578,-105.33985 2.27344,-5.29687 2.84766,-4.29687 3.03516,5.26172 0.32812,16.98828 18.11718,113.19141 27.84375,150.60938 13.96875,53.71093 46.52343,139.12109 53.20312,139.55078 1.30859,0.0898 17.79688,2.10937 36.63672,4.5 18.84375,2.3789 34.63672,4.00781 35.10156,3.62109 0.46485,-0.39062 -3.46875,-11.17187 -8.73828,-23.96094 -19.42969,-47.10937 -42.05859,-133.53906 -50.56641,-193.12109 -9.62109,-67.39062 -15.23828,-183.39844 -9.0664,-187.21094 1.4375,-0.88672 6.70312,25.8125 11.69922,59.35157 23.42968,157.30859 33.05078,203.39843 59.07422,283.01171 22.79296,69.73829 15.39062,61.48829 71.80859,80.06641 68.50395,22.57031 126.62505,52.65234 179.18355,92.76172 15.2188,11.6211 29,21.1211 30.6094,21.1211 1.6602,0 1.8711,-6.7109 0.4805,-15.5 -1.3399,-8.5195 -4.1289,-42.66016 -6.1992,-75.85157 -4.211,-67.67969 -13.3907,-162.50781 -23.0196,-237.94922 -3.5312,-27.6914 -5.8125,-50.96094 -5.0625,-51.71094 2.6329,-2.6289 21.5235,63.10157 27.9414,97.16016 10.8399,57.55078 13.3516,89.08203 15.2188,190.87109 1.582,86.71098 2.4922,99.51958 8.0195,112.32028 3.5235,8.1485 7.4102,13.1289 8.9102,11.418 1.4726,-1.6601 6.0625,-16.2383 10.1914,-32.3906 8.3789,-32.7578 21.4922,-68.63674 43.7187,-119.67971 23.7618,-54.58984 26.293,-68.78906 26.3008,-147.85937 0,-72.57813 -3.4883,-115.6875 -16.6289,-205.55078 -8.9492,-61.12891 -38.0312,-207.4375 -51.8906,-261.00782 -0.9414,-3.62109 0.7617,-2.21093 3.8008,3.16797 27.3593,48.26172 59,171.13282 77.75,301.89063 16.039,111.92969 17.7187,172.16015 6.4609,231.65234 -2.5508,13.45703 -4.6328,24.53906 -4.6328,24.62891 0,0.0781 10.9297,-5.17969 24.293,-11.69922 28.3984,-13.85156 65.2773,-22.72266 94.457,-22.72266 48,0 110.8711,16.92188 167.3633,45.05078 107.2695,53.40235 184.0195,129.41013 239.457,237.17193 23.1524,45 22.8399,41.4101 -4.0781,-47.3125 -30.4492,-100.32818 -36.75,-134.62896 -36.5625,-199.01958 0.1133,-39.21094 1.5117,-57.82031 5.1211,-68.50781 l 4.9609,-14.67188 2.2305,26.08984 c 6.1992,72.40235 17.6484,138.17969 34.539,198.40233 19.6016,69.8867 42.5704,175.5899 48.879,224.8672 3.621,28.2422 6.9531,74.7422 7.4101,103.3399 0.4609,28.6093 1.8399,50.2304 3.0703,48.0507 3.5391,-6.3007 21.5899,-120.7187 25.5508,-161.9414 5.9102,-61.6679 7.8984,-226.61716 3.4492,-287.11716 -7.3398,-99.88282 -29.6797,-190.25 -63.3789,-256.3711 l -14.832,-29.10937 -0.2188,22.83984 c -0.3007,31.21094 -5.9492,82.60938 -9.8007,89.21094 -2.2774,3.89062 -3.1875,-0.53125 -3.2696,-15.80078 -0.2773,-54.83985 -15.8906,-108.83985 -55.6484,-192.5 -28.582,-60.14063 -49.2813,-109.46875 -60.2617,-143.55078 -3.1797,-9.8711 -6.2383,-18.48828 -6.8086,-19.14844 -0.5703,-0.67188 -7.3516,4.20703 -15.0586,10.83984 -17.2422,14.8086 -53.8321,32.5586 -76.9922,37.34766 -24.9688,5.17187 -69.1797,4.40234 -95.8594,-1.66797 -44.8008,-10.19141 -83.2305,-29.62109 -128.289,-64.87109 -62.4219,-48.83985 -93.2305,-93.89063 -108.1211,-158.08985 -2.7305,-11.73828 -5.4883,-21.89062 -6.1485,-22.55078 -0.6523,-0.64844 -13.3906,5.44141 -28.2929,13.53906 -14.8985,8.10157 -59.3985,28.65235 -98.879,45.66016 -174.10152,75.03125 -254.00386,120.72266 -363.22261,207.74219 -27.48047,21.89844 -55.1836,41.98828 -61.56641,44.66015 -29.54687,12.33985 -66.04687,-8.82031 -87.19531,-50.55078 -8.75391,-17.26953 -18.125,-57.89062 -18.33985,-79.48047 l -0.13671,-14.00781 -7.89063,22.83985 c -17.38281,50.32031 -21.99219,78.25 -21.80859,132.13671 0.35937,104.04297 24.70312,220.21094 67.28906,321.10157 18.46875,43.76172 18.64453,44.32031 13.90625,44.32031 -4.48047,0 -25.25391,-32.60938 -41.46875,-65.08984 -23.32422,-46.73047 -51.96094,-131.92969 -66.39844,-197.55079 -7.16797,-32.58984 -12.86328,-95 -10.41406,-114.17968 l 2.08203,-16.32813 -13.63281,22.83985 c -31.75391,53.17968 -63.24219,126.92968 -97.83594,229.16015 -26.28906,77.66797 -34.85547,96.83985 -50.46484,112.91797 -14.48438,14.91016 -27.87891,15.98047 -41.14063,3.26953 l -9.02344,-8.64844 1.48047,11.09766 c 0.81641,6.10156 3.76953,34.58203 6.5625,63.29297 2.79297,28.71875 9.60938,82.30855 15.14844,119.08985 9.47266,62.8789 10.16406,73.918 11.5625,184.3398 0.82031,64.6094 0.75781,116.7305 -0.13281,115.8282 -1.8711,-1.8789 -9.66016,-66.4805 -17.10938,-141.9297 C 367.98047,1046.4102 353.51953,961.58984 326.375,865.69922 317.48437,834.30078 308.64844,802 306.74219,793.92187 c -5.32813,-22.52343 -1.75,137.27735 4.45703,199.01954 6.73047,66.99999 18.66406,146.99999 30.90625,207.17969 11.53125,56.6875 11.94922,58.207 46.29687,167.8281 58.89063,187.9727 70.33594,263.5508 66.24219,437.4102 -1.89844,80.4492 -1.42969,94.2695 4.52344,133.7617 17.55078,116.418 61.64453,200.2383 134.25781,255.2187 45.15234,34.1915 91.67969,50.8711 151.75391,54.4219 49.69922,2.9297 58.85156,6.5196 89.80078,35.168 21.3789,19.8008 68.35547,80.6797 107.24609,138.9805 35.01563,52.5 72.19534,128.8711 92.39454,189.7812 l 17.25,52.0391 1.9375,-28.1211 c 1.4531,-21.0391 4.1211,-32.5899 10.6406,-45.9102 22.8399,-46.6679 83.3594,-77.1679 134.5508,-67.8086 54.8984,10.0313 93.3086,47.8985 105.3203,103.8399 8.9883,41.8789 10.9414,49.7578 12.3399,49.7578 0.8086,0 4.9804,-7.707 9.2695,-17.1289 z m -159.8594,-285.9375 c -29,-7.5508 -63.1211,-34.8516 -80.9414,-64.7617 -8.3594,-14.0196 -11.707,-17.1016 -16.9375,-15.6094 -3.5898,1.0195 -23.7812,3.5195 -44.8711,5.539 -21.082,2.0313 -38.33202,4.9297 -38.33202,6.4493 0,7.6406 -7.60937,1.1523 -13.01953,-11.0977 -23.05078,-52.1719 2.92187,-130.7226 50.54295,-152.8516 18.8594,-8.7617 33.6602,-7.8398 51.0469,3.1915 24.3633,15.4375 35.1211,39.8789 41.832,95.0078 1.8594,15.25 5.6211,34.3398 8.3477,42.4218 6.3515,18.75 24.8828,44.0586 38.3711,52.3907 17.582,10.8593 24.1211,11.1484 38.332,1.75 25.8477,-17.1016 42.2969,-49.3321 48.6172,-95.2032 4.793,-34.75 11.6328,-54.1992 25.4297,-72.2773 l 11.5508,-15.1211 -8.3985,-7.2187 c -16.9101,-14.543 -1.1601,-14.9415 32.7305,-0.8399 41.1484,17.1367 59.3906,41.7969 68.1992,92.2383 5.211,29.7891 1.8594,69.6601 -7.3594,87.4609 -5.0312,9.7383 -5.6992,10.0782 -8.1914,4.0977 -1.5,-3.5664 -5.6211,-13.4492 -9.1601,-21.9375 l -6.4297,-15.4414 -15.6406,6.9219 c -15.9883,7.0781 -45.8203,9.75 -58.1602,5.1992 -5.75,-2.1094 -7.2187,-0.4492 -11.0703,12.5898 -6.1602,20.8711 -22.0469,40.7305 -39.418,49.2578 -16.5,8.1016 -42.4023,11.6602 -57.0703,7.8438 z m 158.2383,-113.9922 c 23.1133,-16.668 24.582,-48.5195 3.2227,-69.8906 -16.211,-16.1993 -26.4297,-16.2188 -41.6524,-0.09 -19.6992,20.8906 -26.3789,49.5 -15.2578,65.3711 9.8594,14.0899 37.2891,16.4414 53.6875,4.6094 z m -255.8789,1.1797 c 8.5508,-3.5781 13.1406,-8.6094 18.1406,-19.9102 7.4688,-16.8789 6.4805,-30.4375 -3.6601,-50.1992 -17.2813,-33.6992 -45.5586,-37.0781 -64.9688,-7.7812 -17.1211,25.8515 -16.2812,46.3203 2.6484,64.4531 7.1993,6.8984 26.3399,16.6562 35.4688,18.0781 0.5,0.078 6.0703,-2.0117 12.3711,-4.6406 z m -385.56251,-65.1289 c -22.03125,-5 -47.78907,-17.0391 -69.1836,-32.3399 -17.65234,-12.6211 -45.46875,-49.0195 -60.24609,-78.832 -17.97656,-36.2695 -17.69922,-41.1367 0.93359,-16.3086 48.14453,64.1406 95.76953,97.1406 167.28125,115.8906 18.02735,4.7188 27.52735,8.6602 25.58594,10.5977 -5.19141,5.1914 -43.3125,5.7812 -64.37109,0.9922 z m 926.86331,-3.4024 c -37.211,-8.0976 -88.6914,-33.207 -105.9492,-51.6797 -5.2305,-5.5976 -8.9727,-10.707 -8.3204,-11.3593 0.6485,-0.6485 14.1602,3.2226 30.0196,8.6015 66.8593,22.6602 132.289,27.9805 175.6679,14.3086 41.6016,-13.1094 92.711,-47.6289 120.6914,-81.5078 13.4493,-16.2812 15.8204,-12.6211 5.3204,8.1797 -44.0704,87.3086 -130.4805,132.3984 -217.4297,113.457 z m -395.0196,-32.7187 c 5.2696,-20.5313 8.2383,-114.668 4.8399,-153.7305 -3.6719,-42.0898 -2.0195,-105.2695 2.9805,-114.1992 1.8085,-3.2383 6.1484,5.9609 13.5703,28.8086 6,18.4609 13.3398,39.3203 16.3203,46.3633 l 5.4062,12.789 7.3711,-11.9218 c 18.8906,-30.5586 127.1602,-124.4883 232.0313,-201.2969 167.7578,-122.8633 214.2695,-150.0508 256.6797,-150.0508 22.6914,0 33.6992,9.3789 33.6992,28.7187 0,17.2813 -12.3008,33.4102 -44.0508,57.7383 -14.0469,10.7735 -30.8086,24.4922 -37.2383,30.5117 -11.1289,10.3907 -11.1914,10.6016 -1.5,4.1407 24.6914,-16.4297 93.0586,-49.3321 102.5078,-49.3321 15.8516,0 10.9922,9.3829 -11.5781,22.3516 -124.8906,71.7813 -165.8711,100.8984 -235.0508,167.0313 -24.0976,23.039 -53.5586,48.8398 -65.4687,57.3398 l -21.6524,15.4492 14.25,4.1992 c 26.711,7.8907 61.711,11.8789 88.2305,10.0586 67.9727,-4.6562 113.3828,-51.289 135.0117,-138.6562 4.1602,-16.7813 9.3086,-32.6133 11.4414,-35.1914 3.9492,-4.7617 35.1172,-15.5117 56.7188,-19.5586 l 11.8984,-2.2305 -1.9375,35.457 c -4.4805,82.4414 -14.3398,131.7618 -34.8125,174.1329 -45.7305,94.6601 -168.3984,138.3593 -277.6992,98.9296 -42.5,-15.332 -90.9688,-54.0898 -113.1797,-90.5312 -6.9883,-11.4688 -8.1602,-12.1914 -11.2617,-6.8984 -26.3164,44.8281 -66.0664,65.5468 -101.8985,53.1093 l -13.5898,-4.7304 0.4883,42.7617 c 0.5312,46.457 -4.6875,72.5078 -17.4883,87.2265 -6,6.9024 -6.5391,7.0313 -5.0391,1.211 z M 1629.5,2047.7383 c 14.4297,-5.1289 33.1094,-13.3399 41.5,-18.2578 19.5117,-11.4414 51.1602,-40.8086 59.2109,-54.9492 5.2696,-9.2696 4.0977,-8.5625 -7.6992,4.6484 -16.4023,18.3789 -46.2109,40.1406 -73.5703,53.7305 -26.3828,13.1093 -37.6016,16.4609 -73.6719,22.0312 l -30.7304,4.7383 29.3593,-1.3086 c 21.461,-0.9609 36.4297,-3.8203 55.6016,-10.6328 z m -896.38281,28.293 c -45.44141,-11.1719 -85.6875,-31.5196 -118.67969,-60 -33.39453,-28.8399 -64.13672,-85.75 -77.66016,-143.793 -6.39843,-27.457 -18.75781,-103.457 -17.09375,-105.1172 2.60938,-2.6094 49.9961,10 59.69532,15.8789 10.66015,6.4688 11.28515,7.7695 28.79296,59.8711 11.84766,35.2695 24.22657,56.1289 44.92188,75.6992 45.03516,42.5899 113.66797,55.7695 180.57031,34.6797 l 17.51953,-5.5195 -16.6914,-9.1289 c -21.45313,-11.7305 -38.53125,-25.7618 -82.77735,-68.0118 -59.21875,-56.5585 -87.95703,-76.1406 -191.6914,-130.6289 -31.85157,-16.7421 -57.91407,-31.6601 -57.91407,-33.1718 0,-1.5078 3.64454,-4.1289 8.10157,-5.8203 11.37109,-4.3282 33.42968,3.3007 85.69922,29.621 23.77734,11.9688 43.23046,21.25 43.23046,20.6094 0,-0.6406 -20.92187,-14.9297 -46.49218,-31.75 -48.83594,-32.1406 -58.57422,-40.5195 -64.14063,-55.2109 -4.17578,-11.0195 -0.77344,-20.8164 11.04688,-31.8086 7.96093,-7.3984 11.40625,-8.1602 37.05078,-8.1602 27.66797,0 29.08984,0.4024 65.80078,18.211 41.65234,20.2109 87.77734,48.4101 182.71094,111.7109 117.4414,78.3203 193.72261,143.1367 237.75391,202.0391 6.3594,8.5078 12.6484,14.3789 13.9687,13.0508 1.3204,-1.3399 7.4805,-17.5821 13.6915,-36.0899 6.1992,-18.5195 12,-34.3906 12.8789,-35.2695 3.8593,-3.8633 5.5898,45.0976 2.3711,67.2969 -5.6602,39.121 -25.5508,61.9609 -53.961,61.9804 -18.6719,0.02 -33.9609,-9.3906 -48.2305,-29.6679 -6.81636,-9.6915 -13.42183,-17.8516 -14.67964,-18.1329 -1.26172,-0.2773 -9.63282,8.0899 -18.60547,18.6016 -29.4961,34.5313 -90.2461,70.5 -135.14844,80.0195 -29.51172,6.2618 -71.875,5.4297 -102.03906,-1.9882 z m 101.98047,-32.9024 c 23.76562,-5.9805 58.53515,-20.0781 58.53515,-23.75 0,-0.6484 -8.82031,2.3711 -19.60156,6.7305 -10.78125,4.3515 -30.85156,10.789 -44.59766,14.3008 -23.10937,5.9101 -32.80468,9.6406 -25.05859,9.6406 1.75,0 15.57812,-3.1094 30.72266,-6.9219 z M 1060.0313,1744.5508 C 999.94531,1685.6406 863.01172,1611.5586 626.08984,1509.7891 l -17.9414,-7.711 13.50781,-0.078 c 43.24219,-0.25 165.47266,47.5 279.54297,109.1914 76.83984,41.5586 139.81248,86.8477 164.99218,118.668 9.5899,12.1211 21.4492,36.6914 17.3281,35.9101 -1.2578,-0.2382 -11.8281,-9.789 -23.4882,-21.2187 z m 159.9375,-3.2813 c 0.2109,-35.8906 25.6015,-61.6797 92.8007,-94.2382 138.8203,-67.25 229.6524,-108.0704 272.2188,-122.3321 34.3125,-11.5 46.6328,-12.7187 28.0117,-2.789 -7.1406,3.8203 -33.5508,18.7695 -58.6797,33.2187 -65.8789,37.9024 -101.832,57.1094 -182.6992,97.6406 -84.543,42.3516 -116.9023,62.3594 -136.9922,84.6993 l -14.7305,16.3906 z m -37.5899,-133.4297 -9.7891,-4.4804 14.9102,-0.1485 c 32.9805,-0.3203 66.8398,-17.4101 106.6289,-53.8125 23.25,-21.2773 27.6211,-17.4101 9,7.9532 -31.1601,42.4375 -87.168,65.8672 -120.75,50.4882 z M 1124.4219,1479 c -18.8633,-4.75 -60.6602,-27.5703 -57.0821,-31.1484 0.6407,-0.6407 10.629,2.707 22.211,7.4375 29.9609,12.2304 72.0078,12.0625 109.1406,-0.461 14.3594,-4.8281 29.5391,-11.0195 33.7305,-13.7383 10.957,-7.1015 12.9375,-2.5507 4.9297,11.3086 -11.1602,19.293 -30.8399,27.4922 -68.961,28.6914 -17.4297,0.5508 -37.2187,-0.3906 -43.9687,-2.0898 z M 432.74609,1028.1016 c 1.48047,-42.71098 8.55469,-119.91019 14.42578,-157.51176 l 4.07813,-26.10156 2.34766,14.69141 c 4.03906,25.23047 3.04296,77.64843 -2.16407,113.76953 -6.52734,45.28128 -14.57812,86.23048 -17.57812,89.41018 -1.3125,1.3906 -1.8125,-14.0196 -1.11328,-34.2578 z m 22.1211,8.8867 c 19.54687,-57.41018 40.63672,-145.94924 56.73437,-238.16799 7.20703,-41.28125 14.07813,-79.85156 15.27735,-85.71875 4.67578,-22.9414 7.85937,-12.38281 7.85937,26.07813 0,91 -20.74219,193.60937 -52.28906,258.66015 -12.03516,24.80856 -32.67578,54.10936 -27.58203,39.14846 z m 685.09371,-71.77736 c -16.6601,-35.24219 -45.4726,-111.69922 -60.8515,-161.5 -19.3594,-62.65235 -88.47659,-329.74219 -85.9844,-332.23047 2.48828,-2.49219 23.8164,47.35937 39.3047,91.84765 21.5703,61.96094 46.4805,146.8125 74.8789,255.0625 13.6523,52.03907 30.7227,111.9375 37.9297,133.09766 7.2109,21.17188 12.4531,40.26172 11.6406,42.42188 -0.8203,2.16015 -8.4297,-10.75 -16.918,-28.69922 z M 593.96875,876.30859 c -8.24609,-15.77734 -17.69922,-78.3789 -10.6875,-70.80859 2.85156,3.07812 19.97266,65.41016 19.97266,72.69922 0,5.76953 -5.90235,4.57031 -9.28516,-1.89063 z m 394.95312,-11.4375 c -9.93359,-11.96093 -25.72656,-69.1914 -20.0664,-72.6914 2.60937,-1.6211 10.59375,17.80078 20.83594,50.67968 3.07421,9.8711 6.16406,19.78125 6.86718,22.01954 1.64844,5.28125 -3.26172,5.26953 -7.63672,0 z M 701.69922,804.51953 C 687.97656,768.75 684.83203,755.64062 685.04687,735.19141 c 0.14844,-14.28125 0.79688,-16.42188 3.1875,-10.46094 2.51954,6.26953 19.28907,73.1289 24.51563,97.73828 3.04687,14.35156 -1.49219,6.98047 -11.05078,-17.94922 z m 833.41018,10.10156 c -1.0781,-6.90234 -4.9805,-47.05078 -8.668,-89.21093 -7.0117,-80.14063 -14.6914,-136.42969 -27.0312,-198.21875 -4.0391,-20.17969 -6.4805,-36.70313 -5.4297,-36.70313 3.8281,0 26.2812,57.90234 34.1601,88.08984 20.3477,77.92188 28.1992,172.8711 18.4883,223.35157 -4.7187,24.4414 -8.9687,29.1289 -11.5195,12.6914 z m -74.8906,-54.14062 c -1.0274,-7.62891 -2.6485,-25.60938 -3.6094,-39.96875 l -1.75,-26.10156 5.3906,11.41796 c 6.2188,13.19141 10.3594,68.51172 5.1211,68.51172 -1.8125,0 -4.1328,-6.23047 -5.1523,-13.85937 z m 254.5195,-97.87891 c -1.8594,-35.38281 -7.5195,-76.32031 -18.3594,-132.58203 -4.6875,-24.34766 -4.2891,-26.26953 3.1406,-15.05859 7.6211,11.5 20.8516,50.78906 26.1524,77.64843 7.039,35.64063 2.707,109.96094 -6.4024,109.96094 -1.3398,0 -3.3789,-17.99219 -4.5312,-39.96875 z m -38.0586,-36.71094 c 0,-33.67187 0.8086,-41.26953 4.0703,-38.01171 2.75,2.74218 4.0781,15.21093 4.0781,38.01171 0,22.78907 -1.3281,35.26954 -4.0781,38.00782 -3.2617,3.26172 -4.0703,-4.32813 -4.0703,-38.00782 z M 417.36719,1744.5586 c -14.4336,-199.7891 -75.11328,-338.3398 -190.38672,-434.668 -39.04688,-32.6406 -130.617189,-91.7304 -135.132814,-87.2187 -1.113281,1.1172 2.4375,6.7695 7.886719,12.5781 28.312495,30.1602 113.593745,153.4102 160.898435,232.5 49.9375,83.5195 125.22656,236.8789 148.55078,302.6211 4.95313,13.9492 9.60938,24.7695 10.34375,24.0273 0.73828,-0.7265 -0.23437,-23.1601 -2.16015,-49.8398 z m 1481.08201,10.2227 c 24.5899,-73 102.6211,-221.3321 167.3594,-318.1094 46.8203,-69.9922 93.2305,-129.211 136.9805,-174.7735 26.1914,-27.2773 31.7812,-35.8086 16.3125,-24.8984 -4.9414,3.4883 -16.6016,10.1797 -25.9219,14.8711 -29.8399,15.0391 -102.8594,66.0195 -132.3008,92.3789 -77.0976,69.0391 -139.5898,174.3906 -166.0898,280.0195 -5.0703,20.1719 -6.9493,41.3203 -8.2891,92.9922 -1.0586,40.6797 -0.5586,65.6094 1.2617,63.6172 1.6485,-1.7891 6.4571,-13.5391 10.6875,-26.0976 z m 0,0"\r
     id="path1"\r
     inkscape:highlight-color="#aaaaaa"\r
     style="fill:#ffffff;fill-opacity:1" />\r
</svg>\r
`,Tx="#87CEFA",Ex="#FF0000";function M0(i){const e=i.match(/viewBox\s*=\s*"([^"]+)"/i),t=i.match(/<path[^>]*\sd="([^"]+)"[^>]*>/i);if(!e||!t)throw new Error("Cannot parse SVG path/viewBox from source.");const s=t[0].match(/transform="([^"]+)"/i);return{d:t[1],transform:s?s[1]:void 0,viewBox:e[1]}}const Mx=M0(Ax),Rx=M0(Px);function Ix(i){return i==="player"?Tx:Ex}function Fx(i){const e=i==="player"?Mx:Rx,t=Ix(i),s=e.transform?` transform="${e.transform}"`:"";return[`<svg viewBox="${e.viewBox}" xmlns="http://www.w3.org/2000/svg" style="background:none">`,"<g>",`<path d="${e.d}"${s} fill="${t}" />`,"</g>","</svg>"].join("")}function Hc(i){const e=Fx(i);return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}const R0="token-player-svg",I0="token-enemy-svg";async function Lx(){const i=[{alias:R0,src:Hc("player")},{alias:I0,src:Hc("enemy")}];for(const e of i)Ki.add(e);await Ki.load(i.map(e=>e.alias))}const zx=["./brute.json","./archer.json","./assassin.json","./ghost.json"],Z1={types:zx},Bx="brute",jx="Brute",Dx="Frontliner robuste qui avance pour engager le joueur.",Ox="brute",$x={raceOrOrigin:"Brute mercenaire",register:"familier",tone:["agressif","direct","impatient"],vocabulary:["charge","ecrase","avance","finissons-en"],quirks:["phrases courtes","menaces simples"],taboos:["pas de modernisme","pas de meta-jeu"]},Nx={hp:10,moveRange:3,attackDamage:2,armorClass:14,attackRange:1,maxAttacksPerTurn:2},Ux={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},Wx={shape:"cone",range:4,apertureDeg:90,canSeeInDark:!1},Gx={id:Bx,label:jx,description:Dx,aiRole:Ox,speechProfile:$x,baseStats:Nx,movement:Ux,vision:Wx},Hx="archer",Vx="Archer",Yx="Tireur qui prefere garder une distance de securite avant de frapper.",Xx="archer",qx={raceOrOrigin:"Archer de bande",register:"neutre",tone:["tactique","moqueur","vigilant"],vocabulary:["a couvert","recule","je l'ai en vue","distance"],quirks:["annonce ce qu'il voit","donne des consignes courtes"],taboos:["pas de modernisme","pas de meta-jeu"]},Kx={hp:7,moveRange:2,attackDamage:2,armorClass:13,attackRange:6,maxAttacksPerTurn:1},Qx={type:"ground",speed:2,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},Zx={shape:"cone",range:15,apertureDeg:60,canSeeInDark:!1},Jx={id:Hx,label:Vx,description:Yx,aiRole:Xx,speechProfile:qx,baseStats:Kx,movement:Qx,vision:Zx},e5="assassin",t5="Assassin",n5="Frappeur rapide qui cherche a se rapprocher pour porter un coup decisif.",r5="assassin",i5={raceOrOrigin:"Assassin",register:"soutenu",tone:["froid","tranchant","calme"],vocabulary:["silence","cible","dans l'ombre","fin"],quirks:["parle peu","phrases courtes et precises"],taboos:["pas de modernisme","pas de meta-jeu"]},s5={hp:6,moveRange:3,attackDamage:3,armorClass:15},o5={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},a5={shape:"cone",range:6,apertureDeg:80,canSeeInDark:!1},l5={id:e5,label:t5,description:n5,aiRole:r5,speechProfile:i5,baseStats:s5,movement:o5,vision:a5},u5="ghost",c5="Fantome",h5="Esprit intangible capable de traverser les autres creatures.",d5="ghost",f5={raceOrOrigin:"Esprit vengeur",register:"soutenu",tone:["cryptique","menaant","surnaturel"],vocabulary:["je te sens","au-dela","froideur","souffle"],quirks:["parle en images","phrases etranges mais courtes"],taboos:["pas de modernisme","pas de meta-jeu"]},p5={hp:8,moveRange:4,attackDamage:3,armorClass:12},m5={type:"ghost",speed:4,canPassThroughWalls:!0,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},g5={shape:"circle",range:6,canSeeInDark:!0},y5={id:u5,label:c5,description:h5,aiRole:d5,speechProfile:f5,baseStats:p5,movement:m5,vision:g5},x5=["./melee-strike.json","./dash.json","./second-wind.json","./throw-dagger.json"],J1={actions:x5},v5="melee-strike",_5="Frappe basique",w5="Attaque de melee simple contre une cible a 1 case.",S5="attack",k5={actionType:"action",movementCost:0},b5={target:"enemy",range:{min:0,max:1,shape:"single"},maxTargets:1,requiresLos:!0},C5={perTurn:1,perEncounter:null,resource:null},A5=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_max",target:"primary",max:1,reason:"Portee de melee uniquement."},{type:"target_alive",target:"primary",reason:"La cible doit avoir des PV restants."}],P5={bonus:5,critRange:20},T5={formula:"1d6+3",critRule:"double-dice",damageType:"slashing"},E5=[{type:"damage",target:"primary",formula:"1d6 + modFOR",damageType:"slashing"},{type:"log",message:"Frappe basique inflige 1d6+FOR a la cible."}],M5={priority:"finish_low_hp_target",successLog:"Attaque de melee effectuee.",failureLog:"Cible hors portee ou deja a terre."},R5=["martial","arme","starter"],I5={id:v5,name:_5,summary:w5,category:S5,actionCost:k5,targeting:b5,usage:C5,conditions:A5,attack:P5,damage:T5,effects:E5,aiHints:M5,tags:R5},F5="dash",L5="Course",z5="Transforme l'action en 3 cases de mouvement en plus.",B5="movement",j5={actionType:"action",movementCost:0},D5={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},O5={perTurn:1,perEncounter:null,resource:null},$5=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."}],N5=[{type:"modify_path_limit",target:"self",delta:3,duration:"this_turn"},{type:"log",message:"Course: +3 cases de mouvement pour ce tour."}],U5={priority:"close_gap",successLog:"Course utilisee pour approcher.",failureLog:"Deja a portee, course ignoree."},W5=["mobilite","deplacement"],G5={id:F5,name:L5,summary:z5,category:B5,actionCost:j5,targeting:D5,usage:O5,conditions:$5,effects:N5,aiHints:U5,tags:W5},H5="second-wind",V5="Second souffle",Y5="Restaure une partie des PV en bonus action.",X5="support",q5={actionType:"bonus",movementCost:0},K5={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},Q5={perTurn:null,perEncounter:1,resource:null},Z5=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"stat_below_percent",who:"self",stat:"hp",percentMax:.75,reason:"Economiser tant que les PV sont hauts."}],J5=[{type:"heal",target:"self",formula:"1d10 + niveau",min:1},{type:"temp_hp",target:"self",amount:2,duration:"end_of_turn"},{type:"log",message:"Second souffle: soigne 1d10 + niveau."}],e4={priority:"survive",successLog:"Second souffle declenche.",failureLog:"PV trop hauts ou tour non joueur."},t4=["soin","defense","survie"],n4={id:H5,name:V5,summary:Y5,category:X5,actionCost:q5,targeting:K5,usage:Q5,conditions:Z5,effects:J5,aiHints:e4,tags:t4},r4="throw-dagger",i4="Lancer de dague",s4="Attaque a distance courte avec une dague a lancer.",o4="attack",a4={actionType:"action",movementCost:0},l4={target:"enemy",range:{min:1,max:4,shape:"single"},maxTargets:1,requiresLos:!0},u4={perTurn:1,perEncounter:null,resource:{name:"dagger",pool:"bandolier",min:1}},c4=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_between",target:"primary",min:1,max:4,reason:"Hors de melee mais a portee de lancer."},{type:"resource_at_least",resource:"dagger",pool:"bandolier",value:1,reason:"Besoin d'une dague a lancer."}],h4={bonus:4,critRange:20},d4={formula:"1d4+2",critRule:"double-dice",damageType:"piercing"},f4=[{type:"damage",target:"primary",formula:"1d4 + modDEX",damageType:"piercing"},{type:"resource_spend",resource:"dagger",pool:"bandolier",amount:1},{type:"log",message:"Dague lancee: 1d4+DEX degats perforants."}],p4={priority:"poke_from_range",successLog:"Dague lancee.",failureLog:"Pas de dague ou cible hors portee."},m4=["distance","arme","jet"],g4={id:r4,name:i4,summary:s4,category:o4,actionCost:a4,targeting:l4,usage:u4,conditions:c4,attack:h4,damage:d4,effects:f4,aiHints:p4,tags:m4},hr=12,qn=8,mt=64,Qa=hr*mt,kc=qn*mt,F0=mt,lh=mt*.5,L0=Qa/2,z0=lh*2,y4=1841961;function rs(i,e){return i>=0&&i<hr&&e>=0&&e<qn}function vn(i,e){const t=F0/2,s=lh/2,o=(i-e)*t+L0,l=(i+e)*s+z0;return{x:o,y:l}}function x4(i,e){const t=F0/2,s=lh/2,o=i-L0,l=e-z0,u=o/t,h=l/s,d=(u+h)/2,p=(h-u)/2,m=Math.round(d),y=Math.round(p);return{x:m,y}}function B0(i,e,t,s){const o=[];for(let l=-s;l<=s;l++)for(let u=-s;u<=s;u++){const h=e+u,d=t+l;if(!rs(h,d))continue;Math.sqrt(u*u+l*l)<=s+.01&&o.push({x:h,y:d})}return{id:i,type:"circle",cells:o}}function v4(i,e,t,s,o){const l=[],u=Math.floor(s/2),h=Math.floor(o/2);for(let d=t-h;d<=t+h;d++)for(let p=e-u;p<=e+u;p++)rs(p,d)&&l.push({x:p,y:d});return{id:i,type:"rectangle",cells:l}}function j0(i,e,t,s,o,l){const u=[],d=typeof l=="number"&&l>0&&l<180?l*Math.PI/360:null;for(let p=1;p<=s;p++){let m=p;if(d!==null){const y=Math.tan(d)*p;m=Math.floor(y),m<0&&(m=0),m>p&&(m=p)}for(let y=-m;y<=m;y++){let x=e,_=t;switch(o){case"right":x=e+p,_=t+y;break;case"left":x=e-p,_=t+y;break;case"down":x=e+y,_=t+p;break;case"up":x=e+y,_=t-p;break}rs(x,_)&&u.push({x,y:_})}}return{id:i,type:"cone",cells:u}}function Xi(i,e=1){const t=[];for(let o=0;o<e;o++)t.push(1+Math.floor(Math.random()*i));const s=t.reduce((o,l)=>o+l,0);return{rolls:t,total:s}}function _4(i,e="normal",t=20){if(e==="advantage"){const o=Xi(20),l=Xi(20),u=Math.max(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:i,total:u+i,mode:e,isCrit:u>=t}}if(e==="disadvantage"){const o=Xi(20),l=Xi(20),u=Math.min(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:i,total:u+i,mode:e,isCrit:u>=t}}const s=Xi(20);return{d20:s,bonus:i,total:s.total+i,mode:e,isCrit:s.total>=t}}function w4(i){const e=[],s=i.replace(/\s+/g,"").split(/(?=[+-])/);for(const o of s){if(!o)continue;const l=o.startsWith("-")?-1:1,u=o.replace(/^[+-]/,""),h=u.match(/^(\d*)d(\d+)$/i);if(h){const p=h[1]?parseInt(h[1],10):1,m=parseInt(h[2],10);e.push({diceCount:l*p,diceSides:m,modifier:0});continue}const d=parseInt(u,10);Number.isNaN(d)||e.push({diceCount:0,diceSides:0,modifier:l*d})}return e}function S4(i,e){const t=!!(e!=null&&e.isCrit),s=(e==null?void 0:e.critRule)??"double-dice",o=w4(i),l=[];let u=0;for(const p of o)if(p.diceCount!==0&&p.diceSides>0){const m=Math.abs(p.diceCount),y=t&&s==="double-dice"?m*2:m,x=Xi(p.diceSides,y);l.push(p.diceCount<0?{rolls:x.rolls,total:-x.total}:x)}else u+=p.modifier;let d=l.reduce((p,m)=>p+m.total,0)+u;return t&&s==="double-total"&&(d*=2),{dice:l,flatModifier:u,total:d,formula:i,isCrit:t}}function bc(i,e){return`${i},${e}`}function k4(i){return i.movementProfile?i.movementProfile:typeof i.moveRange=="number"?{type:"ground",speed:i.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1}:null}function b4(i,e,t,s,o,l,u){if(t<0||s<0||t>=hr||s>=qn||!rs(t,s))return!1;const h=t===u.x&&s===u.y;return!o.some(p=>p.id!==i.id&&p.hp>0&&p.x===t&&p.y===s)||h&&l?!0:e&&e.canPassThroughEntities?!(h&&e.canStopOnOccupiedTile===!1):!1}function ep(i,e,t,s){const o=k4(i),l=o&&o.speed>0?Math.min(s.maxDistance,o.speed):s.maxDistance,u={x:i.x,y:i.y};if(u.x===e.x&&u.y===e.y)return[];const h=new Set,d=new Map,p=new Map,m=[],y=bc(u.x,u.y);h.add(y),d.set(y,null),p.set(y,0),m.push(u);let x=null;const _=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];for(;m.length>0;){const E=m.shift(),M=bc(E.x,E.y),Y=p.get(M)??0;if(!(Y>=l))for(const N of _){const $=E.x+N.x,ie=E.y+N.y,ae=bc($,ie);if(h.has(ae)||!b4(i,o,$,ie,t,s.allowTargetOccupied??!1,e))continue;h.add(ae),d.set(ae,M),p.set(ae,Y+1);const te={x:$,y:ie};if(m.push(te),$===e.x&&ie===e.y){x=ae,m.length=0;break}}}let k=x;if(!k){let E=null,M=Number.POSITIVE_INFINITY;for(const Y of h){const[N,$]=Y.split(",").map(Number),ie=Math.abs(N-e.x)+Math.abs($-e.y),ae=p.get(Y)??0;ae!==0&&(ae>l||ie<M&&(M=ie,E=Y))}if(!E)return[];k=E}const b=[];let w=k;for(;w;){const[E,M]=w.split(",").map(Number);if(b.push({x:E,y:M}),w===y)break;w=d.get(w)??null}const A=b.reverse(),P=l+1;return A.length>P?A.slice(0,P):A}function C4(i,e){return e.find(t=>t.hp>0&&t.x===i.x&&t.y===i.y)??null}const A4=30,P4={shape:"cone",range:A4};function T4(i){return i.facing?i.facing:i.type==="player"?"right":"left"}function E4(i){return i.visionProfile?i.visionProfile:P4}function D0(i){const e=E4(i),t=T4(i),s=`vision-${i.id}`;return e.range<=0?{id:s,type:e.shape==="circle"?"circle":"cone",cells:[]}:e.shape==="circle"?B0(s,i.x,i.y,e.range):j0(s,i.x,i.y,e.range,t,e.apertureDeg)}function tp(i){return`${i.x},${i.y}`}function O0(i,e){const t=D0(i);if(!t.cells.length)return[];const s=new Set;for(const o of t.cells)s.add(tp(o));return e.filter(o=>o.id!==i.id&&o.hp>0&&s.has(tp({x:o.x,y:o.y})))}function $0(i,e,t){return e.hp<=0?!1:O0(i,t).some(o=>o.id===e.id)}const He={active:!1,round:null,stateStart:null,events:[],enemySpeeches:[],lastSpeechByEnemyThisRound:new Map};let M4=0;const N0=new Map;function R4(i,e){He.active=!0,He.round=i,He.stateStart=e,He.events=[],He.enemySpeeches=[],He.lastSpeechByEnemyThisRound=new Map}function hn(i){if(!He.active||He.round!==null&&i.round!==He.round)return;const e={id:`evt-${Date.now()}-${M4++}`,round:i.round,phase:i.phase,kind:i.kind,actorId:i.actorId,actorKind:i.actorKind,targetId:i.targetId??null,targetKind:i.targetKind??null,summary:i.summary,data:i.data??{},timestamp:Date.now()};He.events.push(e)}function I4(i,e){if(!He.active)return;const t=(e??"").trim();t&&(He.enemySpeeches.push({enemyId:i,line:t}),He.lastSpeechByEnemyThisRound.set(i,t),N0.set(i,t),He.round!==null&&hn({round:He.round,phase:"enemies",kind:"speech",actorId:i,actorKind:"enemy",summary:`${i} dit: "${t}"`,data:{line:t}}))}function F4(){return He.enemySpeeches.slice()}function L4(i){return N0.get(i)??null}function z4(i){return!Number.isFinite(i)||i<=0?He.events.slice():He.events.slice(-Math.floor(i))}function B4(i){return!He.active||!He.stateStart||He.round===null?null:{language:"fr",focusSide:"player",focusActorId:i.focusActorId,stateStart:He.stateStart,stateEnd:i.stateEnd,events:He.events.slice(),enemySpeeches:He.enemySpeeches.slice()}}function j4(){He.active=!1,He.round=null,He.stateStart=null,He.events=[],He.enemySpeeches=[],He.lastSpeechByEnemyThisRound=new Map}async function D4(i){const e=await fetch("/api/narration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!e.ok)return{summary:"",error:"IA non fonctionnel."};const t=await e.json();return!t||typeof t.summary!="string"?{summary:"",error:"IA non fonctionnel."}:t.error&&typeof t.error=="string"?{summary:"",error:t.error}:{summary:t.summary}}async function O4(i){const e=await fetch("/api/enemy-speech",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!e.ok)return{line:""};const t=await e.json();return!t||typeof t.line!="string"?{line:""}:{line:t.line}}const $4={"./melee-strike.json":I5,"./dash.json":G5,"./second-wind.json":n4,"./throw-dagger.json":g4},N4={"./brute.json":Gx,"./archer.json":Jx,"./assassin.json":l5,"./ghost.json":y5};function U4(){const i=Array.isArray(Z1.types)?Z1.types:[],e=[];for(const t of i){const s=N4[t];s?e.push(s):console.warn("[enemy-types] Type path missing in bundle:",t)}return e.length===0&&console.warn("[enemy-types] No enemy types loaded from index.json"),e}function W4(i,e,t){const{x:s,y:o}=t,l=e.baseStats;return{id:`enemy-${i+1}`,type:"enemy",enemyTypeId:e.id,enemyTypeLabel:e.label,aiRole:e.aiRole,speechProfile:e.speechProfile??null,moveRange:l.moveRange,attackDamage:l.attackDamage,attackRange:typeof l.attackRange=="number"?l.attackRange:1,maxAttacksPerTurn:typeof l.maxAttacksPerTurn=="number"?l.maxAttacksPerTurn:1,armorClass:l.armorClass,movementProfile:e.movement?e.movement:{type:"ground",speed:e.baseStats.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},facing:"left",visionProfile:e.vision?e.vision:{shape:"cone",range:5},x:s,y:o,hp:l.hp,maxHp:l.hp}}function np(i,e,t){return Math.max(e,Math.min(t,i))}function to(i,e){return Math.abs(i.x-e.x)+Math.abs(i.y-e.y)}function Ut(i){return i.hp<=0}function rp(i){return typeof i.attackRange=="number"&&i.attackRange>0?i.attackRange:1}function ip(i){return typeof i.maxAttacksPerTurn=="number"&&i.maxAttacksPerTurn>0?i.maxAttacksPerTurn:1}function Ya(i,e,t){return Ut(i)||Ut(e)?!1:$0(i,e,t)}function Cc(i,e){const t=e.x-i.x,s=e.y-i.y;return Math.abs(t)>=Math.abs(s)?t>=0?"right":"left":s>=0?"down":"up"}function G4(i){const e=qn,t=hr,s=Math.floor(i/e),o=i%e;return{x:Math.max(0,t-1-s),y:o}}const sp=[{action:"move",label:"Se deplacer jusqu'a 3 cases (Manhattan)",color:"#2ecc71"},{action:"attack",label:"Attaque le joueur a distance 1 (2 degats)",color:"#e74c3c"},{action:"wait",label:"Attend si aucune action viable",color:"#7f8c8d"}],H4=()=>{var Hr,Vr,vr,Yr;const i=Ce.useRef(null),e=Ce.useRef(null),t=Ce.useRef(null),s=Ce.useRef(null),o=Ce.useRef(null),l=Ce.useRef(!1),[u,h]=Ce.useState([]),[d,p]=Ce.useState([]),[m,y]=Ce.useState([]),[x,_]=Ce.useState({id:"player-1",type:"player",x:0,y:Math.floor(qn/2),facing:"right",visionProfile:{shape:"cone",range:5},hp:Vn.pvActuels,maxHp:Vn.pvMax}),[k,b]=Ce.useState([]),[w,A]=Ce.useState([]),[P,E]=Ce.useState("player"),[M,Y]=Ce.useState(1),[N,$]=Ce.useState(!1),[ie,ae]=Ce.useState(!1),[te,se]=Ce.useState(null),[ve,ge]=Ce.useState([]),[Me,ut]=Ce.useState(0),[J,oe]=Ce.useState(!1),[ne,ee]=Ce.useState(3),[re,I]=Ce.useState([]),[G,Ae]=Ce.useState(null),[Re,Fe]=Ce.useState(null),[Ie,Ge]=Ce.useState("normal"),[Ee,Ne]=Ce.useState(null),[tt,tn]=Ce.useState(null),[nn,Gt]=Ce.useState([]),[rn,Ht]=Ce.useState(!1),[Dr,Qn]=Ce.useState({usedAction:!1,usedBonus:!1}),[_t,Zn]=Ce.useState([]),[ct,kn]=Ce.useState(null),[as,Or]=Ce.useState("none"),[ls,bn]=Ce.useState([]),[$r,us]=Ce.useState(!1),[mr,_o]=Ce.useState(null),[jn,Dn]=Ce.useState(null),[wo,cs]=Ce.useState(null),[hs,Nr]=Ce.useState(!1),[Vt,ds]=Ce.useState(!1);function fs(S){if(hs)return"Fallback local : poursuite/attaque basique du joueur";if(jn===null)return"IA non appele pour l'instant";const F=jn.find(L=>L.enemyId===S);if(!F)return"Aucune dcision reue pour cet ennemi";if(F.action==="move"){const L=typeof F.targetX=="number"?F.targetX:"?",D=typeof F.targetY=="number"?F.targetY:"?";return`Dplacement vers (${L}, ${D})`}return F.action==="attack"?"Attaque le joueur (distance 1)":"Attend ce tour"}function Ur(){if(!ie||ve.length===0)return null;const S=Me>=0&&Me<ve.length?Me:0;return ve[S]??null}function ps(){if(!ie||ve.length===0)return{entry:null,willWrap:!1};const S=(Me+1)%ve.length;return{entry:ve[S]??null,willWrap:S===0}}function On(){ve.length!==0&&ut(S=>{const F=(S+1)%ve.length;return F===0&&Y(L=>L+1),F})}function gr(){if(ie)return;const S=Vn.caracs.dexterite.modDEX,F=()=>Math.floor(Math.random()*20)+1,L=F(),D=L+S,U=[];U.push({id:x.id,kind:"player",initiative:D});const X=w.map(K=>{const Se=F();return U.push({id:K.id,kind:"enemy",initiative:Se}),{...K,initiative:Se}});se(D),A(X),U.sort((K,W)=>W.initiative-K.initiative),ge(U),ut(0),ae(!0);const Q=U[0];Q&&(Q.kind==="player"?pe(`Initiative: Joueur ${D} (d20=${L}, mod=${S})  le joueur commence.`):pe(`Initiative: Joueur ${D} (d20=${L}, mod=${S})  ${Q.id} commence (initiative ${Q.initiative}).`))}function pe(S){h(F=>[S,...F].slice(0,12))}function ms(S){p(F=>[S,...F].slice(0,20))}function gi(S){Gt(F=>[S,...F].slice(0,6)),pe(S)}function So(S,F){const L=(F??"").trim();L&&y(D=>[...D.filter(X=>X.tokenId!==S),{tokenId:S,text:L,updatedAtRound:M}])}function ko(S){y(F=>F.filter(L=>L.tokenId!==S))}function yi(S,F,L){const D=[{id:F.id,kind:"player",label:"Heros",aiRole:null,enemyTypeId:null,x:F.x,y:F.y,hp:F.hp,maxHp:F.maxHp},...L.map(U=>({id:U.id,kind:"enemy",label:U.enemyTypeLabel||U.enemyTypeId||U.id,aiRole:U.aiRole??null,enemyTypeId:U.enemyTypeId??null,x:U.x,y:U.y,hp:U.hp,maxHp:U.maxHp}))];return{round:M,phase:S,grid:{cols:hr,rows:qn},actors:D}}function bo(S){return yi(S,x,w)}Ce.useEffect(()=>{const S=U4();b(S)},[]),Ce.useEffect(()=>{J&&!ie&&w.length>0&&gr()},[J,ie,w.length]),Ce.useEffect(()=>{y(S=>S.filter(F=>w.some(L=>L.id===F.tokenId&&L.hp>0)))},[w]),Ce.useEffect(()=>{const S=Array.isArray(J1.actions)?J1.actions:[],F=[];for(const L of S){const D=$4[L];D?F.push(D):console.warn("[actions] Action path missing in bundle:",L)}F.length===0&&console.warn("[actions] No actions loaded from index.json"),I(F),Ae(F.length?F[0].id:null)},[]),Ce.useEffect(()=>{if(!J||!ie)return;const S=Ur();if(S){if(S.kind==="player"){E("player"),Qn({usedAction:!1,usedBonus:!1}),Ht(!1),Ne(null),tn(null),l.current=!1,R4(M,bo("player")),hn({round:M,phase:"player",kind:"turn_start",actorId:x.id,actorKind:"player",summary:`Debut du tour du heros (round ${M}).`});return}N||(E("enemies"),pl(S.id))}},[J,ie,ve,Me,N]);function Jn(){if(w.length===0)return null;let S=null;for(const F of w){const L=to(x,F);(S===null||L<S)&&(S=L)}return S}function xi(S,F,L,D){if(F.type!=="enemy")return{ok:!1,reason:"La cible selectionnee n'est pas un ennemi."};if(F.hp<=0)return{ok:!1,reason:"La cible est deja a terre."};const U=S.targeting;if(!U||U.target!=="enemy")return{ok:!1,reason:"Cette action ne cible pas un ennemi."};const X=to(L,F),Q=U.range;if(Q){if(typeof Q.min=="number"&&X<Q.min)return{ok:!1,reason:`Cible trop proche pour ${S.name} (distance ${X}, min ${Q.min}).`};if(typeof Q.max=="number"&&X>Q.max)return{ok:!1,reason:`Cible hors portee pour ${S.name} (distance ${X}, max ${Q.max}).`}}for(const K of S.conditions||[]){if(K.type==="distance_max"&&typeof K.max=="number"&&X>K.max)return{ok:!1,reason:K.reason||`Distance cible > ${K.max}.`};if(K.type==="distance_between"){const W=typeof K.min=="number"?K.min:typeof(Q==null?void 0:Q.min)=="number"?Q.min:null,Se=typeof K.max=="number"?K.max:typeof(Q==null?void 0:Q.max)=="number"?Q.max:null;if(W!==null&&X<W)return{ok:!1,reason:K.reason||`Distance cible < ${W}.`};if(Se!==null&&X>Se)return{ok:!1,reason:K.reason||`Distance cible > ${Se}.`}}if(K.type==="target_alive"&&F.hp<=0)return{ok:!1,reason:K.reason||"La cible doit avoir des PV restants."}}return U.requiresLos&&!$0(L,F,D)?{ok:!1,reason:"Cible hors du champ de vision ou derriere un obstacle (ligne de vue requise)."}:{ok:!0}}function er(S){var X,Q;const F=[],L=[];P!=="player"&&F.push("Action bloquee pendant le tour des ennemis.");const D=(X=S.targeting)==null?void 0:X.target,U=(Q=S.targeting)==null?void 0:Q.range;if(D==="enemy"){const K=Jn();K===null?F.push("Aucune cible ennemie presente."):(L.push(`Distance mini ennemie: ${K}`),typeof(U==null?void 0:U.min)=="number"&&K<U.min&&F.push(`Trop proche (< ${U.min}).`),typeof(U==null?void 0:U.max)=="number"&&K>U.max&&F.push(`Hors portee (> ${U.max}).`))}for(const K of S.conditions||[]){if(K.type==="phase"&&K.mustBe&&K.mustBe!==P&&F.push(K.reason||"Phase incorrecte."),K.type==="distance_max"&&D==="enemy"){const W=Jn();W!==null&&typeof K.max=="number"&&W>K.max&&F.push(K.reason||`Distance > ${K.max}.`)}if(K.type==="distance_between"&&D==="enemy"){const W=Jn();W!==null&&(typeof K.min=="number"&&W<K.min&&F.push(K.reason||`Distance < ${K.min}.`),typeof K.max=="number"&&W>K.max&&F.push(K.reason||`Distance > ${K.max}.`))}}return{enabled:F.length===0,reasons:F,details:L}}function Co(S){var L;const F=[];if(S.perTurn&&F.push(`${S.perTurn}/tour`),S.perEncounter&&F.push(`${S.perEncounter}/rencontre`),(L=S.resource)!=null&&L.name){const D=S.resource.pool?` (${S.resource.pool})`:"";F.push(`Ressource: ${S.resource.name}${D}`)}return F.length?F.join(" | "):"Libre"}function yr(S){const{range:F,target:L}=S;return F.shape==="self"?"Portee: soi-meme":F.min===F.max?`Portee: ${F.max} (${L})`:`Portee: ${F.min}-${F.max} (${L})`}function vi(S){switch(S.type){case"phase":return`Phase requise: ${S.mustBe??"?"}`;case"distance_max":return`Distance <= ${S.max??"?"}`;case"distance_between":return`Distance ${S.min??0}-${S.max??"?"}`;case"stat_below_percent":return`Stat ${S.stat} < ${Math.round((S.percentMax??0)*100)}%`;case"target_alive":return"Cible doit etre vivante";case"resource_at_least":return`Ressource ${S.resource??"?"} >= ${S.value??"?"}`;default:return S.reason||S.type}}function _i(S){switch(S.type){case"damage":return`Degats ${S.damageType??""} (${S.formula??"?"})`;case"heal":return`Soin (${S.formula??"?"})`;case"status":return`Etat: ${S.status??"?"} (${S.duration??"?"} tour)`;case"temp_hp":return`PV temporaires: ${S.amount??"?"}`;case"move":return`Deplacement +${S.maxSteps??"?"} (${S.direction??"direction libre"})`;case"resource_spend":return`Consomme ${S.amount??1} ${S.resource??"ressource"}`;case"modify_path_limit":return`+${S.delta??"?"} cases de mouvement ce tour`;default:return S.type}}function gs(S){var D;const F=(D=S.targeting)==null?void 0:D.range;if(!F)return;const L=`preview-${S.id}`;if(F.shape==="rectangle"){bn([{id:L,kind:"rectangle",width:Math.max(1,F.max),height:Math.max(1,F.max)}]),pe(`Previsualisation rectangle pour ${S.name}.`);return}if(F.shape==="cone"){bn([{id:L,kind:"cone",range:Math.max(1,F.max),direction:"right"}]),pe(`Previsualisation cone (direction droite) pour ${S.name}.`);return}bn([{id:L,kind:"circle",radius:Math.max(1,F.max)}]),pe(`Previsualisation de portee pour ${S.name}.`)}function ul(S){var Q,K,W;const F=(Q=S.actionCost)==null?void 0:Q.actionType,L=F==="action",D=F==="bonus";if(L&&Dr.usedAction){pe(`Action ${S.name} refusee: action principale deja utilisee ce tour.`);return}if(D&&Dr.usedBonus){pe(`Action ${S.name} refusee: action bonus deja utilisee ce tour.`);return}const U=er(S);if(!U.enabled){pe(`Action ${S.name} bloque: ${U.reasons.join(" | ")}`);return}Fe(S.id),Ne(null),tn(null),Ht(!1),Qn(Se=>({usedAction:Se.usedAction||L,usedBonus:Se.usedBonus||D}));const X=((K=S.aiHints)==null?void 0:K.successLog)||"Action validee. Prets pour les jets.";pe(`${S.name}: ${X}`),((W=S.targeting)==null?void 0:W.target)==="enemy"?(Or("selecting"),kn(null),pe("Selection de cible: cliquez sur un ennemi sur la grille ou dans la liste.")):(Or("none"),kn(null))}function Wr(){return Re&&re.find(S=>S.id===Re)||null}function cl(S){return S?S.attack||S.damage||S.skillCheck?!0:(S.effects||[]).some(L=>typeof L.formula=="string"&&L.formula.trim().length>0):!1}function $n(){var Q,K;if(Vt||Ut(x))return;const S=Wr();if(!S){pe("Aucune action validee pour lancer un jet.");return}if(!S.attack){pe("Cette action ne requiert pas de jet de touche.");return}if(rn){pe("Jet de touche deja effectue pour cette action ce tour. Validez une nouvelle action ou terminez le tour.");return}let F=null;if(((Q=S.targeting)==null?void 0:Q.target)==="enemy"){if(!ct){pe("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet.");return}const W=w.find(Se=>Se.id===ct);if(!W){pe("Cible ennemie introuvable ou deja vaincue.");return}F=typeof W.armorClass=="number"?W.armorClass:null}const L=_4(S.attack.bonus,Ie,S.attack.critRange??20);Ne(L),Ht(!0),tn(null);const D=L.mode==="normal"?`${L.d20.total}`:`${L.d20.rolls.join(" / ")} -> ${L.d20.total}`,U=((K=S.targeting)==null?void 0:K.target)==="enemy"&&ct?` sur ${ct}`:"",X=`Jet de touche (${S.name})${U} : ${D} + ${L.bonus} = ${L.total}`;if(F!==null){const Se=L.total>=F||L.isCrit?`TOUCHE (CA ${F})${L.isCrit?" (critique!)":""}`:`RATE (CA ${F})`;gi(`${X} -> ${Se}`)}else gi(`${X}${L.isCrit?" (critique!)":""}`)}function wi(){var W,Se,Pe;if(Vt||Ut(x))return;const S=Wr();if(!S){pe("Aucune action validee pour lancer un jet.");return}if(!S.damage){pe("Cette action ne requiert pas de jet de degats.");return}if(S.attack&&!Ee){pe("Un jet de touche est requis avant les degats pour cette action.");return}let F=null,L=null;if(((W=S.targeting)==null?void 0:W.target)==="enemy"){if(!ct){pe("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet de degats.");return}if(F=w.findIndex(Le=>Le.id===ct),F===-1){pe("Cible ennemie introuvable ou deja vaincue.");return}const ke=w[F];L=typeof ke.armorClass=="number"?ke.armorClass:null}const D=!!(Ee!=null&&Ee.isCrit);if(L!==null&&S.attack&&Ee){const ke=Ee.total;if(!(ke>=L||Ee.isCrit)){const ue=((Se=S.targeting)==null?void 0:Se.target)==="enemy"&&ct?` sur ${ct}`:"";pe(`L'attaque (${S.name})${ue} a manque la cible (CA ${L}). Pas de degats.`),ct&&hn({round:M,phase:P,kind:"player_attack",actorId:x.id,actorKind:"player",targetId:ct,targetKind:"enemy",summary:`Le heros attaque ${ct} (${S.name}) mais manque (CA ${L}).`,data:{actionId:S.id,attackTotal:ke,targetArmorClass:L,hit:!1}});return}}const U=S4(S.damage.formula,{isCrit:D,critRule:S.damage.critRule});tn(U);const X=U.dice.map(ke=>ke.rolls.join("+")).join(" | "),Q=U.total,K=((Pe=S.targeting)==null?void 0:Pe.target)==="enemy"&&ct?` sur ${ct}`:"";gi(`Degats (${S.name})${K} : ${X||"0"} + ${U.flatModifier} = ${Q}${D?" (critique)":""}`),typeof F=="number"&&F>=0&&A(ke=>{if(F===null||F<0||F>=ke.length)return ke;const Le=[...ke],ue={...Le[F]},de=ue.hp;return ue.hp=Math.max(0,ue.hp-Q),Le[F]=ue,hn({round:M,phase:P,kind:"player_attack",actorId:x.id,actorKind:"player",targetId:ue.id,targetKind:"enemy",summary:`Le heros frappe ${ue.id} et inflige ${Q} degats (PV ${de} -> ${ue.hp}).`,data:{actionId:S.id,damage:Q,isCrit:D,targetHpBefore:de,targetHpAfter:ue.hp}}),ue.hp<=0&&de>0&&hn({round:M,phase:P,kind:"death",actorId:ue.id,actorKind:"enemy",summary:`${ue.id} s'effondre, hors de combat.`,targetId:ue.id,targetKind:"enemy",data:{killedBy:x.id}}),Le})}function Ao(){const S=Wr();if(!S){pe("Aucune action validee pour lancer un jet.");return}if(!S.attack){pe("Mode auto: pas de jet de touche necessaire."),S.damage&&wi();return}$n(),setTimeout(()=>{S.damage&&wi()},50)}function hl(S){if(P!=="player"||Vt||Ut(x))return;const F=i.current;if(!F)return;const L=F.querySelector("canvas");if(!L)return;const D=L.getBoundingClientRect(),U=S.clientX-D.left,X=S.clientY-D.top,Q=U/D.width*Qa,K=X/D.height*kc,{x:W,y:Se}=x4(Q,K),Pe=W,ke=Se;if(!rs(Pe,ke))return;if(as==="selecting"){const ue=[x,...w],de=C4({x:Pe,y:ke},ue);if(!de||de.type!=="enemy"){pe(`Pas d'ennemi sur (${Pe}, ${ke}).`);return}const be=Wr();if(!be){pe("Aucune action validee pour selectionner une cible.");return}const Ve=xi(be,de,x,[x,...w]);if(!Ve.ok){pe(Ve.reason||"Cette cible n'est pas valide pour cette action.");return}kn(de.id),Or("none"),pe(`Cible selectionnee: ${de.id}.`);return}const Le=(ue,de)=>w.some(be=>be.hp>0&&be.x===ue&&be.y===de);if(Le(Pe,ke)){pe(`Case (${Pe}, ${ke}) occupee par un ennemi : impossible de s'y deplacer.`);return}Zn(ue=>{const be=[...ue];if(be.length>=5)return pe("Limite de 5 cases atteinte pour ce tour."),be;let Ve=be.length>0?be[be.length-1]:{x:x.x,y:x.y};if(Ve.x===Pe&&Ve.y===ke)return be;let je=Ve.x,Oe=Ve.y,Ye=5-be.length;for(;je!==Pe&&Ye>0;){const bt=Math.sign(Pe-je),dt=je+bt;if(Le(dt,Oe)){pe(`Trajectoire bloquee par un ennemi en (${dt}, ${Oe}).`);break}je=dt,be.push({x:je,y:Oe}),Ye--}for(;Oe!==ke&&Ye>0;){const bt=Math.sign(ke-Oe),dt=Oe+bt;if(Le(je,dt)){pe(`Trajectoire bloquee par un ennemi en (${je}, ${dt}).`);break}Oe=dt,be.push({x:je,y:Oe}),Ye--}return pe(Ye===0&&(je!==Pe||Oe!==ke)?"Trajectoire tronquee: limite de 5 cases atteinte.":`Trajectoire: ajout de la case (${Pe}, ${ke}).`),be})}function Po(){if(P!=="player"||Vt||Ut(x)||_t.length===0)return;const S=_t[_t.length-1],F={x:x.x,y:x.y};_(L=>({...L,x:S.x,y:S.y})),pe(`Deplacement valide vers (${S.x}, ${S.y}) via ${_t.length} etape(s).`),hn({round:M,phase:"player",kind:"move",actorId:x.id,actorKind:"player",summary:`Le heros se deplace de (${F.x}, ${F.y}) vers (${S.x}, ${S.y}).`,data:{from:F,to:{x:S.x,y:S.y},steps:_t.length}}),Zn([])}function To(){P==="player"&&(Vt||(Zn([]),pe("Trajectoire reinitialisee.")))}function Gr(S){P==="player"&&(Vt||(_(F=>({...F,facing:S})),pe(`Orientation du joueur mise a jour: ${S}.`)))}function Eo(){const S={x:x.x,y:x.y,hp:x.hp,maxHp:x.maxHp},F=w.map(L=>({id:L.id,x:L.x,y:L.y,hp:L.hp,maxHp:L.maxHp,type:L.enemyTypeId,aiRole:L.aiRole??null,moveRange:L.moveRange??null,attackDamage:L.attackDamage??null}));return{round:M,phase:P,grid:{cols:hr,rows:qn},player:S,enemies:F}}function dl(S){const F=new Set(w.map(U=>U.id)),L=new Set(["move","attack","wait"]),D=[];for(const U of S){if(!U||typeof U!="object")continue;if(!F.has(U.enemyId)){console.warn("[enemy-ai] Decision ignoree (enemyId inconnu):",U);continue}const X=(U.action||"wait").toLowerCase();if(!L.has(X)){console.warn("[enemy-ai] Decision ignoree (action invalide):",U);continue}if(X==="move"&&(typeof U.targetX!="number"||typeof U.targetY!="number")){console.warn("[enemy-ai] Decision move ignoree (cible manquante):",U);continue}D.push({...U,action:X})}return D}async function fl(S){console.log("[enemy-ai] Envoi tat au backend:",S),_o(S),cs(null),Nr(!1);try{const F=await fetch("/api/enemy-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!F.ok)throw new Error(`HTTP ${F.status}`);const L=await F.json();if(!L.decisions||!Array.isArray(L.decisions))throw new Error("Rponse backend invalide (decisions manquant).");const D=dl(L.decisions);return console.log("[enemy-ai] Dcisions reues (filtres):",D),Dn(D),D.length===0&&Nr(!0),D}catch(F){return console.warn("[enemy-ai] Erreur lors de la requete IA:",F),cs(F instanceof Error?F.message:String(F??"unknown")),Dn(null),Nr(!0),console.warn("[enemy-ai] Dcisions manquantes, utilisation du fallback local."),[]}}async function ht(S,F,L){const D=L.find(de=>de.id===S);if(!D||Ut(D))return;const U=[F,...L],X=O0(D,U),Q=X.filter(de=>de.type==="enemy"&&de.id!==S&&!Ut(de)).map(de=>de.id),K=X.filter(de=>de.type==="player"&&!Ut(de)).map(de=>de.id),W=Ya(D,F,U),Se=to(D,F),Pe=D.maxHp>0?D.hp/D.maxHp:0,ke={language:"fr",maxLines:2,enemyId:S,enemyTypeId:D.enemyTypeId??null,aiRole:D.aiRole??null,speechProfile:D.speechProfile??null,perception:{canSeePlayer:W,distanceToPlayer:Number.isFinite(Se)?Se:null,hpRatio:Number.isFinite(Pe)?Pe:0,alliesVisible:Q,enemiesVisible:K,lastKnownPlayerPos:W?{x:F.x,y:F.y}:null},priorSpeechesThisRound:F4(),selfLastSpeech:L4(S),recentEvents:z4(16)},ue=((await O4(ke)).line??"").trim();if(!ue){ko(S);return}So(S,ue),I4(S,ue)}async function pl(S){var Se;$(!0),Zn([]),bn([]);const F=w.map(Pe=>({...Pe}));let L={...x};const D=F.find(Pe=>Pe.id===S);if(!D||Ut(D)){$(!1),On();return}const U=Eo(),Q=(await fl(U)).filter(Pe=>Pe.enemyId===S),K=[L,...F];if(Q.length===0)if(Nr(!0),Dn([]),!Ya(D,L,K))pe(`${D.id} ne voit pas le joueur et reste en alerte.`);else{const ke=typeof D.moveRange=="number"?D.moveRange:3,Le=ep(D,{x:L.x,y:L.y},K,{maxDistance:ke,allowTargetOccupied:!0});if(D.plannedPath=Le,Le.length===0)pe(`${D.id} ne trouve pas de chemin valide vers le joueur (reste en place).`);else{const ue={x:D.x,y:D.y},de=Le[Le.length-1];D.x=de.x,D.y=de.y,D.facing=Cc(D,L),pe(`${D.id} suit un chemin vers (${de.x}, ${de.y}).`),hn({round:M,phase:"enemies",kind:"move",actorId:D.id,actorKind:"enemy",summary:`${D.id} se deplace de (${ue.x}, ${ue.y}) vers (${de.x}, ${de.y}).`,data:{from:ue,to:de,fallback:!0}});const be=to(D,L),Ve=rp(D);if(be<=Ve){const je=typeof D.attackDamage=="number"?D.attackDamage:2,Oe=ip(D),Ye=je*Oe,bt=L.hp;L={...L,hp:Math.max(0,L.hp-Ye)},pe(Oe>1?`${D.id} attaque ${Oe} fois pour ${Ye} degats.`:`${D.id} attaque le joueur pour ${Ye} degats.`),hn({round:M,phase:"enemies",kind:"enemy_attack",actorId:D.id,actorKind:"enemy",targetId:L.id,targetKind:"player",summary:`${D.id} frappe le heros et inflige ${Ye} degats (PV ${bt} -> ${L.hp}).`,data:{damage:Ye,attacks:Oe,playerHpBefore:bt,playerHpAfter:L.hp,fallback:!0}}),L.hp<=0&&bt>0&&hn({round:M,phase:"enemies",kind:"death",actorId:L.id,actorKind:"player",summary:"Le heros s'effondre sous les coups ennemis.",targetId:L.id,targetKind:"player",data:{killedBy:D.id}})}}}else{Nr(!1),Dn(Q);const Pe=Q[0],ke=(Pe.action||"wait").toLowerCase();if(ke==="wait")pe(`${D.id} attend.`);else if(ke==="move")if(!Ya(D,L,K))pe(`${D.id} ne voit pas le joueur et reste en alerte.`);else{let ue=Pe.targetX,de=Pe.targetY;const be=Pe;if((typeof ue!="number"||typeof de!="number")&&be.target&&typeof be.target.x=="number"&&typeof be.target.y=="number"&&(ue=be.target.x,de=be.target.y),typeof ue!="number"||typeof de!="number")pe(`${D.id}: move ignore (cible invalide).`);else{const Ve=typeof D.moveRange=="number"?D.moveRange:3,je=np(ue,0,hr-1),Oe=np(de,0,qn-1),Ye=ep(D,{x:je,y:Oe},K,{maxDistance:Ve,allowTargetOccupied:!0});if(D.plannedPath=Ye,Ye.length===0)pe(`${D.id}: aucun trajet valide vers (${je}, ${Oe}), reste en place.`);else{const bt={x:D.x,y:D.y},dt=Ye[Ye.length-1];D.x=dt.x,D.y=dt.y,D.facing=Cc(D,L),pe(`${D.id} suit un chemin vers (${dt.x}, ${dt.y}).`),hn({round:M,phase:"enemies",kind:"move",actorId:D.id,actorKind:"enemy",summary:`${D.id} se deplace de (${bt.x}, ${bt.y}) vers (${dt.x}, ${dt.y}).`,data:{from:bt,to:dt}})}}}else if(ke==="attack")if(D.facing=Cc(D,L),!Ya(D,L,K))pe(`${D.id} voulait attaquer mais ne voit pas le joueur.`);else{const ue=to(D,L),de=rp(D);if(ue<=de){const be=typeof D.attackDamage=="number"?D.attackDamage:2,Ve=ip(D),je=be*Ve,Oe=L.hp;L={...L,hp:Math.max(0,L.hp-je)},pe(Ve>1?`${D.id} effectue ${Ve} attaques et inflige ${je} degats au joueur.`:`${D.id} attaque le joueur pour ${je} degats.`),hn({round:M,phase:"enemies",kind:"enemy_attack",actorId:D.id,actorKind:"enemy",targetId:L.id,targetKind:"player",summary:`${D.id} attaque le heros et inflige ${je} degats (PV ${Oe} -> ${L.hp}).`,data:{damage:je,attacks:Ve,playerHpBefore:Oe,playerHpAfter:L.hp}}),L.hp<=0&&Oe>0&&hn({round:M,phase:"enemies",kind:"death",actorId:L.id,actorKind:"player",summary:"Le heros s'effondre sous les coups ennemis.",targetId:L.id,targetKind:"player",data:{killedBy:D.id}})}else pe(`${D.id} voulait attaquer mais est trop loin (ignore).`)}}_(L),A(F);try{await ht(S,L,F)}catch{}const W=ps();if(l.current&&((Se=W.entry)==null?void 0:Se.kind)==="player")try{const Pe=yi("player",L,F),ke=B4({focusActorId:L.id??null,stateEnd:Pe});if(ke){const Le=await D4(ke),ue=(Le.error||Le.summary||"").trim();ue&&ms(ue)}}catch{ms("IA non fonctionnel.")}finally{j4(),l.current=!1}$(!1),On()}function ys(){if(Vt)return;const S=Ur();!S||S.kind!=="player"||(pe(`Fin du tour joueur (round ${M}).`),l.current=!0,hn({round:M,phase:"player",kind:"turn_end",actorId:x.id,actorKind:"player",summary:`Fin du tour du heros (round ${M}).`}),On())}function Mo(){bn([{id:"demo-circle",kind:"circle",radius:2}]),pe("Zone d'effet: cercle (rayon 2) autour du joueur.")}function Si(){bn([{id:"demo-rect",kind:"rectangle",width:3,height:3}]),pe("Zone d'effet: rectangle 3x3 centre sur le joueur.")}function ml(){bn([{id:"demo-cone",kind:"cone",range:4,direction:"right"}]),pe("Zone d'effet: cone vers la droite (portee 4).")}function Ro(){bn([]),pe("Zones d'effet effacees.")}Ce.useEffect(()=>{if(!J||!i.current||e.current)return;const S=new n0;e.current=S;let F=!1,L=null,D=!1;return(async()=>{if(await S.init({width:Qa,height:kc,background:y4,antialias:!0}),D=!0,await Lx(),F)return;const X=i.current;if(!X)return;X.appendChild(S.canvas);const Q=new Jt;S.stage.addChild(Q);const K=new fi;Q.addChild(K),(()=>{K.clear();for(let ue=0;ue<qn;ue++)for(let de=0;de<hr;de++){if(!rs(de,ue))continue;const be=vn(de,ue),Ve=mt,je=mt*.5,Oe=[be.x,be.y-je/2,be.x+Ve/2,be.y,be.x,be.y+je/2,be.x-Ve/2,be.y],Ye=(de+ue)%2===0;K.poly(Oe).fill({color:Ye?1381666:1908016,alpha:1})}})();const Se=new fi;Q.addChild(Se),s.current=Se;const Pe=new Jt;Q.addChild(Pe),t.current=Pe;const ke=new Jt;Q.addChild(ke),o.current=ke;const Le=()=>{const ue=S.canvas,de=ue.parentElement;if(!de)return;const be=Math.min(de.clientWidth/Qa,de.clientHeight/kc);ue.style.transformOrigin="top left",ue.style.transform=`scale(${be})`};L=Le,Le(),window.addEventListener("resize",Le)})(),()=>{F=!0,L&&window.removeEventListener("resize",L),D&&e.current&&e.current.destroy(!0),e.current=null,t.current=null,s.current=null,o.current=null}},[J]),Ce.useEffect(()=>{Vt||x.hp<=0&&([x,...w].some(F=>F.type==="player"&&!Ut(F))||ds(!0))},[x,w,Vt]),Ce.useEffect(()=>{const S=t.current;if(!S)return;S.removeChildren();const F=[x,...w];for(const L of F){const D=new Jt,U=L.type==="player"?R0:I0,X=Br.from(U);X.anchor.set(.5,1),X.width=mt*.9,X.height=mt*.9,D.addChild(X);const Q=vn(L.x,L.y);D.x=Q.x+mt*.05,D.y=Q.y,S.addChild(D)}},[x,w]),Ce.useEffect(()=>{const S=t.current;if(!S)return;const F=[x,...w];S.children.forEach((L,D)=>{const U=F[D];if(!U||!(L instanceof Jt))return;const X=L;let Q=null;for(const W of X.children)if(W instanceof Br){Q=W;break}if(!Q)return;const K=X.children.filter(W=>!(W instanceof Br));for(const W of K)X.removeChild(W);if(!Ut(U)){const W=new fi;W.beginFill(0,.4),W.drawEllipse(0,0,mt*.4,mt*.15),W.endFill(),X.addChildAt(W,0)}Ut(U)?(Q.rotation=Math.PI/2,Q.alpha=.7):(Q.rotation=0,Q.alpha=1)})},[x,w,m]),Ce.useEffect(()=>{const S=o.current;if(!S)return;S.removeChildren();const F=[x,...w],L=new Map(m.map(W=>[W.tokenId,W])),D=6,U=140,X=mt*1,Q=[];for(const W of F){if(W.type!=="enemy"||Ut(W))continue;const Se=L.get(W.id);if(!Se||!Se.text.trim())continue;const Pe=vn(W.x,W.y),ke=new Jt,Le=new fi;Le.beginFill(16777215,.92);const ue=new Cx(Se.text,{fontFamily:"Arial",fontSize:11,fill:0,align:"center",wordWrap:!0,wordWrapWidth:U-10}),de=Math.min(U,ue.width+10),be=ue.height+8;Le.drawRoundedRect(-de/2,-be,de,be,7),Le.endFill(),ue.x=-ue.width/2,ue.y=-be+4,ke.addChild(Le),ke.addChild(ue);const Ve=Pe.x+mt*.05,je=Pe.y-X;ke.x=Ve,ke.y=je,S.addChild(ke),Q.push({tokenId:W.id,x:Ve-de/2,y:je-be,width:de,height:be,view:ke})}Q.sort((W,Se)=>W.y-Se.y);const K=[];for(const W of Q){let Se=W.y,Pe=0;const ke=(ue,de,be)=>{const Ve=ue.x,je=ue.y,Oe=ue.x+ue.width,Ye=ue.y+ue.height,bt=de,dt=be,Nn=de+W.width,yl=be+W.height;return Ve<Nn&&Oe>bt&&je<yl&&Ye>dt};for(;Pe<20;){const ue=K.find(de=>ke(de,W.x,Se));if(!ue)break;Se=ue.y-W.height-D,Pe+=1}const Le=Se-W.y;Le!==0&&(W.view.y+=Le,W.y=Se),K.push(W)}},[x,w,m]),Ce.useEffect(()=>{const S=s.current;if(!S)return;S.clear();const F=ls.map(U=>{switch(U.kind){case"circle":return B0(U.id,x.x,x.y,U.radius??1);case"rectangle":return v4(U.id,x.x,x.y,U.width??1,U.height??1);case"cone":return j0(U.id,x.x,x.y,U.range??1,U.direction??"right");default:return{id:U.id,type:"circle",cells:[]}}});for(const U of F)for(const X of U.cells){const Q=vn(X.x,X.y),K=mt,W=mt*.5,Se=[Q.x,Q.y-W/2,Q.x+K/2,Q.y,Q.x,Q.y+W/2,Q.x-K/2,Q.y],Pe=U.type==="circle"?3447003:U.type==="rectangle"?3066993:15158332;S.poly(Se).fill({color:Pe,alpha:.45})}if($r){const U=[x,...w];for(const X of U){const Q=D0(X);for(const K of Q.cells){const W=vn(K.x,K.y),Se=mt,Pe=mt*.5,ke=[W.x,W.y-Pe/2,W.x+Se/2,W.y,W.x,W.y+Pe/2,W.x-Se/2,W.y],Le=X.type==="player"?2719929:12597547;S.poly(ke).fill({color:Le,alpha:X.type==="player"?.25:.2})}}}const L=[x,...w];for(const U of L){const X=vn(U.x,U.y),Q=mt,K=mt*.5,W=[X.x,X.y-K/2,X.x+Q/2,X.y,X.x,X.y+K/2,X.x-Q/2,X.y],Se=U.type==="player"?3066993:15158332;S.poly(W).fill({color:Se,alpha:.2})}if(ct){const U=w.find(X=>X.id===ct);if(U){const X=vn(U.x,U.y),Q=mt,K=mt*.5,W=[X.x,X.y-K/2,X.x+Q/2,X.y,X.x,X.y+K/2,X.x-Q/2,X.y];S.poly(W).fill({color:3447003,alpha:.6})}}if(_t.length>0){const U=_t[_t.length-1],X=vn(U.x,U.y),Q=mt,K=mt*.5,W=[X.x,X.y-K/2,X.x+Q/2,X.y,X.x,X.y+K/2,X.x-Q/2,X.y];S.poly(W).fill({color:15844367,alpha:.2})}for(const U of w){if(!U.plannedPath||U.plannedPath.length===0)continue;const X=U.plannedPath,Q=X[0],K=vn(Q.x,Q.y);S.setStrokeStyle({width:3,color:15158332,alpha:.9}),S.moveTo(K.x,K.y);for(const W of X.slice(1)){const Se=vn(W.x,W.y);S.lineTo(Se.x,Se.y)}S.stroke()}if(_t.length===0)return;S.setStrokeStyle({width:6,color:15844367,alpha:1});const D=vn(x.x,x.y);S.moveTo(D.x,D.y);for(const U of _t){const X=vn(U.x,U.y);S.lineTo(X.x,X.y)}S.stroke()},[x,w,_t,ls,ct,$r]);const Qe=re.find(S=>S.id===G)||re[0]||null,Ze=Qe?er(Qe):null,qe=Wr(),sn=cl(qe),ot=P==="player",xr=Ur(),gl=ve;return J?z.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"16px",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:"16px",boxSizing:"border-box",position:"relative"},children:[Vt&&z.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:z.jsxs("div",{style:{background:"#141421",borderRadius:12,border:"1px solid #f1c40f",padding:"24px 32px",maxWidth:360,textAlign:"center",boxShadow:"0 0 24px rgba(0,0,0,0.6)"},children:[z.jsx("h2",{style:{margin:"0 0 8px"},children:"Game Over"}),z.jsx("p",{style:{fontSize:13,margin:"0 0 16px"},children:"Le heros est tombe et aucun allie n'est en mesure de continuer."}),z.jsx("button",{type:"button",onClick:()=>window.location.reload(),style:{padding:"6px 12px",background:"#e67e22",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:600},children:"Recommencer le combat"})]})}),z.jsxs("div",{style:{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},children:[z.jsxs("div",{style:{marginBottom:8,padding:"6px 10px",background:"#111322",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%"},children:[z.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[z.jsx("span",{style:{fontSize:12,color:"#b0b8c4"},children:"Narration du tour"}),z.jsxs("span",{style:{fontSize:11,color:"#9aa0b5"},children:["Round ",M]})]}),z.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2,maxHeight:80,overflowY:"auto"},children:[d.length===0&&z.jsx("span",{style:{fontSize:11,color:"#7f8694"},children:"En attente d'actions pour raconter le tour..."}),d.slice(0,6).map((S,F)=>z.jsxs("span",{style:{fontSize:11,color:"#e0e4ff"},children:["- ",S]},F))]})]}),z.jsxs("div",{style:{marginBottom:8,padding:"6px 10px",background:"#111322",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%"},children:[z.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[z.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["Ordre d'initiative (round ",M,")"]}),xr&&z.jsxs("span",{style:{fontSize:11,color:"#f1c40f"},children:["Tour actuel :"," ",xr.kind==="player"?"Joueur":xr.id]})]}),z.jsx("div",{style:{display:"flex",gap:8,alignItems:"center",overflowX:"auto",paddingBottom:2},children:gl.map(S=>{const F=xr&&S.id===xr.id&&S.kind===xr.kind,L=S.kind==="player",D=Hc(L?"player":"enemy"),U=S.kind==="player"?x:w.find(K=>K.id===S.id)||null,X=U?Ut(U):!1,Q=L?{svg:D,label:"PJ"}:{svg:D,label:S.id};return z.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:4,borderRadius:6,border:F?"2px solid #f1c40f":"1px solid #333",background:X?"#111118":F?"#1b1b30":"#101020",minWidth:48},children:[z.jsx("img",{src:Q.svg,alt:Q.label,style:{width:32,height:32,objectFit:"contain",filter:X?"grayscale(1)":L?"none":"grayscale(0.2)"}}),z.jsx("span",{style:{fontSize:10,marginTop:2,color:X?"#777a8a":"#d0d6e0",whiteSpace:"nowrap",textDecoration:X?"line-through":"none"},children:Q.label}),z.jsxs("span",{style:{fontSize:9,color:"#9aa0b5"},children:["Init ",S.initiative]})]},`${S.kind}-${S.id}`)})})]}),z.jsx("h1",{style:{marginBottom:8},children:"Mini Donjon (test-GAME)"}),z.jsx("p",{style:{marginBottom:8},children:"Tour par tour simple. Cliquez sur la grille pour definir une trajectoire (max 5 cases), validez le dplacement, puis terminez le tour pour laisser l'IA des ennemis jouer."}),z.jsx("div",{ref:i,onClick:hl,style:{flex:"1 1 auto",border:"1px solid #333",overflow:"hidden",maxHeight:"min(80vh, 640px)",maxWidth:"min(100%, 1024px)"}}),z.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,flexWrap:"wrap"},children:[z.jsx("button",{type:"button",onClick:Po,style:{padding:"4px 8px",background:ot&&_t.length?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:ot&&_t.length?"pointer":"default"},disabled:!ot||_t.length===0,children:"Valider le deplacement"}),z.jsx("button",{type:"button",onClick:To,style:{padding:"4px 8px",background:ot?"#e67e22":"#555",color:"#fff",border:"none",borderRadius:4,cursor:ot?"pointer":"default"},disabled:!ot,children:"Reinitialiser trajet"}),z.jsx("button",{type:"button",onClick:ys,style:{padding:"4px 8px",background:ot?"#9b59b6":"#555",color:"#fff",border:"none",borderRadius:4,cursor:ot?"pointer":"default"},disabled:!ot||N,children:"Fin du tour joueur"}),z.jsx("button",{type:"button",onClick:()=>Gr("up"),style:{padding:"4px 8px",background:ot?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:ot?"pointer":"default",fontSize:11},disabled:!ot,children:"Regarder haut"}),z.jsx("button",{type:"button",onClick:()=>Gr("down"),style:{padding:"4px 8px",background:ot?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:ot?"pointer":"default",fontSize:11},disabled:!ot,children:"Regarder bas"}),z.jsx("button",{type:"button",onClick:()=>Gr("left"),style:{padding:"4px 8px",background:ot?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:ot?"pointer":"default",fontSize:11},disabled:!ot,children:"Regarder gauche"}),z.jsx("button",{type:"button",onClick:()=>Gr("right"),style:{padding:"4px 8px",background:ot?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:ot?"pointer":"default",fontSize:11},disabled:!ot,children:"Regarder droite"}),!ot&&z.jsx("span",{style:{fontSize:12,alignSelf:"center"},children:"Tour des ennemis en cours..."})]})]}),z.jsxs("div",{style:{width:"360px",display:"flex",flexDirection:"column",gap:"12px"},children:[z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333"},children:[z.jsx("h2",{style:{margin:"0 0 8px"},children:"Etat du combat"}),z.jsxs("div",{children:[z.jsx("strong",{children:"Round :"})," ",M," |"," ",z.jsx("strong",{children:"Phase :"})," ",P==="player"?"Joueur":"Ennemis"]}),z.jsxs("div",{style:{fontSize:12,marginTop:4},children:[z.jsx("strong",{children:"Initiative PJ :"})," ",te??"en cours..."," "]}),z.jsxs("div",{children:[z.jsx("strong",{children:"Nom :"})," ",Vn.nom.nomcomplet]}),z.jsxs("div",{children:[z.jsx("strong",{children:"Niveau :"})," ",Vn.niveauGlobal," |"," ",z.jsx("strong",{children:"Classe :"})," ",Vn.classe[1].classeId]}),z.jsxs("div",{children:[z.jsx("strong",{children:"PV :"})," ",x.hp," / ",x.maxHp]}),z.jsxs("div",{children:[z.jsx("strong",{children:"CA :"})," ",Vn.CA]}),z.jsxs("div",{style:{marginTop:8},children:[z.jsx("strong",{children:"Caracs :"})," ","FOR ",Vn.caracs.force.FOR," | DEX"," ",Vn.caracs.dexterite.DEX," | CON"," ",Vn.caracs.constitution.CON]}),z.jsxs("div",{style:{marginTop:8,fontSize:12},children:[z.jsx("strong",{children:"Trajectoire :"})," ",_t.length===0?"aucune":`(${x.x}, ${x.y}) -> `+_t.map(S=>`(${S.x}, ${S.y})`).join(" -> ")]}),z.jsxs("div",{style:{marginTop:8,fontSize:11,opacity:.85},children:[z.jsx("strong",{children:"IA ennemis (debug) :"}),z.jsxs("div",{children:["Dernier appel :"," ",mr?`round ${mr.round}, phase ${mr.phase}`:"aucun"]}),z.jsxs("div",{children:["Dcisions reues :"," ",jn===null?"n/a":`${jn.length} (fallback: ${hs?"oui":"non"})`]}),wo&&z.jsxs("div",{children:["Erreur : ",wo]})]})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#151524",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Ennemis"}),z.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Chaque ennemi est une entit propre. Capacits IA : dplacement, attaque au contact, attente si aucune option."}),z.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:w.map(S=>{var F;return z.jsxs("div",{style:{background:"#0f0f19",border:"1px solid #2a2a3a",borderRadius:8,padding:"8px 10px",display:"flex",flexDirection:"column",gap:6},children:[z.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[z.jsx("strong",{style:{color:"#f5f5f5"},children:S.id}),z.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["PV ",S.hp," / ",S.maxHp]})]}),z.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Position : (",S.x,", ",S.y,")"]}),z.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Initiative :"," ",typeof S.initiative=="number"?S.initiative:"non definie"]}),z.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Type : ",S.enemyTypeLabel||S.enemyTypeId||"inconnu"," ",S.aiRole?`(role: ${S.aiRole})`:""]}),z.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:sp.map(L=>z.jsx("span",{style:{background:L.color,color:"#0b0b12",borderRadius:4,padding:"2px 6px",fontSize:11,fontWeight:700},children:L.action.toUpperCase()},`${S.id}-${L.action}`))}),z.jsxs("div",{style:{fontSize:12,color:"#d0d6e0"},children:["Ce qu'il peut faire :"," ",sp.map(L=>L.label).join(" | ")]}),qe&&((F=qe.targeting)==null?void 0:F.target)==="enemy"&&(()=>{const L=xi(qe,S,x,[x,...w]),D=L.ok,U=ct===S.id;return z.jsx("button",{type:"button",onClick:()=>{if(!D){pe(L.reason||`Cible ${S.id} invalide pour ${qe.name}.`);return}kn(S.id),Or("none"),pe(`Cible selectionnee: ${S.id}.`)},disabled:!D,style:{marginTop:6,alignSelf:"flex-start",padding:"4px 8px",fontSize:11,borderRadius:4,border:"none",cursor:D?"pointer":"default",background:D?"#3498db":"#555",color:"#fff",opacity:U?1:.9},children:U?"Cible actuelle":"Cibler avec l'action validee"})})(),z.jsxs("div",{style:{fontSize:12,color:"#9cb2ff"},children:["Dernire dcision IA : ",fs(S.id)]})]},S.id)})})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Actions detaillees"}),z.jsxs("p",{style:{margin:0,fontSize:12,opacity:.85},children:["Source: ",z.jsx("code",{children:"action-game/actions/index.json"}),". Liste chargee et verifiee localement (phase, distance)."]}),z.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[z.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:[re.map(S=>{const F=er(S),L=(Qe==null?void 0:Qe.id)===S.id,D=S.actionCost.actionType==="action"?"#8e44ad":S.actionCost.actionType==="bonus"?"#27ae60":S.actionCost.actionType==="reaction"?"#e67e22":"#2980b9",U=L?"#6c5ce7":"#2a2a3a";return z.jsxs("button",{type:"button",onClick:()=>Ae(S.id),style:{textAlign:"left",background:L?"#1e1e2f":"#0f0f19",color:"#f5f5f5",border:`1px solid ${U}`,borderRadius:6,padding:"8px 10px",cursor:"pointer"},children:[z.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,marginBottom:4,alignItems:"center"},children:[z.jsx("span",{style:{fontWeight:600},children:S.name}),z.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:D,color:"#fff"},children:S.actionCost.actionType})]}),z.jsx("div",{style:{fontSize:12,opacity:.9},children:S.summary||S.category}),z.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:4,fontSize:11,alignItems:"center"},children:[z.jsx("span",{style:{color:F.enabled?"#2ecc71":"#e74c3c"},children:F.enabled?"Disponible":F.reasons[0]||"Bloquee"}),z.jsx("span",{style:{color:"#9aa0b5"},children:yr(S.targeting)}),z.jsx("span",{style:{color:"#9aa0b5"},children:Co(S.usage)})]})]},S.id)}),re.length===0&&z.jsx("div",{style:{fontSize:12,opacity:.8},children:"Aucune action chargee pour le moment."})]}),Qe&&z.jsxs("div",{style:{borderTop:"1px solid #2a2a3a",paddingTop:8,display:"flex",flexDirection:"column",gap:6},children:[z.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",fontSize:11},children:[z.jsx("span",{style:{background:"#2d2d40",color:"#d0d4f7",padding:"2px 6px",borderRadius:4},children:Qe.category}),(Hr=Qe.tags)==null?void 0:Hr.slice(0,4).map(S=>z.jsx("span",{style:{background:"#1f2a38",color:"#9bb0d6",padding:"2px 6px",borderRadius:4},children:S},S))]}),z.jsx("div",{style:{fontSize:12},children:Qe.summary||"Pas de resume."}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Cout:"})," ",Qe.actionCost.actionType," ","| Mouvement ",Qe.actionCost.movementCost]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Portee:"})," ",yr(Qe.targeting)]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Usage:"})," ",Co(Qe.usage)]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Conditions:"}),z.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:[Qe.conditions.length===0&&z.jsx("span",{style:{color:"#9aa0b5"},children:"Aucune condition."}),Qe.conditions.map((S,F)=>z.jsxs("div",{style:{color:"#cfd3ec"},children:[vi(S),S.reason?`  ${S.reason}`:""]},`${S.type}-${F}`)),Ze&&z.jsxs("div",{style:{color:Ze.enabled?"#2ecc71":"#e74c3c"},children:["Etat:"," ",Ze.enabled?"OK pour ce tour":Ze.reasons.join(" | ")||"Bloque",Ze.details.length>0&&z.jsx("div",{style:{color:"#9aa0b5",marginTop:2},children:Ze.details.join(" / ")})]})]})]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Effets:"}),z.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:Qe.effects.map((S,F)=>z.jsx("div",{style:{color:"#cfd3ec"},children:_i(S)},`${S.type}-${F}`))})]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Hints IA:"})," ",((Vr=Qe.aiHints)==null?void 0:Vr.priority)||"n/a",z.jsxs("div",{style:{color:"#9aa0b5"},children:["Success: ",((vr=Qe.aiHints)==null?void 0:vr.successLog)||"n/a"]}),z.jsxs("div",{style:{color:"#9aa0b5"},children:["Failure: ",((Yr=Qe.aiHints)==null?void 0:Yr.failureLog)||"n/a"]})]}),z.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[z.jsx("button",{type:"button",onClick:()=>gs(Qe),style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Previsualiser"}),z.jsx("button",{type:"button",onClick:()=>ul(Qe),disabled:!(Ze!=null&&Ze.enabled),style:{padding:"4px 8px",background:Ze!=null&&Ze.enabled?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze!=null&&Ze.enabled?"pointer":"default",fontSize:12},children:"Valider l'action"})]})]})]})]}),sn&&z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Jets de des"}),z.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Choisir une action, la valider, puis lancer le jet de touche et/ou de degats. Mode auto: enchaine touche + degats."}),z.jsxs("div",{style:{fontSize:12},children:["Action validee :"," ",qe?`${qe.name} (${qe.id})`:"aucune (valider une action d'abord)"]}),z.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["normal","advantage","disadvantage"].map(S=>z.jsx("button",{type:"button",onClick:()=>Ge(S),style:{padding:"4px 8px",background:Ie===S?"#8e44ad":"#2c2c3a",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:S},S))}),z.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[z.jsx("button",{type:"button",onClick:$n,disabled:!(qe!=null&&qe.attack),style:{padding:"4px 8px",background:qe!=null&&qe.attack?"#2980b9":"#555",color:"#fff",border:"none",borderRadius:4,cursor:qe!=null&&qe.attack?"pointer":"default",fontSize:12},children:"Lancer jet de touche"}),z.jsx("button",{type:"button",onClick:wi,disabled:!(qe!=null&&qe.damage),style:{padding:"4px 8px",background:qe!=null&&qe.damage?"#27ae60":"#555",color:"#fff",border:"none",borderRadius:4,cursor:qe!=null&&qe.damage?"pointer":"default",fontSize:12},children:"Lancer degats"}),z.jsx("button",{type:"button",onClick:Ao,style:{padding:"4px 8px",background:"#9b59b6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Mode auto (touche + degats)"})]}),z.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[z.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[z.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de touche"}),Ee?z.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["d20: ",Ee.d20.rolls.join(" / "),"  ",Ee.d20.total," ","| bonus ",Ee.bonus," | total ",Ee.total," ",Ee.isCrit?"(critique)":""]}):z.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lance."})]}),z.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[z.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de degats"}),tt?z.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["Des:"," ",tt.dice.length?tt.dice.map(S=>S.rolls.join("+")).join(" | "):""," ","| mod ",tt.flatModifier," | total ",tt.total," ",tt.isCrit?"(critique)":""]}):z.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lance."})]})]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Logs des jets:"}),z.jsxs("div",{style:{marginTop:4,display:"flex",flexDirection:"column",gap:2},children:[nn.map((S,F)=>z.jsxs("div",{style:{color:"#dfe6ff"},children:["- ",S]},F)),nn.length===0&&z.jsx("div",{style:{color:"#9aa0b5"},children:"Aucun jet enregistre."})]})]})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Zones d'effet (demo)"}),z.jsxs("p",{style:{margin:0,fontSize:12},children:["Ces boutons utilisent les helpers de ",z.jsx("code",{children:"boardEffects.ts"})," ","pour dessiner des zones en coordonnees de grille autour du joueur."]}),z.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:[z.jsx("button",{type:"button",onClick:Mo,style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cercle R=2"}),z.jsx("button",{type:"button",onClick:Si,style:{padding:"4px 8px",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Rectangle 3x3"}),z.jsx("button",{type:"button",onClick:ml,style:{padding:"4px 8px",background:"#c0392b",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cone portee 4"}),z.jsx("button",{type:"button",onClick:()=>us(S=>!S),style:{padding:"4px 8px",background:$r?"#f1c40f":"#555",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:$r?"Masquer vision":"Afficher vision"}),z.jsx("button",{type:"button",onClick:Ro,style:{padding:"4px 8px",background:"#7f8c8d",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Effacer zones"})]})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",flex:"1 1 auto",display:"flex",flexDirection:"column"},children:[z.jsx("h2",{style:{margin:"0 0 8px"},children:"Log"}),z.jsx("div",{style:{flex:"1 1 auto",overflowY:"auto",fontSize:12,lineHeight:1.4},children:u.map((S,F)=>z.jsxs("div",{children:["- ",S]},F))})]})]})]}):z.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:16,boxSizing:"border-box"},children:[z.jsx("h1",{style:{marginBottom:8},children:"Prparation du combat"}),z.jsx("p",{style:{marginBottom:16,fontSize:13,maxWidth:480,textAlign:"center"},children:"Configurez le combat avant de lancer la grille : nombre d'ennemis, puis dmarrez pour effectuer les jets d'initiative et entrer en mode tour par tour."}),z.jsxs("div",{style:{padding:16,borderRadius:8,background:"#141421",border:"1px solid #333",minWidth:260,display:"flex",flexDirection:"column",gap:12},children:[z.jsxs("label",{style:{fontSize:13},children:["Nombre d'ennemis :",z.jsx("input",{type:"number",min:1,max:8,value:ne,onChange:S=>ee(Math.max(1,Math.min(8,Number(S.target.value)||1))),style:{marginLeft:8,width:60,background:"#0f0f19",color:"#f5f5f5",border:"1px solid #333",borderRadius:4,padding:"2px 4px"}})]}),z.jsxs("p",{style:{fontSize:11,color:"#b0b8c4",margin:0},children:["Taille de la carte : actuellement fixe (",hr," x ",qn,"). Un redimensionnement dynamique demandera une refonte de boardConfig.ts."]}),z.jsx("button",{type:"button",onClick:()=>{if(k.length===0){pe("Aucun type d'ennemi charge (enemyTypes). Impossible de generer le combat.");return}const S=[],F=L=>k[L%k.length];for(let L=0;L<ne;L++)S.push(W4(L,F(L),G4(L)));A(S),Y(1),ae(!1),ge([]),ut(0),oe(!0)},style:{marginTop:8,padding:"6px 12px",background:"#2ecc71",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontWeight:600,fontSize:13},children:"Lancer le combat"})]})]})},V4=document.getElementById("root");Tg.createRoot(V4).render(z.jsx(H4,{}));export{w2 as $,Zp as A,en as B,Jt as C,et as D,xe as E,kp as F,sl as G,Qf as H,Br as I,G2 as J,J2 as K,vo as L,De as M,vt as N,lt as O,Ot as P,yy as Q,zc as R,Zc as S,Da as T,Rc as U,Jf as V,oc as W,e1 as X,k2 as Y,es as Z,kt as _,$p as a,vp as a0,Jp as a1,Be as a2,Xe as a3,Sy as a4,Vy as a5,Oy as a6,h3 as a7,f3 as a8,x3 as a9,_3 as aa,w3 as ab,p0 as ac,m1 as ad,f1 as ae,N1 as af,Kn as ag,S8 as ah,it as ai,fi as aj,Gg as ak,yo as al,Q1 as am,y0 as an,Ln as b,By as c,mo as d,Lt as e,p1 as f,Fy as g,qa as h,Qc as i,qp as j,Mp as k,zn as l,Gp as m,xo as n,c3 as o,d3 as p,g3 as q,i2 as r,v3 as s,$e as t,Wg as u,S3 as v,st as w,Sn as x,gp as y,Fn as z};
