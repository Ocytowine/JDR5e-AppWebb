const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-Ba8lCepL.js","assets/webworkerAll-CRNXEvYj.js","assets/colorToUniform-DimGseTd.js","assets/WebGPURenderer-BlPaKGIl.js","assets/SharedSystems-mnt4wltD.js","assets/WebGLRenderer-Clcf-du5.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Hc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hu={exports:{}},Ws={},Vu={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af;function xg(){if(Af)return Ee;Af=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function x(I){return I===null||typeof I!="object"?null:(I=y&&I[y]||I["@@iterator"],typeof I=="function"?I:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function w(I,U,ve){this.props=I,this.context=U,this.refs=b,this.updater=ve||v}w.prototype.isReactComponent={},w.prototype.setState=function(I,U){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,U,"setState")},w.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function C(){}C.prototype=w.prototype;function A(I,U,ve){this.props=I,this.context=U,this.refs=b,this.updater=ve||v}var P=A.prototype=new C;P.constructor=A,S(P,w.prototype),P.isPureReactComponent=!0;var E=Array.isArray,G=Object.prototype.hasOwnProperty,$={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function X(I,U,ve){var be,Ae={},Pe=null,Te=null;if(U!=null)for(be in U.ref!==void 0&&(Te=U.ref),U.key!==void 0&&(Pe=""+U.key),U)G.call(U,be)&&!O.hasOwnProperty(be)&&(Ae[be]=U[be]);var Ie=arguments.length-2;if(Ie===1)Ae.children=ve;else if(1<Ie){for(var $e=Array(Ie),rt=0;rt<Ie;rt++)$e[rt]=arguments[rt+2];Ae.children=$e}if(I&&I.defaultProps)for(be in Ie=I.defaultProps,Ie)Ae[be]===void 0&&(Ae[be]=Ie[be]);return{$$typeof:r,type:I,key:Pe,ref:Te,props:Ae,_owner:$.current}}function ne(I,U){return{$$typeof:r,type:I.type,key:U,ref:I.ref,props:I.props,_owner:I._owner}}function K(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function Z(I){var U={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ve){return U[ve]})}var xe=/\/+/g;function de(I,U){return typeof I=="object"&&I!==null&&I.key!=null?Z(""+I.key):U.toString(36)}function Ce(I,U,ve,be,Ae){var Pe=typeof I;(Pe==="undefined"||Pe==="boolean")&&(I=null);var Te=!1;if(I===null)Te=!0;else switch(Pe){case"string":case"number":Te=!0;break;case"object":switch(I.$$typeof){case r:case e:Te=!0}}if(Te)return Te=I,Ae=Ae(Te),I=be===""?"."+de(Te,0):be,E(Ae)?(ve="",I!=null&&(ve=I.replace(xe,"$&/")+"/"),Ce(Ae,U,ve,"",function(rt){return rt})):Ae!=null&&(K(Ae)&&(Ae=ne(Ae,ve+(!Ae.key||Te&&Te.key===Ae.key?"":(""+Ae.key).replace(xe,"$&/")+"/")+I)),U.push(Ae)),1;if(Te=0,be=be===""?".":be+":",E(I))for(var Ie=0;Ie<I.length;Ie++){Pe=I[Ie];var $e=be+de(Pe,Ie);Te+=Ce(Pe,U,ve,$e,Ae)}else if($e=x(I),typeof $e=="function")for(I=$e.call(I),Ie=0;!(Pe=I.next()).done;)Pe=Pe.value,$e=be+de(Pe,Ie++),Te+=Ce(Pe,U,ve,$e,Ae);else if(Pe==="object")throw U=String(I),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Te}function ft(I,U,ve){if(I==null)return I;var be=[],Ae=0;return Ce(I,be,"","",function(Pe){return U.call(ve,Pe,Ae++)}),be}function J(I){if(I._status===-1){var U=I._result;U=U(),U.then(function(ve){(I._status===0||I._status===-1)&&(I._status=1,I._result=ve)},function(ve){(I._status===0||I._status===-1)&&(I._status=2,I._result=ve)}),I._status===-1&&(I._status=0,I._result=U)}if(I._status===1)return I._result.default;throw I._result}var te={current:null},Q={transition:null},q={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:Q,ReactCurrentOwner:$};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:ft,forEach:function(I,U,ve){ft(I,function(){U.apply(this,arguments)},ve)},count:function(I){var U=0;return ft(I,function(){U++}),U},toArray:function(I){return ft(I,function(U){return U})||[]},only:function(I){if(!K(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ee.Component=w,Ee.Fragment=t,Ee.Profiler=o,Ee.PureComponent=A,Ee.StrictMode=s,Ee.Suspense=d,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Ee.act=ee,Ee.cloneElement=function(I,U,ve){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var be=S({},I.props),Ae=I.key,Pe=I.ref,Te=I._owner;if(U!=null){if(U.ref!==void 0&&(Pe=U.ref,Te=$.current),U.key!==void 0&&(Ae=""+U.key),I.type&&I.type.defaultProps)var Ie=I.type.defaultProps;for($e in U)G.call(U,$e)&&!O.hasOwnProperty($e)&&(be[$e]=U[$e]===void 0&&Ie!==void 0?Ie[$e]:U[$e])}var $e=arguments.length-2;if($e===1)be.children=ve;else if(1<$e){Ie=Array($e);for(var rt=0;rt<$e;rt++)Ie[rt]=arguments[rt+2];be.children=Ie}return{$$typeof:r,type:I.type,key:Ae,ref:Pe,props:be,_owner:Te}},Ee.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:l,_context:I},I.Consumer=I},Ee.createElement=X,Ee.createFactory=function(I){var U=X.bind(null,I);return U.type=I,U},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(I){return{$$typeof:c,render:I}},Ee.isValidElement=K,Ee.lazy=function(I){return{$$typeof:m,_payload:{_status:-1,_result:I},_init:J}},Ee.memo=function(I,U){return{$$typeof:p,type:I,compare:U===void 0?null:U}},Ee.startTransition=function(I){var U=Q.transition;Q.transition={};try{I()}finally{Q.transition=U}},Ee.unstable_act=ee,Ee.useCallback=function(I,U){return te.current.useCallback(I,U)},Ee.useContext=function(I){return te.current.useContext(I)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(I){return te.current.useDeferredValue(I)},Ee.useEffect=function(I,U){return te.current.useEffect(I,U)},Ee.useId=function(){return te.current.useId()},Ee.useImperativeHandle=function(I,U,ve){return te.current.useImperativeHandle(I,U,ve)},Ee.useInsertionEffect=function(I,U){return te.current.useInsertionEffect(I,U)},Ee.useLayoutEffect=function(I,U){return te.current.useLayoutEffect(I,U)},Ee.useMemo=function(I,U){return te.current.useMemo(I,U)},Ee.useReducer=function(I,U,ve){return te.current.useReducer(I,U,ve)},Ee.useRef=function(I){return te.current.useRef(I)},Ee.useState=function(I){return te.current.useState(I)},Ee.useSyncExternalStore=function(I,U,ve){return te.current.useSyncExternalStore(I,U,ve)},Ee.useTransition=function(){return te.current.useTransition()},Ee.version="18.3.1",Ee}var Pf;function Vc(){return Pf||(Pf=1,Vu.exports=xg()),Vu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf;function vg(){if(Tf)return Ws;Tf=1;var r=Vc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,p){var m,y={},x=null,v=null;p!==void 0&&(x=""+p),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(m in d)s.call(d,m)&&!l.hasOwnProperty(m)&&(y[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:c,key:x,ref:v,props:y,_owner:o.current}}return Ws.Fragment=t,Ws.jsx=u,Ws.jsxs=u,Ws}var Ef;function _g(){return Ef||(Ef=1,Hu.exports=vg()),Hu.exports}var L=_g(),Ta={},Yu={exports:{}},Xt={},Xu={exports:{}},qu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mf;function wg(){return Mf||(Mf=1,(function(r){function e(Q,q){var ee=Q.length;Q.push(q);e:for(;0<ee;){var I=ee-1>>>1,U=Q[I];if(0<o(U,q))Q[I]=q,Q[ee]=U,ee=I;else break e}}function t(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var q=Q[0],ee=Q.pop();if(ee!==q){Q[0]=ee;e:for(var I=0,U=Q.length,ve=U>>>1;I<ve;){var be=2*(I+1)-1,Ae=Q[be],Pe=be+1,Te=Q[Pe];if(0>o(Ae,ee))Pe<U&&0>o(Te,Ae)?(Q[I]=Te,Q[Pe]=ee,I=Pe):(Q[I]=Ae,Q[be]=ee,I=be);else if(Pe<U&&0>o(Te,ee))Q[I]=Te,Q[Pe]=ee,I=Pe;else break e}}return q}function o(Q,q){var ee=Q.sortIndex-q.sortIndex;return ee!==0?ee:Q.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],p=[],m=1,y=null,x=3,v=!1,S=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(Q){for(var q=t(p);q!==null;){if(q.callback===null)s(p);else if(q.startTime<=Q)s(p),q.sortIndex=q.expirationTime,e(d,q);else break;q=t(p)}}function E(Q){if(b=!1,P(Q),!S)if(t(d)!==null)S=!0,J(G);else{var q=t(p);q!==null&&te(E,q.startTime-Q)}}function G(Q,q){S=!1,b&&(b=!1,C(X),X=-1),v=!0;var ee=x;try{for(P(q),y=t(d);y!==null&&(!(y.expirationTime>q)||Q&&!Z());){var I=y.callback;if(typeof I=="function"){y.callback=null,x=y.priorityLevel;var U=I(y.expirationTime<=q);q=r.unstable_now(),typeof U=="function"?y.callback=U:y===t(d)&&s(d),P(q)}else s(d);y=t(d)}if(y!==null)var ve=!0;else{var be=t(p);be!==null&&te(E,be.startTime-q),ve=!1}return ve}finally{y=null,x=ee,v=!1}}var $=!1,O=null,X=-1,ne=5,K=-1;function Z(){return!(r.unstable_now()-K<ne)}function xe(){if(O!==null){var Q=r.unstable_now();K=Q;var q=!0;try{q=O(!0,Q)}finally{q?de():($=!1,O=null)}}else $=!1}var de;if(typeof A=="function")de=function(){A(xe)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,ft=Ce.port2;Ce.port1.onmessage=xe,de=function(){ft.postMessage(null)}}else de=function(){w(xe,0)};function J(Q){O=Q,$||($=!0,de())}function te(Q,q){X=w(function(){Q(r.unstable_now())},q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_continueExecution=function(){S||v||(S=!0,J(G))},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(Q){switch(x){case 1:case 2:case 3:var q=3;break;default:q=x}var ee=x;x=q;try{return Q()}finally{x=ee}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Q,q){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ee=x;x=Q;try{return q()}finally{x=ee}},r.unstable_scheduleCallback=function(Q,q,ee){var I=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?I+ee:I):ee=I,Q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ee+U,Q={id:m++,callback:q,priorityLevel:Q,startTime:ee,expirationTime:U,sortIndex:-1},ee>I?(Q.sortIndex=ee,e(p,Q),t(d)===null&&Q===t(p)&&(b?(C(X),X=-1):b=!0,te(E,ee-I))):(Q.sortIndex=U,e(d,Q),S||v||(S=!0,J(G))),Q},r.unstable_shouldYield=Z,r.unstable_wrapCallback=function(Q){var q=x;return function(){var ee=x;x=q;try{return Q.apply(this,arguments)}finally{x=ee}}}})(qu)),qu}var Rf;function Sg(){return Rf||(Rf=1,Xu.exports=wg()),Xu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If;function bg(){if(If)return Xt;If=1;var r=Vc(),e=Sg();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){u(n,i),u(n+"Capture",i)}function u(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function x(n){return d.call(y,n)?!0:d.call(m,n)?!1:p.test(n)?y[n]=!0:(m[n]=!0,!1)}function v(n,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,i,a,h){if(i===null||typeof i>"u"||v(n,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function b(n,i,a,h,f,g,_){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=_}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){w[n]=new b(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];w[i]=new b(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){w[n]=new b(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){w[n]=new b(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){w[n]=new b(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){w[n]=new b(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){w[n]=new b(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){w[n]=new b(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){w[n]=new b(n,5,!1,n.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function A(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(C,A);w[i]=new b(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(C,A);w[i]=new b(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(C,A);w[i]=new b(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){w[n]=new b(n,1,!1,n.toLowerCase(),null,!1,!1)}),w.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){w[n]=new b(n,1,!1,n.toLowerCase(),null,!0,!0)});function P(n,i,a,h){var f=w.hasOwnProperty(i)?w[i]:null;(f!==null?f.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(S(i,a,f,h)&&(a=null),h||f===null?x(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,h=f.attributeNamespace,a===null?n.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?n.setAttributeNS(h,i,a):n.setAttribute(i,a))))}var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),$=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),Z=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),Q=Symbol.iterator;function q(n){return n===null||typeof n!="object"?null:(n=Q&&n[Q]||n["@@iterator"],typeof n=="function"?n:null)}var ee=Object.assign,I;function U(n){if(I===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);I=i&&i[1]||""}return`
`+I+n}var ve=!1;function be(n,i){if(!n||ve)return"";ve=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var h=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){h=B}n.call(i.prototype)}else{try{throw Error()}catch(B){h=B}n()}}catch(B){if(B&&h&&typeof B.stack=="string"){for(var f=B.stack.split(`
`),g=h.stack.split(`
`),_=f.length-1,k=g.length-1;1<=_&&0<=k&&f[_]!==g[k];)k--;for(;1<=_&&0<=k;_--,k--)if(f[_]!==g[k]){if(_!==1||k!==1)do if(_--,k--,0>k||f[_]!==g[k]){var T=`
`+f[_].replace(" at new "," at ");return n.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",n.displayName)),T}while(1<=_&&0<=k);break}}}finally{ve=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?U(n):""}function Ae(n){switch(n.tag){case 5:return U(n.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return n=be(n.type,!1),n;case 11:return n=be(n.type.render,!1),n;case 1:return n=be(n.type,!0),n;default:return""}}function Pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case O:return"Fragment";case $:return"Portal";case ne:return"Profiler";case X:return"StrictMode";case de:return"Suspense";case Ce:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Z:return(n.displayName||"Context")+".Consumer";case K:return(n._context.displayName||"Context")+".Provider";case xe:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ft:return i=n.displayName||null,i!==null?i:Pe(n.type)||"Memo";case J:i=n._payload,n=n._init;try{return Pe(n(i))}catch{}}return null}function Te(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(i);case 8:return i===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ie(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function rt(n){var i=$e(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),h=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){h=""+_,g.call(this,_)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(_){h=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ln(n){n._valueTracker||(n._valueTracker=rt(n))}function an(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return n&&(h=$e(n)?n.checked?"true":"false":n.value),n=h,n!==a?(i.setValue(n),!0):!1}function Ut(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function jt(n,i){var a=i.checked;return ee({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Kt(n,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=Ie(i.value!=null?i.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Fr(n,i){i=i.checked,i!=null&&P(n,"checked",i,!1)}function At(n,i){Fr(n,i);var a=Ie(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?mt(n,i.type,a):i.hasOwnProperty("defaultValue")&&mt(n,i.type,Ie(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Vn(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function mt(n,i,a){(i!=="number"||Ut(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Fn=Array.isArray;function ur(n,i,a,h){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&h&&(n[a].defaultSelected=!0)}else{for(a=""+Ie(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function cr(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function yo(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Fn(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Ie(a)}}function _n(n,i){var a=Ie(i.value),h=Ie(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function ns(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function xo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rs(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?xo(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var li,ui=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,f){MSApp.execUnsafeLocalFunction(function(){return n(i,a,h,f)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(li=li||document.createElement("div"),li.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=li.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function zn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vo=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(n){vo.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),zr[i]=zr[n]})});function is(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||zr.hasOwnProperty(n)&&zr[n]?(""+i).trim():i+"px"}function hr(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=is(a,i[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,f):n[a]=f}}var ln=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ss(n,i){if(i){if(ln[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function os(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var as=null;function Br(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ls=null,Bn=null,dr=null;function ue(n){if(n=Es(n)){if(typeof ls!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Go(i),ls(n.stateNode,n.type,i))}}function us(n){Bn?dr?dr.push(n):dr=[n]:Bn=n}function ci(){if(Bn){var n=Bn,i=dr;if(dr=Bn=null,ue(n),i)for(n=0;n<i.length;n++)ue(i[n])}}function _o(n,i){return n(i)}function wo(){}var hi=!1;function So(n,i,a){if(hi)return n(i,a);hi=!0;try{return _o(n,i,a)}finally{hi=!1,(Bn!==null||dr!==null)&&(wo(),ci())}}function Yn(n,i){var a=n.stateNode;if(a===null)return null;var h=Go(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var di=!1;if(c)try{var Xn={};Object.defineProperty(Xn,"passive",{get:function(){di=!0}}),window.addEventListener("test",Xn,Xn),window.removeEventListener("test",Xn,Xn)}catch{di=!1}function al(n,i,a,h,f,g,_,k,T){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(H){this.onError(H)}}var jr=!1,fi=null,pi=!1,cs=null,ll={onError:function(n){jr=!0,fi=n}};function Dr(n,i,a,h,f,g,_,k,T){jr=!1,fi=null,al.apply(ll,arguments)}function ul(n,i,a,h,f,g,_,k,T){if(Dr.apply(this,arguments),jr){if(jr){var B=fi;jr=!1,fi=null}else throw Error(t(198));pi||(pi=!0,cs=B)}}function jn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function mi(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function bo(n){if(jn(n)!==n)throw Error(t(188))}function cl(n){var i=n.alternate;if(!i){if(i=jn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,h=i;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return bo(f),n;if(g===h)return bo(f),i;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var _=!1,k=f.child;k;){if(k===a){_=!0,a=f,h=g;break}if(k===h){_=!0,h=f,a=g;break}k=k.sibling}if(!_){for(k=g.child;k;){if(k===a){_=!0,a=g,h=f;break}if(k===h){_=!0,h=g,a=f;break}k=k.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function ko(n){return n=cl(n),n!==null?Co(n):null}function Co(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Co(n);if(i!==null)return i;n=n.sibling}return null}var Or=e.unstable_scheduleCallback,Ao=e.unstable_cancelCallback,hl=e.unstable_shouldYield,dl=e.unstable_requestPaint,it=e.unstable_now,fl=e.unstable_getCurrentPriorityLevel,hs=e.unstable_ImmediatePriority,Po=e.unstable_UserBlockingPriority,gi=e.unstable_NormalPriority,pl=e.unstable_LowPriority,To=e.unstable_IdlePriority,fr=null,un=null;function ds(n){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(fr,n,void 0,(n.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:gl,Ze=Math.log,ml=Math.LN2;function gl(n){return n>>>=0,n===0?32:31-(Ze(n)/ml|0)|0}var R=64,j=4194304;function D(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function N(n,i){var a=n.pendingLanes;if(a===0)return 0;var h=0,f=n.suspendedLanes,g=n.pingedLanes,_=a&268435455;if(_!==0){var k=_&~f;k!==0?h=D(k):(g&=_,g!==0&&(h=D(g)))}else _=a&~f,_!==0?h=D(_):g!==0&&(h=D(g));if(h===0)return 0;if(i!==0&&i!==h&&(i&f)===0&&(f=h&-h,g=i&-i,f>=g||f===16&&(g&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=h;0<i;)a=31-Qt(i),f=1<<a,h|=n[a],i&=~f;return h}function se(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Be(n,i){for(var a=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var _=31-Qt(g),k=1<<_,T=f[_];T===-1?((k&a)===0||(k&h)!==0)&&(f[_]=se(k,i)):T<=i&&(n.expiredLanes|=k),g&=~k}}function we(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function oe(){var n=R;return R<<=1,(R&4194240)===0&&(R=64),n}function Fe(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ue(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Qt(i),n[i]=a}function De(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Qt(a),g=1<<f;i[f]=0,h[f]=-1,n[f]=-1,a&=~g}}function Re(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var h=31-Qt(a),f=1<<h;f&i|n[h]&i&&(n[h]|=i),a&=~f}}var ge=0;function ke(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Se,Ne,vt,st,Je,gt=!1,Rt=[],et=null,pr=null,mr=null,fs=new Map,ps=new Map,gr=[],$0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lh(n,i){switch(n){case"focusin":case"focusout":et=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":fs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ps.delete(i.pointerId)}}function ms(n,i,a,h,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Es(i),i!==null&&Ne(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function N0(n,i,a,h,f){switch(i){case"focusin":return et=ms(et,n,i,a,h,f),!0;case"dragenter":return pr=ms(pr,n,i,a,h,f),!0;case"mouseover":return mr=ms(mr,n,i,a,h,f),!0;case"pointerover":var g=f.pointerId;return fs.set(g,ms(fs.get(g)||null,n,i,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,ps.set(g,ms(ps.get(g)||null,n,i,a,h,f)),!0}return!1}function uh(n){var i=$r(n.target);if(i!==null){var a=jn(i);if(a!==null){if(i=a.tag,i===13){if(i=mi(a),i!==null){n.blockedOn=i,Je(n.priority,function(){vt(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Eo(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=xl(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);as=h,a.target.dispatchEvent(h),as=null}else return i=Es(a),i!==null&&Ne(i),n.blockedOn=a,!1;i.shift()}return!0}function ch(n,i,a){Eo(n)&&a.delete(i)}function U0(){gt=!1,et!==null&&Eo(et)&&(et=null),pr!==null&&Eo(pr)&&(pr=null),mr!==null&&Eo(mr)&&(mr=null),fs.forEach(ch),ps.forEach(ch)}function gs(n,i){n.blockedOn===i&&(n.blockedOn=null,gt||(gt=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,U0)))}function ys(n){function i(f){return gs(f,n)}if(0<Rt.length){gs(Rt[0],n);for(var a=1;a<Rt.length;a++){var h=Rt[a];h.blockedOn===n&&(h.blockedOn=null)}}for(et!==null&&gs(et,n),pr!==null&&gs(pr,n),mr!==null&&gs(mr,n),fs.forEach(i),ps.forEach(i),a=0;a<gr.length;a++)h=gr[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<gr.length&&(a=gr[0],a.blockedOn===null);)uh(a),a.blockedOn===null&&gr.shift()}var yi=E.ReactCurrentBatchConfig,Mo=!0;function G0(n,i,a,h){var f=ge,g=yi.transition;yi.transition=null;try{ge=1,yl(n,i,a,h)}finally{ge=f,yi.transition=g}}function W0(n,i,a,h){var f=ge,g=yi.transition;yi.transition=null;try{ge=4,yl(n,i,a,h)}finally{ge=f,yi.transition=g}}function yl(n,i,a,h){if(Mo){var f=xl(n,i,a,h);if(f===null)zl(n,i,h,Ro,a),lh(n,h);else if(N0(f,n,i,a,h))h.stopPropagation();else if(lh(n,h),i&4&&-1<$0.indexOf(n)){for(;f!==null;){var g=Es(f);if(g!==null&&Se(g),g=xl(n,i,a,h),g===null&&zl(n,i,h,Ro,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else zl(n,i,h,null,a)}}var Ro=null;function xl(n,i,a,h){if(Ro=null,n=Br(h),n=$r(n),n!==null)if(i=jn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=mi(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Ro=n,null}function hh(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fl()){case hs:return 1;case Po:return 4;case gi:case pl:return 16;case To:return 536870912;default:return 16}default:return 16}}var yr=null,vl=null,Io=null;function dh(){if(Io)return Io;var n,i=vl,a=i.length,h,f="value"in yr?yr.value:yr.textContent,g=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(h=1;h<=_&&i[a-h]===f[g-h];h++);return Io=f.slice(n,1<h?1-h:void 0)}function Lo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Fo(){return!0}function fh(){return!1}function Zt(n){function i(a,h,f,g,_){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Fo:fh,this.isPropagationStopped=fh,this}return ee(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),i}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=Zt(xi),xs=ee({},xi,{view:0,detail:0}),H0=Zt(xs),wl,Sl,vs,zo=ee({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vs&&(vs&&n.type==="mousemove"?(wl=n.screenX-vs.screenX,Sl=n.screenY-vs.screenY):Sl=wl=0,vs=n),wl)},movementY:function(n){return"movementY"in n?n.movementY:Sl}}),ph=Zt(zo),V0=ee({},zo,{dataTransfer:0}),Y0=Zt(V0),X0=ee({},xs,{relatedTarget:0}),bl=Zt(X0),q0=ee({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),K0=Zt(q0),Q0=ee({},xi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Z0=Zt(Q0),J0=ee({},xi,{data:0}),mh=Zt(J0),em={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rm(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=nm[n])?!!i[n]:!1}function kl(){return rm}var im=ee({},xs,{key:function(n){if(n.key){var i=em[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Lo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tm[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kl,charCode:function(n){return n.type==="keypress"?Lo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Lo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sm=Zt(im),om=ee({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gh=Zt(om),am=ee({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kl}),lm=Zt(am),um=ee({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),cm=Zt(um),hm=ee({},zo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dm=Zt(hm),fm=[9,13,27,32],Cl=c&&"CompositionEvent"in window,_s=null;c&&"documentMode"in document&&(_s=document.documentMode);var pm=c&&"TextEvent"in window&&!_s,yh=c&&(!Cl||_s&&8<_s&&11>=_s),xh=" ",vh=!1;function _h(n,i){switch(n){case"keyup":return fm.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vi=!1;function mm(n,i){switch(n){case"compositionend":return wh(i);case"keypress":return i.which!==32?null:(vh=!0,xh);case"textInput":return n=i.data,n===xh&&vh?null:n;default:return null}}function gm(n,i){if(vi)return n==="compositionend"||!Cl&&_h(n,i)?(n=dh(),Io=vl=yr=null,vi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yh&&i.locale!=="ko"?null:i.data;default:return null}}var ym={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!ym[n.type]:i==="textarea"}function bh(n,i,a,h){us(h),i=$o(i,"onChange"),0<i.length&&(a=new _l("onChange","change",null,a,h),n.push({event:a,listeners:i}))}var ws=null,Ss=null;function xm(n){Nh(n,0)}function Bo(n){var i=ki(n);if(an(i))return n}function vm(n,i){if(n==="change")return i}var kh=!1;if(c){var Al;if(c){var Pl="oninput"in document;if(!Pl){var Ch=document.createElement("div");Ch.setAttribute("oninput","return;"),Pl=typeof Ch.oninput=="function"}Al=Pl}else Al=!1;kh=Al&&(!document.documentMode||9<document.documentMode)}function Ah(){ws&&(ws.detachEvent("onpropertychange",Ph),Ss=ws=null)}function Ph(n){if(n.propertyName==="value"&&Bo(Ss)){var i=[];bh(i,Ss,n,Br(n)),So(xm,i)}}function _m(n,i,a){n==="focusin"?(Ah(),ws=i,Ss=a,ws.attachEvent("onpropertychange",Ph)):n==="focusout"&&Ah()}function wm(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bo(Ss)}function Sm(n,i){if(n==="click")return Bo(i)}function bm(n,i){if(n==="input"||n==="change")return Bo(i)}function km(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var wn=typeof Object.is=="function"?Object.is:km;function bs(n,i){if(wn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!d.call(i,f)||!wn(n[f],i[f]))return!1}return!0}function Th(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Eh(n,i){var a=Th(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=i&&h>=i)return{node:a,offset:i-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Th(a)}}function Mh(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Mh(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Rh(){for(var n=window,i=Ut();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ut(n.document)}return i}function Tl(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Cm(n){var i=Rh(),a=n.focusedElem,h=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Mh(a.ownerDocument.documentElement,a)){if(h!==null&&Tl(a)){if(i=h.start,n=h.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!n.extend&&g>h&&(f=h,h=g,g=f),f=Eh(a,g);var _=Eh(a,h);f&&_&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),n.removeAllRanges(),g>h?(n.addRange(i),n.extend(_.node,_.offset)):(i.setEnd(_.node,_.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Am=c&&"documentMode"in document&&11>=document.documentMode,_i=null,El=null,ks=null,Ml=!1;function Ih(n,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ml||_i==null||_i!==Ut(h)||(h=_i,"selectionStart"in h&&Tl(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ks&&bs(ks,h)||(ks=h,h=$o(El,"onSelect"),0<h.length&&(i=new _l("onSelect","select",null,i,a),n.push({event:i,listeners:h}),i.target=_i)))}function jo(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var wi={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},Rl={},Lh={};c&&(Lh=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function Do(n){if(Rl[n])return Rl[n];if(!wi[n])return n;var i=wi[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Lh)return Rl[n]=i[a];return n}var Fh=Do("animationend"),zh=Do("animationiteration"),Bh=Do("animationstart"),jh=Do("transitionend"),Dh=new Map,Oh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(n,i){Dh.set(n,i),l(i,[n])}for(var Il=0;Il<Oh.length;Il++){var Ll=Oh[Il],Pm=Ll.toLowerCase(),Tm=Ll[0].toUpperCase()+Ll.slice(1);xr(Pm,"on"+Tm)}xr(Fh,"onAnimationEnd"),xr(zh,"onAnimationIteration"),xr(Bh,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(jh,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Em=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cs));function $h(n,i,a){var h=n.type||"unknown-event";n.currentTarget=a,ul(h,i,void 0,n),n.currentTarget=null}function Nh(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],f=h.event;h=h.listeners;e:{var g=void 0;if(i)for(var _=h.length-1;0<=_;_--){var k=h[_],T=k.instance,B=k.currentTarget;if(k=k.listener,T!==g&&f.isPropagationStopped())break e;$h(f,k,B),g=T}else for(_=0;_<h.length;_++){if(k=h[_],T=k.instance,B=k.currentTarget,k=k.listener,T!==g&&f.isPropagationStopped())break e;$h(f,k,B),g=T}}}if(pi)throw n=cs,pi=!1,cs=null,n}function Xe(n,i){var a=i[Nl];a===void 0&&(a=i[Nl]=new Set);var h=n+"__bubble";a.has(h)||(Uh(i,n,2,!1),a.add(h))}function Fl(n,i,a){var h=0;i&&(h|=4),Uh(a,n,h,i)}var Oo="_reactListening"+Math.random().toString(36).slice(2);function As(n){if(!n[Oo]){n[Oo]=!0,s.forEach(function(a){a!=="selectionchange"&&(Em.has(a)||Fl(a,!1,n),Fl(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Oo]||(i[Oo]=!0,Fl("selectionchange",!1,i))}}function Uh(n,i,a,h){switch(hh(i)){case 1:var f=G0;break;case 4:f=W0;break;default:f=yl}a=f.bind(null,i,a,n),f=void 0,!di||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function zl(n,i,a,h,f){var g=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var k=h.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(_===4)for(_=h.return;_!==null;){var T=_.tag;if((T===3||T===4)&&(T=_.stateNode.containerInfo,T===f||T.nodeType===8&&T.parentNode===f))return;_=_.return}for(;k!==null;){if(_=$r(k),_===null)return;if(T=_.tag,T===5||T===6){h=g=_;continue e}k=k.parentNode}}h=h.return}So(function(){var B=g,H=Br(a),V=[];e:{var W=Dh.get(n);if(W!==void 0){var re=_l,ae=n;switch(n){case"keypress":if(Lo(a)===0)break e;case"keydown":case"keyup":re=sm;break;case"focusin":ae="focus",re=bl;break;case"focusout":ae="blur",re=bl;break;case"beforeblur":case"afterblur":re=bl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ph;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Y0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=lm;break;case Fh:case zh:case Bh:re=K0;break;case jh:re=cm;break;case"scroll":re=H0;break;case"wheel":re=dm;break;case"copy":case"cut":case"paste":re=Z0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=gh}var le=(i&4)!==0,pt=!le&&n==="scroll",F=le?W!==null?W+"Capture":null:W;le=[];for(var M=B,z;M!==null;){z=M;var Y=z.stateNode;if(z.tag===5&&Y!==null&&(z=Y,F!==null&&(Y=Yn(M,F),Y!=null&&le.push(Ps(M,Y,z)))),pt)break;M=M.return}0<le.length&&(W=new re(W,ae,null,a,H),V.push({event:W,listeners:le}))}}if((i&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",W&&a!==as&&(ae=a.relatedTarget||a.fromElement)&&($r(ae)||ae[qn]))break e;if((re||W)&&(W=H.window===H?H:(W=H.ownerDocument)?W.defaultView||W.parentWindow:window,re?(ae=a.relatedTarget||a.toElement,re=B,ae=ae?$r(ae):null,ae!==null&&(pt=jn(ae),ae!==pt||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(re=null,ae=B),re!==ae)){if(le=ph,Y="onMouseLeave",F="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(le=gh,Y="onPointerLeave",F="onPointerEnter",M="pointer"),pt=re==null?W:ki(re),z=ae==null?W:ki(ae),W=new le(Y,M+"leave",re,a,H),W.target=pt,W.relatedTarget=z,Y=null,$r(H)===B&&(le=new le(F,M+"enter",ae,a,H),le.target=z,le.relatedTarget=pt,Y=le),pt=Y,re&&ae)t:{for(le=re,F=ae,M=0,z=le;z;z=Si(z))M++;for(z=0,Y=F;Y;Y=Si(Y))z++;for(;0<M-z;)le=Si(le),M--;for(;0<z-M;)F=Si(F),z--;for(;M--;){if(le===F||F!==null&&le===F.alternate)break t;le=Si(le),F=Si(F)}le=null}else le=null;re!==null&&Gh(V,W,re,le,!1),ae!==null&&pt!==null&&Gh(V,pt,ae,le,!0)}}e:{if(W=B?ki(B):window,re=W.nodeName&&W.nodeName.toLowerCase(),re==="select"||re==="input"&&W.type==="file")var ce=vm;else if(Sh(W))if(kh)ce=bm;else{ce=wm;var pe=_m}else(re=W.nodeName)&&re.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(ce=Sm);if(ce&&(ce=ce(n,B))){bh(V,ce,a,H);break e}pe&&pe(n,W,B),n==="focusout"&&(pe=W._wrapperState)&&pe.controlled&&W.type==="number"&&mt(W,"number",W.value)}switch(pe=B?ki(B):window,n){case"focusin":(Sh(pe)||pe.contentEditable==="true")&&(_i=pe,El=B,ks=null);break;case"focusout":ks=El=_i=null;break;case"mousedown":Ml=!0;break;case"contextmenu":case"mouseup":case"dragend":Ml=!1,Ih(V,a,H);break;case"selectionchange":if(Am)break;case"keydown":case"keyup":Ih(V,a,H)}var me;if(Cl)e:{switch(n){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else vi?_h(n,a)&&(_e="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(yh&&a.locale!=="ko"&&(vi||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&vi&&(me=dh()):(yr=H,vl="value"in yr?yr.value:yr.textContent,vi=!0)),pe=$o(B,_e),0<pe.length&&(_e=new mh(_e,n,null,a,H),V.push({event:_e,listeners:pe}),me?_e.data=me:(me=wh(a),me!==null&&(_e.data=me)))),(me=pm?mm(n,a):gm(n,a))&&(B=$o(B,"onBeforeInput"),0<B.length&&(H=new mh("onBeforeInput","beforeinput",null,a,H),V.push({event:H,listeners:B}),H.data=me))}Nh(V,i)})}function Ps(n,i,a){return{instance:n,listener:i,currentTarget:a}}function $o(n,i){for(var a=i+"Capture",h=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=Yn(n,a),g!=null&&h.unshift(Ps(n,g,f)),g=Yn(n,i),g!=null&&h.push(Ps(n,g,f))),n=n.return}return h}function Si(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gh(n,i,a,h,f){for(var g=i._reactName,_=[];a!==null&&a!==h;){var k=a,T=k.alternate,B=k.stateNode;if(T!==null&&T===h)break;k.tag===5&&B!==null&&(k=B,f?(T=Yn(a,g),T!=null&&_.unshift(Ps(a,T,k))):f||(T=Yn(a,g),T!=null&&_.push(Ps(a,T,k)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var Mm=/\r\n?/g,Rm=/\u0000|\uFFFD/g;function Wh(n){return(typeof n=="string"?n:""+n).replace(Mm,`
`).replace(Rm,"")}function No(n,i,a){if(i=Wh(i),Wh(n)!==i&&a)throw Error(t(425))}function Uo(){}var Bl=null,jl=null;function Dl(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ol=typeof setTimeout=="function"?setTimeout:void 0,Im=typeof clearTimeout=="function"?clearTimeout:void 0,Hh=typeof Promise=="function"?Promise:void 0,Lm=typeof queueMicrotask=="function"?queueMicrotask:typeof Hh<"u"?function(n){return Hh.resolve(null).then(n).catch(Fm)}:Ol;function Fm(n){setTimeout(function(){throw n})}function $l(n,i){var a=i,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){n.removeChild(f),ys(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);ys(i)}function vr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Vh(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var bi=Math.random().toString(36).slice(2),Dn="__reactFiber$"+bi,Ts="__reactProps$"+bi,qn="__reactContainer$"+bi,Nl="__reactEvents$"+bi,zm="__reactListeners$"+bi,Bm="__reactHandles$"+bi;function $r(n){var i=n[Dn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[qn]||a[Dn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Vh(n);n!==null;){if(a=n[Dn])return a;n=Vh(n)}return i}n=a,a=n.parentNode}return null}function Es(n){return n=n[Dn]||n[qn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ki(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Go(n){return n[Ts]||null}var Ul=[],Ci=-1;function _r(n){return{current:n}}function qe(n){0>Ci||(n.current=Ul[Ci],Ul[Ci]=null,Ci--)}function Ve(n,i){Ci++,Ul[Ci]=n.current,n.current=i}var wr={},It=_r(wr),Gt=_r(!1),Nr=wr;function Ai(n,i){var a=n.type.contextTypes;if(!a)return wr;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=i[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=f),f}function Wt(n){return n=n.childContextTypes,n!=null}function Wo(){qe(Gt),qe(It)}function Yh(n,i,a){if(It.current!==wr)throw Error(t(168));Ve(It,i),Ve(Gt,a)}function Xh(n,i,a){var h=n.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in i))throw Error(t(108,Te(n)||"Unknown",f));return ee({},a,h)}function Ho(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||wr,Nr=It.current,Ve(It,n),Ve(Gt,Gt.current),!0}function qh(n,i,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=Xh(n,i,Nr),h.__reactInternalMemoizedMergedChildContext=n,qe(Gt),qe(It),Ve(It,n)):qe(Gt),Ve(Gt,a)}var Kn=null,Vo=!1,Gl=!1;function Kh(n){Kn===null?Kn=[n]:Kn.push(n)}function jm(n){Vo=!0,Kh(n)}function Sr(){if(!Gl&&Kn!==null){Gl=!0;var n=0,i=ge;try{var a=Kn;for(ge=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}Kn=null,Vo=!1}catch(f){throw Kn!==null&&(Kn=Kn.slice(n+1)),Or(hs,Sr),f}finally{ge=i,Gl=!1}}return null}var Pi=[],Ti=0,Yo=null,Xo=0,cn=[],hn=0,Ur=null,Qn=1,Zn="";function Gr(n,i){Pi[Ti++]=Xo,Pi[Ti++]=Yo,Yo=n,Xo=i}function Qh(n,i,a){cn[hn++]=Qn,cn[hn++]=Zn,cn[hn++]=Ur,Ur=n;var h=Qn;n=Zn;var f=32-Qt(h)-1;h&=~(1<<f),a+=1;var g=32-Qt(i)+f;if(30<g){var _=f-f%5;g=(h&(1<<_)-1).toString(32),h>>=_,f-=_,Qn=1<<32-Qt(i)+f|a<<f|h,Zn=g+n}else Qn=1<<g|a<<f|h,Zn=n}function Wl(n){n.return!==null&&(Gr(n,1),Qh(n,1,0))}function Hl(n){for(;n===Yo;)Yo=Pi[--Ti],Pi[Ti]=null,Xo=Pi[--Ti],Pi[Ti]=null;for(;n===Ur;)Ur=cn[--hn],cn[hn]=null,Zn=cn[--hn],cn[hn]=null,Qn=cn[--hn],cn[hn]=null}var Jt=null,en=null,tt=!1,Sn=null;function Zh(n,i){var a=mn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Jh(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Jt=n,en=vr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Jt=n,en=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Ur!==null?{id:Qn,overflow:Zn}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=mn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Jt=n,en=null,!0):!1;default:return!1}}function Vl(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Yl(n){if(tt){var i=en;if(i){var a=i;if(!Jh(n,i)){if(Vl(n))throw Error(t(418));i=vr(a.nextSibling);var h=Jt;i&&Jh(n,i)?Zh(h,a):(n.flags=n.flags&-4097|2,tt=!1,Jt=n)}}else{if(Vl(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,Jt=n}}}function ed(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Jt=n}function qo(n){if(n!==Jt)return!1;if(!tt)return ed(n),tt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Dl(n.type,n.memoizedProps)),i&&(i=en)){if(Vl(n))throw td(),Error(t(418));for(;i;)Zh(n,i),i=vr(i.nextSibling)}if(ed(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){en=vr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}en=null}}else en=Jt?vr(n.stateNode.nextSibling):null;return!0}function td(){for(var n=en;n;)n=vr(n.nextSibling)}function Ei(){en=Jt=null,tt=!1}function Xl(n){Sn===null?Sn=[n]:Sn.push(n)}var Dm=E.ReactCurrentBatchConfig;function Ms(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var f=h,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(_){var k=f.refs;_===null?delete k[g]:k[g]=_},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Ko(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function nd(n){var i=n._init;return i(n._payload)}function rd(n){function i(F,M){if(n){var z=F.deletions;z===null?(F.deletions=[M],F.flags|=16):z.push(M)}}function a(F,M){if(!n)return null;for(;M!==null;)i(F,M),M=M.sibling;return null}function h(F,M){for(F=new Map;M!==null;)M.key!==null?F.set(M.key,M):F.set(M.index,M),M=M.sibling;return F}function f(F,M){return F=Mr(F,M),F.index=0,F.sibling=null,F}function g(F,M,z){return F.index=z,n?(z=F.alternate,z!==null?(z=z.index,z<M?(F.flags|=2,M):z):(F.flags|=2,M)):(F.flags|=1048576,M)}function _(F){return n&&F.alternate===null&&(F.flags|=2),F}function k(F,M,z,Y){return M===null||M.tag!==6?(M=Ou(z,F.mode,Y),M.return=F,M):(M=f(M,z),M.return=F,M)}function T(F,M,z,Y){var ce=z.type;return ce===O?H(F,M,z.props.children,Y,z.key):M!==null&&(M.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===J&&nd(ce)===M.type)?(Y=f(M,z.props),Y.ref=Ms(F,M,z),Y.return=F,Y):(Y=_a(z.type,z.key,z.props,null,F.mode,Y),Y.ref=Ms(F,M,z),Y.return=F,Y)}function B(F,M,z,Y){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=$u(z,F.mode,Y),M.return=F,M):(M=f(M,z.children||[]),M.return=F,M)}function H(F,M,z,Y,ce){return M===null||M.tag!==7?(M=Qr(z,F.mode,Y,ce),M.return=F,M):(M=f(M,z),M.return=F,M)}function V(F,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Ou(""+M,F.mode,z),M.return=F,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case G:return z=_a(M.type,M.key,M.props,null,F.mode,z),z.ref=Ms(F,null,M),z.return=F,z;case $:return M=$u(M,F.mode,z),M.return=F,M;case J:var Y=M._init;return V(F,Y(M._payload),z)}if(Fn(M)||q(M))return M=Qr(M,F.mode,z,null),M.return=F,M;Ko(F,M)}return null}function W(F,M,z,Y){var ce=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ce!==null?null:k(F,M,""+z,Y);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case G:return z.key===ce?T(F,M,z,Y):null;case $:return z.key===ce?B(F,M,z,Y):null;case J:return ce=z._init,W(F,M,ce(z._payload),Y)}if(Fn(z)||q(z))return ce!==null?null:H(F,M,z,Y,null);Ko(F,z)}return null}function re(F,M,z,Y,ce){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return F=F.get(z)||null,k(M,F,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case G:return F=F.get(Y.key===null?z:Y.key)||null,T(M,F,Y,ce);case $:return F=F.get(Y.key===null?z:Y.key)||null,B(M,F,Y,ce);case J:var pe=Y._init;return re(F,M,z,pe(Y._payload),ce)}if(Fn(Y)||q(Y))return F=F.get(z)||null,H(M,F,Y,ce,null);Ko(M,Y)}return null}function ae(F,M,z,Y){for(var ce=null,pe=null,me=M,_e=M=0,kt=null;me!==null&&_e<z.length;_e++){me.index>_e?(kt=me,me=null):kt=me.sibling;var Oe=W(F,me,z[_e],Y);if(Oe===null){me===null&&(me=kt);break}n&&me&&Oe.alternate===null&&i(F,me),M=g(Oe,M,_e),pe===null?ce=Oe:pe.sibling=Oe,pe=Oe,me=kt}if(_e===z.length)return a(F,me),tt&&Gr(F,_e),ce;if(me===null){for(;_e<z.length;_e++)me=V(F,z[_e],Y),me!==null&&(M=g(me,M,_e),pe===null?ce=me:pe.sibling=me,pe=me);return tt&&Gr(F,_e),ce}for(me=h(F,me);_e<z.length;_e++)kt=re(me,F,_e,z[_e],Y),kt!==null&&(n&&kt.alternate!==null&&me.delete(kt.key===null?_e:kt.key),M=g(kt,M,_e),pe===null?ce=kt:pe.sibling=kt,pe=kt);return n&&me.forEach(function(Rr){return i(F,Rr)}),tt&&Gr(F,_e),ce}function le(F,M,z,Y){var ce=q(z);if(typeof ce!="function")throw Error(t(150));if(z=ce.call(z),z==null)throw Error(t(151));for(var pe=ce=null,me=M,_e=M=0,kt=null,Oe=z.next();me!==null&&!Oe.done;_e++,Oe=z.next()){me.index>_e?(kt=me,me=null):kt=me.sibling;var Rr=W(F,me,Oe.value,Y);if(Rr===null){me===null&&(me=kt);break}n&&me&&Rr.alternate===null&&i(F,me),M=g(Rr,M,_e),pe===null?ce=Rr:pe.sibling=Rr,pe=Rr,me=kt}if(Oe.done)return a(F,me),tt&&Gr(F,_e),ce;if(me===null){for(;!Oe.done;_e++,Oe=z.next())Oe=V(F,Oe.value,Y),Oe!==null&&(M=g(Oe,M,_e),pe===null?ce=Oe:pe.sibling=Oe,pe=Oe);return tt&&Gr(F,_e),ce}for(me=h(F,me);!Oe.done;_e++,Oe=z.next())Oe=re(me,F,_e,Oe.value,Y),Oe!==null&&(n&&Oe.alternate!==null&&me.delete(Oe.key===null?_e:Oe.key),M=g(Oe,M,_e),pe===null?ce=Oe:pe.sibling=Oe,pe=Oe);return n&&me.forEach(function(yg){return i(F,yg)}),tt&&Gr(F,_e),ce}function pt(F,M,z,Y){if(typeof z=="object"&&z!==null&&z.type===O&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case G:e:{for(var ce=z.key,pe=M;pe!==null;){if(pe.key===ce){if(ce=z.type,ce===O){if(pe.tag===7){a(F,pe.sibling),M=f(pe,z.props.children),M.return=F,F=M;break e}}else if(pe.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===J&&nd(ce)===pe.type){a(F,pe.sibling),M=f(pe,z.props),M.ref=Ms(F,pe,z),M.return=F,F=M;break e}a(F,pe);break}else i(F,pe);pe=pe.sibling}z.type===O?(M=Qr(z.props.children,F.mode,Y,z.key),M.return=F,F=M):(Y=_a(z.type,z.key,z.props,null,F.mode,Y),Y.ref=Ms(F,M,z),Y.return=F,F=Y)}return _(F);case $:e:{for(pe=z.key;M!==null;){if(M.key===pe)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a(F,M.sibling),M=f(M,z.children||[]),M.return=F,F=M;break e}else{a(F,M);break}else i(F,M);M=M.sibling}M=$u(z,F.mode,Y),M.return=F,F=M}return _(F);case J:return pe=z._init,pt(F,M,pe(z._payload),Y)}if(Fn(z))return ae(F,M,z,Y);if(q(z))return le(F,M,z,Y);Ko(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,M!==null&&M.tag===6?(a(F,M.sibling),M=f(M,z),M.return=F,F=M):(a(F,M),M=Ou(z,F.mode,Y),M.return=F,F=M),_(F)):a(F,M)}return pt}var Mi=rd(!0),id=rd(!1),Qo=_r(null),Zo=null,Ri=null,ql=null;function Kl(){ql=Ri=Zo=null}function Ql(n){var i=Qo.current;qe(Qo),n._currentValue=i}function Zl(n,i,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===a)break;n=n.return}}function Ii(n,i){Zo=n,ql=Ri=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Ht=!0),n.firstContext=null)}function dn(n){var i=n._currentValue;if(ql!==n)if(n={context:n,memoizedValue:i,next:null},Ri===null){if(Zo===null)throw Error(t(308));Ri=n,Zo.dependencies={lanes:0,firstContext:n}}else Ri=Ri.next=n;return i}var Wr=null;function Jl(n){Wr===null?Wr=[n]:Wr.push(n)}function sd(n,i,a,h){var f=i.interleaved;return f===null?(a.next=a,Jl(i)):(a.next=f.next,f.next=a),i.interleaved=a,Jn(n,h)}function Jn(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var br=!1;function eu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function od(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function er(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function kr(n,i,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(je&2)!==0){var f=h.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),h.pending=i,Jn(n,a)}return f=h.interleaved,f===null?(i.next=i,Jl(h)):(i.next=f.next,f.next=i),h.interleaved=i,Jn(n,a)}function Jo(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=n.pendingLanes,a|=h,i.lanes=a,Re(n,a)}}function ad(n,i){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=_:g=g.next=_,a=a.next}while(a!==null);g===null?f=g=i:g=g.next=i}else f=g=i;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function ea(n,i,a,h){var f=n.updateQueue;br=!1;var g=f.firstBaseUpdate,_=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var T=k,B=T.next;T.next=null,_===null?g=B:_.next=B,_=T;var H=n.alternate;H!==null&&(H=H.updateQueue,k=H.lastBaseUpdate,k!==_&&(k===null?H.firstBaseUpdate=B:k.next=B,H.lastBaseUpdate=T))}if(g!==null){var V=f.baseState;_=0,H=B=T=null,k=g;do{var W=k.lane,re=k.eventTime;if((h&W)===W){H!==null&&(H=H.next={eventTime:re,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ae=n,le=k;switch(W=i,re=a,le.tag){case 1:if(ae=le.payload,typeof ae=="function"){V=ae.call(re,V,W);break e}V=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=le.payload,W=typeof ae=="function"?ae.call(re,V,W):ae,W==null)break e;V=ee({},V,W);break e;case 2:br=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,W=f.effects,W===null?f.effects=[k]:W.push(k))}else re={eventTime:re,lane:W,tag:k.tag,payload:k.payload,callback:k.callback,next:null},H===null?(B=H=re,T=V):H=H.next=re,_|=W;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;W=k,k=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);if(H===null&&(T=V),f.baseState=T,f.firstBaseUpdate=B,f.lastBaseUpdate=H,i=f.shared.interleaved,i!==null){f=i;do _|=f.lane,f=f.next;while(f!==i)}else g===null&&(f.shared.lanes=0);Yr|=_,n.lanes=_,n.memoizedState=V}}function ld(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var h=n[i],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Rs={},On=_r(Rs),Is=_r(Rs),Ls=_r(Rs);function Hr(n){if(n===Rs)throw Error(t(174));return n}function tu(n,i){switch(Ve(Ls,i),Ve(Is,n),Ve(On,Rs),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:rs(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=rs(i,n)}qe(On),Ve(On,i)}function Li(){qe(On),qe(Is),qe(Ls)}function ud(n){Hr(Ls.current);var i=Hr(On.current),a=rs(i,n.type);i!==a&&(Ve(Is,n),Ve(On,a))}function nu(n){Is.current===n&&(qe(On),qe(Is))}var ot=_r(0);function ta(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ru=[];function iu(){for(var n=0;n<ru.length;n++)ru[n]._workInProgressVersionPrimary=null;ru.length=0}var na=E.ReactCurrentDispatcher,su=E.ReactCurrentBatchConfig,Vr=0,at=null,_t=null,St=null,ra=!1,Fs=!1,zs=0,Om=0;function Lt(){throw Error(t(321))}function ou(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!wn(n[a],i[a]))return!1;return!0}function au(n,i,a,h,f,g){if(Vr=g,at=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,na.current=n===null||n.memoizedState===null?Gm:Wm,n=a(h,f),Fs){g=0;do{if(Fs=!1,zs=0,25<=g)throw Error(t(301));g+=1,St=_t=null,i.updateQueue=null,na.current=Hm,n=a(h,f)}while(Fs)}if(na.current=oa,i=_t!==null&&_t.next!==null,Vr=0,St=_t=at=null,ra=!1,i)throw Error(t(300));return n}function lu(){var n=zs!==0;return zs=0,n}function $n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?at.memoizedState=St=n:St=St.next=n,St}function fn(){if(_t===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var i=St===null?at.memoizedState:St.next;if(i!==null)St=i,_t=n;else{if(n===null)throw Error(t(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},St===null?at.memoizedState=St=n:St=St.next=n}return St}function Bs(n,i){return typeof i=="function"?i(n):i}function uu(n){var i=fn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=_t,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var _=f.next;f.next=g.next,g.next=_}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var k=_=null,T=null,B=g;do{var H=B.lane;if((Vr&H)===H)T!==null&&(T=T.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),h=B.hasEagerState?B.eagerState:n(h,B.action);else{var V={lane:H,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};T===null?(k=T=V,_=h):T=T.next=V,at.lanes|=H,Yr|=H}B=B.next}while(B!==null&&B!==g);T===null?_=h:T.next=k,wn(h,i.memoizedState)||(Ht=!0),i.memoizedState=h,i.baseState=_,i.baseQueue=T,a.lastRenderedState=h}if(n=a.interleaved,n!==null){f=n;do g=f.lane,at.lanes|=g,Yr|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function cu(n){var i=fn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,f=a.pending,g=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do g=n(g,_.action),_=_.next;while(_!==f);wn(g,i.memoizedState)||(Ht=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,h]}function cd(){}function hd(n,i){var a=at,h=fn(),f=i(),g=!wn(h.memoizedState,f);if(g&&(h.memoizedState=f,Ht=!0),h=h.queue,hu(pd.bind(null,a,h,n),[n]),h.getSnapshot!==i||g||St!==null&&St.memoizedState.tag&1){if(a.flags|=2048,js(9,fd.bind(null,a,h,f,i),void 0,null),bt===null)throw Error(t(349));(Vr&30)!==0||dd(a,i,f)}return f}function dd(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function fd(n,i,a,h){i.value=a,i.getSnapshot=h,md(i)&&gd(n)}function pd(n,i,a){return a(function(){md(i)&&gd(n)})}function md(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!wn(n,a)}catch{return!0}}function gd(n){var i=Jn(n,1);i!==null&&An(i,n,1,-1)}function yd(n){var i=$n();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:n},i.queue=n,n=n.dispatch=Um.bind(null,at,n),[i.memoizedState,n]}function js(n,i,a,h){return n={tag:n,create:i,destroy:a,deps:h,next:null},i=at.updateQueue,i===null?(i={lastEffect:null,stores:null},at.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,i.lastEffect=n)),n}function xd(){return fn().memoizedState}function ia(n,i,a,h){var f=$n();at.flags|=n,f.memoizedState=js(1|i,a,void 0,h===void 0?null:h)}function sa(n,i,a,h){var f=fn();h=h===void 0?null:h;var g=void 0;if(_t!==null){var _=_t.memoizedState;if(g=_.destroy,h!==null&&ou(h,_.deps)){f.memoizedState=js(i,a,g,h);return}}at.flags|=n,f.memoizedState=js(1|i,a,g,h)}function vd(n,i){return ia(8390656,8,n,i)}function hu(n,i){return sa(2048,8,n,i)}function _d(n,i){return sa(4,2,n,i)}function wd(n,i){return sa(4,4,n,i)}function Sd(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function bd(n,i,a){return a=a!=null?a.concat([n]):null,sa(4,4,Sd.bind(null,i,n),a)}function du(){}function kd(n,i){var a=fn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&ou(i,h[1])?h[0]:(a.memoizedState=[n,i],n)}function Cd(n,i){var a=fn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&ou(i,h[1])?h[0]:(n=n(),a.memoizedState=[n,i],n)}function Ad(n,i,a){return(Vr&21)===0?(n.baseState&&(n.baseState=!1,Ht=!0),n.memoizedState=a):(wn(a,i)||(a=oe(),at.lanes|=a,Yr|=a,n.baseState=!0),i)}function $m(n,i){var a=ge;ge=a!==0&&4>a?a:4,n(!0);var h=su.transition;su.transition={};try{n(!1),i()}finally{ge=a,su.transition=h}}function Pd(){return fn().memoizedState}function Nm(n,i,a){var h=Tr(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Td(n))Ed(i,a);else if(a=sd(n,i,a,h),a!==null){var f=Ot();An(a,n,h,f),Md(a,i,h)}}function Um(n,i,a){var h=Tr(n),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Td(n))Ed(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var _=i.lastRenderedState,k=g(_,a);if(f.hasEagerState=!0,f.eagerState=k,wn(k,_)){var T=i.interleaved;T===null?(f.next=f,Jl(i)):(f.next=T.next,T.next=f),i.interleaved=f;return}}catch{}finally{}a=sd(n,i,f,h),a!==null&&(f=Ot(),An(a,n,h,f),Md(a,i,h))}}function Td(n){var i=n.alternate;return n===at||i!==null&&i===at}function Ed(n,i){Fs=ra=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Md(n,i,a){if((a&4194240)!==0){var h=i.lanes;h&=n.pendingLanes,a|=h,i.lanes=a,Re(n,a)}}var oa={readContext:dn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},Gm={readContext:dn,useCallback:function(n,i){return $n().memoizedState=[n,i===void 0?null:i],n},useContext:dn,useEffect:vd,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,ia(4194308,4,Sd.bind(null,i,n),a)},useLayoutEffect:function(n,i){return ia(4194308,4,n,i)},useInsertionEffect:function(n,i){return ia(4,2,n,i)},useMemo:function(n,i){var a=$n();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var h=$n();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},h.queue=n,n=n.dispatch=Nm.bind(null,at,n),[h.memoizedState,n]},useRef:function(n){var i=$n();return n={current:n},i.memoizedState=n},useState:yd,useDebugValue:du,useDeferredValue:function(n){return $n().memoizedState=n},useTransition:function(){var n=yd(!1),i=n[0];return n=$m.bind(null,n[1]),$n().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var h=at,f=$n();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),bt===null)throw Error(t(349));(Vr&30)!==0||dd(h,i,a)}f.memoizedState=a;var g={value:a,getSnapshot:i};return f.queue=g,vd(pd.bind(null,h,g,n),[n]),h.flags|=2048,js(9,fd.bind(null,h,g,a,i),void 0,null),a},useId:function(){var n=$n(),i=bt.identifierPrefix;if(tt){var a=Zn,h=Qn;a=(h&~(1<<32-Qt(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=zs++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Om++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Wm={readContext:dn,useCallback:kd,useContext:dn,useEffect:hu,useImperativeHandle:bd,useInsertionEffect:_d,useLayoutEffect:wd,useMemo:Cd,useReducer:uu,useRef:xd,useState:function(){return uu(Bs)},useDebugValue:du,useDeferredValue:function(n){var i=fn();return Ad(i,_t.memoizedState,n)},useTransition:function(){var n=uu(Bs)[0],i=fn().memoizedState;return[n,i]},useMutableSource:cd,useSyncExternalStore:hd,useId:Pd,unstable_isNewReconciler:!1},Hm={readContext:dn,useCallback:kd,useContext:dn,useEffect:hu,useImperativeHandle:bd,useInsertionEffect:_d,useLayoutEffect:wd,useMemo:Cd,useReducer:cu,useRef:xd,useState:function(){return cu(Bs)},useDebugValue:du,useDeferredValue:function(n){var i=fn();return _t===null?i.memoizedState=n:Ad(i,_t.memoizedState,n)},useTransition:function(){var n=cu(Bs)[0],i=fn().memoizedState;return[n,i]},useMutableSource:cd,useSyncExternalStore:hd,useId:Pd,unstable_isNewReconciler:!1};function bn(n,i){if(n&&n.defaultProps){i=ee({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function fu(n,i,a,h){i=n.memoizedState,a=a(h,i),a=a==null?i:ee({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var aa={isMounted:function(n){return(n=n._reactInternals)?jn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var h=Ot(),f=Tr(n),g=er(h,f);g.payload=i,a!=null&&(g.callback=a),i=kr(n,g,f),i!==null&&(An(i,n,f,h),Jo(i,n,f))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var h=Ot(),f=Tr(n),g=er(h,f);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=kr(n,g,f),i!==null&&(An(i,n,f,h),Jo(i,n,f))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Ot(),h=Tr(n),f=er(a,h);f.tag=2,i!=null&&(f.callback=i),i=kr(n,f,h),i!==null&&(An(i,n,h,a),Jo(i,n,h))}};function Rd(n,i,a,h,f,g,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,_):i.prototype&&i.prototype.isPureReactComponent?!bs(a,h)||!bs(f,g):!0}function Id(n,i,a){var h=!1,f=wr,g=i.contextType;return typeof g=="object"&&g!==null?g=dn(g):(f=Wt(i)?Nr:It.current,h=i.contextTypes,g=(h=h!=null)?Ai(n,f):wr),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=aa,n.stateNode=i,i._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),i}function Ld(n,i,a,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==n&&aa.enqueueReplaceState(i,i.state,null)}function pu(n,i,a,h){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},eu(n);var g=i.contextType;typeof g=="object"&&g!==null?f.context=dn(g):(g=Wt(i)?Nr:It.current,f.context=Ai(n,g)),f.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(fu(n,i,g,a),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&aa.enqueueReplaceState(f,f.state,null),ea(n,a,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Fi(n,i){try{var a="",h=i;do a+=Ae(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:f,digest:null}}function mu(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function gu(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Vm=typeof WeakMap=="function"?WeakMap:Map;function Fd(n,i,a){a=er(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){pa||(pa=!0,Ru=h),gu(n,i)},a}function zd(n,i,a){a=er(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=i.value;a.payload=function(){return h(f)},a.callback=function(){gu(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){gu(n,i),typeof h!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),a}function Bd(n,i,a){var h=n.pingCache;if(h===null){h=n.pingCache=new Vm;var f=new Set;h.set(i,f)}else f=h.get(i),f===void 0&&(f=new Set,h.set(i,f));f.has(a)||(f.add(a),n=og.bind(null,n,i,a),i.then(n,n))}function jd(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Dd(n,i,a,h,f){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=er(-1,1),i.tag=2,kr(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Ym=E.ReactCurrentOwner,Ht=!1;function Dt(n,i,a,h){i.child=n===null?id(i,null,a,h):Mi(i,n.child,a,h)}function Od(n,i,a,h,f){a=a.render;var g=i.ref;return Ii(i,f),h=au(n,i,a,h,g,f),a=lu(),n!==null&&!Ht?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,tr(n,i,f)):(tt&&a&&Wl(i),i.flags|=1,Dt(n,i,h,f),i.child)}function $d(n,i,a,h,f){if(n===null){var g=a.type;return typeof g=="function"&&!Du(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Nd(n,i,g,h,f)):(n=_a(a.type,null,h,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&f)===0){var _=g.memoizedProps;if(a=a.compare,a=a!==null?a:bs,a(_,h)&&n.ref===i.ref)return tr(n,i,f)}return i.flags|=1,n=Mr(g,h),n.ref=i.ref,n.return=i,i.child=n}function Nd(n,i,a,h,f){if(n!==null){var g=n.memoizedProps;if(bs(g,h)&&n.ref===i.ref)if(Ht=!1,i.pendingProps=h=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Ht=!0);else return i.lanes=n.lanes,tr(n,i,f)}return yu(n,i,a,h,f)}function Ud(n,i,a){var h=i.pendingProps,f=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Bi,tn),tn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ve(Bi,tn),tn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,Ve(Bi,tn),tn|=h}else g!==null?(h=g.baseLanes|a,i.memoizedState=null):h=a,Ve(Bi,tn),tn|=h;return Dt(n,i,f,a),i.child}function Gd(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function yu(n,i,a,h,f){var g=Wt(a)?Nr:It.current;return g=Ai(i,g),Ii(i,f),a=au(n,i,a,h,g,f),h=lu(),n!==null&&!Ht?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,tr(n,i,f)):(tt&&h&&Wl(i),i.flags|=1,Dt(n,i,a,f),i.child)}function Wd(n,i,a,h,f){if(Wt(a)){var g=!0;Ho(i)}else g=!1;if(Ii(i,f),i.stateNode===null)ua(n,i),Id(i,a,h),pu(i,a,h,f),h=!0;else if(n===null){var _=i.stateNode,k=i.memoizedProps;_.props=k;var T=_.context,B=a.contextType;typeof B=="object"&&B!==null?B=dn(B):(B=Wt(a)?Nr:It.current,B=Ai(i,B));var H=a.getDerivedStateFromProps,V=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function";V||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==h||T!==B)&&Ld(i,_,h,B),br=!1;var W=i.memoizedState;_.state=W,ea(i,h,_,f),T=i.memoizedState,k!==h||W!==T||Gt.current||br?(typeof H=="function"&&(fu(i,a,H,h),T=i.memoizedState),(k=br||Rd(i,a,k,h,W,T,B))?(V||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=T),_.props=h,_.state=T,_.context=B,h=k):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{_=i.stateNode,od(n,i),k=i.memoizedProps,B=i.type===i.elementType?k:bn(i.type,k),_.props=B,V=i.pendingProps,W=_.context,T=a.contextType,typeof T=="object"&&T!==null?T=dn(T):(T=Wt(a)?Nr:It.current,T=Ai(i,T));var re=a.getDerivedStateFromProps;(H=typeof re=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==V||W!==T)&&Ld(i,_,h,T),br=!1,W=i.memoizedState,_.state=W,ea(i,h,_,f);var ae=i.memoizedState;k!==V||W!==ae||Gt.current||br?(typeof re=="function"&&(fu(i,a,re,h),ae=i.memoizedState),(B=br||Rd(i,a,B,h,W,ae,T)||!1)?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,ae,T),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,ae,T)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||k===n.memoizedProps&&W===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&W===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ae),_.props=h,_.state=ae,_.context=T,h=B):(typeof _.componentDidUpdate!="function"||k===n.memoizedProps&&W===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&W===n.memoizedState||(i.flags|=1024),h=!1)}return xu(n,i,a,h,g,f)}function xu(n,i,a,h,f,g){Gd(n,i);var _=(i.flags&128)!==0;if(!h&&!_)return f&&qh(i,a,!1),tr(n,i,g);h=i.stateNode,Ym.current=i;var k=_&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,n!==null&&_?(i.child=Mi(i,n.child,null,g),i.child=Mi(i,null,k,g)):Dt(n,i,k,g),i.memoizedState=h.state,f&&qh(i,a,!0),i.child}function Hd(n){var i=n.stateNode;i.pendingContext?Yh(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Yh(n,i.context,!1),tu(n,i.containerInfo)}function Vd(n,i,a,h,f){return Ei(),Xl(f),i.flags|=256,Dt(n,i,a,h),i.child}var vu={dehydrated:null,treeContext:null,retryLane:0};function _u(n){return{baseLanes:n,cachePool:null,transitions:null}}function Yd(n,i,a){var h=i.pendingProps,f=ot.current,g=!1,_=(i.flags&128)!==0,k;if((k=_)||(k=n!==null&&n.memoizedState===null?!1:(f&2)!==0),k?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Ve(ot,f&1),n===null)return Yl(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(_=h.children,n=h.fallback,g?(h=i.mode,g=i.child,_={mode:"hidden",children:_},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=_):g=wa(_,h,0,null),n=Qr(n,h,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=_u(a),i.memoizedState=vu,n):wu(i,_));if(f=n.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return Xm(n,i,_,h,k,f,a);if(g){g=h.fallback,_=i.mode,f=n.child,k=f.sibling;var T={mode:"hidden",children:h.children};return(_&1)===0&&i.child!==f?(h=i.child,h.childLanes=0,h.pendingProps=T,i.deletions=null):(h=Mr(f,T),h.subtreeFlags=f.subtreeFlags&14680064),k!==null?g=Mr(k,g):(g=Qr(g,_,a,null),g.flags|=2),g.return=i,h.return=i,h.sibling=g,i.child=h,h=g,g=i.child,_=n.child.memoizedState,_=_===null?_u(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},g.memoizedState=_,g.childLanes=n.childLanes&~a,i.memoizedState=vu,h}return g=n.child,n=g.sibling,h=Mr(g,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=h,i.memoizedState=null,h}function wu(n,i){return i=wa({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function la(n,i,a,h){return h!==null&&Xl(h),Mi(i,n.child,null,a),n=wu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Xm(n,i,a,h,f,g,_){if(a)return i.flags&256?(i.flags&=-257,h=mu(Error(t(422))),la(n,i,_,h)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=h.fallback,f=i.mode,h=wa({mode:"visible",children:h.children},f,0,null),g=Qr(g,f,_,null),g.flags|=2,h.return=i,g.return=i,h.sibling=g,i.child=h,(i.mode&1)!==0&&Mi(i,n.child,null,_),i.child.memoizedState=_u(_),i.memoizedState=vu,g);if((i.mode&1)===0)return la(n,i,_,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var k=h.dgst;return h=k,g=Error(t(419)),h=mu(g,h,void 0),la(n,i,_,h)}if(k=(_&n.childLanes)!==0,Ht||k){if(h=bt,h!==null){switch(_&-_){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|_))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Jn(n,f),An(h,n,f,-1))}return ju(),h=mu(Error(t(421))),la(n,i,_,h)}return f.data==="$?"?(i.flags|=128,i.child=n.child,i=ag.bind(null,n),f._reactRetry=i,null):(n=g.treeContext,en=vr(f.nextSibling),Jt=i,tt=!0,Sn=null,n!==null&&(cn[hn++]=Qn,cn[hn++]=Zn,cn[hn++]=Ur,Qn=n.id,Zn=n.overflow,Ur=i),i=wu(i,h.children),i.flags|=4096,i)}function Xd(n,i,a){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),Zl(n.return,i,a)}function Su(n,i,a,h,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function qd(n,i,a){var h=i.pendingProps,f=h.revealOrder,g=h.tail;if(Dt(n,i,h.children,a),h=ot.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xd(n,a,i);else if(n.tag===19)Xd(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Ve(ot,h),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&ta(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Su(i,!1,f,a,g);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&ta(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Su(i,!0,a,null,g);break;case"together":Su(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ua(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function tr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Yr|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Mr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Mr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function qm(n,i,a){switch(i.tag){case 3:Hd(i),Ei();break;case 5:ud(i);break;case 1:Wt(i.type)&&Ho(i);break;case 4:tu(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,f=i.memoizedProps.value;Ve(Qo,h._currentValue),h._currentValue=f;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Ve(ot,ot.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Yd(n,i,a):(Ve(ot,ot.current&1),n=tr(n,i,a),n!==null?n.sibling:null);Ve(ot,ot.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(n.flags&128)!==0){if(h)return qd(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ve(ot,ot.current),h)break;return null;case 22:case 23:return i.lanes=0,Ud(n,i,a)}return tr(n,i,a)}var Kd,bu,Qd,Zd;Kd=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},bu=function(){},Qd=function(n,i,a,h){var f=n.memoizedProps;if(f!==h){n=i.stateNode,Hr(On.current);var g=null;switch(a){case"input":f=jt(n,f),h=jt(n,h),g=[];break;case"select":f=ee({},f,{value:void 0}),h=ee({},h,{value:void 0}),g=[];break;case"textarea":f=cr(n,f),h=cr(n,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Uo)}ss(a,h);var _;a=null;for(B in f)if(!h.hasOwnProperty(B)&&f.hasOwnProperty(B)&&f[B]!=null)if(B==="style"){var k=f[B];for(_ in k)k.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in h){var T=h[B];if(k=f!=null?f[B]:void 0,h.hasOwnProperty(B)&&T!==k&&(T!=null||k!=null))if(B==="style")if(k){for(_ in k)!k.hasOwnProperty(_)||T&&T.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in T)T.hasOwnProperty(_)&&k[_]!==T[_]&&(a||(a={}),a[_]=T[_])}else a||(g||(g=[]),g.push(B,a)),a=T;else B==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,k=k?k.__html:void 0,T!=null&&k!==T&&(g=g||[]).push(B,T)):B==="children"?typeof T!="string"&&typeof T!="number"||(g=g||[]).push(B,""+T):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(T!=null&&B==="onScroll"&&Xe("scroll",n),g||k===T||(g=[])):(g=g||[]).push(B,T))}a&&(g=g||[]).push("style",a);var B=g;(i.updateQueue=B)&&(i.flags|=4)}},Zd=function(n,i,a,h){a!==h&&(i.flags|=4)};function Ds(n,i){if(!tt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Ft(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=a,i}function Km(n,i,a){var h=i.pendingProps;switch(Hl(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(i),null;case 1:return Wt(i.type)&&Wo(),Ft(i),null;case 3:return h=i.stateNode,Li(),qe(Gt),qe(It),iu(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(qo(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Sn!==null&&(Fu(Sn),Sn=null))),bu(n,i),Ft(i),null;case 5:nu(i);var f=Hr(Ls.current);if(a=i.type,n!==null&&i.stateNode!=null)Qd(n,i,a,h,f),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Ft(i),null}if(n=Hr(On.current),qo(i)){h=i.stateNode,a=i.type;var g=i.memoizedProps;switch(h[Dn]=i,h[Ts]=g,n=(i.mode&1)!==0,a){case"dialog":Xe("cancel",h),Xe("close",h);break;case"iframe":case"object":case"embed":Xe("load",h);break;case"video":case"audio":for(f=0;f<Cs.length;f++)Xe(Cs[f],h);break;case"source":Xe("error",h);break;case"img":case"image":case"link":Xe("error",h),Xe("load",h);break;case"details":Xe("toggle",h);break;case"input":Kt(h,g),Xe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Xe("invalid",h);break;case"textarea":yo(h,g),Xe("invalid",h)}ss(a,g),f=null;for(var _ in g)if(g.hasOwnProperty(_)){var k=g[_];_==="children"?typeof k=="string"?h.textContent!==k&&(g.suppressHydrationWarning!==!0&&No(h.textContent,k,n),f=["children",k]):typeof k=="number"&&h.textContent!==""+k&&(g.suppressHydrationWarning!==!0&&No(h.textContent,k,n),f=["children",""+k]):o.hasOwnProperty(_)&&k!=null&&_==="onScroll"&&Xe("scroll",h)}switch(a){case"input":Ln(h),Vn(h,g,!0);break;case"textarea":Ln(h),ns(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Uo)}h=f,i.updateQueue=h,h!==null&&(i.flags|=4)}else{_=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=xo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=_.createElement(a,{is:h.is}):(n=_.createElement(a),a==="select"&&(_=n,h.multiple?_.multiple=!0:h.size&&(_.size=h.size))):n=_.createElementNS(n,a),n[Dn]=i,n[Ts]=h,Kd(n,i,!1,!1),i.stateNode=n;e:{switch(_=os(a,h),a){case"dialog":Xe("cancel",n),Xe("close",n),f=h;break;case"iframe":case"object":case"embed":Xe("load",n),f=h;break;case"video":case"audio":for(f=0;f<Cs.length;f++)Xe(Cs[f],n);f=h;break;case"source":Xe("error",n),f=h;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),f=h;break;case"details":Xe("toggle",n),f=h;break;case"input":Kt(n,h),f=jt(n,h),Xe("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=ee({},h,{value:void 0}),Xe("invalid",n);break;case"textarea":yo(n,h),f=cr(n,h),Xe("invalid",n);break;default:f=h}ss(a,f),k=f;for(g in k)if(k.hasOwnProperty(g)){var T=k[g];g==="style"?hr(n,T):g==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&ui(n,T)):g==="children"?typeof T=="string"?(a!=="textarea"||T!=="")&&zn(n,T):typeof T=="number"&&zn(n,""+T):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?T!=null&&g==="onScroll"&&Xe("scroll",n):T!=null&&P(n,g,T,_))}switch(a){case"input":Ln(n),Vn(n,h,!1);break;case"textarea":Ln(n),ns(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Ie(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?ur(n,!!h.multiple,g,!1):h.defaultValue!=null&&ur(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Uo)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ft(i),null;case 6:if(n&&i.stateNode!=null)Zd(n,i,n.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=Hr(Ls.current),Hr(On.current),qo(i)){if(h=i.stateNode,a=i.memoizedProps,h[Dn]=i,(g=h.nodeValue!==a)&&(n=Jt,n!==null))switch(n.tag){case 3:No(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&No(h.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Dn]=i,i.stateNode=h}return Ft(i),null;case 13:if(qe(ot),h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&en!==null&&(i.mode&1)!==0&&(i.flags&128)===0)td(),Ei(),i.flags|=98560,g=!1;else if(g=qo(i),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Dn]=i}else Ei(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ft(i),g=!1}else Sn!==null&&(Fu(Sn),Sn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(ot.current&1)!==0?wt===0&&(wt=3):ju())),i.updateQueue!==null&&(i.flags|=4),Ft(i),null);case 4:return Li(),bu(n,i),n===null&&As(i.stateNode.containerInfo),Ft(i),null;case 10:return Ql(i.type._context),Ft(i),null;case 17:return Wt(i.type)&&Wo(),Ft(i),null;case 19:if(qe(ot),g=i.memoizedState,g===null)return Ft(i),null;if(h=(i.flags&128)!==0,_=g.rendering,_===null)if(h)Ds(g,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=ta(n),_!==null){for(i.flags|=128,Ds(g,!1),h=_.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)g=a,n=h,g.flags&=14680066,_=g.alternate,_===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,g.type=_.type,n=_.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ve(ot,ot.current&1|2),i.child}n=n.sibling}g.tail!==null&&it()>ji&&(i.flags|=128,h=!0,Ds(g,!1),i.lanes=4194304)}else{if(!h)if(n=ta(_),n!==null){if(i.flags|=128,h=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ds(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!tt)return Ft(i),null}else 2*it()-g.renderingStartTime>ji&&a!==1073741824&&(i.flags|=128,h=!0,Ds(g,!1),i.lanes=4194304);g.isBackwards?(_.sibling=i.child,i.child=_):(a=g.last,a!==null?a.sibling=_:i.child=_,g.last=_)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=it(),i.sibling=null,a=ot.current,Ve(ot,h?a&1|2:a&1),i):(Ft(i),null);case 22:case 23:return Bu(),h=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(tn&1073741824)!==0&&(Ft(i),i.subtreeFlags&6&&(i.flags|=8192)):Ft(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Qm(n,i){switch(Hl(i),i.tag){case 1:return Wt(i.type)&&Wo(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Li(),qe(Gt),qe(It),iu(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return nu(i),null;case 13:if(qe(ot),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ei()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return qe(ot),null;case 4:return Li(),null;case 10:return Ql(i.type._context),null;case 22:case 23:return Bu(),null;case 24:return null;default:return null}}var ca=!1,zt=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,ie=null;function zi(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ct(n,i,h)}else a.current=null}function ku(n,i,a){try{a()}catch(h){ct(n,i,h)}}var Jd=!1;function Jm(n,i){if(Bl=Mo,n=Rh(),Tl(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var _=0,k=-1,T=-1,B=0,H=0,V=n,W=null;t:for(;;){for(var re;V!==a||f!==0&&V.nodeType!==3||(k=_+f),V!==g||h!==0&&V.nodeType!==3||(T=_+h),V.nodeType===3&&(_+=V.nodeValue.length),(re=V.firstChild)!==null;)W=V,V=re;for(;;){if(V===n)break t;if(W===a&&++B===f&&(k=_),W===g&&++H===h&&(T=_),(re=V.nextSibling)!==null)break;V=W,W=V.parentNode}V=re}a=k===-1||T===-1?null:{start:k,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(jl={focusedElem:n,selectionRange:a},Mo=!1,ie=i;ie!==null;)if(i=ie,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ie=n;else for(;ie!==null;){i=ie;try{var ae=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var le=ae.memoizedProps,pt=ae.memoizedState,F=i.stateNode,M=F.getSnapshotBeforeUpdate(i.elementType===i.type?le:bn(i.type,le),pt);F.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Y){ct(i,i.return,Y)}if(n=i.sibling,n!==null){n.return=i.return,ie=n;break}ie=i.return}return ae=Jd,Jd=!1,ae}function Os(n,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&ku(i,a,g)}f=f.next}while(f!==h)}}function ha(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function Cu(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function ef(n){var i=n.alternate;i!==null&&(n.alternate=null,ef(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Dn],delete i[Ts],delete i[Nl],delete i[zm],delete i[Bm])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function tf(n){return n.tag===5||n.tag===3||n.tag===4}function nf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Au(n,i,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Uo));else if(h!==4&&(n=n.child,n!==null))for(Au(n,i,a),n=n.sibling;n!==null;)Au(n,i,a),n=n.sibling}function Pu(n,i,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Pu(n,i,a),n=n.sibling;n!==null;)Pu(n,i,a),n=n.sibling}var Pt=null,kn=!1;function Cr(n,i,a){for(a=a.child;a!==null;)rf(n,i,a),a=a.sibling}function rf(n,i,a){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(fr,a)}catch{}switch(a.tag){case 5:zt||zi(a,i);case 6:var h=Pt,f=kn;Pt=null,Cr(n,i,a),Pt=h,kn=f,Pt!==null&&(kn?(n=Pt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&(kn?(n=Pt,a=a.stateNode,n.nodeType===8?$l(n.parentNode,a):n.nodeType===1&&$l(n,a),ys(n)):$l(Pt,a.stateNode));break;case 4:h=Pt,f=kn,Pt=a.stateNode.containerInfo,kn=!0,Cr(n,i,a),Pt=h,kn=f;break;case 0:case 11:case 14:case 15:if(!zt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,_=g.destroy;g=g.tag,_!==void 0&&((g&2)!==0||(g&4)!==0)&&ku(a,i,_),f=f.next}while(f!==h)}Cr(n,i,a);break;case 1:if(!zt&&(zi(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(k){ct(a,i,k)}Cr(n,i,a);break;case 21:Cr(n,i,a);break;case 22:a.mode&1?(zt=(h=zt)||a.memoizedState!==null,Cr(n,i,a),zt=h):Cr(n,i,a);break;default:Cr(n,i,a)}}function sf(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Zm),i.forEach(function(h){var f=lg.bind(null,n,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Cn(n,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=n,_=i,k=_;e:for(;k!==null;){switch(k.tag){case 5:Pt=k.stateNode,kn=!1;break e;case 3:Pt=k.stateNode.containerInfo,kn=!0;break e;case 4:Pt=k.stateNode.containerInfo,kn=!0;break e}k=k.return}if(Pt===null)throw Error(t(160));rf(g,_,f),Pt=null,kn=!1;var T=f.alternate;T!==null&&(T.return=null),f.return=null}catch(B){ct(f,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)of(i,n),i=i.sibling}function of(n,i){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cn(i,n),Nn(n),h&4){try{Os(3,n,n.return),ha(3,n)}catch(le){ct(n,n.return,le)}try{Os(5,n,n.return)}catch(le){ct(n,n.return,le)}}break;case 1:Cn(i,n),Nn(n),h&512&&a!==null&&zi(a,a.return);break;case 5:if(Cn(i,n),Nn(n),h&512&&a!==null&&zi(a,a.return),n.flags&32){var f=n.stateNode;try{zn(f,"")}catch(le){ct(n,n.return,le)}}if(h&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,_=a!==null?a.memoizedProps:g,k=n.type,T=n.updateQueue;if(n.updateQueue=null,T!==null)try{k==="input"&&g.type==="radio"&&g.name!=null&&Fr(f,g),os(k,_);var B=os(k,g);for(_=0;_<T.length;_+=2){var H=T[_],V=T[_+1];H==="style"?hr(f,V):H==="dangerouslySetInnerHTML"?ui(f,V):H==="children"?zn(f,V):P(f,H,V,B)}switch(k){case"input":At(f,g);break;case"textarea":_n(f,g);break;case"select":var W=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var re=g.value;re!=null?ur(f,!!g.multiple,re,!1):W!==!!g.multiple&&(g.defaultValue!=null?ur(f,!!g.multiple,g.defaultValue,!0):ur(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ts]=g}catch(le){ct(n,n.return,le)}}break;case 6:if(Cn(i,n),Nn(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(le){ct(n,n.return,le)}}break;case 3:if(Cn(i,n),Nn(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{ys(i.containerInfo)}catch(le){ct(n,n.return,le)}break;case 4:Cn(i,n),Nn(n);break;case 13:Cn(i,n),Nn(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Mu=it())),h&4&&sf(n);break;case 22:if(H=a!==null&&a.memoizedState!==null,n.mode&1?(zt=(B=zt)||H,Cn(i,n),zt=B):Cn(i,n),Nn(n),h&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!H&&(n.mode&1)!==0)for(ie=n,H=n.child;H!==null;){for(V=ie=H;ie!==null;){switch(W=ie,re=W.child,W.tag){case 0:case 11:case 14:case 15:Os(4,W,W.return);break;case 1:zi(W,W.return);var ae=W.stateNode;if(typeof ae.componentWillUnmount=="function"){h=W,a=W.return;try{i=h,ae.props=i.memoizedProps,ae.state=i.memoizedState,ae.componentWillUnmount()}catch(le){ct(h,a,le)}}break;case 5:zi(W,W.return);break;case 22:if(W.memoizedState!==null){uf(V);continue}}re!==null?(re.return=W,ie=re):uf(V)}H=H.sibling}e:for(H=null,V=n;;){if(V.tag===5){if(H===null){H=V;try{f=V.stateNode,B?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(k=V.stateNode,T=V.memoizedProps.style,_=T!=null&&T.hasOwnProperty("display")?T.display:null,k.style.display=is("display",_))}catch(le){ct(n,n.return,le)}}}else if(V.tag===6){if(H===null)try{V.stateNode.nodeValue=B?"":V.memoizedProps}catch(le){ct(n,n.return,le)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===n)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===n)break e;for(;V.sibling===null;){if(V.return===null||V.return===n)break e;H===V&&(H=null),V=V.return}H===V&&(H=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:Cn(i,n),Nn(n),h&4&&sf(n);break;case 21:break;default:Cn(i,n),Nn(n)}}function Nn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(tf(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(zn(f,""),h.flags&=-33);var g=nf(n);Pu(n,g,f);break;case 3:case 4:var _=h.stateNode.containerInfo,k=nf(n);Au(n,k,_);break;default:throw Error(t(161))}}catch(T){ct(n,n.return,T)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function eg(n,i,a){ie=n,af(n)}function af(n,i,a){for(var h=(n.mode&1)!==0;ie!==null;){var f=ie,g=f.child;if(f.tag===22&&h){var _=f.memoizedState!==null||ca;if(!_){var k=f.alternate,T=k!==null&&k.memoizedState!==null||zt;k=ca;var B=zt;if(ca=_,(zt=T)&&!B)for(ie=f;ie!==null;)_=ie,T=_.child,_.tag===22&&_.memoizedState!==null?cf(f):T!==null?(T.return=_,ie=T):cf(f);for(;g!==null;)ie=g,af(g),g=g.sibling;ie=f,ca=k,zt=B}lf(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ie=g):lf(n)}}function lf(n){for(;ie!==null;){var i=ie;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:zt||ha(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!zt)if(a===null)h.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:bn(i.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&ld(i,g,h);break;case 3:var _=i.updateQueue;if(_!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}ld(i,_,a)}break;case 5:var k=i.stateNode;if(a===null&&i.flags&4){a=k;var T=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&a.focus();break;case"img":T.src&&(a.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var H=B.memoizedState;if(H!==null){var V=H.dehydrated;V!==null&&ys(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||i.flags&512&&Cu(i)}catch(W){ct(i,i.return,W)}}if(i===n){ie=null;break}if(a=i.sibling,a!==null){a.return=i.return,ie=a;break}ie=i.return}}function uf(n){for(;ie!==null;){var i=ie;if(i===n){ie=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ie=a;break}ie=i.return}}function cf(n){for(;ie!==null;){var i=ie;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ha(4,i)}catch(T){ct(i,a,T)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var f=i.return;try{h.componentDidMount()}catch(T){ct(i,f,T)}}var g=i.return;try{Cu(i)}catch(T){ct(i,g,T)}break;case 5:var _=i.return;try{Cu(i)}catch(T){ct(i,_,T)}}}catch(T){ct(i,i.return,T)}if(i===n){ie=null;break}var k=i.sibling;if(k!==null){k.return=i.return,ie=k;break}ie=i.return}}var tg=Math.ceil,da=E.ReactCurrentDispatcher,Tu=E.ReactCurrentOwner,pn=E.ReactCurrentBatchConfig,je=0,bt=null,yt=null,Tt=0,tn=0,Bi=_r(0),wt=0,$s=null,Yr=0,fa=0,Eu=0,Ns=null,Vt=null,Mu=0,ji=1/0,nr=null,pa=!1,Ru=null,Ar=null,ma=!1,Pr=null,ga=0,Us=0,Iu=null,ya=-1,xa=0;function Ot(){return(je&6)!==0?it():ya!==-1?ya:ya=it()}function Tr(n){return(n.mode&1)===0?1:(je&2)!==0&&Tt!==0?Tt&-Tt:Dm.transition!==null?(xa===0&&(xa=oe()),xa):(n=ge,n!==0||(n=window.event,n=n===void 0?16:hh(n.type)),n)}function An(n,i,a,h){if(50<Us)throw Us=0,Iu=null,Error(t(185));Ue(n,a,h),((je&2)===0||n!==bt)&&(n===bt&&((je&2)===0&&(fa|=a),wt===4&&Er(n,Tt)),Yt(n,h),a===1&&je===0&&(i.mode&1)===0&&(ji=it()+500,Vo&&Sr()))}function Yt(n,i){var a=n.callbackNode;Be(n,i);var h=N(n,n===bt?Tt:0);if(h===0)a!==null&&Ao(a),n.callbackNode=null,n.callbackPriority=0;else if(i=h&-h,n.callbackPriority!==i){if(a!=null&&Ao(a),i===1)n.tag===0?jm(df.bind(null,n)):Kh(df.bind(null,n)),Lm(function(){(je&6)===0&&Sr()}),a=null;else{switch(ke(h)){case 1:a=hs;break;case 4:a=Po;break;case 16:a=gi;break;case 536870912:a=To;break;default:a=gi}a=_f(a,hf.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function hf(n,i){if(ya=-1,xa=0,(je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Di()&&n.callbackNode!==a)return null;var h=N(n,n===bt?Tt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||i)i=va(n,h);else{i=h;var f=je;je|=2;var g=pf();(bt!==n||Tt!==i)&&(nr=null,ji=it()+500,qr(n,i));do try{ig();break}catch(k){ff(n,k)}while(!0);Kl(),da.current=g,je=f,yt!==null?i=0:(bt=null,Tt=0,i=wt)}if(i!==0){if(i===2&&(f=we(n),f!==0&&(h=f,i=Lu(n,f))),i===1)throw a=$s,qr(n,0),Er(n,h),Yt(n,it()),a;if(i===6)Er(n,h);else{if(f=n.current.alternate,(h&30)===0&&!ng(f)&&(i=va(n,h),i===2&&(g=we(n),g!==0&&(h=g,i=Lu(n,g))),i===1))throw a=$s,qr(n,0),Er(n,h),Yt(n,it()),a;switch(n.finishedWork=f,n.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Kr(n,Vt,nr);break;case 3:if(Er(n,h),(h&130023424)===h&&(i=Mu+500-it(),10<i)){if(N(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){Ot(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Ol(Kr.bind(null,n,Vt,nr),i);break}Kr(n,Vt,nr);break;case 4:if(Er(n,h),(h&4194240)===h)break;for(i=n.eventTimes,f=-1;0<h;){var _=31-Qt(h);g=1<<_,_=i[_],_>f&&(f=_),h&=~g}if(h=f,h=it()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*tg(h/1960))-h,10<h){n.timeoutHandle=Ol(Kr.bind(null,n,Vt,nr),h);break}Kr(n,Vt,nr);break;case 5:Kr(n,Vt,nr);break;default:throw Error(t(329))}}}return Yt(n,it()),n.callbackNode===a?hf.bind(null,n):null}function Lu(n,i){var a=Ns;return n.current.memoizedState.isDehydrated&&(qr(n,i).flags|=256),n=va(n,i),n!==2&&(i=Vt,Vt=a,i!==null&&Fu(i)),n}function Fu(n){Vt===null?Vt=n:Vt.push.apply(Vt,n)}function ng(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!wn(g(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Er(n,i){for(i&=~Eu,i&=~fa,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Qt(i),h=1<<a;n[a]=-1,i&=~h}}function df(n){if((je&6)!==0)throw Error(t(327));Di();var i=N(n,0);if((i&1)===0)return Yt(n,it()),null;var a=va(n,i);if(n.tag!==0&&a===2){var h=we(n);h!==0&&(i=h,a=Lu(n,h))}if(a===1)throw a=$s,qr(n,0),Er(n,i),Yt(n,it()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Kr(n,Vt,nr),Yt(n,it()),null}function zu(n,i){var a=je;je|=1;try{return n(i)}finally{je=a,je===0&&(ji=it()+500,Vo&&Sr())}}function Xr(n){Pr!==null&&Pr.tag===0&&(je&6)===0&&Di();var i=je;je|=1;var a=pn.transition,h=ge;try{if(pn.transition=null,ge=1,n)return n()}finally{ge=h,pn.transition=a,je=i,(je&6)===0&&Sr()}}function Bu(){tn=Bi.current,qe(Bi)}function qr(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Im(a)),yt!==null)for(a=yt.return;a!==null;){var h=a;switch(Hl(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Wo();break;case 3:Li(),qe(Gt),qe(It),iu();break;case 5:nu(h);break;case 4:Li();break;case 13:qe(ot);break;case 19:qe(ot);break;case 10:Ql(h.type._context);break;case 22:case 23:Bu()}a=a.return}if(bt=n,yt=n=Mr(n.current,null),Tt=tn=i,wt=0,$s=null,Eu=fa=Yr=0,Vt=Ns=null,Wr!==null){for(i=0;i<Wr.length;i++)if(a=Wr[i],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var _=g.next;g.next=f,h.next=_}a.pending=h}Wr=null}return n}function ff(n,i){do{var a=yt;try{if(Kl(),na.current=oa,ra){for(var h=at.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}ra=!1}if(Vr=0,St=_t=at=null,Fs=!1,zs=0,Tu.current=null,a===null||a.return===null){wt=1,$s=i,yt=null;break}e:{var g=n,_=a.return,k=a,T=i;if(i=Tt,k.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var B=T,H=k,V=H.tag;if((H.mode&1)===0&&(V===0||V===11||V===15)){var W=H.alternate;W?(H.updateQueue=W.updateQueue,H.memoizedState=W.memoizedState,H.lanes=W.lanes):(H.updateQueue=null,H.memoizedState=null)}var re=jd(_);if(re!==null){re.flags&=-257,Dd(re,_,k,g,i),re.mode&1&&Bd(g,B,i),i=re,T=B;var ae=i.updateQueue;if(ae===null){var le=new Set;le.add(T),i.updateQueue=le}else ae.add(T);break e}else{if((i&1)===0){Bd(g,B,i),ju();break e}T=Error(t(426))}}else if(tt&&k.mode&1){var pt=jd(_);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),Dd(pt,_,k,g,i),Xl(Fi(T,k));break e}}g=T=Fi(T,k),wt!==4&&(wt=2),Ns===null?Ns=[g]:Ns.push(g),g=_;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var F=Fd(g,T,i);ad(g,F);break e;case 1:k=T;var M=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Ar===null||!Ar.has(z)))){g.flags|=65536,i&=-i,g.lanes|=i;var Y=zd(g,k,i);ad(g,Y);break e}}g=g.return}while(g!==null)}gf(a)}catch(ce){i=ce,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function pf(){var n=da.current;return da.current=oa,n===null?oa:n}function ju(){(wt===0||wt===3||wt===2)&&(wt=4),bt===null||(Yr&268435455)===0&&(fa&268435455)===0||Er(bt,Tt)}function va(n,i){var a=je;je|=2;var h=pf();(bt!==n||Tt!==i)&&(nr=null,qr(n,i));do try{rg();break}catch(f){ff(n,f)}while(!0);if(Kl(),je=a,da.current=h,yt!==null)throw Error(t(261));return bt=null,Tt=0,wt}function rg(){for(;yt!==null;)mf(yt)}function ig(){for(;yt!==null&&!hl();)mf(yt)}function mf(n){var i=vf(n.alternate,n,tn);n.memoizedProps=n.pendingProps,i===null?gf(n):yt=i,Tu.current=null}function gf(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=Km(a,i,tn),a!==null){yt=a;return}}else{if(a=Qm(a,i),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,yt=null;return}}if(i=i.sibling,i!==null){yt=i;return}yt=i=n}while(i!==null);wt===0&&(wt=5)}function Kr(n,i,a){var h=ge,f=pn.transition;try{pn.transition=null,ge=1,sg(n,i,a,h)}finally{pn.transition=f,ge=h}return null}function sg(n,i,a,h){do Di();while(Pr!==null);if((je&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(De(n,g),n===bt&&(yt=bt=null,Tt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ma||(ma=!0,_f(gi,function(){return Di(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=pn.transition,pn.transition=null;var _=ge;ge=1;var k=je;je|=4,Tu.current=null,Jm(n,a),of(a,n),Cm(jl),Mo=!!Bl,jl=Bl=null,n.current=a,eg(a),dl(),je=k,ge=_,pn.transition=g}else n.current=a;if(ma&&(ma=!1,Pr=n,ga=f),g=n.pendingLanes,g===0&&(Ar=null),ds(a.stateNode),Yt(n,it()),i!==null)for(h=n.onRecoverableError,a=0;a<i.length;a++)f=i[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(pa)throw pa=!1,n=Ru,Ru=null,n;return(ga&1)!==0&&n.tag!==0&&Di(),g=n.pendingLanes,(g&1)!==0?n===Iu?Us++:(Us=0,Iu=n):Us=0,Sr(),null}function Di(){if(Pr!==null){var n=ke(ga),i=pn.transition,a=ge;try{if(pn.transition=null,ge=16>n?16:n,Pr===null)var h=!1;else{if(n=Pr,Pr=null,ga=0,(je&6)!==0)throw Error(t(331));var f=je;for(je|=4,ie=n.current;ie!==null;){var g=ie,_=g.child;if((ie.flags&16)!==0){var k=g.deletions;if(k!==null){for(var T=0;T<k.length;T++){var B=k[T];for(ie=B;ie!==null;){var H=ie;switch(H.tag){case 0:case 11:case 15:Os(8,H,g)}var V=H.child;if(V!==null)V.return=H,ie=V;else for(;ie!==null;){H=ie;var W=H.sibling,re=H.return;if(ef(H),H===B){ie=null;break}if(W!==null){W.return=re,ie=W;break}ie=re}}}var ae=g.alternate;if(ae!==null){var le=ae.child;if(le!==null){ae.child=null;do{var pt=le.sibling;le.sibling=null,le=pt}while(le!==null)}}ie=g}}if((g.subtreeFlags&2064)!==0&&_!==null)_.return=g,ie=_;else e:for(;ie!==null;){if(g=ie,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Os(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,ie=F;break e}ie=g.return}}var M=n.current;for(ie=M;ie!==null;){_=ie;var z=_.child;if((_.subtreeFlags&2064)!==0&&z!==null)z.return=_,ie=z;else e:for(_=M;ie!==null;){if(k=ie,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:ha(9,k)}}catch(ce){ct(k,k.return,ce)}if(k===_){ie=null;break e}var Y=k.sibling;if(Y!==null){Y.return=k.return,ie=Y;break e}ie=k.return}}if(je=f,Sr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(fr,n)}catch{}h=!0}return h}finally{ge=a,pn.transition=i}}return!1}function yf(n,i,a){i=Fi(a,i),i=Fd(n,i,1),n=kr(n,i,1),i=Ot(),n!==null&&(Ue(n,1,i),Yt(n,i))}function ct(n,i,a){if(n.tag===3)yf(n,n,a);else for(;i!==null;){if(i.tag===3){yf(i,n,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ar===null||!Ar.has(h))){n=Fi(a,n),n=zd(i,n,1),i=kr(i,n,1),n=Ot(),i!==null&&(Ue(i,1,n),Yt(i,n));break}}i=i.return}}function og(n,i,a){var h=n.pingCache;h!==null&&h.delete(i),i=Ot(),n.pingedLanes|=n.suspendedLanes&a,bt===n&&(Tt&a)===a&&(wt===4||wt===3&&(Tt&130023424)===Tt&&500>it()-Mu?qr(n,0):Eu|=a),Yt(n,i)}function xf(n,i){i===0&&((n.mode&1)===0?i=1:(i=j,j<<=1,(j&130023424)===0&&(j=4194304)));var a=Ot();n=Jn(n,i),n!==null&&(Ue(n,i,a),Yt(n,a))}function ag(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),xf(n,a)}function lg(n,i){var a=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),xf(n,a)}var vf;vf=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Gt.current)Ht=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Ht=!1,qm(n,i,a);Ht=(n.flags&131072)!==0}else Ht=!1,tt&&(i.flags&1048576)!==0&&Qh(i,Xo,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;ua(n,i),n=i.pendingProps;var f=Ai(i,It.current);Ii(i,a),f=au(null,i,h,n,f,a);var g=lu();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Wt(h)?(g=!0,Ho(i)):g=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,eu(i),f.updater=aa,i.stateNode=f,f._reactInternals=i,pu(i,h,n,a),i=xu(null,i,h,!0,g,a)):(i.tag=0,tt&&g&&Wl(i),Dt(null,i,f,a),i=i.child),i;case 16:h=i.elementType;e:{switch(ua(n,i),n=i.pendingProps,f=h._init,h=f(h._payload),i.type=h,f=i.tag=cg(h),n=bn(h,n),f){case 0:i=yu(null,i,h,n,a);break e;case 1:i=Wd(null,i,h,n,a);break e;case 11:i=Od(null,i,h,n,a);break e;case 14:i=$d(null,i,h,bn(h.type,n),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:bn(h,f),yu(n,i,h,f,a);case 1:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:bn(h,f),Wd(n,i,h,f,a);case 3:e:{if(Hd(i),n===null)throw Error(t(387));h=i.pendingProps,g=i.memoizedState,f=g.element,od(n,i),ea(i,h,null,a);var _=i.memoizedState;if(h=_.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){f=Fi(Error(t(423)),i),i=Vd(n,i,h,a,f);break e}else if(h!==f){f=Fi(Error(t(424)),i),i=Vd(n,i,h,a,f);break e}else for(en=vr(i.stateNode.containerInfo.firstChild),Jt=i,tt=!0,Sn=null,a=id(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ei(),h===f){i=tr(n,i,a);break e}Dt(n,i,h,a)}i=i.child}return i;case 5:return ud(i),n===null&&Yl(i),h=i.type,f=i.pendingProps,g=n!==null?n.memoizedProps:null,_=f.children,Dl(h,f)?_=null:g!==null&&Dl(h,g)&&(i.flags|=32),Gd(n,i),Dt(n,i,_,a),i.child;case 6:return n===null&&Yl(i),null;case 13:return Yd(n,i,a);case 4:return tu(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=Mi(i,null,h,a):Dt(n,i,h,a),i.child;case 11:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:bn(h,f),Od(n,i,h,f,a);case 7:return Dt(n,i,i.pendingProps,a),i.child;case 8:return Dt(n,i,i.pendingProps.children,a),i.child;case 12:return Dt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,f=i.pendingProps,g=i.memoizedProps,_=f.value,Ve(Qo,h._currentValue),h._currentValue=_,g!==null)if(wn(g.value,_)){if(g.children===f.children&&!Gt.current){i=tr(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var k=g.dependencies;if(k!==null){_=g.child;for(var T=k.firstContext;T!==null;){if(T.context===h){if(g.tag===1){T=er(-1,a&-a),T.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var H=B.pending;H===null?T.next=T:(T.next=H.next,H.next=T),B.pending=T}}g.lanes|=a,T=g.alternate,T!==null&&(T.lanes|=a),Zl(g.return,a,i),k.lanes|=a;break}T=T.next}}else if(g.tag===10)_=g.type===i.type?null:g.child;else if(g.tag===18){if(_=g.return,_===null)throw Error(t(341));_.lanes|=a,k=_.alternate,k!==null&&(k.lanes|=a),Zl(_,a,i),_=g.sibling}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}Dt(n,i,f.children,a),i=i.child}return i;case 9:return f=i.type,h=i.pendingProps.children,Ii(i,a),f=dn(f),h=h(f),i.flags|=1,Dt(n,i,h,a),i.child;case 14:return h=i.type,f=bn(h,i.pendingProps),f=bn(h.type,f),$d(n,i,h,f,a);case 15:return Nd(n,i,i.type,i.pendingProps,a);case 17:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:bn(h,f),ua(n,i),i.tag=1,Wt(h)?(n=!0,Ho(i)):n=!1,Ii(i,a),Id(i,h,f),pu(i,h,f,a),xu(null,i,h,!0,n,a);case 19:return qd(n,i,a);case 22:return Ud(n,i,a)}throw Error(t(156,i.tag))};function _f(n,i){return Or(n,i)}function ug(n,i,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(n,i,a,h){return new ug(n,i,a,h)}function Du(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cg(n){if(typeof n=="function")return Du(n)?1:0;if(n!=null){if(n=n.$$typeof,n===xe)return 11;if(n===ft)return 14}return 2}function Mr(n,i){var a=n.alternate;return a===null?(a=mn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function _a(n,i,a,h,f,g){var _=2;if(h=n,typeof n=="function")Du(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case O:return Qr(a.children,f,g,i);case X:_=8,f|=8;break;case ne:return n=mn(12,a,i,f|2),n.elementType=ne,n.lanes=g,n;case de:return n=mn(13,a,i,f),n.elementType=de,n.lanes=g,n;case Ce:return n=mn(19,a,i,f),n.elementType=Ce,n.lanes=g,n;case te:return wa(a,f,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case K:_=10;break e;case Z:_=9;break e;case xe:_=11;break e;case ft:_=14;break e;case J:_=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=mn(_,a,i,f),i.elementType=n,i.type=h,i.lanes=g,i}function Qr(n,i,a,h){return n=mn(7,n,h,i),n.lanes=a,n}function wa(n,i,a,h){return n=mn(22,n,h,i),n.elementType=te,n.lanes=a,n.stateNode={isHidden:!1},n}function Ou(n,i,a){return n=mn(6,n,null,i),n.lanes=a,n}function $u(n,i,a){return i=mn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function hg(n,i,a,h,f){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fe(0),this.expirationTimes=Fe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fe(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Nu(n,i,a,h,f,g,_,k,T){return n=new hg(n,i,a,k,T),i===1?(i=1,g===!0&&(i|=8)):i=0,g=mn(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},eu(g),n}function dg(n,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:h==null?null:""+h,children:n,containerInfo:i,implementation:a}}function wf(n){if(!n)return wr;n=n._reactInternals;e:{if(jn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Wt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Wt(a))return Xh(n,a,i)}return i}function Sf(n,i,a,h,f,g,_,k,T){return n=Nu(a,h,!0,n,f,g,_,k,T),n.context=wf(null),a=n.current,h=Ot(),f=Tr(a),g=er(h,f),g.callback=i??null,kr(a,g,f),n.current.lanes=f,Ue(n,f,h),Yt(n,h),n}function Sa(n,i,a,h){var f=i.current,g=Ot(),_=Tr(f);return a=wf(a),i.context===null?i.context=a:i.pendingContext=a,i=er(g,_),i.payload={element:n},h=h===void 0?null:h,h!==null&&(i.callback=h),n=kr(f,i,_),n!==null&&(An(n,f,_,g),Jo(n,f,_)),_}function ba(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bf(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Uu(n,i){bf(n,i),(n=n.alternate)&&bf(n,i)}function fg(){return null}var kf=typeof reportError=="function"?reportError:function(n){console.error(n)};function Gu(n){this._internalRoot=n}ka.prototype.render=Gu.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Sa(n,i,null,null)},ka.prototype.unmount=Gu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Xr(function(){Sa(null,n,null,null)}),i[qn]=null}};function ka(n){this._internalRoot=n}ka.prototype.unstable_scheduleHydration=function(n){if(n){var i=st();n={blockedOn:null,target:n,priority:i};for(var a=0;a<gr.length&&i!==0&&i<gr[a].priority;a++);gr.splice(a,0,n),a===0&&uh(n)}};function Wu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ca(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Cf(){}function pg(n,i,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var B=ba(_);g.call(B)}}var _=Sf(i,h,n,0,null,!1,!1,"",Cf);return n._reactRootContainer=_,n[qn]=_.current,As(n.nodeType===8?n.parentNode:n),Xr(),_}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var k=h;h=function(){var B=ba(T);k.call(B)}}var T=Nu(n,0,!1,null,null,!1,!1,"",Cf);return n._reactRootContainer=T,n[qn]=T.current,As(n.nodeType===8?n.parentNode:n),Xr(function(){Sa(i,T,a,h)}),T}function Aa(n,i,a,h,f){var g=a._reactRootContainer;if(g){var _=g;if(typeof f=="function"){var k=f;f=function(){var T=ba(_);k.call(T)}}Sa(i,_,n,f)}else _=pg(a,i,n,f,h);return ba(_)}Se=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=D(i.pendingLanes);a!==0&&(Re(i,a|1),Yt(i,it()),(je&6)===0&&(ji=it()+500,Sr()))}break;case 13:Xr(function(){var h=Jn(n,1);if(h!==null){var f=Ot();An(h,n,1,f)}}),Uu(n,1)}},Ne=function(n){if(n.tag===13){var i=Jn(n,134217728);if(i!==null){var a=Ot();An(i,n,134217728,a)}Uu(n,134217728)}},vt=function(n){if(n.tag===13){var i=Tr(n),a=Jn(n,i);if(a!==null){var h=Ot();An(a,n,i,h)}Uu(n,i)}},st=function(){return ge},Je=function(n,i){var a=ge;try{return ge=n,i()}finally{ge=a}},ls=function(n,i,a){switch(i){case"input":if(At(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==n&&h.form===n.form){var f=Go(h);if(!f)throw Error(t(90));an(h),At(h,f)}}}break;case"textarea":_n(n,a);break;case"select":i=a.value,i!=null&&ur(n,!!a.multiple,i,!1)}},_o=zu,wo=Xr;var mg={usingClientEntryPoint:!1,Events:[Es,ki,Go,us,ci,zu]},Gs={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gg={bundleType:Gs.bundleType,version:Gs.version,rendererPackageName:Gs.rendererPackageName,rendererConfig:Gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ko(n),n===null?null:n.stateNode},findFiberByHostInstance:Gs.findFiberByHostInstance||fg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pa.isDisabled&&Pa.supportsFiber)try{fr=Pa.inject(gg),un=Pa}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mg,Xt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wu(i))throw Error(t(200));return dg(n,i,null,a)},Xt.createRoot=function(n,i){if(!Wu(n))throw Error(t(299));var a=!1,h="",f=kf;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=Nu(n,1,!1,null,null,a,!1,h,f),n[qn]=i.current,As(n.nodeType===8?n.parentNode:n),new Gu(i)},Xt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ko(i),n=n===null?null:n.stateNode,n},Xt.flushSync=function(n){return Xr(n)},Xt.hydrate=function(n,i,a){if(!Ca(i))throw Error(t(200));return Aa(null,n,i,!0,a)},Xt.hydrateRoot=function(n,i,a){if(!Wu(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",_=kf;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),i=Sf(i,null,n,1,a??null,f,!1,g,_),n[qn]=i.current,As(n),h)for(n=0;n<h.length;n++)a=h[n],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new ka(i)},Xt.render=function(n,i,a){if(!Ca(i))throw Error(t(200));return Aa(null,n,i,!1,a)},Xt.unmountComponentAtNode=function(n){if(!Ca(n))throw Error(t(40));return n._reactRootContainer?(Xr(function(){Aa(null,null,n,!1,function(){n._reactRootContainer=null,n[qn]=null})}),!0):!1},Xt.unstable_batchedUpdates=zu,Xt.unstable_renderSubtreeIntoContainer=function(n,i,a,h){if(!Ca(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Aa(n,i,a,!1,h)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var Lf;function kg(){if(Lf)return Yu.exports;Lf=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Yu.exports=bg(),Yu.exports}var Ff;function Cg(){if(Ff)return Ta;Ff=1;var r=kg();return Ta.createRoot=r.createRoot,Ta.hydrateRoot=r.hydrateRoot,Ta}var Ag=Cg();const Pg=Hc(Ag);var ye=Vc();const Ea={id:"pj-1",nom:{nomcomplet:"Test Hero",prenom:"Aryn",surnom:"the Blue"},age:25,sexe:"H",taille:175,poids:70,vitesse:9,langues:"Common",alignement:"Neutral Good",raceId:"human",backgroundId:"adventurer",niveauGlobal:1,classe:{1:{classeId:"fighter",subclasseId:"champion",niveau:1}},xp:0,dv:10,maitriseBonus:2,pvActuels:12,pvMax:12,pvTmp:0,calculPvMax:{classe1:{niveauGlobal_1:"10 + modCON",par_niveau_apres_1:"1d10 + modCON"},classe2:{par_niveau_apres_1:""}},CA:16,CalculCA:{base:"10 + modDEX",bonusArmure:"+ armor proficiency + shield"},nivFatigueActuel:0,nivFatigueMax:3,initiative:"modDEX",besoin:[],caracs:{force:{FOR:16,modFOR:3},dexterite:{DEX:14,modDEX:2},constitution:{CON:14,modCON:2},intelligence:{INT:10,modINT:0},sagesse:{SAG:12,modSAG:1},charisme:{CHA:10,modCHA:0}},competences:{},percPassive:11,proficiencies:{},savingThrows:["force","constitution"],inspiration:!1,traits:["Veteran soldier","Brave"],features:[],compteur:{},ressources:{},etats:[],historique:[],notes:"",argent:{cuivre:0,argent:0,or:10,platine:0},materielSlots:{Ceinture_gauche:null,Ceinture_droite:null,Dos_gauche:null,Dos_droit:null,Armure:null,Vetement:null,paquetage:null,accessoire:null},armesDefaut:{main_droite:null,main_gauche:null,mains:null},Inventaire:{id:"",idUnique:"",quantite:0,mod:null,conteneur:null},capaMax:120,capaAvantMalus:60,capaActuel:0,StatEncombrement:"Not encumbered",descriptionPersonnage:{bio:"Test hero for the mini-game.",physique:"Athletic human in light armor.",personnalite:"Calm and determined.",objectifs:"Explore the test dungeon.",relations:"",defauts:"Too reckless."},uiClasse:{ui_template1:"fighter_base",ui_template2:null},SpellcastingSpec:{ability:null,spellSaveDc:null,spellAttackMod:null,slots:{},focusId:null,description:null,spellIds:[]}},sr=12,Wn=8,lt=64,qa=sr*lt,kc=Wn*lt,ip=lt,Yc=lt*.5,sp=qa/2,op=Yc*2,Tg=1841961;function Zi(r,e){return r>=0&&r<sr&&e>=0&&e<Wn}function gn(r,e){const t=ip/2,s=Yc/2,o=(r-e)*t+sp,l=(r+e)*s+op;return{x:o,y:l}}function Eg(r,e){const t=ip/2,s=Yc/2,o=r-sp,l=e-op,u=o/t,c=l/s,d=(u+c)/2,p=(c-u)/2,m=Math.round(d),y=Math.round(p);return{x:m,y}}function ap(r,e,t,s){const o=[];for(let l=-s;l<=s;l++)for(let u=-s;u<=s;u++){const c=e+u,d=t+l;if(!Zi(c,d))continue;Math.sqrt(u*u+l*l)<=s+.01&&o.push({x:c,y:d})}return{id:r,type:"circle",cells:o}}function Mg(r,e,t,s,o){const l=[],u=Math.floor(s/2),c=Math.floor(o/2);for(let d=t-c;d<=t+c;d++)for(let p=e-u;p<=e+u;p++)Zi(p,d)&&l.push({x:p,y:d});return{id:r,type:"rectangle",cells:l}}function lp(r,e,t,s,o,l){const u=[],d=typeof l=="number"&&l>0&&l<180?l*Math.PI/360:null;for(let p=1;p<=s;p++){let m=p;if(d!==null){const y=Math.tan(d)*p;m=Math.floor(y),m<0&&(m=0),m>p&&(m=p)}for(let y=-m;y<=m;y++){let x=e,v=t;switch(o){case"right":x=e+p,v=t+y;break;case"left":x=e-p,v=t+y;break;case"down":x=e+y,v=t+p;break;case"up":x=e+y,v=t-p;break}Zi(x,v)&&u.push({x,y:v})}}return{id:r,type:"cone",cells:u}}const Rg=30,Ig={shape:"cone",range:Rg};function Lg(r){return r.facing?r.facing:r.type==="player"?"right":"left"}function Fg(r){return r.visionProfile?r.visionProfile:Ig}function up(r){const e=Fg(r),t=Lg(r),s=`vision-${r.id}`;return e.range<=0?{id:s,type:e.shape==="circle"?"circle":"cone",cells:[]}:e.shape==="circle"?ap(s,r.x,r.y,e.range):lp(s,r.x,r.y,e.range,t,e.apertureDeg)}function zf(r){return`${r.x},${r.y}`}function cp(r,e){const t=up(r);if(!t.cells.length)return[];const s=new Set;for(const o of t.cells)s.add(zf(o));return e.filter(o=>o.id!==r.id&&o.hp>0&&s.has(zf({x:o.x,y:o.y})))}function hp(r,e,t){return e.hp<=0?!1:cp(r,t).some(o=>o.id===e.id)}function Bf(r,e,t){return Math.max(e,Math.min(t,r))}function Hs(r,e){return Math.abs(r.x-e.x)+Math.abs(r.y-e.y)}function $t(r){return r.hp<=0}function jf(r){return typeof r.attackRange=="number"&&r.attackRange>0?r.attackRange:1}function Df(r){return typeof r.maxAttacksPerTurn=="number"&&r.maxAttacksPerTurn>0?r.maxAttacksPerTurn:1}function Ma(r,e,t){return $t(r)||$t(e)?!1:hp(r,e,t)}function Ku(r,e){const t=e.x-r.x,s=e.y-r.y;return Math.abs(t)>=Math.abs(s)?t>=0?"right":"left":s>=0?"down":"up"}const zg=["./brute.json","./archer.json","./assassin.json","./ghost.json"],Of={types:zg},Bg="brute",jg="Brute",Dg="Frontliner robuste qui avance pour engager le joueur.",Og="brute",$g={raceOrOrigin:"Brute mercenaire",register:"familier",tone:["agressif","direct","impatient"],vocabulary:["charge","ecrase","avance","finissons-en"],quirks:["phrases courtes","menaces simples"],taboos:["pas de modernisme","pas de meta-jeu"]},Ng={hp:10,moveRange:3,attackDamage:2,armorClass:14,attackRange:1,maxAttacksPerTurn:2},Ug={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},Gg={shape:"cone",range:4,apertureDeg:90,canSeeInDark:!1},Wg={id:Bg,label:jg,description:Dg,aiRole:Og,speechProfile:$g,baseStats:Ng,movement:Ug,vision:Gg},Hg="archer",Vg="Archer",Yg="Tireur qui prefere garder une distance de securite avant de frapper.",Xg="archer",qg={raceOrOrigin:"Archer de bande",register:"neutre",tone:["tactique","moqueur","vigilant"],vocabulary:["a couvert","recule","je l'ai en vue","distance"],quirks:["annonce ce qu'il voit","donne des consignes courtes"],taboos:["pas de modernisme","pas de meta-jeu"]},Kg={hp:7,moveRange:2,attackDamage:2,armorClass:13,attackRange:6,maxAttacksPerTurn:1},Qg={type:"ground",speed:2,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},Zg={shape:"cone",range:15,apertureDeg:60,canSeeInDark:!1},Jg={id:Hg,label:Vg,description:Yg,aiRole:Xg,speechProfile:qg,baseStats:Kg,movement:Qg,vision:Zg},e2="assassin",t2="Assassin",n2="Frappeur rapide qui cherche a se rapprocher pour porter un coup decisif.",r2="assassin",i2={raceOrOrigin:"Assassin",register:"soutenu",tone:["froid","tranchant","calme"],vocabulary:["silence","cible","dans l'ombre","fin"],quirks:["parle peu","phrases courtes et precises"],taboos:["pas de modernisme","pas de meta-jeu"]},s2={hp:6,moveRange:3,attackDamage:3,armorClass:15},o2={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},a2={shape:"cone",range:6,apertureDeg:80,canSeeInDark:!1},l2={id:e2,label:t2,description:n2,aiRole:r2,speechProfile:i2,baseStats:s2,movement:o2,vision:a2},u2="ghost",c2="Fantome",h2="Esprit intangible capable de traverser les autres creatures.",d2="ghost",f2={raceOrOrigin:"Esprit vengeur",register:"soutenu",tone:["cryptique","menaant","surnaturel"],vocabulary:["je te sens","au-dela","froideur","souffle"],quirks:["parle en images","phrases etranges mais courtes"],taboos:["pas de modernisme","pas de meta-jeu"]},p2={hp:8,moveRange:4,attackDamage:3,armorClass:12},m2={type:"ghost",speed:4,canPassThroughWalls:!0,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},g2={shape:"circle",range:6,canSeeInDark:!0},y2={id:u2,label:c2,description:h2,aiRole:d2,speechProfile:f2,baseStats:p2,movement:m2,vision:g2},x2=["./melee-strike.json","./dash.json","./second-wind.json","./throw-dagger.json"],$f={actions:x2},v2="melee-strike",_2="Frappe basique",w2="Attaque de melee simple contre une cible a 1 case.",S2="attack",b2={actionType:"action",movementCost:0},k2={target:"enemy",range:{min:0,max:1,shape:"single"},maxTargets:1,requiresLos:!0},C2={perTurn:1,perEncounter:null,resource:null},A2=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_max",target:"primary",max:1,reason:"Portee de melee uniquement."},{type:"target_alive",target:"primary",reason:"La cible doit avoir des PV restants."}],P2={bonus:5,critRange:20},T2={formula:"1d6+3",critRule:"double-dice",damageType:"slashing"},E2=[{type:"damage",target:"primary",formula:"1d6 + modFOR",damageType:"slashing"},{type:"log",message:"Frappe basique inflige 1d6+FOR a la cible."}],M2={priority:"finish_low_hp_target",successLog:"Attaque de melee effectuee.",failureLog:"Cible hors portee ou deja a terre."},R2=["martial","arme","starter"],I2={id:v2,name:_2,summary:w2,category:S2,actionCost:b2,targeting:k2,usage:C2,conditions:A2,attack:P2,damage:T2,effects:E2,aiHints:M2,tags:R2},L2="dash",F2="Course",z2="Transforme l'action en 3 cases de mouvement en plus.",B2="movement",j2={actionType:"action",movementCost:0},D2={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},O2={perTurn:1,perEncounter:null,resource:null},$2=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."}],N2=[{type:"modify_path_limit",target:"self",delta:3,duration:"this_turn"},{type:"log",message:"Course: +3 cases de mouvement pour ce tour."}],U2={priority:"close_gap",successLog:"Course utilisee pour approcher.",failureLog:"Deja a portee, course ignoree."},G2=["mobilite","deplacement"],W2={id:L2,name:F2,summary:z2,category:B2,actionCost:j2,targeting:D2,usage:O2,conditions:$2,effects:N2,aiHints:U2,tags:G2},H2="second-wind",V2="Second souffle",Y2="Restaure une partie des PV en bonus action.",X2="support",q2={actionType:"bonus",movementCost:0},K2={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},Q2={perTurn:null,perEncounter:1,resource:null},Z2=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"stat_below_percent",who:"self",stat:"hp",percentMax:.75,reason:"Economiser tant que les PV sont hauts."}],J2=[{type:"heal",target:"self",formula:"1d10 + niveau",min:1},{type:"temp_hp",target:"self",amount:2,duration:"end_of_turn"},{type:"log",message:"Second souffle: soigne 1d10 + niveau."}],ey={priority:"survive",successLog:"Second souffle declenche.",failureLog:"PV trop hauts ou tour non joueur."},ty=["soin","defense","survie"],ny={id:H2,name:V2,summary:Y2,category:X2,actionCost:q2,targeting:K2,usage:Q2,conditions:Z2,effects:J2,aiHints:ey,tags:ty},ry="throw-dagger",iy="Lancer de dague",sy="Attaque a distance courte avec une dague a lancer.",oy="attack",ay={actionType:"action",movementCost:0},ly={target:"enemy",range:{min:1,max:4,shape:"single"},maxTargets:1,requiresLos:!0},uy={perTurn:1,perEncounter:null,resource:{name:"dagger",pool:"bandolier",min:1}},cy=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_between",target:"primary",min:1,max:4,reason:"Hors de melee mais a portee de lancer."},{type:"resource_at_least",resource:"dagger",pool:"bandolier",value:1,reason:"Besoin d'une dague a lancer."}],hy={bonus:4,critRange:20},dy={formula:"1d4+2",critRule:"double-dice",damageType:"piercing"},fy=[{type:"damage",target:"primary",formula:"1d4 + modDEX",damageType:"piercing"},{type:"resource_spend",resource:"dagger",pool:"bandolier",amount:1},{type:"log",message:"Dague lancee: 1d4+DEX degats perforants."}],py={priority:"poke_from_range",successLog:"Dague lancee.",failureLog:"Pas de dague ou cible hors portee."},my=["distance","arme","jet"],gy={id:ry,name:iy,summary:sy,category:oy,actionCost:ay,targeting:ly,usage:uy,conditions:cy,attack:hy,damage:dy,effects:fy,aiHints:py,tags:my};function Ni(r,e=1){const t=[];for(let o=0;o<e;o++)t.push(1+Math.floor(Math.random()*r));const s=t.reduce((o,l)=>o+l,0);return{rolls:t,total:s}}function yy(r,e="normal",t=20){if(e==="advantage"){const o=Ni(20),l=Ni(20),u=Math.max(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:r,total:u+r,mode:e,isCrit:u>=t}}if(e==="disadvantage"){const o=Ni(20),l=Ni(20),u=Math.min(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:r,total:u+r,mode:e,isCrit:u>=t}}const s=Ni(20);return{d20:s,bonus:r,total:s.total+r,mode:e,isCrit:s.total>=t}}function xy(r){const e=[],s=r.replace(/\s+/g,"").split(/(?=[+-])/);for(const o of s){if(!o)continue;const l=o.startsWith("-")?-1:1,u=o.replace(/^[+-]/,""),c=u.match(/^(\d*)d(\d+)$/i);if(c){const p=c[1]?parseInt(c[1],10):1,m=parseInt(c[2],10);e.push({diceCount:l*p,diceSides:m,modifier:0});continue}const d=parseInt(u,10);Number.isNaN(d)||e.push({diceCount:0,diceSides:0,modifier:l*d})}return e}function vy(r,e){const t=!!(e!=null&&e.isCrit),s=(e==null?void 0:e.critRule)??"double-dice",o=xy(r),l=[];let u=0;for(const p of o)if(p.diceCount!==0&&p.diceSides>0){const m=Math.abs(p.diceCount),y=t&&s==="double-dice"?m*2:m,x=Ni(p.diceSides,y);l.push(p.diceCount<0?{rolls:x.rolls,total:-x.total}:x)}else u+=p.modifier;let d=l.reduce((p,m)=>p+m.total,0)+u;return t&&s==="double-total"&&(d*=2),{dice:l,flatModifier:u,total:d,formula:r,isCrit:t}}function Qu(r,e){return`${r},${e}`}function _y(r){return r.movementProfile?r.movementProfile:typeof r.moveRange=="number"?{type:"ground",speed:r.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1}:null}function wy(r,e,t,s,o,l,u){if(t<0||s<0||t>=sr||s>=Wn||!Zi(t,s))return!1;const c=t===u.x&&s===u.y;return!o.some(p=>p.id!==r.id&&p.hp>0&&p.x===t&&p.y===s)||c&&l?!0:e&&e.canPassThroughEntities?!(c&&e.canStopOnOccupiedTile===!1):!1}function Nf(r,e,t,s){const o=_y(r),l=o&&o.speed>0?Math.min(s.maxDistance,o.speed):s.maxDistance,u={x:r.x,y:r.y};if(u.x===e.x&&u.y===e.y)return[];const c=new Set,d=new Map,p=new Map,m=[],y=Qu(u.x,u.y);c.add(y),d.set(y,null),p.set(y,0),m.push(u);let x=null;const v=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];for(;m.length>0;){const P=m.shift(),E=Qu(P.x,P.y),G=p.get(E)??0;if(!(G>=l))for(const $ of v){const O=P.x+$.x,X=P.y+$.y,ne=Qu(O,X);if(c.has(ne)||!wy(r,o,O,X,t,s.allowTargetOccupied??!1,e))continue;c.add(ne),d.set(ne,E),p.set(ne,G+1);const K={x:O,y:X};if(m.push(K),O===e.x&&X===e.y){x=ne,m.length=0;break}}}let S=x;if(!S){let P=null,E=Number.POSITIVE_INFINITY;for(const G of c){const[$,O]=G.split(",").map(Number),X=Math.abs($-e.x)+Math.abs(O-e.y),ne=p.get(G)??0;ne!==0&&(ne>l||X<E&&(E=X,P=G))}if(!P)return[];S=P}const b=[];let w=S;for(;w;){const[P,E]=w.split(",").map(Number);if(b.push({x:P,y:E}),w===y)break;w=d.get(w)??null}const C=b.reverse(),A=l+1;return C.length>A?C.slice(0,A):C}function Sy(r,e){return e.find(t=>t.hp>0&&t.x===r.x&&t.y===r.y)??null}const Ge={active:!1,round:null,stateStart:null,events:[],enemySpeeches:[],lastSpeechByEnemyThisRound:new Map};let by=0;const dp=new Map;function ky(r,e){Ge.active=!0,Ge.round=r,Ge.stateStart=e,Ge.events=[],Ge.enemySpeeches=[],Ge.lastSpeechByEnemyThisRound=new Map}function nn(r){if(!Ge.active||Ge.round!==null&&r.round!==Ge.round)return;const e={id:`evt-${Date.now()}-${by++}`,round:r.round,phase:r.phase,kind:r.kind,actorId:r.actorId,actorKind:r.actorKind,targetId:r.targetId??null,targetKind:r.targetKind??null,summary:r.summary,data:r.data??{},timestamp:Date.now()};Ge.events.push(e)}function Cy(r,e){if(!Ge.active)return;const t=(e??"").trim();t&&(Ge.enemySpeeches.push({enemyId:r,line:t}),Ge.lastSpeechByEnemyThisRound.set(r,t),dp.set(r,t),Ge.round!==null&&nn({round:Ge.round,phase:"enemies",kind:"speech",actorId:r,actorKind:"enemy",summary:`${r} dit: "${t}"`,data:{line:t}}))}function Ay(){return Ge.enemySpeeches.slice()}function Py(r){return dp.get(r)??null}function Ty(r){return!Number.isFinite(r)||r<=0?Ge.events.slice():Ge.events.slice(-Math.floor(r))}function Ey(r){return!Ge.active||!Ge.stateStart||Ge.round===null?null:{language:"fr",focusSide:"player",focusActorId:r.focusActorId,stateStart:Ge.stateStart,stateEnd:r.stateEnd,events:Ge.events.slice(),enemySpeeches:Ge.enemySpeeches.slice()}}function My(){Ge.active=!1,Ge.round=null,Ge.stateStart=null,Ge.events=[],Ge.enemySpeeches=[],Ge.lastSpeechByEnemyThisRound=new Map}async function Ry(r){const e=await fetch("/api/narration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)return{summary:"",error:"IA non fonctionnel."};const t=await e.json();return!t||typeof t.summary!="string"?{summary:"",error:"IA non fonctionnel."}:t.error&&typeof t.error=="string"?{summary:"",error:t.error}:{summary:t.summary}}async function Iy(r){const e=await fetch("/api/enemy-speech",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)return{line:""};const t=await e.json();return!t||typeof t.line!="string"?{line:""}:{line:t.line}}const Ly="modulepreload",Fy=function(r){return"/"+r},Uf={},Ka=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=u(t.map(p=>{if(p=Fy(p),p in Uf)return;Uf[p]=!0;const m=p.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":Ly,m||(x.as="script"),x.crossOrigin="",x.href=p,d&&x.setAttribute("nonce",d),document.head.appendChild(x),m)return new Promise((v,S)=>{x.addEventListener("load",v),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return o.then(u=>{for(const c of u||[])c.status==="rejected"&&l(c.reason);return e().catch(l)})};var fe=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(fe||{});const Cc=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Ra=(r,e)=>Cc(r).priority??e,Mt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(Cc).forEach(e=>{e.type.forEach(t=>{var s,o;return(o=(s=this._removeHandlers)[t])==null?void 0:o.call(s,e)})}),this},add(...r){return r.map(Cc).forEach(e=>{e.type.forEach(t=>{var l,u;const s=this._addHandlers,o=this._queue;s[t]?(u=s[t])==null||u.call(s,e):(o[t]=o[t]||[],(l=o[t])==null||l.push(e))})}),this},handle(r,e,t){var u;const s=this._addHandlers,o=this._removeHandlers;if(s[r]||o[r])throw new Error(`Extension type ${r} already has a handler`);s[r]=e,o[r]=t;const l=this._queue;return l[r]&&((u=l[r])==null||u.forEach(c=>e(c)),delete l[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(r,e,t=-1){return this.handle(r,s=>{e.findIndex(l=>l.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((l,u)=>Ra(u.value,t)-Ra(l.value,t)))},s=>{const o=e.findIndex(l=>l.name===s.name);o!==-1&&e.splice(o,1)})},handleByList(r,e,t=-1){return this.handle(r,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((o,l)=>Ra(l,t)-Ra(o,t)))},s=>{const o=e.indexOf(s.ref);o!==-1&&e.splice(o,1)})},mixin(r,...e){for(const t of e)Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(t))}},zy={extension:{type:fe.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Ka(()=>import("./browserAll-Ba8lCepL.js"),__vite__mapDeps([0,1,2]))}},By={extension:{type:fe.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Ka(()=>import("./webworkerAll-CRNXEvYj.js"),__vite__mapDeps([1,2]))}};class Et{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new Et(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Zu={exports:{}},Gf;function jy(){return Gf||(Gf=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function o(d,p,m){this.fn=d,this.context=p,this.once=m||!1}function l(d,p,m,y,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new o(m,y||d,x),S=t?t+p:p;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],v]:d._events[S].push(v):(d._events[S]=v,d._eventsCount++),d}function u(d,p){--d._eventsCount===0?d._events=new s:delete d._events[p]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var p=[],m,y;if(this._eventsCount===0)return p;for(y in m=this._events)e.call(m,y)&&p.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},c.prototype.listeners=function(p){var m=t?t+p:p,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var x=0,v=y.length,S=new Array(v);x<v;x++)S[x]=y[x].fn;return S},c.prototype.listenerCount=function(p){var m=t?t+p:p,y=this._events[m];return y?y.fn?1:y.length:0},c.prototype.emit=function(p,m,y,x,v,S){var b=t?t+p:p;if(!this._events[b])return!1;var w=this._events[b],C=arguments.length,A,P;if(w.fn){switch(w.once&&this.removeListener(p,w.fn,void 0,!0),C){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,y),!0;case 4:return w.fn.call(w.context,m,y,x),!0;case 5:return w.fn.call(w.context,m,y,x,v),!0;case 6:return w.fn.call(w.context,m,y,x,v,S),!0}for(P=1,A=new Array(C-1);P<C;P++)A[P-1]=arguments[P];w.fn.apply(w.context,A)}else{var E=w.length,G;for(P=0;P<E;P++)switch(w[P].once&&this.removeListener(p,w[P].fn,void 0,!0),C){case 1:w[P].fn.call(w[P].context);break;case 2:w[P].fn.call(w[P].context,m);break;case 3:w[P].fn.call(w[P].context,m,y);break;case 4:w[P].fn.call(w[P].context,m,y,x);break;default:if(!A)for(G=1,A=new Array(C-1);G<C;G++)A[G-1]=arguments[G];w[P].fn.apply(w[P].context,A)}}return!0},c.prototype.on=function(p,m,y){return l(this,p,m,y,!1)},c.prototype.once=function(p,m,y){return l(this,p,m,y,!0)},c.prototype.removeListener=function(p,m,y,x){var v=t?t+p:p;if(!this._events[v])return this;if(!m)return u(this,v),this;var S=this._events[v];if(S.fn)S.fn===m&&(!x||S.once)&&(!y||S.context===y)&&u(this,v);else{for(var b=0,w=[],C=S.length;b<C;b++)(S[b].fn!==m||x&&!S[b].once||y&&S[b].context!==y)&&w.push(S[b]);w.length?this._events[v]=w.length===1?w[0]:w:u(this,v)}return this},c.prototype.removeAllListeners=function(p){var m;return p?(m=t?t+p:p,this._events[m]&&u(this,m)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(Zu)),Zu.exports}var Dy=jy();const Mn=Hc(Dy),Oy=Math.PI*2,$y=180/Math.PI,Ny=Math.PI/180;class Bt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Bt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Ju.x=0,Ju.y=0,Ju}}const Ju=new Bt;class Le{constructor(e=1,t=0,s=0,o=1,l=0,u=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,o,l,u){return this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new Bt;const s=e.x,o=e.y;return t.x=this.a*s+this.c*o+this.tx,t.y=this.b*s+this.d*o+this.ty,t}applyInverse(e,t){t=t||new Bt;const s=this.a,o=this.b,l=this.c,u=this.d,c=this.tx,d=this.ty,p=1/(s*u+l*-o),m=e.x,y=e.y;return t.x=u*p*m+-l*p*y+(d*l-c*u)*p,t.y=s*p*y+-o*p*m+(-d*s+c*o)*p,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.a,l=this.c,u=this.tx;return this.a=o*t-this.b*s,this.b=o*s+this.b*t,this.c=l*t-this.d*s,this.d=l*s+this.d*t,this.tx=u*t-this.ty*s,this.ty=u*s+this.ty*t,this}append(e){const t=this.a,s=this.b,o=this.c,l=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*s+e.b*l,this.c=e.c*t+e.d*o,this.d=e.c*s+e.d*l,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*s+e.ty*l+this.ty,this}appendFrom(e,t){const s=e.a,o=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty,p=t.a,m=t.b,y=t.c,x=t.d;return this.a=s*p+o*y,this.b=s*m+o*x,this.c=l*p+u*y,this.d=l*m+u*x,this.tx=c*p+d*y+t.tx,this.ty=c*m+d*x+t.ty,this}setTransform(e,t,s,o,l,u,c,d,p){return this.a=Math.cos(c+p)*l,this.b=Math.sin(c+p)*l,this.c=-Math.sin(c-d)*u,this.d=Math.cos(c-d)*u,this.tx=e-(s*this.a+o*this.c),this.ty=t-(s*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,o=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,o=this.c,l=this.d,u=e.pivot,c=-Math.atan2(-o,l),d=Math.atan2(s,t),p=Math.abs(c+d);return p<1e-5||Math.abs(Oy-p)<1e-5?(e.rotation=d,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=d),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(o*o+l*l),e.position.x=this.tx+(u.x*t+u.y*o),e.position.y=this.ty+(u.x*s+u.y*l),e}invert(){const e=this.a,t=this.b,s=this.c,o=this.d,l=this.tx,u=e*o-t*s;return this.a=o/u,this.b=-t/u,this.c=-s/u,this.d=e/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(e*this.ty-t*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Le;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Gy.identity()}static get shared(){return Uy.identity()}}const Uy=new Le,Gy=new Le,ei=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ti=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ni=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ri=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ac=[],fp=[],Ia=Math.sign;function Wy(){for(let r=0;r<16;r++){const e=[];Ac.push(e);for(let t=0;t<16;t++){const s=Ia(ei[r]*ei[t]+ni[r]*ti[t]),o=Ia(ti[r]*ei[t]+ri[r]*ti[t]),l=Ia(ei[r]*ni[t]+ni[r]*ri[t]),u=Ia(ti[r]*ni[t]+ri[r]*ri[t]);for(let c=0;c<16;c++)if(ei[c]===s&&ti[c]===o&&ni[c]===l&&ri[c]===u){e.push(c);break}}}for(let r=0;r<16;r++){const e=new Le;e.set(ei[r],ti[r],ni[r],ri[r],0,0),fp.push(e)}}Wy();const He={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>ei[r],uY:r=>ti[r],vX:r=>ni[r],vY:r=>ri[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>Ac[r][e],sub:(r,e)=>Ac[r][He.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?He.S:He.N:Math.abs(e)*2<=Math.abs(r)?r>0?He.E:He.W:e>0?r>0?He.SE:He.SW:r>0?He.NE:He.NW,matrixAppendRotationInv:(r,e,t=0,s=0)=>{const o=fp[He.inv(e)];o.tx=t,o.ty=s,r.append(o)},transformRectCoords:(r,e,t,s)=>{const{x:o,y:l,width:u,height:c}=r,{x:d,y:p,width:m,height:y}=e;return t===He.E?(s.set(o+d,l+p,u,c),s):t===He.S?s.set(m-l-c+d,o+p,c,u):t===He.W?s.set(m-o-u+d,y-l-c+p,u,c):t===He.N?s.set(l+d,y-o-u+p,c,u):s.set(o+d,l+p,u,c)}},La=[new Bt,new Bt,new Bt,new Bt];class nt{constructor(e=0,t=0,s=0,o=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new nt(0,0,0,0)}clone(){return new nt(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const c=this.x,d=this.y,p=s*(1-o),m=s-p,y=c-p,x=c+l+p,v=d-p,S=d+u+p,b=c+m,w=c+l-m,C=d+m,A=d+u-m;return e>=y&&e<=x&&t>=v&&t<=S&&!(e>b&&e<w&&t>C&&t<A)}intersects(e,t){if(!t){const X=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=X)return!1;const K=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>K}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const c=La[0].set(e.left,e.top),d=La[1].set(e.left,e.bottom),p=La[2].set(e.right,e.top),m=La[3].set(e.right,e.bottom);if(p.x<=c.x||d.y<=c.y)return!1;const y=Math.sign(t.a*t.d-t.b*t.c);if(y===0||(t.apply(c,c),t.apply(d,d),t.apply(p,p),t.apply(m,m),Math.max(c.x,d.x,p.x,m.x)<=s||Math.min(c.x,d.x,p.x,m.x)>=o||Math.max(c.y,d.y,p.y,m.y)<=l||Math.min(c.y,d.y,p.y,m.y)>=u))return!1;const x=y*(d.y-c.y),v=y*(c.x-d.x),S=x*s+v*l,b=x*o+v*l,w=x*s+v*u,C=x*o+v*u;if(Math.max(S,b,w,C)<=x*c.x+v*c.y||Math.min(S,b,w,C)>=x*m.x+v*m.y)return!1;const A=y*(c.y-p.y),P=y*(p.x-c.x),E=A*s+P*l,G=A*o+P*l,$=A*s+P*u,O=A*o+P*u;return!(Math.max(E,G,$,O)<=A*c.x+P*c.y||Math.min(E,G,$,O)>=A*m.x+P*m.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),l=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=o-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),l=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=o,this.height=l-o,this}getBounds(e){return e||(e=new nt),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,o=e.x+e.width,l=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(e,t,s,o){return this.x=e,this.y=t,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const ec={default:-1};function dt(r="default"){return ec[r]===void 0&&(ec[r]=-1),++ec[r]}const Wf=new Set,We="8.0.0",Hy="8.3.4",Gi={quiet:!1,noColor:!1},Me=(r,e,t=3)=>{if(Gi.quiet||Wf.has(e))return;let s=new Error().stack;const o=`${e}
Deprecated since v${r}`,l=typeof console.groupCollapsed=="function"&&!Gi.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(t).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),Wf.add(e)};Object.defineProperties(Me,{quiet:{get:()=>Gi.quiet,set:r=>{Gi.quiet=r},enumerable:!0,configurable:!1},noColor:{get:()=>Gi.noColor,set:r=>{Gi.noColor=r},enumerable:!0,configurable:!1}});const pp=()=>{};function Yi(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Hf(r){return!(r&r-1)&&!!r}function mp(r){const e={};for(const t in r)r[t]!==void 0&&(e[t]=r[t]);return e}const Vf=Object.create(null);function Vy(r){const e=Vf[r];return e===void 0&&(Vf[r]=dt("resource")),e}const gp=class yp extends Mn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...yp.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Me(We,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Vy(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};gp.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Xi=gp;const xp=class vp extends Mn{constructor(e={}){super(),this.options=e,this.uid=dt("textureSource"),this._resourceType="textureSource",this._resourceId=dt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...vp.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new Xi(mp(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=dt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const o=Math.round(e*s),l=Math.round(t*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=dt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Hf(this.pixelWidth)&&Hf(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};xp.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Rn=xp;class Xc extends Rn{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Xc.extension=fe.TextureSource;const Yf=new Le;class Yy{constructor(e,t){this.mapCoord=new Le,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let o=0;o<e.length;o+=2){const l=e[o],u=e[o+1];t[o]=l*s.a+u*s.c+s.tx,t[o+1]=l*s.b+u*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,o=e.trim;o&&(Yf.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Yf));const l=e.source,u=this.uClampFrame,c=this.clampMargin/l._resolution,d=this.clampOffset/l._resolution;return u[0]=(e.frame.x+c+d)/l.width,u[1]=(e.frame.y+c+d)/l.height,u[2]=(e.frame.x+e.frame.width-c+d)/l.width,u[3]=(e.frame.y+e.frame.height-c+d)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=e.frame.width===l.width&&e.frame.height===l.height&&e.rotate===0,!0}}class ze extends Mn{constructor({source:e,label:t,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:c,rotate:d,dynamic:p}={}){if(super(),this.uid=dt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new nt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new Rn,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:m,height:y}=this._source;this.frame.width=m,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=c,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Yy(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:o}=this._source,l=t.x/s,u=t.y/o,c=t.width/s,d=t.height/o;let p=this.rotate;if(p){const m=c/2,y=d/2,x=l+m,v=u+y;p=He.add(p,He.NW),e.x0=x+m*He.uX(p),e.y0=v+y*He.uY(p),p=He.add(p,2),e.x1=x+m*He.uX(p),e.y1=v+y*He.uY(p),p=He.add(p,2),e.x2=x+m*He.uX(p),e.y2=v+y*He.uY(p),p=He.add(p,2),e.x3=x+m*He.uX(p),e.y3=v+y*He.uY(p)}else e.x0=l,e.y0=u,e.x1=l+c,e.y1=u,e.x2=l+c,e.y2=u+d,e.x3=l,e.y3=u+d}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Me(We,"Texture.baseTexture is now Texture.source"),this._source}}ze.EMPTY=new ze({label:"EMPTY",source:new Rn({label:"EMPTY"})});ze.EMPTY.destroy=pp;ze.WHITE=new ze({source:new Xc({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});ze.WHITE.destroy=pp;function Xy(r,e,t){const{width:s,height:o}=t.orig,l=t.trim;if(l){const u=l.width,c=l.height;r.minX=l.x-e._x*s,r.maxX=r.minX+u,r.minY=l.y-e._y*o,r.maxY=r.minY+c}else r.minX=-e._x*s,r.maxX=r.minX+s,r.minY=-e._y*o,r.maxY=r.minY+o}const Xf=new Le;class En{constructor(e=1/0,t=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Xf,this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new nt);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Xf,this}set(e,t,s,o){this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}addFrame(e,t,s,o,l){l||(l=this.matrix);const u=l.a,c=l.b,d=l.c,p=l.d,m=l.tx,y=l.ty;let x=this.minX,v=this.minY,S=this.maxX,b=this.maxY,w=u*e+d*t+m,C=c*e+p*t+y;w<x&&(x=w),C<v&&(v=C),w>S&&(S=w),C>b&&(b=C),w=u*s+d*t+m,C=c*s+p*t+y,w<x&&(x=w),C<v&&(v=C),w>S&&(S=w),C>b&&(b=C),w=u*e+d*o+m,C=c*e+p*o+y,w<x&&(x=w),C<v&&(v=C),w>S&&(S=w),C>b&&(b=C),w=u*s+d*o+m,C=c*s+p*o+y,w<x&&(x=w),C<v&&(v=C),w>S&&(S=w),C>b&&(b=C),this.minX=x,this.minY=v,this.maxX=S,this.maxY=b}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:c,c:d,d:p,tx:m,ty:y}=e;let x=u*t+d*s+m,v=c*t+p*s+y;this.minX=x,this.minY=v,this.maxX=x,this.maxY=v,x=u*o+d*s+m,v=c*o+p*s+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=u*t+d*l+m,v=c*t+p*l+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=u*o+d*l+m,v=c*o+p*l+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,o){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new En(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,o){let l=this.minX,u=this.minY,c=this.maxX,d=this.maxY;o||(o=this.matrix);const p=o.a,m=o.b,y=o.c,x=o.d,v=o.tx,S=o.ty;for(let b=t;b<s;b+=2){const w=e[b],C=e[b+1],A=p*w+y*C+v,P=m*w+x*C+S;l=A<l?A:l,u=P<u?P:u,c=A>c?A:c,d=P>d?P:d}this.minX=l,this.minY=u,this.maxX=c,this.maxY=d}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var qy={grad:.9,turn:360,rad:360/(2*Math.PI)},rr=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Ct=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},xn=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},_p=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},qf=function(r){return{r:xn(r.r,0,255),g:xn(r.g,0,255),b:xn(r.b,0,255),a:xn(r.a)}},tc=function(r){return{r:Ct(r.r),g:Ct(r.g),b:Ct(r.b),a:Ct(r.a,3)}},Ky=/^#([0-9a-f]{3,8})$/i,Fa=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},wp=function(r){var e=r.r,t=r.g,s=r.b,o=r.a,l=Math.max(e,t,s),u=l-Math.min(e,t,s),c=u?l===e?(t-s)/u:l===t?2+(s-e)/u:4+(e-t)/u:0;return{h:60*(c<0?c+6:c),s:l?u/l*100:0,v:l/255*100,a:o}},Sp=function(r){var e=r.h,t=r.s,s=r.v,o=r.a;e=e/360*6,t/=100,s/=100;var l=Math.floor(e),u=s*(1-t),c=s*(1-(e-l)*t),d=s*(1-(1-e+l)*t),p=l%6;return{r:255*[s,c,u,u,d,s][p],g:255*[d,s,s,c,u,u][p],b:255*[u,u,d,s,s,c][p],a:o}},Kf=function(r){return{h:_p(r.h),s:xn(r.s,0,100),l:xn(r.l,0,100),a:xn(r.a)}},Qf=function(r){return{h:Ct(r.h),s:Ct(r.s),l:Ct(r.l),a:Ct(r.a,3)}},Zf=function(r){return Sp((t=(e=r).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},ro=function(r){return{h:(e=wp(r)).h,s:(o=(200-(t=e.s))*(s=e.v)/100)>0&&o<200?t*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,s,o},Qy=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Zy=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Jy=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,e3=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Pc={string:[[function(r){var e=Ky.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Ct(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Ct(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=Jy.exec(r)||e3.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:qf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=Qy.exec(r)||Zy.exec(r);if(!e)return null;var t,s,o=Kf({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(qy[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Zf(o)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,s=r.b,o=r.a,l=o===void 0?1:o;return rr(e)&&rr(t)&&rr(s)?qf({r:Number(e),g:Number(t),b:Number(s),a:Number(l)}):null},"rgb"],[function(r){var e=r.h,t=r.s,s=r.l,o=r.a,l=o===void 0?1:o;if(!rr(e)||!rr(t)||!rr(s))return null;var u=Kf({h:Number(e),s:Number(t),l:Number(s),a:Number(l)});return Zf(u)},"hsl"],[function(r){var e=r.h,t=r.s,s=r.v,o=r.a,l=o===void 0?1:o;if(!rr(e)||!rr(t)||!rr(s))return null;var u=(function(c){return{h:_p(c.h),s:xn(c.s,0,100),v:xn(c.v,0,100),a:xn(c.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(l)});return Sp(u)},"hsv"]]},Jf=function(r,e){for(var t=0;t<e.length;t++){var s=e[t][0](r);if(s)return[s,e[t][1]]}return[null,void 0]},t3=function(r){return typeof r=="string"?Jf(r.trim(),Pc.string):typeof r=="object"&&r!==null?Jf(r,Pc.object):[null,void 0]},nc=function(r,e){var t=ro(r);return{h:t.h,s:xn(t.s+100*e,0,100),l:t.l,a:t.a}},rc=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},e1=function(r,e){var t=ro(r);return{h:t.h,s:t.s,l:xn(t.l+100*e,0,100),a:t.a}},Tc=(function(){function r(e){this.parsed=t3(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Ct(rc(this.rgba),2)},r.prototype.isDark=function(){return rc(this.rgba)<.5},r.prototype.isLight=function(){return rc(this.rgba)>=.5},r.prototype.toHex=function(){return e=tc(this.rgba),t=e.r,s=e.g,o=e.b,u=(l=e.a)<1?Fa(Ct(255*l)):"","#"+Fa(t)+Fa(s)+Fa(o)+u;var e,t,s,o,l,u},r.prototype.toRgb=function(){return tc(this.rgba)},r.prototype.toRgbString=function(){return e=tc(this.rgba),t=e.r,s=e.g,o=e.b,(l=e.a)<1?"rgba("+t+", "+s+", "+o+", "+l+")":"rgb("+t+", "+s+", "+o+")";var e,t,s,o,l},r.prototype.toHsl=function(){return Qf(ro(this.rgba))},r.prototype.toHslString=function(){return e=Qf(ro(this.rgba)),t=e.h,s=e.s,o=e.l,(l=e.a)<1?"hsla("+t+", "+s+"%, "+o+"%, "+l+")":"hsl("+t+", "+s+"%, "+o+"%)";var e,t,s,o,l},r.prototype.toHsv=function(){return e=wp(this.rgba),{h:Ct(e.h),s:Ct(e.s),v:Ct(e.v),a:Ct(e.a,3)};var e},r.prototype.invert=function(){return Un({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Un(nc(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Un(nc(this.rgba,-e))},r.prototype.grayscale=function(){return Un(nc(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Un(e1(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Un(e1(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Un({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ct(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=ro(this.rgba);return typeof e=="number"?Un({h:e,s:t.s,l:t.l,a:t.a}):Ct(t.h)},r.prototype.isEqual=function(e){return this.toHex()===Un(e).toHex()},r})(),Un=function(r){return r instanceof Tc?r:new Tc(r)},t1=[],n3=function(r){r.forEach(function(e){t1.indexOf(e)<0&&(e(Tc,Pc),t1.push(e))})};function r3(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in t)s[t[o]]=o;var l={};r.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,d,p=s[this.toHex()];if(p)return p;if(u!=null&&u.closest){var m=this.toRgb(),y=1/0,x="black";if(!l.length)for(var v in t)l[v]=new r(t[v]).toRgb();for(var S in t){var b=(c=m,d=l[S],Math.pow(c.r-d.r,2)+Math.pow(c.g-d.g,2)+Math.pow(c.b-d.b,2));b<y&&(y=b,x=S)}return x}},e.string.push([function(u){var c=u.toLowerCase(),d=c==="transparent"?"#0000":t[c];return d?new r(d).toRgb():null},"name"])}n3([r3]);const qi=class Js{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Js)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((l,u)=>l===t[u]);if(e!==null&&t!==null){const l=Object.keys(e),u=Object.keys(t);return l.length!==u.length?!1:l.every(c=>e[c]===t[c])}return e===t}toRgba(){const[e,t,s,o]=this._components;return{r:e,g:t,b:s,a:o}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(o*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,o,l]=this._components;return e[0]=t,e[1]=s,e[2]=o,e[3]=l,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,o]=this._components;return e[0]=t,e[1]=s,e[2]=o,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,o,l]=Js._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return t&&(s=s*e+.5|0,o=o*e+.5|0,l=l*e+.5|0),(e*255<<24)+(s<<16)+(o<<8)+l}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,o,l;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,o,l=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,o,l=255]=e,t/=255,s/=255,o/=255,l/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const c=Js.HEX_PATTERN.exec(e);c&&(e=`#${c[2]}`)}const u=Un(e);u.isValid()&&({r:t,g:s,b:o,a:l}=u.rgba,t/=255,s/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((o,l)=>{e[l]=Math.min(Math.max(o,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Js||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};qi.shared=new qi;qi._temp=new qi;qi.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let xt=qi;const i3={cullArea:null,cullable:!1,cullableChildren:!0};let ic=0;const n1=500;function Qe(...r){ic!==n1&&(ic++,ic===n1?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}const go={_registeredResources:new Set,register(r){this._registeredResources.add(r)},unregister(r){this._registeredResources.delete(r)},release(){this._registeredResources.forEach(r=>r.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(r){return this._registeredResources.has(r)},reset(){this._registeredResources.clear()}};class s3{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class o3{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new s3(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const vn=new o3;go.register(vn);const a3={get isCachedAsTexture(){var r;return!!((r=this.renderGroup)!=null&&r.isCachedAsTexture)},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){var r;(r=this.renderGroup)==null||r.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){Me("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function l3(r,e,t){const s=r.length;let o;if(e>=s||t===0)return;t=e+t>s?s-e:t;const l=s-t;for(o=e;o<l;++o)r[o]=r[o+t];r.length=l}const u3={allowChildren:!0,removeChildren(r=0,e){var l;const t=e??this.children.length,s=t-r,o=[];if(s>0&&s<=t){for(let c=t-1;c>=r;c--){const d=this.children[c];d&&(o.push(d),d.parent=null)}l3(this.children,r,t);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(o);for(let c=0;c<o.length;++c){const d=o[c];(l=d.parentRenderLayer)==null||l.detach(d),this.emit("childRemoved",d,this,c),o[c].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const e=this.getChildAt(r);return this.removeChild(e)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,e)},getChildIndex(r){const e=this.children.indexOf(r);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(r,e){this.allowChildren||Me(We,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${r}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(r.parent){const o=r.parent.children.indexOf(r);if(r.parent===this&&o===e)return r;o!==-1&&r.parent.children.splice(o,1)}e===t.length?t.push(r):t.splice(e,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,e),r.emit("added",this),r},swapChildren(r,e){if(r===e)return;const t=this.getChildIndex(r),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=r;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var r;(r=this.parent)==null||r.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(e=>this.reparentChildAt(e,this.children.length)),r[0])},reparentChildAt(r,e){if(r.parent===this)return this.setChildIndex(r,e),r;const t=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),r.setFromMatrix(t),r},replaceChild(r,e){r.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(r)),e.setFromMatrix(r.localTransform),e.updateLocalTransform(),this.removeChild(r)}},c3={collectRenderables(r,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(r,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,r):this.collectRenderablesWithEffects(r,e,t))},collectRenderablesSimple(r,e,t){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(r,e,t)},collectRenderablesWithEffects(r,e,t){const{renderPipes:s}=e;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,r)}this.collectRenderablesSimple(r,e,t);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,r)}}};class r1{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class h3{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return vn.get(s.maskClass,e)}return e}returnMaskEffect(e){vn.return(e)}}const Ec=new h3;Mt.handleByList(fe.MaskEffect,Ec._effectClasses);const d3={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const e=this.effects.indexOf(r);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const e=this._maskEffect;(e==null?void 0:e.mask)!==r&&(e&&(this.removeEffect(e),Ec.returnMaskEffect(e),this._maskEffect=null),r!=null&&(this._maskEffect=Ec.getMaskEffect(r),this.addEffect(this._maskEffect)))},get mask(){var r;return(r=this._maskEffect)==null?void 0:r.mask},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},set filters(r){var l;!Array.isArray(r)&&r&&(r=[r]);const e=this._filterEffect||(this._filterEffect=new r1);r=r;const t=(r==null?void 0:r.length)>0,s=((l=e.filters)==null?void 0:l.length)>0,o=t!==s;r=Array.isArray(r)?r.slice(0):r,e.filters=Object.freeze(r),o&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=r??null))},get filters(){var r;return(r=this._filterEffect)==null?void 0:r.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new r1),this._filterEffect.filterArea=r},get filterArea(){var r;return(r=this._filterEffect)==null?void 0:r.filterArea}},f3={label:null,get name(){return Me(We,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){Me(We,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,e=!1){return this.getChildByLabel(r,e)},getChildByLabel(r,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const o=t[s];if(o.label===r||r instanceof RegExp&&r.test(o.label))return o}if(e)for(let s=0;s<t.length;s++){const l=t[s].getChildByLabel(r,!0);if(l)return l}return null},getChildrenByLabel(r,e=!1,t=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===r||r instanceof RegExp&&r.test(l.label))&&t.push(l)}if(e)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(r,!0,t);return t}},Nt=vn.getPool(Le),or=vn.getPool(En),p3=new Le,m3={getFastGlobalBounds(r,e){e||(e=new En),e.clear(),this._getGlobalBoundsRecursive(!!r,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(r,e,t){let s=e;if(r&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=or.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(r,s,t)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let c=0;c<this.effects.length;c++)this.effects[c].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[c].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(p3).invert()),e.addBounds(s),or.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),or.return(s))}};function bp(r,e,t){t.clear();let s,o;return r.parent?e?s=r.parent.worldTransform:(o=Nt.get().identity(),s=qc(r,o)):s=Le.IDENTITY,kp(r,t,s,e),o&&Nt.return(o),t.isValid||t.set(0,0,0,0),t}function kp(r,e,t,s){var c,d;if(!r.visible||!r.measurable)return;let o;s?o=r.worldTransform:(r.updateLocalTransform(),o=Nt.get(),o.appendFrom(r.localTransform,t));const l=e,u=!!r.effects.length;if(u&&(e=or.get().clear()),r.boundsArea)e.addRect(r.boundsArea,o);else{const p=r.bounds;p&&!p.isEmpty()&&(e.matrix=o,e.addBounds(p));for(let m=0;m<r.children.length;m++)kp(r.children[m],e,o,s)}if(u){for(let p=0;p<r.effects.length;p++)(d=(c=r.effects[p]).addBounds)==null||d.call(c,e);l.addBounds(e,Le.IDENTITY),or.return(e)}s||Nt.return(o)}function qc(r,e){const t=r.parent;return t&&(qc(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function Cp(r,e){if(r===16777215||!e)return e;if(e===16777215||!r)return r;const t=r>>16&255,s=r>>8&255,o=r&255,l=e>>16&255,u=e>>8&255,c=e&255,d=t*l/255|0,p=s*u/255|0,m=o*c/255|0;return(d<<16)+(p<<8)+m}const i1=16777215;function s1(r,e){return r===i1?e:e===i1?r:Cp(r,e)}function Va(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const g3={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(r=new Le,e){if(e)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const t=qc(this,Nt.get().identity());return r.appendFrom(this.localTransform,t),Nt.return(t),r},getGlobalTint(r){if(r)return this.renderGroup?Va(this.renderGroup.worldColor):this.parentRenderGroup?Va(s1(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=s1(e,t.localColor),t=t.parent;return Va(e)}};function Ap(r,e,t){return e.clear(),t||(t=Le.IDENTITY),Pp(r,e,t,r,!0),e.isValid||e.set(0,0,0,0),e}function Pp(r,e,t,s,o){var d,p;let l;if(o)l=Nt.get(),l=t.copyTo(l);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const m=r.localTransform;l=Nt.get(),l.appendFrom(m,t)}const u=e,c=!!r.effects.length;if(c&&(e=or.get().clear()),r.boundsArea)e.addRect(r.boundsArea,l);else{r.renderPipeId&&(e.matrix=l,e.addBounds(r.bounds));const m=r.children;for(let y=0;y<m.length;y++)Pp(m[y],e,l,s,!1)}if(c){for(let m=0;m<r.effects.length;m++)(p=(d=r.effects[m]).addLocalBounds)==null||p.call(d,e,s);u.addBounds(e,Le.IDENTITY),or.return(e)}Nt.return(l)}function Tp(r,e){const t=r.children;for(let s=0;s<t.length;s++){const o=t[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,c=e.index;(e.data[c]!==l||e.data[c+1]!==u)&&(e.data[e.index]=l,e.data[e.index+1]=u,e.didChange=!0),e.index=c+2,o.children.length&&Tp(o,e)}return e.didChange}const y3=new Le,x3={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=r/e*t:this.scale.x=t},_setHeight(r,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=r/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new En});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),Tp(this,r),r.didChange&&Ap(this,r.localBounds,y3),r.localBounds},getBounds(r,e){return bp(this,r,e||new En)}},v3={_onRender:null,set onRender(r){const e=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},_3={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(w3))}};function w3(r,e){return r._zIndex-e._zIndex}const S3={getGlobalPosition(r=new Bt,e=!1){return this.parent?this.parent.toGlobal(this._position,r,e):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,e,t=!1){const s=this.getGlobalTransform(Nt.get(),t);return e=s.apply(r,e),Nt.return(s),e},toLocal(r,e,t,s){e&&(r=e.toGlobal(r,t,s));const o=this.getGlobalTransform(Nt.get(),s);return t=o.applyInverse(r,t),Nt.return(o),t}};class Ep{constructor(){this.uid=dt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let b3=0;class k3{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new Xi(this.textureOptions)}createTexture(e,t,s){const o=new Rn({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new ze({source:o,label:`texturePool_${b3++}`})}getOptimalTexture(e,t,s=1,o){let l=Math.ceil(e*s-1e-6),u=Math.ceil(t*s-1e-6);l=Yi(l),u=Yi(u);const c=(l<<17)+(u<<1)+(o?1:0);this._texturePool[c]||(this._texturePool[c]=[]);let d=this._texturePool[c].pop();return d||(d=this.createTexture(l,u,o)),d.source._resolution=s,d.source.width=l/s,d.source.height=u/s,d.source.pixelWidth=l,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=e,d.frame.height=t,d.updateUvs(),this._poolKeyHash[d.uid]=c,d}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const Mp=new k3;go.register(Mp);class C3{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Le,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Ep,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Mp.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Le),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Le),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Le),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function A3(r,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(r[s]=e[s])}const sc=new Et(null),za=new Et(null),oc=new Et(null,1,1),Ba=new Et(null),o1=1,P3=2,ac=4;class sn extends Mn{constructor(e={}){var t,s;super(),this.uid=dt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Le,this.relativeGroupTransform=new Le,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Et(this,0,0),this._scale=oc,this._pivot=za,this._origin=Ba,this._skew=sc,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],A3(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(o=>this.addChild(o)),(s=e.parent)==null||s.addChild(this)}static mixin(e){Me("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Mt.mixin(sn,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Me(We,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let o=0;o<e.length;o++)this.addChild(e[o]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let o=0;o<e.length;o++)this.removeChild(e[o]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=vn.get(C3,this),this.groupTransform=Le.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),vn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Le),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*$y}set angle(e){this.rotation=e*Ny}get pivot(){return this._pivot===za&&(this._pivot=new Et(this,0,0)),this._pivot}set pivot(e){this._pivot===za&&(this._pivot=new Et(this,0,0),this._origin!==Ba&&Qe("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===sc&&(this._skew=new Et(this,0,0)),this._skew}set skew(e){this._skew===sc&&(this._skew=new Et(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===oc&&(this._scale=new Et(this,1,1)),this._scale}set scale(e){this._scale===oc&&(this._scale=new Et(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Ba&&(this._origin=new Et(this,0,0)),this._origin}set origin(e){this._origin===Ba&&(this._origin=new Et(this,0,0),this._pivot!==za&&Qe("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,c=s._x,d=s._y,p=o._x,m=o._y,y=-l._x,x=-l._y;t.a=this._cx*c,t.b=this._sx*c,t.c=this._cy*d,t.d=this._sy*d,t.tx=u._x-(p*t.a+m*t.c)+(y*t.a+x*t.c)-y,t.ty=u._y-(p*t.b+m*t.d)+(y*t.b+x*t.d)-x}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=o1,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=xt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=o1,this._onUpdate())}get tint(){return Va(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=P3,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ac,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ac,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=ac,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var o;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let l=0;l<t.length;++l)t[l].destroy(e);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}Mt.mixin(sn,u3,m3,S3,v3,x3,d3,f3,_3,i3,a3,g3,c3);class Kc extends sn{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new En(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:o}=e;return s>=t.minX&&s<=t.maxX&&o>=t.minY&&o<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var t,s;super.destroy(e),this._bounds=null;for(const o in this._gpuData)(s=(t=this._gpuData[o]).destroy)==null||s.call(t);this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:o}=t;o.blendMode.pushBlendMode(this,this.groupBlendMode,e),o[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const u=this.children,c=u.length;for(let d=0;d<c;d++)u[d].collectRenderables(e,t,s);o.blendMode.popBlendMode(e)}}class Ki extends Kc{constructor(e=ze.EMPTY){e instanceof ze&&(e={texture:e});const{texture:t=ze.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...c}=e;super({label:"Sprite",...c}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Et({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof ze?new Ki(e):new Ki(ze.from(e,t))}set texture(e){e||(e=ze.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Xy(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Me("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:o,height:l}=t.orig;s.minX=-e._x*o,s.maxX=s.minX+o,s.minY=-e._y*l,s.maxY=s.minY+l}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const T3=new En;function Rp(r,e,t){const s=T3;r.measurable=!0,bp(r,t,s),e.addBoundsMask(s),r.measurable=!1}function Ip(r,e,t){const s=or.get();r.measurable=!0;const o=Nt.get().identity(),l=Lp(r,t,o);Ap(r,s,l),r.measurable=!1,e.addBoundsMask(s),Nt.return(o),or.return(s)}function Lp(r,e,t){return r?(r!==e&&(Lp(r.parent,e,t),r.updateLocalTransform(),t.append(r.localTransform)),t):(Qe("Mask bounds, renderable is not inside the root container"),t)}class Fp{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Ki),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||Rp(this.mask,e,t)}addLocalBounds(e,t){Ip(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof Ki}}Fp.extension=fe.MaskEffect;class zp{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}zp.extension=fe.MaskEffect;class Bp{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){Rp(this.mask,e,t)}addLocalBounds(e,t){Ip(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof sn}}Bp.extension=fe.MaskEffect;const E3={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};let a1=E3;const Ye={get(){return a1},set(r){a1=r}};class jp extends Rn{constructor(e){e.resource||(e.resource=Ye.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const o=super.resize(e,t,s);return o&&this.resizeCanvas(),o}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}jp.extension=fe.TextureSource;class si extends Rn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}si.extension=fe.TextureSource;var Mc=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Mc||{});class lc{constructor(e,t=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=o}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Dp=class rn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new lc(null,null,1/0),this.deltaMS=1/rn.targetFPMS,this.elapsedMS=1/rn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Mc.NORMAL){return this._addListener(new lc(e,t,s))}addOnce(e,t,s=Mc.NORMAL){return this._addListener(new lc(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const l=e-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=e-l%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*rn.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,rn.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!rn._shared){const e=rn._shared=new rn;e.autoStart=!0,e._protected=!0}return rn._shared}static get system(){if(!rn._system){const e=rn._system=new rn;e.autoStart=!0,e._protected=!0}return rn._system}};Dp.targetFPMS=.06;let ja=Dp,uc;async function Op(){return uc??(uc=(async()=>{var u;const e=Ye.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(c=>{const d=document.createElement("video");d.onloadeddata=()=>c(d),d.onerror=()=>c(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),e.deleteFramebuffer(o),e.deleteTexture(s),(u=e.getExtension("WEBGL_lose_context"))==null||u.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),uc}const nl=class $p extends Rn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...$p.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=ja.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Op(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(ja.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ja.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ja.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};nl.extension=fe.TextureSource;nl.defaultOptions={...Rn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};nl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let io=nl;const Tn=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(s=>typeof s=="string"||t?e(s):s):r);class M3{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Qe(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=Tn(e);let o;for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];if(p.test(t)){o=p.getCacheableAssets(s,t);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(d=>{l.set(d,t)});const u=[...l.keys()],c={cacheKeys:u,keys:s};s.forEach(d=>{this._cacheMap.set(d,c)}),u.forEach(d=>{const p=o?o[d]:t;this._cache.has(d)&&this._cache.get(d)!==p&&Qe("[Cache] already has key:",d),this._cache.set(d,l.get(d))})}remove(e){if(!this._cacheMap.has(e)){Qe(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(o=>{this._cache.delete(o)}),t.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const Ke=new M3,Rc=[];Mt.handleByList(fe.TextureSource,Rc);function Np(r={}){const e=r&&r.resource,t=e?r.resource:r,s=e?r:{resource:r};for(let o=0;o<Rc.length;o++){const l=Rc[o];if(l.test(t))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function R3(r={},e=!1){const t=r&&r.resource,s=t?r.resource:r,o=t?r:{resource:r};if(!e&&Ke.has(s))return Ke.get(s);const l=new ze({source:Np(o)});return l.on("destroy",()=>{Ke.has(s)&&Ke.remove(s)}),e||Ke.set(s,l),l}function I3(r,e=!1){return typeof r=="string"?Ke.get(r):r instanceof Rn?new ze({source:r}):R3(r,e)}ze.from=I3;Rn.from=Np;Mt.add(Fp,zp,Bp,io,si,jp,Xc);var Lr=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Lr||{});function Pn(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Vs(r){return r.split("?")[0].split("#")[0]}function L3(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function F3(r,e,t){return r.replace(new RegExp(L3(e),"g"),t)}function z3(r,e){let t="",s=0,o=-1,l=0,u=-1;for(let c=0;c<=r.length;++c){if(c<r.length)u=r.charCodeAt(c);else{if(u===47)break;u=47}if(u===47){if(!(o===c-1||l===1))if(o!==c-1&&l===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const d=t.lastIndexOf("/");if(d!==t.length-1){d===-1?(t="",s=0):(t=t.slice(0,d),s=t.length-1-t.lastIndexOf("/")),o=c,l=0;continue}}else if(t.length===2||t.length===1){t="",s=0,o=c,l=0;continue}}}else t.length>0?t+=`/${r.slice(o+1,c)}`:t=r.slice(o+1,c),s=c-o-1;o=c,l=0}else u===46&&l!==-1?++l:l=-1}return t}const on={toPosix(r){return F3(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Pn(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(Pn(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const s=Vs(this.toPosix(e??Ye.get().getBaseUrl())),o=Vs(this.toPosix(t??this.rootname(s)));return r=this.toPosix(r),r.startsWith("/")?on.join(o,r.slice(1)):this.isAbsolute(r)?r:this.join(s,r)},normalize(r){if(Pn(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const s=r.endsWith("/");return r=z3(r),r.length>0&&s&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return Pn(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const s=r[t];if(Pn(s),s.length>0)if(e===void 0)e=s;else{const o=r[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(Pn(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let s=-1,o=!0;const l=this.getProtocol(r),u=r;r=r.slice(l.length);for(let c=r.length-1;c>=1;--c)if(e=r.charCodeAt(c),e===47){if(!o){s=c;break}}else o=!1;return s===-1?t?"/":this.isUrl(u)?l+r:l:t&&s===1?"//":l+r.slice(0,s)},rootname(r){Pn(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){Pn(r),e&&Pn(e),r=Vs(this.toPosix(r));let t=0,s=-1,o=!0,l;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let u=e.length-1,c=-1;for(l=r.length-1;l>=0;--l){const d=r.charCodeAt(l);if(d===47){if(!o){t=l+1;break}}else c===-1&&(o=!1,c=l+1),u>=0&&(d===e.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=c))}return t===s?s=c:s===-1&&(s=r.length),r.slice(t,s)}for(l=r.length-1;l>=0;--l)if(r.charCodeAt(l)===47){if(!o){t=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":r.slice(t,s)},extname(r){Pn(r),r=Vs(this.toPosix(r));let e=-1,t=0,s=-1,o=!0,l=0;for(let u=r.length-1;u>=0;--u){const c=r.charCodeAt(u);if(c===47){if(!o){t=u+1;break}continue}s===-1&&(o=!1,s=u+1),c===46?e===-1?e=u:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||s===-1||l===0||l===1&&e===s-1&&e===t+1?"":r.slice(e,s)},parse(r){Pn(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=Vs(this.toPosix(r));let t=r.charCodeAt(0);const s=this.isAbsolute(r);let o;e.root=this.rootname(r),s||this.hasProtocol(r)?o=1:o=0;let l=-1,u=0,c=-1,d=!0,p=r.length-1,m=0;for(;p>=o;--p){if(t=r.charCodeAt(p),t===47){if(!d){u=p+1;break}continue}c===-1&&(d=!1,c=p+1),t===46?l===-1?l=p:m!==1&&(m=1):l!==-1&&(m=-1)}return l===-1||c===-1||m===0||m===1&&l===c-1&&l===u+1?c!==-1&&(u===0&&s?e.base=e.name=r.slice(1,c):e.base=e.name=r.slice(u,c)):(u===0&&s?(e.name=r.slice(1,l),e.base=r.slice(1,c)):(e.name=r.slice(u,l),e.base=r.slice(u,c)),e.ext=r.slice(l,c)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function Up(r,e,t,s,o){const l=e[t];for(let u=0;u<l.length;u++){const c=l[u];t<e.length-1?Up(r.replace(s[t],c),e,t+1,s,o):o.push(r.replace(s[t],c))}}function B3(r){const e=/\{(.*?)\}/g,t=r.match(e),s=[];if(t){const o=[];t.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),Up(r,o,0,t,s)}else s.push(r);return s}const Qa=r=>!Array.isArray(r);class Ji{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return Tn(t||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>(u==null?void 0:u.src)??u):l!=null&&l.src?l.src:l,!0)}addManifest(e){this._manifest&&Qe("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let o=t;Array.isArray(t)||(o=Object.entries(t).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,c=l.alias;let d;if(typeof c=="string"){const p=this._createBundleAssetId(e,c);s.push(p),d=[c,p]}else{const p=c.map(m=>this._createBundleAssetId(e,m));s.push(...p),d=[...c,...p]}this.add({...l,alias:d,src:u})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=l=>{this.hasKey(l)&&Qe(`[Resolver] already has key: ${l} overwriting`)},Tn(t).forEach(l=>{const{src:u}=l;let{data:c,format:d,loadParser:p,parser:m}=l;const y=Tn(u).map(b=>typeof b=="string"?B3(b):Array.isArray(b)?b:[b]),x=this.getAlias(l);Array.isArray(x)?x.forEach(s):s(x);const v=[],S=b=>{const w=this._parsers.find(C=>C.test(b));return{...w==null?void 0:w.parse(b),src:b}};y.forEach(b=>{b.forEach(w=>{let C={};if(typeof w!="object"?C=S(w):(c=w.data??c,d=w.format??d,(w.loadParser||w.parser)&&(p=w.loadParser??p,m=w.parser??m),C={...S(w.src),...w}),!x)throw new Error(`[Resolver] alias is undefined for this asset: ${C.src}`);C=this._buildResolvedAsset(C,{aliases:x,data:c,format:d,loadParser:p,parser:m,progressSize:l.progressSize}),v.push(C)})}),x.forEach(b=>{this._assetMap[b]=v})})}resolveBundle(e){const t=Qa(e);e=Tn(e);const s={};return e.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),c={};for(const d in u){const p=u[d];c[this._extractAssetIdFromBundle(o,d)]=p}s[o]=c}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const o in t)s[o]=t[o].src;return s}return t.src}resolve(e){const t=Qa(e);e=Tn(e);const s={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u==null||u.priority.forEach(c=>{u.params[c].forEach(d=>{const p=l.filter(m=>m[c]?m[c]===d:!1);p.length&&(l=p)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:o,loadParser:l,parser:u,format:c,progressSize:d}=t;return(this._basePath||this._rootPath)&&(e.src=on.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=l??e.loadParser,e.parser=u??e.parser,e.format=c??e.format??j3(e.src),d!==void 0&&(e.progressSize=d),e}}Ji.RETINA_PREFIX=/@([0-9\.]+)x/;function j3(r){return r.split(".").pop().split("?").shift().split("#").shift()}const Ic=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r},Gp=class eo{constructor(e,t){this.linkedSheets=[];let s=e;(e==null?void 0:e.source)instanceof Rn&&(s={texture:e,data:t});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof ze?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const c=parseFloat(l.meta.scale);c?(this.resolution=c,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=eo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=eo.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const o=this._frameKeys[t],l=this._frames[o],u=l.frame;if(u){let c=null,d=null;const p=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,m=new nt(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);l.rotated?c=new nt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):c=new nt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(d=new nt(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new ze({source:this.textureSource,frame:c,orig:m,trim:d,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const o=e[t][s];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*eo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*eo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Gp.BATCH_SIZE=1e3;let l1=Gp;const D3=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Wp(r,e,t){const s={};if(r.forEach(o=>{s[o]=e}),Object.keys(e.textures).forEach(o=>{s[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=on.dirname(r[0]);e.linkedSheets.forEach((l,u)=>{const c=Wp([`${o}/${e.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,c)})}return s}const O3={extension:fe.Asset,cache:{test:r=>r instanceof l1,getCacheableAssets:(r,e)=>Wp(r,e,!1)},resolver:{extension:{type:fe.ResolveParser,name:"resolveSpritesheet"},test:r=>{const t=r.split("?")[0].split("."),s=t.pop(),o=t.pop();return s==="json"&&D3.includes(o)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=Ji.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:fe.LoadParser,priority:Lr.Normal,name:"spritesheetLoader"},async testParse(r,e){return on.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var y,x;const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=(e==null?void 0:e.data)??{};let c=on.dirname(e.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let d;if(s instanceof ze)d=s;else{const v=Ic(c+(o??r.meta.image),e.src);d=(await t.load([{src:v,data:l}]))[v]}const p=new l1({texture:d.source,data:r,cachePrefix:u});await p.parse();const m=(y=r==null?void 0:r.meta)==null?void 0:y.related_multi_packs;if(Array.isArray(m)){const v=[];for(const b of m){if(typeof b!="string")continue;let w=c+b;(x=e.data)!=null&&x.ignoreMultiPack||(w=Ic(w,e.src),v.push(t.load({src:w,data:{textureOptions:l,ignoreMultiPack:!0}})))}const S=await Promise.all(v);p.linkedSheets=S,S.forEach(b=>{b.linkedSheets=[p].concat(p.linkedSheets.filter(w=>w!==b))})}return p},async unload(r,e,t){await t.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};Mt.add(O3);const cc=Object.create(null),u1=Object.create(null);function Qc(r,e){let t=u1[r];return t===void 0&&(cc[e]===void 0&&(cc[e]=1),u1[r]=t=cc[e]++),t}let Oi;function Hp(){return(!Oi||Oi!=null&&Oi.isContextLost())&&(Oi=Ye.get().createCanvas().getContext("webgl",{})),Oi}let Da;function $3(){if(!Da){Da="mediump";const r=Hp();r&&r.getShaderPrecisionFormat&&(Da=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return Da}function N3(r,e,t){return e?r:t?(r=r.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function U3(r,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let o=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${r}`}else if(s!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function G3(r,e){return e?`#version 300 es
${r}`:r}const W3={},H3={};function V3(r,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?W3:H3;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${e}`}
${r}`}function Y3(r,e){return e?r.replace("#version 300 es",""):r}const hc={stripVersion:Y3,ensurePrecision:U3,addProgramDefines:N3,setProgramName:V3,insertVersion:G3},Ys=Object.create(null),Vp=class Lc{constructor(e){e={...Lc.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:$3()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let o=e.fragment,l=e.vertex;Object.keys(hc).forEach(u=>{const c=s[u];o=hc[u](o,c,!0),l=hc[u](l,c,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Qc(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Ys[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return Ys[t]||(Ys[t]=new Lc(e),Ys[t]._cacheKey=t),Ys[t]}};Vp.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Yp=Vp;const c1={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function X3(r){return c1[r]??c1.float32}const q3={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function K3({source:r,entryPoint:e}){const t={},s=r.indexOf(`fn ${e}`);if(s!==-1){const o=r.indexOf("->",s);if(o!==-1){const l=r.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let c;for(;(c=u.exec(l))!==null;){const d=q3[c[3]]??"float32";t[c[2]]={location:parseInt(c[1],10),format:d,stride:X3(d).stride,offset:0,instance:!1,start:0}}}}return t}function dc(r){var y,x;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,c=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,p=(y=r.match(e))==null?void 0:y.map(v=>({group:parseInt(v.match(t)[1],10),binding:parseInt(v.match(s)[1],10),name:v.match(o)[2],isUniform:v.match(o)[1]==="<uniform>",type:v.match(l)[1]}));if(!p)return{groups:[],structs:[]};const m=((x=r.match(u))==null?void 0:x.map(v=>{const S=v.match(d)[1],b=v.match(c).reduce((w,C)=>{const[A,P]=C.split(":");return w[A.trim()]=P.trim(),w},{});return b?{name:S,members:b}:null}).filter(({name:v})=>p.some(S=>S.type===v)))??[];return{groups:p,structs:m}}var to=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(to||{});function Q3({groups:r}){const e=[];for(let t=0;t<r.length;t++){const s=r[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:to.VERTEX|to.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:to.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:to.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function Z3({groups:r}){const e=[];for(let t=0;t<r.length;t++){const s=r[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function J3(r,e){const t=new Set,s=new Set,o=[...r.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),l=[...r.groups,...e.groups].filter(u=>{const c=`${u.name}-${u.binding}`;return s.has(c)?!1:(s.add(c),!0)});return{structs:o,groups:l}}const Xs=Object.create(null);class rl{constructor(e){var c,d;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:o,gpuLayout:l,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=s,t.source===s.source){const p=dc(t.source);this.structsAndGroups=p}else{const p=dc(s.source),m=dc(t.source);this.structsAndGroups=J3(p,m)}this.layout=o??Z3(this.structsAndGroups),this.gpuLayout=l??Q3(this.structsAndGroups),this.autoAssignGlobalUniforms=((c=this.layout[0])==null?void 0:c.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((d=this.layout[1])==null?void 0:d.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Qc(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=K3(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Xs[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Xs[t]||(Xs[t]=new rl(e),Xs[t]._cacheKey=t),Xs[t]}}const Xp=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],e8=Xp.reduce((r,e)=>(r[e]=!0,r),{});function t8(r,e){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const qp=class Kp{constructor(e,t){this._touched=0,this.uid=dt("uniform"),this._resourceType="uniformGroup",this._resourceId=dt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...Kp.defaultOptions,...t},this.uniformStructures=e;const s={};for(const o in e){const l=e[o];if(l.name=o,l.size=l.size??1,!e8[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,c,d]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${c}', size: ${d} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${Xp.join(", ")}`)}l.value??(l.value=t8(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Qc(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};qp.defaultOptions={ubo:!1,isStatic:!1};let Qp=qp;class Ya{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const o=e[s];this.setResource(o,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){var o,l;const s=this.resources[t];e!==s&&(s&&((o=e.off)==null||o.call(e,"change",this.onResourceChange,this)),(l=e.on)==null||l.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){var t;const e=this.resources;for(const s in e){const o=e[s];(t=o==null?void 0:o.off)==null||t.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var Fc=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(Fc||{});class Zc extends Mn{constructor(e){super(),this.uid=dt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:c}=e;this.gpuProgram=t,this.glProgram=s,u===void 0&&(u=0,t&&(u|=Fc.WEBGPU),s&&(u|=Fc.WEBGL)),this.compatibleRenderers=u;const d={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&o&&!c)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&o&&c)for(const p in c)for(const m in c[p]){const y=c[p][m];d[y]={group:p,binding:m,name:y}}else if(t&&o&&!c){const p=t.structsAndGroups.groups;c={},p.forEach(m=>{c[m.group]=c[m.group]||{},c[m.group][m.binding]=m.name,d[m.name]=m})}else if(l){o={},c={},t&&t.structsAndGroups.groups.forEach(y=>{c[y.group]=c[y.group]||{},c[y.group][y.binding]=y.name,d[y.name]=y});let p=0;for(const m in l)d[m]||(o[99]||(o[99]=new Ya,this._ownedBindGroups.push(o[99])),d[m]={group:99,binding:p,name:m},c[99]=c[99]||{},c[99][p]=m,p++);for(const m in l){const y=m;let x=l[m];!x.source&&!x._resourceType&&(x=new Qp(x));const v=d[y];v&&(o[v.group]||(o[v.group]=new Ya,this._ownedBindGroups.push(o[v.group])),o[v.group].setResource(x,v.binding))}}this.groups=o,this._uniformBindMap=c,this.resources=this._buildResourceAccessor(o,d)}addResource(e,t,s){var o,l;(o=this._uniformBindMap)[t]||(o[t]={}),(l=this._uniformBindMap[t])[s]||(l[s]=e),this.groups[t]||(this.groups[t]=new Ya,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const o in t){const l=t[o];Object.defineProperty(s,l.name,{get(){return e[l.group].getResource(l.binding)},set(u){e[l.group].setResource(u,l.binding)}})}return s}destroy(e=!1){var t,s;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...o}=e;let l,u;return t&&(l=rl.from(t)),s&&(u=Yp.from(s)),new Zc({gpuProgram:l,glProgram:u,...o})}}const zc=[];Mt.handleByNamedList(fe.Environment,zc);async function n8(r){if(!r)for(let e=0;e<zc.length;e++){const t=zc[e];if(t.value.test()){await t.value.load();return}}}let qs;function r8(){if(typeof qs=="boolean")return qs;try{qs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{qs=!1}return qs}function h1(r,e,t=2){const s=e&&e.length,o=s?e[0]*t:r.length;let l=Zp(r,0,o,t,!0);const u=[];if(!l||l.next===l.prev)return u;let c,d,p;if(s&&(l=l8(r,e,l,t)),r.length>80*t){c=r[0],d=r[1];let m=c,y=d;for(let x=t;x<o;x+=t){const v=r[x],S=r[x+1];v<c&&(c=v),S<d&&(d=S),v>m&&(m=v),S>y&&(y=S)}p=Math.max(m-c,y-d),p=p!==0?32767/p:0}return lo(l,u,t,c,d,p,0),u}function Zp(r,e,t,s,o){let l;if(o===v8(r,e,t,s)>0)for(let u=e;u<t;u+=s)l=d1(u/s|0,r[u],r[u+1],l);else for(let u=t-s;u>=e;u-=s)l=d1(u/s|0,r[u],r[u+1],l);return l&&Qi(l,l.next)&&(co(l),l=l.next),l}function oi(r,e){if(!r)return r;e||(e=r);let t=r,s;do if(s=!1,!t.steiner&&(Qi(t,t.next)||ut(t.prev,t,t.next)===0)){if(co(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function lo(r,e,t,s,o,l,u){if(!r)return;!u&&l&&f8(r,s,o,l);let c=r;for(;r.prev!==r.next;){const d=r.prev,p=r.next;if(l?s8(r,s,o,l):i8(r)){e.push(d.i,r.i,p.i),co(r),r=p.next,c=p.next;continue}if(r=p,r===c){u?u===1?(r=o8(oi(r),e),lo(r,e,t,s,o,l,2)):u===2&&a8(r,e,t,s,o,l):lo(oi(r),e,t,s,o,l,1);break}}}function i8(r){const e=r.prev,t=r,s=r.next;if(ut(e,t,s)>=0)return!1;const o=e.x,l=t.x,u=s.x,c=e.y,d=t.y,p=s.y,m=Math.min(o,l,u),y=Math.min(c,d,p),x=Math.max(o,l,u),v=Math.max(c,d,p);let S=s.next;for(;S!==e;){if(S.x>=m&&S.x<=x&&S.y>=y&&S.y<=v&&no(o,c,l,d,u,p,S.x,S.y)&&ut(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function s8(r,e,t,s){const o=r.prev,l=r,u=r.next;if(ut(o,l,u)>=0)return!1;const c=o.x,d=l.x,p=u.x,m=o.y,y=l.y,x=u.y,v=Math.min(c,d,p),S=Math.min(m,y,x),b=Math.max(c,d,p),w=Math.max(m,y,x),C=Bc(v,S,e,t,s),A=Bc(b,w,e,t,s);let P=r.prevZ,E=r.nextZ;for(;P&&P.z>=C&&E&&E.z<=A;){if(P.x>=v&&P.x<=b&&P.y>=S&&P.y<=w&&P!==o&&P!==u&&no(c,m,d,y,p,x,P.x,P.y)&&ut(P.prev,P,P.next)>=0||(P=P.prevZ,E.x>=v&&E.x<=b&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&no(c,m,d,y,p,x,E.x,E.y)&&ut(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;P&&P.z>=C;){if(P.x>=v&&P.x<=b&&P.y>=S&&P.y<=w&&P!==o&&P!==u&&no(c,m,d,y,p,x,P.x,P.y)&&ut(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;E&&E.z<=A;){if(E.x>=v&&E.x<=b&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&no(c,m,d,y,p,x,E.x,E.y)&&ut(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function o8(r,e){let t=r;do{const s=t.prev,o=t.next.next;!Qi(s,o)&&e0(s,t,t.next,o)&&uo(s,o)&&uo(o,s)&&(e.push(s.i,t.i,o.i),co(t),co(t.next),t=r=o),t=t.next}while(t!==r);return oi(t)}function a8(r,e,t,s,o,l){let u=r;do{let c=u.next.next;for(;c!==u.prev;){if(u.i!==c.i&&g8(u,c)){let d=t0(u,c);u=oi(u,u.next),d=oi(d,d.next),lo(u,e,t,s,o,l,0),lo(d,e,t,s,o,l,0);return}c=c.next}u=u.next}while(u!==r)}function l8(r,e,t,s){const o=[];for(let l=0,u=e.length;l<u;l++){const c=e[l]*s,d=l<u-1?e[l+1]*s:r.length,p=Zp(r,c,d,s,!1);p===p.next&&(p.steiner=!0),o.push(m8(p))}o.sort(u8);for(let l=0;l<o.length;l++)t=c8(o[l],t);return t}function u8(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const s=(r.next.y-r.y)/(r.next.x-r.x),o=(e.next.y-e.y)/(e.next.x-e.x);t=s-o}return t}function c8(r,e){const t=h8(r,e);if(!t)return e;const s=t0(t,r);return oi(s,s.next),oi(t,t.next)}function h8(r,e){let t=e;const s=r.x,o=r.y;let l=-1/0,u;if(Qi(r,t))return t;do{if(Qi(r,t.next))return t.next;if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>l&&(l=y,u=t.x<t.next.x?t:t.next,y===s))return u}t=t.next}while(t!==e);if(!u)return null;const c=u,d=u.x,p=u.y;let m=1/0;t=u;do{if(s>=t.x&&t.x>=d&&s!==t.x&&Jp(o<p?s:l,o,d,p,o<p?l:s,o,t.x,t.y)){const y=Math.abs(o-t.y)/(s-t.x);uo(t,r)&&(y<m||y===m&&(t.x>u.x||t.x===u.x&&d8(u,t)))&&(u=t,m=y)}t=t.next}while(t!==c);return u}function d8(r,e){return ut(r.prev,r,e.prev)<0&&ut(e.next,r,r.next)<0}function f8(r,e,t,s){let o=r;do o.z===0&&(o.z=Bc(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,p8(o)}function p8(r){let e,t=1;do{let s=r,o;r=null;let l=null;for(e=0;s;){e++;let u=s,c=0;for(let p=0;p<t&&(c++,u=u.nextZ,!!u);p++);let d=t;for(;c>0||d>0&&u;)c!==0&&(d===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,c--):(o=u,u=u.nextZ,d--),l?l.nextZ=o:r=o,o.prevZ=l,l=o;s=u}l.nextZ=null,t*=2}while(e>1);return r}function Bc(r,e,t,s,o){return r=(r-t)*o|0,e=(e-s)*o|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function m8(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Jp(r,e,t,s,o,l,u,c){return(o-u)*(e-c)>=(r-u)*(l-c)&&(r-u)*(s-c)>=(t-u)*(e-c)&&(t-u)*(l-c)>=(o-u)*(s-c)}function no(r,e,t,s,o,l,u,c){return!(r===u&&e===c)&&Jp(r,e,t,s,o,l,u,c)}function g8(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!y8(r,e)&&(uo(r,e)&&uo(e,r)&&x8(r,e)&&(ut(r.prev,r,e.prev)||ut(r,e.prev,e))||Qi(r,e)&&ut(r.prev,r,r.next)>0&&ut(e.prev,e,e.next)>0)}function ut(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Qi(r,e){return r.x===e.x&&r.y===e.y}function e0(r,e,t,s){const o=$a(ut(r,e,t)),l=$a(ut(r,e,s)),u=$a(ut(t,s,r)),c=$a(ut(t,s,e));return!!(o!==l&&u!==c||o===0&&Oa(r,t,e)||l===0&&Oa(r,s,e)||u===0&&Oa(t,r,s)||c===0&&Oa(t,e,s))}function Oa(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function $a(r){return r>0?1:r<0?-1:0}function y8(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&e0(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function uo(r,e){return ut(r.prev,r,r.next)<0?ut(r,e,r.next)>=0&&ut(r,r.prev,e)>=0:ut(r,e,r.prev)<0||ut(r,r.next,e)<0}function x8(r,e){let t=r,s=!1;const o=(r.x+e.x)/2,l=(r.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==r);return s}function t0(r,e){const t=jc(r.i,r.x,r.y),s=jc(e.i,e.x,e.y),o=r.next,l=e.prev;return r.next=e,e.prev=r,t.next=o,o.prev=t,s.next=t,t.prev=s,l.next=s,s.prev=l,s}function d1(r,e,t,s){const o=jc(r,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function co(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function jc(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function v8(r,e,t,s){let o=0;for(let l=e,u=t-s;l<t;l+=s)o+=(r[u]-r[l])*(r[l+1]+r[u+1]),u=l;return o}const _8=h1.default||h1;var n0=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(n0||{});class w8{constructor(e){this.items=[],this._name=e}emit(e,t,s,o,l,u,c,d){const{name:p,items:m}=this;for(let y=0,x=m.length;y<x;y++)m[y][p](e,t,s,o,l,u,c,d);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const S8=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],r0=class i0 extends Mn{constructor(e){super(),this.uid=dt("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...S8,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await n8(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...i0.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof sn&&(s={container:s},t&&(Me(We,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:xt.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const o=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=n0.ALL);const{clear:s,clearColor:o,target:l}=e;xt.shared.setValue(o??this.background.colorRgba),t.renderTarget.clear(l,s,xt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new w8(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(e,t){const s=t.reduce((o,l)=>(o[l.name]=l.value,o),{});e.forEach(o=>{const l=o.value,u=o.name,c=s[u];this.renderPipes[u]=new l(this,c?new c:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&go.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!r8())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};r0.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let s0=r0,Na;function b8(r){return Na!==void 0||(Na=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:r??s0.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ye.get().getWebGLRenderingContext())return!1;let o=Ye.get().createCanvas().getContext("webgl",e);const l=!!((t=o==null?void 0:o.getContextAttributes())!=null&&t.stencil);if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,l}catch{return!1}})()),Na}let Ua;async function k8(r={}){return Ua!==void 0||(Ua=await(async()=>{const e=Ye.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),Ua}const f1=["webgl","webgpu","canvas"];async function C8(r){let e=[];r.preference?(e.push(r.preference),f1.forEach(l=>{l!==r.preference&&e.push(l)})):e=f1.slice();let t,s={};for(let l=0;l<e.length;l++){const u=e[l];if(u==="webgpu"&&await k8()){const{WebGPURenderer:c}=await Ka(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-BlPaKGIl.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]));t=c,s={...r,...r.webgpu};break}else if(u==="webgl"&&b8(r.failIfMajorPerformanceCaveat??s0.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:c}=await Ka(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-Clcf-du5.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]));t=c,s={...r,...r.webgl};break}else if(u==="canvas")throw s={...r},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const o=new t;return await o.init(s),o}const o0="8.14.3";class a0{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,o0)}static destroy(){}}a0.extension=fe.Application;class A8{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,o0)}destroy(){this._renderer=null}}A8.extension={type:[fe.WebGLSystem,fe.WebGPUSystem],name:"initHook",priority:-10};const l0=class Dc{constructor(...e){this.stage=new sn,e[0]!==void 0&&Me(We,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new sn),this.renderer=await C8(e),Dc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Me(We,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=Dc._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};l0._plugins=[];let u0=l0;Mt.handleByList(fe.Application,u0._plugins);Mt.add(a0);class c0 extends Mn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Me(We,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Me(We,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Me(We,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Me(We,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Me(We,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(t=this.chars[s].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class P8{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let o=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(e,t,s=!1,o=this.resetTtl){let l=this.items[e];return s||l!==void 0?(l.value=t,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function h0(r=1e3,e=0,t=!1){if(isNaN(r)||r<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new P8(r,e,t)}const T8=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Za(r){const e=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let t=r.fontFamily;Array.isArray(r.fontFamily)||(t=r.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let o=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!T8.includes(o)&&(o=`"${o}"`),t[s]=o}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${e} ${t.join(",")}`}const fc={willReadFrequently:!0},In=class he{static get experimentalLetterSpacingSupported(){let e=he._experimentalLetterSpacingSupported;if(e===void 0){const t=Ye.get().getCanvasRenderingContext2D().prototype;e=he._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,o,l,u,c,d,p){this.text=e,this.style=t,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=c,this.maxLineWidth=d,this.fontProperties=p}static measureText(e=" ",t,s=he._canvas,o=t.wordWrap){var A;const l=`${e}-${t.styleKey}-wordWrap-${o}`;if(he._measurementCache.has(l))return he._measurementCache.get(l);const u=Za(t),c=he.measureFont(u);c.fontSize===0&&(c.fontSize=t.fontSize,c.ascent=t.fontSize);const d=he.__context;d.font=u;const m=(o?he._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),y=new Array(m.length);let x=0;for(let P=0;P<m.length;P++){const E=he._measureText(m[P],t.letterSpacing,d);y[P]=E,x=Math.max(x,E)}const v=((A=t._stroke)==null?void 0:A.width)||0;let S=x+v;t.dropShadow&&(S+=t.dropShadow.distance);const b=t.lineHeight||c.fontSize;let w=Math.max(b,c.fontSize+v)+(m.length-1)*(b+t.leading);t.dropShadow&&(w+=t.dropShadow.distance);const C=new he(e,t,S,w,m,y,b+t.leading,x,c);return he._measurementCache.set(l,C),C}static _measureText(e,t,s){let o=!1;he.experimentalLetterSpacingSupported&&(he.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(e);let u=l.width;const c=-l.actualBoundingBoxLeft;let p=l.actualBoundingBoxRight-c;if(u>0)if(o)u-=t,p-=t;else{const m=(he.graphemeSegmenter(e).length-1)*t;u+=m,p+=m}return Math.max(u,p)}static _wordWrap(e,t,s=he._canvas){const o=s.getContext("2d",fc);let l=0,u="",c="";const d=Object.create(null),{letterSpacing:p,whiteSpace:m}=t,y=he._collapseSpaces(m),x=he._collapseNewlines(m);let v=!y;const S=t.wordWrapWidth+p,b=he._tokenize(e);for(let w=0;w<b.length;w++){let C=b[w];if(he._isNewline(C)){if(!x){c+=he._addLine(u),v=!y,u="",l=0;continue}C=" "}if(y){const P=he.isBreakingSpace(C),E=he.isBreakingSpace(u[u.length-1]);if(P&&E)continue}const A=he._getFromCache(C,p,d,o);if(A>S)if(u!==""&&(c+=he._addLine(u),u="",l=0),he.canBreakWords(C,t.breakWords)){const P=he.wordWrapSplit(C);for(let E=0;E<P.length;E++){let G=P[E],$=G,O=1;for(;P[E+O];){const ne=P[E+O];if(!he.canBreakChars($,ne,C,E,t.breakWords))G+=ne;else break;$=ne,O++}E+=O-1;const X=he._getFromCache(G,p,d,o);X+l>S&&(c+=he._addLine(u),v=!1,u="",l=0),u+=G,l+=X}}else{u.length>0&&(c+=he._addLine(u),u="",l=0);const P=w===b.length-1;c+=he._addLine(C,!P),v=!1,u="",l=0}else A+l>S&&(v=!1,c+=he._addLine(u),u="",l=0),(u.length>0||!he.isBreakingSpace(C)||v)&&(u+=C,l+=A)}return c+=he._addLine(u,!1),c}static _addLine(e,t=!0){return e=he._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,o){let l=s[e];return typeof l!="number"&&(l=he._measureText(e,t,o)+t,s[e]=l),l}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!he.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:he._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:he._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1];if(he.isBreakingSpace(l,u)||he._isNewline(l)){s!==""&&(t.push(s),s=""),l==="\r"&&u===`
`?(t.push(`\r
`),o++):t.push(l);continue}s+=l}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,o,l){return!0}static wordWrapSplit(e){return he.graphemeSegmenter(e)}static measureFont(e){if(he._fonts[e])return he._fonts[e];const t=he._context;t.font=e;const s=t.measureText(he.METRICS_STRING+he.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return he._fonts[e]=o,o}static clearMetrics(e=""){e?delete he._fonts[e]:he._fonts={}}static get _canvas(){if(!he.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",fc);if(s!=null&&s.measureText)return he.__canvas=t,t;e=Ye.get().createCanvas()}catch{e=Ye.get().createCanvas()}e.width=e.height=10,he.__canvas=e}return he.__canvas}static get _context(){return he.__context||(he.__context=he._canvas.getContext("2d",fc)),he.__context}};In.METRICS_STRING="|q";In.BASELINE_SYMBOL="M";In.BASELINE_MULTIPLIER=1.4;In.HEIGHT_MULTIPLIER=2;In.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>{const t=r.segment(e),s=[];let o=0;for(const l of t)s[o++]=l.segment;return s}}return r=>[...r]})();In.experimentalLetterSpacing=!1;In._fonts={};In._newlines=[10,13];In._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];In._measurementCache=h0(1e3);let Hn=In;const p1=[{offset:0,color:"white"},{offset:1,color:"black"}],Jc=class Oc{constructor(...e){this.uid=dt("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=E8(e);t={...t.type==="radial"?Oc.defaultRadialOptions:Oc.defaultLinearOptions,...mp(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:xt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:o}=this.end,l=s-e,u=o-t;const c=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const w=e;e=s,s=w,l*=-1}if(u<0){const w=t;t=o,o=w,u*=-1}}const d=this.colorStops.length?this.colorStops:p1,p=this._textureSize,{canvas:m,context:y}=g1(p,1),x=c?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);m1(x,d),y.fillStyle=x,y.fillRect(0,0,p,1),this.texture=new ze({source:new si({resource:m,addressMode:this._wrapMode})});const v=Math.sqrt(l*l+u*u),S=Math.atan2(u,l),b=new Le;b.scale(v/p,1),b.rotate(S),b.translate(e,t),this.textureSpace==="local"&&b.scale(p,p),this.transform=b}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:p1,t=this._textureSize,{canvas:s,context:o}=g1(t,t),{x:l,y:u}=this.center,{x:c,y:d}=this.outerCenter,p=this.innerRadius,m=this.outerRadius,y=c-m,x=d-m,v=t/(m*2),S=(l-y)*v,b=(u-x)*v,w=o.createRadialGradient(S,b,p*v,(c-y)*v,(d-x)*v,m*v);m1(w,e),o.fillStyle=e[e.length-1].color,o.fillRect(0,0,t,t),o.fillStyle=w,o.translate(S,b),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-S,-b),o.fillRect(0,0,t,t),this.texture=new ze({source:new si({resource:s,addressMode:this._wrapMode})});const C=new Le;C.scale(1/v,1/v),C.translate(y,x),this.textureSpace==="local"&&C.scale(t,t),this.transform=C}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Jc.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Jc.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let lr=Jc;function m1(r,e){for(let t=0;t<e.length;t++){const s=e[t];r.addColorStop(s.offset,s.color)}}function g1(r,e){const t=Ye.get().createCanvas(r,e),s=t.getContext("2d");return{canvas:t,context:s}}function E8(r){let e=r[0]??{};return(typeof e=="number"||r[1])&&(Me("8.5.2","use options object instead"),e={type:"linear",start:{x:r[0],y:r[1]},end:{x:r[2],y:r[3]},textureSpace:r[4],textureSize:r[5]??lr.defaultLinearOptions.textureSize}),e}const y1={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class il{constructor(e,t){this.uid=dt("fillPattern"),this._tick=0,this.transform=new Le,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=y1[t].addressModeU,e.source.style.addressModeV=y1[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var pc,x1;function M8(){if(x1)return pc;x1=1,pc=t;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(l){var u=[];return l.replace(e,function(c,d,p){var m=d.toLowerCase();for(p=o(p),m=="m"&&p.length>2&&(u.push([d].concat(p.splice(0,2))),m="l",d=d=="m"?"l":"L");;){if(p.length==r[m])return p.unshift(d),u.push(p);if(p.length<r[m])throw new Error("malformed path data");u.push([d].concat(p.splice(0,r[m])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return pc}var R8=M8();const I8=Hc(R8);function L8(r,e){const t=I8(r),s=[];let o=null,l=0,u=0;for(let c=0;c<t.length;c++){const d=t[c],p=d[0],m=d;switch(p){case"M":l=m[1],u=m[2],e.moveTo(l,u);break;case"m":l+=m[1],u+=m[2],e.moveTo(l,u);break;case"H":l=m[1],e.lineTo(l,u);break;case"h":l+=m[1],e.lineTo(l,u);break;case"V":u=m[1],e.lineTo(l,u);break;case"v":u+=m[1],e.lineTo(l,u);break;case"L":l=m[1],u=m[2],e.lineTo(l,u);break;case"l":l+=m[1],u+=m[2],e.lineTo(l,u);break;case"C":l=m[5],u=m[6],e.bezierCurveTo(m[1],m[2],m[3],m[4],l,u);break;case"c":e.bezierCurveTo(l+m[1],u+m[2],l+m[3],u+m[4],l+m[5],u+m[6]),l+=m[5],u+=m[6];break;case"S":l=m[3],u=m[4],e.bezierCurveToShort(m[1],m[2],l,u);break;case"s":e.bezierCurveToShort(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"Q":l=m[3],u=m[4],e.quadraticCurveTo(m[1],m[2],l,u);break;case"q":e.quadraticCurveTo(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"T":l=m[1],u=m[2],e.quadraticCurveToShort(l,u);break;case"t":l+=m[1],u+=m[2],e.quadraticCurveToShort(l,u);break;case"A":l=m[6],u=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"a":l+=m[6],u+=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:Qe(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return e}class eh{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new eh(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-e,l=this.y-t;return o*=o,l*=l,o+l<=s}strokeContains(e,t,s,o=.5){if(this.radius===0)return!1;const l=this.x-e,u=this.y-t,c=this.radius,d=(1-o)*s,p=Math.sqrt(l*l+u*u);return p<=c+d&&p>c-(s-d)}getBounds(e){return e||(e=new nt),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class th{constructor(e=0,t=0,s=0,o=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=o}clone(){return new th(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,o=(t-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(e,t,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const c=s*(1-o),d=s-c,p=l-d,m=u-d,y=l+c,x=u+c,v=e-this.x,S=t-this.y,b=v*v/(p*p)+S*S/(m*m),w=v*v/(y*y)+S*S/(x*x);return b>1&&w<=1}getBounds(e){return e||(e=new nt),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function F8(r,e,t,s,o,l){const u=r-t,c=e-s,d=o-t,p=l-s,m=u*d+c*p,y=d*d+p*p;let x=-1;y!==0&&(x=m/y);let v,S;x<0?(v=t,S=s):x>1?(v=o,S=l):(v=t+x*d,S=s+x*p);const b=r-v,w=e-S;return b*b+w*w}let z8,B8;class so{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let o=0,l=t.length;o<l;o++)s.push(t[o].x,t[o].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let o=0;o<s;o+=2){const l=t[o],u=t[o+1],c=t[(o+2)%s],d=t[(o+3)%s];e+=(c-l)*(d+u)}return e<0}containsPolygon(e){const t=this.getBounds(z8),s=e.getBounds(B8);if(!t.containsRect(s))return!1;const o=e.points;for(let l=0;l<o.length;l+=2){const u=o[l],c=o[l+1];if(!this.contains(u,c))return!1}return!0}clone(){const e=this.points.slice(),t=new so(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const c=this.points[l*2],d=this.points[l*2+1],p=this.points[u*2],m=this.points[u*2+1];d>t!=m>t&&e<(p-c)*((t-d)/(m-d))+c&&(s=!s)}return s}strokeContains(e,t,s,o=.5){const l=s*s,u=l*(1-o),c=l-u,{points:d}=this,p=d.length-(this.closePath?0:2);for(let m=0;m<p;m+=2){const y=d[m],x=d[m+1],v=d[(m+2)%d.length],S=d[(m+3)%d.length],b=F8(e,t,y,x,v,S),w=Math.sign((v-y)*(t-x)-(S-x)*(e-y));if(b<=(w<0?c:u))return!0}return!1}getBounds(e){e||(e=new nt);const t=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let c=0,d=t.length;c<d;c+=2){const p=t[c],m=t[c+1];s=p<s?p:s,o=p>o?p:o,l=m<l?m:l,u=m>u?m:u}return e.x=s,e.width=o-s,e.y=l,e.height=u-l,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Me("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Me("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Ga=(r,e,t,s,o,l,u)=>{const c=r-t,d=e-s,p=Math.sqrt(c*c+d*d);return p>=o-l&&p<=o+u};class nh{constructor(e=0,t=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=o,this.radius=l}getBounds(e){return e||(e=new nt),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new nh(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let o=e-(this.x+s),l=t-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=e-(this.x+this.width-s),o*o+l*l<=u)||(l=t-(this.y+this.height-s),o*o+l*l<=u)||(o=e-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(e,t,s,o=.5){const{x:l,y:u,width:c,height:d,radius:p}=this,m=s*(1-o),y=s-m,x=l+p,v=u+p,S=c-p*2,b=d-p*2,w=l+c,C=u+d;return(e>=l-m&&e<=l+y||e>=w-y&&e<=w+m)&&t>=v&&t<=v+b||(t>=u-m&&t<=u+y||t>=C-y&&t<=C+m)&&e>=x&&e<=x+S?!0:e<x&&t<v&&Ga(e,t,x,v,p,y,m)||e>w-p&&t<v&&Ga(e,t,w-p,v,p,y,m)||e>w-p&&t>C-p&&Ga(e,t,w-p,C-p,p,y,m)||e<x&&t>C-p&&Ga(e,t,x,C-p,p,y,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const d0={};function j8(r,e,t){let s=2166136261;for(let o=0;o<e;o++)s^=r[o].uid,s=Math.imul(s,16777619),s>>>=0;return d0[s]||D8(r,e,s,t)}function D8(r,e,t,s){const o={};let l=0;for(let c=0;c<s;c++){const d=c<e?r[c]:ze.EMPTY.source;o[l++]=d.source,o[l++]=d.style}const u=new Ya(o);return d0[t]=u,u}class v1{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function _1(r,e){const t=r.byteLength/8|0,s=new Float64Array(r,0,t);new Float64Array(e,0,t).set(s);const l=r.byteLength-t*8;if(l>0){const u=new Uint8Array(r,t*8,l);new Uint8Array(e,t*8,l).set(u)}}const O8={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var $8=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))($8||{});function w1(r,e){return e.alphaMode==="no-premultiply-alpha"&&O8[r]||r}const N8=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function U8(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function G8(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=N8.replace(/%forloop%/gi,U8(r));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}}finally{e.deleteShader(t)}return r}let $i=null;function W8(){var e;if($i)return $i;const r=Hp();return $i=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),$i=G8($i,r),(e=r.getExtension("WEBGL_lose_context"))==null||e.loseContext(),$i}class H8{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class V8{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new H8,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const oo=[];let Ja=0;go.register({clear:()=>{if(oo.length>0)for(const r of oo)r&&r.destroy();oo.length=0,Ja=0}});function S1(){return Ja>0?oo[--Ja]:new V8}function b1(r){oo[Ja++]=r}let Ks=0;const f0=class p0{constructor(e){this.uid=dt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...p0.defaultOptions,...e},e.maxTextures||(Me("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=W8());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new v1(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)b1(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=S1(),o=s.textures;o.clear();const l=t[this.elementStart];let u=w1(l.blendMode,l.texture._source),c=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,m=this.indexBuffer;let y=this._batchIndexSize,x=this._batchIndexStart,v="startBatch";const S=this.maxTextures;for(let b=this.elementStart;b<this.elementSize;++b){const w=t[b];t[b]=null;const A=w.texture._source,P=w1(w.blendMode,A),E=u!==P||c!==w.topology;if(A._batchTick===Ks&&!E){w._textureId=A._textureBindLocation,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,p,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,p,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}A._batchTick=Ks,(o.count>=S||E)&&(this._finishBatch(s,x,y-x,o,u,c,e,v),v="renderBatch",x=y,u=P,c=w.topology,s=S1(),o=s.textures,o.clear(),++Ks),w._textureId=A._textureBindLocation=o.count,o.ids[A.uid]=o.count,o.textures[o.count++]=A,w._batch=s,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,p,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,p,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,x,y-x,o,u,c,e,v),x=y,++Ks),this.elementStart=this.elementSize,this._batchIndexStart=x,this._batchIndexSize=y}_finishBatch(e,t,s,o,l,u,c,d){e.gpuBindGroup=null,e.bindGroup=null,e.action=d,e.batcher=this,e.textures=o,e.blendMode=l,e.topology=u,e.start=t,e.size=s,++Ks,this.batches[this.batchIndex++]=e,c.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new v1(t);_1(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let l=0;l<t.length;l++)o[l]=t[l];else _1(t.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,o){const l=e.indices,u=e.indexSize,c=e.indexOffset,d=e.attributeOffset;for(let p=0;p<u;p++)t[s++]=o+l[p+c]-d}destroy(e={}){var t;if(this.batches!==null){for(let s=0;s<this.batches.length;s++)b1(this.batches[s]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((t=this.shader)==null||t.destroy(),this.shader=null);for(let s=0;s<this._elements.length;s++)this._elements[s]&&(this._elements[s]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};f0.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Y8=f0;var qt=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(qt||{});class ho extends Mn{constructor(e){let{data:t,size:s}=e;const{usage:o,label:l,shrinkToFit:u}=e;super(),this.uid=dt("buffer"),this._resourceType="buffer",this._resourceId=dt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t==null?void 0:t.byteLength);const c=!!t;this.descriptor={size:s,usage:o,mappedAtCreation:c,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&qt.STATIC)}set static(e){e?this.descriptor.usage|=qt.STATIC:this.descriptor.usage&=~qt.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const o=this._data;if(this._data=e,this._dataInt32=null,!o||o.length!==e.length){!this.shrinkToFit&&o&&e.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=dt("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function m0(r,e){if(!(r instanceof ho)){let t=e?qt.INDEX:qt.VERTEX;r instanceof Array&&(e?(r=new Uint32Array(r),t=qt.INDEX|qt.COPY_DST):(r=new Float32Array(r),t=qt.VERTEX|qt.COPY_DST)),r=new ho({data:r,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return r}function X8(r,e,t){const s=r.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const o=s.buffer.data;let l=1/0,u=1/0,c=-1/0,d=-1/0;const p=o.BYTES_PER_ELEMENT,m=(s.offset||0)/p,y=(s.stride||8)/p;for(let x=m;x<o.length;x+=y){const v=o[x],S=o[x+1];v>c&&(c=v),S>d&&(d=S),v<l&&(l=v),S<u&&(u=S)}return t.minX=l,t.minY=u,t.maxX=c,t.maxY=d,t}function q8(r){return(r instanceof ho||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=m0(r.buffer,!1),r}class K8 extends Mn{constructor(e={}){super(),this.uid=dt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new En,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:o}=e;if(this.buffers=[],this.attributes={},t)for(const l in t)this.addAttribute(l,t[l]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=q8(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=m0(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,X8(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(s=>s.destroy()),(t=this.indexBuffer)==null||t.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Q8=new Float32Array(1),Z8=new Uint32Array(1);class J8 extends K8{constructor(){const t=new ho({data:Q8,label:"attribute-batch-buffer",usage:qt.VERTEX|qt.COPY_DST,shrinkToFit:!1}),s=new ho({data:Z8,label:"index-batch-buffer",usage:qt.INDEX|qt.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:o,offset:0},aUV:{buffer:t,format:"float32x2",stride:o,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function k1(r,e,t){if(r)for(const s in r){const o=s.toLocaleLowerCase(),l=e[o];if(l){let u=r[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&l.push(`//----${t}----//`),l.push(u)}else Qe(`${s} placement hook does not exist in shader`)}}const ex=/\{\{(.*?)\}\}/g;function C1(r){var s;const e={};return(((s=r.match(ex))==null?void 0:s.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{e[o]=[]}),e}function A1(r,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(r))!==null;)e.push(t[1])}function P1(r,e,t=!1){const s=[];A1(e,s),r.forEach(c=>{c.header&&A1(c.header,s)});const o=s;t&&o.sort();const l=o.map((c,d)=>`       @location(${d}) ${c},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function T1(r,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(r))!==null;)e.push(t[1])}function tx(r){const t=/\b(\w+)\s*:/g.exec(r);return t?t[1]:""}function nx(r){const e=/@.*?\s+/g;return r.replace(e,"")}function rx(r,e){const t=[];T1(e,t),r.forEach(d=>{d.header&&T1(d.header,t)});let s=0;const o=t.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),l=t.sort().map(d=>`       var ${nx(d)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(d=>` ${tx(d)}`).join(`,
`)});`;let c=e.replace(/@out\s+[^;]+;\s*/g,"");return c=c.replace("{{struct}}",`
${o}
`),c=c.replace("{{start}}",`
${l}
`),c=c.replace("{{return}}",`
${u}
`),c}function E1(r,e){let t=r;for(const s in e){const o=e[s];o.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const Ir=Object.create(null),mc=new Map;let ix=0;function sx({template:r,bits:e}){const t=g0(r,e);if(Ir[t])return Ir[t];const{vertex:s,fragment:o}=ax(r,e);return Ir[t]=y0(s,o,e),Ir[t]}function ox({template:r,bits:e}){const t=g0(r,e);return Ir[t]||(Ir[t]=y0(r.vertex,r.fragment,e)),Ir[t]}function ax(r,e){const t=e.map(u=>u.vertex).filter(u=>!!u),s=e.map(u=>u.fragment).filter(u=>!!u);let o=P1(t,r.vertex,!0);o=rx(t,o);const l=P1(s,r.fragment,!0);return{vertex:o,fragment:l}}function g0(r,e){return e.map(t=>(mc.has(t)||mc.set(t,ix++),mc.get(t))).sort((t,s)=>t-s).join("-")+r.vertex+r.fragment}function y0(r,e,t){const s=C1(r),o=C1(e);return t.forEach(l=>{k1(l.vertex,s,l.name),k1(l.fragment,o,l.name)}),{vertex:E1(r,s),fragment:E1(e,o)}}const lx=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,ux=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,cx=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,hx=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,dx={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},fx={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function px({bits:r,name:e}){const t=sx({template:{fragment:ux,vertex:lx},bits:[dx,...r]});return rl.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function mx({bits:r,name:e}){return new Yp({name:e,...ox({template:{vertex:cx,fragment:hx},bits:[fx,...r]})})}const gx={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},yx={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},gc={};function xx(r){const e=[];if(r===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<r;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function vx(r){const e=[];if(r===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<r;t++)t===r-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function _x(r){return gc[r]||(gc[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${xx(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${vx(r)}
            `}}),gc[r]}const yc={};function wx(r){const e=[];for(let t=0;t<r;t++)t>0&&e.push("else"),t<r-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function Sx(r){return yc[r]||(yc[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${wx(r)}
            `}}),yc[r]}const bx={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},kx={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},M1={};function Cx(r){let e=M1[r];if(e)return e;const t=new Int32Array(r);for(let s=0;s<r;s++)t[s]=s;return e=M1[r]=new Qp({uTextures:{value:t,type:"i32",size:r}},{isStatic:!0}),e}class R1 extends Zc{constructor(e){const t=mx({name:"batch",bits:[yx,Sx(e),kx]}),s=px({name:"batch",bits:[gx,_x(e),bx]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:Cx(e)}}),this.maxTextures=e}}let Qs=null;const x0=class v0 extends Y8{constructor(e){super(e),this.geometry=new J8,this.name=v0.extension.name,this.vertexSize=6,Qs??(Qs=new R1(e.maxTextures)),this.shader=Qs}packAttributes(e,t,s,o,l){const u=l<<16|e.roundPixels&65535,c=e.transform,d=c.a,p=c.b,m=c.c,y=c.d,x=c.tx,v=c.ty,{positions:S,uvs:b}=e,w=e.color,C=e.attributeOffset,A=C+e.attributeSize;for(let P=C;P<A;P++){const E=P*2,G=S[E],$=S[E+1];t[o++]=d*G+m*$+x,t[o++]=y*$+p*G+v,t[o++]=b[E],t[o++]=b[E+1],s[o++]=w,s[o++]=u}}packQuadAttributes(e,t,s,o,l){const u=e.texture,c=e.transform,d=c.a,p=c.b,m=c.c,y=c.d,x=c.tx,v=c.ty,S=e.bounds,b=S.maxX,w=S.minX,C=S.maxY,A=S.minY,P=u.uvs,E=e.color,G=l<<16|e.roundPixels&65535;t[o+0]=d*w+m*A+x,t[o+1]=y*A+p*w+v,t[o+2]=P.x0,t[o+3]=P.y0,s[o+4]=E,s[o+5]=G,t[o+6]=d*b+m*A+x,t[o+7]=y*A+p*b+v,t[o+8]=P.x1,t[o+9]=P.y1,s[o+10]=E,s[o+11]=G,t[o+12]=d*b+m*C+x,t[o+13]=y*C+p*b+v,t[o+14]=P.x2,t[o+15]=P.y2,s[o+16]=E,s[o+17]=G,t[o+18]=d*w+m*C+x,t[o+19]=y*C+p*w+v,t[o+20]=P.x3,t[o+21]=P.y3,s[o+22]=E,s[o+23]=G}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Qs=new R1(e),this.shader=Qs)}destroy(){this.shader=null,super.destroy()}};x0.extension={type:[fe.Batcher],name:"default"};let Ax=x0;function Px(r,e,t,s,o,l,u,c=null){let d=0;t*=e,o*=l;const p=c.a,m=c.b,y=c.c,x=c.d,v=c.tx,S=c.ty;for(;d<u;){const b=r[t],w=r[t+1];s[o]=p*b+y*w+v,s[o+1]=m*b+x*w+S,o+=l,t+=e,d++}}function Tx(r,e,t,s){let o=0;for(e*=t;o<s;)r[e]=0,r[e+1]=0,e+=t,o++}function _0(r,e,t,s,o){const l=e.a,u=e.b,c=e.c,d=e.d,p=e.tx,m=e.ty;t||(t=0),s||(s=2),o||(o=r.length/s-t);let y=t*s;for(let x=0;x<o;x++){const v=r[y],S=r[y+1];r[y]=l*v+c*S+p,r[y+1]=u*v+d*S+m,y+=s}}const Ex=new Le;class w0{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?Cp(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||Ex}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const fo={extension:{type:fe.ShapeBuilder,name:"circle"},build(r,e){let t,s,o,l,u,c;if(r.type==="circle"){const E=r;if(u=c=E.radius,u<=0)return!1;t=E.x,s=E.y,o=l=0}else if(r.type==="ellipse"){const E=r;if(u=E.halfWidth,c=E.halfHeight,u<=0||c<=0)return!1;t=E.x,s=E.y,o=l=0}else{const E=r,G=E.width/2,$=E.height/2;t=E.x+G,s=E.y+$,u=c=Math.max(0,Math.min(E.radius,Math.min(G,$))),o=G-u,l=$-c}if(o<0||l<0)return!1;const d=Math.ceil(2.3*Math.sqrt(u+c)),p=d*8+(o?4:0)+(l?4:0);if(p===0)return!1;if(d===0)return e[0]=e[6]=t+o,e[1]=e[3]=s+l,e[2]=e[4]=t-o,e[5]=e[7]=s-l,!0;let m=0,y=d*4+(o?2:0)+2,x=y,v=p,S=o+u,b=l,w=t+S,C=t-S,A=s+b;if(e[m++]=w,e[m++]=A,e[--y]=A,e[--y]=C,l){const E=s-b;e[x++]=C,e[x++]=E,e[--v]=E,e[--v]=w}for(let E=1;E<d;E++){const G=Math.PI/2*(E/d),$=o+Math.cos(G)*u,O=l+Math.sin(G)*c,X=t+$,ne=t-$,K=s+O,Z=s-O;e[m++]=X,e[m++]=K,e[--y]=K,e[--y]=ne,e[x++]=ne,e[x++]=Z,e[--v]=Z,e[--v]=X}S=o,b=l+c,w=t+S,C=t-S,A=s+b;const P=s-b;return e[m++]=w,e[m++]=A,e[--v]=P,e[--v]=w,o&&(e[m++]=C,e[m++]=A,e[--v]=P,e[--v]=C),!0},triangulate(r,e,t,s,o,l){if(r.length===0)return;let u=0,c=0;for(let m=0;m<r.length;m+=2)u+=r[m],c+=r[m+1];u/=r.length/2,c/=r.length/2;let d=s;e[d*t]=u,e[d*t+1]=c;const p=d++;for(let m=0;m<r.length;m+=2)e[d*t]=r[m],e[d*t+1]=r[m+1],m>0&&(o[l++]=d,o[l++]=p,o[l++]=d-1),d++;o[l++]=p+1,o[l++]=p,o[l++]=d-1}},Mx={...fo,extension:{...fo.extension,name:"ellipse"}},Rx={...fo,extension:{...fo.extension,name:"roundedRectangle"}},S0=1e-4,I1=1e-4;function Ix(r){const e=r.length;if(e<6)return 1;let t=0;for(let s=0,o=r[e-2],l=r[e-1];s<e;s+=2){const u=r[s],c=r[s+1];t+=(u-o)*(c+l),o=u,l=c}return t<0?-1:1}function L1(r,e,t,s,o,l,u,c){const d=r-t*o,p=e-s*o,m=r+t*l,y=e+s*l;let x,v;u?(x=s,v=-t):(x=-s,v=t);const S=d+x,b=p+v,w=m+x,C=y+v;return c.push(S,b),c.push(w,C),2}function Zr(r,e,t,s,o,l,u,c){const d=t-r,p=s-e;let m=Math.atan2(d,p),y=Math.atan2(o-r,l-e);c&&m<y?m+=Math.PI*2:!c&&m>y&&(y+=Math.PI*2);let x=m;const v=y-m,S=Math.abs(v),b=Math.sqrt(d*d+p*p),w=(15*S*Math.sqrt(b)/Math.PI>>0)+1,C=v/w;if(x+=C,c){u.push(r,e),u.push(t,s);for(let A=1,P=x;A<w;A++,P+=C)u.push(r,e),u.push(r+Math.sin(P)*b,e+Math.cos(P)*b);u.push(r,e),u.push(o,l)}else{u.push(t,s),u.push(r,e);for(let A=1,P=x;A<w;A++,P+=C)u.push(r+Math.sin(P)*b,e+Math.cos(P)*b),u.push(r,e);u.push(o,l),u.push(r,e)}return w*2}function Lx(r,e,t,s,o,l){const u=S0;if(r.length===0)return;const c=e;let d=c.alignment;if(e.alignment!==.5){let q=Ix(r);d=(d-.5)*q+.5}const p=new Bt(r[0],r[1]),m=new Bt(r[r.length-2],r[r.length-1]),y=s,x=Math.abs(p.x-m.x)<u&&Math.abs(p.y-m.y)<u;if(y){r=r.slice(),x&&(r.pop(),r.pop(),m.set(r[r.length-2],r[r.length-1]));const q=(p.x+m.x)*.5,ee=(m.y+p.y)*.5;r.unshift(q,ee),r.push(q,ee)}const v=o,S=r.length/2;let b=r.length;const w=v.length/2,C=c.width/2,A=C*C,P=c.miterLimit*c.miterLimit;let E=r[0],G=r[1],$=r[2],O=r[3],X=0,ne=0,K=-(G-O),Z=E-$,xe=0,de=0,Ce=Math.sqrt(K*K+Z*Z);K/=Ce,Z/=Ce,K*=C,Z*=C;const ft=d,J=(1-ft)*2,te=ft*2;y||(c.cap==="round"?b+=Zr(E-K*(J-te)*.5,G-Z*(J-te)*.5,E-K*J,G-Z*J,E+K*te,G+Z*te,v,!0)+2:c.cap==="square"&&(b+=L1(E,G,K,Z,J,te,!0,v))),v.push(E-K*J,G-Z*J),v.push(E+K*te,G+Z*te);for(let q=1;q<S-1;++q){E=r[(q-1)*2],G=r[(q-1)*2+1],$=r[q*2],O=r[q*2+1],X=r[(q+1)*2],ne=r[(q+1)*2+1],K=-(G-O),Z=E-$,Ce=Math.sqrt(K*K+Z*Z),K/=Ce,Z/=Ce,K*=C,Z*=C,xe=-(O-ne),de=$-X,Ce=Math.sqrt(xe*xe+de*de),xe/=Ce,de/=Ce,xe*=C,de*=C;const ee=$-E,I=G-O,U=$-X,ve=ne-O,be=ee*U+I*ve,Ae=I*U-ve*ee,Pe=Ae<0;if(Math.abs(Ae)<.001*Math.abs(be)){v.push($-K*J,O-Z*J),v.push($+K*te,O+Z*te),be>=0&&(c.join==="round"?b+=Zr($,O,$-K*J,O-Z*J,$-xe*J,O-de*J,v,!1)+4:b+=2,v.push($-xe*te,O-de*te),v.push($+xe*J,O+de*J));continue}const Te=(-K+E)*(-Z+O)-(-K+$)*(-Z+G),Ie=(-xe+X)*(-de+O)-(-xe+$)*(-de+ne),$e=(ee*Ie-U*Te)/Ae,rt=(ve*Te-I*Ie)/Ae,Ln=($e-$)*($e-$)+(rt-O)*(rt-O),an=$+($e-$)*J,Ut=O+(rt-O)*J,jt=$-($e-$)*te,Kt=O-(rt-O)*te,Fr=Math.min(ee*ee+I*I,U*U+ve*ve),At=Pe?J:te,Vn=Fr+At*At*A;Ln<=Vn?c.join==="bevel"||Ln/A>P?(Pe?(v.push(an,Ut),v.push($+K*te,O+Z*te),v.push(an,Ut),v.push($+xe*te,O+de*te)):(v.push($-K*J,O-Z*J),v.push(jt,Kt),v.push($-xe*J,O-de*J),v.push(jt,Kt)),b+=2):c.join==="round"?Pe?(v.push(an,Ut),v.push($+K*te,O+Z*te),b+=Zr($,O,$+K*te,O+Z*te,$+xe*te,O+de*te,v,!0)+4,v.push(an,Ut),v.push($+xe*te,O+de*te)):(v.push($-K*J,O-Z*J),v.push(jt,Kt),b+=Zr($,O,$-K*J,O-Z*J,$-xe*J,O-de*J,v,!1)+4,v.push($-xe*J,O-de*J),v.push(jt,Kt)):(v.push(an,Ut),v.push(jt,Kt)):(v.push($-K*J,O-Z*J),v.push($+K*te,O+Z*te),c.join==="round"?Pe?b+=Zr($,O,$+K*te,O+Z*te,$+xe*te,O+de*te,v,!0)+2:b+=Zr($,O,$-K*J,O-Z*J,$-xe*J,O-de*J,v,!1)+2:c.join==="miter"&&Ln/A<=P&&(Pe?(v.push(jt,Kt),v.push(jt,Kt)):(v.push(an,Ut),v.push(an,Ut)),b+=2),v.push($-xe*J,O-de*J),v.push($+xe*te,O+de*te),b+=2)}E=r[(S-2)*2],G=r[(S-2)*2+1],$=r[(S-1)*2],O=r[(S-1)*2+1],K=-(G-O),Z=E-$,Ce=Math.sqrt(K*K+Z*Z),K/=Ce,Z/=Ce,K*=C,Z*=C,v.push($-K*J,O-Z*J),v.push($+K*te,O+Z*te),y||(c.cap==="round"?b+=Zr($-K*(J-te)*.5,O-Z*(J-te)*.5,$-K*J,O-Z*J,$+K*te,O+Z*te,v,!1)+2:c.cap==="square"&&(b+=L1($,O,K,Z,J,te,!1,v)));const Q=I1*I1;for(let q=w;q<b+w-2;++q)E=v[q*2],G=v[q*2+1],$=v[(q+1)*2],O=v[(q+1)*2+1],X=v[(q+2)*2],ne=v[(q+2)*2+1],!(Math.abs(E*(O-ne)+$*(ne-G)+X*(G-O))<Q)&&l.push(q,q+1,q+2)}function Fx(r,e,t,s){const o=S0;if(r.length===0)return;const l=r[0],u=r[1],c=r[r.length-2],d=r[r.length-1],p=e||Math.abs(l-c)<o&&Math.abs(u-d)<o,m=t,y=r.length/2,x=m.length/2;for(let v=0;v<y;v++)m.push(r[v*2]),m.push(r[v*2+1]);for(let v=0;v<y-1;v++)s.push(x+v,x+v+1);p&&s.push(x+y-1,x)}function b0(r,e,t,s,o,l,u){const c=_8(r,e,2);if(!c)return;for(let p=0;p<c.length;p+=3)l[u++]=c[p]+o,l[u++]=c[p+1]+o,l[u++]=c[p+2]+o;let d=o*s;for(let p=0;p<r.length;p+=2)t[d]=r[p],t[d+1]=r[p+1],d+=s}const zx=[],Bx={extension:{type:fe.ShapeBuilder,name:"polygon"},build(r,e){for(let t=0;t<r.points.length;t++)e[t]=r.points[t];return!0},triangulate(r,e,t,s,o,l){b0(r,zx,e,t,s,o,l)}},jx={extension:{type:fe.ShapeBuilder,name:"rectangle"},build(r,e){const t=r,s=t.x,o=t.y,l=t.width,u=t.height;return l>0&&u>0?(e[0]=s,e[1]=o,e[2]=s+l,e[3]=o,e[4]=s+l,e[5]=o+u,e[6]=s,e[7]=o+u,!0):!1},triangulate(r,e,t,s,o,l){let u=0;s*=t,e[s+u]=r[0],e[s+u+1]=r[1],u+=t,e[s+u]=r[2],e[s+u+1]=r[3],u+=t,e[s+u]=r[6],e[s+u+1]=r[7],u+=t,e[s+u]=r[4],e[s+u+1]=r[5],u+=t;const c=s/t;o[l++]=c,o[l++]=c+1,o[l++]=c+2,o[l++]=c+1,o[l++]=c+3,o[l++]=c+2}},Dx={extension:{type:fe.ShapeBuilder,name:"triangle"},build(r,e){return e[0]=r.x,e[1]=r.y,e[2]=r.x2,e[3]=r.y2,e[4]=r.x3,e[5]=r.y3,!0},triangulate(r,e,t,s,o,l){let u=0;s*=t,e[s+u]=r[0],e[s+u+1]=r[1],u+=t,e[s+u]=r[2],e[s+u+1]=r[3],u+=t,e[s+u]=r[4],e[s+u+1]=r[5];const c=s/t;o[l++]=c,o[l++]=c+1,o[l++]=c+2}},Ox=new Le,$x=new nt;function Nx(r,e,t,s){const o=e.matrix?r.copyFrom(e.matrix).invert():r.identity();if(e.textureSpace==="local"){const u=t.getBounds($x);e.width&&u.pad(e.width);const{x:c,y:d}=u,p=1/u.width,m=1/u.height,y=-c*p,x=-d*m,v=o.a,S=o.b,b=o.c,w=o.d;o.a*=p,o.b*=p,o.c*=m,o.d*=m,o.tx=y*v+x*b+o.tx,o.ty=y*S+x*w+o.ty}else o.translate(e.texture.frame.x,e.texture.frame.y),o.scale(1/e.texture.source.width,1/e.texture.source.height);const l=e.texture.source.style;return!(e.fill instanceof lr)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(Ox.copyFrom(s).invert()),o}const sl={};Mt.handleByMap(fe.ShapeBuilder,sl);Mt.add(jx,Bx,Dx,fo,Mx,Rx);const Ux=new nt,Gx=new Le;function Wx(r,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let o=0;o<r.instructions.length;o++){const l=r.instructions[o];if(l.action==="texture")Hx(l.data,s,t);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",c=l.data.path.shapePath,d=l.data.style,p=l.data.hole;u&&p&&F1(p.shapePath,d,!0,s,t),p&&(c.shapePrimitives[c.shapePrimitives.length-1].holes=p.shapePath.shapePrimitives),F1(c,d,u,s,t)}}}function Hx(r,e,t){const s=[],o=sl.rectangle,l=Ux;l.x=r.dx,l.y=r.dy,l.width=r.dw,l.height=r.dh;const u=r.transform;if(!o.build(l,s))return;const{vertices:c,uvs:d,indices:p}=t,m=p.length,y=c.length/2;u&&_0(s,u),o.triangulate(s,c,2,y,p,m);const x=r.image,v=x.uvs;d.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const S=vn.get(w0);S.indexOffset=m,S.indexSize=p.length-m,S.attributeOffset=y,S.attributeSize=c.length/2-y,S.baseColor=r.style,S.alpha=r.alpha,S.texture=x,S.geometryData=t,e.push(S)}function F1(r,e,t,s,o){const{vertices:l,uvs:u,indices:c}=o;r.shapePrimitives.forEach(({shape:d,transform:p,holes:m})=>{const y=[],x=sl[d.type];if(!x.build(d,y))return;const v=c.length,S=l.length/2;let b="triangle-list";if(p&&_0(y,p),t){const P=d.closePath??!0,E=e;E.pixelLine?(Fx(y,P,l,c),b="line-list"):Lx(y,E,!1,P,l,c)}else if(m){const P=[],E=y.slice();Vx(m).forEach($=>{P.push(E.length/2),E.push(...$)}),b0(E,P,l,2,S,c,v)}else x.triangulate(y,l,2,S,c,v);const w=u.length/2,C=e.texture;if(C!==ze.WHITE){const P=Nx(Gx,e,d,p);Px(l,2,S,u,w,2,l.length/2-S,P)}else Tx(u,w,2,l.length/2-S);const A=vn.get(w0);A.indexOffset=v,A.indexSize=c.length-v,A.attributeOffset=S,A.attributeSize=l.length/2-S,A.baseColor=e.color,A.alpha=e.alpha,A.texture=C,A.geometryData=o,A.topology=b,s.push(A)})}function Vx(r){const e=[];for(let t=0;t<r.length;t++){const s=r[t].shape,o=[];sl[s.type].build(s,o)&&e.push(o)}return e}class Yx{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class Xx{constructor(){this.instructions=new Ep}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new Ax({maxTextures:t}),this.instructions.reset()}get geometry(){return Me(Hy,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const rh=class $c{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){$c.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??$c.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),Wx(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=vn.get(Xx,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[e.uid],l=o.vertices.length,u=o.indices.length;for(let m=0;m<s.length;m++)s[m].applyTransform=!1;const c=t.batcher;c.ensureAttributeBuffer(l),c.ensureIndexBuffer(u),c.begin();for(let m=0;m<s.length;m++){const y=s[m];c.add(y)}c.finish(t.instructions);const d=c.geometry;d.indexBuffer.setDataWithSize(c.indexBuffer,c.indexSize,!0),d.buffers[0].setDataWithSize(c.attributeBuffer.float32View,c.attributeSize,!0);const p=c.batches;for(let m=0;m<p.length;m++){const y=p[m];y.bindGroup=j8(y.textures.textures,y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new Yx;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(vn.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{vn.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};rh.extension={type:[fe.WebGLSystem,fe.WebGPUSystem,fe.CanvasSystem],name:"graphicsContext"};rh.defaultOptions={bezierSmoothness:.5};let k0=rh;const qx=8,Wa=11920929e-14,Kx=1;function C0(r,e,t,s,o,l,u,c,d,p){const y=Math.min(.99,Math.max(0,p??k0.defaultOptions.bezierSmoothness));let x=(Kx-y)/1;return x*=x,Qx(e,t,s,o,l,u,c,d,r,x),r}function Qx(r,e,t,s,o,l,u,c,d,p){Nc(r,e,t,s,o,l,u,c,d,p,0),d.push(u,c)}function Nc(r,e,t,s,o,l,u,c,d,p,m){if(m>qx)return;const y=(r+t)/2,x=(e+s)/2,v=(t+o)/2,S=(s+l)/2,b=(o+u)/2,w=(l+c)/2,C=(y+v)/2,A=(x+S)/2,P=(v+b)/2,E=(S+w)/2,G=(C+P)/2,$=(A+E)/2;if(m>0){let O=u-r,X=c-e;const ne=Math.abs((t-u)*X-(s-c)*O),K=Math.abs((o-u)*X-(l-c)*O);if(ne>Wa&&K>Wa){if((ne+K)*(ne+K)<=p*(O*O+X*X)){d.push(G,$);return}}else if(ne>Wa){if(ne*ne<=p*(O*O+X*X)){d.push(G,$);return}}else if(K>Wa){if(K*K<=p*(O*O+X*X)){d.push(G,$);return}}else if(O=G-(r+u)/2,X=$-(e+c)/2,O*O+X*X<=p){d.push(G,$);return}}Nc(r,e,y,x,C,A,G,$,d,p,m+1),Nc(G,$,P,E,b,w,u,c,d,p,m+1)}const Zx=8,Jx=11920929e-14,e5=1;function t5(r,e,t,s,o,l,u,c){const p=Math.min(.99,Math.max(0,c??k0.defaultOptions.bezierSmoothness));let m=(e5-p)/1;return m*=m,n5(e,t,s,o,l,u,r,m),r}function n5(r,e,t,s,o,l,u,c){Uc(u,r,e,t,s,o,l,c,0),u.push(o,l)}function Uc(r,e,t,s,o,l,u,c,d){if(d>Zx)return;const p=(e+s)/2,m=(t+o)/2,y=(s+l)/2,x=(o+u)/2,v=(p+y)/2,S=(m+x)/2;let b=l-e,w=u-t;const C=Math.abs((s-l)*w-(o-u)*b);if(C>Jx){if(C*C<=c*(b*b+w*w)){r.push(v,S);return}}else if(b=v-(e+l)/2,w=S-(t+u)/2,b*b+w*w<=c){r.push(v,S);return}Uc(r,e,t,p,m,v,S,c,d+1),Uc(r,v,S,y,x,l,u,c,d+1)}function A0(r,e,t,s,o,l,u,c){let d=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(d=2*Math.PI-d),c||(c=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),c=Math.max(c,3);let p=d/c,m=o;p*=u?-1:1;for(let y=0;y<c+1;y++){const x=Math.cos(m),v=Math.sin(m),S=e+x*s,b=t+v*s;r.push(S,b),m+=p}}function r5(r,e,t,s,o,l){const u=r[r.length-2],d=r[r.length-1]-t,p=u-e,m=o-t,y=s-e,x=Math.abs(d*y-p*m);if(x<1e-8||l===0){(r[r.length-2]!==e||r[r.length-1]!==t)&&r.push(e,t);return}const v=d*d+p*p,S=m*m+y*y,b=d*m+p*y,w=l*Math.sqrt(v)/x,C=l*Math.sqrt(S)/x,A=w*b/v,P=C*b/S,E=w*y+C*p,G=w*m+C*d,$=p*(C+A),O=d*(C+A),X=y*(w+P),ne=m*(w+P),K=Math.atan2(O-G,$-E),Z=Math.atan2(ne-G,X-E);A0(r,E+e,G+t,l,K,Z,p*m>y*d)}const ao=Math.PI*2,xc={centerX:0,centerY:0,ang1:0,ang2:0},vc=({x:r,y:e},t,s,o,l,u,c,d)=>{r*=t,e*=s;const p=o*r-l*e,m=l*r+o*e;return d.x=p+u,d.y=m+c,d};function i5(r,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,o=Math.cos(r),l=Math.sin(r),u=Math.cos(r+e),c=Math.sin(r+e);return[{x:o-l*s,y:l+o*s},{x:u+c*s,y:c-u*s},{x:u,y:c}]}const z1=(r,e,t,s)=>{const o=r*s-e*t<0?-1:1;let l=r*t+e*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},s5=(r,e,t,s,o,l,u,c,d,p,m,y,x)=>{const v=Math.pow(o,2),S=Math.pow(l,2),b=Math.pow(m,2),w=Math.pow(y,2);let C=v*S-v*w-S*b;C<0&&(C=0),C/=v*w+S*b,C=Math.sqrt(C)*(u===c?-1:1);const A=C*o/l*y,P=C*-l/o*m,E=p*A-d*P+(r+t)/2,G=d*A+p*P+(e+s)/2,$=(m-A)/o,O=(y-P)/l,X=(-m-A)/o,ne=(-y-P)/l,K=z1(1,0,$,O);let Z=z1($,O,X,ne);c===0&&Z>0&&(Z-=ao),c===1&&Z<0&&(Z+=ao),x.centerX=E,x.centerY=G,x.ang1=K,x.ang2=Z};function o5(r,e,t,s,o,l,u,c=0,d=0,p=0){if(l===0||u===0)return;const m=Math.sin(c*ao/360),y=Math.cos(c*ao/360),x=y*(e-s)/2+m*(t-o)/2,v=-m*(e-s)/2+y*(t-o)/2;if(x===0&&v===0)return;l=Math.abs(l),u=Math.abs(u);const S=Math.pow(x,2)/Math.pow(l,2)+Math.pow(v,2)/Math.pow(u,2);S>1&&(l*=Math.sqrt(S),u*=Math.sqrt(S)),s5(e,t,s,o,l,u,d,p,m,y,x,v,xc);let{ang1:b,ang2:w}=xc;const{centerX:C,centerY:A}=xc;let P=Math.abs(w)/(ao/4);Math.abs(1-P)<1e-7&&(P=1);const E=Math.max(Math.ceil(P),1);w/=E;let G=r[r.length-2],$=r[r.length-1];const O={x:0,y:0};for(let X=0;X<E;X++){const ne=i5(b,w),{x:K,y:Z}=vc(ne[0],l,u,y,m,C,A,O),{x:xe,y:de}=vc(ne[1],l,u,y,m,C,A,O),{x:Ce,y:ft}=vc(ne[2],l,u,y,m,C,A,O);C0(r,G,$,K,Z,xe,de,Ce,ft),G=Ce,$=ft,b+=w}}function a5(r,e,t){const s=(u,c)=>{const d=c.x-u.x,p=c.y-u.y,m=Math.sqrt(d*d+p*p),y=d/m,x=p/m;return{len:m,nx:y,ny:x}},o=(u,c)=>{u===0?r.moveTo(c.x,c.y):r.lineTo(c.x,c.y)};let l=e[e.length-1];for(let u=0;u<e.length;u++){const c=e[u%e.length],d=c.radius??t;if(d<=0){o(u,c),l=c;continue}const p=e[(u+1)%e.length],m=s(c,l),y=s(c,p);if(m.len<1e-4||y.len<1e-4){o(u,c),l=c;continue}let x=Math.asin(m.nx*y.ny-m.ny*y.nx),v=1,S=!1;m.nx*y.nx-m.ny*-y.ny<0?x<0?x=Math.PI+x:(x=Math.PI-x,v=-1,S=!0):x>0&&(v=-1,S=!0);const b=x/2;let w,C=Math.abs(Math.cos(b)*d/Math.sin(b));C>Math.min(m.len/2,y.len/2)?(C=Math.min(m.len/2,y.len/2),w=Math.abs(C*Math.sin(b)/Math.cos(b))):w=d;const A=c.x+y.nx*C+-y.ny*w*v,P=c.y+y.ny*C+y.nx*w*v,E=Math.atan2(m.ny,m.nx)+Math.PI/2*v,G=Math.atan2(y.ny,y.nx)-Math.PI/2*v;u===0&&r.moveTo(A+Math.cos(E)*w,P+Math.sin(E)*w),r.arc(A,P,w,E,G,S),l=c}}function l5(r,e,t,s){const o=(c,d)=>Math.sqrt((c.x-d.x)**2+(c.y-d.y)**2),l=(c,d,p)=>({x:c.x+(d.x-c.x)*p,y:c.y+(d.y-c.y)*p}),u=e.length;for(let c=0;c<u;c++){const d=e[(c+1)%u],p=d.radius??t;if(p<=0){c===0?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y);continue}const m=e[c],y=e[(c+2)%u],x=o(m,d);let v;if(x<1e-4)v=d;else{const w=Math.min(x/2,p);v=l(d,m,w/x)}const S=o(y,d);let b;if(S<1e-4)b=d;else{const w=Math.min(S/2,p);b=l(d,y,w/S)}c===0?r.moveTo(v.x,v.y):r.lineTo(v.x,v.y),r.quadraticCurveTo(d.x,d.y,b.x,b.y,s)}}const u5=new nt;class c5{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new En,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==e||l!==t)&&s.push(e,t),this}arc(e,t,s,o,l,u){this._ensurePoly(!1);const c=this._currentPoly.points;return A0(c,e,t,s,o,l,u),this}arcTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return r5(u,e,t,s,o,l),this}arcToSvg(e,t,s,o,l,u,c){const d=this._currentPoly.points;return o5(d,this._currentPoly.lastX,this._currentPoly.lastY,u,c,e,t,s,o,l),this}bezierCurveTo(e,t,s,o,l,u,c){this._ensurePoly();const d=this._currentPoly;return C0(this._currentPoly.points,d.lastX,d.lastY,e,t,s,o,l,u,c),this}quadraticCurveTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly;return t5(this._currentPoly.points,u.lastX,u.lastY,e,t,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,o=s.length;for(let l=0;l<e.instructions.length;l++){const u=e.instructions[l];this[u.action](...u.data)}if(e.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const c=s[u];if(c.shape.type==="polygon"){const d=c.shape,p=l==null?void 0:l.shape;p&&p.containsPolygon(d)?(l.holes||(l.holes=[]),l.holes.push(c),s.copyWithin(u,u+1),s.length--,u--):l=c}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,o,l){return this.drawShape(new nt(e,t,s,o),l),this}circle(e,t,s,o){return this.drawShape(new eh(e,t,s),o),this}poly(e,t,s){const o=new so(e);return o.closePath=t,this.drawShape(o,s),this}regularPoly(e,t,s,o,l=0,u){o=Math.max(o|0,3);const c=-1*Math.PI/2+l,d=Math.PI*2/o,p=[];for(let m=0;m<o;m++){const y=c-m*d;p.push(e+s*Math.cos(y),t+s*Math.sin(y))}return this.poly(p,!0,u),this}roundPoly(e,t,s,o,l,u=0,c){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(e,t,s,o,u);const d=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,d);const p=-1*Math.PI/2+u,m=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let x=0;x<o;x++){const v=x*m+p,S=e+s*Math.cos(v),b=t+s*Math.sin(v),w=v+Math.PI+y,C=v-Math.PI-y,A=S+l*Math.cos(w),P=b+l*Math.sin(w),E=S+l*Math.cos(C),G=b+l*Math.sin(C);x===0?this.moveTo(A,P):this.lineTo(A,P),this.quadraticCurveTo(S,b,E,G,c)}return this.closePath()}roundShape(e,t,s=!1,o){return e.length<3?this:(s?l5(this,e,t,o):a5(this,e,t),this.closePath())}filletRect(e,t,s,o,l){if(l===0)return this.rect(e,t,s,o);const u=Math.min(s,o)/2,c=Math.min(u,Math.max(-u,l)),d=e+s,p=t+o,m=c<0?-c:0,y=Math.abs(c);return this.moveTo(e,t+y).arcTo(e+m,t+m,e+y,t,y).lineTo(d-y,t).arcTo(d-m,t+m,d,t+y,y).lineTo(d,p-y).arcTo(d-m,p-m,e+s-y,p,y).lineTo(e+y,p).arcTo(e+m,p-m,e,p-y,y).closePath()}chamferRect(e,t,s,o,l,u){if(l<=0)return this.rect(e,t,s,o);const c=Math.min(l,Math.min(s,o)/2),d=e+s,p=t+o,m=[e+c,t,d-c,t,d,t+c,d,p-c,d-c,p,e+c,p,e,p-c,e,t+c];for(let y=m.length-1;y>=2;y-=2)m[y]===m[y-2]&&m[y-1]===m[y-3]&&m.splice(y-1,2);return this.poly(m,!0,u)}ellipse(e,t,s,o,l){return this.drawShape(new th(e,t,s,o),l),this}roundRect(e,t,s,o,l,u){return this.drawShape(new nh(e,t,s,o,l),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new so,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new so,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,o=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const l=t.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const o=t[s],l=o.shape.getBounds(u5);o.transform?e.addRect(l,o.transform):e.addRect(l)}return e}}class ar{constructor(e,t=!1){this.instructions=[],this.uid=dt("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?L8(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new c5(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,o,l){const u=this.instructions[this.instructions.length-1],c=this.getLastPoint(Bt.shared);let d=0,p=0;if(!u||u.action!=="bezierCurveTo")d=c.x,p=c.y;else{d=u.data[2],p=u.data[3];const m=c.x,y=c.y;d=m+(m-d),p=y+(y-p)}return this.instructions.push({action:"bezierCurveTo",data:[d,p,e,t,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(Bt.shared);let u=0,c=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,c=l.y;else{u=o.data[0],c=o.data[1];const d=l.x,p=l.y;u=d+(d-u),c=p+(p-c)}return this.instructions.push({action:"quadraticCurveTo",data:[u,c,e,t,s]}),this._dirty=!0,this}rect(e,t,s,o,l){return this.instructions.push({action:"rect",data:[e,t,s,o,l]}),this._dirty=!0,this}circle(e,t,s,o){return this.instructions.push({action:"circle",data:[e,t,s,o]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,o,l,u,c){l||(l=o/2);const d=-1*Math.PI/2+u,p=s*2,m=Math.PI*2/p,y=[];for(let x=0;x<p;x++){const v=x%2?l:o,S=x*m+d;y.push(e+v*Math.cos(S),t+v*Math.sin(S))}return this.poly(y,!0,c),this}clone(e=!1){const t=new ar;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];t.instructions.push({action:o.action,data:o.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,o=e.c,l=e.d,u=e.tx,c=e.ty;let d=0,p=0,m=0,y=0,x=0,v=0,S=0,b=0;for(let w=0;w<this.instructions.length;w++){const C=this.instructions[w],A=C.data;switch(C.action){case"moveTo":case"lineTo":d=A[0],p=A[1],A[0]=t*d+o*p+u,A[1]=s*d+l*p+c;break;case"bezierCurveTo":m=A[0],y=A[1],x=A[2],v=A[3],d=A[4],p=A[5],A[0]=t*m+o*y+u,A[1]=s*m+l*y+c,A[2]=t*x+o*v+u,A[3]=s*x+l*v+c,A[4]=t*d+o*p+u,A[5]=s*d+l*p+c;break;case"quadraticCurveTo":m=A[0],y=A[1],d=A[2],p=A[3],A[0]=t*m+o*y+u,A[1]=s*m+l*y+c,A[2]=t*d+o*p+u,A[3]=s*d+l*p+c;break;case"arcToSvg":d=A[5],p=A[6],S=A[0],b=A[1],A[0]=t*S+o*b,A[1]=s*S+l*b,A[5]=t*d+o*p+u,A[6]=s*d+l*p+c;break;case"circle":A[4]=Zs(A[3],e);break;case"rect":A[4]=Zs(A[4],e);break;case"ellipse":A[8]=Zs(A[8],e);break;case"roundRect":A[5]=Zs(A[5],e);break;case"addPath":A[0].transform(e);break;case"poly":A[2]=Zs(A[2],e);break;default:Qe("unknown transform action",C.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function Zs(r,e){return r?r.prepend(e):e.clone()}function ht(r,e,t){const s=r.getAttribute(e);return s?Number(s):t}function h5(r,e){const t=r.querySelectorAll("defs");for(let s=0;s<t.length;s++){const o=t[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=d5(u);break;case"radialgradient":e.defs[u.id]=f5();break}}}}function d5(r){const e=ht(r,"x1",0),t=ht(r,"y1",0),s=ht(r,"x2",1),o=ht(r,"y2",0),l=r.getAttribute("gradientUnits")||"objectBoundingBox",u=new lr(e,t,s,o,l==="objectBoundingBox"?"local":"global");for(let c=0;c<r.children.length;c++){const d=r.children[c],p=ht(d,"offset",0),m=xt.shared.setValue(d.getAttribute("stop-color")).toNumber();u.addColorStop(p,m)}return u}function f5(r){return Qe("[SVG Parser] Radial gradients are not yet supported"),new lr(0,0,1,0)}function B1(r){const e=r.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const j1={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function P0(r,e){const t=r.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in j1){const c=r.getAttribute(u);c&&D1(e,l,u,c.trim())}if(t){const u=t.split(";");for(let c=0;c<u.length;c++){const d=u[c].trim(),[p,m]=d.split(":");j1[p]&&D1(e,l,p,m.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function D1(r,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=B1(s);e.strokeStyle.fill=r.defs[o]}else e.strokeStyle.color=xt.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=B1(s);e.fillStyle.fill=r.defs[o]}else e.fillStyle.color=xt.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function p5(r){if(r.length<=2)return!0;const e=r.map(c=>c.area).sort((c,d)=>d-c),[t,s]=e,o=e[e.length-1],l=t/s,u=s/o;return!(l>3&&u<2)}function m5(r){return r.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function g5(r){const e=r.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],o=[];for(let m=0;m<t.length;m+=2)m+1<t.length&&(s.push(t[m]),o.push(t[m+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),c=Math.min(...o),d=Math.max(...o);return(u-l)*(d-c)}function O1(r,e){const t=new ar(r,!1);for(const s of t.instructions)e.instructions.push(s)}function y5(r,e){if(typeof r=="string"){const u=document.createElement("div");u.innerHTML=r.trim(),r=u.querySelector("svg")}const t={context:e,defs:{},path:new ar};h5(r,t);const s=r.children,{fillStyle:o,strokeStyle:l}=P0(r,t);for(let u=0;u<s.length;u++){const c=s[u];c.nodeName.toLowerCase()!=="defs"&&T0(c,t,o,l)}return e}function T0(r,e,t,s){const o=r.children,{fillStyle:l,strokeStyle:u}=P0(r,e);l&&t?t={...t,...l}:l&&(t=l),u&&s?s={...s,...u}:u&&(s=u);const c=!t&&!s;c&&(t={color:0});let d,p,m,y,x,v,S,b,w,C,A,P,E,G,$,O,X;switch(r.nodeName.toLowerCase()){case"path":{G=r.getAttribute("d");const ne=r.getAttribute("fill-rule"),K=m5(G),Z=ne==="evenodd",xe=K.length>1;if(Z&&xe){const Ce=K.map(J=>({path:J,area:g5(J)}));if(Ce.sort((J,te)=>te.area-J.area),K.length>3||!p5(Ce))for(let J=0;J<Ce.length;J++){const te=Ce[J],Q=J===0;e.context.beginPath();const q=new ar(void 0,!0);O1(te.path,q),e.context.path(q),Q?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let J=0;J<Ce.length;J++){const te=Ce[J],Q=J%2===1;e.context.beginPath();const q=new ar(void 0,!0);O1(te.path,q),e.context.path(q),Q?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const Ce=ne?ne==="evenodd":!0;$=new ar(G,Ce),e.context.path($),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":S=ht(r,"cx",0),b=ht(r,"cy",0),w=ht(r,"r",0),e.context.ellipse(S,b,w,w),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":d=ht(r,"x",0),p=ht(r,"y",0),O=ht(r,"width",0),X=ht(r,"height",0),C=ht(r,"rx",0),A=ht(r,"ry",0),C||A?e.context.roundRect(d,p,O,X,C||A):e.context.rect(d,p,O,X),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":S=ht(r,"cx",0),b=ht(r,"cy",0),C=ht(r,"rx",0),A=ht(r,"ry",0),e.context.beginPath(),e.context.ellipse(S,b,C,A),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":m=ht(r,"x1",0),y=ht(r,"y1",0),x=ht(r,"x2",0),v=ht(r,"y2",0),e.context.beginPath(),e.context.moveTo(m,y),e.context.lineTo(x,v),s&&e.context.stroke(s);break;case"polygon":E=r.getAttribute("points"),P=E.match(/\d+/g).map(ne=>parseInt(ne,10)),e.context.poly(P,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":E=r.getAttribute("points"),P=E.match(/\d+/g).map(ne=>parseInt(ne,10)),e.context.poly(P,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{Qe(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}c&&(t=null);for(let ne=0;ne<o.length;ne++)T0(o[ne],e,t,s)}function x5(r){return xt.isColorLike(r)}function $1(r){return r instanceof il}function N1(r){return r instanceof lr}function v5(r){return r instanceof ze}function _5(r,e,t){const s=xt.shared.setValue(e??0);return r.color=s.toNumber(),r.alpha=s.alpha===1?t.alpha:s.alpha,r.texture=ze.WHITE,{...t,...r}}function w5(r,e,t){return r.texture=e,{...t,...r}}function U1(r,e,t){return r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,{...t,...r}}function G1(r,e,t){return e.buildGradient(),r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,r.textureSpace=e.textureSpace,{...t,...r}}function S5(r,e){const t={...e,...r},s=xt.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function ii(r,e){if(r==null)return null;const t={},s=r;return x5(r)?_5(t,r,e):v5(r)?w5(t,r,e):$1(r)?U1(t,r,e):N1(r)?G1(t,r,e):s.fill&&$1(s.fill)?U1(s,s.fill,e):s.fill&&N1(s.fill)?G1(s,s.fill,e):S5(s,e)}function el(r,e){const{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:c,...d}=e,p=ii(r,d);return p?{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:c,...p}:null}const b5=new Bt,W1=new Le,ih=class Gn extends Mn{constructor(){super(...arguments),this.uid=dt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new ar,this._transform=new Le,this._fillStyle={...Gn.defaultFillStyle},this._strokeStyle={...Gn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new En,this._boundsDirty=!0}clone(){const e=new Gn;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=ii(e,Gn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=el(e,Gn.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=ii(e,Gn.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=ii(e,Gn.defaultStrokeStyle),this}texture(e,t,s,o,l,u){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:o||0,dw:l||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?xt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ar,this}fill(e,t){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&(o==null?void 0:o.action)==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(Me(We,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=ii(e,Gn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Bt.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&(s==null?void 0:s.action)==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=el(e,Gn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,o,l,u){this._tick++;const c=this._transform;return this._activePath.arc(c.a*e+c.c*t+c.tx,c.b*e+c.d*t+c.ty,s,o,l,u),this}arcTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(e,t,s,o,l,u,c){this._tick++;const d=this._transform;return this._activePath.arcToSvg(e,t,s,o,l,d.a*u+d.c*c+d.tx,d.b*u+d.d*c+d.ty),this}bezierCurveTo(e,t,s,o,l,u,c){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*e+d.c*t+d.tx,d.b*e+d.d*t+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*l+d.c*u+d.tx,d.b*l+d.d*u+d.ty,c),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,s,o){return this._tick++,this._activePath.ellipse(e,t,s,o,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*e+s.c*t+s.tx,u=s.b*e+s.d*t+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(e,t,s,o){return this._tick++,this._activePath.rect(e,t,s,o,this._transform.clone()),this}roundRect(e,t,s,o,l){return this._tick++,this._activePath.roundRect(e,t,s,o,l,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(e,t,s,o,l,u),this}roundPoly(e,t,s,o,l,u){return this._tick++,this._activePath.roundPoly(e,t,s,o,l,u),this}roundShape(e,t,s,o){return this._tick++,this._activePath.roundShape(e,t,s,o),this}filletRect(e,t,s,o,l){return this._tick++,this._activePath.filletRect(e,t,s,o,l),this}chamferRect(e,t,s,o,l,u){return this._tick++,this._activePath.chamferRect(e,t,s,o,l,u),this}star(e,t,s,o,l=0,u=0){return this._tick++,this._activePath.star(e,t,s,o,l,u,this._transform.clone()),this}svg(e){return this._tick++,y5(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,o,l,u){return e instanceof Le?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,o,l,u),this)}transform(e,t,s,o,l,u){return e instanceof Le?(this._transform.append(e),this):(W1.set(e,t,s,o,l,u),this._transform.append(W1),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],o=s.action;if(o==="fill"){const l=s.data;e.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;e.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,c=l.style.width*(1-u),d=l.path.bounds;e.addFrame(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c)}}return e}containsPoint(e){var o;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let l=0;l<t.length;l++){const u=t[l],c=u.data,d=c.path;if(!u.action||!d)continue;const p=c.style,m=d.shapePath.shapePrimitives;for(let y=0;y<m.length;y++){const x=m[y].shape;if(!p||!x)continue;const v=m[y].transform,S=v?v.applyInverse(e,b5):e;if(u.action==="fill")s=x.contains(S.x,S.y);else{const w=p;s=x.strokeContains(S.x,S.y,w.width,w.alignment)}const b=c.hole;if(b){const w=(o=b.shapePath)==null?void 0:o.shapePrimitives;if(w)for(let C=0;C<w.length;C++)w[C].shape.contains(S.x,S.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};ih.defaultFillStyle={color:16777215,alpha:1,texture:ze.WHITE,matrix:null,fill:null,textureSpace:"local"};ih.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:ze.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let yn=ih;const sh=class Ui extends Mn{constructor(e={}){super(),this.uid=dt("textStyle"),this._tick=0,k5(e);const t={...Ui.defaultTextStyle,...e};for(const s in t){const o=s;this[o]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Ui.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Ui.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...yn.defaultFillStyle,...e},()=>{this._fill=ii({...this._originalFill},yn.defaultFillStyle)})),this._fill=ii(e===0?"black":e,yn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...yn.defaultStrokeStyle,...e},()=>{this._stroke=el({...this._originalStroke},yn.defaultStrokeStyle)})),this._stroke=el(e,yn.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=Ui.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Ui({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){var s,o,l,u;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const c=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(c),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(c),(l=this._stroke)!=null&&l.texture&&this._stroke.texture.destroy(c),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(c)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,o,l)=>(s[o]===l||(s[o]=l,t==null||t(o,l),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(xt.isColorLike(e)||e instanceof lr||e instanceof il)}};sh.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};sh.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let po=sh;function k5(r){const e=r;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=po.defaultDropShadow;r.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Me(We,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(xt.isColorLike(t))s.color=t;else if(t instanceof lr||t instanceof il)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");r.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Me(We,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Qe("The number of fill colors must match the number of fill gradient stops.");const t=new lr({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),o=e.fill.map(l=>xt.shared.setValue(l).toNumber());s.forEach((l,u)=>{t.addColorStop(l,o[u])}),r.fill={fill:t}}}class C5{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=Ye.get().createCanvas();s.width=e,s.height=t;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=Yi(e),t=Yi(t);const o=(e<<17)+(t<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(e,t)),l}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:o}=t,l=(s<<17)+(o<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,o),this._canvasPool[l].push(e)}clear(){this._canvasPool={}}}const mo=new C5;go.register(mo);const H1=1e5;function tl(r,e,t,s=0){if(r.texture===ze.WHITE&&!r.fill)return xt.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof il){const o=r.fill,l=e.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(Le.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(r.fill instanceof lr){const o=r.fill,l=o.type==="linear",u=o.textureSpace==="local";let c=1,d=1;u&&t&&(c=t.width+s,d=t.height+s);let p,m=!1;if(l){const{start:y,end:x}=o;p=e.createLinearGradient(y.x*c,y.y*d,x.x*c,x.y*d),m=Math.abs(x.x-y.x)<Math.abs((x.y-y.y)*.1)}else{const{center:y,innerRadius:x,outerCenter:v,outerRadius:S}=o;p=e.createRadialGradient(y.x*c,y.y*d,x*c,v.x*c,v.y*d,S*c)}if(m&&u&&t){const y=t.lineHeight/d;for(let x=0;x<t.lines.length;x++){const v=(x*t.lineHeight+s/2)/d;o.colorStops.forEach(S=>{const b=v+S.offset*y;p.addColorStop(Math.floor(b*H1)/H1,xt.shared.setValue(S.color).toHex())})}}else o.colorStops.forEach(y=>{p.addColorStop(y.offset,xt.shared.setValue(y.color).toHex())});return p}}else{const o=e.createPattern(r.texture.source.resource,"repeat"),l=r.matrix.copyTo(Le.shared);return l.scale(r.texture.frame.width,r.texture.frame.height),o.setTransform(l),o}return Qe("FillStyle not recognised",r),"red"}const E0=class M0 extends c0{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...M0.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=ze.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=Za(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof Xi?t.textureStyle:new Xi(t.textureStyle)),this.fontMetrics=Hn.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){var w,C;const t=Hn.graphemeSegmenter(e).filter(A=>!this._currentChars.includes(A)).filter((A,P,E)=>E.indexOf(A)===P);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const c=this._style;let d=this._currentX,p=this._currentY,m=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,x=this._padding*y;let v=!1;const S=o.width/this.resolution,b=o.height/this.resolution;for(let A=0;A<t.length;A++){const P=t[A],E=Hn.measureText(P,c,o,!1);E.lineHeight=E.height;const G=E.width*y,$=Math.ceil((c.fontStyle==="italic"?2:1)*G),O=E.height*y,X=$+x*2,ne=O+x*2;if(v=!1,P!==`
`&&P!=="\r"&&P!=="	"&&P!==" "&&(v=!0,m=Math.ceil(Math.max(ne,m))),d+X>S&&(p+=m,m=ne,d=0,p+m>b)){u.update();const Z=this._nextPage();o=Z.canvasAndContext.canvas,l=Z.canvasAndContext.context,u=Z.texture.source,d=0,p=0,m=0}const K=G/y-(((w=c.dropShadow)==null?void 0:w.distance)??0)-(((C=c._stroke)==null?void 0:C.width)??0);if(this.chars[P]={id:P.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:K,kerning:{}},v){this._drawGlyph(l,E,d+x,p+x,y,c);const Z=u.width*y,xe=u.height*y,de=new nt(d/Z*u.width,p/xe*u.height,X/Z*u.width,ne/xe*u.height);this.chars[P].texture=new ze({source:u,frame:de}),d+=Math.ceil(X)}}u.update(),this._currentX=d,this._currentY=p,this._currentMaxCharHeight=m,this._skipKerning&&this._applyKerning(t,l)}get pageTextures(){return Me(We,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let o=0;o<e.length;o++){const l=e[o];for(let u=0;u<this._currentChars.length;u++){const c=this._currentChars[u];let d=s[l];d||(d=s[l]=t.measureText(l).width);let p=s[c];p||(p=s[c]=t.measureText(c).width);let m=t.measureText(l+c).width,y=m-(d+p);y&&(this.chars[l].kerning[c]=y),m=t.measureText(l+c).width,y=m-(d+p),y&&(this.chars[c].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=mo.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new ze({source:new si({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:t,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=Za(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const o=t._stroke,l=(o==null?void 0:o.width)??0;if(o&&(e.lineWidth=l,e.lineJoin=o.join,e.miterLimit=o.miterLimit,e.strokeStyle=tl(o,e)),t._fill&&(e.fillStyle=tl(t._fill,e)),t.dropShadow){const u=t.dropShadow,c=xt.shared.setValue(u.color).toArray(),d=u.blur*s,p=u.distance*s;e.shadowColor=`rgba(${c[0]*255},${c[1]*255},${c[2]*255},${u.alpha})`,e.shadowBlur=d,e.shadowOffsetX=Math.cos(u.angle)*p,e.shadowOffsetY=Math.sin(u.angle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,o,l,u){const c=t.text,d=t.fontProperties,p=u._stroke,m=((p==null?void 0:p.width)??0)*l,y=s+m/2,x=o-m/2,v=d.descent*l,S=t.lineHeight*l;let b=!1;u.stroke&&m&&(b=!0,e.strokeText(c,y,x+S-v));const{shadowBlur:w,shadowOffsetX:C,shadowOffsetY:A}=e;u._fill&&(b&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(c,y,x+S-v)),b&&(e.shadowBlur=w,e.shadowOffsetX=C,e.shadowOffsetY=A)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];mo.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};E0.defaultOptions={textureSize:512,style:new po,mipmap:!0};let V1=E0;function A5(r,e,t,s){const o={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=t.baseLineOffset;let l=o.lines[0],u=null,c=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},p=t.baseMeasurementFontSize/e.fontSize,m=e.letterSpacing*p,y=e.wordWrapWidth*p,x=e.lineHeight?e.lineHeight*p:t.lineHeight,v=e.wordWrap&&e.breakWords,S=C=>{const A=l.width;for(let P=0;P<d.index;P++){const E=C.positions[P];l.chars.push(C.chars[P]),l.charPositions.push(E+A)}l.width+=C.width,c=!1,d.width=0,d.index=0,d.chars.length=0},b=()=>{let C=l.chars.length-1;if(s){let A=l.chars[C];for(;A===" ";)l.width-=t.chars[A].xAdvance,A=l.chars[--C]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},c=!0,o.lines.push(l),o.height+=x},w=C=>C-m>y;for(let C=0;C<r.length+1;C++){let A;const P=C===r.length;P||(A=r[C]);const E=t.chars[A]||t.chars[" "];if(/(?:\s)/.test(A)||A==="\r"||A===`
`||P){if(!c&&e.wordWrap&&w(l.width+d.width)?(b(),S(d),P||l.charPositions.push(0)):(d.start=l.width,S(d),P||l.charPositions.push(0)),A==="\r"||A===`
`)b();else if(!P){const X=E.xAdvance+(E.kerning[u]||0)+m;l.width+=X,l.spaceWidth=X,l.spacesIndex.push(l.charPositions.length),l.chars.push(A)}}else{const O=E.kerning[u]||0,X=E.xAdvance+O+m;v&&w(l.width+d.width+X)&&(S(d),b()),d.positions[d.index++]=d.width+O,d.chars.push(A),d.width+=X}u=A}return b(),e.align==="center"?P5(o):e.align==="right"?T5(o):e.align==="justify"&&E5(o),o}function P5(r){for(let e=0;e<r.lines.length;e++){const t=r.lines[e],s=r.width/2-t.width/2;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function T5(r){for(let e=0;e<r.lines.length;e++){const t=r.lines[e],s=r.width-t.width;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function E5(r){const e=r.width;for(let t=0;t<r.lines.length;t++){const s=r.lines[t];let o=0,l=s.spacesIndex[o++],u=0;const c=s.spacesIndex.length,p=(e-s.width)/c;for(let m=0;m<s.charPositions.length;m++)m===l&&(l=s.spacesIndex[o++],u+=p),s.charPositions[m]+=u}}function M5(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const e=[];for(let t=0,s=r.length;t<s;t++){const o=r[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let c=l,d=u;c<=d;c++)e.push(String.fromCharCode(c))}else e.push(...Array.from(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let Ha=0;class R5{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=h0(1e3)}getFont(e,t){var u;let s=`${t.fontFamily}-bitmap`,o=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,o=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,o=!1),!Ke.has(s)){const c=Object.create(t);c.lineHeight=0;const d=new V1({style:c,overrideFill:o,overrideSize:!0,...this.defaultOptions});Ha++,Ha>50&&Qe("BitmapText",`You have dynamically created ${Ha} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),d.once("destroy",()=>{Ha--,Ke.remove(s)}),Ke.set(s,d)}const l=Ke.get(s);return(u=l.ensureCharacters)==null||u.call(l,e),l}getLayout(e,t,s=!0){const o=this.getFont(e,t),l=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=Hn.graphemeSegmenter(e),c=A5(u,t,o,s);return this.measureCache.set(l,c),c}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){var p,m,y,x;let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:(p=e[2])==null?void 0:p.chars,resolution:(m=e[2])==null?void 0:m.resolution,padding:(y=e[2])==null?void 0:y.padding,skipKerning:(x=e[2])==null?void 0:x.skipKerning},Me(We,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t==null?void 0:t.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const o=t.style,l=o instanceof po?o:new po(o),u=t.dynamicFill??this._canUseTintForStyle(l),c=new V1({style:l,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),d=M5(t.chars);return c.ensureCharacters(d.join("")),Ke.set(`${s}-bitmap`,c),c.once("destroy",()=>Ke.remove(`${s}-bitmap`)),c}uninstall(e){const t=`${e}-bitmap`,s=Ke.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const Y1=new R5;class R0 extends c0{constructor(e,t){super();const{textures:s,data:o}=e;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],c=s[u.id];this.pages.push({texture:c})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:c,source:d,rotate:p}=s[u.page],m=He.transformRectCoords(u,c,p,new nt),y=new ze({frame:m,orig:new nt(0,0,u.width,u.height),source:d,rotate:p});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){Y1.install(e)}static uninstall(e){Y1.uninstall(e)}}const _c={test(r){return typeof r=="string"&&r.startsWith("info face=")},parse(r){const e=r.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in e){const x=e[y].match(/^[a-z]+/gm)[0],v=e[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),S={};for(const b in v){const w=v[b].split("="),C=w[0],A=w[1].replace(/"/gm,""),P=parseFloat(A),E=isNaN(P)?A:P;S[C]=E}t[x].push(S)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=t.info,[l]=t.common,[u]=t.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const c=t.page;for(let y=0;y<c.length;y++)s.pages.push({id:parseInt(c[y].id,10)||0,file:c[y].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const p=t.char;for(let y=0;y<p.length;y++){const x=p[y],v=parseInt(x.id,10);let S=x.letter??x.char??String.fromCharCode(v);S==="space"&&(S=" "),d[v]=S,s.chars[S]={id:v,page:parseInt(x.page,10)||0,x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xOffset:parseInt(x.xoffset,10),yOffset:parseInt(x.yoffset,10),xAdvance:parseInt(x.xadvance,10),kerning:{}}}const m=t.kerning||[];for(let y=0;y<m.length;y++){const x=parseInt(m[y].first,10),v=parseInt(m[y].second,10),S=parseInt(m[y].amount,10);s.chars[d[v]].kerning[d[x]]=S}return s}},X1={test(r){const e=r;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(r){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=r.getElementsByTagName("info")[0],s=r.getElementsByTagName("common")[0],o=r.getElementsByTagName("distanceField")[0];o&&(e.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=r.getElementsByTagName("page"),u=r.getElementsByTagName("char"),c=r.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let p=0;p<l.length;p++)e.pages.push({id:parseInt(l[p].getAttribute("id"),10)||0,file:l[p].getAttribute("file")});const d={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let p=0;p<u.length;p++){const m=u[p],y=parseInt(m.getAttribute("id"),10);let x=m.getAttribute("letter")??m.getAttribute("char")??String.fromCharCode(y);x==="space"&&(x=" "),d[y]=x,e.chars[x]={id:y,page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xOffset:parseInt(m.getAttribute("xoffset"),10),yOffset:parseInt(m.getAttribute("yoffset"),10),xAdvance:parseInt(m.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<c.length;p++){const m=parseInt(c[p].getAttribute("first"),10),y=parseInt(c[p].getAttribute("second"),10),x=parseInt(c[p].getAttribute("amount"),10);e.chars[d[y]].kerning[d[m]]=x}return e}},q1={test(r){return typeof r=="string"&&r.match(/<font(\s|>)/)?X1.test(Ye.get().parseXML(r)):!1},parse(r){return X1.parse(Ye.get().parseXML(r))}},I5=[".xml",".fnt"],L5={extension:{type:fe.CacheParser,name:"cacheBitmapFont"},test:r=>r instanceof R0,getCacheableAssets(r,e){const t={};return r.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},F5={extension:{type:fe.LoadParser,priority:Lr.Normal},name:"loadBitmapFont",id:"bitmap-font",test(r){return I5.includes(on.extname(r).toLowerCase())},async testParse(r){return _c.test(r)||q1.test(r)},async parse(r,e,t){const s=_c.test(r)?_c.parse(r):q1.parse(r),{src:o}=e,{pages:l}=s,u=[],c=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const x=l[y].file;let v=on.join(on.dirname(o),x);v=Ic(v,o),u.push({src:v,data:c})}const d=await t.load(u),p=u.map(y=>d[y.src]);return new R0({data:s,textures:p},o)},async load(r,e){return await(await Ye.get().fetch(r)).text()},async unload(r,e,t){await Promise.all(r.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),r.destroy()}};class z5{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const B5={extension:{type:fe.CacheParser,name:"cacheTextureArray"},test:r=>Array.isArray(r)&&r.every(e=>e instanceof ze),getCacheableAssets:(r,e)=>{const t={};return r.forEach(s=>{e.forEach((o,l)=>{t[s+(l===0?"":l+1)]=o})}),t}};async function I0(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const j5={extension:{type:fe.DetectionParser,priority:1},test:async()=>I0("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")},K1=["png","jpg","jpeg"],D5={extension:{type:fe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...K1],remove:async r=>r.filter(e=>!K1.includes(e))},O5="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function ol(r){return O5?!1:document.createElement("video").canPlayType(r)!==""}const $5={extension:{type:fe.DetectionParser,priority:0},test:async()=>ol("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")},N5={extension:{type:fe.DetectionParser,priority:0},test:async()=>ol("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")},U5={extension:{type:fe.DetectionParser,priority:0},test:async()=>ol("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")},G5={extension:{type:fe.DetectionParser,priority:0},test:async()=>I0("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")},L0=class Xa{constructor(){this.loadOptions={...Xa.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{var u,c;let o=null,l=null;if((t.parser||t.loadParser)&&(l=this._parserHash[t.parser||t.loadParser],t.loadParser&&Qe(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),l||Qe(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!l){for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];if(p.load&&((u=p.test)!=null&&u.call(p,e,t,this))){l=p;break}}if(!l)return Qe(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(e,t,this),s.parser=l;for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];p.parse&&p.parse&&await((c=p.testParse)==null?void 0:c.call(p,o,t,this))&&(o=await p.parse(o,t,this)||o,s.parser=p)}return o})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...Xa.defaultOptions,...this.loadOptions,onProgress:t}:{...Xa.defaultOptions,...this.loadOptions,...t||{}},{onProgress:o,onError:l,strategy:u,retryCount:c,retryDelay:d}=s;let p=0;const m={},y=Qa(e),x=Tn(e,b=>({alias:[b],src:b,data:{}})),v=x.reduce((b,w)=>b+(w.progressSize||1),0),S=x.map(async b=>{const w=on.toAbsolute(b.src);m[b.src]||(await this._loadAssetWithRetry(w,b,{onProgress:o,onError:l,strategy:u,retryCount:c,retryDelay:d},m),p+=b.progressSize||1,o&&o(p/v))});return await Promise.all(S),y?m[x[0].src]:m}async unload(e){const s=Tn(e,o=>({alias:[o],src:o})).map(async o=>{var c,d;const l=on.toAbsolute(o.src),u=this.promiseCache[l];if(u){const p=await u.promise;delete this.promiseCache[l],await((d=(c=u.parser)==null?void 0:c.unload)==null?void 0:d.call(c,p,o,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?Qe("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&Qe(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,o){let l=0;const{onError:u,strategy:c,retryCount:d,retryDelay:p}=s,m=y=>new Promise(x=>setTimeout(x,y));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),o[t.src]=await this.promiseCache[e].promise;return}catch(y){delete this.promiseCache[e],delete o[t.src],l++;const x=c!=="retry"||l>d;if(c==="retry"&&!x){u&&u(y,t),await m(p);continue}if(c==="skip"){u&&u(y,t);return}throw u&&u(y,t),new Error(`[Loader.load] Failed to load ${e}.
${y}`)}}};L0.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let W5=L0;function es(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function ts(r,e){const t=r.split("?")[0],s=on.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const H5=".json",V5="application/json",Y5={extension:{type:fe.LoadParser,priority:Lr.Low},name:"loadJson",id:"json",test(r){return es(r,V5)||ts(r,H5)},async load(r){return await(await Ye.get().fetch(r)).json()}},X5=".txt",q5="text/plain",K5={name:"loadTxt",id:"text",extension:{type:fe.LoadParser,priority:Lr.Low,name:"loadTxt"},test(r){return es(r,q5)||ts(r,X5)},async load(r){return await(await Ye.get().fetch(r)).text()}},Q5=["normal","bold","100","200","300","400","500","600","700","800","900"],Z5=[".ttf",".otf",".woff",".woff2"],J5=["font/ttf","font/otf","font/woff","font/woff2"],e4=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function t4(r){const e=on.extname(r),o=on.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1));let l=o.length>0;for(const c of o)if(!c.match(e4)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const n4=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function r4(r){return n4.test(r)?r:encodeURI(r)}const i4={extension:{type:fe.LoadParser,priority:Lr.Low},name:"loadWebFont",id:"web-font",test(r){return es(r,J5)||ts(r,Z5)},async load(r,e){var s,o,l;const t=Ye.get().getFontFaceSet();if(t){const u=[],c=((s=e.data)==null?void 0:s.family)??t4(r),d=((l=(o=e.data)==null?void 0:o.weights)==null?void 0:l.filter(m=>Q5.includes(m)))??["normal"],p=e.data??{};for(let m=0;m<d.length;m++){const y=d[m],x=new FontFace(c,`url(${r4(r)})`,{...p,weight:y});await x.load(),t.add(x),u.push(x)}return Ke.has(`${c}-and-url`)?Ke.get(`${c}-and-url`).entries.push({url:r,faces:u}):Ke.set(`${c}-and-url`,{entries:[{url:r,faces:u}]}),u.length===1?u[0]:u}return Qe("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){const e=Array.isArray(r)?r:[r],t=e[0].family,s=Ke.get(`${t}-and-url`),o=s.entries.find(l=>l.faces.some(u=>e.indexOf(u)!==-1));o.faces=o.faces.filter(l=>e.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),e.forEach(l=>{Ye.get().getFontFaceSet().delete(l)}),s.entries.length===0&&Ke.remove(`${t}-and-url`)}};function oh(r,e=1){var s;const t=(s=Ji.RETINA_PREFIX)==null?void 0:s.exec(r);return t?parseFloat(t[1]):e}function ah(r,e,t){r.label=t,r._sourceOrigin=t;const s=new ze({source:r,label:t}),o=()=>{delete e.promiseCache[t],Ke.has(t)&&Ke.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(Qe("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{r.destroyed||(Qe("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const s4=".svg",o4="image/svg+xml",a4={extension:{type:fe.LoadParser,priority:Lr.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(r){return es(r,o4)||ts(r,s4)},async load(r,e,t){var s;return((s=e.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?u4(r):l4(r,e,t,this.config.crossOrigin)},unload(r){r.destroy(!0)}};async function l4(r,e,t,s){var w,C,A;const o=await Ye.get().fetch(r),l=Ye.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=((w=e.data)==null?void 0:w.width)??l.width,c=((C=e.data)==null?void 0:C.height)??l.height,d=((A=e.data)==null?void 0:A.resolution)||oh(r),p=Math.ceil(u*d),m=Math.ceil(c*d),y=Ye.get().createCanvas(p,m),x=y.getContext("2d");x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(l,0,0,u*d,c*d);const{parseAsGraphicsContext:v,...S}=e.data??{},b=new si({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:d,...S});return ah(b,t,r)}async function u4(r){const t=await(await Ye.get().fetch(r)).text(),s=new yn;return s.svg(t),s}const c4=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Hi=null,Gc=class{constructor(){Hi||(Hi=URL.createObjectURL(new Blob([c4],{type:"application/javascript"}))),this.worker=new Worker(Hi)}};Gc.revokeObjectURL=function(){Hi&&(URL.revokeObjectURL(Hi),Hi=null)};const h4=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Vi=null;class F0{constructor(){Vi||(Vi=URL.createObjectURL(new Blob([h4],{type:"application/javascript"}))),this.worker=new Worker(Vi)}}F0.revokeObjectURL=function(){Vi&&(URL.revokeObjectURL(Vi),Vi=null)};let Q1=0,wc;class d4{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Gc;t.addEventListener("message",s=>{t.terminate(),Gc.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){var s;return this._run("loadImageBitmap",[e,(s=t==null?void 0:t.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){wc===void 0&&(wc=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<wc&&(this._createdWorkers++,e=new F0().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:e,arguments:t,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[Q1]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Q1++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const Z1=new d4,f4=[".jpeg",".jpg",".png",".webp",".avif"],p4=["image/jpeg","image/png","image/webp","image/avif"];async function m4(r,e){var o;const t=await Ye.get().fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const s=await t.blob();return((o=e==null?void 0:e.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const z0={name:"loadTextures",id:"texture",extension:{type:fe.LoadParser,priority:Lr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return es(r,p4)||ts(r,f4)},async load(r,e,t){var l;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Z1.isImageBitmapSupported()?s=await Z1.loadImageBitmap(r,e):s=await m4(r,e):s=await new Promise((u,c)=>{s=Ye.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=r,s.complete?u(s):(s.onload=()=>{u(s)},s.onerror=c)});const o=new si({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((l=e.data)==null?void 0:l.resolution)||oh(r),...e.data});return ah(o,t,r)},unload(r){r.destroy(!0)}},g4=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let Sc,bc;function y4(r,e,t){t===void 0&&!e.startsWith("data:")?r.crossOrigin=v4(e):t!==!1&&(r.crossOrigin=typeof t=="string"?t:"anonymous")}function x4(r){return new Promise((e,t)=>{r.addEventListener("canplaythrough",s),r.addEventListener("error",o),r.load();function s(){l(),e()}function o(u){l(),t(u)}function l(){r.removeEventListener("canplaythrough",s),r.removeEventListener("error",o)}})}function v4(r,e=globalThis.location){if(r.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function _4(){const r=[],e=[];for(const t of g4){const s=io.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;ol(s)&&(r.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:r,validVideoMime:e}}const w4={name:"loadVideo",id:"video",extension:{type:fe.LoadParser,name:"loadVideo"},test(r){if(!Sc||!bc){const{validVideoExtensions:s,validVideoMime:o}=_4();Sc=s,bc=o}const e=es(r,bc),t=ts(r,Sc);return e||t},async load(r,e,t){var d,p;const s={...io.defaultOptions,resolution:((d=e.data)==null?void 0:d.resolution)||oh(r),alphaMode:((p=e.data)==null?void 0:p.alphaMode)||await Op(),...e.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(m=>{const y=l[m];y!==void 0&&o.setAttribute(m,y)}),s.muted===!0&&(o.muted=!0),y4(o,r,s.crossorigin);const u=document.createElement("source");let c;if(s.mime)c=s.mime;else if(r.startsWith("data:"))c=r.slice(5,r.indexOf(";"));else if(!r.startsWith("blob:")){const m=r.split("?")[0].slice(r.lastIndexOf(".")+1).toLowerCase();c=io.MIME_TYPES[m]||`video/${m}`}return u.src=r,c&&(u.type=c),new Promise(m=>{const y=async()=>{const x=new io({...s,resource:o});o.removeEventListener("canplay",y),e.data.preload&&await x4(o),m(ah(x,t,r))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",y),o.appendChild(u)})},unload(r){r.destroy(!0)}},B0={extension:{type:fe.ResolveParser,name:"resolveTexture"},test:z0.test,parse:r=>{var e;return{resolution:parseFloat(((e=Ji.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:r.split(".").pop(),src:r}}},S4={extension:{type:fe.ResolveParser,priority:-2,name:"resolveJson"},test:r=>Ji.RETINA_PREFIX.test(r)&&r.endsWith(".json"),parse:B0.parse};class b4{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ji,this.loader=new W5,this.cache=Ke,this._backgroundLoader=new z5(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var l,u;if(this._initialized){Qe("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let c=e.manifest;typeof c=="string"&&(c=await this.load(c)),this.resolver.addManifest(c)}const t=((l=e.texturePreference)==null?void 0:l.resolution)??1,s=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:(u=e.texturePreference)==null?void 0:u.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=Qa(e),o=Tn(e).map(c=>{if(typeof c!="string"){const d=this.resolver.getAlias(c);return d.some(p=>!this.resolver.hasKey(p))&&this.add(c),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,t);return s?u[o[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const o=this.resolver.resolveBundle(e),l={},u=Object.keys(o);let c=0;const d=[],p=()=>{t==null||t(d.reduce((y,x)=>y+x,0)/c)},m=u.map((y,x)=>{const v=o[y],S=Object.values(v),w=[...new Set(S.flat())].reduce((C,A)=>C+(A.progressSize||1),0);return d.push(0),c+=w,this._mapLoadToResolve(v,C=>{d[x]=C*w,p()}).then(C=>{l[y]=C})});return await Promise.all(m),s?l[e[0]]:l}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Ke.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=Ke.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,t);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const c=o[u.src],d=[u.src];u.alias&&d.push(...u.alias),d.forEach(p=>{l[p]=c}),Ke.set(d,c)}),l}async unload(e){this._initialized||await this.init();const t=Tn(e).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=Tn(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{Ke.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,o)=>t.indexOf(s)===o),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const Wi=new b4;Mt.handleByList(fe.LoadParser,Wi.loader.parsers).handleByList(fe.ResolveParser,Wi.resolver.parsers).handleByList(fe.CacheParser,Wi.cache.parsers).handleByList(fe.DetectionParser,Wi.detections);Mt.add(B5,D5,j5,G5,$5,N5,U5,Y5,K5,i4,a4,z0,w4,F5,L5,B0,S4);const J1={loader:fe.LoadParser,resolver:fe.ResolveParser,cache:fe.CacheParser,detection:fe.DetectionParser};Mt.handle(fe.Asset,r=>{const e=r.ref;Object.entries(J1).filter(([t])=>!!e[t]).forEach(([t,s])=>Mt.add(Object.assign(e[t],{extension:e[t].extension??s})))},r=>{const e=r.ref;Object.keys(J1).filter(t=>!!e[t]).forEach(t=>Mt.remove(e[t]))});class ai extends Kc{constructor(e){e instanceof yn&&(e={context:e});const{context:t,roundPixels:s,...o}=e||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new yn,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new ai(this._context.clone()):(this._ownedContext=null,new ai(this._context))}lineStyle(e,t,s){Me(We,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return e&&(o.width=e),t&&(o.color=t),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(e,t){Me(We,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){Me(We,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==yn.defaultStrokeStyle.width||e.color!==yn.defaultStrokeStyle.color||e.alpha!==yn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Me(We,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Me(We,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Me(We,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Me(We,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Me(We,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Me(We,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class k4 extends Kc{constructor(e,t){const{text:s,resolution:o,style:l,anchor:u,width:c,height:d,roundPixels:p,...m}=e;super({...m}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=s??"",this.style=l,this.resolution=o??null,this.allowChildren=!1,this._anchor=new Et({_onUpdate:()=>{this.onViewUpdate()}}),u&&(this.anchor=u),this.roundPixels=p??!1,c!==void 0&&(this.width=c),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,s=this.bounds.height,o=-t*this.anchor.x;let l=0;return e.x>=o&&e.x<=o+t&&(l=-s*this.anchor.y,e.y>=l&&e.y<=l+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function C4(r,e){let t=r[0]??{};return(typeof t=="string"||r[1])&&(Me(We,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:r[1]}),t}let Jr=null,ir=null;function A4(r,e){Jr||(Jr=Ye.get().createCanvas(256,128),ir=Jr.getContext("2d",{willReadFrequently:!0}),ir.globalCompositeOperation="copy",ir.globalAlpha=1),(Jr.width<r||Jr.height<e)&&(Jr.width=Yi(r),Jr.height=Yi(e))}function ep(r,e,t){for(let s=0,o=4*t*e;s<e;++s,o+=4)if(r[o+3]!==0)return!1;return!0}function tp(r,e,t,s,o){const l=4*e;for(let u=s,c=s*l+4*t;u<=o;++u,c+=l)if(r[c+3]!==0)return!1;return!0}function P4(...r){let e=r[0];e.canvas||(e={canvas:r[0],resolution:r[1]});const{canvas:t}=e,s=Math.min(e.resolution??1,1),o=e.width??t.width,l=e.height??t.height;let u=e.output;if(A4(o,l),!ir)throw new TypeError("Failed to get canvas 2D context");ir.drawImage(t,0,0,o,l,0,0,o*s,l*s);const d=ir.getImageData(0,0,o,l).data;let p=0,m=0,y=o-1,x=l-1;for(;m<l&&ep(d,o,m);)++m;if(m===l)return nt.EMPTY;for(;ep(d,o,x);)--x;for(;tp(d,o,p,m,x);)++p;for(;tp(d,o,y,m,x);)--y;return++y,++x,ir.globalCompositeOperation="source-over",ir.strokeRect(p,m,y-p,x-m),ir.globalCompositeOperation="copy",u??(u=new nt),u.set(p/s,m/s,(y-p)/s,(x-m)/s),u}const np=new nt;class T4{getCanvasAndContext(e){const{text:t,style:s,resolution:o=1}=e,l=s._getFinalPadding(),u=Hn.measureText(t||" ",s),c=Math.ceil(Math.ceil(Math.max(1,u.width)+l*2)*o),d=Math.ceil(Math.ceil(Math.max(1,u.height)+l*2)*o),p=mo.getOptimalCanvasAndContext(c,d);this._renderTextToCanvas(t,s,l,o,p);const m=s.trim?P4({canvas:p.canvas,width:c,height:d,resolution:1,output:np}):np.set(0,0,c,d);return{canvasAndContext:p,frame:m}}returnCanvasAndContext(e){mo.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,s,o,l){var P,E,G,$;const{canvas:u,context:c}=l,d=Za(t),p=Hn.measureText(e||" ",t),m=p.lines,y=p.lineHeight,x=p.lineWidths,v=p.maxLineWidth,S=p.fontProperties,b=u.height;if(c.resetTransform(),c.scale(o,o),c.textBaseline=t.textBaseline,(P=t._stroke)!=null&&P.width){const O=t._stroke;c.lineWidth=O.width,c.miterLimit=O.miterLimit,c.lineJoin=O.join,c.lineCap=O.cap}c.font=d;let w,C;const A=t.dropShadow?2:1;for(let O=0;O<A;++O){const X=t.dropShadow&&O===0,ne=X?Math.ceil(Math.max(1,b)+s*2):0,K=ne*o;if(X){c.fillStyle="black",c.strokeStyle="black";const de=t.dropShadow,Ce=de.color,ft=de.alpha;c.shadowColor=xt.shared.setValue(Ce).setAlpha(ft).toRgbaString();const J=de.blur*o,te=de.distance*o;c.shadowBlur=J,c.shadowOffsetX=Math.cos(de.angle)*te,c.shadowOffsetY=Math.sin(de.angle)*te+K}else{if(c.fillStyle=t._fill?tl(t._fill,c,p,s*2):null,(E=t._stroke)!=null&&E.width){const de=t._stroke.width*.5+s*2;c.strokeStyle=tl(t._stroke,c,p,de)}c.shadowColor="black"}let Z=(y-S.fontSize)/2;y-S.fontSize<0&&(Z=0);const xe=((G=t._stroke)==null?void 0:G.width)??0;for(let de=0;de<m.length;de++)w=xe/2,C=xe/2+de*y+S.ascent+Z,t.align==="right"?w+=v-x[de]:t.align==="center"&&(w+=(v-x[de])/2),($=t._stroke)!=null&&$.width&&this._drawLetterSpacing(m[de],t,l,w+s,C+s-ne,!0),t._fill!==void 0&&this._drawLetterSpacing(m[de],t,l,w+s,C+s-ne)}}_drawLetterSpacing(e,t,s,o,l,u=!1){const{context:c}=s,d=t.letterSpacing;let p=!1;if(Hn.experimentalLetterSpacingSupported&&(Hn.experimentalLetterSpacing?(c.letterSpacing=`${d}px`,c.textLetterSpacing=`${d}px`,p=!0):(c.letterSpacing="0px",c.textLetterSpacing="0px")),d===0||p){u?c.strokeText(e,o,l):c.fillText(e,o,l);return}let m=o;const y=Hn.graphemeSegmenter(e);let x=c.measureText(e).width,v=0;for(let S=0;S<y.length;++S){const b=y[S];u?c.strokeText(b,m,l):c.fillText(b,m,l);let w="";for(let C=S+1;C<y.length;++C)w+=y[C];v=c.measureText(w).width,m+=x-v+d,x=v}}}const rp=new T4;class E4 extends k4{constructor(...e){const t=C4(e,"Text");super(t,po),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof Xi?t.textureStyle:new Xi(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let s=0,o=0;if(this._style.trim){const{frame:l,canvasAndContext:u}=rp.getCanvasAndContext({text:this.text,style:this._style,resolution:1});rp.returnCanvasAndContext(u),s=l.width,o=l.height}else{const l=Hn.measureText(this._text,this._style);s=l.width,o=l.height}e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*o,e.maxY=e.minY+o}}Mt.add(zy,By);const M4=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<!-- Created with Inkscape (http://www.inkscape.org/) -->\r
\r
<svg\r
   width="174.61385mm"\r
   height="234.6797mm"\r
   viewBox="0 0 174.61385 234.6797"\r
   version="1.1"\r
   id="svg1"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   sodipodi:docname="gentil.svg"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#191919"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#bd2727ff"\r
     inkscape:document-units="mm"\r
     inkscape:zoom="0.72604517"\r
     inkscape:cx="331.24661"\r
     inkscape:cy="485.50698"\r
     inkscape:window-width="1920"\r
     inkscape:window-height="1017"\r
     inkscape:window-x="1912"\r
     inkscape:window-y="-8"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="layer1"\r
     showgrid="true">\r
    <inkscape:grid\r
       id="grid1"\r
       units="mm"\r
       originx="-17.307133"\r
       originy="-20.032634"\r
       spacingx="0.99999998"\r
       spacingy="1"\r
       empcolor="#0099e5"\r
       empopacity="0.30196078"\r
       color="#0099e5"\r
       opacity="0.14901961"\r
       empspacing="5"\r
       enabled="true"\r
       visible="true" />\r
  </sodipodi:namedview>\r
  <defs\r
     id="defs1" />\r
  <g\r
     inkscape:label="Calque 1"\r
     inkscape:groupmode="layer"\r
     id="layer1"\r
     transform="translate(-17.307132,-20.032634)">\r
    <path\r
       d="m 69.048457,20.142976 c -0.141111,0.105834 -1.234722,0.282223 -2.434166,0.352778 -2.504723,0.176389 -3.633611,0.740834 -4.445,2.293056 -0.352778,0.599722 -0.9525,1.622778 -1.411111,2.328333 -0.881945,1.340556 -2.046111,4.233334 -2.328334,5.891389 -0.105833,0.564445 -0.599722,2.2225 -1.093611,3.633611 -0.458611,1.446389 -1.093611,4.021667 -1.375833,5.785556 -0.282222,1.763888 -0.740833,3.421944 -1.023056,3.774721 -0.282222,0.3175 -0.599722,0.811389 -0.740833,1.093611 -0.141111,0.282223 0.07056,0.141112 0.458611,-0.352777 0.846667,-1.023056 0.9525,-0.740834 0.211667,0.670277 -0.282222,0.564445 -0.423333,1.093612 -0.282222,1.199445 0.105833,0.105833 -0.176389,0.811389 -0.635,1.516944 -0.740834,1.234722 -0.811389,1.27 -1.128889,0.564445 -0.176389,-0.388056 -0.881945,-0.987778 -1.516945,-1.305278 -1.093611,-0.529167 -1.305277,-0.529167 -2.434166,0.03528 -1.940278,0.917222 -4.233333,3.139722 -5.115278,4.974167 -0.670278,1.411111 -1.27,1.975555 -3.598333,3.457222 -3.033889,1.905 -5.750277,4.797777 -7.161388,7.584722 -0.458612,0.917222 -1.305278,2.116666 -1.869723,2.681111 -1.305277,1.340555 -3.139722,6.0325 -2.575277,6.596944 0.246944,0.246945 1.411111,0.423334 2.892777,0.388056 l 2.434167,-0.03528 -0.176389,1.093611 c -0.105833,0.599722 -0.352778,2.187222 -0.564444,3.563056 -0.176389,1.340555 -0.599723,2.751666 -0.917223,3.069166 -0.423333,0.458611 -0.493888,1.023056 -0.3175,2.257778 0.211667,1.763889 0.705556,2.610555 1.481667,2.610555 0.352778,0 0.423333,0.3175 0.246945,1.093611 -0.105834,0.635 -0.03528,1.199445 0.176388,1.340556 0.246945,0.141111 0.282223,0.987778 0.07056,2.681111 -0.176388,1.375833 -0.211666,2.822222 -0.105833,3.280833 0.246945,1.093611 -0.529167,3.774722 -1.340555,4.515556 -0.388056,0.3175 -0.670278,0.846666 -0.670278,1.199444 0,0.317504 -0.493889,0.740834 -1.234722,1.023054 -1.693334,0.59972 -2.081389,1.44639 -1.799167,4.1275 0.352778,3.35139 -0.282222,6.70278 -1.446389,7.69056 -1.128889,0.98778 -1.234722,2.61055 -0.282222,4.40972 0.3175,0.635 0.635,1.79917 0.705555,2.61056 0.529167,5.53861 0.529167,5.82083 -0.03528,6.0325 -0.3175,0.10583 -0.599722,0.21166 -0.670277,0.21166 -0.03528,0 -0.176389,-0.635 -0.3175,-1.44639 -0.176388,-1.02305 -0.423333,-1.51694 -0.917222,-1.62277 -0.529166,-0.14112 -0.705555,-0.49389 -0.705555,-1.30528 -0.03528,-2.11667 -2.575278,-6.17361 -3.633611,-5.75028 -1.023056,0.38806 -1.093611,2.54 -0.246945,4.86833 0.705556,1.79917 0.740834,2.2225 0.352778,2.96334 -0.246944,0.49389 -0.352778,1.30527 -0.246944,1.905 0.141111,0.70555 0,1.5875 -0.458612,2.57527 -0.388055,0.84667 -0.705555,2.2225 -0.705555,3.06917 0,1.51694 0,1.51694 -0.776111,0.9525 -2.081389,-1.44639 -2.187222,-1.44639 -1.940278,-0.0706 0.105833,0.70556 0.529167,1.72862 0.881945,2.25778 0.846666,1.16417 3.563055,7.51417 4.656666,10.83028 1.305278,3.98639 3.386667,7.83167 5.432778,9.91305 2.786944,2.89278 3.986389,2.46945 5.185833,-1.86972 1.058333,-3.81 0.917222,-5.57389 -0.635,-7.83166 -0.705556,-1.02306 -1.340556,-1.76389 -1.375833,-1.5875 -0.03528,0.17639 -0.176389,0.74083 -0.282223,1.27 -0.3175,1.37583 -0.670277,1.23472 -1.340555,-0.56445 l -0.564444,-1.55222 2.151944,0.17639 c 1.199444,0.0705 3.175,0.28222 4.374444,0.49389 2.434166,0.35278 3.739444,0.0705 4.303889,-1.05834 0.599722,-1.05833 0.458611,-2.08138 -0.3175,-2.8575 -0.881945,-0.88194 -1.305278,-1.94027 -2.010834,-4.7625 -0.246944,-1.16416 -0.846666,-2.75167 -1.305277,-3.52778 -0.705556,-1.16416 -0.811389,-1.69333 -0.564445,-2.99861 0.141111,-0.88194 0.529167,-2.15194 0.881945,-2.82222 1.164166,-2.18722 1.234722,-2.43417 1.234722,-3.52778 0,-1.23472 1.093611,-3.56305 2.116666,-4.58611 0.388056,-0.38805 0.705556,-0.98778 0.705556,-1.34055 0,-0.35278 0.246944,-0.9525 0.529167,-1.37584 0.3175,-0.45861 0.529166,-1.37583 0.458611,-2.11666 -0.03528,-0.74084 0.282222,-2.99862 0.705555,-5.04473 0.423334,-2.04611 0.9525,-4.58611 1.128889,-5.67972 0.246945,-1.19944 0.987778,-2.99861 1.905,-4.550832 0.846667,-1.375834 1.834444,-3.386667 2.187222,-4.445 0.352778,-1.058333 0.776111,-1.905 0.917222,-1.905 0.141112,0 0.529167,0.529167 0.846667,1.128889 0.3175,0.635 1.411111,2.434166 2.363611,3.951111 1.340556,2.046111 1.869722,3.280833 2.046111,4.691942 0.141111,1.05834 0.564445,2.32834 0.917222,2.82222 2.293056,3.24556 2.328334,4.37445 0.352778,7.09084 -0.670278,0.91722 -1.905,2.92805 -2.716389,4.445 -1.552222,2.96333 -1.552222,3.10444 -1.058333,9.03111 0.03528,0.28222 -0.105833,2.64583 -0.3175,5.22111 -0.352778,4.23334 -0.529167,4.97417 -1.658055,7.40834 -1.869723,3.95111 -1.940278,4.19805 -2.293056,7.65527 -0.211667,2.08139 -0.211667,4.09223 0.03528,5.89139 0.352778,2.61056 0.3175,2.92806 -0.917222,7.69056 -1.481667,5.57389 -1.516945,5.32694 1.199444,6.0325 0.881944,0.24694 1.658056,0.70555 1.905,1.12889 0.9525,1.79916 -0.599722,8.5725 -3.457222,14.99305 -1.058334,2.43417 -4.621389,7.16139 -5.185833,6.94972 -0.564445,-0.21166 -1.023056,0.14112 -1.693334,1.37584 -0.529166,0.9525 -1.058333,1.23472 -2.328333,1.34055 -0.246944,0.0353 -0.458611,0.21167 -0.458611,0.38806 0,0.17639 -0.3175,0.74083 -0.670278,1.27 -0.634999,0.88194 -0.634999,1.05833 -0.211666,1.905 0.458611,0.88194 0.352777,1.19944 -1.305278,4.72722 l -1.799166,3.81 -0.07055,5.46806 c -0.07056,7.76111 -0.458612,12.94694 -1.305278,17.85055 l -0.740834,4.30389 -1.552222,0.77611 c -0.846666,0.42333 -1.481666,0.84667 -1.375833,0.9525 0.07056,0.10583 -0.07056,0.81139 -0.352778,1.62278 -0.458611,1.30528 -0.458611,1.51694 0,1.86972 1.093611,0.77611 1.27,2.15195 0.917222,6.42056 -0.211666,2.25777 -0.493888,4.97416 -0.635,5.96194 -0.176388,1.02306 -0.211666,2.01083 -0.105833,2.15195 0.493889,0.74083 9.524999,4.7625 11.429999,5.07999 2.645833,0.45862 9.489722,-0.21166 11.006666,-1.09361 0.917222,-0.49388 1.058334,-0.84666 1.164167,-2.25777 0.07055,-1.19945 -0.105833,-2.01084 -0.599722,-2.82223 -0.776111,-1.27 -6.632222,-7.05555 -8.466667,-8.32555 -1.09361,-0.77611 -1.164165,-0.9525 -0.9525,-2.29306 0.141111,-0.81139 0.529167,-1.69333 0.9525,-1.97555 0.493889,-0.42334 0.776111,-1.19945 1.023056,-2.99861 0.388055,-3.21028 4.7625,-14.78139 8.290277,-21.94278 1.481667,-2.92806 2.822223,-6.17361 2.998611,-7.19667 0.635001,-3.38666 3.598334,-7.3025 6.138334,-8.07861 0.811388,-0.28222 1.552222,-0.81139 1.905,-1.41111 0.493888,-0.88194 0.740833,-0.98778 2.187222,-0.91722 2.081389,0.10583 3.139722,0.70555 6.35,3.56305 1.446388,1.30528 3.069166,2.43417 3.598333,2.54 0.529167,0.10584 1.199444,0.56445 1.516944,1.02306 0.846667,1.30528 3.245556,8.29028 3.527778,10.23055 0.282222,2.04612 1.516944,6.52639 1.940278,6.985 0.141111,0.14112 0.141111,0.74084 0,1.27 -0.176389,0.56445 -0.211667,1.09362 -0.105834,1.19945 0.105834,0.10583 0.03528,0.38805 -0.141111,0.635 -0.529166,0.635 -0.881944,2.99861 -0.529166,3.24555 0.176388,0.10584 0.246944,0.9525 0.176388,1.86973 -0.246944,2.50472 0.493889,7.86694 1.164167,8.60777 0.811389,0.91723 3.280833,1.16417 6.244177,0.67028 4.833056,-0.81139 6.596945,-0.81139 10.583333,-0.0353 2.610561,0.49389 5.185841,0.74084 8.219731,0.74084 3.98639,0 4.445,-0.0706 5.11528,-0.74084 0.56444,-0.56444 0.70555,-0.98777 0.52916,-1.83444 -0.10583,-0.56444 -0.38805,-1.23472 -0.56444,-1.48167 -0.17639,-0.24694 -2.04611,-0.88194 -4.1275,-1.41111 -2.11667,-0.52916 -4.02167,-1.16416 -4.30389,-1.37583 -0.52917,-0.42333 -2.50472,-1.48167 -4.974173,-2.71639 -3.421944,-1.65806 -5.679722,-4.19806 -4.974167,-5.53861 0.246945,-0.42333 0.105834,-1.27 -0.388055,-2.71639 -0.635,-1.905 -0.705556,-2.61056 -0.493889,-7.05556 0.141111,-2.71638 0.3175,-5.43277 0.423333,-5.99722 0.105834,-0.59972 0.3175,-3.38666 0.423334,-6.24416 0.141111,-3.13973 0.423333,-5.36223 0.635,-5.60917 0.599722,-0.56444 1.516944,-0.17639 3.280833,1.44639 1.552222,1.41111 2.504722,1.62278 2.504722,0.52917 0,-0.77612 -1.234722,-3.10445 -1.940278,-3.70417 -1.023055,-0.84667 -1.234722,-1.5875 -0.846666,-2.99861 0.211666,-0.74084 0.599722,-1.5875 0.881944,-1.83445 0.282222,-0.28222 0.493889,-0.81139 0.493889,-1.19944 0,-1.48167 3.139733,-0.59972 8.255003,2.39889 0.84667,0.49389 2.89278,0.59972 3.175,0.17639 0.10584,-0.17639 -1.05833,-1.37584 -2.54,-2.68111 -2.54,-2.29306 -6.84389,-4.79778 -8.255003,-4.79778 -0.3175,0 -0.705556,-0.17639 -0.811389,-0.35278 -0.105834,-0.21167 -0.670278,-0.35278 -1.234723,-0.35278 -0.811389,0 -1.058333,-0.21166 -1.375833,-1.12889 -0.317499,-0.84666 -0.493889,-1.02305 -0.811389,-0.70555 -1.128889,1.12889 -1.199445,0.0353 -0.352778,-4.62139 0.352778,-1.86972 1.128889,-3.06917 1.128889,-1.69333 0,1.5875 0.635,0.35277 0.776111,-1.55223 0.105833,-1.30527 0.423333,-2.29305 0.917222,-2.92805 2.751673,-3.42195 3.245563,-4.72722 3.245563,-8.71361 0,-1.72861 0.17639,-3.03389 0.42333,-3.28084 0.45861,-0.45861 0.49389,-3.56305 0.10584,-10.58333 -0.24695,-4.1275 -0.21167,-4.65667 0.3175,-4.65667 0.59972,0 0.77611,0.56445 1.05833,3.42195 0.24694,2.46944 1.16417,4.1275 3.66889,6.56167 2.18722,2.18722 3.03389,2.2225 1.94028,0.14111 -0.35278,-0.635 -1.02306,-1.905 -1.48167,-2.78695 -0.77611,-1.48166 -0.81139,-1.69333 -0.35278,-2.71639 0.3175,-0.67027 0.74083,-1.09361 1.16417,-1.09361 0.38805,0 1.19944,-0.17639 1.79916,-0.38805 2.01084,-0.74084 10.05417,1.65805 13.22917,3.91583 0.91722,0.635 1.23472,0.70556 2.36361,0.38806 0.74083,-0.21167 1.83444,-0.38806 2.46944,-0.38806 1.5875,0 4.97417,1.12889 6.70278,2.2225 1.34055,0.84667 1.94028,0.98778 5.29167,1.09361 5.78555,0.24695 15.98083,2.25778 19.685,3.91583 0.98777,0.42334 2.8575,0.88195 4.19805,0.98778 1.34056,0.14111 3.10444,0.56445 3.95111,0.9525 1.09361,0.56445 3.73945,1.02306 9.91306,1.76389 9.17222,1.16417 14.9225,1.62278 14.9225,1.30528 0,-0.49389 -3.66889,-2.01084 -10.58334,-4.445 -3.98639,-1.41111 -8.07861,-2.8575 -9.10166,-3.21028 -1.05834,-0.38805 -2.68111,-0.70555 -3.66889,-0.70555 -0.98778,0 -2.68111,-0.35278 -3.91584,-0.84667 -1.23472,-0.45861 -3.35138,-0.91722 -4.83305,-1.05833 -4.55083,-0.35278 -16.05139,-3.59834 -19.93194,-5.60917 -1.12889,-0.59972 -2.08139,-0.74083 -4.93889,-0.77611 -3.73945,0 -6.10306,-0.74084 -7.83167,-2.36361 -0.70556,-0.635 -1.16417,-0.70556 -4.445,-0.67028 -4.65666,0.10583 -11.21833,-1.27 -12.24138,-2.50472 -1.44639,-1.72861 -0.38806,-3.31611 3.31611,-5.00945 1.76389,-0.81139 2.96333,-1.79917 2.61055,-2.18722 -0.10583,-0.0706 -1.55222,0.17639 -3.24555,0.59972 -3.4925,0.88194 -6.49111,2.54 -8.21972,4.51556 -1.37584,1.65805 -2.32834,1.97555 -3.13973,1.05833 -0.49389,-0.56444 -0.52916,-0.84667 -0.21166,-1.5875 0.84666,-1.76389 0.21166,-6.6675 -1.12889,-8.78417 -0.705564,-1.12889 -1.340564,-6.87917 -1.09362,-9.63083 0.246945,-2.2225 0.176389,-2.54 -0.493888,-3.21028 -0.670278,-0.67028 -0.740834,-1.16417 -0.776112,-4.30389 0,-2.46944 -0.246944,-4.23333 -0.705555,-5.67972 C 96.988477,101.5993 96.600422,99.835411 96.45931,98.812356 96.318199,97.7893 95.965422,96.484022 95.683199,95.919578 95.400977,95.319856 94.836533,93.450133 94.483755,91.7568 c -0.599722,-3.033889 -0.599722,-3.139722 0.03528,-3.704166 0.811389,-0.740834 1.622778,-3.316111 1.340555,-4.339167 -0.105833,-0.423333 0.03528,-1.869722 0.282223,-3.210278 0.282222,-1.340555 0.529166,-3.245555 0.529166,-4.233333 0,-1.763889 0,-1.799167 0.705556,-1.164167 0.599722,0.529167 0.811389,0.564445 1.763889,0.176389 1.763896,-0.740833 2.116676,-1.516944 1.587506,-3.4925 -0.49389,-1.905 -1.05834,-3.069166 -1.69334,-3.457222 -1.093611,-0.705555 -1.305278,-2.116666 -0.776111,-4.974166 0.917222,-4.7625 0.599722,-8.149167 -0.846667,-8.748889 -0.3175,-0.105833 -1.904999,-0.3175 -3.563055,-0.458611 l -2.963333,-0.211667 -0.105834,-3.175 c -0.141123,-3.845214 -0.4939,-5.150492 -1.834456,-7.302436 -1.375833,-2.151944 -2.575288,-2.928055 -4.480288,-2.822222 l -1.552222,0.07056 0.07055,-1.340555 c 0.07056,-1.975556 -0.246939,-3.598334 -1.305273,-6.173612 -0.493889,-1.27 -0.987777,-2.610555 -1.058333,-2.963333 -0.282222,-1.375833 -1.058333,-3.175 -1.834444,-4.233333 -0.458611,-0.599722 -0.811389,-1.27 -0.811389,-1.446389 0,-0.388056 -3.139722,-3.351389 -4.092222,-3.845278 -0.811389,-0.458611 -4.550834,-0.881945 -4.833056,-0.564445 z m 26.35251,79.798332 c -0.282222,0.317502 -0.776111,-0.423333 -0.599722,-0.917222 0.211667,-0.529166 0.246944,-0.493889 0.458611,0.105834 0.141111,0.352777 0.211667,0.740833 0.141111,0.811388 z m -20.249454,68.615272 1.5875,0.74084 0.599722,2.99861 c 1.375833,6.73805 1.164166,11.04194 -0.635,12.73528 -0.458611,0.42333 -0.846667,1.02305 -0.846667,1.30527 0,0.28223 -0.3175,0.91723 -0.705555,1.48167 -0.811389,1.16417 -1.023056,4.02167 -0.388056,5.57389 0.246945,0.56444 0.388056,1.79917 0.3175,2.75167 l -0.105833,1.72861 -2.116667,-3.13972 c -1.834444,-2.75167 -5.609166,-6.56167 -6.491111,-6.56167 -0.141111,0 -0.458611,-0.38806 -0.670278,-0.88195 -0.246944,-0.49388 -0.811388,-1.05833 -1.305277,-1.23472 -0.493889,-0.17639 -0.917223,-0.56444 -0.917223,-0.88194 -0.211666,-2.64584 -0.176388,-2.82222 1.128889,-4.23334 2.116667,-2.29305 7.373056,-11.71222 7.373056,-13.22916 0,-0.45861 0.881944,-0.24695 3.175,0.84666 z"\r
       id="path3"\r
       style="fill:currentColor;fill-opacity:1;stroke:none;stroke-width:0.0352778" />\r
  </g>\r
</svg>\r
`,R4=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<svg\r
   width="2342"\r
   height="3750"\r
   viewBox="0 0 2342 3750"\r
   version="1.1"\r
   id="svg1"\r
   sodipodi:docname="mechant.svg"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <defs\r
     id="defs1" />\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#ffffff"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#d1d1d1"\r
     inkscape:zoom="0.21733333"\r
     inkscape:cx="1171.0123"\r
     inkscape:cy="1875"\r
     inkscape:window-width="1920"\r
     inkscape:window-height="1017"\r
     inkscape:window-x="-"\r
     inkscape:window-y="-8"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="svg1" />\r
  <path\r
     fill-rule="nonzero"\r
     fill="#000000"\r
     fill-opacity="1"\r
     d="m 1179.4102,3716.9922 c -17.3907,-74.8555 -35.9414,-120.9844 -69.0313,-171.7774 -30.6094,-46.9726 -82.0898,-92.3789 -115.62499,-102 -9.15235,-2.625 -10.1875,-2.039 -14.46875,8.211 -2.53907,6.0703 -9.29688,27.6328 -15.01954,47.9101 -11.40625,40.4102 -25.3125,77.6563 -29,77.6563 -1.29296,0 -4.19531,-12.1133 -6.44921,-26.918 -6.85938,-45.0625 -25.47266,-111.832 -39.1875,-140.5703 -15.55469,-32.5898 -37.56641,-58.125 -60.26954,-69.918 -13.26171,-6.8906 -21.32421,-8.6875 -39.5039,-8.7929 -26.72266,-0.1563 -41.25781,5.8086 -60.45703,24.8164 -14.30469,14.164 -16.1836,14.9531 -16.28516,6.8594 -0.14062,-11.0079 -12.54687,-33.0313 -25.9375,-46.0235 -52.17578,-50.6328 -129.63672,-52.4961 -178.97266,-4.3008 -10.42578,10.1836 -21.48828,22.1836 -24.58203,26.6719 -5.5625,8.0625 -5.60937,7.9258 -4.17187,-11.4219 0.92187,-12.4336 11.65625,-51.1172 29.42578,-106.0351 62.49609,-193.1406 112.14844,-389.7969 155.69141,-616.6485 18.38671,-95.7812 35.44921,-222.3007 35.53125,-263.4609 l 0.0391,-17.1289 h -13.9961 c -32.30859,0 -86.14843,-21.6016 -135.19531,-54.2305 C 451.2891,2202.9102 384.21879,2073.8789 376.1602,1931.6914 l -2.07813,-36.6133 -92.28125,-185.9687 C 231.04687,1606.8203 167.20703,1474.6797 139.93359,1415.4609 76.816406,1278.4102 44.253906,1214.0586 17.546875,1173.6094 1.621094,1149.4805 -2.457031,1141.1289 1.300781,1140.3281 c 9.125,-1.9375 67.613281,12.9532 128.253909,32.6524 63.97656,20.789 114.91015,41.039 149.80859,59.5781 11.91406,6.3203 22.19141,10.9727 22.83203,10.332 0.64453,-0.6406 -6.85156,-34.75 -16.65625,-75.8008 -39.96484,-167.3398 -42.8164,-188.92964 -42.79297,-324.23043 0.0117,-82.66015 1.15625,-109.98046 5.83985,-139.60937 5.70703,-36.10156 23.48047,-112.28125 28.19531,-120.85156 2.13672,-3.87891 46.05469,69.26172 73.13281,121.80078 4.625,8.97265 11.3086,19.98047 14.85938,24.46094 l 6.44922,8.14843 7.98046,-17.9375 C 383.59375,709.01172 394.86328,683.32031 404.25,661.78125 442.76172,573.42969 496.08984,474 550.375,389.35156 c 9.78125,-15.26172 42.82031,-62.97265 73.42187,-106.04297 92.47657,-130.14843 130.32813,-180.25 132.13282,-174.89843 0.52734,1.57031 -3.46485,20.37109 -8.8711,41.78906 C 721.60937,251 718.21094,332 737.92187,367.83984 c 6.26954,11.39844 9.09766,13.5 19.33985,14.35157 15.53515,1.29687 20.58203,-1.5 82.62109,-45.72266 88.19531,-62.85938 122.33594,-82.6875 262.98829,-152.70703 50.1602,-24.97266 103.6289,-53.5 118.8008,-63.40234 40.8789,-26.64063 78.0976,-63.898442 97.6562,-97.757818 18.8321,-32.570312 19.3516,-32.203124 22.7032,16.007813 4.6406,66.839845 14.1093,105.718745 36.3984,149.460935 39.6289,77.75781 131.8516,149.3711 209.5,162.69141 26.8906,4.60937 41.2109,1.53906 61.5508,-13.20313 14.6797,-10.6289 35.6992,-47.6875 45.5781,-80.34765 10.5898,-35.05078 6.3516,-154.75 -7.5391,-212.890628 -0.9687,-4.039062 -0.3476,-7.339843 1.3711,-7.339843 5.0391,0 37.711,72.480471 57.3477,127.238281 9.9805,27.82031 29.4219,85.8125 43.2031,128.88281 29.3477,91.63672 46.9688,137.10938 72.8789,188.08985 19.2891,37.9375 83.0508,148.6289 89,154.48828 2.2188,2.1914 5.0313,0.57031 8.5195,-4.89844 19.4883,-30.47266 67.8711,-61.78125 106.2383,-68.76172 30.1407,-5.46875 31.6211,-2.66016 10.6211,20.03125 -22.9492,24.77734 -41.9375,63.57813 -49.4179,100.9375 -6.1602,30.76172 -5.543,104.87109 1.8984,228.39063 6.1016,101.17189 1.6406,283.24219 -8.4883,346.44139 l -1.9297,12.0078 35.5469,-20.2773 c 63.1797,-36.0625 178.2109,-81.5899 255.332,-101.082 17.0508,-4.3086 31.5782,-7.3204 32.3008,-6.6875 0.7188,0.6289 -6.7226,11.8085 -16.5312,24.8476 -42.1719,56.0508 -67.0704,92.3399 -95.8086,139.6328 -20.2422,33.3086 -84.3907,159.8594 -122.0118,240.6875 -34.7109,74.5703 -100.9687,208.5625 -127.4492,257.7422 l -23.3711,43.3789 8.5899,35.9297 c 16.332,68.2813 18.1992,120.6406 6.5,181.9883 -25.9492,136.0625 -111.0977,238.8125 -220.3477,265.8828 -25.1523,6.2305 -61.0625,6.8594 -84.3633,1.4805 -9.0976,-2.1016 -17.3789,-2.9805 -18.3984,-1.961 -4.8398,4.8282 8.7109,166.6875 23.0195,275.0703 17.5508,132.9375 27.0586,180.9141 70.461,355.5157 28.9687,116.5781 29.8789,119.8476 68.6992,247.1328 18.5117,60.7148 32.0703,110.7187 31.4101,115.8242 l -1.1796,8.9883 -4.2696,-8.5586 c -7.6523,-15.3281 -27.9804,-24.0664 -55.9804,-24.0664 -21.9102,0 -27.3789,1.3554 -49.5,12.2851 -29.7813,14.7227 -53.0586,38.4688 -58.8204,60.0157 -2.0898,7.7851 -4.5898,14.0351 -5.5585,13.8867 -0.9727,-0.1485 -9.1524,-9.2617 -18.1797,-20.2461 -20.6914,-25.1797 -39.4102,-35.2813 -69.2227,-37.336 -60.5976,-4.1835 -103.5703,40.6055 -123.25,128.4571 -9.0703,40.4883 -17.8281,95.0742 -17.8594,111.2929 -0.01,5.8321 -1.3086,10.6016 -2.8906,10.6016 -4.5898,0 -24.7695,-44.2031 -37.9805,-83.1992 -6.6875,-19.7383 -14.9375,-41.3984 -18.3476,-48.1367 l -6.1992,-12.2461 -11.3125,4.7226 c -43.5196,18.1836 -98.4805,81.2813 -124.461,142.8907 -14.9687,35.4882 -28.9883,82.4218 -37.3086,124.8437 -3.8711,19.7422 -8.1406,37.9609 -9.5,40.4883 -1.4882,2.8008 -5.8398,-9.9649 -11.1093,-32.625 z m 252.4492,-526.6289 c 3.8906,-143.336 6.4297,-182.332 19.8515,-305.0625 18.1993,-166.4805 34.3594,-261.8906 58.8282,-347.4727 14.3515,-50.1875 37.332,-110.7578 52.6015,-138.6679 5.3985,-9.8711 7.5391,-15.7383 4.7696,-13.0508 -6.1797,6.0117 -51.3204,90.9023 -63.0313,118.5195 -56.9883,134.5508 -90.5781,340.2422 -97.3281,596.0117 -3.1602,119.4805 5.8008,284.1328 17.1094,314.8203 1.3281,3.6055 2.7382,-17.6718 3.1289,-47.2812 0.3906,-29.6094 2.2304,-109.625 4.0703,-177.8164 z m -476.23831,206.4961 c 0,-2.168 2.36719,-23.0938 5.25782,-46.4922 4.29687,-34.7774 4.93359,-63.4024 3.49218,-156.7422 -1.72656,-111.3477 -5.07812,-159.8398 -20.32031,-293.6406 -22.0625,-193.7344 -77.27344,-378.336 -148.32812,-495.9727 -9.19532,-15.2304 -17.26172,-27.6914 -17.92188,-27.6914 -0.66016,0 3.71484,10.6485 9.72266,23.6602 36.0039,77.9804 83.30859,259.0898 109.29297,418.4375 28.6875,175.9179 46.22265,350.1601 50.98046,506.5312 1.26563,41.7227 3.54688,75.8594 5.06641,75.8594 1.51563,0 2.75781,-1.7773 2.75781,-3.9492 z m 707.76951,-177.1328 c -3.2617,-23.3282 -9.0117,-67.375 -12.789,-97.8789 -12.5821,-101.6602 -23.0625,-175.3789 -37.543,-264.2774 -7.8984,-48.4531 -16.0703,-100.207 -18.168,-115.0117 -9.4101,-66.6992 -7.3203,-3.0469 3.7891,115.0117 8.3789,88.9766 17.1406,155.0156 30.7617,231.7617 16.3399,92.086 35.4883,177.8164 38.8594,173.9766 0.5586,-0.6406 -1.6406,-20.2539 -4.9102,-43.582 z m -949.50779,-83.1953 c 16.32422,-93.6016 27.94922,-209.0079 31.05078,-308.3243 1.99219,-63.6757 -0.17187,-59.7031 -12.4375,22.836 -11.72656,78.9179 -28.77734,273.2695 -27.84375,317.375 0.34766,16.3008 1.54688,12.1523 9.23047,-31.8867 z m 514.98829,-8.211 c 22.2187,-19.0234 25.4883,-43.332 8.8008,-65.5586 -16.1133,-21.4648 -45.2617,-26.3398 -66.6133,-11.1367 -38.3867,27.3398 -18.0898,88.168 29.4414,88.168 12.3984,0 17.2617,-1.9649 28.3711,-11.4727 z m -13.7617,-365.2578 c 18.5625,-10.875 33.1406,-28.2422 45.1797,-53.793 8.6718,-18.3906 10.0625,-24.9882 9.9922,-47.4609 -0.1016,-30.0078 -6.9805,-48.8867 -26.5196,-72.7383 -42.4531,-51.8008 -123.2617,-33.3008 -142.8711,32.6914 -6.3203,21.2891 -6.3906,61.8086 -0.1523,82.8281 16.9101,56.9336 70.3711,84.2618 114.3711,58.4727 z m 110.8203,-103.7031 c 13.6289,-29.9688 22.25,-69.7578 22.4609,-103.5899 0.1602,-26.8281 -0.9687,-33.4804 -8.3906,-49.5078 -18.2109,-39.3125 -52.2109,-64.4336 -90.9414,-67.2031 -21.3672,-1.5273 -22.9492,-1.0977 -49.7695,13.5195 -34.418,18.7617 -47.1289,19.6836 -67.5703,4.8711 -45.0391,-32.6289 -88.5391,-30.6875 -124.0782,5.5196 -7.82419,7.9726 -15.46873,14.5 -16.98826,14.5 -3.83984,0 -17.79687,-31.668 -20.48047,-46.4688 -2.41796,-13.3203 0.16016,-28.5703 4.82422,-28.5703 1.61328,0 6.10938,9.5391 9.99219,21.1992 3.87891,11.6719 7.77344,21.2109 8.65234,21.2109 0.87891,0 8.46878,-5.789 16.85938,-12.8789 21.6719,-18.2617 43.0195,-26.9296 66.3906,-26.9296 16.3203,0 24.3086,2.3906 51.0313,15.1992 l 31.6875,15.1992 24.4297,-10.4688 c 55.5898,-23.8007 110.25,-13.0898 153.3711,30.0274 16.539,16.543 32.2812,44.8125 35.9101,64.4726 1.8594,10.0704 2.5899,10.8594 4.8516,5.3204 30.8398,-75.6719 66.789,-146.0704 97.039,-190.0313 23.0274,-33.4492 56.0079,-63.6211 79.6172,-72.8398 17.2735,-6.7383 24.9414,-7.4883 81.0625,-7.9297 66.7188,-0.5196 81.5196,-2.8907 114.4492,-18.2696 44.629,-20.8515 80.8985,-57.6914 105.6993,-107.3515 26.0507,-52.1797 34.0898,-90.3711 34,-161.5 -0.078,-57.7891 -3.25,-84.5899 -19.6993,-166.3985 -21.1679,-105.3515 -21.4609,-171.0312 -1.289,-290.3593 19.039,-112.6211 19.1992,-140.1211 1.2578,-213.6133 -25.0586,-102.6367 -62.8984,-173.5195 -126.4375,-236.8399 -57.4922,-57.289 -123.7109,-96.88668 -205.8594,-123.07809 C 1489.1992,921 1462.5703,916.85156 1422.0781,918.5 c -38.1992,1.57031 -54.3086,7.64062 -80.7578,30.46094 -25.0586,21.61718 -48.6406,78.78906 -76.5586,185.61716 l -7.6015,29.0703 -13.4297,-22.5898 c -30.0899,-50.6602 -95.6211,-94.6602 -190.2305,-127.7383 -85.77734,-29.99999 -150.83984,-40.78905 -244.69922,-40.62108 -76.19531,0.15234 -114.875,5.90234 -168.39062,25.01953 C 568,1023.6016 519.32422,1062.7109 494.09375,1115.3008 c -26.625,55.4805 -32.33984,108.2773 -29.84375,275.6875 1.03125,69.0898 1.22656,124.1523 0.43359,122.3515 -1.96875,-4.4609 -23.82422,-162.3203 -27.78125,-200.6484 -4.76953,-46.2617 -4.02734,-122.2812 1.50782,-154.0117 5.64453,-32.3594 24.76562,-89.2305 37.05468,-110.1992 11.125,-18.9805 42.41407,-56.30081 60.10157,-71.67191 56.8164,-49.38672 122.34375,-72.59765 223.70312,-79.23828 48.76953,-3.19922 56.28906,-4.39844 54.91016,-8.80859 -0.87891,-2.82031 -8.45703,-21.89063 -16.84375,-42.39063 -16.83985,-41.16015 -28.78516,-89.58984 -34.03516,-137.97265 -4.05859,-37.38672 -4.15625,-96.07813 -0.17578,-105.33985 2.27344,-5.29687 2.84766,-4.29687 3.03516,5.26172 0.32812,16.98828 18.11718,113.19141 27.84375,150.60938 13.96875,53.71093 46.52343,139.12109 53.20312,139.55078 1.30859,0.0898 17.79688,2.10937 36.63672,4.5 18.84375,2.3789 34.63672,4.00781 35.10156,3.62109 0.46485,-0.39062 -3.46875,-11.17187 -8.73828,-23.96094 -19.42969,-47.10937 -42.05859,-133.53906 -50.56641,-193.12109 -9.62109,-67.39062 -15.23828,-183.39844 -9.0664,-187.21094 1.4375,-0.88672 6.70312,25.8125 11.69922,59.35157 23.42968,157.30859 33.05078,203.39843 59.07422,283.01171 22.79296,69.73829 15.39062,61.48829 71.80859,80.06641 68.50395,22.57031 126.62505,52.65234 179.18355,92.76172 15.2188,11.6211 29,21.1211 30.6094,21.1211 1.6602,0 1.8711,-6.7109 0.4805,-15.5 -1.3399,-8.5195 -4.1289,-42.66016 -6.1992,-75.85157 -4.211,-67.67969 -13.3907,-162.50781 -23.0196,-237.94922 -3.5312,-27.6914 -5.8125,-50.96094 -5.0625,-51.71094 2.6329,-2.6289 21.5235,63.10157 27.9414,97.16016 10.8399,57.55078 13.3516,89.08203 15.2188,190.87109 1.582,86.71098 2.4922,99.51958 8.0195,112.32028 3.5235,8.1485 7.4102,13.1289 8.9102,11.418 1.4726,-1.6601 6.0625,-16.2383 10.1914,-32.3906 8.3789,-32.7578 21.4922,-68.63674 43.7187,-119.67971 23.7618,-54.58984 26.293,-68.78906 26.3008,-147.85937 0,-72.57813 -3.4883,-115.6875 -16.6289,-205.55078 -8.9492,-61.12891 -38.0312,-207.4375 -51.8906,-261.00782 -0.9414,-3.62109 0.7617,-2.21093 3.8008,3.16797 27.3593,48.26172 59,171.13282 77.75,301.89063 16.039,111.92969 17.7187,172.16015 6.4609,231.65234 -2.5508,13.45703 -4.6328,24.53906 -4.6328,24.62891 0,0.0781 10.9297,-5.17969 24.293,-11.69922 28.3984,-13.85156 65.2773,-22.72266 94.457,-22.72266 48,0 110.8711,16.92188 167.3633,45.05078 107.2695,53.40235 184.0195,129.41013 239.457,237.17193 23.1524,45 22.8399,41.4101 -4.0781,-47.3125 -30.4492,-100.32818 -36.75,-134.62896 -36.5625,-199.01958 0.1133,-39.21094 1.5117,-57.82031 5.1211,-68.50781 l 4.9609,-14.67188 2.2305,26.08984 c 6.1992,72.40235 17.6484,138.17969 34.539,198.40233 19.6016,69.8867 42.5704,175.5899 48.879,224.8672 3.621,28.2422 6.9531,74.7422 7.4101,103.3399 0.4609,28.6093 1.8399,50.2304 3.0703,48.0507 3.5391,-6.3007 21.5899,-120.7187 25.5508,-161.9414 5.9102,-61.6679 7.8984,-226.61716 3.4492,-287.11716 -7.3398,-99.88282 -29.6797,-190.25 -63.3789,-256.3711 l -14.832,-29.10937 -0.2188,22.83984 c -0.3007,31.21094 -5.9492,82.60938 -9.8007,89.21094 -2.2774,3.89062 -3.1875,-0.53125 -3.2696,-15.80078 -0.2773,-54.83985 -15.8906,-108.83985 -55.6484,-192.5 -28.582,-60.14063 -49.2813,-109.46875 -60.2617,-143.55078 -3.1797,-9.8711 -6.2383,-18.48828 -6.8086,-19.14844 -0.5703,-0.67188 -7.3516,4.20703 -15.0586,10.83984 -17.2422,14.8086 -53.8321,32.5586 -76.9922,37.34766 -24.9688,5.17187 -69.1797,4.40234 -95.8594,-1.66797 -44.8008,-10.19141 -83.2305,-29.62109 -128.289,-64.87109 -62.4219,-48.83985 -93.2305,-93.89063 -108.1211,-158.08985 -2.7305,-11.73828 -5.4883,-21.89062 -6.1485,-22.55078 -0.6523,-0.64844 -13.3906,5.44141 -28.2929,13.53906 -14.8985,8.10157 -59.3985,28.65235 -98.879,45.66016 -174.10152,75.03125 -254.00386,120.72266 -363.22261,207.74219 -27.48047,21.89844 -55.1836,41.98828 -61.56641,44.66015 -29.54687,12.33985 -66.04687,-8.82031 -87.19531,-50.55078 -8.75391,-17.26953 -18.125,-57.89062 -18.33985,-79.48047 l -0.13671,-14.00781 -7.89063,22.83985 c -17.38281,50.32031 -21.99219,78.25 -21.80859,132.13671 0.35937,104.04297 24.70312,220.21094 67.28906,321.10157 18.46875,43.76172 18.64453,44.32031 13.90625,44.32031 -4.48047,0 -25.25391,-32.60938 -41.46875,-65.08984 -23.32422,-46.73047 -51.96094,-131.92969 -66.39844,-197.55079 -7.16797,-32.58984 -12.86328,-95 -10.41406,-114.17968 l 2.08203,-16.32813 -13.63281,22.83985 c -31.75391,53.17968 -63.24219,126.92968 -97.83594,229.16015 -26.28906,77.66797 -34.85547,96.83985 -50.46484,112.91797 -14.48438,14.91016 -27.87891,15.98047 -41.14063,3.26953 l -9.02344,-8.64844 1.48047,11.09766 c 0.81641,6.10156 3.76953,34.58203 6.5625,63.29297 2.79297,28.71875 9.60938,82.30855 15.14844,119.08985 9.47266,62.8789 10.16406,73.918 11.5625,184.3398 0.82031,64.6094 0.75781,116.7305 -0.13281,115.8282 -1.8711,-1.8789 -9.66016,-66.4805 -17.10938,-141.9297 C 367.98047,1046.4102 353.51953,961.58984 326.375,865.69922 317.48437,834.30078 308.64844,802 306.74219,793.92187 c -5.32813,-22.52343 -1.75,137.27735 4.45703,199.01954 6.73047,66.99999 18.66406,146.99999 30.90625,207.17969 11.53125,56.6875 11.94922,58.207 46.29687,167.8281 58.89063,187.9727 70.33594,263.5508 66.24219,437.4102 -1.89844,80.4492 -1.42969,94.2695 4.52344,133.7617 17.55078,116.418 61.64453,200.2383 134.25781,255.2187 45.15234,34.1915 91.67969,50.8711 151.75391,54.4219 49.69922,2.9297 58.85156,6.5196 89.80078,35.168 21.3789,19.8008 68.35547,80.6797 107.24609,138.9805 35.01563,52.5 72.19534,128.8711 92.39454,189.7812 l 17.25,52.0391 1.9375,-28.1211 c 1.4531,-21.0391 4.1211,-32.5899 10.6406,-45.9102 22.8399,-46.6679 83.3594,-77.1679 134.5508,-67.8086 54.8984,10.0313 93.3086,47.8985 105.3203,103.8399 8.9883,41.8789 10.9414,49.7578 12.3399,49.7578 0.8086,0 4.9804,-7.707 9.2695,-17.1289 z m -159.8594,-285.9375 c -29,-7.5508 -63.1211,-34.8516 -80.9414,-64.7617 -8.3594,-14.0196 -11.707,-17.1016 -16.9375,-15.6094 -3.5898,1.0195 -23.7812,3.5195 -44.8711,5.539 -21.082,2.0313 -38.33202,4.9297 -38.33202,6.4493 0,7.6406 -7.60937,1.1523 -13.01953,-11.0977 -23.05078,-52.1719 2.92187,-130.7226 50.54295,-152.8516 18.8594,-8.7617 33.6602,-7.8398 51.0469,3.1915 24.3633,15.4375 35.1211,39.8789 41.832,95.0078 1.8594,15.25 5.6211,34.3398 8.3477,42.4218 6.3515,18.75 24.8828,44.0586 38.3711,52.3907 17.582,10.8593 24.1211,11.1484 38.332,1.75 25.8477,-17.1016 42.2969,-49.3321 48.6172,-95.2032 4.793,-34.75 11.6328,-54.1992 25.4297,-72.2773 l 11.5508,-15.1211 -8.3985,-7.2187 c -16.9101,-14.543 -1.1601,-14.9415 32.7305,-0.8399 41.1484,17.1367 59.3906,41.7969 68.1992,92.2383 5.211,29.7891 1.8594,69.6601 -7.3594,87.4609 -5.0312,9.7383 -5.6992,10.0782 -8.1914,4.0977 -1.5,-3.5664 -5.6211,-13.4492 -9.1601,-21.9375 l -6.4297,-15.4414 -15.6406,6.9219 c -15.9883,7.0781 -45.8203,9.75 -58.1602,5.1992 -5.75,-2.1094 -7.2187,-0.4492 -11.0703,12.5898 -6.1602,20.8711 -22.0469,40.7305 -39.418,49.2578 -16.5,8.1016 -42.4023,11.6602 -57.0703,7.8438 z m 158.2383,-113.9922 c 23.1133,-16.668 24.582,-48.5195 3.2227,-69.8906 -16.211,-16.1993 -26.4297,-16.2188 -41.6524,-0.09 -19.6992,20.8906 -26.3789,49.5 -15.2578,65.3711 9.8594,14.0899 37.2891,16.4414 53.6875,4.6094 z m -255.8789,1.1797 c 8.5508,-3.5781 13.1406,-8.6094 18.1406,-19.9102 7.4688,-16.8789 6.4805,-30.4375 -3.6601,-50.1992 -17.2813,-33.6992 -45.5586,-37.0781 -64.9688,-7.7812 -17.1211,25.8515 -16.2812,46.3203 2.6484,64.4531 7.1993,6.8984 26.3399,16.6562 35.4688,18.0781 0.5,0.078 6.0703,-2.0117 12.3711,-4.6406 z m -385.56251,-65.1289 c -22.03125,-5 -47.78907,-17.0391 -69.1836,-32.3399 -17.65234,-12.6211 -45.46875,-49.0195 -60.24609,-78.832 -17.97656,-36.2695 -17.69922,-41.1367 0.93359,-16.3086 48.14453,64.1406 95.76953,97.1406 167.28125,115.8906 18.02735,4.7188 27.52735,8.6602 25.58594,10.5977 -5.19141,5.1914 -43.3125,5.7812 -64.37109,0.9922 z m 926.86331,-3.4024 c -37.211,-8.0976 -88.6914,-33.207 -105.9492,-51.6797 -5.2305,-5.5976 -8.9727,-10.707 -8.3204,-11.3593 0.6485,-0.6485 14.1602,3.2226 30.0196,8.6015 66.8593,22.6602 132.289,27.9805 175.6679,14.3086 41.6016,-13.1094 92.711,-47.6289 120.6914,-81.5078 13.4493,-16.2812 15.8204,-12.6211 5.3204,8.1797 -44.0704,87.3086 -130.4805,132.3984 -217.4297,113.457 z m -395.0196,-32.7187 c 5.2696,-20.5313 8.2383,-114.668 4.8399,-153.7305 -3.6719,-42.0898 -2.0195,-105.2695 2.9805,-114.1992 1.8085,-3.2383 6.1484,5.9609 13.5703,28.8086 6,18.4609 13.3398,39.3203 16.3203,46.3633 l 5.4062,12.789 7.3711,-11.9218 c 18.8906,-30.5586 127.1602,-124.4883 232.0313,-201.2969 167.7578,-122.8633 214.2695,-150.0508 256.6797,-150.0508 22.6914,0 33.6992,9.3789 33.6992,28.7187 0,17.2813 -12.3008,33.4102 -44.0508,57.7383 -14.0469,10.7735 -30.8086,24.4922 -37.2383,30.5117 -11.1289,10.3907 -11.1914,10.6016 -1.5,4.1407 24.6914,-16.4297 93.0586,-49.3321 102.5078,-49.3321 15.8516,0 10.9922,9.3829 -11.5781,22.3516 -124.8906,71.7813 -165.8711,100.8984 -235.0508,167.0313 -24.0976,23.039 -53.5586,48.8398 -65.4687,57.3398 l -21.6524,15.4492 14.25,4.1992 c 26.711,7.8907 61.711,11.8789 88.2305,10.0586 67.9727,-4.6562 113.3828,-51.289 135.0117,-138.6562 4.1602,-16.7813 9.3086,-32.6133 11.4414,-35.1914 3.9492,-4.7617 35.1172,-15.5117 56.7188,-19.5586 l 11.8984,-2.2305 -1.9375,35.457 c -4.4805,82.4414 -14.3398,131.7618 -34.8125,174.1329 -45.7305,94.6601 -168.3984,138.3593 -277.6992,98.9296 -42.5,-15.332 -90.9688,-54.0898 -113.1797,-90.5312 -6.9883,-11.4688 -8.1602,-12.1914 -11.2617,-6.8984 -26.3164,44.8281 -66.0664,65.5468 -101.8985,53.1093 l -13.5898,-4.7304 0.4883,42.7617 c 0.5312,46.457 -4.6875,72.5078 -17.4883,87.2265 -6,6.9024 -6.5391,7.0313 -5.0391,1.211 z M 1629.5,2047.7383 c 14.4297,-5.1289 33.1094,-13.3399 41.5,-18.2578 19.5117,-11.4414 51.1602,-40.8086 59.2109,-54.9492 5.2696,-9.2696 4.0977,-8.5625 -7.6992,4.6484 -16.4023,18.3789 -46.2109,40.1406 -73.5703,53.7305 -26.3828,13.1093 -37.6016,16.4609 -73.6719,22.0312 l -30.7304,4.7383 29.3593,-1.3086 c 21.461,-0.9609 36.4297,-3.8203 55.6016,-10.6328 z m -896.38281,28.293 c -45.44141,-11.1719 -85.6875,-31.5196 -118.67969,-60 -33.39453,-28.8399 -64.13672,-85.75 -77.66016,-143.793 -6.39843,-27.457 -18.75781,-103.457 -17.09375,-105.1172 2.60938,-2.6094 49.9961,10 59.69532,15.8789 10.66015,6.4688 11.28515,7.7695 28.79296,59.8711 11.84766,35.2695 24.22657,56.1289 44.92188,75.6992 45.03516,42.5899 113.66797,55.7695 180.57031,34.6797 l 17.51953,-5.5195 -16.6914,-9.1289 c -21.45313,-11.7305 -38.53125,-25.7618 -82.77735,-68.0118 -59.21875,-56.5585 -87.95703,-76.1406 -191.6914,-130.6289 -31.85157,-16.7421 -57.91407,-31.6601 -57.91407,-33.1718 0,-1.5078 3.64454,-4.1289 8.10157,-5.8203 11.37109,-4.3282 33.42968,3.3007 85.69922,29.621 23.77734,11.9688 43.23046,21.25 43.23046,20.6094 0,-0.6406 -20.92187,-14.9297 -46.49218,-31.75 -48.83594,-32.1406 -58.57422,-40.5195 -64.14063,-55.2109 -4.17578,-11.0195 -0.77344,-20.8164 11.04688,-31.8086 7.96093,-7.3984 11.40625,-8.1602 37.05078,-8.1602 27.66797,0 29.08984,0.4024 65.80078,18.211 41.65234,20.2109 87.77734,48.4101 182.71094,111.7109 117.4414,78.3203 193.72261,143.1367 237.75391,202.0391 6.3594,8.5078 12.6484,14.3789 13.9687,13.0508 1.3204,-1.3399 7.4805,-17.5821 13.6915,-36.0899 6.1992,-18.5195 12,-34.3906 12.8789,-35.2695 3.8593,-3.8633 5.5898,45.0976 2.3711,67.2969 -5.6602,39.121 -25.5508,61.9609 -53.961,61.9804 -18.6719,0.02 -33.9609,-9.3906 -48.2305,-29.6679 -6.81636,-9.6915 -13.42183,-17.8516 -14.67964,-18.1329 -1.26172,-0.2773 -9.63282,8.0899 -18.60547,18.6016 -29.4961,34.5313 -90.2461,70.5 -135.14844,80.0195 -29.51172,6.2618 -71.875,5.4297 -102.03906,-1.9882 z m 101.98047,-32.9024 c 23.76562,-5.9805 58.53515,-20.0781 58.53515,-23.75 0,-0.6484 -8.82031,2.3711 -19.60156,6.7305 -10.78125,4.3515 -30.85156,10.789 -44.59766,14.3008 -23.10937,5.9101 -32.80468,9.6406 -25.05859,9.6406 1.75,0 15.57812,-3.1094 30.72266,-6.9219 z M 1060.0313,1744.5508 C 999.94531,1685.6406 863.01172,1611.5586 626.08984,1509.7891 l -17.9414,-7.711 13.50781,-0.078 c 43.24219,-0.25 165.47266,47.5 279.54297,109.1914 76.83984,41.5586 139.81248,86.8477 164.99218,118.668 9.5899,12.1211 21.4492,36.6914 17.3281,35.9101 -1.2578,-0.2382 -11.8281,-9.789 -23.4882,-21.2187 z m 159.9375,-3.2813 c 0.2109,-35.8906 25.6015,-61.6797 92.8007,-94.2382 138.8203,-67.25 229.6524,-108.0704 272.2188,-122.3321 34.3125,-11.5 46.6328,-12.7187 28.0117,-2.789 -7.1406,3.8203 -33.5508,18.7695 -58.6797,33.2187 -65.8789,37.9024 -101.832,57.1094 -182.6992,97.6406 -84.543,42.3516 -116.9023,62.3594 -136.9922,84.6993 l -14.7305,16.3906 z m -37.5899,-133.4297 -9.7891,-4.4804 14.9102,-0.1485 c 32.9805,-0.3203 66.8398,-17.4101 106.6289,-53.8125 23.25,-21.2773 27.6211,-17.4101 9,7.9532 -31.1601,42.4375 -87.168,65.8672 -120.75,50.4882 z M 1124.4219,1479 c -18.8633,-4.75 -60.6602,-27.5703 -57.0821,-31.1484 0.6407,-0.6407 10.629,2.707 22.211,7.4375 29.9609,12.2304 72.0078,12.0625 109.1406,-0.461 14.3594,-4.8281 29.5391,-11.0195 33.7305,-13.7383 10.957,-7.1015 12.9375,-2.5507 4.9297,11.3086 -11.1602,19.293 -30.8399,27.4922 -68.961,28.6914 -17.4297,0.5508 -37.2187,-0.3906 -43.9687,-2.0898 z M 432.74609,1028.1016 c 1.48047,-42.71098 8.55469,-119.91019 14.42578,-157.51176 l 4.07813,-26.10156 2.34766,14.69141 c 4.03906,25.23047 3.04296,77.64843 -2.16407,113.76953 -6.52734,45.28128 -14.57812,86.23048 -17.57812,89.41018 -1.3125,1.3906 -1.8125,-14.0196 -1.11328,-34.2578 z m 22.1211,8.8867 c 19.54687,-57.41018 40.63672,-145.94924 56.73437,-238.16799 7.20703,-41.28125 14.07813,-79.85156 15.27735,-85.71875 4.67578,-22.9414 7.85937,-12.38281 7.85937,26.07813 0,91 -20.74219,193.60937 -52.28906,258.66015 -12.03516,24.80856 -32.67578,54.10936 -27.58203,39.14846 z m 685.09371,-71.77736 c -16.6601,-35.24219 -45.4726,-111.69922 -60.8515,-161.5 -19.3594,-62.65235 -88.47659,-329.74219 -85.9844,-332.23047 2.48828,-2.49219 23.8164,47.35937 39.3047,91.84765 21.5703,61.96094 46.4805,146.8125 74.8789,255.0625 13.6523,52.03907 30.7227,111.9375 37.9297,133.09766 7.2109,21.17188 12.4531,40.26172 11.6406,42.42188 -0.8203,2.16015 -8.4297,-10.75 -16.918,-28.69922 z M 593.96875,876.30859 c -8.24609,-15.77734 -17.69922,-78.3789 -10.6875,-70.80859 2.85156,3.07812 19.97266,65.41016 19.97266,72.69922 0,5.76953 -5.90235,4.57031 -9.28516,-1.89063 z m 394.95312,-11.4375 c -9.93359,-11.96093 -25.72656,-69.1914 -20.0664,-72.6914 2.60937,-1.6211 10.59375,17.80078 20.83594,50.67968 3.07421,9.8711 6.16406,19.78125 6.86718,22.01954 1.64844,5.28125 -3.26172,5.26953 -7.63672,0 z M 701.69922,804.51953 C 687.97656,768.75 684.83203,755.64062 685.04687,735.19141 c 0.14844,-14.28125 0.79688,-16.42188 3.1875,-10.46094 2.51954,6.26953 19.28907,73.1289 24.51563,97.73828 3.04687,14.35156 -1.49219,6.98047 -11.05078,-17.94922 z m 833.41018,10.10156 c -1.0781,-6.90234 -4.9805,-47.05078 -8.668,-89.21093 -7.0117,-80.14063 -14.6914,-136.42969 -27.0312,-198.21875 -4.0391,-20.17969 -6.4805,-36.70313 -5.4297,-36.70313 3.8281,0 26.2812,57.90234 34.1601,88.08984 20.3477,77.92188 28.1992,172.8711 18.4883,223.35157 -4.7187,24.4414 -8.9687,29.1289 -11.5195,12.6914 z m -74.8906,-54.14062 c -1.0274,-7.62891 -2.6485,-25.60938 -3.6094,-39.96875 l -1.75,-26.10156 5.3906,11.41796 c 6.2188,13.19141 10.3594,68.51172 5.1211,68.51172 -1.8125,0 -4.1328,-6.23047 -5.1523,-13.85937 z m 254.5195,-97.87891 c -1.8594,-35.38281 -7.5195,-76.32031 -18.3594,-132.58203 -4.6875,-24.34766 -4.2891,-26.26953 3.1406,-15.05859 7.6211,11.5 20.8516,50.78906 26.1524,77.64843 7.039,35.64063 2.707,109.96094 -6.4024,109.96094 -1.3398,0 -3.3789,-17.99219 -4.5312,-39.96875 z m -38.0586,-36.71094 c 0,-33.67187 0.8086,-41.26953 4.0703,-38.01171 2.75,2.74218 4.0781,15.21093 4.0781,38.01171 0,22.78907 -1.3281,35.26954 -4.0781,38.00782 -3.2617,3.26172 -4.0703,-4.32813 -4.0703,-38.00782 z M 417.36719,1744.5586 c -14.4336,-199.7891 -75.11328,-338.3398 -190.38672,-434.668 -39.04688,-32.6406 -130.617189,-91.7304 -135.132814,-87.2187 -1.113281,1.1172 2.4375,6.7695 7.886719,12.5781 28.312495,30.1602 113.593745,153.4102 160.898435,232.5 49.9375,83.5195 125.22656,236.8789 148.55078,302.6211 4.95313,13.9492 9.60938,24.7695 10.34375,24.0273 0.73828,-0.7265 -0.23437,-23.1601 -2.16015,-49.8398 z m 1481.08201,10.2227 c 24.5899,-73 102.6211,-221.3321 167.3594,-318.1094 46.8203,-69.9922 93.2305,-129.211 136.9805,-174.7735 26.1914,-27.2773 31.7812,-35.8086 16.3125,-24.8984 -4.9414,3.4883 -16.6016,10.1797 -25.9219,14.8711 -29.8399,15.0391 -102.8594,66.0195 -132.3008,92.3789 -77.0976,69.0391 -139.5898,174.3906 -166.0898,280.0195 -5.0703,20.1719 -6.9493,41.3203 -8.2891,92.9922 -1.0586,40.6797 -0.5586,65.6094 1.2617,63.6172 1.6485,-1.7891 6.4571,-13.5391 10.6875,-26.0976 z m 0,0"\r
     id="path1"\r
     inkscape:highlight-color="#aaaaaa"\r
     style="fill:#ffffff;fill-opacity:1" />\r
</svg>\r
`,I4="#87CEFA",L4="#FF0000";function j0(r){const e=r.match(/viewBox\s*=\s*"([^"]+)"/i),t=r.match(/<path[^>]*\sd="([^"]+)"[^>]*>/i);if(!e||!t)throw new Error("Cannot parse SVG path/viewBox from source.");const s=t[0].match(/transform="([^"]+)"/i);return{d:t[1],transform:s?s[1]:void 0,viewBox:e[1]}}const F4=j0(M4),z4=j0(R4);function B4(r){return r==="player"?I4:L4}function j4(r){const e=r==="player"?F4:z4,t=B4(r),s=e.transform?` transform="${e.transform}"`:"";return[`<svg viewBox="${e.viewBox}" xmlns="http://www.w3.org/2000/svg" style="background:none">`,"<g>",`<path d="${e.d}"${s} fill="${t}" />`,"</g>","</svg>"].join("")}function Wc(r){const e=j4(r);return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}const D0="token-player-svg",O0="token-enemy-svg";async function D4(){const r=[{alias:D0,src:Wc("player")},{alias:O0,src:Wc("enemy")}];for(const e of r)Wi.add(e);await Wi.load(r.map(e=>e.alias))}function O4(r){const e=ye.useRef(null),t=ye.useRef(null),s=ye.useRef(null),o=ye.useRef(null);return ye.useEffect(()=>{if(!r.enabled||!r.containerRef.current||e.current)return;const l=new u0;e.current=l;let u=!1,c=null,d=!1;return(async()=>{if(await l.init({width:qa,height:kc,background:Tg,antialias:!0}),d=!0,await D4(),u)return;const m=r.containerRef.current;if(!m)return;m.appendChild(l.canvas);const y=new sn;l.stage.addChild(y);const x=new ai;y.addChild(x),(()=>{x.clear();for(let A=0;A<Wn;A++)for(let P=0;P<sr;P++){if(!Zi(P,A))continue;const E=gn(P,A),G=lt,$=lt*.5,O=[E.x,E.y-$/2,E.x+G/2,E.y,E.x,E.y+$/2,E.x-G/2,E.y],X=(P+A)%2===0;x.poly(O).fill({color:X?1381666:1908016,alpha:1})}})();const S=new ai;y.addChild(S),s.current=S;const b=new sn;y.addChild(b),t.current=b;const w=new sn;y.addChild(w),o.current=w;const C=()=>{const A=l.canvas,P=A.parentElement;if(!P)return;const E=Math.min(P.clientWidth/qa,P.clientHeight/kc);A.style.transformOrigin="top left",A.style.transform=`scale(${E})`};c=C,C(),window.addEventListener("resize",C)})(),()=>{u=!0,c&&window.removeEventListener("resize",c),d&&e.current&&e.current.destroy(!0),e.current=null,t.current=null,s.current=null,o.current=null}},[r.enabled,r.containerRef]),{appRef:e,tokenLayerRef:t,pathLayerRef:s,speechLayerRef:o}}function $4(r){ye.useEffect(()=>{const e=r.pathLayerRef.current;if(!e)return;e.clear();const t=r.effectSpecs.map(l=>{switch(l.kind){case"circle":return ap(l.id,r.player.x,r.player.y,l.radius??1);case"rectangle":return Mg(l.id,r.player.x,r.player.y,l.width??1,l.height??1);case"cone":return lp(l.id,r.player.x,r.player.y,l.range??1,l.direction??"right");default:return{id:l.id,type:"circle",cells:[]}}});for(const l of t)for(const u of l.cells){const c=gn(u.x,u.y),d=lt,p=lt*.5,m=[c.x,c.y-p/2,c.x+d/2,c.y,c.x,c.y+p/2,c.x-d/2,c.y],y=l.type==="circle"?3447003:l.type==="rectangle"?3066993:15158332;e.poly(m).fill({color:y,alpha:.45})}if(r.showVisionDebug){const l=[r.player,...r.enemies];for(const u of l){const c=up(u);for(const d of c.cells){const p=gn(d.x,d.y),m=lt,y=lt*.5,x=[p.x,p.y-y/2,p.x+m/2,p.y,p.x,p.y+y/2,p.x-m/2,p.y],v=u.type==="player"?2719929:12597547;e.poly(x).fill({color:v,alpha:u.type==="player"?.25:.2})}}}const s=[r.player,...r.enemies];for(const l of s){const u=gn(l.x,l.y),c=lt,d=lt*.5,p=[u.x,u.y-d/2,u.x+c/2,u.y,u.x,u.y+d/2,u.x-c/2,u.y],m=l.type==="player"?3066993:15158332;e.poly(p).fill({color:m,alpha:.2})}if(r.selectedTargetId){const l=r.enemies.find(u=>u.id===r.selectedTargetId);if(l){const u=gn(l.x,l.y),c=lt,d=lt*.5,p=[u.x,u.y-d/2,u.x+c/2,u.y,u.x,u.y+d/2,u.x-c/2,u.y];e.poly(p).fill({color:3447003,alpha:.6})}}if(r.selectedPath.length>0){const l=r.selectedPath[r.selectedPath.length-1],u=gn(l.x,l.y),c=lt,d=lt*.5,p=[u.x,u.y-d/2,u.x+c/2,u.y,u.x,u.y+d/2,u.x-c/2,u.y];e.poly(p).fill({color:15844367,alpha:.2})}for(const l of r.enemies){if(!l.plannedPath||l.plannedPath.length===0)continue;const u=l.plannedPath,c=u[0],d=gn(c.x,c.y);e.setStrokeStyle({width:3,color:15158332,alpha:.9}),e.moveTo(d.x,d.y);for(const p of u.slice(1)){const m=gn(p.x,p.y);e.lineTo(m.x,m.y)}e.stroke()}if(r.selectedPath.length===0)return;e.setStrokeStyle({width:6,color:15844367,alpha:1});const o=gn(r.player.x,r.player.y);e.moveTo(o.x,o.y);for(const l of r.selectedPath){const u=gn(l.x,l.y);e.lineTo(u.x,u.y)}e.stroke()},[r.pathLayerRef,r.player,r.enemies,r.selectedPath,r.effectSpecs,r.selectedTargetId,r.showVisionDebug])}function N4(r){ye.useEffect(()=>{const e=r.speechLayerRef.current;if(!e)return;e.removeChildren();const t=[r.player,...r.enemies],s=new Map(r.speechBubbles.map(p=>[p.tokenId,p])),o=6,l=140,u=lt*1,c=[];for(const p of t){if(p.type!=="enemy"||$t(p))continue;const m=s.get(p.id);if(!m||!m.text.trim())continue;const y=gn(p.x,p.y),x=new sn,v=new ai;v.beginFill(16777215,.92);const S=new E4(m.text,{fontFamily:"Arial",fontSize:11,fill:0,align:"center",wordWrap:!0,wordWrapWidth:l-10}),b=Math.min(l,S.width+10),w=S.height+8;v.drawRoundedRect(-b/2,-w,b,w,7),v.endFill(),S.x=-S.width/2,S.y=-w+4,x.addChild(v),x.addChild(S);const C=y.x+lt*.05,A=y.y-u;x.x=C,x.y=A,e.addChild(x),c.push({x:C-b/2,y:A-w,width:b,height:w,view:x})}c.sort((p,m)=>p.y-m.y);const d=[];for(const p of c){let m=p.y,y=0;const x=(S,b,w)=>{const C=S.x,A=S.y,P=S.x+S.width,E=S.y+S.height,G=b,$=w,O=b+p.width,X=w+p.height;return C<O&&P>G&&A<X&&E>$};for(;y<20;){const S=d.find(b=>x(b,p.x,m));if(!S)break;m=S.y-p.height-o,y+=1}const v=m-p.y;v!==0&&(p.view.y+=v,p.y=m),d.push(p)}},[r.speechLayerRef,r.player,r.enemies,r.speechBubbles])}function U4(r){ye.useEffect(()=>{const e=r.tokenLayerRef.current;if(!e)return;e.removeChildren();const t=[r.player,...r.enemies];for(const s of t){const o=new sn;if(!$t(s)){const d=new ai;d.beginFill(0,.4),d.drawEllipse(0,0,lt*.4,lt*.15),d.endFill(),o.addChild(d)}const l=s.type==="player"?D0:O0,u=Ki.from(l);u.anchor.set(.5,1),u.width=lt*.9,u.height=lt*.9,$t(s)?(u.rotation=Math.PI/2,u.alpha=.7):(u.rotation=0,u.alpha=1),o.addChild(u);const c=gn(s.x,s.y);o.x=c.x+lt*.05,o.y=c.y,e.addChild(o)}},[r.tokenLayerRef,r.player,r.enemies])}function G4(r){return L.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:16,boxSizing:"border-box"},children:[L.jsx("h1",{style:{marginBottom:8},children:"Prparation du combat"}),L.jsx("p",{style:{marginBottom:16,fontSize:13,maxWidth:480,textAlign:"center"},children:"Configurez le combat avant de lancer la grille : nombre d'ennemis, puis dmarrez pour effectuer les jets d'initiative et entrer en mode tour par tour."}),L.jsxs("div",{style:{padding:16,borderRadius:8,background:"#141421",border:"1px solid #333",minWidth:260,display:"flex",flexDirection:"column",gap:12},children:[L.jsxs("label",{style:{fontSize:13},children:["Nombre d'ennemis :",L.jsx("input",{type:"number",min:1,max:8,value:r.configEnemyCount,onChange:e=>r.onChangeEnemyCount(Math.max(1,Math.min(8,Number(e.target.value)||1))),style:{marginLeft:8,width:60,background:"#0f0f19",color:"#f5f5f5",border:"1px solid #333",borderRadius:4,padding:"2px 4px"}})]}),L.jsxs("p",{style:{fontSize:11,color:"#b0b8c4",margin:0},children:["Taille de la carte : actuellement fixe (",r.gridCols," x ",r.gridRows,"). Un redimensionnement dynamique demandera une refonte de boardConfig.ts."]}),L.jsx("button",{type:"button",onClick:()=>{if(r.enemyTypeCount===0){r.onNoEnemyTypes();return}r.onStartCombat()},style:{marginTop:8,padding:"6px 12px",background:"#2ecc71",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontWeight:600,fontSize:13},children:"Lancer le combat"})]})]})}function W4(r){return L.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333"},children:[L.jsx("h2",{style:{margin:"0 0 8px"},children:"tat du combat"}),L.jsxs("div",{children:[L.jsx("strong",{children:"Round :"})," ",r.round," | ",L.jsx("strong",{children:"Phase :"})," ",r.phase==="player"?"Joueur":"Ennemis"]}),L.jsxs("div",{style:{fontSize:12,marginTop:4},children:[L.jsx("strong",{children:"Initiative PJ :"})," ",r.playerInitiative??"en cours..."]}),L.jsxs("div",{children:[L.jsx("strong",{children:"Nom :"})," ",r.sampleCharacter.nom.nomcomplet]}),L.jsxs("div",{children:[L.jsx("strong",{children:"Niveau :"})," ",r.sampleCharacter.niveauGlobal," |"," ",L.jsx("strong",{children:"Classe :"})," ",r.sampleCharacter.classe[1].classeId]}),L.jsxs("div",{children:[L.jsx("strong",{children:"PV :"})," ",r.player.hp," / ",r.player.maxHp]}),L.jsxs("div",{children:[L.jsx("strong",{children:"CA :"})," ",r.sampleCharacter.CA]}),L.jsxs("div",{style:{marginTop:8},children:[L.jsx("strong",{children:"Caracs :"})," FOR ",r.sampleCharacter.caracs.force.FOR," | DEX"," ",r.sampleCharacter.caracs.dexterite.DEX," | CON"," ",r.sampleCharacter.caracs.constitution.CON]}),L.jsxs("div",{style:{marginTop:8,fontSize:12},children:[L.jsx("strong",{children:"Trajectoire :"})," ",r.selectedPath.length===0?"aucune":`(${r.player.x}, ${r.player.y}) -> `+r.selectedPath.map(e=>`(${e.x}, ${e.y})`).join(" -> ")]}),L.jsxs("div",{style:{marginTop:8,fontSize:11,opacity:.85},children:[L.jsx("strong",{children:"IA ennemis (debug) :"}),L.jsxs("div",{children:["Dernier appel :"," ",r.aiLastState?`round ${r.aiLastState.round}, phase ${r.aiLastState.phase}`:"aucun"]}),L.jsxs("div",{children:["Dcisions reues :"," ",r.aiLastDecisions===null?"n/a":`${r.aiLastDecisions.length} (fallback: ${r.aiUsedFallback?"oui":"non"})`]}),r.aiLastError&&L.jsxs("div",{children:["Erreur : ",r.aiLastError]})]})]})}function H4(r){const{enemies:e,player:t,validatedAction:s}=r;return L.jsxs("section",{style:{padding:"8px 12px",background:"#151524",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[L.jsx("h2",{style:{margin:"0 0 4px"},children:"Ennemis"}),L.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Chaque ennemi est une entit propre. Capacits IA : dplacement, attaque au contact, attente si aucune option."}),L.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:e.map(o=>{var l;return L.jsxs("div",{style:{background:"#0f0f19",border:"1px solid #2a2a3a",borderRadius:8,padding:"8px 10px",display:"flex",flexDirection:"column",gap:6},children:[L.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[L.jsx("strong",{style:{color:"#f5f5f5"},children:o.id}),L.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["(",o.x,",",o.y,") | PV ",o.hp," / ",o.maxHp," ",o.aiRole?`(role: ${o.aiRole})`:""]})]}),L.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:r.capabilities.map(u=>L.jsx("span",{style:{background:u.color,color:"#0b0b12",borderRadius:4,padding:"2px 6px",fontSize:11,fontWeight:700},children:u.action.toUpperCase()},`${o.id}-${u.action}`))}),L.jsxs("div",{style:{fontSize:12,color:"#d0d6e0"},children:["Ce qu'il peut faire : ",r.capabilities.map(u=>u.label).join(" | ")]}),s&&((l=s.targeting)==null?void 0:l.target)==="enemy"&&(()=>{const u=r.validateEnemyTargetForAction(s,o,t,[t,...e]),c=u.ok,d=r.selectedTargetId===o.id;return L.jsx("button",{type:"button",onClick:()=>{if(!c){r.onLog(u.reason||`Cible ${o.id} invalide pour ${s.name}.`);return}r.onSelectTargetId(o.id),r.onSetTargetMode("none"),r.onLog(`Cible selectionnee: ${o.id}.`)},disabled:!c,style:{marginTop:6,alignSelf:"flex-start",padding:"4px 8px",fontSize:11,borderRadius:4,border:"none",cursor:c?"pointer":"default",background:c?"#3498db":"#555",color:"#fff",opacity:d?1:.9},children:d?"Cible actuelle":"Cibler avec l'action valide"})})(),L.jsxs("div",{style:{fontSize:12,color:"#9cb2ff"},children:["Dernire dcision IA : ",r.describeEnemyLastDecision(o.id)]})]},o.id)})})]})}function V4(r){return L.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:L.jsxs("div",{style:{background:"#141421",borderRadius:12,border:"1px solid #f1c40f",padding:"24px 32px",maxWidth:360,textAlign:"center",boxShadow:"0 0 24px rgba(0,0,0,0.6)"},children:[L.jsx("h2",{style:{margin:"0 0 8px"},children:"Game Over"}),L.jsx("p",{style:{fontSize:13,margin:"0 0 16px"},children:"Le hros est tomb et aucun alli n'est en mesure de continuer."}),L.jsx("button",{type:"button",onClick:r.onRestart,style:{padding:"6px 12px",background:"#e67e22",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:600},children:"Recommencer le combat"})]})})}function Y4(r){return L.jsxs("div",{style:{marginBottom:8,padding:"6px 10px",background:"#111322",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%"},children:[L.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[L.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["Ordre d'initiative (round ",r.round,")"]}),r.activeEntry&&L.jsxs("span",{style:{fontSize:11,color:"#f1c40f"},children:["Tour actuel :"," ",r.activeEntry.kind==="player"?"Joueur":r.activeEntry.id]})]}),L.jsx("div",{style:{display:"flex",gap:8,alignItems:"center",overflowX:"auto",paddingBottom:2},children:r.timelineEntries.map(e=>{const t=r.activeEntry&&e.id===r.activeEntry.id&&e.kind===r.activeEntry.kind,s=e.kind==="player",o=Wc(s?"player":"enemy"),l=e.kind==="player"?r.player:r.enemies.find(d=>d.id===e.id)||null,u=l?$t(l):!1,c=s?{svg:o,label:"PJ"}:{svg:o,label:e.id};return L.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:4,borderRadius:6,border:t?"2px solid #f1c40f":"1px solid #333",background:u?"#111118":t?"#1b1b30":"#101020",minWidth:48},children:[L.jsx("img",{src:c.svg,alt:c.label,style:{width:32,height:32,objectFit:"contain",filter:u?"grayscale(1)":s?"none":"grayscale(0.2)"}}),L.jsx("span",{style:{fontSize:10,marginTop:2,color:u?"#777a8a":"#d0d6e0",whiteSpace:"nowrap",textDecoration:u?"line-through":"none"},children:c.label}),L.jsxs("span",{style:{fontSize:9,color:"#9aa0b5"},children:["Init ",e.initiative]})]},`${e.kind}-${e.id}`)})})]})}function X4(r){return L.jsxs("div",{style:{marginBottom:8,padding:"6px 10px",background:"#111322",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%"},children:[L.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[L.jsx("span",{style:{fontSize:12,color:"#b0b8c4"},children:"Narration du tour"}),L.jsxs("span",{style:{fontSize:11,color:"#9aa0b5"},children:["Round ",r.round]})]}),L.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2,maxHeight:80,overflowY:"auto"},children:[r.narrativeLog.length===0&&L.jsx("span",{style:{fontSize:11,color:"#7f8694"},children:"En attente d'actions pour raconter le tour..."}),r.narrativeLog.slice(0,6).map((e,t)=>L.jsxs("span",{style:{fontSize:11,color:"#e0e4ff"},children:["- ",e]},t))]})]})}function q4(r){var s,o,l,u;const e=r.selectedAction,t=r.selectedAvailability;return L.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[L.jsx("h2",{style:{margin:"0 0 4px"},children:"Actions dtailles"}),L.jsxs("p",{style:{margin:0,fontSize:12,opacity:.85},children:["Source: ",L.jsx("code",{children:"action-game/actions/index.json"}),". Liste charge et vrifie localement (phase, distance)."]}),L.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[L.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:[r.actions.map(c=>{const d=r.computeActionAvailability(c),p=(e==null?void 0:e.id)===c.id,m=c.actionCost.actionType==="action"?"#8e44ad":c.actionCost.actionType==="bonus"?"#27ae60":c.actionCost.actionType==="reaction"?"#e67e22":"#2980b9",y=p?"#6c5ce7":"#2a2a3a";return L.jsxs("button",{type:"button",onClick:()=>r.onSelectActionId(c.id),style:{textAlign:"left",background:p?"#1e1e2f":"#0f0f19",color:"#f5f5f5",border:`1px solid ${y}`,borderRadius:6,padding:"8px 10px",cursor:"pointer"},children:[L.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,marginBottom:4,alignItems:"center"},children:[L.jsx("span",{style:{fontWeight:600},children:c.name}),L.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:m,color:"#fff"},children:c.actionCost.actionType})]}),L.jsx("div",{style:{fontSize:12,opacity:.9},children:c.summary||c.category}),L.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:4,fontSize:11,alignItems:"center"},children:[L.jsx("span",{style:{color:d.enabled?"#2ecc71":"#e74c3c"},children:d.enabled?"Disponible":d.reasons[0]||"Bloque"}),L.jsx("span",{style:{color:"#9aa0b5"},children:r.describeRange(c.targeting)}),L.jsx("span",{style:{color:"#9aa0b5"},children:r.describeUsage(c.usage)})]})]},c.id)}),r.actions.length===0&&L.jsx("div",{style:{fontSize:12,opacity:.8},children:"Aucune action charge pour le moment."})]}),e&&L.jsxs("div",{style:{borderTop:"1px solid #2a2a3a",paddingTop:8,display:"flex",flexDirection:"column",gap:6},children:[L.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",fontSize:11},children:[L.jsx("span",{style:{background:"#2d2d40",color:"#d0d4f7",padding:"2px 6px",borderRadius:4},children:e.category}),(s=e.tags)==null?void 0:s.slice(0,4).map(c=>L.jsx("span",{style:{background:"#1f2a38",color:"#9bb0d6",padding:"2px 6px",borderRadius:4},children:c},c))]}),L.jsx("div",{style:{fontSize:12},children:e.summary||"Pas de rsum."}),L.jsxs("div",{style:{fontSize:12},children:[L.jsx("strong",{children:"Cot:"})," ",e.actionCost.actionType," | Mouvement"," ",e.actionCost.movementCost]}),L.jsxs("div",{style:{fontSize:12},children:[L.jsx("strong",{children:"Porte:"})," ",r.describeRange(e.targeting)]}),L.jsxs("div",{style:{fontSize:12},children:[L.jsx("strong",{children:"Usage:"})," ",r.describeUsage(e.usage)]}),L.jsxs("div",{style:{fontSize:12},children:[L.jsx("strong",{children:"Conditions:"}),L.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:[e.conditions.length===0&&L.jsx("span",{style:{color:"#9aa0b5"},children:"Aucune condition."}),e.conditions.map((c,d)=>L.jsxs("div",{style:{color:"#cfd3ec"},children:[r.conditionLabel(c),c.reason?` - ${c.reason}`:""]},`${c.type}-${d}`)),t&&L.jsxs("div",{style:{color:t.enabled?"#2ecc71":"#e74c3c"},children:["tat:"," ",t.enabled?"OK pour ce tour":t.reasons.join(" | ")||"Bloqu",t.details.length>0&&L.jsx("div",{style:{color:"#9aa0b5",marginTop:2},children:t.details.join(" / ")})]})]})]}),L.jsxs("div",{style:{fontSize:12},children:[L.jsx("strong",{children:"Effets:"}),L.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:e.effects.map((c,d)=>L.jsx("div",{style:{color:"#cfd3ec"},children:r.effectLabel(c)},`${c.type}-${d}`))})]}),L.jsxs("div",{style:{fontSize:12},children:[L.jsx("strong",{children:"Hints IA:"})," ",((o=e.aiHints)==null?void 0:o.priority)||"n/a",L.jsxs("div",{style:{color:"#9aa0b5"},children:["Success: ",((l=e.aiHints)==null?void 0:l.successLog)||"n/a"]}),L.jsxs("div",{style:{color:"#9aa0b5"},children:["Failure: ",((u=e.aiHints)==null?void 0:u.failureLog)||"n/a"]})]}),L.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[L.jsx("button",{type:"button",onClick:()=>r.onPreviewActionArea(e),style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Prvisualiser"}),L.jsx("button",{type:"button",onClick:()=>r.onValidateAction(e),disabled:!(t!=null&&t.enabled),style:{padding:"4px 8px",background:t!=null&&t.enabled?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:t!=null&&t.enabled?"pointer":"default",fontSize:12},children:"Valider l'action"})]})]})]})]})}function K4(r){var e,t,s,o,l,u;return L.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[L.jsx("h2",{style:{margin:"0 0 4px"},children:"Jets de ds"}),L.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Choisir une action, la valider, puis lancer le jet de touche et/ou de dgts. Mode auto: enchane touche + dgts."}),L.jsxs("div",{style:{fontSize:12},children:["Action valide :"," ",r.validatedAction?`${r.validatedAction.name} (${r.validatedAction.id})`:"aucune (valider une action d'abord)"]}),L.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["normal","advantage","disadvantage"].map(c=>L.jsx("button",{type:"button",onClick:()=>r.onSetAdvantageMode(c),style:{padding:"4px 8px",background:r.advantageMode===c?"#8e44ad":"#2c2c3a",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:c},c))}),L.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[L.jsx("button",{type:"button",onClick:r.onRollAttack,disabled:!((e=r.validatedAction)!=null&&e.attack),style:{padding:"4px 8px",background:(t=r.validatedAction)!=null&&t.attack?"#2980b9":"#555",color:"#fff",border:"none",borderRadius:4,cursor:(s=r.validatedAction)!=null&&s.attack?"pointer":"default",fontSize:12},children:"Lancer jet de touche"}),L.jsx("button",{type:"button",onClick:r.onRollDamage,disabled:!((o=r.validatedAction)!=null&&o.damage),style:{padding:"4px 8px",background:(l=r.validatedAction)!=null&&l.damage?"#27ae60":"#555",color:"#fff",border:"none",borderRadius:4,cursor:(u=r.validatedAction)!=null&&u.damage?"pointer":"default",fontSize:12},children:"Lancer dgts"}),L.jsx("button",{type:"button",onClick:r.onAutoResolve,style:{padding:"4px 8px",background:"#9b59b6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Mode auto (touche + dgts)"})]}),L.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[L.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[L.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de touche"}),r.attackRoll?L.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["d20: ",r.attackRoll.d20.rolls.join(" / "),"  ",r.attackRoll.d20.total," | bonus"," ",r.attackRoll.bonus," | total ",r.attackRoll.total," ",r.attackRoll.isCrit?"(critique)":""]}):L.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lanc."})]}),L.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[L.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de dgts"}),r.damageRoll?L.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["Ds:"," ",r.damageRoll.dice.length?r.damageRoll.dice.map(c=>c.rolls.join("+")).join(" | "):"-"," ","| mod ",r.damageRoll.flatModifier," | total ",r.damageRoll.total," ",r.damageRoll.isCrit?"(critique)":""]}):L.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lanc."})]})]}),L.jsxs("div",{style:{fontSize:12},children:[L.jsx("strong",{children:"Logs des jets:"}),L.jsxs("div",{style:{marginTop:4,display:"flex",flexDirection:"column",gap:2},children:[r.diceLogs.map((c,d)=>L.jsxs("div",{style:{color:"#dfe6ff"},children:["- ",c]},d)),r.diceLogs.length===0&&L.jsx("div",{style:{color:"#9aa0b5"},children:"Aucun jet enregistr."})]})]})]})}function Q4(r){return L.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[L.jsx("h2",{style:{margin:"0 0 4px"},children:"Zones d'effet (demo)"}),L.jsxs("p",{style:{margin:0,fontSize:12},children:["Ces boutons utilisent les helpers de ",L.jsx("code",{children:"boardEffects.ts"})," pour dessiner des zones en coordonnes de grille autour du joueur."]}),L.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:[L.jsx("button",{type:"button",onClick:r.onShowCircle,style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cercle R=2"}),L.jsx("button",{type:"button",onClick:r.onShowRectangle,style:{padding:"4px 8px",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Rectangle 3x3"}),L.jsx("button",{type:"button",onClick:r.onShowCone,style:{padding:"4px 8px",background:"#c0392b",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cne porte 4"}),L.jsx("button",{type:"button",onClick:r.onToggleVisionDebug,style:{padding:"4px 8px",background:r.showVisionDebug?"#f1c40f":"#555",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:r.showVisionDebug?"Masquer vision":"Afficher vision"}),L.jsx("button",{type:"button",onClick:r.onClear,style:{padding:"4px 8px",background:"#7f8c8d",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Effacer zones"})]})]})}function Z4(r){return L.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",flex:"1 1 auto",display:"flex",flexDirection:"column"},children:[L.jsx("h2",{style:{margin:"0 0 8px"},children:"Log"}),L.jsx("div",{style:{flex:"1 1 auto",overflowY:"auto",fontSize:12,lineHeight:1.4},children:r.log.map((e,t)=>L.jsxs("div",{children:["- ",e]},t))})]})}const J4={"./melee-strike.json":I2,"./dash.json":W2,"./second-wind.json":ny,"./throw-dagger.json":gy},e6={"./brute.json":Wg,"./archer.json":Jg,"./assassin.json":l2,"./ghost.json":y2};function t6(){const r=Array.isArray(Of.types)?Of.types:[],e=[];for(const t of r){const s=e6[t];s?e.push(s):console.warn("[enemy-types] Type path missing in bundle:",t)}return e.length===0&&console.warn("[enemy-types] No enemy types loaded from index.json"),e}function n6(r,e,t){const{x:s,y:o}=t,l=e.baseStats;return{id:`enemy-${r+1}`,type:"enemy",enemyTypeId:e.id,enemyTypeLabel:e.label,aiRole:e.aiRole,speechProfile:e.speechProfile??null,moveRange:l.moveRange,attackDamage:l.attackDamage,attackRange:typeof l.attackRange=="number"?l.attackRange:1,maxAttacksPerTurn:typeof l.maxAttacksPerTurn=="number"?l.maxAttacksPerTurn:1,armorClass:l.armorClass,movementProfile:e.movement?e.movement:{type:"ground",speed:e.baseStats.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},facing:"left",visionProfile:e.vision?e.vision:{shape:"cone",range:5},x:s,y:o,hp:l.hp,maxHp:l.hp}}function r6(r){const e=Wn,t=sr,s=Math.floor(r/e),o=r%e;return{x:Math.max(0,t-1-s),y:o}}const i6=[{action:"move",label:"Se deplacer jusqu'a 3 cases (Manhattan)",color:"#2ecc71"},{action:"attack",label:"Attaque le joueur a distance 1 (2 degats)",color:"#e74c3c"},{action:"wait",label:"Attend si aucune action viable",color:"#7f8c8d"}],s6=()=>{const r=ye.useRef(null),e=ye.useRef(!1),[t,s]=ye.useState([]),[o,l]=ye.useState([]),[u,c]=ye.useState([]),[d,p]=ye.useState({id:"player-1",type:"player",x:0,y:Math.floor(Wn/2),facing:"right",visionProfile:{shape:"cone",range:5},hp:Ea.pvActuels,maxHp:Ea.pvMax}),[m,y]=ye.useState([]),[x,v]=ye.useState([]),[S,b]=ye.useState("player"),[w,C]=ye.useState(1),[A,P]=ye.useState(!1),[E,G]=ye.useState(!1),[$,O]=ye.useState(null),[X,ne]=ye.useState([]),[K,Z]=ye.useState(0),[xe,de]=ye.useState(!1),[Ce,ft]=ye.useState(3),{tokenLayerRef:J,pathLayerRef:te,speechLayerRef:Q}=O4({enabled:xe,containerRef:r}),[q,ee]=ye.useState([]),[I,U]=ye.useState(null),[ve,be]=ye.useState(null),[Ae,Pe]=ye.useState("normal"),[Te,Ie]=ye.useState(null),[$e,rt]=ye.useState(null),[Ln,an]=ye.useState([]),[Ut,jt]=ye.useState(!1),[Kt,Fr]=ye.useState({usedAction:!1,usedBonus:!1}),[At,Vn]=ye.useState([]),[mt,Fn]=ye.useState(null),[ur,cr]=ye.useState("none"),[yo,_n]=ye.useState([]),[ns,xo]=ye.useState(!1),[rs,li]=ye.useState(null),[ui,zn]=ye.useState(null),[zr,vo]=ye.useState(null),[is,hr]=ye.useState(!1),[ln,ss]=ye.useState(!1);U4({tokenLayerRef:J,player:d,enemies:x}),N4({speechLayerRef:Q,player:d,enemies:x,speechBubbles:u}),$4({pathLayerRef:te,player:d,enemies:x,selectedPath:At,effectSpecs:yo,selectedTargetId:mt,showVisionDebug:ns});function os(R){if(is)return"Fallback local : poursuite/attaque basique du joueur";if(ui===null)return"IA non appele pour l'instant";const j=ui.find(D=>D.enemyId===R);if(!j)return"Aucune dcision reue pour cet ennemi";if(j.action==="move"){const D=typeof j.targetX=="number"?j.targetX:"?",N=typeof j.targetY=="number"?j.targetY:"?";return`Dplacement vers (${D}, ${N})`}return j.action==="attack"?"Attaque le joueur (distance 1)":"Attend ce tour"}function as(){if(m.length===0){ue("Aucun type d'ennemi charge (enemyTypes). Impossible de generer le combat.");return}const R=[],j=D=>m[D%m.length];for(let D=0;D<Ce;D++)R.push(n6(D,j(D),r6(D)));v(R),C(1),G(!1),ne([]),Z(0),de(!0)}function Br(){if(!E||X.length===0)return null;const R=K>=0&&K<X.length?K:0;return X[R]??null}function ls(){if(!E||X.length===0)return{entry:null,willWrap:!1};const R=(K+1)%X.length;return{entry:X[R]??null,willWrap:R===0}}function Bn(){X.length!==0&&Z(R=>{const j=(R+1)%X.length;return j===0&&C(D=>D+1),j})}function dr(){if(E)return;const R=Ea.caracs.dexterite.modDEX??0,j=()=>Math.floor(Math.random()*20)+1,D=j(),N=D+R,se=[];se.push({id:d.id,kind:"player",initiative:N});const Be=x.map(oe=>{const Ue=j();return se.push({id:oe.id,kind:"enemy",initiative:Ue}),{...oe,initiative:Ue}});O(N),v(Be),se.sort((oe,Fe)=>Fe.initiative-oe.initiative),ne(se),Z(0),G(!0);const we=se[0];we&&(we.kind==="player"?ue(`Initiative: Joueur ${N} (d20=${D}, mod=${R})  le joueur commence.`):ue(`Initiative: Joueur ${N} (d20=${D}, mod=${R})  ${we.id} commence (initiative ${we.initiative}).`))}function ue(R){s(j=>[R,...j].slice(0,12))}function us(R){l(j=>[R,...j].slice(0,20))}function ci(R){an(j=>[R,...j].slice(0,6)),ue(R)}function _o(R,j){const D=(j??"").trim();D&&c(N=>[...N.filter(Be=>Be.tokenId!==R),{tokenId:R,text:D,updatedAtRound:w}])}function wo(R){c(j=>j.filter(D=>D.tokenId!==R))}function hi(R,j,D){const N=[{id:j.id,kind:"player",label:"Heros",aiRole:null,enemyTypeId:null,x:j.x,y:j.y,hp:j.hp,maxHp:j.maxHp},...D.map(se=>({id:se.id,kind:"enemy",label:se.enemyTypeLabel||se.enemyTypeId||se.id,aiRole:se.aiRole??null,enemyTypeId:se.enemyTypeId??null,x:se.x,y:se.y,hp:se.hp,maxHp:se.maxHp}))];return{round:w,phase:R,grid:{cols:sr,rows:Wn},actors:N}}function So(R){return hi(R,d,x)}ye.useEffect(()=>{const R=t6();y(R)},[]),ye.useEffect(()=>{xe&&!E&&x.length>0&&dr()},[xe,E,x.length]),ye.useEffect(()=>{c(R=>R.filter(j=>x.some(D=>D.id===j.tokenId&&D.hp>0)))},[x]),ye.useEffect(()=>{const R=Array.isArray($f.actions)?$f.actions:[],j=[];for(const D of R){const N=J4[D];N?j.push(N):console.warn("[actions] Action path missing in bundle:",D)}j.length===0&&console.warn("[actions] No actions loaded from index.json"),ee(j),U(j.length?j[0].id:null)},[]),ye.useEffect(()=>{if(!xe||!E)return;const R=Br();if(R){if(R.kind==="player"){b("player"),Fr({usedAction:!1,usedBonus:!1}),jt(!1),Ie(null),rt(null),e.current=!1,ky(w,So("player")),nn({round:w,phase:"player",kind:"turn_start",actorId:d.id,actorKind:"player",summary:`Debut du tour du heros (round ${w}).`});return}A||(b("enemies"),fl(R.id))}},[xe,E,X,K,A]);function Yn(){if(x.length===0)return null;let R=null;for(const j of x){const D=Hs(d,j);(R===null||D<R)&&(R=D)}return R}function di(R,j,D,N){if(j.type!=="enemy")return{ok:!1,reason:"La cible selectionnee n'est pas un ennemi."};if(j.hp<=0)return{ok:!1,reason:"La cible est deja a terre."};const se=R.targeting;if(!se||se.target!=="enemy")return{ok:!1,reason:"Cette action ne cible pas un ennemi."};const Be=Hs(D,j),we=se.range;if(we){if(typeof we.min=="number"&&Be<we.min)return{ok:!1,reason:`Cible trop proche pour ${R.name} (distance ${Be}, min ${we.min}).`};if(typeof we.max=="number"&&Be>we.max)return{ok:!1,reason:`Cible hors portee pour ${R.name} (distance ${Be}, max ${we.max}).`}}for(const oe of R.conditions||[]){if(oe.type==="distance_max"&&typeof oe.max=="number"&&Be>oe.max)return{ok:!1,reason:oe.reason||`Distance cible > ${oe.max}.`};if(oe.type==="distance_between"){const Fe=typeof oe.min=="number"?oe.min:typeof(we==null?void 0:we.min)=="number"?we.min:null,Ue=typeof oe.max=="number"?oe.max:typeof(we==null?void 0:we.max)=="number"?we.max:null;if(Fe!==null&&Be<Fe)return{ok:!1,reason:oe.reason||`Distance cible < ${Fe}.`};if(Ue!==null&&Be>Ue)return{ok:!1,reason:oe.reason||`Distance cible > ${Ue}.`}}if(oe.type==="target_alive"&&j.hp<=0)return{ok:!1,reason:oe.reason||"La cible doit avoir des PV restants."}}return se.requiresLos&&!hp(D,j,N)?{ok:!1,reason:"Cible hors du champ de vision ou derriere un obstacle (ligne de vue requise)."}:{ok:!0}}function Xn(R){var Be,we;const j=[],D=[];S!=="player"&&j.push("Action bloquee pendant le tour des ennemis.");const N=(Be=R.targeting)==null?void 0:Be.target,se=(we=R.targeting)==null?void 0:we.range;if(N==="enemy"){const oe=Yn();oe===null?j.push("Aucune cible ennemie presente."):(D.push(`Distance mini ennemie: ${oe}`),typeof(se==null?void 0:se.min)=="number"&&oe<se.min&&j.push(`Trop proche (< ${se.min}).`),typeof(se==null?void 0:se.max)=="number"&&oe>se.max&&j.push(`Hors portee (> ${se.max}).`))}for(const oe of R.conditions||[]){if(oe.type==="phase"&&oe.mustBe&&oe.mustBe!==S&&j.push(oe.reason||"Phase incorrecte."),oe.type==="distance_max"&&N==="enemy"){const Fe=Yn();Fe!==null&&typeof oe.max=="number"&&Fe>oe.max&&j.push(oe.reason||`Distance > ${oe.max}.`)}if(oe.type==="distance_between"&&N==="enemy"){const Fe=Yn();Fe!==null&&(typeof oe.min=="number"&&Fe<oe.min&&j.push(oe.reason||`Distance < ${oe.min}.`),typeof oe.max=="number"&&Fe>oe.max&&j.push(oe.reason||`Distance > ${oe.max}.`))}}return{enabled:j.length===0,reasons:j,details:D}}function al(R){var D;const j=[];if(R.perTurn&&j.push(`${R.perTurn}/tour`),R.perEncounter&&j.push(`${R.perEncounter}/rencontre`),(D=R.resource)!=null&&D.name){const N=R.resource.pool?` (${R.resource.pool})`:"";j.push(`Ressource: ${R.resource.name}${N}`)}return j.length?j.join(" | "):"Libre"}function jr(R){const{range:j,target:D}=R;return j.shape==="self"?"Portee: soi-meme":j.min===j.max?`Portee: ${j.max} (${D})`:`Portee: ${j.min}-${j.max} (${D})`}function fi(R){switch(R.type){case"phase":return`Phase requise: ${R.mustBe??"?"}`;case"distance_max":return`Distance <= ${R.max??"?"}`;case"distance_between":return`Distance ${R.min??0}-${R.max??"?"}`;case"stat_below_percent":return`Stat ${R.stat} < ${Math.round((R.percentMax??0)*100)}%`;case"target_alive":return"Cible doit etre vivante";case"resource_at_least":return`Ressource ${R.resource??"?"} >= ${R.value??"?"}`;default:return R.reason||R.type}}function pi(R){switch(R.type){case"damage":return`Degats ${R.damageType??""} (${R.formula??"?"})`;case"heal":return`Soin (${R.formula??"?"})`;case"status":return`Etat: ${R.status??"?"} (${R.duration??"?"} tour)`;case"temp_hp":return`PV temporaires: ${R.amount??"?"}`;case"move":return`Deplacement +${R.maxSteps??"?"} (${R.direction??"direction libre"})`;case"resource_spend":return`Consomme ${R.amount??1} ${R.resource??"ressource"}`;case"modify_path_limit":return`+${R.delta??"?"} cases de mouvement ce tour`;default:return R.type}}function cs(R){var N;const j=(N=R.targeting)==null?void 0:N.range;if(!j)return;const D=`preview-${R.id}`;if(j.shape==="rectangle"){_n([{id:D,kind:"rectangle",width:Math.max(1,j.max),height:Math.max(1,j.max)}]),ue(`Previsualisation rectangle pour ${R.name}.`);return}if(j.shape==="cone"){_n([{id:D,kind:"cone",range:Math.max(1,j.max),direction:"right"}]),ue(`Previsualisation cone (direction droite) pour ${R.name}.`);return}_n([{id:D,kind:"circle",radius:Math.max(1,j.max)}]),ue(`Previsualisation de portee pour ${R.name}.`)}function ll(R){var we,oe,Fe;const j=(we=R.actionCost)==null?void 0:we.actionType,D=j==="action",N=j==="bonus";if(D&&Kt.usedAction){ue(`Action ${R.name} refusee: action principale deja utilisee ce tour.`);return}if(N&&Kt.usedBonus){ue(`Action ${R.name} refusee: action bonus deja utilisee ce tour.`);return}const se=Xn(R);if(!se.enabled){ue(`Action ${R.name} bloque: ${se.reasons.join(" | ")}`);return}be(R.id),Ie(null),rt(null),jt(!1),Fr(Ue=>({usedAction:Ue.usedAction||D,usedBonus:Ue.usedBonus||N}));const Be=((oe=R.aiHints)==null?void 0:oe.successLog)||"Action validee. Prets pour les jets.";ue(`${R.name}: ${Be}`),((Fe=R.targeting)==null?void 0:Fe.target)==="enemy"?(cr("selecting"),Fn(null),ue("Selection de cible: cliquez sur un ennemi sur la grille ou dans la liste.")):(cr("none"),Fn(null))}function Dr(){return ve&&q.find(R=>R.id===ve)||null}function ul(R){return R?R.attack||R.damage||R.skillCheck?!0:(R.effects||[]).some(D=>typeof D.formula=="string"&&D.formula.trim().length>0):!1}function jn(){var we,oe;if(ln||$t(d))return;const R=Dr();if(!R){ue("Aucune action validee pour lancer un jet.");return}if(!R.attack){ue("Cette action ne requiert pas de jet de touche.");return}if(Ut){ue("Jet de touche deja effectue pour cette action ce tour. Validez une nouvelle action ou terminez le tour.");return}let j=null;if(((we=R.targeting)==null?void 0:we.target)==="enemy"){if(!mt){ue("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet.");return}const Fe=x.find(Ue=>Ue.id===mt);if(!Fe){ue("Cible ennemie introuvable ou deja vaincue.");return}j=typeof Fe.armorClass=="number"?Fe.armorClass:null}const D=yy(R.attack.bonus,Ae,R.attack.critRange??20);Ie(D),jt(!0),rt(null);const N=D.mode==="normal"?`${D.d20.total}`:`${D.d20.rolls.join(" / ")} -> ${D.d20.total}`,se=((oe=R.targeting)==null?void 0:oe.target)==="enemy"&&mt?` sur ${mt}`:"",Be=`Jet de touche (${R.name})${se} : ${N} + ${D.bonus} = ${D.total}`;if(j!==null){const Ue=D.total>=j||D.isCrit?`TOUCHE (CA ${j})${D.isCrit?" (critique!)":""}`:`RATE (CA ${j})`;ci(`${Be} -> ${Ue}`)}else ci(`${Be}${D.isCrit?" (critique!)":""}`)}function mi(){var Fe,Ue,De;if(ln||$t(d))return;const R=Dr();if(!R){ue("Aucune action validee pour lancer un jet.");return}if(!R.damage){ue("Cette action ne requiert pas de jet de degats.");return}if(R.attack&&!Te){ue("Un jet de touche est requis avant les degats pour cette action.");return}let j=null,D=null;if(((Fe=R.targeting)==null?void 0:Fe.target)==="enemy"){if(!mt){ue("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet de degats.");return}if(j=x.findIndex(ge=>ge.id===mt),j===-1){ue("Cible ennemie introuvable ou deja vaincue.");return}const Re=x[j];D=typeof Re.armorClass=="number"?Re.armorClass:null}const N=!!(Te!=null&&Te.isCrit);if(D!==null&&R.attack&&Te){const Re=Te.total;if(!(Re>=D||Te.isCrit)){const ke=((Ue=R.targeting)==null?void 0:Ue.target)==="enemy"&&mt?` sur ${mt}`:"";ue(`L'attaque (${R.name})${ke} a manque la cible (CA ${D}). Pas de degats.`),mt&&nn({round:w,phase:S,kind:"player_attack",actorId:d.id,actorKind:"player",targetId:mt,targetKind:"enemy",summary:`Le heros attaque ${mt} (${R.name}) mais manque (CA ${D}).`,data:{actionId:R.id,attackTotal:Re,targetArmorClass:D,hit:!1}});return}}const se=vy(R.damage.formula,{isCrit:N,critRule:R.damage.critRule});rt(se);const Be=se.dice.map(Re=>Re.rolls.join("+")).join(" | "),we=se.total,oe=((De=R.targeting)==null?void 0:De.target)==="enemy"&&mt?` sur ${mt}`:"";ci(`Degats (${R.name})${oe} : ${Be||"0"} + ${se.flatModifier} = ${we}${N?" (critique)":""}`),typeof j=="number"&&j>=0&&v(Re=>{if(j===null||j<0||j>=Re.length)return Re;const ge=[...Re],ke={...ge[j]},Se=ke.hp;return ke.hp=Math.max(0,ke.hp-we),ge[j]=ke,nn({round:w,phase:S,kind:"player_attack",actorId:d.id,actorKind:"player",targetId:ke.id,targetKind:"enemy",summary:`Le heros frappe ${ke.id} et inflige ${we} degats (PV ${Se} -> ${ke.hp}).`,data:{actionId:R.id,damage:we,isCrit:N,targetHpBefore:Se,targetHpAfter:ke.hp}}),ke.hp<=0&&Se>0&&nn({round:w,phase:S,kind:"death",actorId:ke.id,actorKind:"enemy",summary:`${ke.id} s'effondre, hors de combat.`,targetId:ke.id,targetKind:"enemy",data:{killedBy:d.id}}),ge})}function bo(){const R=Dr();if(!R){ue("Aucune action validee pour lancer un jet.");return}if(!R.attack){ue("Mode auto: pas de jet de touche necessaire."),R.damage&&mi();return}jn(),setTimeout(()=>{R.damage&&mi()},50)}function cl(R){if(S!=="player"||ln||$t(d))return;const j=r.current;if(!j)return;const D=j.querySelector("canvas");if(!D)return;const N=D.getBoundingClientRect(),se=R.clientX-N.left,Be=R.clientY-N.top,we=se/N.width*qa,oe=Be/N.height*kc,{x:Fe,y:Ue}=Eg(we,oe),De=Fe,Re=Ue;if(!Zi(De,Re))return;if(ur==="selecting"){const ke=[d,...x],Se=Sy({x:De,y:Re},ke);if(!Se||Se.type!=="enemy"){ue(`Pas d'ennemi sur (${De}, ${Re}).`);return}const Ne=Dr();if(!Ne){ue("Aucune action validee pour selectionner une cible.");return}const vt=di(Ne,Se,d,[d,...x]);if(!vt.ok){ue(vt.reason||"Cette cible n'est pas valide pour cette action.");return}Fn(Se.id),cr("none"),ue(`Cible selectionnee: ${Se.id}.`);return}const ge=(ke,Se)=>x.some(Ne=>Ne.hp>0&&Ne.x===ke&&Ne.y===Se);if(ge(De,Re)){ue(`Case (${De}, ${Re}) occupee par un ennemi : impossible de s'y deplacer.`);return}Vn(ke=>{const Ne=[...ke];if(Ne.length>=5)return ue("Limite de 5 cases atteinte pour ce tour."),Ne;let vt=Ne.length>0?Ne[Ne.length-1]:{x:d.x,y:d.y};if(vt.x===De&&vt.y===Re)return Ne;let st=vt.x,Je=vt.y,gt=5-Ne.length;for(;st!==De&&gt>0;){const Rt=Math.sign(De-st),et=st+Rt;if(ge(et,Je)){ue(`Trajectoire bloquee par un ennemi en (${et}, ${Je}).`);break}st=et,Ne.push({x:st,y:Je}),gt--}for(;Je!==Re&&gt>0;){const Rt=Math.sign(Re-Je),et=Je+Rt;if(ge(st,et)){ue(`Trajectoire bloquee par un ennemi en (${st}, ${et}).`);break}Je=et,Ne.push({x:st,y:Je}),gt--}return ue(gt===0&&(st!==De||Je!==Re)?"Trajectoire tronquee: limite de 5 cases atteinte.":`Trajectoire: ajout de la case (${De}, ${Re}).`),Ne})}function ko(){if(S!=="player"||ln||$t(d)||At.length===0)return;const R=At[At.length-1],j={x:d.x,y:d.y};p(D=>({...D,x:R.x,y:R.y})),ue(`Deplacement valide vers (${R.x}, ${R.y}) via ${At.length} etape(s).`),nn({round:w,phase:"player",kind:"move",actorId:d.id,actorKind:"player",summary:`Le heros se deplace de (${j.x}, ${j.y}) vers (${R.x}, ${R.y}).`,data:{from:j,to:{x:R.x,y:R.y},steps:At.length}}),Vn([])}function Co(){S==="player"&&(ln||(Vn([]),ue("Trajectoire reinitialisee.")))}function Or(R){S==="player"&&(ln||(p(j=>({...j,facing:R})),ue(`Orientation du joueur mise a jour: ${R}.`)))}function Ao(){const R={x:d.x,y:d.y,hp:d.hp,maxHp:d.maxHp},j=x.map(D=>({id:D.id,x:D.x,y:D.y,hp:D.hp,maxHp:D.maxHp,type:D.enemyTypeId,aiRole:D.aiRole??null,moveRange:D.moveRange??null,attackDamage:D.attackDamage??null}));return{round:w,phase:S,grid:{cols:sr,rows:Wn},player:R,enemies:j}}function hl(R){const j=new Set(x.map(se=>se.id)),D=new Set(["move","attack","wait"]),N=[];for(const se of R){if(!se||typeof se!="object")continue;if(!j.has(se.enemyId)){console.warn("[enemy-ai] Decision ignoree (enemyId inconnu):",se);continue}const Be=(se.action||"wait").toLowerCase();if(!D.has(Be)){console.warn("[enemy-ai] Decision ignoree (action invalide):",se);continue}if(Be==="move"&&(typeof se.targetX!="number"||typeof se.targetY!="number")){console.warn("[enemy-ai] Decision move ignoree (cible manquante):",se);continue}N.push({...se,action:Be})}return N}async function dl(R){console.log("[enemy-ai] Envoi tat au backend:",R),li(R),vo(null),hr(!1);try{const j=await fetch("/api/enemy-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!j.ok)throw new Error(`HTTP ${j.status}`);const D=await j.json();if(!D.decisions||!Array.isArray(D.decisions))throw new Error("Rponse backend invalide (decisions manquant).");const N=hl(D.decisions);return console.log("[enemy-ai] Dcisions reues (filtres):",N),zn(N),N.length===0&&hr(!0),N}catch(j){return console.warn("[enemy-ai] Erreur lors de la requete IA:",j),vo(j instanceof Error?j.message:String(j??"unknown")),zn(null),hr(!0),console.warn("[enemy-ai] Dcisions manquantes, utilisation du fallback local."),[]}}async function it(R,j,D){const N=D.find(Se=>Se.id===R);if(!N||$t(N))return;const se=[j,...D],Be=cp(N,se),we=Be.filter(Se=>Se.type==="enemy"&&Se.id!==R&&!$t(Se)).map(Se=>Se.id),oe=Be.filter(Se=>Se.type==="player"&&!$t(Se)).map(Se=>Se.id),Fe=Ma(N,j,se),Ue=Hs(N,j),De=N.maxHp>0?N.hp/N.maxHp:0,Re={language:"fr",maxLines:2,enemyId:R,enemyTypeId:N.enemyTypeId??null,aiRole:N.aiRole??null,speechProfile:N.speechProfile??null,perception:{canSeePlayer:Fe,distanceToPlayer:Number.isFinite(Ue)?Ue:null,hpRatio:Number.isFinite(De)?De:0,alliesVisible:we,enemiesVisible:oe,lastKnownPlayerPos:Fe?{x:j.x,y:j.y}:null},priorSpeechesThisRound:Ay(),selfLastSpeech:Py(R),recentEvents:Ty(16)},ke=((await Iy(Re)).line??"").trim();if(!ke){wo(R);return}_o(R,ke),Cy(R,ke)}async function fl(R){var Ue;P(!0),Vn([]),_n([]);const j=x.map(De=>({...De}));let D={...d};const N=j.find(De=>De.id===R);if(!N||$t(N)){P(!1),Bn();return}const se=Ao(),we=(await dl(se)).filter(De=>De.enemyId===R),oe=[D,...j];if(we.length===0)if(hr(!0),zn([]),!Ma(N,D,oe))ue(`${N.id} ne voit pas le joueur et reste en alerte.`);else{const Re=typeof N.moveRange=="number"?N.moveRange:3,ge=Nf(N,{x:D.x,y:D.y},oe,{maxDistance:Re,allowTargetOccupied:!0});if(N.plannedPath=ge,ge.length===0)ue(`${N.id} ne trouve pas de chemin valide vers le joueur (reste en place).`);else{const ke={x:N.x,y:N.y},Se=ge[ge.length-1];N.x=Se.x,N.y=Se.y,N.facing=Ku(N,D),ue(`${N.id} suit un chemin vers (${Se.x}, ${Se.y}).`),nn({round:w,phase:"enemies",kind:"move",actorId:N.id,actorKind:"enemy",summary:`${N.id} se deplace de (${ke.x}, ${ke.y}) vers (${Se.x}, ${Se.y}).`,data:{from:ke,to:Se,fallback:!0}});const Ne=Hs(N,D),vt=jf(N);if(Ne<=vt){const st=typeof N.attackDamage=="number"?N.attackDamage:2,Je=Df(N),gt=st*Je,Rt=D.hp;D={...D,hp:Math.max(0,D.hp-gt)},ue(Je>1?`${N.id} attaque ${Je} fois pour ${gt} degats.`:`${N.id} attaque le joueur pour ${gt} degats.`),nn({round:w,phase:"enemies",kind:"enemy_attack",actorId:N.id,actorKind:"enemy",targetId:D.id,targetKind:"player",summary:`${N.id} frappe le heros et inflige ${gt} degats (PV ${Rt} -> ${D.hp}).`,data:{damage:gt,attacks:Je,playerHpBefore:Rt,playerHpAfter:D.hp,fallback:!0}}),D.hp<=0&&Rt>0&&nn({round:w,phase:"enemies",kind:"death",actorId:D.id,actorKind:"player",summary:"Le heros s'effondre sous les coups ennemis.",targetId:D.id,targetKind:"player",data:{killedBy:N.id}})}}}else{hr(!1),zn(we);const De=we[0],Re=(De.action||"wait").toLowerCase();if(Re==="wait")ue(`${N.id} attend.`);else if(Re==="move")if(!Ma(N,D,oe))ue(`${N.id} ne voit pas le joueur et reste en alerte.`);else{let ke=De.targetX,Se=De.targetY;const Ne=De;if((typeof ke!="number"||typeof Se!="number")&&Ne.target&&typeof Ne.target.x=="number"&&typeof Ne.target.y=="number"&&(ke=Ne.target.x,Se=Ne.target.y),typeof ke!="number"||typeof Se!="number")ue(`${N.id}: move ignore (cible invalide).`);else{const vt=typeof N.moveRange=="number"?N.moveRange:3,st=Bf(ke,0,sr-1),Je=Bf(Se,0,Wn-1),gt=Nf(N,{x:st,y:Je},oe,{maxDistance:vt,allowTargetOccupied:!0});if(N.plannedPath=gt,gt.length===0)ue(`${N.id}: aucun trajet valide vers (${st}, ${Je}), reste en place.`);else{const Rt={x:N.x,y:N.y},et=gt[gt.length-1];N.x=et.x,N.y=et.y,N.facing=Ku(N,D),ue(`${N.id} suit un chemin vers (${et.x}, ${et.y}).`),nn({round:w,phase:"enemies",kind:"move",actorId:N.id,actorKind:"enemy",summary:`${N.id} se deplace de (${Rt.x}, ${Rt.y}) vers (${et.x}, ${et.y}).`,data:{from:Rt,to:et}})}}}else if(Re==="attack")if(N.facing=Ku(N,D),!Ma(N,D,oe))ue(`${N.id} voulait attaquer mais ne voit pas le joueur.`);else{const ke=Hs(N,D),Se=jf(N);if(ke<=Se){const Ne=typeof N.attackDamage=="number"?N.attackDamage:2,vt=Df(N),st=Ne*vt,Je=D.hp;D={...D,hp:Math.max(0,D.hp-st)},ue(vt>1?`${N.id} effectue ${vt} attaques et inflige ${st} degats au joueur.`:`${N.id} attaque le joueur pour ${st} degats.`),nn({round:w,phase:"enemies",kind:"enemy_attack",actorId:N.id,actorKind:"enemy",targetId:D.id,targetKind:"player",summary:`${N.id} attaque le heros et inflige ${st} degats (PV ${Je} -> ${D.hp}).`,data:{damage:st,attacks:vt,playerHpBefore:Je,playerHpAfter:D.hp}}),D.hp<=0&&Je>0&&nn({round:w,phase:"enemies",kind:"death",actorId:D.id,actorKind:"player",summary:"Le heros s'effondre sous les coups ennemis.",targetId:D.id,targetKind:"player",data:{killedBy:N.id}})}else ue(`${N.id} voulait attaquer mais est trop loin (ignore).`)}}p(D),v(j);try{await it(R,D,j)}catch{}const Fe=ls();if(e.current&&((Ue=Fe.entry)==null?void 0:Ue.kind)==="player")try{const De=hi("player",D,j),Re=Ey({focusActorId:D.id??null,stateEnd:De});if(Re){const ge=await Ry(Re),ke=(ge.error||ge.summary||"").trim();ke&&us(ke)}}catch{us("IA non fonctionnel.")}finally{My(),e.current=!1}P(!1),Bn()}function hs(){if(ln)return;const R=Br();!R||R.kind!=="player"||(ue(`Fin du tour joueur (round ${w}).`),e.current=!0,nn({round:w,phase:"player",kind:"turn_end",actorId:d.id,actorKind:"player",summary:`Fin du tour du heros (round ${w}).`}),Bn())}function Po(){_n([{id:"demo-circle",kind:"circle",radius:2}]),ue("Zone d'effet: cercle (rayon 2) autour du joueur.")}function gi(){_n([{id:"demo-rect",kind:"rectangle",width:3,height:3}]),ue("Zone d'effet: rectangle 3x3 centre sur le joueur.")}function pl(){_n([{id:"demo-cone",kind:"cone",range:4,direction:"right"}]),ue("Zone d'effet: cone vers la droite (portee 4).")}function To(){_n([]),ue("Zones d'effet effacees.")}ye.useEffect(()=>{ln||d.hp<=0&&([d,...x].some(j=>j.type==="player"&&!$t(j))||ss(!0))},[d,x,ln]);const fr=q.find(R=>R.id===I)||q[0]||null,un=fr?Xn(fr):null,ds=Dr(),Qt=ul(ds),Ze=S==="player",ml=Br(),gl=X;return xe?L.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"16px",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:"16px",boxSizing:"border-box",position:"relative"},children:[ln&&L.jsx(V4,{onRestart:()=>window.location.reload()}),L.jsxs("div",{style:{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},children:[L.jsx(X4,{round:w,narrativeLog:o}),L.jsx(Y4,{round:w,timelineEntries:gl,activeEntry:ml,player:d,enemies:x}),L.jsx("h1",{style:{marginBottom:8},children:"Mini Donjon (test-GAME)"}),L.jsx("p",{style:{marginBottom:8},children:"Tour par tour simple. Cliquez sur la grille pour definir une trajectoire (max 5 cases), validez le dplacement, puis terminez le tour pour laisser l'IA des ennemis jouer."}),L.jsx("div",{ref:r,onClick:cl,style:{flex:"1 1 auto",border:"1px solid #333",overflow:"hidden",maxHeight:"min(80vh, 640px)",maxWidth:"min(100%, 1024px)"}}),L.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,flexWrap:"wrap"},children:[L.jsx("button",{type:"button",onClick:ko,style:{padding:"4px 8px",background:Ze&&At.length?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze&&At.length?"pointer":"default"},disabled:!Ze||At.length===0,children:"Valider le deplacement"}),L.jsx("button",{type:"button",onClick:Co,style:{padding:"4px 8px",background:Ze?"#e67e22":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default"},disabled:!Ze,children:"Reinitialiser trajet"}),L.jsx("button",{type:"button",onClick:hs,style:{padding:"4px 8px",background:Ze?"#9b59b6":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default"},disabled:!Ze||A,children:"Fin du tour joueur"}),L.jsx("button",{type:"button",onClick:()=>Or("up"),style:{padding:"4px 8px",background:Ze?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default",fontSize:11},disabled:!Ze,children:"Regarder haut"}),L.jsx("button",{type:"button",onClick:()=>Or("down"),style:{padding:"4px 8px",background:Ze?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default",fontSize:11},disabled:!Ze,children:"Regarder bas"}),L.jsx("button",{type:"button",onClick:()=>Or("left"),style:{padding:"4px 8px",background:Ze?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default",fontSize:11},disabled:!Ze,children:"Regarder gauche"}),L.jsx("button",{type:"button",onClick:()=>Or("right"),style:{padding:"4px 8px",background:Ze?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default",fontSize:11},disabled:!Ze,children:"Regarder droite"}),!Ze&&L.jsx("span",{style:{fontSize:12,alignSelf:"center"},children:"Tour des ennemis en cours..."})]})]}),L.jsxs("div",{style:{width:"360px",display:"flex",flexDirection:"column",gap:"12px"},children:[L.jsx(W4,{round:w,phase:S,playerInitiative:$,player:d,selectedPath:At,sampleCharacter:Ea,aiLastState:rs,aiLastDecisions:ui,aiUsedFallback:is,aiLastError:zr}),L.jsx(H4,{enemies:x,player:d,capabilities:i6,validatedAction:ds,selectedTargetId:mt,describeEnemyLastDecision:os,validateEnemyTargetForAction:di,onSelectTargetId:Fn,onSetTargetMode:cr,onLog:ue}),L.jsx(q4,{actions:q,selectedAction:fr,selectedAvailability:un,computeActionAvailability:Xn,onSelectActionId:U,describeRange:jr,describeUsage:al,conditionLabel:fi,effectLabel:pi,onPreviewActionArea:cs,onValidateAction:ll}),Qt&&L.jsx(K4,{validatedAction:ds,advantageMode:Ae,onSetAdvantageMode:Pe,onRollAttack:jn,onRollDamage:mi,onAutoResolve:bo,attackRoll:Te,damageRoll:$e,diceLogs:Ln}),L.jsx(Q4,{showVisionDebug:ns,onShowCircle:Po,onShowRectangle:gi,onShowCone:pl,onToggleVisionDebug:()=>xo(R=>!R),onClear:To}),L.jsx(Z4,{log:t})]})]}):L.jsx(G4,{configEnemyCount:Ce,enemyTypeCount:m.length,gridCols:sr,gridRows:Wn,onChangeEnemyCount:ft,onNoEnemyTypes:()=>ue("Aucun type d'ennemi charge (enemyTypes). Impossible de generer le combat."),onStartCombat:as})},o6=document.getElementById("root");Pg.createRoot(o6).render(L.jsx(s6,{}));export{C3 as $,s0 as A,qt as B,sn as C,Ye as D,fe as E,Mp as F,rl as G,r1 as H,Ki as I,X3 as J,r8 as K,go as L,Le as M,dt as N,nt as O,Bt as P,w8 as Q,Fc as R,Zc as S,ja as T,Mc as U,s1 as V,ac as W,o1 as X,P3 as Y,Xi as Z,xt as _,Yp as a,Ap as a0,o0 as a1,Me as a2,We as a3,A8 as a4,K8 as a5,G8 as a6,mx as a7,yx as a8,Sx as a9,kx as aa,Cx as ab,w0 as ac,w1 as ad,v1 as ae,Y1 as af,Hn as ag,A5 as ah,Ke as ai,ai as aj,Xy as ak,po as al,rp as am,k0 as an,Mn as b,$8 as c,ho as d,Mt as e,_1 as f,j8 as g,Ya as h,Qc as i,n0 as j,jp as k,Rn as l,Qp as m,mo as n,px as o,gx as p,_x as q,l3 as r,bx as s,ze as t,Yy as u,Ax as v,Qe as w,vn as x,bp as y,En as z};
