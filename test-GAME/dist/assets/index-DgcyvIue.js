const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-CD5zdjwV.js","assets/webworkerAll-bn-AqKb2.js","assets/colorToUniform-cNEORLiv.js","assets/WebGPURenderer-CXp0Kl3s.js","assets/SharedSystems-BjabvPeZ.js","assets/WebGLRenderer-BzVPi3y4.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Fc(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Mu={exports:{}},zs={},Ru={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf;function i2(){if(xf)return Ee;xf=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function w(R,N,xe){this.props=R,this.context=N,this.refs=b,this.updater=xe||_}w.prototype.isReactComponent={},w.prototype.setState=function(R,N){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,N,"setState")},w.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function P(){}P.prototype=w.prototype;function T(R,N,xe){this.props=R,this.context=N,this.refs=b,this.updater=xe||_}var E=T.prototype=new P;E.constructor=T,S(E,w.prototype),E.isPureReactComponent=!0;var I=Array.isArray,V=Object.prototype.hasOwnProperty,D={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function re(R,N,xe){var _e,Se={},Pe=null,Ne=null;if(N!=null)for(_e in N.ref!==void 0&&(Ne=N.ref),N.key!==void 0&&(Pe=""+N.key),N)V.call(N,_e)&&!O.hasOwnProperty(_e)&&(Se[_e]=N[_e]);var Fe=arguments.length-2;if(Fe===1)Se.children=xe;else if(1<Fe){for(var Be=Array(Fe),ht=0;ht<Fe;ht++)Be[ht]=arguments[ht+2];Se.children=Be}if(R&&R.defaultProps)for(_e in Fe=R.defaultProps,Fe)Se[_e]===void 0&&(Se[_e]=Fe[_e]);return{$$typeof:i,type:R,key:Pe,ref:Ne,props:Se,_owner:D.current}}function ae(R,N){return{$$typeof:i,type:R.type,key:N,ref:R.ref,props:R.props,_owner:R._owner}}function Q(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function ne(R){var N={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(xe){return N[xe]})}var Ce=/\/+/g;function be(R,N){return typeof R=="object"&&R!==null&&R.key!=null?ne(""+R.key):N.toString(36)}function Ae(R,N,xe,_e,Se){var Pe=typeof R;(Pe==="undefined"||Pe==="boolean")&&(R=null);var Ne=!1;if(R===null)Ne=!0;else switch(Pe){case"string":case"number":Ne=!0;break;case"object":switch(R.$$typeof){case i:case e:Ne=!0}}if(Ne)return Ne=R,Se=Se(Ne),R=_e===""?"."+be(Ne,0):_e,I(Se)?(xe="",R!=null&&(xe=R.replace(Ce,"$&/")+"/"),Ae(Se,N,xe,"",function(ht){return ht})):Se!=null&&(Q(Se)&&(Se=ae(Se,xe+(!Se.key||Ne&&Ne.key===Se.key?"":(""+Se.key).replace(Ce,"$&/")+"/")+R)),N.push(Se)),1;if(Ne=0,_e=_e===""?".":_e+":",I(R))for(var Fe=0;Fe<R.length;Fe++){Pe=R[Fe];var Be=_e+be(Pe,Fe);Ne+=Ae(Pe,N,xe,Be,Se)}else if(Be=v(R),typeof Be=="function")for(R=Be.call(R),Fe=0;!(Pe=R.next()).done;)Pe=Pe.value,Be=_e+be(Pe,Fe++),Ne+=Ae(Pe,N,xe,Be,Se);else if(Pe==="object")throw N=String(R),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return Ne}function yt(R,N,xe){if(R==null)return R;var _e=[],Se=0;return Ae(R,_e,"","",function(Pe){return N.call(xe,Pe,Se++)}),_e}function ee(R){if(R._status===-1){var N=R._result;N=N(),N.then(function(xe){(R._status===0||R._status===-1)&&(R._status=1,R._result=xe)},function(xe){(R._status===0||R._status===-1)&&(R._status=2,R._result=xe)}),R._status===-1&&(R._status=0,R._result=N)}if(R._status===1)return R._result.default;throw R._result}var ie={current:null},J={transition:null},Z={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:J,ReactCurrentOwner:D};function te(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:yt,forEach:function(R,N,xe){yt(R,function(){N.apply(this,arguments)},xe)},count:function(R){var N=0;return yt(R,function(){N++}),N},toArray:function(R){return yt(R,function(N){return N})||[]},only:function(R){if(!Q(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ee.Component=w,Ee.Fragment=t,Ee.Profiler=o,Ee.PureComponent=T,Ee.StrictMode=s,Ee.Suspense=f,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Ee.act=te,Ee.cloneElement=function(R,N,xe){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var _e=S({},R.props),Se=R.key,Pe=R.ref,Ne=R._owner;if(N!=null){if(N.ref!==void 0&&(Pe=N.ref,Ne=D.current),N.key!==void 0&&(Se=""+N.key),R.type&&R.type.defaultProps)var Fe=R.type.defaultProps;for(Be in N)V.call(N,Be)&&!O.hasOwnProperty(Be)&&(_e[Be]=N[Be]===void 0&&Fe!==void 0?Fe[Be]:N[Be])}var Be=arguments.length-2;if(Be===1)_e.children=xe;else if(1<Be){Fe=Array(Be);for(var ht=0;ht<Be;ht++)Fe[ht]=arguments[ht+2];_e.children=Fe}return{$$typeof:i,type:R.type,key:Se,ref:Pe,props:_e,_owner:Ne}},Ee.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},Ee.createElement=re,Ee.createFactory=function(R){var N=re.bind(null,R);return N.type=R,N},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(R){return{$$typeof:h,render:R}},Ee.isValidElement=Q,Ee.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:ee}},Ee.memo=function(R,N){return{$$typeof:p,type:R,compare:N===void 0?null:N}},Ee.startTransition=function(R){var N=J.transition;J.transition={};try{R()}finally{J.transition=N}},Ee.unstable_act=te,Ee.useCallback=function(R,N){return ie.current.useCallback(R,N)},Ee.useContext=function(R){return ie.current.useContext(R)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(R){return ie.current.useDeferredValue(R)},Ee.useEffect=function(R,N){return ie.current.useEffect(R,N)},Ee.useId=function(){return ie.current.useId()},Ee.useImperativeHandle=function(R,N,xe){return ie.current.useImperativeHandle(R,N,xe)},Ee.useInsertionEffect=function(R,N){return ie.current.useInsertionEffect(R,N)},Ee.useLayoutEffect=function(R,N){return ie.current.useLayoutEffect(R,N)},Ee.useMemo=function(R,N){return ie.current.useMemo(R,N)},Ee.useReducer=function(R,N,xe){return ie.current.useReducer(R,N,xe)},Ee.useRef=function(R){return ie.current.useRef(R)},Ee.useState=function(R){return ie.current.useState(R)},Ee.useSyncExternalStore=function(R,N,xe){return ie.current.useSyncExternalStore(R,N,xe)},Ee.useTransition=function(){return ie.current.useTransition()},Ee.version="18.3.1",Ee}var vf;function zc(){return vf||(vf=1,Ru.exports=i2()),Ru.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f;function s2(){if(_f)return zs;_f=1;var i=zc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,p){var m,y={},v=null,_=null;p!==void 0&&(v=""+p),f.key!==void 0&&(v=""+f.key),f.ref!==void 0&&(_=f.ref);for(m in f)s.call(f,m)&&!l.hasOwnProperty(m)&&(y[m]=f[m]);if(h&&h.defaultProps)for(m in f=h.defaultProps,f)y[m]===void 0&&(y[m]=f[m]);return{$$typeof:e,type:h,key:v,ref:_,props:y,_owner:o.current}}return zs.Fragment=t,zs.jsx=u,zs.jsxs=u,zs}var wf;function o2(){return wf||(wf=1,Mu.exports=s2()),Mu.exports}var z=o2(),ga={},Iu={exports:{}},Yt={},Fu={exports:{}},zu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sf;function a2(){return Sf||(Sf=1,(function(i){function e(J,Z){var te=J.length;J.push(Z);e:for(;0<te;){var R=te-1>>>1,N=J[R];if(0<o(N,Z))J[R]=Z,J[te]=N,te=R;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var Z=J[0],te=J.pop();if(te!==Z){J[0]=te;e:for(var R=0,N=J.length,xe=N>>>1;R<xe;){var _e=2*(R+1)-1,Se=J[_e],Pe=_e+1,Ne=J[Pe];if(0>o(Se,te))Pe<N&&0>o(Ne,Se)?(J[R]=Ne,J[Pe]=te,R=Pe):(J[R]=Se,J[_e]=te,R=_e);else if(Pe<N&&0>o(Ne,te))J[R]=Ne,J[Pe]=te,R=Pe;else break e}}return Z}function o(J,Z){var te=J.sortIndex-Z.sortIndex;return te!==0?te:J.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var f=[],p=[],m=1,y=null,v=3,_=!1,S=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(J){for(var Z=t(p);Z!==null;){if(Z.callback===null)s(p);else if(Z.startTime<=J)s(p),Z.sortIndex=Z.expirationTime,e(f,Z);else break;Z=t(p)}}function I(J){if(b=!1,E(J),!S)if(t(f)!==null)S=!0,ee(V);else{var Z=t(p);Z!==null&&ie(I,Z.startTime-J)}}function V(J,Z){S=!1,b&&(b=!1,P(re),re=-1),_=!0;var te=v;try{for(E(Z),y=t(f);y!==null&&(!(y.expirationTime>Z)||J&&!ne());){var R=y.callback;if(typeof R=="function"){y.callback=null,v=y.priorityLevel;var N=R(y.expirationTime<=Z);Z=i.unstable_now(),typeof N=="function"?y.callback=N:y===t(f)&&s(f),E(Z)}else s(f);y=t(f)}if(y!==null)var xe=!0;else{var _e=t(p);_e!==null&&ie(I,_e.startTime-Z),xe=!1}return xe}finally{y=null,v=te,_=!1}}var D=!1,O=null,re=-1,ae=5,Q=-1;function ne(){return!(i.unstable_now()-Q<ae)}function Ce(){if(O!==null){var J=i.unstable_now();Q=J;var Z=!0;try{Z=O(!0,J)}finally{Z?be():(D=!1,O=null)}}else D=!1}var be;if(typeof T=="function")be=function(){T(Ce)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,yt=Ae.port2;Ae.port1.onmessage=Ce,be=function(){yt.postMessage(null)}}else be=function(){w(Ce,0)};function ee(J){O=J,D||(D=!0,be())}function ie(J,Z){re=w(function(){J(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){S||_||(S=!0,ee(V))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(J){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var te=v;v=Z;try{return J()}finally{v=te}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,Z){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var te=v;v=J;try{return Z()}finally{v=te}},i.unstable_scheduleCallback=function(J,Z,te){var R=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?R+te:R):te=R,J){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=te+N,J={id:m++,callback:Z,priorityLevel:J,startTime:te,expirationTime:N,sortIndex:-1},te>R?(J.sortIndex=te,e(p,J),t(f)===null&&J===t(p)&&(b?(P(re),re=-1):b=!0,ie(I,te-R))):(J.sortIndex=N,e(f,J),S||_||(S=!0,ee(V))),J},i.unstable_shouldYield=ne,i.unstable_wrapCallback=function(J){var Z=v;return function(){var te=v;v=Z;try{return J.apply(this,arguments)}finally{v=te}}}})(zu)),zu}var kf;function l2(){return kf||(kf=1,Fu.exports=a2()),Fu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cf;function u2(){if(Cf)return Yt;Cf=1;var i=zc(),e=l2();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,r){u(n,r),u(n+"Capture",r)}function u(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function v(n){return f.call(y,n)?!0:f.call(m,n)?!1:p.test(n)?y[n]=!0:(m[n]=!0,!1)}function _(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,r,a,c){if(r===null||typeof r>"u"||_(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function b(n,r,a,c,d,g,x){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=g,this.removeEmptyString=x}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){w[n]=new b(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];w[r]=new b(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){w[n]=new b(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){w[n]=new b(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){w[n]=new b(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){w[n]=new b(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){w[n]=new b(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){w[n]=new b(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){w[n]=new b(n,5,!1,n.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function T(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(P,T);w[r]=new b(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(P,T);w[r]=new b(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(P,T);w[r]=new b(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){w[n]=new b(n,1,!1,n.toLowerCase(),null,!1,!1)}),w.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){w[n]=new b(n,1,!1,n.toLowerCase(),null,!0,!0)});function E(n,r,a,c){var d=w.hasOwnProperty(r)?w[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,a,d,c)&&(a=null),c||d===null?v(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var I=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),D=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),ne=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),yt=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),J=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var te=Object.assign,R;function N(n){if(R===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);R=r&&r[1]||""}return`
`+R+n}var xe=!1;function _e(n,r){if(!n||xe)return"";xe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(B){var c=B}Reflect.construct(n,[],r)}else{try{r.call()}catch(B){c=B}n.call(r.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),g=c.stack.split(`
`),x=d.length-1,C=g.length-1;1<=x&&0<=C&&d[x]!==g[C];)C--;for(;1<=x&&0<=C;x--,C--)if(d[x]!==g[C]){if(x!==1||C!==1)do if(x--,C--,0>C||d[x]!==g[C]){var A=`
`+d[x].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=x&&0<=C);break}}}finally{xe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?N(n):""}function Se(n){switch(n.tag){case 5:return N(n.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return n=_e(n.type,!1),n;case 11:return n=_e(n.type.render,!1),n;case 1:return n=_e(n.type,!0),n;default:return""}}function Pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case O:return"Fragment";case D:return"Portal";case ae:return"Profiler";case re:return"StrictMode";case be:return"Suspense";case Ae:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ne:return(n.displayName||"Context")+".Consumer";case Q:return(n._context.displayName||"Context")+".Provider";case Ce:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case yt:return r=n.displayName||null,r!==null?r:Pe(n.type)||"Memo";case ee:r=n._payload,n=n._init;try{return Pe(n(r))}catch{}}return null}function Ne(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(r);case 8:return r===re?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ht(n){var r=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(x){c=""+x,g.call(this,x)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function dn(n){n._valueTracker||(n._valueTracker=ht(n))}function Ve(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function At(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ye(n,r){var a=r.checked;return te({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function jt(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Fe(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function oi(n,r){r=r.checked,r!=null&&E(n,"checked",r,!1)}function fn(n,r){oi(n,r);var a=Fe(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?qt(n,r.type,a):r.hasOwnProperty("defaultValue")&&qt(n,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Tr(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function qt(n,r,a){(r!=="number"||At(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Tn=Array.isArray;function tr(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Er(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function io(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(Tn(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Fe(a)}}function Mr(n,r){var a=Fe(r.value),c=Fe(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Rr(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Zi(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ai(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Zi(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ir,nr=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ir.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Fr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},so=["Webkit","ms","Moz","O"];Object.keys(Bn).forEach(function(n){so.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Bn[r]=Bn[n]})});function oo(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Bn.hasOwnProperty(n)&&Bn[n]?(""+r).trim():r+"px"}function pe(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=oo(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Ji=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zr(n,r){if(r){if(Ji[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function li(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lr=null;function ui(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ci=null,rr=null,ir=null;function ao(n){if(n=vs(n)){if(typeof ci!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Ro(r),ci(n.stateNode,n.type,r))}}function lo(n){rr?ir?ir.push(n):ir=[n]:rr=n}function sr(){if(rr){var n=rr,r=ir;if(ir=rr=null,ao(n),r)for(n=0;n<r.length;n++)ao(r[n])}}function uo(n,r){return n(r)}function es(){}var Br=!1;function co(n,r,a){if(Br)return n(r,a);Br=!0;try{return uo(n,r,a)}finally{Br=!1,(rr!==null||ir!==null)&&(es(),sr())}}function jr(n,r){var a=n.stateNode;if(a===null)return null;var c=Ro(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var ts=!1;if(h)try{var Dr={};Object.defineProperty(Dr,"passive",{get:function(){ts=!0}}),window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch{ts=!1}function hi(n,r,a,c,d,g,x,C,A){var B=Array.prototype.slice.call(arguments,3);try{r.apply(a,B)}catch(H){this.onError(H)}}var Or=!1,di=null,fi=!1,ns=null,qa={onError:function(n){Or=!0,di=n}};function Ka(n,r,a,c,d,g,x,C,A){Or=!1,di=null,hi.apply(qa,arguments)}function Qa(n,r,a,c,d,g,x,C,A){if(Ka.apply(this,arguments),Or){if(Or){var B=di;Or=!1,di=null}else throw Error(t(198));fi||(fi=!0,ns=B)}}function jn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function ho(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function nt(n){if(jn(n)!==n)throw Error(t(188))}function Pt(n){var r=n.alternate;if(!r){if(r=jn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return nt(d),n;if(g===c)return nt(d),r;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=g;else{for(var x=!1,C=d.child;C;){if(C===a){x=!0,a=d,c=g;break}if(C===c){x=!0,c=d,a=g;break}C=C.sibling}if(!x){for(C=g.child;C;){if(C===a){x=!0,a=g,c=d;break}if(C===c){x=!0,c=g,a=d;break}C=C.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function $e(n){return n=Pt(n),n!==null?fo(n):null}function fo(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=fo(n);if(r!==null)return r;n=n.sibling}return null}var qe=e.unstable_scheduleCallback,Dn=e.unstable_cancelCallback,Za=e.unstable_shouldYield,po=e.unstable_requestPaint,rt=e.unstable_now,mo=e.unstable_getCurrentPriorityLevel,pi=e.unstable_ImmediatePriority,k=e.unstable_UserBlockingPriority,j=e.unstable_NormalPriority,U=e.unstable_LowPriority,le=e.unstable_IdlePriority,G=null,X=null;function K(n){if(X&&typeof X.onCommitFiberRoot=="function")try{X.onCommitFiberRoot(G,n,void 0,(n.current.flags&128)===128)}catch{}}var $=Math.clz32?Math.clz32:Re,se=Math.log,Te=Math.LN2;function Re(n){return n>>>=0,n===0?32:31-(se(n)/Te|0)|0}var ve=64,ze=4194304;function De(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function He(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,g=n.pingedLanes,x=a&268435455;if(x!==0){var C=x&~d;C!==0?c=De(C):(g&=x,g!==0&&(c=De(g)))}else x=a&~d,x!==0?c=De(x):g!==0&&(c=De(g));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,g=r&-r,d>=g||d===16&&(g&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-$(r),d=1<<a,c|=n[a],r&=~d;return c}function Ke(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $t(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes;0<g;){var x=31-$(g),C=1<<x,A=d[x];A===-1?((C&a)===0||(C&c)!==0)&&(d[x]=Ke(C,r)):A<=r&&(n.expiredLanes|=C),g&=~C}}function pt(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function xt(){var n=ve;return ve<<=1,(ve&4194240)===0&&(ve=64),n}function On(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Nn(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-$(r),n[r]=a}function $n(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-$(a),g=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~g}}function Ja(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-$(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Ue=0;function qc(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Kc,el,Qc,Zc,Jc,tl=!1,go=[],or=null,ar=null,lr=null,rs=new Map,is=new Map,ur=[],A0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eh(n,r){switch(n){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":rs.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":is.delete(r.pointerId)}}function ss(n,r,a,c,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},r!==null&&(r=vs(r),r!==null&&el(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function P0(n,r,a,c,d){switch(r){case"focusin":return or=ss(or,n,r,a,c,d),!0;case"dragenter":return ar=ss(ar,n,r,a,c,d),!0;case"mouseover":return lr=ss(lr,n,r,a,c,d),!0;case"pointerover":var g=d.pointerId;return rs.set(g,ss(rs.get(g)||null,n,r,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,is.set(g,ss(is.get(g)||null,n,r,a,c,d)),!0}return!1}function th(n){var r=Nr(n.target);if(r!==null){var a=jn(r);if(a!==null){if(r=a.tag,r===13){if(r=ho(a),r!==null){n.blockedOn=r,Jc(n.priority,function(){Qc(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yo(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=rl(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Lr=c,a.target.dispatchEvent(c),Lr=null}else return r=vs(a),r!==null&&el(r),n.blockedOn=a,!1;r.shift()}return!0}function nh(n,r,a){yo(n)&&a.delete(r)}function T0(){tl=!1,or!==null&&yo(or)&&(or=null),ar!==null&&yo(ar)&&(ar=null),lr!==null&&yo(lr)&&(lr=null),rs.forEach(nh),is.forEach(nh)}function os(n,r){n.blockedOn===r&&(n.blockedOn=null,tl||(tl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,T0)))}function as(n){function r(d){return os(d,n)}if(0<go.length){os(go[0],n);for(var a=1;a<go.length;a++){var c=go[a];c.blockedOn===n&&(c.blockedOn=null)}}for(or!==null&&os(or,n),ar!==null&&os(ar,n),lr!==null&&os(lr,n),rs.forEach(r),is.forEach(r),a=0;a<ur.length;a++)c=ur[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<ur.length&&(a=ur[0],a.blockedOn===null);)th(a),a.blockedOn===null&&ur.shift()}var mi=I.ReactCurrentBatchConfig,xo=!0;function E0(n,r,a,c){var d=Ue,g=mi.transition;mi.transition=null;try{Ue=1,nl(n,r,a,c)}finally{Ue=d,mi.transition=g}}function M0(n,r,a,c){var d=Ue,g=mi.transition;mi.transition=null;try{Ue=4,nl(n,r,a,c)}finally{Ue=d,mi.transition=g}}function nl(n,r,a,c){if(xo){var d=rl(n,r,a,c);if(d===null)_l(n,r,c,vo,a),eh(n,c);else if(P0(d,n,r,a,c))c.stopPropagation();else if(eh(n,c),r&4&&-1<A0.indexOf(n)){for(;d!==null;){var g=vs(d);if(g!==null&&Kc(g),g=rl(n,r,a,c),g===null&&_l(n,r,c,vo,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else _l(n,r,c,null,a)}}var vo=null;function rl(n,r,a,c){if(vo=null,n=ui(c),n=Nr(n),n!==null)if(r=jn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=ho(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return vo=n,null}function rh(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mo()){case pi:return 1;case k:return 4;case j:case U:return 16;case le:return 536870912;default:return 16}default:return 16}}var cr=null,il=null,_o=null;function ih(){if(_o)return _o;var n,r=il,a=r.length,c,d="value"in cr?cr.value:cr.textContent,g=d.length;for(n=0;n<a&&r[n]===d[n];n++);var x=a-n;for(c=1;c<=x&&r[a-c]===d[g-c];c++);return _o=d.slice(n,1<c?1-c:void 0)}function wo(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function So(){return!0}function sh(){return!1}function Kt(n){function r(a,c,d,g,x){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?So:sh,this.isPropagationStopped=sh,this}return te(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=So)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=So)},persist:function(){},isPersistent:So}),r}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=Kt(gi),ls=te({},gi,{view:0,detail:0}),R0=Kt(ls),ol,al,us,ko=te({},ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ul,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==us&&(us&&n.type==="mousemove"?(ol=n.screenX-us.screenX,al=n.screenY-us.screenY):al=ol=0,us=n),ol)},movementY:function(n){return"movementY"in n?n.movementY:al}}),oh=Kt(ko),I0=te({},ko,{dataTransfer:0}),F0=Kt(I0),z0=te({},ls,{relatedTarget:0}),ll=Kt(z0),L0=te({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),B0=Kt(L0),j0=te({},gi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),D0=Kt(j0),O0=te({},gi,{data:0}),ah=Kt(O0),N0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G0(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=U0[n])?!!r[n]:!1}function ul(){return G0}var W0=te({},ls,{key:function(n){if(n.key){var r=N0[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=wo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ul,charCode:function(n){return n.type==="keypress"?wo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?wo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),H0=Kt(W0),V0=te({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lh=Kt(V0),Y0=te({},ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ul}),X0=Kt(Y0),q0=te({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),K0=Kt(q0),Q0=te({},ko,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Z0=Kt(Q0),J0=[9,13,27,32],cl=h&&"CompositionEvent"in window,cs=null;h&&"documentMode"in document&&(cs=document.documentMode);var em=h&&"TextEvent"in window&&!cs,uh=h&&(!cl||cs&&8<cs&&11>=cs),ch=" ",hh=!1;function dh(n,r){switch(n){case"keyup":return J0.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var yi=!1;function tm(n,r){switch(n){case"compositionend":return fh(r);case"keypress":return r.which!==32?null:(hh=!0,ch);case"textInput":return n=r.data,n===ch&&hh?null:n;default:return null}}function nm(n,r){if(yi)return n==="compositionend"||!cl&&dh(n,r)?(n=ih(),_o=il=cr=null,yi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return uh&&r.locale!=="ko"?null:r.data;default:return null}}var rm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ph(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!rm[n.type]:r==="textarea"}function mh(n,r,a,c){lo(c),r=To(r,"onChange"),0<r.length&&(a=new sl("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var hs=null,ds=null;function im(n){Fh(n,0)}function Co(n){var r=Si(n);if(Ve(r))return n}function sm(n,r){if(n==="change")return r}var gh=!1;if(h){var hl;if(h){var dl="oninput"in document;if(!dl){var yh=document.createElement("div");yh.setAttribute("oninput","return;"),dl=typeof yh.oninput=="function"}hl=dl}else hl=!1;gh=hl&&(!document.documentMode||9<document.documentMode)}function xh(){hs&&(hs.detachEvent("onpropertychange",vh),ds=hs=null)}function vh(n){if(n.propertyName==="value"&&Co(ds)){var r=[];mh(r,ds,n,ui(n)),co(im,r)}}function om(n,r,a){n==="focusin"?(xh(),hs=r,ds=a,hs.attachEvent("onpropertychange",vh)):n==="focusout"&&xh()}function am(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Co(ds)}function lm(n,r){if(n==="click")return Co(r)}function um(n,r){if(n==="input"||n==="change")return Co(r)}function cm(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var pn=typeof Object.is=="function"?Object.is:cm;function fs(n,r){if(pn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!f.call(r,d)||!pn(n[d],r[d]))return!1}return!0}function _h(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function wh(n,r){var a=_h(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_h(a)}}function Sh(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Sh(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function kh(){for(var n=window,r=At();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=At(n.document)}return r}function fl(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function hm(n){var r=kh(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Sh(a.ownerDocument.documentElement,a)){if(c!==null&&fl(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,g=Math.min(c.start,d);c=c.end===void 0?g:Math.min(c.end,d),!n.extend&&g>c&&(d=c,c=g,g=d),d=wh(a,g);var x=wh(a,c);d&&x&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),g>c?(n.addRange(r),n.extend(x.node,x.offset)):(r.setEnd(x.node,x.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var dm=h&&"documentMode"in document&&11>=document.documentMode,xi=null,pl=null,ps=null,ml=!1;function Ch(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ml||xi==null||xi!==At(c)||(c=xi,"selectionStart"in c&&fl(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ps&&fs(ps,c)||(ps=c,c=To(pl,"onSelect"),0<c.length&&(r=new sl("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=xi)))}function bo(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var vi={animationend:bo("Animation","AnimationEnd"),animationiteration:bo("Animation","AnimationIteration"),animationstart:bo("Animation","AnimationStart"),transitionend:bo("Transition","TransitionEnd")},gl={},bh={};h&&(bh=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function Ao(n){if(gl[n])return gl[n];if(!vi[n])return n;var r=vi[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in bh)return gl[n]=r[a];return n}var Ah=Ao("animationend"),Ph=Ao("animationiteration"),Th=Ao("animationstart"),Eh=Ao("transitionend"),Mh=new Map,Rh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(n,r){Mh.set(n,r),l(r,[n])}for(var yl=0;yl<Rh.length;yl++){var xl=Rh[yl],fm=xl.toLowerCase(),pm=xl[0].toUpperCase()+xl.slice(1);hr(fm,"on"+pm)}hr(Ah,"onAnimationEnd"),hr(Ph,"onAnimationIteration"),hr(Th,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(Eh,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mm=new Set("cancel close invalid load scroll toggle".split(" ").concat(ms));function Ih(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,Qa(c,r,void 0,n),n.currentTarget=null}function Fh(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var g=void 0;if(r)for(var x=c.length-1;0<=x;x--){var C=c[x],A=C.instance,B=C.currentTarget;if(C=C.listener,A!==g&&d.isPropagationStopped())break e;Ih(d,C,B),g=A}else for(x=0;x<c.length;x++){if(C=c[x],A=C.instance,B=C.currentTarget,C=C.listener,A!==g&&d.isPropagationStopped())break e;Ih(d,C,B),g=A}}}if(fi)throw n=ns,fi=!1,ns=null,n}function Qe(n,r){var a=r[Al];a===void 0&&(a=r[Al]=new Set);var c=n+"__bubble";a.has(c)||(zh(r,n,2,!1),a.add(c))}function vl(n,r,a){var c=0;r&&(c|=4),zh(a,n,c,r)}var Po="_reactListening"+Math.random().toString(36).slice(2);function gs(n){if(!n[Po]){n[Po]=!0,s.forEach(function(a){a!=="selectionchange"&&(mm.has(a)||vl(a,!1,n),vl(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Po]||(r[Po]=!0,vl("selectionchange",!1,r))}}function zh(n,r,a,c){switch(rh(r)){case 1:var d=E0;break;case 4:d=M0;break;default:d=nl}a=d.bind(null,r,a,n),d=void 0,!ts||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function _l(n,r,a,c,d){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(x===4)for(x=c.return;x!==null;){var A=x.tag;if((A===3||A===4)&&(A=x.stateNode.containerInfo,A===d||A.nodeType===8&&A.parentNode===d))return;x=x.return}for(;C!==null;){if(x=Nr(C),x===null)return;if(A=x.tag,A===5||A===6){c=g=x;continue e}C=C.parentNode}}c=c.return}co(function(){var B=g,H=ui(a),Y=[];e:{var W=Mh.get(n);if(W!==void 0){var oe=sl,ce=n;switch(n){case"keypress":if(wo(a)===0)break e;case"keydown":case"keyup":oe=H0;break;case"focusin":ce="focus",oe=ll;break;case"focusout":ce="blur",oe=ll;break;case"beforeblur":case"afterblur":oe=ll;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=F0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=X0;break;case Ah:case Ph:case Th:oe=B0;break;case Eh:oe=K0;break;case"scroll":oe=R0;break;case"wheel":oe=Z0;break;case"copy":case"cut":case"paste":oe=D0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=lh}var he=(r&4)!==0,dt=!he&&n==="scroll",F=he?W!==null?W+"Capture":null:W;he=[];for(var M=B,L;M!==null;){L=M;var q=L.stateNode;if(L.tag===5&&q!==null&&(L=q,F!==null&&(q=jr(M,F),q!=null&&he.push(ys(M,q,L)))),dt)break;M=M.return}0<he.length&&(W=new oe(W,ce,null,a,H),Y.push({event:W,listeners:he}))}}if((r&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",oe=n==="mouseout"||n==="pointerout",W&&a!==Lr&&(ce=a.relatedTarget||a.fromElement)&&(Nr(ce)||ce[Un]))break e;if((oe||W)&&(W=H.window===H?H:(W=H.ownerDocument)?W.defaultView||W.parentWindow:window,oe?(ce=a.relatedTarget||a.toElement,oe=B,ce=ce?Nr(ce):null,ce!==null&&(dt=jn(ce),ce!==dt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(oe=null,ce=B),oe!==ce)){if(he=oh,q="onMouseLeave",F="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(he=lh,q="onPointerLeave",F="onPointerEnter",M="pointer"),dt=oe==null?W:Si(oe),L=ce==null?W:Si(ce),W=new he(q,M+"leave",oe,a,H),W.target=dt,W.relatedTarget=L,q=null,Nr(H)===B&&(he=new he(F,M+"enter",ce,a,H),he.target=L,he.relatedTarget=dt,q=he),dt=q,oe&&ce)t:{for(he=oe,F=ce,M=0,L=he;L;L=_i(L))M++;for(L=0,q=F;q;q=_i(q))L++;for(;0<M-L;)he=_i(he),M--;for(;0<L-M;)F=_i(F),L--;for(;M--;){if(he===F||F!==null&&he===F.alternate)break t;he=_i(he),F=_i(F)}he=null}else he=null;oe!==null&&Lh(Y,W,oe,he,!1),ce!==null&&dt!==null&&Lh(Y,dt,ce,he,!0)}}e:{if(W=B?Si(B):window,oe=W.nodeName&&W.nodeName.toLowerCase(),oe==="select"||oe==="input"&&W.type==="file")var de=sm;else if(ph(W))if(gh)de=um;else{de=am;var ge=om}else(oe=W.nodeName)&&oe.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(de=lm);if(de&&(de=de(n,B))){mh(Y,de,a,H);break e}ge&&ge(n,W,B),n==="focusout"&&(ge=W._wrapperState)&&ge.controlled&&W.type==="number"&&qt(W,"number",W.value)}switch(ge=B?Si(B):window,n){case"focusin":(ph(ge)||ge.contentEditable==="true")&&(xi=ge,pl=B,ps=null);break;case"focusout":ps=pl=xi=null;break;case"mousedown":ml=!0;break;case"contextmenu":case"mouseup":case"dragend":ml=!1,Ch(Y,a,H);break;case"selectionchange":if(dm)break;case"keydown":case"keyup":Ch(Y,a,H)}var ye;if(cl)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else yi?dh(n,a)&&(we="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(uh&&a.locale!=="ko"&&(yi||we!=="onCompositionStart"?we==="onCompositionEnd"&&yi&&(ye=ih()):(cr=H,il="value"in cr?cr.value:cr.textContent,yi=!0)),ge=To(B,we),0<ge.length&&(we=new ah(we,n,null,a,H),Y.push({event:we,listeners:ge}),ye?we.data=ye:(ye=fh(a),ye!==null&&(we.data=ye)))),(ye=em?tm(n,a):nm(n,a))&&(B=To(B,"onBeforeInput"),0<B.length&&(H=new ah("onBeforeInput","beforeinput",null,a,H),Y.push({event:H,listeners:B}),H.data=ye))}Fh(Y,r)})}function ys(n,r,a){return{instance:n,listener:r,currentTarget:a}}function To(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=jr(n,a),g!=null&&c.unshift(ys(n,g,d)),g=jr(n,r),g!=null&&c.push(ys(n,g,d))),n=n.return}return c}function _i(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Lh(n,r,a,c,d){for(var g=r._reactName,x=[];a!==null&&a!==c;){var C=a,A=C.alternate,B=C.stateNode;if(A!==null&&A===c)break;C.tag===5&&B!==null&&(C=B,d?(A=jr(a,g),A!=null&&x.unshift(ys(a,A,C))):d||(A=jr(a,g),A!=null&&x.push(ys(a,A,C)))),a=a.return}x.length!==0&&n.push({event:r,listeners:x})}var gm=/\r\n?/g,ym=/\u0000|\uFFFD/g;function Bh(n){return(typeof n=="string"?n:""+n).replace(gm,`
`).replace(ym,"")}function Eo(n,r,a){if(r=Bh(r),Bh(n)!==r&&a)throw Error(t(425))}function Mo(){}var wl=null,Sl=null;function kl(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Cl=typeof setTimeout=="function"?setTimeout:void 0,xm=typeof clearTimeout=="function"?clearTimeout:void 0,jh=typeof Promise=="function"?Promise:void 0,vm=typeof queueMicrotask=="function"?queueMicrotask:typeof jh<"u"?function(n){return jh.resolve(null).then(n).catch(_m)}:Cl;function _m(n){setTimeout(function(){throw n})}function bl(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),as(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);as(r)}function dr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Dh(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var wi=Math.random().toString(36).slice(2),En="__reactFiber$"+wi,xs="__reactProps$"+wi,Un="__reactContainer$"+wi,Al="__reactEvents$"+wi,wm="__reactListeners$"+wi,Sm="__reactHandles$"+wi;function Nr(n){var r=n[En];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Un]||a[En]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Dh(n);n!==null;){if(a=n[En])return a;n=Dh(n)}return r}n=a,a=n.parentNode}return null}function vs(n){return n=n[En]||n[Un],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Si(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ro(n){return n[xs]||null}var Pl=[],ki=-1;function fr(n){return{current:n}}function Ze(n){0>ki||(n.current=Pl[ki],Pl[ki]=null,ki--)}function Xe(n,r){ki++,Pl[ki]=n.current,n.current=r}var pr={},Rt=fr(pr),Ut=fr(!1),$r=pr;function Ci(n,r){var a=n.type.contextTypes;if(!a)return pr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=r[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function Gt(n){return n=n.childContextTypes,n!=null}function Io(){Ze(Ut),Ze(Rt)}function Oh(n,r,a){if(Rt.current!==pr)throw Error(t(168));Xe(Rt,r),Xe(Ut,a)}function Nh(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,Ne(n)||"Unknown",d));return te({},a,c)}function Fo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||pr,$r=Rt.current,Xe(Rt,n),Xe(Ut,Ut.current),!0}function $h(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Nh(n,r,$r),c.__reactInternalMemoizedMergedChildContext=n,Ze(Ut),Ze(Rt),Xe(Rt,n)):Ze(Ut),Xe(Ut,a)}var Gn=null,zo=!1,Tl=!1;function Uh(n){Gn===null?Gn=[n]:Gn.push(n)}function km(n){zo=!0,Uh(n)}function mr(){if(!Tl&&Gn!==null){Tl=!0;var n=0,r=Ue;try{var a=Gn;for(Ue=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Gn=null,zo=!1}catch(d){throw Gn!==null&&(Gn=Gn.slice(n+1)),qe(pi,mr),d}finally{Ue=r,Tl=!1}}return null}var bi=[],Ai=0,Lo=null,Bo=0,nn=[],rn=0,Ur=null,Wn=1,Hn="";function Gr(n,r){bi[Ai++]=Bo,bi[Ai++]=Lo,Lo=n,Bo=r}function Gh(n,r,a){nn[rn++]=Wn,nn[rn++]=Hn,nn[rn++]=Ur,Ur=n;var c=Wn;n=Hn;var d=32-$(c)-1;c&=~(1<<d),a+=1;var g=32-$(r)+d;if(30<g){var x=d-d%5;g=(c&(1<<x)-1).toString(32),c>>=x,d-=x,Wn=1<<32-$(r)+d|a<<d|c,Hn=g+n}else Wn=1<<g|a<<d|c,Hn=n}function El(n){n.return!==null&&(Gr(n,1),Gh(n,1,0))}function Ml(n){for(;n===Lo;)Lo=bi[--Ai],bi[Ai]=null,Bo=bi[--Ai],bi[Ai]=null;for(;n===Ur;)Ur=nn[--rn],nn[rn]=null,Hn=nn[--rn],nn[rn]=null,Wn=nn[--rn],nn[rn]=null}var Qt=null,Zt=null,it=!1,mn=null;function Wh(n,r){var a=ln(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function Hh(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Qt=n,Zt=dr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Qt=n,Zt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Ur!==null?{id:Wn,overflow:Hn}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=ln(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,Qt=n,Zt=null,!0):!1;default:return!1}}function Rl(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Il(n){if(it){var r=Zt;if(r){var a=r;if(!Hh(n,r)){if(Rl(n))throw Error(t(418));r=dr(a.nextSibling);var c=Qt;r&&Hh(n,r)?Wh(c,a):(n.flags=n.flags&-4097|2,it=!1,Qt=n)}}else{if(Rl(n))throw Error(t(418));n.flags=n.flags&-4097|2,it=!1,Qt=n}}}function Vh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Qt=n}function jo(n){if(n!==Qt)return!1;if(!it)return Vh(n),it=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!kl(n.type,n.memoizedProps)),r&&(r=Zt)){if(Rl(n))throw Yh(),Error(t(418));for(;r;)Wh(n,r),r=dr(r.nextSibling)}if(Vh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){Zt=dr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}Zt=null}}else Zt=Qt?dr(n.stateNode.nextSibling):null;return!0}function Yh(){for(var n=Zt;n;)n=dr(n.nextSibling)}function Pi(){Zt=Qt=null,it=!1}function Fl(n){mn===null?mn=[n]:mn.push(n)}var Cm=I.ReactCurrentBatchConfig;function _s(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,g=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(x){var C=d.refs;x===null?delete C[g]:C[g]=x},r._stringRef=g,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Do(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Xh(n){var r=n._init;return r(n._payload)}function qh(n){function r(F,M){if(n){var L=F.deletions;L===null?(F.deletions=[M],F.flags|=16):L.push(M)}}function a(F,M){if(!n)return null;for(;M!==null;)r(F,M),M=M.sibling;return null}function c(F,M){for(F=new Map;M!==null;)M.key!==null?F.set(M.key,M):F.set(M.index,M),M=M.sibling;return F}function d(F,M){return F=kr(F,M),F.index=0,F.sibling=null,F}function g(F,M,L){return F.index=L,n?(L=F.alternate,L!==null?(L=L.index,L<M?(F.flags|=2,M):L):(F.flags|=2,M)):(F.flags|=1048576,M)}function x(F){return n&&F.alternate===null&&(F.flags|=2),F}function C(F,M,L,q){return M===null||M.tag!==6?(M=Cu(L,F.mode,q),M.return=F,M):(M=d(M,L),M.return=F,M)}function A(F,M,L,q){var de=L.type;return de===O?H(F,M,L.props.children,q,L.key):M!==null&&(M.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ee&&Xh(de)===M.type)?(q=d(M,L.props),q.ref=_s(F,M,L),q.return=F,q):(q=la(L.type,L.key,L.props,null,F.mode,q),q.ref=_s(F,M,L),q.return=F,q)}function B(F,M,L,q){return M===null||M.tag!==4||M.stateNode.containerInfo!==L.containerInfo||M.stateNode.implementation!==L.implementation?(M=bu(L,F.mode,q),M.return=F,M):(M=d(M,L.children||[]),M.return=F,M)}function H(F,M,L,q,de){return M===null||M.tag!==7?(M=Qr(L,F.mode,q,de),M.return=F,M):(M=d(M,L),M.return=F,M)}function Y(F,M,L){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Cu(""+M,F.mode,L),M.return=F,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case V:return L=la(M.type,M.key,M.props,null,F.mode,L),L.ref=_s(F,null,M),L.return=F,L;case D:return M=bu(M,F.mode,L),M.return=F,M;case ee:var q=M._init;return Y(F,q(M._payload),L)}if(Tn(M)||Z(M))return M=Qr(M,F.mode,L,null),M.return=F,M;Do(F,M)}return null}function W(F,M,L,q){var de=M!==null?M.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return de!==null?null:C(F,M,""+L,q);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case V:return L.key===de?A(F,M,L,q):null;case D:return L.key===de?B(F,M,L,q):null;case ee:return de=L._init,W(F,M,de(L._payload),q)}if(Tn(L)||Z(L))return de!==null?null:H(F,M,L,q,null);Do(F,L)}return null}function oe(F,M,L,q,de){if(typeof q=="string"&&q!==""||typeof q=="number")return F=F.get(L)||null,C(M,F,""+q,de);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case V:return F=F.get(q.key===null?L:q.key)||null,A(M,F,q,de);case D:return F=F.get(q.key===null?L:q.key)||null,B(M,F,q,de);case ee:var ge=q._init;return oe(F,M,L,ge(q._payload),de)}if(Tn(q)||Z(q))return F=F.get(L)||null,H(M,F,q,de,null);Do(M,q)}return null}function ce(F,M,L,q){for(var de=null,ge=null,ye=M,we=M=0,Ct=null;ye!==null&&we<L.length;we++){ye.index>we?(Ct=ye,ye=null):Ct=ye.sibling;var Oe=W(F,ye,L[we],q);if(Oe===null){ye===null&&(ye=Ct);break}n&&ye&&Oe.alternate===null&&r(F,ye),M=g(Oe,M,we),ge===null?de=Oe:ge.sibling=Oe,ge=Oe,ye=Ct}if(we===L.length)return a(F,ye),it&&Gr(F,we),de;if(ye===null){for(;we<L.length;we++)ye=Y(F,L[we],q),ye!==null&&(M=g(ye,M,we),ge===null?de=ye:ge.sibling=ye,ge=ye);return it&&Gr(F,we),de}for(ye=c(F,ye);we<L.length;we++)Ct=oe(ye,F,we,L[we],q),Ct!==null&&(n&&Ct.alternate!==null&&ye.delete(Ct.key===null?we:Ct.key),M=g(Ct,M,we),ge===null?de=Ct:ge.sibling=Ct,ge=Ct);return n&&ye.forEach(function(Cr){return r(F,Cr)}),it&&Gr(F,we),de}function he(F,M,L,q){var de=Z(L);if(typeof de!="function")throw Error(t(150));if(L=de.call(L),L==null)throw Error(t(151));for(var ge=de=null,ye=M,we=M=0,Ct=null,Oe=L.next();ye!==null&&!Oe.done;we++,Oe=L.next()){ye.index>we?(Ct=ye,ye=null):Ct=ye.sibling;var Cr=W(F,ye,Oe.value,q);if(Cr===null){ye===null&&(ye=Ct);break}n&&ye&&Cr.alternate===null&&r(F,ye),M=g(Cr,M,we),ge===null?de=Cr:ge.sibling=Cr,ge=Cr,ye=Ct}if(Oe.done)return a(F,ye),it&&Gr(F,we),de;if(ye===null){for(;!Oe.done;we++,Oe=L.next())Oe=Y(F,Oe.value,q),Oe!==null&&(M=g(Oe,M,we),ge===null?de=Oe:ge.sibling=Oe,ge=Oe);return it&&Gr(F,we),de}for(ye=c(F,ye);!Oe.done;we++,Oe=L.next())Oe=oe(ye,F,we,Oe.value,q),Oe!==null&&(n&&Oe.alternate!==null&&ye.delete(Oe.key===null?we:Oe.key),M=g(Oe,M,we),ge===null?de=Oe:ge.sibling=Oe,ge=Oe);return n&&ye.forEach(function(r2){return r(F,r2)}),it&&Gr(F,we),de}function dt(F,M,L,q){if(typeof L=="object"&&L!==null&&L.type===O&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case V:e:{for(var de=L.key,ge=M;ge!==null;){if(ge.key===de){if(de=L.type,de===O){if(ge.tag===7){a(F,ge.sibling),M=d(ge,L.props.children),M.return=F,F=M;break e}}else if(ge.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ee&&Xh(de)===ge.type){a(F,ge.sibling),M=d(ge,L.props),M.ref=_s(F,ge,L),M.return=F,F=M;break e}a(F,ge);break}else r(F,ge);ge=ge.sibling}L.type===O?(M=Qr(L.props.children,F.mode,q,L.key),M.return=F,F=M):(q=la(L.type,L.key,L.props,null,F.mode,q),q.ref=_s(F,M,L),q.return=F,F=q)}return x(F);case D:e:{for(ge=L.key;M!==null;){if(M.key===ge)if(M.tag===4&&M.stateNode.containerInfo===L.containerInfo&&M.stateNode.implementation===L.implementation){a(F,M.sibling),M=d(M,L.children||[]),M.return=F,F=M;break e}else{a(F,M);break}else r(F,M);M=M.sibling}M=bu(L,F.mode,q),M.return=F,F=M}return x(F);case ee:return ge=L._init,dt(F,M,ge(L._payload),q)}if(Tn(L))return ce(F,M,L,q);if(Z(L))return he(F,M,L,q);Do(F,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,M!==null&&M.tag===6?(a(F,M.sibling),M=d(M,L),M.return=F,F=M):(a(F,M),M=Cu(L,F.mode,q),M.return=F,F=M),x(F)):a(F,M)}return dt}var Ti=qh(!0),Kh=qh(!1),Oo=fr(null),No=null,Ei=null,zl=null;function Ll(){zl=Ei=No=null}function Bl(n){var r=Oo.current;Ze(Oo),n._currentValue=r}function jl(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Mi(n,r){No=n,zl=Ei=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Wt=!0),n.firstContext=null)}function sn(n){var r=n._currentValue;if(zl!==n)if(n={context:n,memoizedValue:r,next:null},Ei===null){if(No===null)throw Error(t(308));Ei=n,No.dependencies={lanes:0,firstContext:n}}else Ei=Ei.next=n;return r}var Wr=null;function Dl(n){Wr===null?Wr=[n]:Wr.push(n)}function Qh(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,Dl(r)):(a.next=d.next,d.next=a),r.interleaved=a,Vn(n,c)}function Vn(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var gr=!1;function Ol(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zh(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Yn(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function yr(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,Vn(n,a)}return d=c.interleaved,d===null?(r.next=r,Dl(c)):(r.next=d.next,d.next=r),c.interleaved=r,Vn(n,a)}function $o(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ja(n,a)}}function Jh(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=x:g=g.next=x,a=a.next}while(a!==null);g===null?d=g=r:g=g.next=r}else d=g=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function Uo(n,r,a,c){var d=n.updateQueue;gr=!1;var g=d.firstBaseUpdate,x=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var A=C,B=A.next;A.next=null,x===null?g=B:x.next=B,x=A;var H=n.alternate;H!==null&&(H=H.updateQueue,C=H.lastBaseUpdate,C!==x&&(C===null?H.firstBaseUpdate=B:C.next=B,H.lastBaseUpdate=A))}if(g!==null){var Y=d.baseState;x=0,H=B=A=null,C=g;do{var W=C.lane,oe=C.eventTime;if((c&W)===W){H!==null&&(H=H.next={eventTime:oe,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ce=n,he=C;switch(W=r,oe=a,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){Y=ce.call(oe,Y,W);break e}Y=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,W=typeof ce=="function"?ce.call(oe,Y,W):ce,W==null)break e;Y=te({},Y,W);break e;case 2:gr=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,W=d.effects,W===null?d.effects=[C]:W.push(C))}else oe={eventTime:oe,lane:W,tag:C.tag,payload:C.payload,callback:C.callback,next:null},H===null?(B=H=oe,A=Y):H=H.next=oe,x|=W;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;W=C,C=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);if(H===null&&(A=Y),d.baseState=A,d.firstBaseUpdate=B,d.lastBaseUpdate=H,r=d.shared.interleaved,r!==null){d=r;do x|=d.lane,d=d.next;while(d!==r)}else g===null&&(d.shared.lanes=0);Yr|=x,n.lanes=x,n.memoizedState=Y}}function ed(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ws={},Mn=fr(ws),Ss=fr(ws),ks=fr(ws);function Hr(n){if(n===ws)throw Error(t(174));return n}function Nl(n,r){switch(Xe(ks,r),Xe(Ss,n),Xe(Mn,ws),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ai(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=ai(r,n)}Ze(Mn),Xe(Mn,r)}function Ri(){Ze(Mn),Ze(Ss),Ze(ks)}function td(n){Hr(ks.current);var r=Hr(Mn.current),a=ai(r,n.type);r!==a&&(Xe(Ss,n),Xe(Mn,a))}function $l(n){Ss.current===n&&(Ze(Mn),Ze(Ss))}var st=fr(0);function Go(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ul=[];function Gl(){for(var n=0;n<Ul.length;n++)Ul[n]._workInProgressVersionPrimary=null;Ul.length=0}var Wo=I.ReactCurrentDispatcher,Wl=I.ReactCurrentBatchConfig,Vr=0,ot=null,vt=null,St=null,Ho=!1,Cs=!1,bs=0,bm=0;function It(){throw Error(t(321))}function Hl(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!pn(n[a],r[a]))return!1;return!0}function Vl(n,r,a,c,d,g){if(Vr=g,ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Wo.current=n===null||n.memoizedState===null?Em:Mm,n=a(c,d),Cs){g=0;do{if(Cs=!1,bs=0,25<=g)throw Error(t(301));g+=1,St=vt=null,r.updateQueue=null,Wo.current=Rm,n=a(c,d)}while(Cs)}if(Wo.current=Xo,r=vt!==null&&vt.next!==null,Vr=0,St=vt=ot=null,Ho=!1,r)throw Error(t(300));return n}function Yl(){var n=bs!==0;return bs=0,n}function Rn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?ot.memoizedState=St=n:St=St.next=n,St}function on(){if(vt===null){var n=ot.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var r=St===null?ot.memoizedState:St.next;if(r!==null)St=r,vt=n;else{if(n===null)throw Error(t(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},St===null?ot.memoizedState=St=n:St=St.next=n}return St}function As(n,r){return typeof r=="function"?r(n):r}function Xl(n){var r=on(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=vt,d=c.baseQueue,g=a.pending;if(g!==null){if(d!==null){var x=d.next;d.next=g.next,g.next=x}c.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,c=c.baseState;var C=x=null,A=null,B=g;do{var H=B.lane;if((Vr&H)===H)A!==null&&(A=A.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var Y={lane:H,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};A===null?(C=A=Y,x=c):A=A.next=Y,ot.lanes|=H,Yr|=H}B=B.next}while(B!==null&&B!==g);A===null?x=c:A.next=C,pn(c,r.memoizedState)||(Wt=!0),r.memoizedState=c,r.baseState=x,r.baseQueue=A,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do g=d.lane,ot.lanes|=g,Yr|=g,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function ql(n){var r=on(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,g=r.memoizedState;if(d!==null){a.pending=null;var x=d=d.next;do g=n(g,x.action),x=x.next;while(x!==d);pn(g,r.memoizedState)||(Wt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),a.lastRenderedState=g}return[g,c]}function nd(){}function rd(n,r){var a=ot,c=on(),d=r(),g=!pn(c.memoizedState,d);if(g&&(c.memoizedState=d,Wt=!0),c=c.queue,Kl(od.bind(null,a,c,n),[n]),c.getSnapshot!==r||g||St!==null&&St.memoizedState.tag&1){if(a.flags|=2048,Ps(9,sd.bind(null,a,c,d,r),void 0,null),kt===null)throw Error(t(349));(Vr&30)!==0||id(a,r,d)}return d}function id(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=ot.updateQueue,r===null?(r={lastEffect:null,stores:null},ot.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function sd(n,r,a,c){r.value=a,r.getSnapshot=c,ad(r)&&ld(n)}function od(n,r,a){return a(function(){ad(r)&&ld(n)})}function ad(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!pn(n,a)}catch{return!0}}function ld(n){var r=Vn(n,1);r!==null&&vn(r,n,1,-1)}function ud(n){var r=Rn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:n},r.queue=n,n=n.dispatch=Tm.bind(null,ot,n),[r.memoizedState,n]}function Ps(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=ot.updateQueue,r===null?(r={lastEffect:null,stores:null},ot.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function cd(){return on().memoizedState}function Vo(n,r,a,c){var d=Rn();ot.flags|=n,d.memoizedState=Ps(1|r,a,void 0,c===void 0?null:c)}function Yo(n,r,a,c){var d=on();c=c===void 0?null:c;var g=void 0;if(vt!==null){var x=vt.memoizedState;if(g=x.destroy,c!==null&&Hl(c,x.deps)){d.memoizedState=Ps(r,a,g,c);return}}ot.flags|=n,d.memoizedState=Ps(1|r,a,g,c)}function hd(n,r){return Vo(8390656,8,n,r)}function Kl(n,r){return Yo(2048,8,n,r)}function dd(n,r){return Yo(4,2,n,r)}function fd(n,r){return Yo(4,4,n,r)}function pd(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function md(n,r,a){return a=a!=null?a.concat([n]):null,Yo(4,4,pd.bind(null,r,n),a)}function Ql(){}function gd(n,r){var a=on();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Hl(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function yd(n,r){var a=on();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Hl(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function xd(n,r,a){return(Vr&21)===0?(n.baseState&&(n.baseState=!1,Wt=!0),n.memoizedState=a):(pn(a,r)||(a=xt(),ot.lanes|=a,Yr|=a,n.baseState=!0),r)}function Am(n,r){var a=Ue;Ue=a!==0&&4>a?a:4,n(!0);var c=Wl.transition;Wl.transition={};try{n(!1),r()}finally{Ue=a,Wl.transition=c}}function vd(){return on().memoizedState}function Pm(n,r,a){var c=wr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},_d(n))wd(r,a);else if(a=Qh(n,r,a,c),a!==null){var d=Ot();vn(a,n,c,d),Sd(a,r,c)}}function Tm(n,r,a){var c=wr(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(_d(n))wd(r,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var x=r.lastRenderedState,C=g(x,a);if(d.hasEagerState=!0,d.eagerState=C,pn(C,x)){var A=r.interleaved;A===null?(d.next=d,Dl(r)):(d.next=A.next,A.next=d),r.interleaved=d;return}}catch{}finally{}a=Qh(n,r,d,c),a!==null&&(d=Ot(),vn(a,n,c,d),Sd(a,r,c))}}function _d(n){var r=n.alternate;return n===ot||r!==null&&r===ot}function wd(n,r){Cs=Ho=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Sd(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ja(n,a)}}var Xo={readContext:sn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},Em={readContext:sn,useCallback:function(n,r){return Rn().memoizedState=[n,r===void 0?null:r],n},useContext:sn,useEffect:hd,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Vo(4194308,4,pd.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Vo(4194308,4,n,r)},useInsertionEffect:function(n,r){return Vo(4,2,n,r)},useMemo:function(n,r){var a=Rn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Rn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=Pm.bind(null,ot,n),[c.memoizedState,n]},useRef:function(n){var r=Rn();return n={current:n},r.memoizedState=n},useState:ud,useDebugValue:Ql,useDeferredValue:function(n){return Rn().memoizedState=n},useTransition:function(){var n=ud(!1),r=n[0];return n=Am.bind(null,n[1]),Rn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=ot,d=Rn();if(it){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),kt===null)throw Error(t(349));(Vr&30)!==0||id(c,r,a)}d.memoizedState=a;var g={value:a,getSnapshot:r};return d.queue=g,hd(od.bind(null,c,g,n),[n]),c.flags|=2048,Ps(9,sd.bind(null,c,g,a,r),void 0,null),a},useId:function(){var n=Rn(),r=kt.identifierPrefix;if(it){var a=Hn,c=Wn;a=(c&~(1<<32-$(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=bs++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=bm++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Mm={readContext:sn,useCallback:gd,useContext:sn,useEffect:Kl,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:fd,useMemo:yd,useReducer:Xl,useRef:cd,useState:function(){return Xl(As)},useDebugValue:Ql,useDeferredValue:function(n){var r=on();return xd(r,vt.memoizedState,n)},useTransition:function(){var n=Xl(As)[0],r=on().memoizedState;return[n,r]},useMutableSource:nd,useSyncExternalStore:rd,useId:vd,unstable_isNewReconciler:!1},Rm={readContext:sn,useCallback:gd,useContext:sn,useEffect:Kl,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:fd,useMemo:yd,useReducer:ql,useRef:cd,useState:function(){return ql(As)},useDebugValue:Ql,useDeferredValue:function(n){var r=on();return vt===null?r.memoizedState=n:xd(r,vt.memoizedState,n)},useTransition:function(){var n=ql(As)[0],r=on().memoizedState;return[n,r]},useMutableSource:nd,useSyncExternalStore:rd,useId:vd,unstable_isNewReconciler:!1};function gn(n,r){if(n&&n.defaultProps){r=te({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function Zl(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:te({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var qo={isMounted:function(n){return(n=n._reactInternals)?jn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Ot(),d=wr(n),g=Yn(c,d);g.payload=r,a!=null&&(g.callback=a),r=yr(n,g,d),r!==null&&(vn(r,n,d,c),$o(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Ot(),d=wr(n),g=Yn(c,d);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=yr(n,g,d),r!==null&&(vn(r,n,d,c),$o(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Ot(),c=wr(n),d=Yn(a,c);d.tag=2,r!=null&&(d.callback=r),r=yr(n,d,c),r!==null&&(vn(r,n,c,a),$o(r,n,c))}};function kd(n,r,a,c,d,g,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,x):r.prototype&&r.prototype.isPureReactComponent?!fs(a,c)||!fs(d,g):!0}function Cd(n,r,a){var c=!1,d=pr,g=r.contextType;return typeof g=="object"&&g!==null?g=sn(g):(d=Gt(r)?$r:Rt.current,c=r.contextTypes,g=(c=c!=null)?Ci(n,d):pr),r=new r(a,g),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=qo,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=g),r}function bd(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&qo.enqueueReplaceState(r,r.state,null)}function Jl(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Ol(n);var g=r.contextType;typeof g=="object"&&g!==null?d.context=sn(g):(g=Gt(r)?$r:Rt.current,d.context=Ci(n,g)),d.state=n.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(Zl(n,r,g,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&qo.enqueueReplaceState(d,d.state,null),Uo(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Ii(n,r){try{var a="",c=r;do a+=Se(c),c=c.return;while(c);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:r,stack:d,digest:null}}function eu(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function tu(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Im=typeof WeakMap=="function"?WeakMap:Map;function Ad(n,r,a){a=Yn(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){na||(na=!0,gu=c),tu(n,r)},a}function Pd(n,r,a){a=Yn(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){tu(n,r)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){tu(n,r),typeof c!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var x=r.stack;this.componentDidCatch(r.value,{componentStack:x!==null?x:""})}),a}function Td(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Im;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=Vm.bind(null,n,r,a),r.then(n,n))}function Ed(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Md(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Yn(-1,1),r.tag=2,yr(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Fm=I.ReactCurrentOwner,Wt=!1;function Dt(n,r,a,c){r.child=n===null?Kh(r,null,a,c):Ti(r,n.child,a,c)}function Rd(n,r,a,c,d){a=a.render;var g=r.ref;return Mi(r,d),c=Vl(n,r,a,c,g,d),a=Yl(),n!==null&&!Wt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,Xn(n,r,d)):(it&&a&&El(r),r.flags|=1,Dt(n,r,c,d),r.child)}function Id(n,r,a,c,d){if(n===null){var g=a.type;return typeof g=="function"&&!ku(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=g,Fd(n,r,g,c,d)):(n=la(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,(n.lanes&d)===0){var x=g.memoizedProps;if(a=a.compare,a=a!==null?a:fs,a(x,c)&&n.ref===r.ref)return Xn(n,r,d)}return r.flags|=1,n=kr(g,c),n.ref=r.ref,n.return=r,r.child=n}function Fd(n,r,a,c,d){if(n!==null){var g=n.memoizedProps;if(fs(g,c)&&n.ref===r.ref)if(Wt=!1,r.pendingProps=c=g,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Wt=!0);else return r.lanes=n.lanes,Xn(n,r,d)}return nu(n,r,a,c,d)}function zd(n,r,a){var c=r.pendingProps,d=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(zi,Jt),Jt|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Xe(zi,Jt),Jt|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Xe(zi,Jt),Jt|=c}else g!==null?(c=g.baseLanes|a,r.memoizedState=null):c=a,Xe(zi,Jt),Jt|=c;return Dt(n,r,d,a),r.child}function Ld(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function nu(n,r,a,c,d){var g=Gt(a)?$r:Rt.current;return g=Ci(r,g),Mi(r,d),a=Vl(n,r,a,c,g,d),c=Yl(),n!==null&&!Wt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,Xn(n,r,d)):(it&&c&&El(r),r.flags|=1,Dt(n,r,a,d),r.child)}function Bd(n,r,a,c,d){if(Gt(a)){var g=!0;Fo(r)}else g=!1;if(Mi(r,d),r.stateNode===null)Qo(n,r),Cd(r,a,c),Jl(r,a,c,d),c=!0;else if(n===null){var x=r.stateNode,C=r.memoizedProps;x.props=C;var A=x.context,B=a.contextType;typeof B=="object"&&B!==null?B=sn(B):(B=Gt(a)?$r:Rt.current,B=Ci(r,B));var H=a.getDerivedStateFromProps,Y=typeof H=="function"||typeof x.getSnapshotBeforeUpdate=="function";Y||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==c||A!==B)&&bd(r,x,c,B),gr=!1;var W=r.memoizedState;x.state=W,Uo(r,c,x,d),A=r.memoizedState,C!==c||W!==A||Ut.current||gr?(typeof H=="function"&&(Zl(r,a,H,c),A=r.memoizedState),(C=gr||kd(r,a,C,c,W,A,B))?(Y||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=A),x.props=c,x.state=A,x.context=B,c=C):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{x=r.stateNode,Zh(n,r),C=r.memoizedProps,B=r.type===r.elementType?C:gn(r.type,C),x.props=B,Y=r.pendingProps,W=x.context,A=a.contextType,typeof A=="object"&&A!==null?A=sn(A):(A=Gt(a)?$r:Rt.current,A=Ci(r,A));var oe=a.getDerivedStateFromProps;(H=typeof oe=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==Y||W!==A)&&bd(r,x,c,A),gr=!1,W=r.memoizedState,x.state=W,Uo(r,c,x,d);var ce=r.memoizedState;C!==Y||W!==ce||Ut.current||gr?(typeof oe=="function"&&(Zl(r,a,oe,c),ce=r.memoizedState),(B=gr||kd(r,a,B,c,W,ce,A)||!1)?(H||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,ce,A),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,ce,A)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ce),x.props=c,x.state=ce,x.context=A,c=B):(typeof x.componentDidUpdate!="function"||C===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),c=!1)}return ru(n,r,a,c,g,d)}function ru(n,r,a,c,d,g){Ld(n,r);var x=(r.flags&128)!==0;if(!c&&!x)return d&&$h(r,a,!1),Xn(n,r,g);c=r.stateNode,Fm.current=r;var C=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&x?(r.child=Ti(r,n.child,null,g),r.child=Ti(r,null,C,g)):Dt(n,r,C,g),r.memoizedState=c.state,d&&$h(r,a,!0),r.child}function jd(n){var r=n.stateNode;r.pendingContext?Oh(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Oh(n,r.context,!1),Nl(n,r.containerInfo)}function Dd(n,r,a,c,d){return Pi(),Fl(d),r.flags|=256,Dt(n,r,a,c),r.child}var iu={dehydrated:null,treeContext:null,retryLane:0};function su(n){return{baseLanes:n,cachePool:null,transitions:null}}function Od(n,r,a){var c=r.pendingProps,d=st.current,g=!1,x=(r.flags&128)!==0,C;if((C=x)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(g=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Xe(st,d&1),n===null)return Il(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(x=c.children,n=c.fallback,g?(c=r.mode,g=r.child,x={mode:"hidden",children:x},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=x):g=ua(x,c,0,null),n=Qr(n,c,a,null),g.return=r,n.return=r,g.sibling=n,r.child=g,r.child.memoizedState=su(a),r.memoizedState=iu,n):ou(r,x));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return zm(n,r,x,c,C,d,a);if(g){g=c.fallback,x=r.mode,d=n.child,C=d.sibling;var A={mode:"hidden",children:c.children};return(x&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=A,r.deletions=null):(c=kr(d,A),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?g=kr(C,g):(g=Qr(g,x,a,null),g.flags|=2),g.return=r,c.return=r,c.sibling=g,r.child=c,c=g,g=r.child,x=n.child.memoizedState,x=x===null?su(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},g.memoizedState=x,g.childLanes=n.childLanes&~a,r.memoizedState=iu,c}return g=n.child,n=g.sibling,c=kr(g,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function ou(n,r){return r=ua({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Ko(n,r,a,c){return c!==null&&Fl(c),Ti(r,n.child,null,a),n=ou(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function zm(n,r,a,c,d,g,x){if(a)return r.flags&256?(r.flags&=-257,c=eu(Error(t(422))),Ko(n,r,x,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(g=c.fallback,d=r.mode,c=ua({mode:"visible",children:c.children},d,0,null),g=Qr(g,d,x,null),g.flags|=2,c.return=r,g.return=r,c.sibling=g,r.child=c,(r.mode&1)!==0&&Ti(r,n.child,null,x),r.child.memoizedState=su(x),r.memoizedState=iu,g);if((r.mode&1)===0)return Ko(n,r,x,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,g=Error(t(419)),c=eu(g,c,void 0),Ko(n,r,x,c)}if(C=(x&n.childLanes)!==0,Wt||C){if(c=kt,c!==null){switch(x&-x){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|x))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Vn(n,d),vn(c,n,d,-1))}return Su(),c=eu(Error(t(421))),Ko(n,r,x,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=Ym.bind(null,n),d._reactRetry=r,null):(n=g.treeContext,Zt=dr(d.nextSibling),Qt=r,it=!0,mn=null,n!==null&&(nn[rn++]=Wn,nn[rn++]=Hn,nn[rn++]=Ur,Wn=n.id,Hn=n.overflow,Ur=r),r=ou(r,c.children),r.flags|=4096,r)}function Nd(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),jl(n.return,r,a)}function au(n,r,a,c,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function $d(n,r,a){var c=r.pendingProps,d=c.revealOrder,g=c.tail;if(Dt(n,r,c.children,a),c=st.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Nd(n,a,r);else if(n.tag===19)Nd(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(st,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&Go(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),au(r,!1,d,a,g);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&Go(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}au(r,!0,a,null,g);break;case"together":au(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Qo(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Xn(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Yr|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=kr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=kr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Lm(n,r,a){switch(r.tag){case 3:jd(r),Pi();break;case 5:td(r);break;case 1:Gt(r.type)&&Fo(r);break;case 4:Nl(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Xe(Oo,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Xe(st,st.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Od(n,r,a):(Xe(st,st.current&1),n=Xn(n,r,a),n!==null?n.sibling:null);Xe(st,st.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return $d(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Xe(st,st.current),c)break;return null;case 22:case 23:return r.lanes=0,zd(n,r,a)}return Xn(n,r,a)}var Ud,lu,Gd,Wd;Ud=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},lu=function(){},Gd=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,Hr(Mn.current);var g=null;switch(a){case"input":d=Ye(n,d),c=Ye(n,c),g=[];break;case"select":d=te({},d,{value:void 0}),c=te({},c,{value:void 0}),g=[];break;case"textarea":d=Er(n,d),c=Er(n,c),g=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Mo)}zr(a,c);var x;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var C=d[B];for(x in C)C.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in c){var A=c[B];if(C=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&A!==C&&(A!=null||C!=null))if(B==="style")if(C){for(x in C)!C.hasOwnProperty(x)||A&&A.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in A)A.hasOwnProperty(x)&&C[x]!==A[x]&&(a||(a={}),a[x]=A[x])}else a||(g||(g=[]),g.push(B,a)),a=A;else B==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,C=C?C.__html:void 0,A!=null&&C!==A&&(g=g||[]).push(B,A)):B==="children"?typeof A!="string"&&typeof A!="number"||(g=g||[]).push(B,""+A):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(A!=null&&B==="onScroll"&&Qe("scroll",n),g||C===A||(g=[])):(g=g||[]).push(B,A))}a&&(g=g||[]).push("style",a);var B=g;(r.updateQueue=B)&&(r.flags|=4)}},Wd=function(n,r,a,c){a!==c&&(r.flags|=4)};function Ts(n,r){if(!it)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ft(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function Bm(n,r,a){var c=r.pendingProps;switch(Ml(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(r),null;case 1:return Gt(r.type)&&Io(),Ft(r),null;case 3:return c=r.stateNode,Ri(),Ze(Ut),Ze(Rt),Gl(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(jo(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,mn!==null&&(vu(mn),mn=null))),lu(n,r),Ft(r),null;case 5:$l(r);var d=Hr(ks.current);if(a=r.type,n!==null&&r.stateNode!=null)Gd(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Ft(r),null}if(n=Hr(Mn.current),jo(r)){c=r.stateNode,a=r.type;var g=r.memoizedProps;switch(c[En]=r,c[xs]=g,n=(r.mode&1)!==0,a){case"dialog":Qe("cancel",c),Qe("close",c);break;case"iframe":case"object":case"embed":Qe("load",c);break;case"video":case"audio":for(d=0;d<ms.length;d++)Qe(ms[d],c);break;case"source":Qe("error",c);break;case"img":case"image":case"link":Qe("error",c),Qe("load",c);break;case"details":Qe("toggle",c);break;case"input":jt(c,g),Qe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Qe("invalid",c);break;case"textarea":io(c,g),Qe("invalid",c)}zr(a,g),d=null;for(var x in g)if(g.hasOwnProperty(x)){var C=g[x];x==="children"?typeof C=="string"?c.textContent!==C&&(g.suppressHydrationWarning!==!0&&Eo(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&Eo(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(x)&&C!=null&&x==="onScroll"&&Qe("scroll",c)}switch(a){case"input":dn(c),Tr(c,g,!0);break;case"textarea":dn(c),Rr(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Mo)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{x=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Zi(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=x.createElement(a,{is:c.is}):(n=x.createElement(a),a==="select"&&(x=n,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):n=x.createElementNS(n,a),n[En]=r,n[xs]=c,Ud(n,r,!1,!1),r.stateNode=n;e:{switch(x=li(a,c),a){case"dialog":Qe("cancel",n),Qe("close",n),d=c;break;case"iframe":case"object":case"embed":Qe("load",n),d=c;break;case"video":case"audio":for(d=0;d<ms.length;d++)Qe(ms[d],n);d=c;break;case"source":Qe("error",n),d=c;break;case"img":case"image":case"link":Qe("error",n),Qe("load",n),d=c;break;case"details":Qe("toggle",n),d=c;break;case"input":jt(n,c),d=Ye(n,c),Qe("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=te({},c,{value:void 0}),Qe("invalid",n);break;case"textarea":io(n,c),d=Er(n,c),Qe("invalid",n);break;default:d=c}zr(a,d),C=d;for(g in C)if(C.hasOwnProperty(g)){var A=C[g];g==="style"?pe(n,A):g==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&nr(n,A)):g==="children"?typeof A=="string"?(a!=="textarea"||A!=="")&&Fr(n,A):typeof A=="number"&&Fr(n,""+A):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?A!=null&&g==="onScroll"&&Qe("scroll",n):A!=null&&E(n,g,A,x))}switch(a){case"input":dn(n),Tr(n,c,!1);break;case"textarea":dn(n),Rr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?tr(n,!!c.multiple,g,!1):c.defaultValue!=null&&tr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Mo)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ft(r),null;case 6:if(n&&r.stateNode!=null)Wd(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Hr(ks.current),Hr(Mn.current),jo(r)){if(c=r.stateNode,a=r.memoizedProps,c[En]=r,(g=c.nodeValue!==a)&&(n=Qt,n!==null))switch(n.tag){case 3:Eo(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Eo(c.nodeValue,a,(n.mode&1)!==0)}g&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[En]=r,r.stateNode=c}return Ft(r),null;case 13:if(Ze(st),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(it&&Zt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Yh(),Pi(),r.flags|=98560,g=!1;else if(g=jo(r),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[En]=r}else Pi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),g=!1}else mn!==null&&(vu(mn),mn=null),g=!0;if(!g)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(st.current&1)!==0?_t===0&&(_t=3):Su())),r.updateQueue!==null&&(r.flags|=4),Ft(r),null);case 4:return Ri(),lu(n,r),n===null&&gs(r.stateNode.containerInfo),Ft(r),null;case 10:return Bl(r.type._context),Ft(r),null;case 17:return Gt(r.type)&&Io(),Ft(r),null;case 19:if(Ze(st),g=r.memoizedState,g===null)return Ft(r),null;if(c=(r.flags&128)!==0,x=g.rendering,x===null)if(c)Ts(g,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(x=Go(n),x!==null){for(r.flags|=128,Ts(g,!1),c=x.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)g=a,n=c,g.flags&=14680066,x=g.alternate,x===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=x.childLanes,g.lanes=x.lanes,g.child=x.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=x.memoizedProps,g.memoizedState=x.memoizedState,g.updateQueue=x.updateQueue,g.type=x.type,n=x.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(st,st.current&1|2),r.child}n=n.sibling}g.tail!==null&&rt()>Li&&(r.flags|=128,c=!0,Ts(g,!1),r.lanes=4194304)}else{if(!c)if(n=Go(x),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Ts(g,!0),g.tail===null&&g.tailMode==="hidden"&&!x.alternate&&!it)return Ft(r),null}else 2*rt()-g.renderingStartTime>Li&&a!==1073741824&&(r.flags|=128,c=!0,Ts(g,!1),r.lanes=4194304);g.isBackwards?(x.sibling=r.child,r.child=x):(a=g.last,a!==null?a.sibling=x:r.child=x,g.last=x)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=rt(),r.sibling=null,a=st.current,Xe(st,c?a&1|2:a&1),r):(Ft(r),null);case 22:case 23:return wu(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(Jt&1073741824)!==0&&(Ft(r),r.subtreeFlags&6&&(r.flags|=8192)):Ft(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function jm(n,r){switch(Ml(r),r.tag){case 1:return Gt(r.type)&&Io(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Ri(),Ze(Ut),Ze(Rt),Gl(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return $l(r),null;case 13:if(Ze(st),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Pi()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Ze(st),null;case 4:return Ri(),null;case 10:return Bl(r.type._context),null;case 22:case 23:return wu(),null;case 24:return null;default:return null}}var Zo=!1,zt=!1,Dm=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Fi(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){lt(n,r,c)}else a.current=null}function uu(n,r,a){try{a()}catch(c){lt(n,r,c)}}var Hd=!1;function Om(n,r){if(wl=xo,n=kh(),fl(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var x=0,C=-1,A=-1,B=0,H=0,Y=n,W=null;t:for(;;){for(var oe;Y!==a||d!==0&&Y.nodeType!==3||(C=x+d),Y!==g||c!==0&&Y.nodeType!==3||(A=x+c),Y.nodeType===3&&(x+=Y.nodeValue.length),(oe=Y.firstChild)!==null;)W=Y,Y=oe;for(;;){if(Y===n)break t;if(W===a&&++B===d&&(C=x),W===g&&++H===c&&(A=x),(oe=Y.nextSibling)!==null)break;Y=W,W=Y.parentNode}Y=oe}a=C===-1||A===-1?null:{start:C,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(Sl={focusedElem:n,selectionRange:a},xo=!1,ue=r;ue!==null;)if(r=ue,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ue=n;else for(;ue!==null;){r=ue;try{var ce=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,dt=ce.memoizedState,F=r.stateNode,M=F.getSnapshotBeforeUpdate(r.elementType===r.type?he:gn(r.type,he),dt);F.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var L=r.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(q){lt(r,r.return,q)}if(n=r.sibling,n!==null){n.return=r.return,ue=n;break}ue=r.return}return ce=Hd,Hd=!1,ce}function Es(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var g=d.destroy;d.destroy=void 0,g!==void 0&&uu(r,a,g)}d=d.next}while(d!==c)}}function Jo(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function cu(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Vd(n){var r=n.alternate;r!==null&&(n.alternate=null,Vd(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[En],delete r[xs],delete r[Al],delete r[wm],delete r[Sm])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Yd(n){return n.tag===5||n.tag===3||n.tag===4}function Xd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Yd(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function hu(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Mo));else if(c!==4&&(n=n.child,n!==null))for(hu(n,r,a),n=n.sibling;n!==null;)hu(n,r,a),n=n.sibling}function du(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(du(n,r,a),n=n.sibling;n!==null;)du(n,r,a),n=n.sibling}var Tt=null,yn=!1;function xr(n,r,a){for(a=a.child;a!==null;)qd(n,r,a),a=a.sibling}function qd(n,r,a){if(X&&typeof X.onCommitFiberUnmount=="function")try{X.onCommitFiberUnmount(G,a)}catch{}switch(a.tag){case 5:zt||Fi(a,r);case 6:var c=Tt,d=yn;Tt=null,xr(n,r,a),Tt=c,yn=d,Tt!==null&&(yn?(n=Tt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Tt.removeChild(a.stateNode));break;case 18:Tt!==null&&(yn?(n=Tt,a=a.stateNode,n.nodeType===8?bl(n.parentNode,a):n.nodeType===1&&bl(n,a),as(n)):bl(Tt,a.stateNode));break;case 4:c=Tt,d=yn,Tt=a.stateNode.containerInfo,yn=!0,xr(n,r,a),Tt=c,yn=d;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,x=g.destroy;g=g.tag,x!==void 0&&((g&2)!==0||(g&4)!==0)&&uu(a,r,x),d=d.next}while(d!==c)}xr(n,r,a);break;case 1:if(!zt&&(Fi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){lt(a,r,C)}xr(n,r,a);break;case 21:xr(n,r,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,xr(n,r,a),zt=c):xr(n,r,a);break;default:xr(n,r,a)}}function Kd(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Dm),r.forEach(function(c){var d=Xm.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function xn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var g=n,x=r,C=x;e:for(;C!==null;){switch(C.tag){case 5:Tt=C.stateNode,yn=!1;break e;case 3:Tt=C.stateNode.containerInfo,yn=!0;break e;case 4:Tt=C.stateNode.containerInfo,yn=!0;break e}C=C.return}if(Tt===null)throw Error(t(160));qd(g,x,d),Tt=null,yn=!1;var A=d.alternate;A!==null&&(A.return=null),d.return=null}catch(B){lt(d,r,B)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Qd(r,n),r=r.sibling}function Qd(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(xn(r,n),In(n),c&4){try{Es(3,n,n.return),Jo(3,n)}catch(he){lt(n,n.return,he)}try{Es(5,n,n.return)}catch(he){lt(n,n.return,he)}}break;case 1:xn(r,n),In(n),c&512&&a!==null&&Fi(a,a.return);break;case 5:if(xn(r,n),In(n),c&512&&a!==null&&Fi(a,a.return),n.flags&32){var d=n.stateNode;try{Fr(d,"")}catch(he){lt(n,n.return,he)}}if(c&4&&(d=n.stateNode,d!=null)){var g=n.memoizedProps,x=a!==null?a.memoizedProps:g,C=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&oi(d,g),li(C,x);var B=li(C,g);for(x=0;x<A.length;x+=2){var H=A[x],Y=A[x+1];H==="style"?pe(d,Y):H==="dangerouslySetInnerHTML"?nr(d,Y):H==="children"?Fr(d,Y):E(d,H,Y,B)}switch(C){case"input":fn(d,g);break;case"textarea":Mr(d,g);break;case"select":var W=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var oe=g.value;oe!=null?tr(d,!!g.multiple,oe,!1):W!==!!g.multiple&&(g.defaultValue!=null?tr(d,!!g.multiple,g.defaultValue,!0):tr(d,!!g.multiple,g.multiple?[]:"",!1))}d[xs]=g}catch(he){lt(n,n.return,he)}}break;case 6:if(xn(r,n),In(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,g=n.memoizedProps;try{d.nodeValue=g}catch(he){lt(n,n.return,he)}}break;case 3:if(xn(r,n),In(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{as(r.containerInfo)}catch(he){lt(n,n.return,he)}break;case 4:xn(r,n),In(n);break;case 13:xn(r,n),In(n),d=n.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(mu=rt())),c&4&&Kd(n);break;case 22:if(H=a!==null&&a.memoizedState!==null,n.mode&1?(zt=(B=zt)||H,xn(r,n),zt=B):xn(r,n),In(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!H&&(n.mode&1)!==0)for(ue=n,H=n.child;H!==null;){for(Y=ue=H;ue!==null;){switch(W=ue,oe=W.child,W.tag){case 0:case 11:case 14:case 15:Es(4,W,W.return);break;case 1:Fi(W,W.return);var ce=W.stateNode;if(typeof ce.componentWillUnmount=="function"){c=W,a=W.return;try{r=c,ce.props=r.memoizedProps,ce.state=r.memoizedState,ce.componentWillUnmount()}catch(he){lt(c,a,he)}}break;case 5:Fi(W,W.return);break;case 22:if(W.memoizedState!==null){ef(Y);continue}}oe!==null?(oe.return=W,ue=oe):ef(Y)}H=H.sibling}e:for(H=null,Y=n;;){if(Y.tag===5){if(H===null){H=Y;try{d=Y.stateNode,B?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=Y.stateNode,A=Y.memoizedProps.style,x=A!=null&&A.hasOwnProperty("display")?A.display:null,C.style.display=oo("display",x))}catch(he){lt(n,n.return,he)}}}else if(Y.tag===6){if(H===null)try{Y.stateNode.nodeValue=B?"":Y.memoizedProps}catch(he){lt(n,n.return,he)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===n)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===n)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===n)break e;H===Y&&(H=null),Y=Y.return}H===Y&&(H=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:xn(r,n),In(n),c&4&&Kd(n);break;case 21:break;default:xn(r,n),In(n)}}function In(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Yd(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Fr(d,""),c.flags&=-33);var g=Xd(n);du(n,g,d);break;case 3:case 4:var x=c.stateNode.containerInfo,C=Xd(n);hu(n,C,x);break;default:throw Error(t(161))}}catch(A){lt(n,n.return,A)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Nm(n,r,a){ue=n,Zd(n)}function Zd(n,r,a){for(var c=(n.mode&1)!==0;ue!==null;){var d=ue,g=d.child;if(d.tag===22&&c){var x=d.memoizedState!==null||Zo;if(!x){var C=d.alternate,A=C!==null&&C.memoizedState!==null||zt;C=Zo;var B=zt;if(Zo=x,(zt=A)&&!B)for(ue=d;ue!==null;)x=ue,A=x.child,x.tag===22&&x.memoizedState!==null?tf(d):A!==null?(A.return=x,ue=A):tf(d);for(;g!==null;)ue=g,Zd(g),g=g.sibling;ue=d,Zo=C,zt=B}Jd(n)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,ue=g):Jd(n)}}function Jd(n){for(;ue!==null;){var r=ue;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:zt||Jo(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!zt)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:gn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&ed(r,g,c);break;case 3:var x=r.updateQueue;if(x!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}ed(r,x,a)}break;case 5:var C=r.stateNode;if(a===null&&r.flags&4){a=C;var A=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&a.focus();break;case"img":A.src&&(a.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var B=r.alternate;if(B!==null){var H=B.memoizedState;if(H!==null){var Y=H.dehydrated;Y!==null&&as(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||r.flags&512&&cu(r)}catch(W){lt(r,r.return,W)}}if(r===n){ue=null;break}if(a=r.sibling,a!==null){a.return=r.return,ue=a;break}ue=r.return}}function ef(n){for(;ue!==null;){var r=ue;if(r===n){ue=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ue=a;break}ue=r.return}}function tf(n){for(;ue!==null;){var r=ue;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Jo(4,r)}catch(A){lt(r,a,A)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(A){lt(r,d,A)}}var g=r.return;try{cu(r)}catch(A){lt(r,g,A)}break;case 5:var x=r.return;try{cu(r)}catch(A){lt(r,x,A)}}}catch(A){lt(r,r.return,A)}if(r===n){ue=null;break}var C=r.sibling;if(C!==null){C.return=r.return,ue=C;break}ue=r.return}}var $m=Math.ceil,ea=I.ReactCurrentDispatcher,fu=I.ReactCurrentOwner,an=I.ReactCurrentBatchConfig,je=0,kt=null,mt=null,Et=0,Jt=0,zi=fr(0),_t=0,Ms=null,Yr=0,ta=0,pu=0,Rs=null,Ht=null,mu=0,Li=1/0,qn=null,na=!1,gu=null,vr=null,ra=!1,_r=null,ia=0,Is=0,yu=null,sa=-1,oa=0;function Ot(){return(je&6)!==0?rt():sa!==-1?sa:sa=rt()}function wr(n){return(n.mode&1)===0?1:(je&2)!==0&&Et!==0?Et&-Et:Cm.transition!==null?(oa===0&&(oa=xt()),oa):(n=Ue,n!==0||(n=window.event,n=n===void 0?16:rh(n.type)),n)}function vn(n,r,a,c){if(50<Is)throw Is=0,yu=null,Error(t(185));Nn(n,a,c),((je&2)===0||n!==kt)&&(n===kt&&((je&2)===0&&(ta|=a),_t===4&&Sr(n,Et)),Vt(n,c),a===1&&je===0&&(r.mode&1)===0&&(Li=rt()+500,zo&&mr()))}function Vt(n,r){var a=n.callbackNode;$t(n,r);var c=He(n,n===kt?Et:0);if(c===0)a!==null&&Dn(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&Dn(a),r===1)n.tag===0?km(rf.bind(null,n)):Uh(rf.bind(null,n)),vm(function(){(je&6)===0&&mr()}),a=null;else{switch(qc(c)){case 1:a=pi;break;case 4:a=k;break;case 16:a=j;break;case 536870912:a=le;break;default:a=j}a=df(a,nf.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function nf(n,r){if(sa=-1,oa=0,(je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Bi()&&n.callbackNode!==a)return null;var c=He(n,n===kt?Et:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=aa(n,c);else{r=c;var d=je;je|=2;var g=of();(kt!==n||Et!==r)&&(qn=null,Li=rt()+500,qr(n,r));do try{Wm();break}catch(C){sf(n,C)}while(!0);Ll(),ea.current=g,je=d,mt!==null?r=0:(kt=null,Et=0,r=_t)}if(r!==0){if(r===2&&(d=pt(n),d!==0&&(c=d,r=xu(n,d))),r===1)throw a=Ms,qr(n,0),Sr(n,c),Vt(n,rt()),a;if(r===6)Sr(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Um(d)&&(r=aa(n,c),r===2&&(g=pt(n),g!==0&&(c=g,r=xu(n,g))),r===1))throw a=Ms,qr(n,0),Sr(n,c),Vt(n,rt()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Kr(n,Ht,qn);break;case 3:if(Sr(n,c),(c&130023424)===c&&(r=mu+500-rt(),10<r)){if(He(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Ot(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Cl(Kr.bind(null,n,Ht,qn),r);break}Kr(n,Ht,qn);break;case 4:if(Sr(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var x=31-$(c);g=1<<x,x=r[x],x>d&&(d=x),c&=~g}if(c=d,c=rt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*$m(c/1960))-c,10<c){n.timeoutHandle=Cl(Kr.bind(null,n,Ht,qn),c);break}Kr(n,Ht,qn);break;case 5:Kr(n,Ht,qn);break;default:throw Error(t(329))}}}return Vt(n,rt()),n.callbackNode===a?nf.bind(null,n):null}function xu(n,r){var a=Rs;return n.current.memoizedState.isDehydrated&&(qr(n,r).flags|=256),n=aa(n,r),n!==2&&(r=Ht,Ht=a,r!==null&&vu(r)),n}function vu(n){Ht===null?Ht=n:Ht.push.apply(Ht,n)}function Um(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!pn(g(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Sr(n,r){for(r&=~pu,r&=~ta,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-$(r),c=1<<a;n[a]=-1,r&=~c}}function rf(n){if((je&6)!==0)throw Error(t(327));Bi();var r=He(n,0);if((r&1)===0)return Vt(n,rt()),null;var a=aa(n,r);if(n.tag!==0&&a===2){var c=pt(n);c!==0&&(r=c,a=xu(n,c))}if(a===1)throw a=Ms,qr(n,0),Sr(n,r),Vt(n,rt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Kr(n,Ht,qn),Vt(n,rt()),null}function _u(n,r){var a=je;je|=1;try{return n(r)}finally{je=a,je===0&&(Li=rt()+500,zo&&mr())}}function Xr(n){_r!==null&&_r.tag===0&&(je&6)===0&&Bi();var r=je;je|=1;var a=an.transition,c=Ue;try{if(an.transition=null,Ue=1,n)return n()}finally{Ue=c,an.transition=a,je=r,(je&6)===0&&mr()}}function wu(){Jt=zi.current,Ze(zi)}function qr(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,xm(a)),mt!==null)for(a=mt.return;a!==null;){var c=a;switch(Ml(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Io();break;case 3:Ri(),Ze(Ut),Ze(Rt),Gl();break;case 5:$l(c);break;case 4:Ri();break;case 13:Ze(st);break;case 19:Ze(st);break;case 10:Bl(c.type._context);break;case 22:case 23:wu()}a=a.return}if(kt=n,mt=n=kr(n.current,null),Et=Jt=r,_t=0,Ms=null,pu=ta=Yr=0,Ht=Rs=null,Wr!==null){for(r=0;r<Wr.length;r++)if(a=Wr[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,g=a.pending;if(g!==null){var x=g.next;g.next=d,c.next=x}a.pending=c}Wr=null}return n}function sf(n,r){do{var a=mt;try{if(Ll(),Wo.current=Xo,Ho){for(var c=ot.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Ho=!1}if(Vr=0,St=vt=ot=null,Cs=!1,bs=0,fu.current=null,a===null||a.return===null){_t=1,Ms=r,mt=null;break}e:{var g=n,x=a.return,C=a,A=r;if(r=Et,C.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var B=A,H=C,Y=H.tag;if((H.mode&1)===0&&(Y===0||Y===11||Y===15)){var W=H.alternate;W?(H.updateQueue=W.updateQueue,H.memoizedState=W.memoizedState,H.lanes=W.lanes):(H.updateQueue=null,H.memoizedState=null)}var oe=Ed(x);if(oe!==null){oe.flags&=-257,Md(oe,x,C,g,r),oe.mode&1&&Td(g,B,r),r=oe,A=B;var ce=r.updateQueue;if(ce===null){var he=new Set;he.add(A),r.updateQueue=he}else ce.add(A);break e}else{if((r&1)===0){Td(g,B,r),Su();break e}A=Error(t(426))}}else if(it&&C.mode&1){var dt=Ed(x);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Md(dt,x,C,g,r),Fl(Ii(A,C));break e}}g=A=Ii(A,C),_t!==4&&(_t=2),Rs===null?Rs=[g]:Rs.push(g),g=x;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var F=Ad(g,A,r);Jh(g,F);break e;case 1:C=A;var M=g.type,L=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(vr===null||!vr.has(L)))){g.flags|=65536,r&=-r,g.lanes|=r;var q=Pd(g,C,r);Jh(g,q);break e}}g=g.return}while(g!==null)}lf(a)}catch(de){r=de,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function of(){var n=ea.current;return ea.current=Xo,n===null?Xo:n}function Su(){(_t===0||_t===3||_t===2)&&(_t=4),kt===null||(Yr&268435455)===0&&(ta&268435455)===0||Sr(kt,Et)}function aa(n,r){var a=je;je|=2;var c=of();(kt!==n||Et!==r)&&(qn=null,qr(n,r));do try{Gm();break}catch(d){sf(n,d)}while(!0);if(Ll(),je=a,ea.current=c,mt!==null)throw Error(t(261));return kt=null,Et=0,_t}function Gm(){for(;mt!==null;)af(mt)}function Wm(){for(;mt!==null&&!Za();)af(mt)}function af(n){var r=hf(n.alternate,n,Jt);n.memoizedProps=n.pendingProps,r===null?lf(n):mt=r,fu.current=null}function lf(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=Bm(a,r,Jt),a!==null){mt=a;return}}else{if(a=jm(a,r),a!==null){a.flags&=32767,mt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,mt=null;return}}if(r=r.sibling,r!==null){mt=r;return}mt=r=n}while(r!==null);_t===0&&(_t=5)}function Kr(n,r,a){var c=Ue,d=an.transition;try{an.transition=null,Ue=1,Hm(n,r,a,c)}finally{an.transition=d,Ue=c}return null}function Hm(n,r,a,c){do Bi();while(_r!==null);if((je&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if($n(n,g),n===kt&&(mt=kt=null,Et=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ra||(ra=!0,df(j,function(){return Bi(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=an.transition,an.transition=null;var x=Ue;Ue=1;var C=je;je|=4,fu.current=null,Om(n,a),Qd(a,n),hm(Sl),xo=!!wl,Sl=wl=null,n.current=a,Nm(a),po(),je=C,Ue=x,an.transition=g}else n.current=a;if(ra&&(ra=!1,_r=n,ia=d),g=n.pendingLanes,g===0&&(vr=null),K(a.stateNode),Vt(n,rt()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(na)throw na=!1,n=gu,gu=null,n;return(ia&1)!==0&&n.tag!==0&&Bi(),g=n.pendingLanes,(g&1)!==0?n===yu?Is++:(Is=0,yu=n):Is=0,mr(),null}function Bi(){if(_r!==null){var n=qc(ia),r=an.transition,a=Ue;try{if(an.transition=null,Ue=16>n?16:n,_r===null)var c=!1;else{if(n=_r,_r=null,ia=0,(je&6)!==0)throw Error(t(331));var d=je;for(je|=4,ue=n.current;ue!==null;){var g=ue,x=g.child;if((ue.flags&16)!==0){var C=g.deletions;if(C!==null){for(var A=0;A<C.length;A++){var B=C[A];for(ue=B;ue!==null;){var H=ue;switch(H.tag){case 0:case 11:case 15:Es(8,H,g)}var Y=H.child;if(Y!==null)Y.return=H,ue=Y;else for(;ue!==null;){H=ue;var W=H.sibling,oe=H.return;if(Vd(H),H===B){ue=null;break}if(W!==null){W.return=oe,ue=W;break}ue=oe}}}var ce=g.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var dt=he.sibling;he.sibling=null,he=dt}while(he!==null)}}ue=g}}if((g.subtreeFlags&2064)!==0&&x!==null)x.return=g,ue=x;else e:for(;ue!==null;){if(g=ue,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Es(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,ue=F;break e}ue=g.return}}var M=n.current;for(ue=M;ue!==null;){x=ue;var L=x.child;if((x.subtreeFlags&2064)!==0&&L!==null)L.return=x,ue=L;else e:for(x=M;ue!==null;){if(C=ue,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Jo(9,C)}}catch(de){lt(C,C.return,de)}if(C===x){ue=null;break e}var q=C.sibling;if(q!==null){q.return=C.return,ue=q;break e}ue=C.return}}if(je=d,mr(),X&&typeof X.onPostCommitFiberRoot=="function")try{X.onPostCommitFiberRoot(G,n)}catch{}c=!0}return c}finally{Ue=a,an.transition=r}}return!1}function uf(n,r,a){r=Ii(a,r),r=Ad(n,r,1),n=yr(n,r,1),r=Ot(),n!==null&&(Nn(n,1,r),Vt(n,r))}function lt(n,r,a){if(n.tag===3)uf(n,n,a);else for(;r!==null;){if(r.tag===3){uf(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vr===null||!vr.has(c))){n=Ii(a,n),n=Pd(r,n,1),r=yr(r,n,1),n=Ot(),r!==null&&(Nn(r,1,n),Vt(r,n));break}}r=r.return}}function Vm(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=Ot(),n.pingedLanes|=n.suspendedLanes&a,kt===n&&(Et&a)===a&&(_t===4||_t===3&&(Et&130023424)===Et&&500>rt()-mu?qr(n,0):pu|=a),Vt(n,r)}function cf(n,r){r===0&&((n.mode&1)===0?r=1:(r=ze,ze<<=1,(ze&130023424)===0&&(ze=4194304)));var a=Ot();n=Vn(n,r),n!==null&&(Nn(n,r,a),Vt(n,a))}function Ym(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),cf(n,a)}function Xm(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),cf(n,a)}var hf;hf=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Ut.current)Wt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Wt=!1,Lm(n,r,a);Wt=(n.flags&131072)!==0}else Wt=!1,it&&(r.flags&1048576)!==0&&Gh(r,Bo,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Qo(n,r),n=r.pendingProps;var d=Ci(r,Rt.current);Mi(r,a),d=Vl(null,r,c,n,d,a);var g=Yl();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Gt(c)?(g=!0,Fo(r)):g=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ol(r),d.updater=qo,r.stateNode=d,d._reactInternals=r,Jl(r,c,n,a),r=ru(null,r,c,!0,g,a)):(r.tag=0,it&&g&&El(r),Dt(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Qo(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=Km(c),n=gn(c,n),d){case 0:r=nu(null,r,c,n,a);break e;case 1:r=Bd(null,r,c,n,a);break e;case 11:r=Rd(null,r,c,n,a);break e;case 14:r=Id(null,r,c,gn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:gn(c,d),nu(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:gn(c,d),Bd(n,r,c,d,a);case 3:e:{if(jd(r),n===null)throw Error(t(387));c=r.pendingProps,g=r.memoizedState,d=g.element,Zh(n,r),Uo(r,c,null,a);var x=r.memoizedState;if(c=x.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){d=Ii(Error(t(423)),r),r=Dd(n,r,c,a,d);break e}else if(c!==d){d=Ii(Error(t(424)),r),r=Dd(n,r,c,a,d);break e}else for(Zt=dr(r.stateNode.containerInfo.firstChild),Qt=r,it=!0,mn=null,a=Kh(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Pi(),c===d){r=Xn(n,r,a);break e}Dt(n,r,c,a)}r=r.child}return r;case 5:return td(r),n===null&&Il(r),c=r.type,d=r.pendingProps,g=n!==null?n.memoizedProps:null,x=d.children,kl(c,d)?x=null:g!==null&&kl(c,g)&&(r.flags|=32),Ld(n,r),Dt(n,r,x,a),r.child;case 6:return n===null&&Il(r),null;case 13:return Od(n,r,a);case 4:return Nl(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Ti(r,null,c,a):Dt(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:gn(c,d),Rd(n,r,c,d,a);case 7:return Dt(n,r,r.pendingProps,a),r.child;case 8:return Dt(n,r,r.pendingProps.children,a),r.child;case 12:return Dt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,g=r.memoizedProps,x=d.value,Xe(Oo,c._currentValue),c._currentValue=x,g!==null)if(pn(g.value,x)){if(g.children===d.children&&!Ut.current){r=Xn(n,r,a);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var C=g.dependencies;if(C!==null){x=g.child;for(var A=C.firstContext;A!==null;){if(A.context===c){if(g.tag===1){A=Yn(-1,a&-a),A.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var H=B.pending;H===null?A.next=A:(A.next=H.next,H.next=A),B.pending=A}}g.lanes|=a,A=g.alternate,A!==null&&(A.lanes|=a),jl(g.return,a,r),C.lanes|=a;break}A=A.next}}else if(g.tag===10)x=g.type===r.type?null:g.child;else if(g.tag===18){if(x=g.return,x===null)throw Error(t(341));x.lanes|=a,C=x.alternate,C!==null&&(C.lanes|=a),jl(x,a,r),x=g.sibling}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===r){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}Dt(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Mi(r,a),d=sn(d),c=c(d),r.flags|=1,Dt(n,r,c,a),r.child;case 14:return c=r.type,d=gn(c,r.pendingProps),d=gn(c.type,d),Id(n,r,c,d,a);case 15:return Fd(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:gn(c,d),Qo(n,r),r.tag=1,Gt(c)?(n=!0,Fo(r)):n=!1,Mi(r,a),Cd(r,c,d),Jl(r,c,d,a),ru(null,r,c,!0,n,a);case 19:return $d(n,r,a);case 22:return zd(n,r,a)}throw Error(t(156,r.tag))};function df(n,r){return qe(n,r)}function qm(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(n,r,a,c){return new qm(n,r,a,c)}function ku(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Km(n){if(typeof n=="function")return ku(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ce)return 11;if(n===yt)return 14}return 2}function kr(n,r){var a=n.alternate;return a===null?(a=ln(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function la(n,r,a,c,d,g){var x=2;if(c=n,typeof n=="function")ku(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case O:return Qr(a.children,d,g,r);case re:x=8,d|=8;break;case ae:return n=ln(12,a,r,d|2),n.elementType=ae,n.lanes=g,n;case be:return n=ln(13,a,r,d),n.elementType=be,n.lanes=g,n;case Ae:return n=ln(19,a,r,d),n.elementType=Ae,n.lanes=g,n;case ie:return ua(a,d,g,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:x=10;break e;case ne:x=9;break e;case Ce:x=11;break e;case yt:x=14;break e;case ee:x=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=ln(x,a,r,d),r.elementType=n,r.type=c,r.lanes=g,r}function Qr(n,r,a,c){return n=ln(7,n,c,r),n.lanes=a,n}function ua(n,r,a,c){return n=ln(22,n,c,r),n.elementType=ie,n.lanes=a,n.stateNode={isHidden:!1},n}function Cu(n,r,a){return n=ln(6,n,null,r),n.lanes=a,n}function bu(n,r,a){return r=ln(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Qm(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=On(0),this.expirationTimes=On(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=On(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Au(n,r,a,c,d,g,x,C,A){return n=new Qm(n,r,a,C,A),r===1?(r=1,g===!0&&(r|=8)):r=0,g=ln(3,null,null,r),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ol(g),n}function Zm(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function ff(n){if(!n)return pr;n=n._reactInternals;e:{if(jn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Gt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Gt(a))return Nh(n,a,r)}return r}function pf(n,r,a,c,d,g,x,C,A){return n=Au(a,c,!0,n,d,g,x,C,A),n.context=ff(null),a=n.current,c=Ot(),d=wr(a),g=Yn(c,d),g.callback=r??null,yr(a,g,d),n.current.lanes=d,Nn(n,d,c),Vt(n,c),n}function ca(n,r,a,c){var d=r.current,g=Ot(),x=wr(d);return a=ff(a),r.context===null?r.context=a:r.pendingContext=a,r=Yn(g,x),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=yr(d,r,x),n!==null&&(vn(n,d,x,g),$o(n,d,x)),x}function ha(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function mf(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Pu(n,r){mf(n,r),(n=n.alternate)&&mf(n,r)}function Jm(){return null}var gf=typeof reportError=="function"?reportError:function(n){console.error(n)};function Tu(n){this._internalRoot=n}da.prototype.render=Tu.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));ca(n,r,null,null)},da.prototype.unmount=Tu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Xr(function(){ca(null,n,null,null)}),r[Un]=null}};function da(n){this._internalRoot=n}da.prototype.unstable_scheduleHydration=function(n){if(n){var r=Zc();n={blockedOn:null,target:n,priority:r};for(var a=0;a<ur.length&&r!==0&&r<ur[a].priority;a++);ur.splice(a,0,n),a===0&&th(n)}};function Eu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function fa(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function yf(){}function e2(n,r,a,c,d){if(d){if(typeof c=="function"){var g=c;c=function(){var B=ha(x);g.call(B)}}var x=pf(r,c,n,0,null,!1,!1,"",yf);return n._reactRootContainer=x,n[Un]=x.current,gs(n.nodeType===8?n.parentNode:n),Xr(),x}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var B=ha(A);C.call(B)}}var A=Au(n,0,!1,null,null,!1,!1,"",yf);return n._reactRootContainer=A,n[Un]=A.current,gs(n.nodeType===8?n.parentNode:n),Xr(function(){ca(r,A,a,c)}),A}function pa(n,r,a,c,d){var g=a._reactRootContainer;if(g){var x=g;if(typeof d=="function"){var C=d;d=function(){var A=ha(x);C.call(A)}}ca(r,x,n,d)}else x=e2(a,r,n,d,c);return ha(x)}Kc=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=De(r.pendingLanes);a!==0&&(Ja(r,a|1),Vt(r,rt()),(je&6)===0&&(Li=rt()+500,mr()))}break;case 13:Xr(function(){var c=Vn(n,1);if(c!==null){var d=Ot();vn(c,n,1,d)}}),Pu(n,1)}},el=function(n){if(n.tag===13){var r=Vn(n,134217728);if(r!==null){var a=Ot();vn(r,n,134217728,a)}Pu(n,134217728)}},Qc=function(n){if(n.tag===13){var r=wr(n),a=Vn(n,r);if(a!==null){var c=Ot();vn(a,n,r,c)}Pu(n,r)}},Zc=function(){return Ue},Jc=function(n,r){var a=Ue;try{return Ue=n,r()}finally{Ue=a}},ci=function(n,r,a){switch(r){case"input":if(fn(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=Ro(c);if(!d)throw Error(t(90));Ve(c),fn(c,d)}}}break;case"textarea":Mr(n,a);break;case"select":r=a.value,r!=null&&tr(n,!!a.multiple,r,!1)}},uo=_u,es=Xr;var t2={usingClientEntryPoint:!1,Events:[vs,Si,Ro,lo,sr,_u]},Fs={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n2={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=$e(n),n===null?null:n.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||Jm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ma.isDisabled&&ma.supportsFiber)try{G=ma.inject(n2),X=ma}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t2,Yt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eu(r))throw Error(t(200));return Zm(n,r,null,a)},Yt.createRoot=function(n,r){if(!Eu(n))throw Error(t(299));var a=!1,c="",d=gf;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Au(n,1,!1,null,null,a,!1,c,d),n[Un]=r.current,gs(n.nodeType===8?n.parentNode:n),new Tu(r)},Yt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=$e(r),n=n===null?null:n.stateNode,n},Yt.flushSync=function(n){return Xr(n)},Yt.hydrate=function(n,r,a){if(!fa(r))throw Error(t(200));return pa(null,n,r,!0,a)},Yt.hydrateRoot=function(n,r,a){if(!Eu(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,g="",x=gf;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),r=pf(r,null,n,1,a??null,d,!1,g,x),n[Un]=r.current,gs(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new da(r)},Yt.render=function(n,r,a){if(!fa(r))throw Error(t(200));return pa(null,n,r,!1,a)},Yt.unmountComponentAtNode=function(n){if(!fa(n))throw Error(t(40));return n._reactRootContainer?(Xr(function(){pa(null,null,n,!1,function(){n._reactRootContainer=null,n[Un]=null})}),!0):!1},Yt.unstable_batchedUpdates=_u,Yt.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!fa(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return pa(n,r,a,!1,c)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var bf;function c2(){if(bf)return Iu.exports;bf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Iu.exports=u2(),Iu.exports}var Af;function h2(){if(Af)return ga;Af=1;var i=c2();return ga.createRoot=i.createRoot,ga.hydrateRoot=i.hydrateRoot,ga}var d2=h2();const f2=Fc(d2);var ke=zc();const p2="modulepreload",m2=function(i){return"/"+i},Pf={},ja=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=u(t.map(p=>{if(p=m2(p),p in Pf)return;Pf[p]=!0;const m=p.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":p2,m||(v.as="script"),v.crossOrigin="",v.href=p,f&&v.setAttribute("nonce",f),document.head.appendChild(v),m)return new Promise((_,S)=>{v.addEventListener("load",_),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};var me=(i=>(i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i.ShapeBuilder="shape-builder",i.Batcher="batcher",i))(me||{});const hc=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},ya=(i,e)=>hc(i).priority??e,Mt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(hc).forEach(e=>{e.type.forEach(t=>{var s,o;return(o=(s=this._removeHandlers)[t])==null?void 0:o.call(s,e)})}),this},add(...i){return i.map(hc).forEach(e=>{e.type.forEach(t=>{var l,u;const s=this._addHandlers,o=this._queue;s[t]?(u=s[t])==null||u.call(s,e):(o[t]=o[t]||[],(l=o[t])==null||l.push(e))})}),this},handle(i,e,t){var u;const s=this._addHandlers,o=this._removeHandlers;if(s[i]||o[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=e,o[i]=t;const l=this._queue;return l[i]&&((u=l[i])==null||u.forEach(h=>e(h)),delete l[i]),this},handleByMap(i,e){return this.handle(i,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(i,e,t=-1){return this.handle(i,s=>{e.findIndex(l=>l.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((l,u)=>ya(u.value,t)-ya(l.value,t)))},s=>{const o=e.findIndex(l=>l.name===s.name);o!==-1&&e.splice(o,1)})},handleByList(i,e,t=-1){return this.handle(i,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((o,l)=>ya(l,t)-ya(o,t)))},s=>{const o=e.indexOf(s.ref);o!==-1&&e.splice(o,1)})},mixin(i,...e){for(const t of e)Object.defineProperties(i.prototype,Object.getOwnPropertyDescriptors(t))}},g2={extension:{type:me.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await ja(()=>import("./browserAll-CD5zdjwV.js"),__vite__mapDeps([0,1,2]))}},y2={extension:{type:me.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await ja(()=>import("./webworkerAll-bn-AqKb2.js"),__vite__mapDeps([1,2]))}};class Lt{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new Lt(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Lu={exports:{}},Tf;function x2(){return Tf||(Tf=1,(function(i){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function o(f,p,m){this.fn=f,this.context=p,this.once=m||!1}function l(f,p,m,y,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var _=new o(m,y||f,v),S=t?t+p:p;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],_]:f._events[S].push(_):(f._events[S]=_,f._eventsCount++),f}function u(f,p){--f._eventsCount===0?f._events=new s:delete f._events[p]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],m,y;if(this._eventsCount===0)return p;for(y in m=this._events)e.call(m,y)&&p.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},h.prototype.listeners=function(p){var m=t?t+p:p,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var v=0,_=y.length,S=new Array(_);v<_;v++)S[v]=y[v].fn;return S},h.prototype.listenerCount=function(p){var m=t?t+p:p,y=this._events[m];return y?y.fn?1:y.length:0},h.prototype.emit=function(p,m,y,v,_,S){var b=t?t+p:p;if(!this._events[b])return!1;var w=this._events[b],P=arguments.length,T,E;if(w.fn){switch(w.once&&this.removeListener(p,w.fn,void 0,!0),P){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,y),!0;case 4:return w.fn.call(w.context,m,y,v),!0;case 5:return w.fn.call(w.context,m,y,v,_),!0;case 6:return w.fn.call(w.context,m,y,v,_,S),!0}for(E=1,T=new Array(P-1);E<P;E++)T[E-1]=arguments[E];w.fn.apply(w.context,T)}else{var I=w.length,V;for(E=0;E<I;E++)switch(w[E].once&&this.removeListener(p,w[E].fn,void 0,!0),P){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,m);break;case 3:w[E].fn.call(w[E].context,m,y);break;case 4:w[E].fn.call(w[E].context,m,y,v);break;default:if(!T)for(V=1,T=new Array(P-1);V<P;V++)T[V-1]=arguments[V];w[E].fn.apply(w[E].context,T)}}return!0},h.prototype.on=function(p,m,y){return l(this,p,m,y,!1)},h.prototype.once=function(p,m,y){return l(this,p,m,y,!0)},h.prototype.removeListener=function(p,m,y,v){var _=t?t+p:p;if(!this._events[_])return this;if(!m)return u(this,_),this;var S=this._events[_];if(S.fn)S.fn===m&&(!v||S.once)&&(!y||S.context===y)&&u(this,_);else{for(var b=0,w=[],P=S.length;b<P;b++)(S[b].fn!==m||v&&!S[b].once||y&&S[b].context!==y)&&w.push(S[b]);w.length?this._events[_]=w.length===1?w[0]:w:u(this,_)}return this},h.prototype.removeAllListeners=function(p){var m;return p?(m=t?t+p:p,this._events[m]&&u(this,m)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,i.exports=h})(Lu)),Lu.exports}var v2=x2();const bn=Fc(v2),_2=Math.PI*2,w2=180/Math.PI,S2=Math.PI/180;class Bt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Bt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Bu.x=0,Bu.y=0,Bu}}const Bu=new Bt;class Ie{constructor(e=1,t=0,s=0,o=1,l=0,u=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,o,l,u){return this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new Bt;const s=e.x,o=e.y;return t.x=this.a*s+this.c*o+this.tx,t.y=this.b*s+this.d*o+this.ty,t}applyInverse(e,t){t=t||new Bt;const s=this.a,o=this.b,l=this.c,u=this.d,h=this.tx,f=this.ty,p=1/(s*u+l*-o),m=e.x,y=e.y;return t.x=u*p*m+-l*p*y+(f*l-h*u)*p,t.y=s*p*y+-o*p*m+(-f*s+h*o)*p,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.a,l=this.c,u=this.tx;return this.a=o*t-this.b*s,this.b=o*s+this.b*t,this.c=l*t-this.d*s,this.d=l*s+this.d*t,this.tx=u*t-this.ty*s,this.ty=u*s+this.ty*t,this}append(e){const t=this.a,s=this.b,o=this.c,l=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*s+e.b*l,this.c=e.c*t+e.d*o,this.d=e.c*s+e.d*l,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*s+e.ty*l+this.ty,this}appendFrom(e,t){const s=e.a,o=e.b,l=e.c,u=e.d,h=e.tx,f=e.ty,p=t.a,m=t.b,y=t.c,v=t.d;return this.a=s*p+o*y,this.b=s*m+o*v,this.c=l*p+u*y,this.d=l*m+u*v,this.tx=h*p+f*y+t.tx,this.ty=h*m+f*v+t.ty,this}setTransform(e,t,s,o,l,u,h,f,p){return this.a=Math.cos(h+p)*l,this.b=Math.sin(h+p)*l,this.c=-Math.sin(h-f)*u,this.d=Math.cos(h-f)*u,this.tx=e-(s*this.a+o*this.c),this.ty=t-(s*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,o=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,o=this.c,l=this.d,u=e.pivot,h=-Math.atan2(-o,l),f=Math.atan2(s,t),p=Math.abs(h+f);return p<1e-5||Math.abs(_2-p)<1e-5?(e.rotation=f,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=f),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(o*o+l*l),e.position.x=this.tx+(u.x*t+u.y*o),e.position.y=this.ty+(u.x*s+u.y*l),e}invert(){const e=this.a,t=this.b,s=this.c,o=this.d,l=this.tx,u=e*o-t*s;return this.a=o/u,this.b=-t/u,this.c=-s/u,this.d=e/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(e*this.ty-t*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Ie;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return C2.identity()}static get shared(){return k2.identity()}}const k2=new Ie,C2=new Ie,Jr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ei=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ti=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ni=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],dc=[],V1=[],xa=Math.sign;function b2(){for(let i=0;i<16;i++){const e=[];dc.push(e);for(let t=0;t<16;t++){const s=xa(Jr[i]*Jr[t]+ti[i]*ei[t]),o=xa(ei[i]*Jr[t]+ni[i]*ei[t]),l=xa(Jr[i]*ti[t]+ti[i]*ni[t]),u=xa(ei[i]*ti[t]+ni[i]*ni[t]);for(let h=0;h<16;h++)if(Jr[h]===s&&ei[h]===o&&ti[h]===l&&ni[h]===u){e.push(h);break}}}for(let i=0;i<16;i++){const e=new Ie;e.set(Jr[i],ei[i],ti[i],ni[i],0,0),V1.push(e)}}b2();const Ge={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>Jr[i],uY:i=>ei[i],vX:i=>ti[i],vY:i=>ni[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>dc[i][e],sub:(i,e)=>dc[i][Ge.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?Ge.S:Ge.N:Math.abs(e)*2<=Math.abs(i)?i>0?Ge.E:Ge.W:e>0?i>0?Ge.SE:Ge.SW:i>0?Ge.NE:Ge.NW,matrixAppendRotationInv:(i,e,t=0,s=0)=>{const o=V1[Ge.inv(e)];o.tx=t,o.ty=s,i.append(o)},transformRectCoords:(i,e,t,s)=>{const{x:o,y:l,width:u,height:h}=i,{x:f,y:p,width:m,height:y}=e;return t===Ge.E?(s.set(o+f,l+p,u,h),s):t===Ge.S?s.set(m-l-h+f,o+p,h,u):t===Ge.W?s.set(m-o-u+f,y-l-h+p,u,h):t===Ge.N?s.set(l+f,y-o-u+p,h,u):s.set(o+f,l+p,u,h)}},va=[new Bt,new Bt,new Bt,new Bt];class ft{constructor(e=0,t=0,s=0,o=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new ft(0,0,0,0)}clone(){return new ft(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,f=this.y,p=s*(1-o),m=s-p,y=h-p,v=h+l+p,_=f-p,S=f+u+p,b=h+m,w=h+l-m,P=f+m,T=f+u-m;return e>=y&&e<=v&&t>=_&&t<=S&&!(e>b&&e<w&&t>P&&t<T)}intersects(e,t){if(!t){const re=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=re)return!1;const Q=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>Q}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const h=va[0].set(e.left,e.top),f=va[1].set(e.left,e.bottom),p=va[2].set(e.right,e.top),m=va[3].set(e.right,e.bottom);if(p.x<=h.x||f.y<=h.y)return!1;const y=Math.sign(t.a*t.d-t.b*t.c);if(y===0||(t.apply(h,h),t.apply(f,f),t.apply(p,p),t.apply(m,m),Math.max(h.x,f.x,p.x,m.x)<=s||Math.min(h.x,f.x,p.x,m.x)>=o||Math.max(h.y,f.y,p.y,m.y)<=l||Math.min(h.y,f.y,p.y,m.y)>=u))return!1;const v=y*(f.y-h.y),_=y*(h.x-f.x),S=v*s+_*l,b=v*o+_*l,w=v*s+_*u,P=v*o+_*u;if(Math.max(S,b,w,P)<=v*h.x+_*h.y||Math.min(S,b,w,P)>=v*m.x+_*m.y)return!1;const T=y*(h.y-p.y),E=y*(p.x-h.x),I=T*s+E*l,V=T*o+E*l,D=T*s+E*u,O=T*o+E*u;return!(Math.max(I,V,D,O)<=T*h.x+E*h.y||Math.min(I,V,D,O)>=T*m.x+E*m.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),l=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=o-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),l=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=o,this.height=l-o,this}getBounds(e){return e||(e=new ft),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,o=e.x+e.width,l=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(e,t,s,o){return this.x=e,this.y=t,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const ju={default:-1};function ct(i="default"){return ju[i]===void 0&&(ju[i]=-1),++ju[i]}const Ef=new Set,We="8.0.0",A2="8.3.4",$i={quiet:!1,noColor:!1},Me=(i,e,t=3)=>{if($i.quiet||Ef.has(e))return;let s=new Error().stack;const o=`${e}
Deprecated since v${i}`,l=typeof console.groupCollapsed=="function"&&!$i.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(t).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),Ef.add(e)};Object.defineProperties(Me,{quiet:{get:()=>$i.quiet,set:i=>{$i.quiet=i},enumerable:!0,configurable:!1},noColor:{get:()=>$i.noColor,set:i=>{$i.noColor=i},enumerable:!0,configurable:!1}});const Y1=()=>{};function Da(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Mf(i){return!(i&i-1)&&!!i}function X1(i){const e={};for(const t in i)i[t]!==void 0&&(e[t]=i[t]);return e}const Rf=Object.create(null);function P2(i){const e=Rf[i];return e===void 0&&(Rf[i]=ct("resource")),e}const q1=class K1 extends bn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...K1.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Me(We,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=P2(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};q1.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Oa=q1;const Q1=class Z1 extends bn{constructor(e={}){super(),this.options=e,this.uid=ct("textureSource"),this._resourceType="textureSource",this._resourceId=ct("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...Z1.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new Oa(X1(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ct("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const o=Math.round(e*s),l=Math.round(t*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=ct("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Mf(this.pixelWidth)&&Mf(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};Q1.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let An=Q1;class Lc extends An{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Lc.extension=me.TextureSource;const If=new Ie;class T2{constructor(e,t){this.mapCoord=new Ie,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let o=0;o<e.length;o+=2){const l=e[o],u=e[o+1];t[o]=l*s.a+u*s.c+s.tx,t[o+1]=l*s.b+u*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,o=e.trim;o&&(If.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(If));const l=e.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,f=this.clampOffset/l._resolution;return u[0]=(e.frame.x+h+f)/l.width,u[1]=(e.frame.y+h+f)/l.height,u[2]=(e.frame.x+e.frame.width-h+f)/l.width,u[3]=(e.frame.y+e.frame.height-h+f)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=e.frame.width===l.width&&e.frame.height===l.height&&e.rotate===0,!0}}class Le extends bn{constructor({source:e,label:t,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:h,rotate:f,dynamic:p}={}){if(super(),this.uid=ct("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new ft,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new An,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:m,height:y}=this._source;this.frame.width=m,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=f??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new T2(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:o}=this._source,l=t.x/s,u=t.y/o,h=t.width/s,f=t.height/o;let p=this.rotate;if(p){const m=h/2,y=f/2,v=l+m,_=u+y;p=Ge.add(p,Ge.NW),e.x0=v+m*Ge.uX(p),e.y0=_+y*Ge.uY(p),p=Ge.add(p,2),e.x1=v+m*Ge.uX(p),e.y1=_+y*Ge.uY(p),p=Ge.add(p,2),e.x2=v+m*Ge.uX(p),e.y2=_+y*Ge.uY(p),p=Ge.add(p,2),e.x3=v+m*Ge.uX(p),e.y3=_+y*Ge.uY(p)}else e.x0=l,e.y0=u,e.x1=l+h,e.y1=u,e.x2=l+h,e.y2=u+f,e.x3=l,e.y3=u+f}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Me(We,"Texture.baseTexture is now Texture.source"),this._source}}Le.EMPTY=new Le({label:"EMPTY",source:new An({label:"EMPTY"})});Le.EMPTY.destroy=Y1;Le.WHITE=new Le({source:new Lc({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Le.WHITE.destroy=Y1;function E2(i,e,t){const{width:s,height:o}=t.orig,l=t.trim;if(l){const u=l.width,h=l.height;i.minX=l.x-e._x*s,i.maxX=i.minX+u,i.minY=l.y-e._y*o,i.maxY=i.minY+h}else i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*o,i.maxY=i.minY+o}const Ff=new Ie;class Cn{constructor(e=1/0,t=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Ff,this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new ft);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Ff,this}set(e,t,s,o){this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}addFrame(e,t,s,o,l){l||(l=this.matrix);const u=l.a,h=l.b,f=l.c,p=l.d,m=l.tx,y=l.ty;let v=this.minX,_=this.minY,S=this.maxX,b=this.maxY,w=u*e+f*t+m,P=h*e+p*t+y;w<v&&(v=w),P<_&&(_=P),w>S&&(S=w),P>b&&(b=P),w=u*s+f*t+m,P=h*s+p*t+y,w<v&&(v=w),P<_&&(_=P),w>S&&(S=w),P>b&&(b=P),w=u*e+f*o+m,P=h*e+p*o+y,w<v&&(v=w),P<_&&(_=P),w>S&&(S=w),P>b&&(b=P),w=u*s+f*o+m,P=h*s+p*o+y,w<v&&(v=w),P<_&&(_=P),w>S&&(S=w),P>b&&(b=P),this.minX=v,this.minY=_,this.maxX=S,this.maxY=b}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:h,c:f,d:p,tx:m,ty:y}=e;let v=u*t+f*s+m,_=h*t+p*s+y;this.minX=v,this.minY=_,this.maxX=v,this.maxY=_,v=u*o+f*s+m,_=h*o+p*s+y,this.minX=v<this.minX?v:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=_>this.maxY?_:this.maxY,v=u*t+f*l+m,_=h*t+p*l+y,this.minX=v<this.minX?v:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=_>this.maxY?_:this.maxY,v=u*o+f*l+m,_=h*o+p*l+y,this.minX=v<this.minX?v:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=_>this.maxY?_:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,o){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Cn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,o){let l=this.minX,u=this.minY,h=this.maxX,f=this.maxY;o||(o=this.matrix);const p=o.a,m=o.b,y=o.c,v=o.d,_=o.tx,S=o.ty;for(let b=t;b<s;b+=2){const w=e[b],P=e[b+1],T=p*w+y*P+_,E=m*w+v*P+S;l=T<l?T:l,u=E<u?E:u,h=T>h?T:h,f=E>f?E:f}this.minX=l,this.minY=u,this.maxX=h,this.maxY=f}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var M2={grad:.9,turn:360,rad:360/(2*Math.PI)},Kn=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},bt=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},cn=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},J1=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},zf=function(i){return{r:cn(i.r,0,255),g:cn(i.g,0,255),b:cn(i.b,0,255),a:cn(i.a)}},Du=function(i){return{r:bt(i.r),g:bt(i.g),b:bt(i.b),a:bt(i.a,3)}},R2=/^#([0-9a-f]{3,8})$/i,_a=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},ep=function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=Math.max(e,t,s),u=l-Math.min(e,t,s),h=u?l===e?(t-s)/u:l===t?2+(s-e)/u:4+(e-t)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a:o}},tp=function(i){var e=i.h,t=i.s,s=i.v,o=i.a;e=e/360*6,t/=100,s/=100;var l=Math.floor(e),u=s*(1-t),h=s*(1-(e-l)*t),f=s*(1-(1-e+l)*t),p=l%6;return{r:255*[s,h,u,u,f,s][p],g:255*[f,s,s,h,u,u][p],b:255*[u,u,f,s,s,h][p],a:o}},Lf=function(i){return{h:J1(i.h),s:cn(i.s,0,100),l:cn(i.l,0,100),a:cn(i.a)}},Bf=function(i){return{h:bt(i.h),s:bt(i.s),l:bt(i.l),a:bt(i.a,3)}},jf=function(i){return tp((t=(e=i).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},Vs=function(i){return{h:(e=ep(i)).h,s:(o=(200-(t=e.s))*(s=e.v)/100)>0&&o<200?t*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,s,o},I2=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,F2=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,z2=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,L2=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fc={string:[[function(i){var e=R2.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?bt(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?bt(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=z2.exec(i)||L2.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:zf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=I2.exec(i)||F2.exec(i);if(!e)return null;var t,s,o=Lf({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(M2[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return jf(o)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=o===void 0?1:o;return Kn(e)&&Kn(t)&&Kn(s)?zf({r:Number(e),g:Number(t),b:Number(s),a:Number(l)}):null},"rgb"],[function(i){var e=i.h,t=i.s,s=i.l,o=i.a,l=o===void 0?1:o;if(!Kn(e)||!Kn(t)||!Kn(s))return null;var u=Lf({h:Number(e),s:Number(t),l:Number(s),a:Number(l)});return jf(u)},"hsl"],[function(i){var e=i.h,t=i.s,s=i.v,o=i.a,l=o===void 0?1:o;if(!Kn(e)||!Kn(t)||!Kn(s))return null;var u=(function(h){return{h:J1(h.h),s:cn(h.s,0,100),v:cn(h.v,0,100),a:cn(h.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(l)});return tp(u)},"hsv"]]},Df=function(i,e){for(var t=0;t<e.length;t++){var s=e[t][0](i);if(s)return[s,e[t][1]]}return[null,void 0]},B2=function(i){return typeof i=="string"?Df(i.trim(),fc.string):typeof i=="object"&&i!==null?Df(i,fc.object):[null,void 0]},Ou=function(i,e){var t=Vs(i);return{h:t.h,s:cn(t.s+100*e,0,100),l:t.l,a:t.a}},Nu=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},Of=function(i,e){var t=Vs(i);return{h:t.h,s:t.s,l:cn(t.l+100*e,0,100),a:t.a}},pc=(function(){function i(e){this.parsed=B2(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return bt(Nu(this.rgba),2)},i.prototype.isDark=function(){return Nu(this.rgba)<.5},i.prototype.isLight=function(){return Nu(this.rgba)>=.5},i.prototype.toHex=function(){return e=Du(this.rgba),t=e.r,s=e.g,o=e.b,u=(l=e.a)<1?_a(bt(255*l)):"","#"+_a(t)+_a(s)+_a(o)+u;var e,t,s,o,l,u},i.prototype.toRgb=function(){return Du(this.rgba)},i.prototype.toRgbString=function(){return e=Du(this.rgba),t=e.r,s=e.g,o=e.b,(l=e.a)<1?"rgba("+t+", "+s+", "+o+", "+l+")":"rgb("+t+", "+s+", "+o+")";var e,t,s,o,l},i.prototype.toHsl=function(){return Bf(Vs(this.rgba))},i.prototype.toHslString=function(){return e=Bf(Vs(this.rgba)),t=e.h,s=e.s,o=e.l,(l=e.a)<1?"hsla("+t+", "+s+"%, "+o+"%, "+l+")":"hsl("+t+", "+s+"%, "+o+"%)";var e,t,s,o,l},i.prototype.toHsv=function(){return e=ep(this.rgba),{h:bt(e.h),s:bt(e.s),v:bt(e.v),a:bt(e.a,3)};var e},i.prototype.invert=function(){return zn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),zn(Ou(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),zn(Ou(this.rgba,-e))},i.prototype.grayscale=function(){return zn(Ou(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),zn(Of(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),zn(Of(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?zn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):bt(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=Vs(this.rgba);return typeof e=="number"?zn({h:e,s:t.s,l:t.l,a:t.a}):bt(t.h)},i.prototype.isEqual=function(e){return this.toHex()===zn(e).toHex()},i})(),zn=function(i){return i instanceof pc?i:new pc(i)},Nf=[],j2=function(i){i.forEach(function(e){Nf.indexOf(e)<0&&(e(pc,fc),Nf.push(e))})};function D2(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in t)s[t[o]]=o;var l={};i.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,f,p=s[this.toHex()];if(p)return p;if(u!=null&&u.closest){var m=this.toRgb(),y=1/0,v="black";if(!l.length)for(var _ in t)l[_]=new i(t[_]).toRgb();for(var S in t){var b=(h=m,f=l[S],Math.pow(h.r-f.r,2)+Math.pow(h.g-f.g,2)+Math.pow(h.b-f.b,2));b<y&&(y=b,v=S)}return v}},e.string.push([function(u){var h=u.toLowerCase(),f=h==="transparent"?"#0000":t[h];return f?new i(f).toRgb():null},"name"])}j2([D2]);const Hi=class Us{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Us)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((l,u)=>l===t[u]);if(e!==null&&t!==null){const l=Object.keys(e),u=Object.keys(t);return l.length!==u.length?!1:l.every(h=>e[h]===t[h])}return e===t}toRgba(){const[e,t,s,o]=this._components;return{r:e,g:t,b:s,a:o}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(o*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,o,l]=this._components;return e[0]=t,e[1]=s,e[2]=o,e[3]=l,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,o]=this._components;return e[0]=t,e[1]=s,e[2]=o,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,o,l]=Us._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return t&&(s=s*e+.5|0,o=o*e+.5|0,l=l*e+.5|0),(e*255<<24)+(s<<16)+(o<<8)+l}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,o,l;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,o,l=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,o,l=255]=e,t/=255,s/=255,o/=255,l/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const h=Us.HEX_PATTERN.exec(e);h&&(e=`#${h[2]}`)}const u=zn(e);u.isValid()&&({r:t,g:s,b:o,a:l}=u.rgba,t/=255,s/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((o,l)=>{e[l]=Math.min(Math.max(o,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Us||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Hi.shared=new Hi;Hi._temp=new Hi;Hi.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let wt=Hi;const O2={cullArea:null,cullable:!1,cullableChildren:!0};let $u=0;const $f=500;function et(...i){$u!==$f&&($u++,$u===$f?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}const ro={_registeredResources:new Set,register(i){this._registeredResources.add(i)},unregister(i){this._registeredResources.delete(i)},release(){this._registeredResources.forEach(i=>i.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(i){return this._registeredResources.has(i)},reset(){this._registeredResources.clear()}};class N2{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class $2{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new N2(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const hn=new $2;ro.register(hn);const U2={get isCachedAsTexture(){var i;return!!((i=this.renderGroup)!=null&&i.isCachedAsTexture)},cacheAsTexture(i){typeof i=="boolean"&&i===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(i===!0?{}:i))},updateCacheTexture(){var i;(i=this.renderGroup)==null||i.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(i){Me("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(i)}};function G2(i,e,t){const s=i.length;let o;if(e>=s||t===0)return;t=e+t>s?s-e:t;const l=s-t;for(o=e;o<l;++o)i[o]=i[o+t];i.length=l}const W2={allowChildren:!0,removeChildren(i=0,e){var l;const t=e??this.children.length,s=t-i,o=[];if(s>0&&s<=t){for(let h=t-1;h>=i;h--){const f=this.children[h];f&&(o.push(f),f.parent=null)}G2(this.children,i,t);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(o);for(let h=0;h<o.length;++h){const f=o[h];(l=f.parentRenderLayer)==null||l.detach(f),this.emit("childRemoved",f,this,h),o[h].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){const e=this.getChildAt(i);return this.removeChild(e)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,e)},getChildIndex(i){const e=this.children.indexOf(i);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(i,e){this.allowChildren||Me(We,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${i}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(i.parent){const o=i.parent.children.indexOf(i);if(i.parent===this&&o===e)return i;o!==-1&&i.parent.children.splice(o,1)}e===t.length?t.push(i):t.splice(e,0,i),i.parent=this,i.didChange=!0,i._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,e),i.emit("added",this),i},swapChildren(i,e){if(i===e)return;const t=this.getChildIndex(i),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=i;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var i;(i=this.parent)==null||i.removeChild(this)},reparentChild(...i){return i.length===1?this.reparentChildAt(i[0],this.children.length):(i.forEach(e=>this.reparentChildAt(e,this.children.length)),i[0])},reparentChildAt(i,e){if(i.parent===this)return this.setChildIndex(i,e),i;const t=i.worldTransform.clone();i.removeFromParent(),this.addChildAt(i,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),i.setFromMatrix(t),i},replaceChild(i,e){i.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(i)),e.setFromMatrix(i.localTransform),e.updateLocalTransform(),this.removeChild(i)}},H2={collectRenderables(i,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(i,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,i):this.collectRenderablesWithEffects(i,e,t))},collectRenderablesSimple(i,e,t){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(i,e,t)},collectRenderablesWithEffects(i,e,t){const{renderPipes:s}=e;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,i)}this.collectRenderablesSimple(i,e,t);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,i)}}};class Uf{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class V2{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return hn.get(s.maskClass,e)}return e}returnMaskEffect(e){hn.return(e)}}const mc=new V2;Mt.handleByList(me.MaskEffect,mc._effectClasses);const Y2={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)},addEffect(i){this.effects.indexOf(i)===-1&&(this.effects.push(i),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(i){const e=this.effects.indexOf(i);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(i){const e=this._maskEffect;(e==null?void 0:e.mask)!==i&&(e&&(this.removeEffect(e),mc.returnMaskEffect(e),this._maskEffect=null),i!=null&&(this._maskEffect=mc.getMaskEffect(i),this.addEffect(this._maskEffect)))},get mask(){var i;return(i=this._maskEffect)==null?void 0:i.mask},setMask(i){this._maskOptions={...this._maskOptions,...i},i.mask&&(this.mask=i.mask),this._markStructureAsChanged()},set filters(i){var l;!Array.isArray(i)&&i&&(i=[i]);const e=this._filterEffect||(this._filterEffect=new Uf);i=i;const t=(i==null?void 0:i.length)>0,s=((l=e.filters)==null?void 0:l.length)>0,o=t!==s;i=Array.isArray(i)?i.slice(0):i,e.filters=Object.freeze(i),o&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=i??null))},get filters(){var i;return(i=this._filterEffect)==null?void 0:i.filters},set filterArea(i){this._filterEffect||(this._filterEffect=new Uf),this._filterEffect.filterArea=i},get filterArea(){var i;return(i=this._filterEffect)==null?void 0:i.filterArea}},X2={label:null,get name(){return Me(We,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){Me(We,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,e=!1){return this.getChildByLabel(i,e)},getChildByLabel(i,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const o=t[s];if(o.label===i||i instanceof RegExp&&i.test(o.label))return o}if(e)for(let s=0;s<t.length;s++){const l=t[s].getChildByLabel(i,!0);if(l)return l}return null},getChildrenByLabel(i,e=!1,t=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===i||i instanceof RegExp&&i.test(l.label))&&t.push(l)}if(e)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(i,!0,t);return t}},Nt=hn.getPool(Ie),Zn=hn.getPool(Cn),q2=new Ie,K2={getFastGlobalBounds(i,e){e||(e=new Cn),e.clear(),this._getGlobalBoundsRecursive(!!i,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(i,e,t){let s=e;if(i&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=Zn.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(i,s,t)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(q2).invert()),e.addBounds(s),Zn.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),Zn.return(s))}};function np(i,e,t){t.clear();let s,o;return i.parent?e?s=i.parent.worldTransform:(o=Nt.get().identity(),s=Bc(i,o)):s=Ie.IDENTITY,rp(i,t,s,e),o&&Nt.return(o),t.isValid||t.set(0,0,0,0),t}function rp(i,e,t,s){var h,f;if(!i.visible||!i.measurable)return;let o;s?o=i.worldTransform:(i.updateLocalTransform(),o=Nt.get(),o.appendFrom(i.localTransform,t));const l=e,u=!!i.effects.length;if(u&&(e=Zn.get().clear()),i.boundsArea)e.addRect(i.boundsArea,o);else{const p=i.bounds;p&&!p.isEmpty()&&(e.matrix=o,e.addBounds(p));for(let m=0;m<i.children.length;m++)rp(i.children[m],e,o,s)}if(u){for(let p=0;p<i.effects.length;p++)(f=(h=i.effects[p]).addBounds)==null||f.call(h,e);l.addBounds(e,Ie.IDENTITY),Zn.return(e)}s||Nt.return(o)}function Bc(i,e){const t=i.parent;return t&&(Bc(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function ip(i,e){if(i===16777215||!e)return e;if(e===16777215||!i)return i;const t=i>>16&255,s=i>>8&255,o=i&255,l=e>>16&255,u=e>>8&255,h=e&255,f=t*l/255|0,p=s*u/255|0,m=o*h/255|0;return(f<<16)+(p<<8)+m}const Gf=16777215;function Wf(i,e){return i===Gf?e:e===Gf?i:ip(i,e)}function Ia(i){return((i&255)<<16)+(i&65280)+(i>>16&255)}const Q2={getGlobalAlpha(i){if(i)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(i=new Ie,e){if(e)return i.copyFrom(this.worldTransform);this.updateLocalTransform();const t=Bc(this,Nt.get().identity());return i.appendFrom(this.localTransform,t),Nt.return(t),i},getGlobalTint(i){if(i)return this.renderGroup?Ia(this.renderGroup.worldColor):this.parentRenderGroup?Ia(Wf(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Wf(e,t.localColor),t=t.parent;return Ia(e)}};function sp(i,e,t){return e.clear(),t||(t=Ie.IDENTITY),op(i,e,t,i,!0),e.isValid||e.set(0,0,0,0),e}function op(i,e,t,s,o){var f,p;let l;if(o)l=Nt.get(),l=t.copyTo(l);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const m=i.localTransform;l=Nt.get(),l.appendFrom(m,t)}const u=e,h=!!i.effects.length;if(h&&(e=Zn.get().clear()),i.boundsArea)e.addRect(i.boundsArea,l);else{i.renderPipeId&&(e.matrix=l,e.addBounds(i.bounds));const m=i.children;for(let y=0;y<m.length;y++)op(m[y],e,l,s,!1)}if(h){for(let m=0;m<i.effects.length;m++)(p=(f=i.effects[m]).addLocalBounds)==null||p.call(f,e,s);u.addBounds(e,Ie.IDENTITY),Zn.return(e)}Nt.return(l)}function ap(i,e){const t=i.children;for(let s=0;s<t.length;s++){const o=t[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,h=e.index;(e.data[h]!==l||e.data[h+1]!==u)&&(e.data[e.index]=l,e.data[e.index+1]=u,e.didChange=!0),e.index=h+2,o.children.length&&ap(o,e)}return e.didChange}const Z2=new Ie,J2={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(i,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=i/e*t:this.scale.x=t},_setHeight(i,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=i/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Cn});const i=this._localBoundsCacheData;return i.index=1,i.didChange=!1,i.data[0]!==this._didViewChangeTick&&(i.didChange=!0,i.data[0]=this._didViewChangeTick),ap(this,i),i.didChange&&sp(this,i.localBounds,Z2),i.localBounds},getBounds(i,e){return np(this,i,e||new Cn)}},eg={_onRender:null,set onRender(i){const e=this.renderGroup||this.parentRenderGroup;if(!i){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}},tg={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(ng))}};function ng(i,e){return i._zIndex-e._zIndex}const rg={getGlobalPosition(i=new Bt,e=!1){return this.parent?this.parent.toGlobal(this._position,i,e):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,e,t=!1){const s=this.getGlobalTransform(Nt.get(),t);return e=s.apply(i,e),Nt.return(s),e},toLocal(i,e,t,s){e&&(i=e.toGlobal(i,t,s));const o=this.getGlobalTransform(Nt.get(),s);return t=o.applyInverse(i,t),Nt.return(o),t}};class lp{constructor(){this.uid=ct("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let ig=0;class sg{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new Oa(this.textureOptions)}createTexture(e,t,s){const o=new An({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new Le({source:o,label:`texturePool_${ig++}`})}getOptimalTexture(e,t,s=1,o){let l=Math.ceil(e*s-1e-6),u=Math.ceil(t*s-1e-6);l=Da(l),u=Da(u);const h=(l<<17)+(u<<1)+(o?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let f=this._texturePool[h].pop();return f||(f=this.createTexture(l,u,o)),f.source._resolution=s,f.source.width=l/s,f.source.height=u/s,f.source.pixelWidth=l,f.source.pixelHeight=u,f.frame.x=0,f.frame.y=0,f.frame.width=e,f.frame.height=t,f.updateUvs(),this._poolKeyHash[f.uid]=h,f}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const up=new sg;ro.register(up);class og{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Ie,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new lp,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(up.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Ie),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Ie),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Ie),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function ag(i,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(i[s]=e[s])}const Uu=new Lt(null),wa=new Lt(null),Gu=new Lt(null,1,1),Sa=new Lt(null),Hf=1,lg=2,Wu=4;class kn extends bn{constructor(e={}){var t,s;super(),this.uid=ct("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Ie,this.relativeGroupTransform=new Ie,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Lt(this,0,0),this._scale=Gu,this._pivot=wa,this._origin=Sa,this._skew=Uu,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],ag(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(o=>this.addChild(o)),(s=e.parent)==null||s.addChild(this)}static mixin(e){Me("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Mt.mixin(kn,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Me(We,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let o=0;o<e.length;o++)this.addChild(e[o]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let o=0;o<e.length;o++)this.removeChild(e[o]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=hn.get(og,this),this.groupTransform=Ie.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),hn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Ie),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*w2}set angle(e){this.rotation=e*S2}get pivot(){return this._pivot===wa&&(this._pivot=new Lt(this,0,0)),this._pivot}set pivot(e){this._pivot===wa&&(this._pivot=new Lt(this,0,0),this._origin!==Sa&&et("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Uu&&(this._skew=new Lt(this,0,0)),this._skew}set skew(e){this._skew===Uu&&(this._skew=new Lt(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Gu&&(this._scale=new Lt(this,1,1)),this._scale}set scale(e){this._scale===Gu&&(this._scale=new Lt(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Sa&&(this._origin=new Lt(this,0,0)),this._origin}set origin(e){this._origin===Sa&&(this._origin=new Lt(this,0,0),this._pivot!==wa&&et("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,h=s._x,f=s._y,p=o._x,m=o._y,y=-l._x,v=-l._y;t.a=this._cx*h,t.b=this._sx*h,t.c=this._cy*f,t.d=this._sy*f,t.tx=u._x-(p*t.a+m*t.c)+(y*t.a+v*t.c)-y,t.ty=u._y-(p*t.b+m*t.d)+(y*t.b+v*t.d)-v}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Hf,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=wt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=Hf,this._onUpdate())}get tint(){return Ia(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=lg,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Wu,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Wu,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=Wu,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var o;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let l=0;l<t.length;++l)t[l].destroy(e);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}Mt.mixin(kn,W2,K2,rg,eg,J2,Y2,X2,tg,O2,U2,Q2,H2);class cp extends kn{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Cn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:o}=e;return s>=t.minX&&s<=t.maxX&&o>=t.minY&&o<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var t,s;super.destroy(e),this._bounds=null;for(const o in this._gpuData)(s=(t=this._gpuData[o]).destroy)==null||s.call(t);this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:o}=t;o.blendMode.pushBlendMode(this,this.groupBlendMode,e),o[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let f=0;f<h;f++)u[f].collectRenderables(e,t,s);o.blendMode.popBlendMode(e)}}class Vi extends cp{constructor(e=Le.EMPTY){e instanceof Le&&(e={texture:e});const{texture:t=Le.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...h}=e;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Lt({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof Le?new Vi(e):new Vi(Le.from(e,t))}set texture(e){e||(e=Le.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return E2(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Me("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:o,height:l}=t.orig;s.minX=-e._x*o,s.maxX=s.minX+o,s.minY=-e._y*l,s.maxY=s.minY+l}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const ug=new Cn;function hp(i,e,t){const s=ug;i.measurable=!0,np(i,t,s),e.addBoundsMask(s),i.measurable=!1}function dp(i,e,t){const s=Zn.get();i.measurable=!0;const o=Nt.get().identity(),l=fp(i,t,o);sp(i,s,l),i.measurable=!1,e.addBoundsMask(s),Nt.return(o),Zn.return(s)}function fp(i,e,t){return i?(i!==e&&(fp(i.parent,e,t),i.updateLocalTransform(),t.append(i.localTransform)),t):(et("Mask bounds, renderable is not inside the root container"),t)}class pp{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Vi),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||hp(this.mask,e,t)}addLocalBounds(e,t){dp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof Vi}}pp.extension=me.MaskEffect;class mp{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}mp.extension=me.MaskEffect;class gp{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){hp(this.mask,e,t)}addLocalBounds(e,t){dp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof kn}}gp.extension=me.MaskEffect;const cg={createCanvas:(i,e)=>{const t=document.createElement("canvas");return t.width=i,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,e)=>fetch(i,e),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};let Vf=cg;const tt={get(){return Vf},set(i){Vf=i}};class yp extends An{constructor(e){e.resource||(e.resource=tt.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const o=super.resize(e,t,s);return o&&this.resizeCanvas(),o}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}yp.extension=me.TextureSource;class ii extends An{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}ii.extension=me.TextureSource;var gc=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(gc||{});class Hu{constructor(e,t=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=o}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const xp=class en{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Hu(null,null,1/0),this.deltaMS=1/en.targetFPMS,this.elapsedMS=1/en.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=gc.NORMAL){return this._addListener(new Hu(e,t,s))}addOnce(e,t,s=gc.NORMAL){return this._addListener(new Hu(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const l=e-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=e-l%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*en.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,en.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!en._shared){const e=en._shared=new en;e.autoStart=!0,e._protected=!0}return en._shared}static get system(){if(!en._system){const e=en._system=new en;e.autoStart=!0,e._protected=!0}return en._system}};xp.targetFPMS=.06;let ka=xp,Vu;async function vp(){return Vu??(Vu=(async()=>{var u;const e=tt.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(h=>{const f=document.createElement("video");f.onloadeddata=()=>h(f),f.onerror=()=>h(null),f.autoplay=!1,f.crossOrigin="anonymous",f.preload="auto",f.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",f.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),e.deleteFramebuffer(o),e.deleteTexture(s),(u=e.getExtension("WEBGL_lose_context"))==null||u.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Vu}const Wa=class _p extends An{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={..._p.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=ka.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await vp(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(ka.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ka.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ka.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Wa.extension=me.TextureSource;Wa.defaultOptions={...An.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Wa.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ys=Wa;const Sn=(i,e,t=!1)=>(Array.isArray(i)||(i=[i]),e?i.map(s=>typeof s=="string"||t?e(s):s):i);class hg{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||et(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=Sn(e);let o;for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];if(p.test(t)){o=p.getCacheableAssets(s,t);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(f=>{l.set(f,t)});const u=[...l.keys()],h={cacheKeys:u,keys:s};s.forEach(f=>{this._cacheMap.set(f,h)}),u.forEach(f=>{const p=o?o[f]:t;this._cache.has(f)&&this._cache.get(f)!==p&&et("[Cache] already has key:",f),this._cache.set(f,l.get(f))})}remove(e){if(!this._cacheMap.has(e)){et(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(o=>{this._cache.delete(o)}),t.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const Je=new hg,yc=[];Mt.handleByList(me.TextureSource,yc);function wp(i={}){const e=i&&i.resource,t=e?i.resource:i,s=e?i:{resource:i};for(let o=0;o<yc.length;o++){const l=yc[o];if(l.test(t))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function dg(i={},e=!1){const t=i&&i.resource,s=t?i.resource:i,o=t?i:{resource:i};if(!e&&Je.has(s))return Je.get(s);const l=new Le({source:wp(o)});return l.on("destroy",()=>{Je.has(s)&&Je.remove(s)}),e||Je.set(s,l),l}function fg(i,e=!1){return typeof i=="string"?Je.get(i):i instanceof An?new Le({source:i}):dg(i,e)}Le.from=fg;An.from=wp;Mt.add(pp,mp,gp,Ys,ii,yp,Lc);var Pr=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(Pr||{});function _n(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Ls(i){return i.split("?")[0].split("#")[0]}function pg(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function mg(i,e,t){return i.replace(new RegExp(pg(e),"g"),t)}function gg(i,e){let t="",s=0,o=-1,l=0,u=-1;for(let h=0;h<=i.length;++h){if(h<i.length)u=i.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(o===h-1||l===1))if(o!==h-1&&l===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",s=0):(t=t.slice(0,f),s=t.length-1-t.lastIndexOf("/")),o=h,l=0;continue}}else if(t.length===2||t.length===1){t="",s=0,o=h,l=0;continue}}}else t.length>0?t+=`/${i.slice(o+1,h)}`:t=i.slice(o+1,h),s=h-o-1;o=h,l=0}else u===46&&l!==-1?++l:l=-1}return t}const tn={toPosix(i){return mg(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){_n(i),i=this.toPosix(i);const e=/^file:\/\/\//.exec(i);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(i);return t?t[0]:""},toAbsolute(i,e,t){if(_n(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const s=Ls(this.toPosix(e??tt.get().getBaseUrl())),o=Ls(this.toPosix(t??this.rootname(s)));return i=this.toPosix(i),i.startsWith("/")?tn.join(o,i.slice(1)):this.isAbsolute(i)?i:this.join(s,i)},normalize(i){if(_n(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let e="";const t=i.startsWith("/");this.hasProtocol(i)&&(e=this.rootname(i),i=i.slice(e.length));const s=i.endsWith("/");return i=gg(i),i.length>0&&s&&(i+="/"),t?`/${i}`:e+i},isAbsolute(i){return _n(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const s=i[t];if(_n(s),s.length>0)if(e===void 0)e=s;else{const o=i[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(i){if(_n(i),i.length===0)return".";i=this.toPosix(i);let e=i.charCodeAt(0);const t=e===47;let s=-1,o=!0;const l=this.getProtocol(i),u=i;i=i.slice(l.length);for(let h=i.length-1;h>=1;--h)if(e=i.charCodeAt(h),e===47){if(!o){s=h;break}}else o=!1;return s===-1?t?"/":this.isUrl(u)?l+i:l:t&&s===1?"//":l+i.slice(0,s)},rootname(i){_n(i),i=this.toPosix(i);let e="";if(i.startsWith("/")?e="/":e=this.getProtocol(i),this.isUrl(i)){const t=i.indexOf("/",e.length);t!==-1?e=i.slice(0,t):e=i,e.endsWith("/")||(e+="/")}return e},basename(i,e){_n(i),e&&_n(e),i=Ls(this.toPosix(i));let t=0,s=-1,o=!0,l;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";let u=e.length-1,h=-1;for(l=i.length-1;l>=0;--l){const f=i.charCodeAt(l);if(f===47){if(!o){t=l+1;break}}else h===-1&&(o=!1,h=l+1),u>=0&&(f===e.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=h))}return t===s?s=h:s===-1&&(s=i.length),i.slice(t,s)}for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!o){t=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":i.slice(t,s)},extname(i){_n(i),i=Ls(this.toPosix(i));let e=-1,t=0,s=-1,o=!0,l=0;for(let u=i.length-1;u>=0;--u){const h=i.charCodeAt(u);if(h===47){if(!o){t=u+1;break}continue}s===-1&&(o=!1,s=u+1),h===46?e===-1?e=u:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||s===-1||l===0||l===1&&e===s-1&&e===t+1?"":i.slice(e,s)},parse(i){_n(i);const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;i=Ls(this.toPosix(i));let t=i.charCodeAt(0);const s=this.isAbsolute(i);let o;e.root=this.rootname(i),s||this.hasProtocol(i)?o=1:o=0;let l=-1,u=0,h=-1,f=!0,p=i.length-1,m=0;for(;p>=o;--p){if(t=i.charCodeAt(p),t===47){if(!f){u=p+1;break}continue}h===-1&&(f=!1,h=p+1),t===46?l===-1?l=p:m!==1&&(m=1):l!==-1&&(m=-1)}return l===-1||h===-1||m===0||m===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&s?e.base=e.name=i.slice(1,h):e.base=e.name=i.slice(u,h)):(u===0&&s?(e.name=i.slice(1,l),e.base=i.slice(1,h)):(e.name=i.slice(u,l),e.base=i.slice(u,h)),e.ext=i.slice(l,h)),e.dir=this.dirname(i),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function Sp(i,e,t,s,o){const l=e[t];for(let u=0;u<l.length;u++){const h=l[u];t<e.length-1?Sp(i.replace(s[t],h),e,t+1,s,o):o.push(i.replace(s[t],h))}}function yg(i){const e=/\{(.*?)\}/g,t=i.match(e),s=[];if(t){const o=[];t.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),Sp(i,o,0,t,s)}else s.push(i);return s}const Na=i=>!Array.isArray(i);class qi{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return Sn(t||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>(u==null?void 0:u.src)??u):l!=null&&l.src?l.src:l,!0)}addManifest(e){this._manifest&&et("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let o=t;Array.isArray(t)||(o=Object.entries(t).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,h=l.alias;let f;if(typeof h=="string"){const p=this._createBundleAssetId(e,h);s.push(p),f=[h,p]}else{const p=h.map(m=>this._createBundleAssetId(e,m));s.push(...p),f=[...h,...p]}this.add({...l,alias:f,src:u})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=l=>{this.hasKey(l)&&et(`[Resolver] already has key: ${l} overwriting`)},Sn(t).forEach(l=>{const{src:u}=l;let{data:h,format:f,loadParser:p,parser:m}=l;const y=Sn(u).map(b=>typeof b=="string"?yg(b):Array.isArray(b)?b:[b]),v=this.getAlias(l);Array.isArray(v)?v.forEach(s):s(v);const _=[],S=b=>{const w=this._parsers.find(P=>P.test(b));return{...w==null?void 0:w.parse(b),src:b}};y.forEach(b=>{b.forEach(w=>{let P={};if(typeof w!="object"?P=S(w):(h=w.data??h,f=w.format??f,(w.loadParser||w.parser)&&(p=w.loadParser??p,m=w.parser??m),P={...S(w.src),...w}),!v)throw new Error(`[Resolver] alias is undefined for this asset: ${P.src}`);P=this._buildResolvedAsset(P,{aliases:v,data:h,format:f,loadParser:p,parser:m,progressSize:l.progressSize}),_.push(P)})}),v.forEach(b=>{this._assetMap[b]=_})})}resolveBundle(e){const t=Na(e);e=Sn(e);const s={};return e.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),h={};for(const f in u){const p=u[f];h[this._extractAssetIdFromBundle(o,f)]=p}s[o]=h}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const o in t)s[o]=t[o].src;return s}return t.src}resolve(e){const t=Na(e);e=Sn(e);const s={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u==null||u.priority.forEach(h=>{u.params[h].forEach(f=>{const p=l.filter(m=>m[h]?m[h]===f:!1);p.length&&(l=p)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:o,loadParser:l,parser:u,format:h,progressSize:f}=t;return(this._basePath||this._rootPath)&&(e.src=tn.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=l??e.loadParser,e.parser=u??e.parser,e.format=h??e.format??xg(e.src),f!==void 0&&(e.progressSize=f),e}}qi.RETINA_PREFIX=/@([0-9\.]+)x/;function xg(i){return i.split(".").pop().split("?").shift().split("#").shift()}const xc=(i,e)=>{const t=e.split("?")[1];return t&&(i+=`?${t}`),i},kp=class Gs{constructor(e,t){this.linkedSheets=[];let s=e;(e==null?void 0:e.source)instanceof An&&(s={texture:e,data:t});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof Le?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const h=parseFloat(l.meta.scale);h?(this.resolution=h,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Gs.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=Gs.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const o=this._frameKeys[t],l=this._frames[o],u=l.frame;if(u){let h=null,f=null;const p=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,m=new ft(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);l.rotated?h=new ft(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new ft(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(f=new ft(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new Le({source:this.textureSource,frame:h,orig:m,trim:f,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const o=e[t][s];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Gs.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Gs.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};kp.BATCH_SIZE=1e3;let Yf=kp;const vg=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Cp(i,e,t){const s={};if(i.forEach(o=>{s[o]=e}),Object.keys(e.textures).forEach(o=>{s[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=tn.dirname(i[0]);e.linkedSheets.forEach((l,u)=>{const h=Cp([`${o}/${e.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,h)})}return s}const _g={extension:me.Asset,cache:{test:i=>i instanceof Yf,getCacheableAssets:(i,e)=>Cp(i,e,!1)},resolver:{extension:{type:me.ResolveParser,name:"resolveSpritesheet"},test:i=>{const t=i.split("?")[0].split("."),s=t.pop(),o=t.pop();return s==="json"&&vg.includes(o)},parse:i=>{var t;const e=i.split(".");return{resolution:parseFloat(((t=qi.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:e[e.length-2],src:i}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:me.LoadParser,priority:Pr.Normal,name:"spritesheetLoader"},async testParse(i,e){return tn.extname(e.src).toLowerCase()===".json"&&!!i.frames},async parse(i,e,t){var y,v;const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=(e==null?void 0:e.data)??{};let h=tn.dirname(e.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let f;if(s instanceof Le)f=s;else{const _=xc(h+(o??i.meta.image),e.src);f=(await t.load([{src:_,data:l}]))[_]}const p=new Yf({texture:f.source,data:i,cachePrefix:u});await p.parse();const m=(y=i==null?void 0:i.meta)==null?void 0:y.related_multi_packs;if(Array.isArray(m)){const _=[];for(const b of m){if(typeof b!="string")continue;let w=h+b;(v=e.data)!=null&&v.ignoreMultiPack||(w=xc(w,e.src),_.push(t.load({src:w,data:{textureOptions:l,ignoreMultiPack:!0}})))}const S=await Promise.all(_);p.linkedSheets=S,S.forEach(b=>{b.linkedSheets=[p].concat(p.linkedSheets.filter(w=>w!==b))})}return p},async unload(i,e,t){await t.unload(i.textureSource._sourceOrigin),i.destroy(!1)}}};Mt.add(_g);const Yu=Object.create(null),Xf=Object.create(null);function jc(i,e){let t=Xf[i];return t===void 0&&(Yu[e]===void 0&&(Yu[e]=1),Xf[i]=t=Yu[e]++),t}let ji;function bp(){return(!ji||ji!=null&&ji.isContextLost())&&(ji=tt.get().createCanvas().getContext("webgl",{})),ji}let Ca;function wg(){if(!Ca){Ca="mediump";const i=bp();i&&i.getShaderPrecisionFormat&&(Ca=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?"highp":"mediump")}return Ca}function Sg(i,e,t){return e?i:t?(i=i.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${i}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${i}
        `}function kg(i,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(i.substring(0,9)!=="precision"){let o=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${i}`}else if(s!=="highp"&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}function Cg(i,e){return e?`#version 300 es
${i}`:i}const bg={},Ag={};function Pg(i,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?bg:Ag;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,i.indexOf("#define SHADER_NAME")!==-1?i:`${`#define SHADER_NAME ${e}`}
${i}`}function Tg(i,e){return e?i.replace("#version 300 es",""):i}const Xu={stripVersion:Tg,ensurePrecision:kg,addProgramDefines:Sg,setProgramName:Pg,insertVersion:Cg},Bs=Object.create(null),Ap=class vc{constructor(e){e={...vc.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:wg()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let o=e.fragment,l=e.vertex;Object.keys(Xu).forEach(u=>{const h=s[u];o=Xu[u](o,h,!0),l=Xu[u](l,h,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=jc(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Bs[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return Bs[t]||(Bs[t]=new vc(e),Bs[t]._cacheKey=t),Bs[t]}};Ap.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Pp=Ap;const qf={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Eg(i){return qf[i]??qf.float32}const Mg={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function Rg({source:i,entryPoint:e}){const t={},s=i.indexOf(`fn ${e}`);if(s!==-1){const o=i.indexOf("->",s);if(o!==-1){const l=i.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const f=Mg[h[3]]??"float32";t[h[2]]={location:parseInt(h[1],10),format:f,stride:Eg(f).stride,offset:0,instance:!1,start:0}}}}return t}function qu(i){var y,v;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,f=/struct\s+(\w+)/,p=(y=i.match(e))==null?void 0:y.map(_=>({group:parseInt(_.match(t)[1],10),binding:parseInt(_.match(s)[1],10),name:_.match(o)[2],isUniform:_.match(o)[1]==="<uniform>",type:_.match(l)[1]}));if(!p)return{groups:[],structs:[]};const m=((v=i.match(u))==null?void 0:v.map(_=>{const S=_.match(f)[1],b=_.match(h).reduce((w,P)=>{const[T,E]=P.split(":");return w[T.trim()]=E.trim(),w},{});return b?{name:S,members:b}:null}).filter(({name:_})=>p.some(S=>S.type===_)))??[];return{groups:p,structs:m}}var Ws=(i=>(i[i.VERTEX=1]="VERTEX",i[i.FRAGMENT=2]="FRAGMENT",i[i.COMPUTE=4]="COMPUTE",i))(Ws||{});function Ig({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:Ws.VERTEX|Ws.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:Ws.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:Ws.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function Fg({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function zg(i,e){const t=new Set,s=new Set,o=[...i.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),l=[...i.groups,...e.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:o,groups:l}}const js=Object.create(null);class Ha{constructor(e){var h,f;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:o,gpuLayout:l,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=s,t.source===s.source){const p=qu(t.source);this.structsAndGroups=p}else{const p=qu(s.source),m=qu(t.source);this.structsAndGroups=zg(p,m)}this.layout=o??Fg(this.structsAndGroups),this.gpuLayout=l??Ig(this.structsAndGroups),this.autoAssignGlobalUniforms=((h=this.layout[0])==null?void 0:h.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((f=this.layout[1])==null?void 0:f.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=jc(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=Rg(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,js[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return js[t]||(js[t]=new Ha(e),js[t]._cacheKey=t),js[t]}}const Tp=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],Lg=Tp.reduce((i,e)=>(i[e]=!0,i),{});function Bg(i,e){switch(i){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Ep=class Mp{constructor(e,t){this._touched=0,this.uid=ct("uniform"),this._resourceType="uniformGroup",this._resourceId=ct("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...Mp.defaultOptions,...t},this.uniformStructures=e;const s={};for(const o in e){const l=e[o];if(l.name=o,l.size=l.size??1,!Lg[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,f]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${h}', size: ${f} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${Tp.join(", ")}`)}l.value??(l.value=Bg(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=jc(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};Ep.defaultOptions={ubo:!1,isStatic:!1};let Rp=Ep;class Fa{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const o=e[s];this.setResource(o,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){var o,l;const s=this.resources[t];e!==s&&(s&&((o=e.off)==null||o.call(e,"change",this.onResourceChange,this)),(l=e.on)==null||l.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){var t;const e=this.resources;for(const s in e){const o=e[s];(t=o==null?void 0:o.off)==null||t.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var _c=(i=>(i[i.WEBGL=1]="WEBGL",i[i.WEBGPU=2]="WEBGPU",i[i.BOTH=3]="BOTH",i))(_c||{});class Dc extends bn{constructor(e){super(),this.uid=ct("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:h}=e;this.gpuProgram=t,this.glProgram=s,u===void 0&&(u=0,t&&(u|=_c.WEBGPU),s&&(u|=_c.WEBGL)),this.compatibleRenderers=u;const f={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&o&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&o&&h)for(const p in h)for(const m in h[p]){const y=h[p][m];f[y]={group:p,binding:m,name:y}}else if(t&&o&&!h){const p=t.structsAndGroups.groups;h={},p.forEach(m=>{h[m.group]=h[m.group]||{},h[m.group][m.binding]=m.name,f[m.name]=m})}else if(l){o={},h={},t&&t.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,f[y.name]=y});let p=0;for(const m in l)f[m]||(o[99]||(o[99]=new Fa,this._ownedBindGroups.push(o[99])),f[m]={group:99,binding:p,name:m},h[99]=h[99]||{},h[99][p]=m,p++);for(const m in l){const y=m;let v=l[m];!v.source&&!v._resourceType&&(v=new Rp(v));const _=f[y];_&&(o[_.group]||(o[_.group]=new Fa,this._ownedBindGroups.push(o[_.group])),o[_.group].setResource(v,_.binding))}}this.groups=o,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(o,f)}addResource(e,t,s){var o,l;(o=this._uniformBindMap)[t]||(o[t]={}),(l=this._uniformBindMap[t])[s]||(l[s]=e),this.groups[t]||(this.groups[t]=new Fa,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const o in t){const l=t[o];Object.defineProperty(s,l.name,{get(){return e[l.group].getResource(l.binding)},set(u){e[l.group].setResource(u,l.binding)}})}return s}destroy(e=!1){var t,s;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...o}=e;let l,u;return t&&(l=Ha.from(t)),s&&(u=Pp.from(s)),new Dc({gpuProgram:l,glProgram:u,...o})}}const wc=[];Mt.handleByNamedList(me.Environment,wc);async function jg(i){if(!i)for(let e=0;e<wc.length;e++){const t=wc[e];if(t.value.test()){await t.value.load();return}}}let Ds;function Dg(){if(typeof Ds=="boolean")return Ds;try{Ds=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ds=!1}return Ds}function Kf(i,e,t=2){const s=e&&e.length,o=s?e[0]*t:i.length;let l=Ip(i,0,o,t,!0);const u=[];if(!l||l.next===l.prev)return u;let h,f,p;if(s&&(l=Gg(i,e,l,t)),i.length>80*t){h=i[0],f=i[1];let m=h,y=f;for(let v=t;v<o;v+=t){const _=i[v],S=i[v+1];_<h&&(h=_),S<f&&(f=S),_>m&&(m=_),S>y&&(y=S)}p=Math.max(m-h,y-f),p=p!==0?32767/p:0}return Qs(l,u,t,h,f,p,0),u}function Ip(i,e,t,s,o){let l;if(o===ey(i,e,t,s)>0)for(let u=e;u<t;u+=s)l=Qf(u/s|0,i[u],i[u+1],l);else for(let u=t-s;u>=e;u-=s)l=Qf(u/s|0,i[u],i[u+1],l);return l&&Yi(l,l.next)&&(Js(l),l=l.next),l}function si(i,e){if(!i)return i;e||(e=i);let t=i,s;do if(s=!1,!t.steiner&&(Yi(t,t.next)||at(t.prev,t,t.next)===0)){if(Js(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function Qs(i,e,t,s,o,l,u){if(!i)return;!u&&l&&Xg(i,s,o,l);let h=i;for(;i.prev!==i.next;){const f=i.prev,p=i.next;if(l?Ng(i,s,o,l):Og(i)){e.push(f.i,i.i,p.i),Js(i),i=p.next,h=p.next;continue}if(i=p,i===h){u?u===1?(i=$g(si(i),e),Qs(i,e,t,s,o,l,2)):u===2&&Ug(i,e,t,s,o,l):Qs(si(i),e,t,s,o,l,1);break}}}function Og(i){const e=i.prev,t=i,s=i.next;if(at(e,t,s)>=0)return!1;const o=e.x,l=t.x,u=s.x,h=e.y,f=t.y,p=s.y,m=Math.min(o,l,u),y=Math.min(h,f,p),v=Math.max(o,l,u),_=Math.max(h,f,p);let S=s.next;for(;S!==e;){if(S.x>=m&&S.x<=v&&S.y>=y&&S.y<=_&&Hs(o,h,l,f,u,p,S.x,S.y)&&at(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function Ng(i,e,t,s){const o=i.prev,l=i,u=i.next;if(at(o,l,u)>=0)return!1;const h=o.x,f=l.x,p=u.x,m=o.y,y=l.y,v=u.y,_=Math.min(h,f,p),S=Math.min(m,y,v),b=Math.max(h,f,p),w=Math.max(m,y,v),P=Sc(_,S,e,t,s),T=Sc(b,w,e,t,s);let E=i.prevZ,I=i.nextZ;for(;E&&E.z>=P&&I&&I.z<=T;){if(E.x>=_&&E.x<=b&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&Hs(h,m,f,y,p,v,E.x,E.y)&&at(E.prev,E,E.next)>=0||(E=E.prevZ,I.x>=_&&I.x<=b&&I.y>=S&&I.y<=w&&I!==o&&I!==u&&Hs(h,m,f,y,p,v,I.x,I.y)&&at(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;E&&E.z>=P;){if(E.x>=_&&E.x<=b&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&Hs(h,m,f,y,p,v,E.x,E.y)&&at(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;I&&I.z<=T;){if(I.x>=_&&I.x<=b&&I.y>=S&&I.y<=w&&I!==o&&I!==u&&Hs(h,m,f,y,p,v,I.x,I.y)&&at(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function $g(i,e){let t=i;do{const s=t.prev,o=t.next.next;!Yi(s,o)&&zp(s,t,t.next,o)&&Zs(s,o)&&Zs(o,s)&&(e.push(s.i,t.i,o.i),Js(t),Js(t.next),t=i=o),t=t.next}while(t!==i);return si(t)}function Ug(i,e,t,s,o,l){let u=i;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&Qg(u,h)){let f=Lp(u,h);u=si(u,u.next),f=si(f,f.next),Qs(u,e,t,s,o,l,0),Qs(f,e,t,s,o,l,0);return}h=h.next}u=u.next}while(u!==i)}function Gg(i,e,t,s){const o=[];for(let l=0,u=e.length;l<u;l++){const h=e[l]*s,f=l<u-1?e[l+1]*s:i.length,p=Ip(i,h,f,s,!1);p===p.next&&(p.steiner=!0),o.push(Kg(p))}o.sort(Wg);for(let l=0;l<o.length;l++)t=Hg(o[l],t);return t}function Wg(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const s=(i.next.y-i.y)/(i.next.x-i.x),o=(e.next.y-e.y)/(e.next.x-e.x);t=s-o}return t}function Hg(i,e){const t=Vg(i,e);if(!t)return e;const s=Lp(t,i);return si(s,s.next),si(t,t.next)}function Vg(i,e){let t=e;const s=i.x,o=i.y;let l=-1/0,u;if(Yi(i,t))return t;do{if(Yi(i,t.next))return t.next;if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>l&&(l=y,u=t.x<t.next.x?t:t.next,y===s))return u}t=t.next}while(t!==e);if(!u)return null;const h=u,f=u.x,p=u.y;let m=1/0;t=u;do{if(s>=t.x&&t.x>=f&&s!==t.x&&Fp(o<p?s:l,o,f,p,o<p?l:s,o,t.x,t.y)){const y=Math.abs(o-t.y)/(s-t.x);Zs(t,i)&&(y<m||y===m&&(t.x>u.x||t.x===u.x&&Yg(u,t)))&&(u=t,m=y)}t=t.next}while(t!==h);return u}function Yg(i,e){return at(i.prev,i,e.prev)<0&&at(e.next,i,i.next)<0}function Xg(i,e,t,s){let o=i;do o.z===0&&(o.z=Sc(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,qg(o)}function qg(i){let e,t=1;do{let s=i,o;i=null;let l=null;for(e=0;s;){e++;let u=s,h=0;for(let p=0;p<t&&(h++,u=u.nextZ,!!u);p++);let f=t;for(;h>0||f>0&&u;)h!==0&&(f===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,h--):(o=u,u=u.nextZ,f--),l?l.nextZ=o:i=o,o.prevZ=l,l=o;s=u}l.nextZ=null,t*=2}while(e>1);return i}function Sc(i,e,t,s,o){return i=(i-t)*o|0,e=(e-s)*o|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function Kg(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Fp(i,e,t,s,o,l,u,h){return(o-u)*(e-h)>=(i-u)*(l-h)&&(i-u)*(s-h)>=(t-u)*(e-h)&&(t-u)*(l-h)>=(o-u)*(s-h)}function Hs(i,e,t,s,o,l,u,h){return!(i===u&&e===h)&&Fp(i,e,t,s,o,l,u,h)}function Qg(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!Zg(i,e)&&(Zs(i,e)&&Zs(e,i)&&Jg(i,e)&&(at(i.prev,i,e.prev)||at(i,e.prev,e))||Yi(i,e)&&at(i.prev,i,i.next)>0&&at(e.prev,e,e.next)>0)}function at(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Yi(i,e){return i.x===e.x&&i.y===e.y}function zp(i,e,t,s){const o=Aa(at(i,e,t)),l=Aa(at(i,e,s)),u=Aa(at(t,s,i)),h=Aa(at(t,s,e));return!!(o!==l&&u!==h||o===0&&ba(i,t,e)||l===0&&ba(i,s,e)||u===0&&ba(t,i,s)||h===0&&ba(t,e,s))}function ba(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Aa(i){return i>0?1:i<0?-1:0}function Zg(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&zp(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Zs(i,e){return at(i.prev,i,i.next)<0?at(i,e,i.next)>=0&&at(i,i.prev,e)>=0:at(i,e,i.prev)<0||at(i,i.next,e)<0}function Jg(i,e){let t=i,s=!1;const o=(i.x+e.x)/2,l=(i.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==i);return s}function Lp(i,e){const t=kc(i.i,i.x,i.y),s=kc(e.i,e.x,e.y),o=i.next,l=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,s.next=t,t.prev=s,l.next=s,s.prev=l,s}function Qf(i,e,t,s){const o=kc(i,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function Js(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function kc(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function ey(i,e,t,s){let o=0;for(let l=e,u=t-s;l<t;l+=s)o+=(i[u]-i[l])*(i[l+1]+i[u+1]),u=l;return o}const ty=Kf.default||Kf;var Bp=(i=>(i[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i))(Bp||{});class ny{constructor(e){this.items=[],this._name=e}emit(e,t,s,o,l,u,h,f){const{name:p,items:m}=this;for(let y=0,v=m.length;y<v;y++)m[y][p](e,t,s,o,l,u,h,f);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const ry=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],jp=class Dp extends bn{constructor(e){super(),this.uid=ct("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...ry,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await jg(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...Dp.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof kn&&(s={container:s},t&&(Me(We,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:wt.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const o=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Bp.ALL);const{clear:s,clearColor:o,target:l}=e;wt.shared.setValue(o??this.background.colorRgba),t.renderTarget.clear(l,s,wt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new ny(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(e,t){const s=t.reduce((o,l)=>(o[l.name]=l.value,o),{});e.forEach(o=>{const l=o.value,u=o.name,h=s[u];this.renderPipes[u]=new l(this,h?new h:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&ro.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Dg())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};jp.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Op=jp,Pa;function iy(i){return Pa!==void 0||(Pa=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:i??Op.defaultOptions.failIfMajorPerformanceCaveat};try{if(!tt.get().getWebGLRenderingContext())return!1;let o=tt.get().createCanvas().getContext("webgl",e);const l=!!((t=o==null?void 0:o.getContextAttributes())!=null&&t.stencil);if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,l}catch{return!1}})()),Pa}let Ta;async function sy(i={}){return Ta!==void 0||(Ta=await(async()=>{const e=tt.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(i)).requestDevice(),!0}catch{return!1}})()),Ta}const Zf=["webgl","webgpu","canvas"];async function oy(i){let e=[];i.preference?(e.push(i.preference),Zf.forEach(l=>{l!==i.preference&&e.push(l)})):e=Zf.slice();let t,s={};for(let l=0;l<e.length;l++){const u=e[l];if(u==="webgpu"&&await sy()){const{WebGPURenderer:h}=await ja(async()=>{const{WebGPURenderer:f}=await import("./WebGPURenderer-CXp0Kl3s.js");return{WebGPURenderer:f}},__vite__mapDeps([3,2,4]));t=h,s={...i,...i.webgpu};break}else if(u==="webgl"&&iy(i.failIfMajorPerformanceCaveat??Op.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await ja(async()=>{const{WebGLRenderer:f}=await import("./WebGLRenderer-BzVPi3y4.js");return{WebGLRenderer:f}},__vite__mapDeps([5,2,4]));t=h,s={...i,...i.webgl};break}else if(u==="canvas")throw s={...i},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const o=new t;return await o.init(s),o}const Np="8.14.3";class $p{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,Np)}static destroy(){}}$p.extension=me.Application;class ay{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,Np)}destroy(){this._renderer=null}}ay.extension={type:[me.WebGLSystem,me.WebGPUSystem],name:"initHook",priority:-10};const Up=class Cc{constructor(...e){this.stage=new kn,e[0]!==void 0&&Me(We,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new kn),this.renderer=await oy(e),Cc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Me(We,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=Cc._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Up._plugins=[];let Gp=Up;Mt.handleByList(me.Application,Gp._plugins);Mt.add($p);class Wp extends bn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Me(We,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Me(We,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Me(We,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Me(We,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Me(We,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(t=this.chars[s].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class ly{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let o=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(e,t,s=!1,o=this.resetTtl){let l=this.items[e];return s||l!==void 0?(l.value=t,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function Hp(i=1e3,e=0,t=!1){if(isNaN(i)||i<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new ly(i,e,t)}const uy=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function bc(i){const e=typeof i.fontSize=="number"?`${i.fontSize}px`:i.fontSize;let t=i.fontFamily;Array.isArray(i.fontFamily)||(t=i.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let o=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!uy.includes(o)&&(o=`"${o}"`),t[s]=o}return`${i.fontStyle} ${i.fontVariant} ${i.fontWeight} ${e} ${t.join(",")}`}const Ku={willReadFrequently:!0},Pn=class fe{static get experimentalLetterSpacingSupported(){let e=fe._experimentalLetterSpacingSupported;if(e===void 0){const t=tt.get().getCanvasRenderingContext2D().prototype;e=fe._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,o,l,u,h,f,p){this.text=e,this.style=t,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=f,this.fontProperties=p}static measureText(e=" ",t,s=fe._canvas,o=t.wordWrap){var T;const l=`${e}-${t.styleKey}-wordWrap-${o}`;if(fe._measurementCache.has(l))return fe._measurementCache.get(l);const u=bc(t),h=fe.measureFont(u);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);const f=fe.__context;f.font=u;const m=(o?fe._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),y=new Array(m.length);let v=0;for(let E=0;E<m.length;E++){const I=fe._measureText(m[E],t.letterSpacing,f);y[E]=I,v=Math.max(v,I)}const _=((T=t._stroke)==null?void 0:T.width)||0;let S=v+_;t.dropShadow&&(S+=t.dropShadow.distance);const b=t.lineHeight||h.fontSize;let w=Math.max(b,h.fontSize+_)+(m.length-1)*(b+t.leading);t.dropShadow&&(w+=t.dropShadow.distance);const P=new fe(e,t,S,w,m,y,b+t.leading,v,h);return fe._measurementCache.set(l,P),P}static _measureText(e,t,s){let o=!1;fe.experimentalLetterSpacingSupported&&(fe.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(e);let u=l.width;const h=-l.actualBoundingBoxLeft;let p=l.actualBoundingBoxRight-h;if(u>0)if(o)u-=t,p-=t;else{const m=(fe.graphemeSegmenter(e).length-1)*t;u+=m,p+=m}return Math.max(u,p)}static _wordWrap(e,t,s=fe._canvas){const o=s.getContext("2d",Ku);let l=0,u="",h="";const f=Object.create(null),{letterSpacing:p,whiteSpace:m}=t,y=fe._collapseSpaces(m),v=fe._collapseNewlines(m);let _=!y;const S=t.wordWrapWidth+p,b=fe._tokenize(e);for(let w=0;w<b.length;w++){let P=b[w];if(fe._isNewline(P)){if(!v){h+=fe._addLine(u),_=!y,u="",l=0;continue}P=" "}if(y){const E=fe.isBreakingSpace(P),I=fe.isBreakingSpace(u[u.length-1]);if(E&&I)continue}const T=fe._getFromCache(P,p,f,o);if(T>S)if(u!==""&&(h+=fe._addLine(u),u="",l=0),fe.canBreakWords(P,t.breakWords)){const E=fe.wordWrapSplit(P);for(let I=0;I<E.length;I++){let V=E[I],D=V,O=1;for(;E[I+O];){const ae=E[I+O];if(!fe.canBreakChars(D,ae,P,I,t.breakWords))V+=ae;else break;D=ae,O++}I+=O-1;const re=fe._getFromCache(V,p,f,o);re+l>S&&(h+=fe._addLine(u),_=!1,u="",l=0),u+=V,l+=re}}else{u.length>0&&(h+=fe._addLine(u),u="",l=0);const E=w===b.length-1;h+=fe._addLine(P,!E),_=!1,u="",l=0}else T+l>S&&(_=!1,h+=fe._addLine(u),u="",l=0),(u.length>0||!fe.isBreakingSpace(P)||_)&&(u+=P,l+=T)}return h+=fe._addLine(u,!1),h}static _addLine(e,t=!0){return e=fe._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,o){let l=s[e];return typeof l!="number"&&(l=fe._measureText(e,t,o)+t,s[e]=l),l}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!fe.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:fe._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:fe._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1];if(fe.isBreakingSpace(l,u)||fe._isNewline(l)){s!==""&&(t.push(s),s=""),l==="\r"&&u===`
`?(t.push(`\r
`),o++):t.push(l);continue}s+=l}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,o,l){return!0}static wordWrapSplit(e){return fe.graphemeSegmenter(e)}static measureFont(e){if(fe._fonts[e])return fe._fonts[e];const t=fe._context;t.font=e;const s=t.measureText(fe.METRICS_STRING+fe.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return fe._fonts[e]=o,o}static clearMetrics(e=""){e?delete fe._fonts[e]:fe._fonts={}}static get _canvas(){if(!fe.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",Ku);if(s!=null&&s.measureText)return fe.__canvas=t,t;e=tt.get().createCanvas()}catch{e=tt.get().createCanvas()}e.width=e.height=10,fe.__canvas=e}return fe.__canvas}static get _context(){return fe.__context||(fe.__context=fe._canvas.getContext("2d",Ku)),fe.__context}};Pn.METRICS_STRING="|q";Pn.BASELINE_SYMBOL="M";Pn.BASELINE_MULTIPLIER=1.4;Pn.HEIGHT_MULTIPLIER=2;Pn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return e=>{const t=i.segment(e),s=[];let o=0;for(const l of t)s[o++]=l.segment;return s}}return i=>[...i]})();Pn.experimentalLetterSpacing=!1;Pn._fonts={};Pn._newlines=[10,13];Pn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Pn._measurementCache=Hp(1e3);let za=Pn;const Jf=[{offset:0,color:"white"},{offset:1,color:"black"}],Oc=class Ac{constructor(...e){this.uid=ct("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=cy(e);t={...t.type==="radial"?Ac.defaultRadialOptions:Ac.defaultLinearOptions,...X1(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:wt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:o}=this.end,l=s-e,u=o-t;const h=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const w=e;e=s,s=w,l*=-1}if(u<0){const w=t;t=o,o=w,u*=-1}}const f=this.colorStops.length?this.colorStops:Jf,p=this._textureSize,{canvas:m,context:y}=t1(p,1),v=h?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);e1(v,f),y.fillStyle=v,y.fillRect(0,0,p,1),this.texture=new Le({source:new ii({resource:m,addressMode:this._wrapMode})});const _=Math.sqrt(l*l+u*u),S=Math.atan2(u,l),b=new Ie;b.scale(_/p,1),b.rotate(S),b.translate(e,t),this.textureSpace==="local"&&b.scale(p,p),this.transform=b}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:Jf,t=this._textureSize,{canvas:s,context:o}=t1(t,t),{x:l,y:u}=this.center,{x:h,y:f}=this.outerCenter,p=this.innerRadius,m=this.outerRadius,y=h-m,v=f-m,_=t/(m*2),S=(l-y)*_,b=(u-v)*_,w=o.createRadialGradient(S,b,p*_,(h-y)*_,(f-v)*_,m*_);e1(w,e),o.fillStyle=e[e.length-1].color,o.fillRect(0,0,t,t),o.fillStyle=w,o.translate(S,b),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-S,-b),o.fillRect(0,0,t,t),this.texture=new Le({source:new ii({resource:s,addressMode:this._wrapMode})});const P=new Ie;P.scale(1/_,1/_),P.translate(y,v),this.textureSpace==="local"&&P.scale(t,t),this.transform=P}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Oc.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Oc.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let er=Oc;function e1(i,e){for(let t=0;t<e.length;t++){const s=e[t];i.addColorStop(s.offset,s.color)}}function t1(i,e){const t=tt.get().createCanvas(i,e),s=t.getContext("2d");return{canvas:t,context:s}}function cy(i){let e=i[0]??{};return(typeof e=="number"||i[1])&&(Me("8.5.2","use options object instead"),e={type:"linear",start:{x:i[0],y:i[1]},end:{x:i[2],y:i[3]},textureSpace:i[4],textureSize:i[5]??er.defaultLinearOptions.textureSize}),e}const n1={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Va{constructor(e,t){this.uid=ct("fillPattern"),this._tick=0,this.transform=new Ie,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=n1[t].addressModeU,e.source.style.addressModeV=n1[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var Qu,r1;function hy(){if(r1)return Qu;r1=1,Qu=t;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(l){var u=[];return l.replace(e,function(h,f,p){var m=f.toLowerCase();for(p=o(p),m=="m"&&p.length>2&&(u.push([f].concat(p.splice(0,2))),m="l",f=f=="m"?"l":"L");;){if(p.length==i[m])return p.unshift(f),u.push(p);if(p.length<i[m])throw new Error("malformed path data");u.push([f].concat(p.splice(0,i[m])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return Qu}var dy=hy();const fy=Fc(dy);function py(i,e){const t=fy(i),s=[];let o=null,l=0,u=0;for(let h=0;h<t.length;h++){const f=t[h],p=f[0],m=f;switch(p){case"M":l=m[1],u=m[2],e.moveTo(l,u);break;case"m":l+=m[1],u+=m[2],e.moveTo(l,u);break;case"H":l=m[1],e.lineTo(l,u);break;case"h":l+=m[1],e.lineTo(l,u);break;case"V":u=m[1],e.lineTo(l,u);break;case"v":u+=m[1],e.lineTo(l,u);break;case"L":l=m[1],u=m[2],e.lineTo(l,u);break;case"l":l+=m[1],u+=m[2],e.lineTo(l,u);break;case"C":l=m[5],u=m[6],e.bezierCurveTo(m[1],m[2],m[3],m[4],l,u);break;case"c":e.bezierCurveTo(l+m[1],u+m[2],l+m[3],u+m[4],l+m[5],u+m[6]),l+=m[5],u+=m[6];break;case"S":l=m[3],u=m[4],e.bezierCurveToShort(m[1],m[2],l,u);break;case"s":e.bezierCurveToShort(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"Q":l=m[3],u=m[4],e.quadraticCurveTo(m[1],m[2],l,u);break;case"q":e.quadraticCurveTo(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"T":l=m[1],u=m[2],e.quadraticCurveToShort(l,u);break;case"t":l+=m[1],u+=m[2],e.quadraticCurveToShort(l,u);break;case"A":l=m[6],u=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"a":l+=m[6],u+=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:et(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return e}class Nc{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new Nc(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-e,l=this.y-t;return o*=o,l*=l,o+l<=s}strokeContains(e,t,s,o=.5){if(this.radius===0)return!1;const l=this.x-e,u=this.y-t,h=this.radius,f=(1-o)*s,p=Math.sqrt(l*l+u*u);return p<=h+f&&p>h-(s-f)}getBounds(e){return e||(e=new ft),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class $c{constructor(e=0,t=0,s=0,o=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=o}clone(){return new $c(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,o=(t-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(e,t,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=s*(1-o),f=s-h,p=l-f,m=u-f,y=l+h,v=u+h,_=e-this.x,S=t-this.y,b=_*_/(p*p)+S*S/(m*m),w=_*_/(y*y)+S*S/(v*v);return b>1&&w<=1}getBounds(e){return e||(e=new ft),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function my(i,e,t,s,o,l){const u=i-t,h=e-s,f=o-t,p=l-s,m=u*f+h*p,y=f*f+p*p;let v=-1;y!==0&&(v=m/y);let _,S;v<0?(_=t,S=s):v>1?(_=o,S=l):(_=t+v*f,S=s+v*p);const b=i-_,w=e-S;return b*b+w*w}let gy,yy;class Xs{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let o=0,l=t.length;o<l;o++)s.push(t[o].x,t[o].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let o=0;o<s;o+=2){const l=t[o],u=t[o+1],h=t[(o+2)%s],f=t[(o+3)%s];e+=(h-l)*(f+u)}return e<0}containsPolygon(e){const t=this.getBounds(gy),s=e.getBounds(yy);if(!t.containsRect(s))return!1;const o=e.points;for(let l=0;l<o.length;l+=2){const u=o[l],h=o[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const e=this.points.slice(),t=new Xs(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const h=this.points[l*2],f=this.points[l*2+1],p=this.points[u*2],m=this.points[u*2+1];f>t!=m>t&&e<(p-h)*((t-f)/(m-f))+h&&(s=!s)}return s}strokeContains(e,t,s,o=.5){const l=s*s,u=l*(1-o),h=l-u,{points:f}=this,p=f.length-(this.closePath?0:2);for(let m=0;m<p;m+=2){const y=f[m],v=f[m+1],_=f[(m+2)%f.length],S=f[(m+3)%f.length],b=my(e,t,y,v,_,S),w=Math.sign((_-y)*(t-v)-(S-v)*(e-y));if(b<=(w<0?h:u))return!0}return!1}getBounds(e){e||(e=new ft);const t=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let h=0,f=t.length;h<f;h+=2){const p=t[h],m=t[h+1];s=p<s?p:s,o=p>o?p:o,l=m<l?m:l,u=m>u?m:u}return e.x=s,e.width=o-s,e.y=l,e.height=u-l,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Me("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Me("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Ea=(i,e,t,s,o,l,u)=>{const h=i-t,f=e-s,p=Math.sqrt(h*h+f*f);return p>=o-l&&p<=o+u};class Uc{constructor(e=0,t=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=o,this.radius=l}getBounds(e){return e||(e=new ft),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new Uc(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let o=e-(this.x+s),l=t-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=e-(this.x+this.width-s),o*o+l*l<=u)||(l=t-(this.y+this.height-s),o*o+l*l<=u)||(o=e-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(e,t,s,o=.5){const{x:l,y:u,width:h,height:f,radius:p}=this,m=s*(1-o),y=s-m,v=l+p,_=u+p,S=h-p*2,b=f-p*2,w=l+h,P=u+f;return(e>=l-m&&e<=l+y||e>=w-y&&e<=w+m)&&t>=_&&t<=_+b||(t>=u-m&&t<=u+y||t>=P-y&&t<=P+m)&&e>=v&&e<=v+S?!0:e<v&&t<_&&Ea(e,t,v,_,p,y,m)||e>w-p&&t<_&&Ea(e,t,w-p,_,p,y,m)||e>w-p&&t>P-p&&Ea(e,t,w-p,P-p,p,y,m)||e<v&&t>P-p&&Ea(e,t,v,P-p,p,y,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const Vp={};function xy(i,e,t){let s=2166136261;for(let o=0;o<e;o++)s^=i[o].uid,s=Math.imul(s,16777619),s>>>=0;return Vp[s]||vy(i,e,s,t)}function vy(i,e,t,s){const o={};let l=0;for(let h=0;h<s;h++){const f=h<e?i[h]:Le.EMPTY.source;o[l++]=f.source,o[l++]=f.style}const u=new Fa(o);return Vp[t]=u,u}class i1{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function s1(i,e){const t=i.byteLength/8|0,s=new Float64Array(i,0,t);new Float64Array(e,0,t).set(s);const l=i.byteLength-t*8;if(l>0){const u=new Uint8Array(i,t*8,l);new Uint8Array(e,t*8,l).set(u)}}const _y={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var wy=(i=>(i[i.DISABLED=0]="DISABLED",i[i.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",i[i.MASK_ACTIVE=2]="MASK_ACTIVE",i[i.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",i[i.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",i[i.NONE=5]="NONE",i))(wy||{});function o1(i,e){return e.alphaMode==="no-premultiply-alpha"&&_y[i]||i}const Sy=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function ky(i){let e="";for(let t=0;t<i;++t)t>0&&(e+=`
else `),t<i-1&&(e+=`if(test == ${t}.0){}`);return e}function Cy(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=Sy.replace(/%forloop%/gi,ky(i));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))i=i/2|0;else break}}finally{e.deleteShader(t)}return i}let Di=null;function by(){var e;if(Di)return Di;const i=bp();return Di=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),Di=Cy(Di,i),(e=i.getExtension("WEBGL_lose_context"))==null||e.loseContext(),Di}class Ay{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class Py{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new Ay,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const qs=[];let $a=0;ro.register({clear:()=>{if(qs.length>0)for(const i of qs)i&&i.destroy();qs.length=0,$a=0}});function a1(){return $a>0?qs[--$a]:new Py}function l1(i){qs[$a++]=i}let Os=0;const Yp=class Xp{constructor(e){this.uid=ct("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...Xp.defaultOptions,...e},e.maxTextures||(Me("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=by());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new i1(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)l1(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=a1(),o=s.textures;o.clear();const l=t[this.elementStart];let u=o1(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const f=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,m=this.indexBuffer;let y=this._batchIndexSize,v=this._batchIndexStart,_="startBatch";const S=this.maxTextures;for(let b=this.elementStart;b<this.elementSize;++b){const w=t[b];t[b]=null;const T=w.texture._source,E=o1(w.blendMode,T),I=u!==E||h!==w.topology;if(T._batchTick===Os&&!I){w._textureId=T._textureBindLocation,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,f,p,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,f,p,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}T._batchTick=Os,(o.count>=S||I)&&(this._finishBatch(s,v,y-v,o,u,h,e,_),_="renderBatch",v=y,u=E,h=w.topology,s=a1(),o=s.textures,o.clear(),++Os),w._textureId=T._textureBindLocation=o.count,o.ids[T.uid]=o.count,o.textures[o.count++]=T,w._batch=s,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,f,p,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,f,p,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,v,y-v,o,u,h,e,_),v=y,++Os),this.elementStart=this.elementSize,this._batchIndexStart=v,this._batchIndexSize=y}_finishBatch(e,t,s,o,l,u,h,f){e.gpuBindGroup=null,e.bindGroup=null,e.action=f,e.batcher=this,e.textures=o,e.blendMode=l,e.topology=u,e.start=t,e.size=s,++Os,this.batches[this.batchIndex++]=e,h.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new i1(t);s1(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let l=0;l<t.length;l++)o[l]=t[l];else s1(t.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,o){const l=e.indices,u=e.indexSize,h=e.indexOffset,f=e.attributeOffset;for(let p=0;p<u;p++)t[s++]=o+l[p+h]-f}destroy(e={}){var t;if(this.batches!==null){for(let s=0;s<this.batches.length;s++)l1(this.batches[s]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((t=this.shader)==null||t.destroy(),this.shader=null);for(let s=0;s<this._elements.length;s++)this._elements[s]&&(this._elements[s]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};Yp.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Ty=Yp;var Xt=(i=>(i[i.MAP_READ=1]="MAP_READ",i[i.MAP_WRITE=2]="MAP_WRITE",i[i.COPY_SRC=4]="COPY_SRC",i[i.COPY_DST=8]="COPY_DST",i[i.INDEX=16]="INDEX",i[i.VERTEX=32]="VERTEX",i[i.UNIFORM=64]="UNIFORM",i[i.STORAGE=128]="STORAGE",i[i.INDIRECT=256]="INDIRECT",i[i.QUERY_RESOLVE=512]="QUERY_RESOLVE",i[i.STATIC=1024]="STATIC",i))(Xt||{});class eo extends bn{constructor(e){let{data:t,size:s}=e;const{usage:o,label:l,shrinkToFit:u}=e;super(),this.uid=ct("buffer"),this._resourceType="buffer",this._resourceId=ct("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t==null?void 0:t.byteLength);const h=!!t;this.descriptor={size:s,usage:o,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Xt.STATIC)}set static(e){e?this.descriptor.usage|=Xt.STATIC:this.descriptor.usage&=~Xt.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const o=this._data;if(this._data=e,this._dataInt32=null,!o||o.length!==e.length){!this.shrinkToFit&&o&&e.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=ct("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function qp(i,e){if(!(i instanceof eo)){let t=e?Xt.INDEX:Xt.VERTEX;i instanceof Array&&(e?(i=new Uint32Array(i),t=Xt.INDEX|Xt.COPY_DST):(i=new Float32Array(i),t=Xt.VERTEX|Xt.COPY_DST)),i=new eo({data:i,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return i}function Ey(i,e,t){const s=i.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const o=s.buffer.data;let l=1/0,u=1/0,h=-1/0,f=-1/0;const p=o.BYTES_PER_ELEMENT,m=(s.offset||0)/p,y=(s.stride||8)/p;for(let v=m;v<o.length;v+=y){const _=o[v],S=o[v+1];_>h&&(h=_),S>f&&(f=S),_<l&&(l=_),S<u&&(u=S)}return t.minX=l,t.minY=u,t.maxX=h,t.maxY=f,t}function My(i){return(i instanceof eo||Array.isArray(i)||i.BYTES_PER_ELEMENT)&&(i={buffer:i}),i.buffer=qp(i.buffer,!1),i}class Ry extends bn{constructor(e={}){super(),this.uid=ct("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Cn,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:o}=e;if(this.buffers=[],this.attributes={},t)for(const l in t)this.addAttribute(l,t[l]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=My(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=qp(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,Ey(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(s=>s.destroy()),(t=this.indexBuffer)==null||t.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Iy=new Float32Array(1),Fy=new Uint32Array(1);class zy extends Ry{constructor(){const t=new eo({data:Iy,label:"attribute-batch-buffer",usage:Xt.VERTEX|Xt.COPY_DST,shrinkToFit:!1}),s=new eo({data:Fy,label:"index-batch-buffer",usage:Xt.INDEX|Xt.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:o,offset:0},aUV:{buffer:t,format:"float32x2",stride:o,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function u1(i,e,t){if(i)for(const s in i){const o=s.toLocaleLowerCase(),l=e[o];if(l){let u=i[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&l.push(`//----${t}----//`),l.push(u)}else et(`${s} placement hook does not exist in shader`)}}const Ly=/\{\{(.*?)\}\}/g;function c1(i){var s;const e={};return(((s=i.match(Ly))==null?void 0:s.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{e[o]=[]}),e}function h1(i,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function d1(i,e,t=!1){const s=[];h1(e,s),i.forEach(h=>{h.header&&h1(h.header,s)});const o=s;t&&o.sort();const l=o.map((h,f)=>`       @location(${f}) ${h},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function f1(i,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function By(i){const t=/\b(\w+)\s*:/g.exec(i);return t?t[1]:""}function jy(i){const e=/@.*?\s+/g;return i.replace(e,"")}function Dy(i,e){const t=[];f1(e,t),i.forEach(f=>{f.header&&f1(f.header,t)});let s=0;const o=t.sort().map(f=>f.indexOf("builtin")>-1?f:`@location(${s++}) ${f}`).join(`,
`),l=t.sort().map(f=>`       var ${jy(f)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(f=>` ${By(f)}`).join(`,
`)});`;let h=e.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${o}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function p1(i,e){let t=i;for(const s in e){const o=e[s];o.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const br=Object.create(null),Zu=new Map;let Oy=0;function Ny({template:i,bits:e}){const t=Kp(i,e);if(br[t])return br[t];const{vertex:s,fragment:o}=Uy(i,e);return br[t]=Qp(s,o,e),br[t]}function $y({template:i,bits:e}){const t=Kp(i,e);return br[t]||(br[t]=Qp(i.vertex,i.fragment,e)),br[t]}function Uy(i,e){const t=e.map(u=>u.vertex).filter(u=>!!u),s=e.map(u=>u.fragment).filter(u=>!!u);let o=d1(t,i.vertex,!0);o=Dy(t,o);const l=d1(s,i.fragment,!0);return{vertex:o,fragment:l}}function Kp(i,e){return e.map(t=>(Zu.has(t)||Zu.set(t,Oy++),Zu.get(t))).sort((t,s)=>t-s).join("-")+i.vertex+i.fragment}function Qp(i,e,t){const s=c1(i),o=c1(e);return t.forEach(l=>{u1(l.vertex,s,l.name),u1(l.fragment,o,l.name)}),{vertex:p1(i,s),fragment:p1(e,o)}}const Gy=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,Wy=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,Hy=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,Vy=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,Yy={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},Xy={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function qy({bits:i,name:e}){const t=Ny({template:{fragment:Wy,vertex:Gy},bits:[Yy,...i]});return Ha.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function Ky({bits:i,name:e}){return new Pp({name:e,...$y({template:{vertex:Hy,fragment:Vy},bits:[Xy,...i]})})}const Qy={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},Zy={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Ju={};function Jy(i){const e=[];if(i===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<i;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function e3(i){const e=[];if(i===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<i;t++)t===i-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function t3(i){return Ju[i]||(Ju[i]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${Jy(i)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${e3(i)}
            `}}),Ju[i]}const ec={};function n3(i){const e=[];for(let t=0;t<i;t++)t>0&&e.push("else"),t<i-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function r3(i){return ec[i]||(ec[i]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${i}];

            `,main:`

                ${n3(i)}
            `}}),ec[i]}const i3={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},s3={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},m1={};function o3(i){let e=m1[i];if(e)return e;const t=new Int32Array(i);for(let s=0;s<i;s++)t[s]=s;return e=m1[i]=new Rp({uTextures:{value:t,type:"i32",size:i}},{isStatic:!0}),e}class g1 extends Dc{constructor(e){const t=Ky({name:"batch",bits:[Zy,r3(e),s3]}),s=qy({name:"batch",bits:[Qy,t3(e),i3]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:o3(e)}}),this.maxTextures=e}}let Ns=null;const Zp=class Jp extends Ty{constructor(e){super(e),this.geometry=new zy,this.name=Jp.extension.name,this.vertexSize=6,Ns??(Ns=new g1(e.maxTextures)),this.shader=Ns}packAttributes(e,t,s,o,l){const u=l<<16|e.roundPixels&65535,h=e.transform,f=h.a,p=h.b,m=h.c,y=h.d,v=h.tx,_=h.ty,{positions:S,uvs:b}=e,w=e.color,P=e.attributeOffset,T=P+e.attributeSize;for(let E=P;E<T;E++){const I=E*2,V=S[I],D=S[I+1];t[o++]=f*V+m*D+v,t[o++]=y*D+p*V+_,t[o++]=b[I],t[o++]=b[I+1],s[o++]=w,s[o++]=u}}packQuadAttributes(e,t,s,o,l){const u=e.texture,h=e.transform,f=h.a,p=h.b,m=h.c,y=h.d,v=h.tx,_=h.ty,S=e.bounds,b=S.maxX,w=S.minX,P=S.maxY,T=S.minY,E=u.uvs,I=e.color,V=l<<16|e.roundPixels&65535;t[o+0]=f*w+m*T+v,t[o+1]=y*T+p*w+_,t[o+2]=E.x0,t[o+3]=E.y0,s[o+4]=I,s[o+5]=V,t[o+6]=f*b+m*T+v,t[o+7]=y*T+p*b+_,t[o+8]=E.x1,t[o+9]=E.y1,s[o+10]=I,s[o+11]=V,t[o+12]=f*b+m*P+v,t[o+13]=y*P+p*b+_,t[o+14]=E.x2,t[o+15]=E.y2,s[o+16]=I,s[o+17]=V,t[o+18]=f*w+m*P+v,t[o+19]=y*P+p*w+_,t[o+20]=E.x3,t[o+21]=E.y3,s[o+22]=I,s[o+23]=V}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Ns=new g1(e),this.shader=Ns)}destroy(){this.shader=null,super.destroy()}};Zp.extension={type:[me.Batcher],name:"default"};let a3=Zp;function l3(i,e,t,s,o,l,u,h=null){let f=0;t*=e,o*=l;const p=h.a,m=h.b,y=h.c,v=h.d,_=h.tx,S=h.ty;for(;f<u;){const b=i[t],w=i[t+1];s[o]=p*b+y*w+_,s[o+1]=m*b+v*w+S,o+=l,t+=e,f++}}function u3(i,e,t,s){let o=0;for(e*=t;o<s;)i[e]=0,i[e+1]=0,e+=t,o++}function e0(i,e,t,s,o){const l=e.a,u=e.b,h=e.c,f=e.d,p=e.tx,m=e.ty;t||(t=0),s||(s=2),o||(o=i.length/s-t);let y=t*s;for(let v=0;v<o;v++){const _=i[y],S=i[y+1];i[y]=l*_+h*S+p,i[y+1]=u*_+f*S+m,y+=s}}const c3=new Ie;class t0{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?ip(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||c3}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const to={extension:{type:me.ShapeBuilder,name:"circle"},build(i,e){let t,s,o,l,u,h;if(i.type==="circle"){const I=i;if(u=h=I.radius,u<=0)return!1;t=I.x,s=I.y,o=l=0}else if(i.type==="ellipse"){const I=i;if(u=I.halfWidth,h=I.halfHeight,u<=0||h<=0)return!1;t=I.x,s=I.y,o=l=0}else{const I=i,V=I.width/2,D=I.height/2;t=I.x+V,s=I.y+D,u=h=Math.max(0,Math.min(I.radius,Math.min(V,D))),o=V-u,l=D-h}if(o<0||l<0)return!1;const f=Math.ceil(2.3*Math.sqrt(u+h)),p=f*8+(o?4:0)+(l?4:0);if(p===0)return!1;if(f===0)return e[0]=e[6]=t+o,e[1]=e[3]=s+l,e[2]=e[4]=t-o,e[5]=e[7]=s-l,!0;let m=0,y=f*4+(o?2:0)+2,v=y,_=p,S=o+u,b=l,w=t+S,P=t-S,T=s+b;if(e[m++]=w,e[m++]=T,e[--y]=T,e[--y]=P,l){const I=s-b;e[v++]=P,e[v++]=I,e[--_]=I,e[--_]=w}for(let I=1;I<f;I++){const V=Math.PI/2*(I/f),D=o+Math.cos(V)*u,O=l+Math.sin(V)*h,re=t+D,ae=t-D,Q=s+O,ne=s-O;e[m++]=re,e[m++]=Q,e[--y]=Q,e[--y]=ae,e[v++]=ae,e[v++]=ne,e[--_]=ne,e[--_]=re}S=o,b=l+h,w=t+S,P=t-S,T=s+b;const E=s-b;return e[m++]=w,e[m++]=T,e[--_]=E,e[--_]=w,o&&(e[m++]=P,e[m++]=T,e[--_]=E,e[--_]=P),!0},triangulate(i,e,t,s,o,l){if(i.length===0)return;let u=0,h=0;for(let m=0;m<i.length;m+=2)u+=i[m],h+=i[m+1];u/=i.length/2,h/=i.length/2;let f=s;e[f*t]=u,e[f*t+1]=h;const p=f++;for(let m=0;m<i.length;m+=2)e[f*t]=i[m],e[f*t+1]=i[m+1],m>0&&(o[l++]=f,o[l++]=p,o[l++]=f-1),f++;o[l++]=p+1,o[l++]=p,o[l++]=f-1}},h3={...to,extension:{...to.extension,name:"ellipse"}},d3={...to,extension:{...to.extension,name:"roundedRectangle"}},n0=1e-4,y1=1e-4;function f3(i){const e=i.length;if(e<6)return 1;let t=0;for(let s=0,o=i[e-2],l=i[e-1];s<e;s+=2){const u=i[s],h=i[s+1];t+=(u-o)*(h+l),o=u,l=h}return t<0?-1:1}function x1(i,e,t,s,o,l,u,h){const f=i-t*o,p=e-s*o,m=i+t*l,y=e+s*l;let v,_;u?(v=s,_=-t):(v=-s,_=t);const S=f+v,b=p+_,w=m+v,P=y+_;return h.push(S,b),h.push(w,P),2}function Zr(i,e,t,s,o,l,u,h){const f=t-i,p=s-e;let m=Math.atan2(f,p),y=Math.atan2(o-i,l-e);h&&m<y?m+=Math.PI*2:!h&&m>y&&(y+=Math.PI*2);let v=m;const _=y-m,S=Math.abs(_),b=Math.sqrt(f*f+p*p),w=(15*S*Math.sqrt(b)/Math.PI>>0)+1,P=_/w;if(v+=P,h){u.push(i,e),u.push(t,s);for(let T=1,E=v;T<w;T++,E+=P)u.push(i,e),u.push(i+Math.sin(E)*b,e+Math.cos(E)*b);u.push(i,e),u.push(o,l)}else{u.push(t,s),u.push(i,e);for(let T=1,E=v;T<w;T++,E+=P)u.push(i+Math.sin(E)*b,e+Math.cos(E)*b),u.push(i,e);u.push(o,l),u.push(i,e)}return w*2}function p3(i,e,t,s,o,l){const u=n0;if(i.length===0)return;const h=e;let f=h.alignment;if(e.alignment!==.5){let Z=f3(i);f=(f-.5)*Z+.5}const p=new Bt(i[0],i[1]),m=new Bt(i[i.length-2],i[i.length-1]),y=s,v=Math.abs(p.x-m.x)<u&&Math.abs(p.y-m.y)<u;if(y){i=i.slice(),v&&(i.pop(),i.pop(),m.set(i[i.length-2],i[i.length-1]));const Z=(p.x+m.x)*.5,te=(m.y+p.y)*.5;i.unshift(Z,te),i.push(Z,te)}const _=o,S=i.length/2;let b=i.length;const w=_.length/2,P=h.width/2,T=P*P,E=h.miterLimit*h.miterLimit;let I=i[0],V=i[1],D=i[2],O=i[3],re=0,ae=0,Q=-(V-O),ne=I-D,Ce=0,be=0,Ae=Math.sqrt(Q*Q+ne*ne);Q/=Ae,ne/=Ae,Q*=P,ne*=P;const yt=f,ee=(1-yt)*2,ie=yt*2;y||(h.cap==="round"?b+=Zr(I-Q*(ee-ie)*.5,V-ne*(ee-ie)*.5,I-Q*ee,V-ne*ee,I+Q*ie,V+ne*ie,_,!0)+2:h.cap==="square"&&(b+=x1(I,V,Q,ne,ee,ie,!0,_))),_.push(I-Q*ee,V-ne*ee),_.push(I+Q*ie,V+ne*ie);for(let Z=1;Z<S-1;++Z){I=i[(Z-1)*2],V=i[(Z-1)*2+1],D=i[Z*2],O=i[Z*2+1],re=i[(Z+1)*2],ae=i[(Z+1)*2+1],Q=-(V-O),ne=I-D,Ae=Math.sqrt(Q*Q+ne*ne),Q/=Ae,ne/=Ae,Q*=P,ne*=P,Ce=-(O-ae),be=D-re,Ae=Math.sqrt(Ce*Ce+be*be),Ce/=Ae,be/=Ae,Ce*=P,be*=P;const te=D-I,R=V-O,N=D-re,xe=ae-O,_e=te*N+R*xe,Se=R*N-xe*te,Pe=Se<0;if(Math.abs(Se)<.001*Math.abs(_e)){_.push(D-Q*ee,O-ne*ee),_.push(D+Q*ie,O+ne*ie),_e>=0&&(h.join==="round"?b+=Zr(D,O,D-Q*ee,O-ne*ee,D-Ce*ee,O-be*ee,_,!1)+4:b+=2,_.push(D-Ce*ie,O-be*ie),_.push(D+Ce*ee,O+be*ee));continue}const Ne=(-Q+I)*(-ne+O)-(-Q+D)*(-ne+V),Fe=(-Ce+re)*(-be+O)-(-Ce+D)*(-be+ae),Be=(te*Fe-N*Ne)/Se,ht=(xe*Ne-R*Fe)/Se,dn=(Be-D)*(Be-D)+(ht-O)*(ht-O),Ve=D+(Be-D)*ee,At=O+(ht-O)*ee,Ye=D-(Be-D)*ie,jt=O-(ht-O)*ie,oi=Math.min(te*te+R*R,N*N+xe*xe),fn=Pe?ee:ie,Tr=oi+fn*fn*T;dn<=Tr?h.join==="bevel"||dn/T>E?(Pe?(_.push(Ve,At),_.push(D+Q*ie,O+ne*ie),_.push(Ve,At),_.push(D+Ce*ie,O+be*ie)):(_.push(D-Q*ee,O-ne*ee),_.push(Ye,jt),_.push(D-Ce*ee,O-be*ee),_.push(Ye,jt)),b+=2):h.join==="round"?Pe?(_.push(Ve,At),_.push(D+Q*ie,O+ne*ie),b+=Zr(D,O,D+Q*ie,O+ne*ie,D+Ce*ie,O+be*ie,_,!0)+4,_.push(Ve,At),_.push(D+Ce*ie,O+be*ie)):(_.push(D-Q*ee,O-ne*ee),_.push(Ye,jt),b+=Zr(D,O,D-Q*ee,O-ne*ee,D-Ce*ee,O-be*ee,_,!1)+4,_.push(D-Ce*ee,O-be*ee),_.push(Ye,jt)):(_.push(Ve,At),_.push(Ye,jt)):(_.push(D-Q*ee,O-ne*ee),_.push(D+Q*ie,O+ne*ie),h.join==="round"?Pe?b+=Zr(D,O,D+Q*ie,O+ne*ie,D+Ce*ie,O+be*ie,_,!0)+2:b+=Zr(D,O,D-Q*ee,O-ne*ee,D-Ce*ee,O-be*ee,_,!1)+2:h.join==="miter"&&dn/T<=E&&(Pe?(_.push(Ye,jt),_.push(Ye,jt)):(_.push(Ve,At),_.push(Ve,At)),b+=2),_.push(D-Ce*ee,O-be*ee),_.push(D+Ce*ie,O+be*ie),b+=2)}I=i[(S-2)*2],V=i[(S-2)*2+1],D=i[(S-1)*2],O=i[(S-1)*2+1],Q=-(V-O),ne=I-D,Ae=Math.sqrt(Q*Q+ne*ne),Q/=Ae,ne/=Ae,Q*=P,ne*=P,_.push(D-Q*ee,O-ne*ee),_.push(D+Q*ie,O+ne*ie),y||(h.cap==="round"?b+=Zr(D-Q*(ee-ie)*.5,O-ne*(ee-ie)*.5,D-Q*ee,O-ne*ee,D+Q*ie,O+ne*ie,_,!1)+2:h.cap==="square"&&(b+=x1(D,O,Q,ne,ee,ie,!1,_)));const J=y1*y1;for(let Z=w;Z<b+w-2;++Z)I=_[Z*2],V=_[Z*2+1],D=_[(Z+1)*2],O=_[(Z+1)*2+1],re=_[(Z+2)*2],ae=_[(Z+2)*2+1],!(Math.abs(I*(O-ae)+D*(ae-V)+re*(V-O))<J)&&l.push(Z,Z+1,Z+2)}function m3(i,e,t,s){const o=n0;if(i.length===0)return;const l=i[0],u=i[1],h=i[i.length-2],f=i[i.length-1],p=e||Math.abs(l-h)<o&&Math.abs(u-f)<o,m=t,y=i.length/2,v=m.length/2;for(let _=0;_<y;_++)m.push(i[_*2]),m.push(i[_*2+1]);for(let _=0;_<y-1;_++)s.push(v+_,v+_+1);p&&s.push(v+y-1,v)}function r0(i,e,t,s,o,l,u){const h=ty(i,e,2);if(!h)return;for(let p=0;p<h.length;p+=3)l[u++]=h[p]+o,l[u++]=h[p+1]+o,l[u++]=h[p+2]+o;let f=o*s;for(let p=0;p<i.length;p+=2)t[f]=i[p],t[f+1]=i[p+1],f+=s}const g3=[],y3={extension:{type:me.ShapeBuilder,name:"polygon"},build(i,e){for(let t=0;t<i.points.length;t++)e[t]=i.points[t];return!0},triangulate(i,e,t,s,o,l){r0(i,g3,e,t,s,o,l)}},x3={extension:{type:me.ShapeBuilder,name:"rectangle"},build(i,e){const t=i,s=t.x,o=t.y,l=t.width,u=t.height;return l>0&&u>0?(e[0]=s,e[1]=o,e[2]=s+l,e[3]=o,e[4]=s+l,e[5]=o+u,e[6]=s,e[7]=o+u,!0):!1},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[6],e[s+u+1]=i[7],u+=t,e[s+u]=i[4],e[s+u+1]=i[5],u+=t;const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2,o[l++]=h+1,o[l++]=h+3,o[l++]=h+2}},v3={extension:{type:me.ShapeBuilder,name:"triangle"},build(i,e){return e[0]=i.x,e[1]=i.y,e[2]=i.x2,e[3]=i.y2,e[4]=i.x3,e[5]=i.y3,!0},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[4],e[s+u+1]=i[5];const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2}},_3=new Ie,w3=new ft;function S3(i,e,t,s){const o=e.matrix?i.copyFrom(e.matrix).invert():i.identity();if(e.textureSpace==="local"){const u=t.getBounds(w3);e.width&&u.pad(e.width);const{x:h,y:f}=u,p=1/u.width,m=1/u.height,y=-h*p,v=-f*m,_=o.a,S=o.b,b=o.c,w=o.d;o.a*=p,o.b*=p,o.c*=m,o.d*=m,o.tx=y*_+v*b+o.tx,o.ty=y*S+v*w+o.ty}else o.translate(e.texture.frame.x,e.texture.frame.y),o.scale(1/e.texture.source.width,1/e.texture.source.height);const l=e.texture.source.style;return!(e.fill instanceof er)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(_3.copyFrom(s).invert()),o}const Ya={};Mt.handleByMap(me.ShapeBuilder,Ya);Mt.add(x3,y3,v3,to,h3,d3);const k3=new ft,C3=new Ie;function b3(i,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let o=0;o<i.instructions.length;o++){const l=i.instructions[o];if(l.action==="texture")A3(l.data,s,t);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,f=l.data.style,p=l.data.hole;u&&p&&v1(p.shapePath,f,!0,s,t),p&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=p.shapePath.shapePrimitives),v1(h,f,u,s,t)}}}function A3(i,e,t){const s=[],o=Ya.rectangle,l=k3;l.x=i.dx,l.y=i.dy,l.width=i.dw,l.height=i.dh;const u=i.transform;if(!o.build(l,s))return;const{vertices:h,uvs:f,indices:p}=t,m=p.length,y=h.length/2;u&&e0(s,u),o.triangulate(s,h,2,y,p,m);const v=i.image,_=v.uvs;f.push(_.x0,_.y0,_.x1,_.y1,_.x3,_.y3,_.x2,_.y2);const S=hn.get(t0);S.indexOffset=m,S.indexSize=p.length-m,S.attributeOffset=y,S.attributeSize=h.length/2-y,S.baseColor=i.style,S.alpha=i.alpha,S.texture=v,S.geometryData=t,e.push(S)}function v1(i,e,t,s,o){const{vertices:l,uvs:u,indices:h}=o;i.shapePrimitives.forEach(({shape:f,transform:p,holes:m})=>{const y=[],v=Ya[f.type];if(!v.build(f,y))return;const _=h.length,S=l.length/2;let b="triangle-list";if(p&&e0(y,p),t){const E=f.closePath??!0,I=e;I.pixelLine?(m3(y,E,l,h),b="line-list"):p3(y,I,!1,E,l,h)}else if(m){const E=[],I=y.slice();P3(m).forEach(D=>{E.push(I.length/2),I.push(...D)}),r0(I,E,l,2,S,h,_)}else v.triangulate(y,l,2,S,h,_);const w=u.length/2,P=e.texture;if(P!==Le.WHITE){const E=S3(C3,e,f,p);l3(l,2,S,u,w,2,l.length/2-S,E)}else u3(u,w,2,l.length/2-S);const T=hn.get(t0);T.indexOffset=_,T.indexSize=h.length-_,T.attributeOffset=S,T.attributeSize=l.length/2-S,T.baseColor=e.color,T.alpha=e.alpha,T.texture=P,T.geometryData=o,T.topology=b,s.push(T)})}function P3(i){const e=[];for(let t=0;t<i.length;t++){const s=i[t].shape,o=[];Ya[s.type].build(s,o)&&e.push(o)}return e}class T3{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class E3{constructor(){this.instructions=new lp}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new a3({maxTextures:t}),this.instructions.reset()}get geometry(){return Me(A2,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Gc=class Pc{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Pc.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??Pc.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),b3(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=hn.get(E3,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[e.uid],l=o.vertices.length,u=o.indices.length;for(let m=0;m<s.length;m++)s[m].applyTransform=!1;const h=t.batcher;h.ensureAttributeBuffer(l),h.ensureIndexBuffer(u),h.begin();for(let m=0;m<s.length;m++){const y=s[m];h.add(y)}h.finish(t.instructions);const f=h.geometry;f.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),f.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const p=h.batches;for(let m=0;m<p.length;m++){const y=p[m];y.bindGroup=xy(y.textures.textures,y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new T3;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(hn.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{hn.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};Gc.extension={type:[me.WebGLSystem,me.WebGPUSystem,me.CanvasSystem],name:"graphicsContext"};Gc.defaultOptions={bezierSmoothness:.5};let i0=Gc;const M3=8,Ma=11920929e-14,R3=1;function s0(i,e,t,s,o,l,u,h,f,p){const y=Math.min(.99,Math.max(0,p??i0.defaultOptions.bezierSmoothness));let v=(R3-y)/1;return v*=v,I3(e,t,s,o,l,u,h,f,i,v),i}function I3(i,e,t,s,o,l,u,h,f,p){Tc(i,e,t,s,o,l,u,h,f,p,0),f.push(u,h)}function Tc(i,e,t,s,o,l,u,h,f,p,m){if(m>M3)return;const y=(i+t)/2,v=(e+s)/2,_=(t+o)/2,S=(s+l)/2,b=(o+u)/2,w=(l+h)/2,P=(y+_)/2,T=(v+S)/2,E=(_+b)/2,I=(S+w)/2,V=(P+E)/2,D=(T+I)/2;if(m>0){let O=u-i,re=h-e;const ae=Math.abs((t-u)*re-(s-h)*O),Q=Math.abs((o-u)*re-(l-h)*O);if(ae>Ma&&Q>Ma){if((ae+Q)*(ae+Q)<=p*(O*O+re*re)){f.push(V,D);return}}else if(ae>Ma){if(ae*ae<=p*(O*O+re*re)){f.push(V,D);return}}else if(Q>Ma){if(Q*Q<=p*(O*O+re*re)){f.push(V,D);return}}else if(O=V-(i+u)/2,re=D-(e+h)/2,O*O+re*re<=p){f.push(V,D);return}}Tc(i,e,y,v,P,T,V,D,f,p,m+1),Tc(V,D,E,I,b,w,u,h,f,p,m+1)}const F3=8,z3=11920929e-14,L3=1;function B3(i,e,t,s,o,l,u,h){const p=Math.min(.99,Math.max(0,h??i0.defaultOptions.bezierSmoothness));let m=(L3-p)/1;return m*=m,j3(e,t,s,o,l,u,i,m),i}function j3(i,e,t,s,o,l,u,h){Ec(u,i,e,t,s,o,l,h,0),u.push(o,l)}function Ec(i,e,t,s,o,l,u,h,f){if(f>F3)return;const p=(e+s)/2,m=(t+o)/2,y=(s+l)/2,v=(o+u)/2,_=(p+y)/2,S=(m+v)/2;let b=l-e,w=u-t;const P=Math.abs((s-l)*w-(o-u)*b);if(P>z3){if(P*P<=h*(b*b+w*w)){i.push(_,S);return}}else if(b=_-(e+l)/2,w=S-(t+u)/2,b*b+w*w<=h){i.push(_,S);return}Ec(i,e,t,p,m,_,S,h,f+1),Ec(i,_,S,y,v,l,u,h,f+1)}function o0(i,e,t,s,o,l,u,h){let f=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(f=2*Math.PI-f),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(f/Math.PI)))),h=Math.max(h,3);let p=f/h,m=o;p*=u?-1:1;for(let y=0;y<h+1;y++){const v=Math.cos(m),_=Math.sin(m),S=e+v*s,b=t+_*s;i.push(S,b),m+=p}}function D3(i,e,t,s,o,l){const u=i[i.length-2],f=i[i.length-1]-t,p=u-e,m=o-t,y=s-e,v=Math.abs(f*y-p*m);if(v<1e-8||l===0){(i[i.length-2]!==e||i[i.length-1]!==t)&&i.push(e,t);return}const _=f*f+p*p,S=m*m+y*y,b=f*m+p*y,w=l*Math.sqrt(_)/v,P=l*Math.sqrt(S)/v,T=w*b/_,E=P*b/S,I=w*y+P*p,V=w*m+P*f,D=p*(P+T),O=f*(P+T),re=y*(w+E),ae=m*(w+E),Q=Math.atan2(O-V,D-I),ne=Math.atan2(ae-V,re-I);o0(i,I+e,V+t,l,Q,ne,p*m>y*f)}const Ks=Math.PI*2,tc={centerX:0,centerY:0,ang1:0,ang2:0},nc=({x:i,y:e},t,s,o,l,u,h,f)=>{i*=t,e*=s;const p=o*i-l*e,m=l*i+o*e;return f.x=p+u,f.y=m+h,f};function O3(i,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,o=Math.cos(i),l=Math.sin(i),u=Math.cos(i+e),h=Math.sin(i+e);return[{x:o-l*s,y:l+o*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const _1=(i,e,t,s)=>{const o=i*s-e*t<0?-1:1;let l=i*t+e*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},N3=(i,e,t,s,o,l,u,h,f,p,m,y,v)=>{const _=Math.pow(o,2),S=Math.pow(l,2),b=Math.pow(m,2),w=Math.pow(y,2);let P=_*S-_*w-S*b;P<0&&(P=0),P/=_*w+S*b,P=Math.sqrt(P)*(u===h?-1:1);const T=P*o/l*y,E=P*-l/o*m,I=p*T-f*E+(i+t)/2,V=f*T+p*E+(e+s)/2,D=(m-T)/o,O=(y-E)/l,re=(-m-T)/o,ae=(-y-E)/l,Q=_1(1,0,D,O);let ne=_1(D,O,re,ae);h===0&&ne>0&&(ne-=Ks),h===1&&ne<0&&(ne+=Ks),v.centerX=I,v.centerY=V,v.ang1=Q,v.ang2=ne};function $3(i,e,t,s,o,l,u,h=0,f=0,p=0){if(l===0||u===0)return;const m=Math.sin(h*Ks/360),y=Math.cos(h*Ks/360),v=y*(e-s)/2+m*(t-o)/2,_=-m*(e-s)/2+y*(t-o)/2;if(v===0&&_===0)return;l=Math.abs(l),u=Math.abs(u);const S=Math.pow(v,2)/Math.pow(l,2)+Math.pow(_,2)/Math.pow(u,2);S>1&&(l*=Math.sqrt(S),u*=Math.sqrt(S)),N3(e,t,s,o,l,u,f,p,m,y,v,_,tc);let{ang1:b,ang2:w}=tc;const{centerX:P,centerY:T}=tc;let E=Math.abs(w)/(Ks/4);Math.abs(1-E)<1e-7&&(E=1);const I=Math.max(Math.ceil(E),1);w/=I;let V=i[i.length-2],D=i[i.length-1];const O={x:0,y:0};for(let re=0;re<I;re++){const ae=O3(b,w),{x:Q,y:ne}=nc(ae[0],l,u,y,m,P,T,O),{x:Ce,y:be}=nc(ae[1],l,u,y,m,P,T,O),{x:Ae,y:yt}=nc(ae[2],l,u,y,m,P,T,O);s0(i,V,D,Q,ne,Ce,be,Ae,yt),V=Ae,D=yt,b+=w}}function U3(i,e,t){const s=(u,h)=>{const f=h.x-u.x,p=h.y-u.y,m=Math.sqrt(f*f+p*p),y=f/m,v=p/m;return{len:m,nx:y,ny:v}},o=(u,h)=>{u===0?i.moveTo(h.x,h.y):i.lineTo(h.x,h.y)};let l=e[e.length-1];for(let u=0;u<e.length;u++){const h=e[u%e.length],f=h.radius??t;if(f<=0){o(u,h),l=h;continue}const p=e[(u+1)%e.length],m=s(h,l),y=s(h,p);if(m.len<1e-4||y.len<1e-4){o(u,h),l=h;continue}let v=Math.asin(m.nx*y.ny-m.ny*y.nx),_=1,S=!1;m.nx*y.nx-m.ny*-y.ny<0?v<0?v=Math.PI+v:(v=Math.PI-v,_=-1,S=!0):v>0&&(_=-1,S=!0);const b=v/2;let w,P=Math.abs(Math.cos(b)*f/Math.sin(b));P>Math.min(m.len/2,y.len/2)?(P=Math.min(m.len/2,y.len/2),w=Math.abs(P*Math.sin(b)/Math.cos(b))):w=f;const T=h.x+y.nx*P+-y.ny*w*_,E=h.y+y.ny*P+y.nx*w*_,I=Math.atan2(m.ny,m.nx)+Math.PI/2*_,V=Math.atan2(y.ny,y.nx)-Math.PI/2*_;u===0&&i.moveTo(T+Math.cos(I)*w,E+Math.sin(I)*w),i.arc(T,E,w,I,V,S),l=h}}function G3(i,e,t,s){const o=(h,f)=>Math.sqrt((h.x-f.x)**2+(h.y-f.y)**2),l=(h,f,p)=>({x:h.x+(f.x-h.x)*p,y:h.y+(f.y-h.y)*p}),u=e.length;for(let h=0;h<u;h++){const f=e[(h+1)%u],p=f.radius??t;if(p<=0){h===0?i.moveTo(f.x,f.y):i.lineTo(f.x,f.y);continue}const m=e[h],y=e[(h+2)%u],v=o(m,f);let _;if(v<1e-4)_=f;else{const w=Math.min(v/2,p);_=l(f,m,w/v)}const S=o(y,f);let b;if(S<1e-4)b=f;else{const w=Math.min(S/2,p);b=l(f,y,w/S)}h===0?i.moveTo(_.x,_.y):i.lineTo(_.x,_.y),i.quadraticCurveTo(f.x,f.y,b.x,b.y,s)}}const W3=new ft;class H3{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Cn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==e||l!==t)&&s.push(e,t),this}arc(e,t,s,o,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return o0(h,e,t,s,o,l,u),this}arcTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return D3(u,e,t,s,o,l),this}arcToSvg(e,t,s,o,l,u,h){const f=this._currentPoly.points;return $3(f,this._currentPoly.lastX,this._currentPoly.lastY,u,h,e,t,s,o,l),this}bezierCurveTo(e,t,s,o,l,u,h){this._ensurePoly();const f=this._currentPoly;return s0(this._currentPoly.points,f.lastX,f.lastY,e,t,s,o,l,u,h),this}quadraticCurveTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly;return B3(this._currentPoly.points,u.lastX,u.lastY,e,t,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,o=s.length;for(let l=0;l<e.instructions.length;l++){const u=e.instructions[l];this[u.action](...u.data)}if(e.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const f=h.shape,p=l==null?void 0:l.shape;p&&p.containsPolygon(f)?(l.holes||(l.holes=[]),l.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):l=h}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,o,l){return this.drawShape(new ft(e,t,s,o),l),this}circle(e,t,s,o){return this.drawShape(new Nc(e,t,s),o),this}poly(e,t,s){const o=new Xs(e);return o.closePath=t,this.drawShape(o,s),this}regularPoly(e,t,s,o,l=0,u){o=Math.max(o|0,3);const h=-1*Math.PI/2+l,f=Math.PI*2/o,p=[];for(let m=0;m<o;m++){const y=h-m*f;p.push(e+s*Math.cos(y),t+s*Math.sin(y))}return this.poly(p,!0,u),this}roundPoly(e,t,s,o,l,u=0,h){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(e,t,s,o,u);const f=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,f);const p=-1*Math.PI/2+u,m=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let v=0;v<o;v++){const _=v*m+p,S=e+s*Math.cos(_),b=t+s*Math.sin(_),w=_+Math.PI+y,P=_-Math.PI-y,T=S+l*Math.cos(w),E=b+l*Math.sin(w),I=S+l*Math.cos(P),V=b+l*Math.sin(P);v===0?this.moveTo(T,E):this.lineTo(T,E),this.quadraticCurveTo(S,b,I,V,h)}return this.closePath()}roundShape(e,t,s=!1,o){return e.length<3?this:(s?G3(this,e,t,o):U3(this,e,t),this.closePath())}filletRect(e,t,s,o,l){if(l===0)return this.rect(e,t,s,o);const u=Math.min(s,o)/2,h=Math.min(u,Math.max(-u,l)),f=e+s,p=t+o,m=h<0?-h:0,y=Math.abs(h);return this.moveTo(e,t+y).arcTo(e+m,t+m,e+y,t,y).lineTo(f-y,t).arcTo(f-m,t+m,f,t+y,y).lineTo(f,p-y).arcTo(f-m,p-m,e+s-y,p,y).lineTo(e+y,p).arcTo(e+m,p-m,e,p-y,y).closePath()}chamferRect(e,t,s,o,l,u){if(l<=0)return this.rect(e,t,s,o);const h=Math.min(l,Math.min(s,o)/2),f=e+s,p=t+o,m=[e+h,t,f-h,t,f,t+h,f,p-h,f-h,p,e+h,p,e,p-h,e,t+h];for(let y=m.length-1;y>=2;y-=2)m[y]===m[y-2]&&m[y-1]===m[y-3]&&m.splice(y-1,2);return this.poly(m,!0,u)}ellipse(e,t,s,o,l){return this.drawShape(new $c(e,t,s,o),l),this}roundRect(e,t,s,o,l,u){return this.drawShape(new Uc(e,t,s,o,l),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new Xs,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Xs,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,o=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const l=t.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const o=t[s],l=o.shape.getBounds(W3);o.transform?e.addRect(l,o.transform):e.addRect(l)}return e}}class Jn{constructor(e,t=!1){this.instructions=[],this.uid=ct("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?py(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new H3(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,o,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(Bt.shared);let f=0,p=0;if(!u||u.action!=="bezierCurveTo")f=h.x,p=h.y;else{f=u.data[2],p=u.data[3];const m=h.x,y=h.y;f=m+(m-f),p=y+(y-p)}return this.instructions.push({action:"bezierCurveTo",data:[f,p,e,t,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(Bt.shared);let u=0,h=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=o.data[0],h=o.data[1];const f=l.x,p=l.y;u=f+(f-u),h=p+(p-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,e,t,s]}),this._dirty=!0,this}rect(e,t,s,o,l){return this.instructions.push({action:"rect",data:[e,t,s,o,l]}),this._dirty=!0,this}circle(e,t,s,o){return this.instructions.push({action:"circle",data:[e,t,s,o]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,o,l,u,h){l||(l=o/2);const f=-1*Math.PI/2+u,p=s*2,m=Math.PI*2/p,y=[];for(let v=0;v<p;v++){const _=v%2?l:o,S=v*m+f;y.push(e+_*Math.cos(S),t+_*Math.sin(S))}return this.poly(y,!0,h),this}clone(e=!1){const t=new Jn;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];t.instructions.push({action:o.action,data:o.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,o=e.c,l=e.d,u=e.tx,h=e.ty;let f=0,p=0,m=0,y=0,v=0,_=0,S=0,b=0;for(let w=0;w<this.instructions.length;w++){const P=this.instructions[w],T=P.data;switch(P.action){case"moveTo":case"lineTo":f=T[0],p=T[1],T[0]=t*f+o*p+u,T[1]=s*f+l*p+h;break;case"bezierCurveTo":m=T[0],y=T[1],v=T[2],_=T[3],f=T[4],p=T[5],T[0]=t*m+o*y+u,T[1]=s*m+l*y+h,T[2]=t*v+o*_+u,T[3]=s*v+l*_+h,T[4]=t*f+o*p+u,T[5]=s*f+l*p+h;break;case"quadraticCurveTo":m=T[0],y=T[1],f=T[2],p=T[3],T[0]=t*m+o*y+u,T[1]=s*m+l*y+h,T[2]=t*f+o*p+u,T[3]=s*f+l*p+h;break;case"arcToSvg":f=T[5],p=T[6],S=T[0],b=T[1],T[0]=t*S+o*b,T[1]=s*S+l*b,T[5]=t*f+o*p+u,T[6]=s*f+l*p+h;break;case"circle":T[4]=$s(T[3],e);break;case"rect":T[4]=$s(T[4],e);break;case"ellipse":T[8]=$s(T[8],e);break;case"roundRect":T[5]=$s(T[5],e);break;case"addPath":T[0].transform(e);break;case"poly":T[2]=$s(T[2],e);break;default:et("unknown transform action",P.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function $s(i,e){return i?i.prepend(e):e.clone()}function ut(i,e,t){const s=i.getAttribute(e);return s?Number(s):t}function V3(i,e){const t=i.querySelectorAll("defs");for(let s=0;s<t.length;s++){const o=t[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=Y3(u);break;case"radialgradient":e.defs[u.id]=X3();break}}}}function Y3(i){const e=ut(i,"x1",0),t=ut(i,"y1",0),s=ut(i,"x2",1),o=ut(i,"y2",0),l=i.getAttribute("gradientUnits")||"objectBoundingBox",u=new er(e,t,s,o,l==="objectBoundingBox"?"local":"global");for(let h=0;h<i.children.length;h++){const f=i.children[h],p=ut(f,"offset",0),m=wt.shared.setValue(f.getAttribute("stop-color")).toNumber();u.addColorStop(p,m)}return u}function X3(i){return et("[SVG Parser] Radial gradients are not yet supported"),new er(0,0,1,0)}function w1(i){const e=i.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const S1={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function a0(i,e){const t=i.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in S1){const h=i.getAttribute(u);h&&k1(e,l,u,h.trim())}if(t){const u=t.split(";");for(let h=0;h<u.length;h++){const f=u[h].trim(),[p,m]=f.split(":");S1[p]&&k1(e,l,p,m.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function k1(i,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=w1(s);e.strokeStyle.fill=i.defs[o]}else e.strokeStyle.color=wt.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=w1(s);e.fillStyle.fill=i.defs[o]}else e.fillStyle.color=wt.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function q3(i){if(i.length<=2)return!0;const e=i.map(h=>h.area).sort((h,f)=>f-h),[t,s]=e,o=e[e.length-1],l=t/s,u=s/o;return!(l>3&&u<2)}function K3(i){return i.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function Q3(i){const e=i.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],o=[];for(let m=0;m<t.length;m+=2)m+1<t.length&&(s.push(t[m]),o.push(t[m+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),h=Math.min(...o),f=Math.max(...o);return(u-l)*(f-h)}function C1(i,e){const t=new Jn(i,!1);for(const s of t.instructions)e.instructions.push(s)}function Z3(i,e){if(typeof i=="string"){const u=document.createElement("div");u.innerHTML=i.trim(),i=u.querySelector("svg")}const t={context:e,defs:{},path:new Jn};V3(i,t);const s=i.children,{fillStyle:o,strokeStyle:l}=a0(i,t);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&l0(h,t,o,l)}return e}function l0(i,e,t,s){const o=i.children,{fillStyle:l,strokeStyle:u}=a0(i,e);l&&t?t={...t,...l}:l&&(t=l),u&&s?s={...s,...u}:u&&(s=u);const h=!t&&!s;h&&(t={color:0});let f,p,m,y,v,_,S,b,w,P,T,E,I,V,D,O,re;switch(i.nodeName.toLowerCase()){case"path":{V=i.getAttribute("d");const ae=i.getAttribute("fill-rule"),Q=K3(V),ne=ae==="evenodd",Ce=Q.length>1;if(ne&&Ce){const Ae=Q.map(ee=>({path:ee,area:Q3(ee)}));if(Ae.sort((ee,ie)=>ie.area-ee.area),Q.length>3||!q3(Ae))for(let ee=0;ee<Ae.length;ee++){const ie=Ae[ee],J=ee===0;e.context.beginPath();const Z=new Jn(void 0,!0);C1(ie.path,Z),e.context.path(Z),J?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let ee=0;ee<Ae.length;ee++){const ie=Ae[ee],J=ee%2===1;e.context.beginPath();const Z=new Jn(void 0,!0);C1(ie.path,Z),e.context.path(Z),J?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const Ae=ae?ae==="evenodd":!0;D=new Jn(V,Ae),e.context.path(D),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":S=ut(i,"cx",0),b=ut(i,"cy",0),w=ut(i,"r",0),e.context.ellipse(S,b,w,w),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":f=ut(i,"x",0),p=ut(i,"y",0),O=ut(i,"width",0),re=ut(i,"height",0),P=ut(i,"rx",0),T=ut(i,"ry",0),P||T?e.context.roundRect(f,p,O,re,P||T):e.context.rect(f,p,O,re),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":S=ut(i,"cx",0),b=ut(i,"cy",0),P=ut(i,"rx",0),T=ut(i,"ry",0),e.context.beginPath(),e.context.ellipse(S,b,P,T),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":m=ut(i,"x1",0),y=ut(i,"y1",0),v=ut(i,"x2",0),_=ut(i,"y2",0),e.context.beginPath(),e.context.moveTo(m,y),e.context.lineTo(v,_),s&&e.context.stroke(s);break;case"polygon":I=i.getAttribute("points"),E=I.match(/\d+/g).map(ae=>parseInt(ae,10)),e.context.poly(E,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":I=i.getAttribute("points"),E=I.match(/\d+/g).map(ae=>parseInt(ae,10)),e.context.poly(E,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{et(`[SVG parser] <${i.nodeName}> elements unsupported`);break}}h&&(t=null);for(let ae=0;ae<o.length;ae++)l0(o[ae],e,t,s)}function J3(i){return wt.isColorLike(i)}function b1(i){return i instanceof Va}function A1(i){return i instanceof er}function e8(i){return i instanceof Le}function t8(i,e,t){const s=wt.shared.setValue(e??0);return i.color=s.toNumber(),i.alpha=s.alpha===1?t.alpha:s.alpha,i.texture=Le.WHITE,{...t,...i}}function n8(i,e,t){return i.texture=e,{...t,...i}}function P1(i,e,t){return i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,{...t,...i}}function T1(i,e,t){return e.buildGradient(),i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,i.textureSpace=e.textureSpace,{...t,...i}}function r8(i,e){const t={...e,...i},s=wt.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function ri(i,e){if(i==null)return null;const t={},s=i;return J3(i)?t8(t,i,e):e8(i)?n8(t,i,e):b1(i)?P1(t,i,e):A1(i)?T1(t,i,e):s.fill&&b1(s.fill)?P1(s,s.fill,e):s.fill&&A1(s.fill)?T1(s,s.fill,e):r8(s,e)}function Ua(i,e){const{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...f}=e,p=ri(i,f);return p?{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...p}:null}const i8=new Bt,E1=new Ie,Wc=class Ln extends bn{constructor(){super(...arguments),this.uid=ct("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Jn,this._transform=new Ie,this._fillStyle={...Ln.defaultFillStyle},this._strokeStyle={...Ln.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Cn,this._boundsDirty=!0}clone(){const e=new Ln;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=ri(e,Ln.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Ua(e,Ln.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=ri(e,Ln.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=ri(e,Ln.defaultStrokeStyle),this}texture(e,t,s,o,l,u){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:o||0,dw:l||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?wt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Jn,this}fill(e,t){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&(o==null?void 0:o.action)==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(Me(We,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=ri(e,Ln.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Bt.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&(s==null?void 0:s.action)==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=Ua(e,Ln.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,o,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,s,o,l,u),this}arcTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(e,t,s,o,l,u,h){this._tick++;const f=this._transform;return this._activePath.arcToSvg(e,t,s,o,l,f.a*u+f.c*h+f.tx,f.b*u+f.d*h+f.ty),this}bezierCurveTo(e,t,s,o,l,u,h){this._tick++;const f=this._transform;return this._activePath.bezierCurveTo(f.a*e+f.c*t+f.tx,f.b*e+f.d*t+f.ty,f.a*s+f.c*o+f.tx,f.b*s+f.d*o+f.ty,f.a*l+f.c*u+f.tx,f.b*l+f.d*u+f.ty,h),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,s,o){return this._tick++,this._activePath.ellipse(e,t,s,o,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*e+s.c*t+s.tx,u=s.b*e+s.d*t+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(e,t,s,o){return this._tick++,this._activePath.rect(e,t,s,o,this._transform.clone()),this}roundRect(e,t,s,o,l){return this._tick++,this._activePath.roundRect(e,t,s,o,l,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(e,t,s,o,l,u),this}roundPoly(e,t,s,o,l,u){return this._tick++,this._activePath.roundPoly(e,t,s,o,l,u),this}roundShape(e,t,s,o){return this._tick++,this._activePath.roundShape(e,t,s,o),this}filletRect(e,t,s,o,l){return this._tick++,this._activePath.filletRect(e,t,s,o,l),this}chamferRect(e,t,s,o,l,u){return this._tick++,this._activePath.chamferRect(e,t,s,o,l,u),this}star(e,t,s,o,l=0,u=0){return this._tick++,this._activePath.star(e,t,s,o,l,u,this._transform.clone()),this}svg(e){return this._tick++,Z3(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,o,l,u){return e instanceof Ie?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,o,l,u),this)}transform(e,t,s,o,l,u){return e instanceof Ie?(this._transform.append(e),this):(E1.set(e,t,s,o,l,u),this._transform.append(E1),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],o=s.action;if(o==="fill"){const l=s.data;e.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;e.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,h=l.style.width*(1-u),f=l.path.bounds;e.addFrame(f.minX-h,f.minY-h,f.maxX+h,f.maxY+h)}}return e}containsPoint(e){var o;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let l=0;l<t.length;l++){const u=t[l],h=u.data,f=h.path;if(!u.action||!f)continue;const p=h.style,m=f.shapePath.shapePrimitives;for(let y=0;y<m.length;y++){const v=m[y].shape;if(!p||!v)continue;const _=m[y].transform,S=_?_.applyInverse(e,i8):e;if(u.action==="fill")s=v.contains(S.x,S.y);else{const w=p;s=v.strokeContains(S.x,S.y,w.width,w.alignment)}const b=h.hole;if(b){const w=(o=b.shapePath)==null?void 0:o.shapePrimitives;if(w)for(let P=0;P<w.length;P++)w[P].shape.contains(S.x,S.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Wc.defaultFillStyle={color:16777215,alpha:1,texture:Le.WHITE,matrix:null,fill:null,textureSpace:"local"};Wc.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Le.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let un=Wc;const Hc=class Oi extends bn{constructor(e={}){super(),this.uid=ct("textStyle"),this._tick=0,s8(e);const t={...Oi.defaultTextStyle,...e};for(const s in t){const o=s;this[o]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Oi.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Oi.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...un.defaultFillStyle,...e},()=>{this._fill=ri({...this._originalFill},un.defaultFillStyle)})),this._fill=ri(e===0?"black":e,un.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...un.defaultStrokeStyle,...e},()=>{this._stroke=Ua({...this._originalStroke},un.defaultStrokeStyle)})),this._stroke=Ua(e,un.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=Oi.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Oi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){var s,o,l,u;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const h=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(h),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(h),(l=this._stroke)!=null&&l.texture&&this._stroke.texture.destroy(h),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(h)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,o,l)=>(s[o]===l||(s[o]=l,t==null||t(o,l),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(wt.isColorLike(e)||e instanceof er||e instanceof Va)}};Hc.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Hc.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ga=Hc;function s8(i){const e=i;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=Ga.defaultDropShadow;i.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Me(We,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(wt.isColorLike(t))s.color=t;else if(t instanceof er||t instanceof Va)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");i.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Me(We,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&et("The number of fill colors must match the number of fill gradient stops.");const t=new er({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),o=e.fill.map(l=>wt.shared.setValue(l).toNumber());s.forEach((l,u)=>{t.addColorStop(l,o[u])}),i.fill={fill:t}}}class o8{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=tt.get().createCanvas();s.width=e,s.height=t;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=Da(e),t=Da(t);const o=(e<<17)+(t<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(e,t)),l}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:o}=t,l=(s<<17)+(o<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,o),this._canvasPool[l].push(e)}clear(){this._canvasPool={}}}const Mc=new o8;ro.register(Mc);const M1=1e5;function R1(i,e,t,s=0){if(i.texture===Le.WHITE&&!i.fill)return wt.shared.setValue(i.color).setAlpha(i.alpha??1).toHexa();if(i.fill){if(i.fill instanceof Va){const o=i.fill,l=e.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(Ie.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(i.fill instanceof er){const o=i.fill,l=o.type==="linear",u=o.textureSpace==="local";let h=1,f=1;u&&t&&(h=t.width+s,f=t.height+s);let p,m=!1;if(l){const{start:y,end:v}=o;p=e.createLinearGradient(y.x*h,y.y*f,v.x*h,v.y*f),m=Math.abs(v.x-y.x)<Math.abs((v.y-y.y)*.1)}else{const{center:y,innerRadius:v,outerCenter:_,outerRadius:S}=o;p=e.createRadialGradient(y.x*h,y.y*f,v*h,_.x*h,_.y*f,S*h)}if(m&&u&&t){const y=t.lineHeight/f;for(let v=0;v<t.lines.length;v++){const _=(v*t.lineHeight+s/2)/f;o.colorStops.forEach(S=>{const b=_+S.offset*y;p.addColorStop(Math.floor(b*M1)/M1,wt.shared.setValue(S.color).toHex())})}}else o.colorStops.forEach(y=>{p.addColorStop(y.offset,wt.shared.setValue(y.color).toHex())});return p}}else{const o=e.createPattern(i.texture.source.resource,"repeat"),l=i.matrix.copyTo(Ie.shared);return l.scale(i.texture.frame.width,i.texture.frame.height),o.setTransform(l),o}return et("FillStyle not recognised",i),"red"}const u0=class c0 extends Wp{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...c0.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Le.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=bc(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof Oa?t.textureStyle:new Oa(t.textureStyle)),this.fontMetrics=za.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){var w,P;const t=za.graphemeSegmenter(e).filter(T=>!this._currentChars.includes(T)).filter((T,E,I)=>I.indexOf(T)===E);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const h=this._style;let f=this._currentX,p=this._currentY,m=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,v=this._padding*y;let _=!1;const S=o.width/this.resolution,b=o.height/this.resolution;for(let T=0;T<t.length;T++){const E=t[T],I=za.measureText(E,h,o,!1);I.lineHeight=I.height;const V=I.width*y,D=Math.ceil((h.fontStyle==="italic"?2:1)*V),O=I.height*y,re=D+v*2,ae=O+v*2;if(_=!1,E!==`
`&&E!=="\r"&&E!=="	"&&E!==" "&&(_=!0,m=Math.ceil(Math.max(ae,m))),f+re>S&&(p+=m,m=ae,f=0,p+m>b)){u.update();const ne=this._nextPage();o=ne.canvasAndContext.canvas,l=ne.canvasAndContext.context,u=ne.texture.source,f=0,p=0,m=0}const Q=V/y-(((w=h.dropShadow)==null?void 0:w.distance)??0)-(((P=h._stroke)==null?void 0:P.width)??0);if(this.chars[E]={id:E.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:Q,kerning:{}},_){this._drawGlyph(l,I,f+v,p+v,y,h);const ne=u.width*y,Ce=u.height*y,be=new ft(f/ne*u.width,p/Ce*u.height,re/ne*u.width,ae/Ce*u.height);this.chars[E].texture=new Le({source:u,frame:be}),f+=Math.ceil(re)}}u.update(),this._currentX=f,this._currentY=p,this._currentMaxCharHeight=m,this._skipKerning&&this._applyKerning(t,l)}get pageTextures(){return Me(We,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let o=0;o<e.length;o++){const l=e[o];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let f=s[l];f||(f=s[l]=t.measureText(l).width);let p=s[h];p||(p=s[h]=t.measureText(h).width);let m=t.measureText(l+h).width,y=m-(f+p);y&&(this.chars[l].kerning[h]=y),m=t.measureText(l+h).width,y=m-(f+p),y&&(this.chars[h].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=Mc.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Le({source:new ii({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:t,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=bc(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const o=t._stroke,l=(o==null?void 0:o.width)??0;if(o&&(e.lineWidth=l,e.lineJoin=o.join,e.miterLimit=o.miterLimit,e.strokeStyle=R1(o,e)),t._fill&&(e.fillStyle=R1(t._fill,e)),t.dropShadow){const u=t.dropShadow,h=wt.shared.setValue(u.color).toArray(),f=u.blur*s,p=u.distance*s;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,e.shadowBlur=f,e.shadowOffsetX=Math.cos(u.angle)*p,e.shadowOffsetY=Math.sin(u.angle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,o,l,u){const h=t.text,f=t.fontProperties,p=u._stroke,m=((p==null?void 0:p.width)??0)*l,y=s+m/2,v=o-m/2,_=f.descent*l,S=t.lineHeight*l;let b=!1;u.stroke&&m&&(b=!0,e.strokeText(h,y,v+S-_));const{shadowBlur:w,shadowOffsetX:P,shadowOffsetY:T}=e;u._fill&&(b&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(h,y,v+S-_)),b&&(e.shadowBlur=w,e.shadowOffsetX=P,e.shadowOffsetY=T)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];Mc.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};u0.defaultOptions={textureSize:512,style:new Ga,mipmap:!0};let I1=u0;function a8(i,e,t,s){const o={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=t.baseLineOffset;let l=o.lines[0],u=null,h=!0;const f={width:0,start:0,index:0,positions:[],chars:[]},p=t.baseMeasurementFontSize/e.fontSize,m=e.letterSpacing*p,y=e.wordWrapWidth*p,v=e.lineHeight?e.lineHeight*p:t.lineHeight,_=e.wordWrap&&e.breakWords,S=P=>{const T=l.width;for(let E=0;E<f.index;E++){const I=P.positions[E];l.chars.push(P.chars[E]),l.charPositions.push(I+T)}l.width+=P.width,h=!1,f.width=0,f.index=0,f.chars.length=0},b=()=>{let P=l.chars.length-1;if(s){let T=l.chars[P];for(;T===" ";)l.width-=t.chars[T].xAdvance,T=l.chars[--P]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,o.lines.push(l),o.height+=v},w=P=>P-m>y;for(let P=0;P<i.length+1;P++){let T;const E=P===i.length;E||(T=i[P]);const I=t.chars[T]||t.chars[" "];if(/(?:\s)/.test(T)||T==="\r"||T===`
`||E){if(!h&&e.wordWrap&&w(l.width+f.width)?(b(),S(f),E||l.charPositions.push(0)):(f.start=l.width,S(f),E||l.charPositions.push(0)),T==="\r"||T===`
`)b();else if(!E){const re=I.xAdvance+(I.kerning[u]||0)+m;l.width+=re,l.spaceWidth=re,l.spacesIndex.push(l.charPositions.length),l.chars.push(T)}}else{const O=I.kerning[u]||0,re=I.xAdvance+O+m;_&&w(l.width+f.width+re)&&(S(f),b()),f.positions[f.index++]=f.width+O,f.chars.push(T),f.width+=re}u=T}return b(),e.align==="center"?l8(o):e.align==="right"?u8(o):e.align==="justify"&&c8(o),o}function l8(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width/2-t.width/2;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function u8(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width-t.width;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function c8(i){const e=i.width;for(let t=0;t<i.lines.length;t++){const s=i.lines[t];let o=0,l=s.spacesIndex[o++],u=0;const h=s.spacesIndex.length,p=(e-s.width)/h;for(let m=0;m<s.charPositions.length;m++)m===l&&(l=s.spacesIndex[o++],u+=p),s.charPositions[m]+=u}}function h8(i){if(i==="")return[];typeof i=="string"&&(i=[i]);const e=[];for(let t=0,s=i.length;t<s;t++){const o=i[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let h=l,f=u;h<=f;h++)e.push(String.fromCharCode(h))}else e.push(...Array.from(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let Ra=0;class d8{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=Hp(1e3)}getFont(e,t){var u;let s=`${t.fontFamily}-bitmap`,o=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,o=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,o=!1),!Je.has(s)){const h=Object.create(t);h.lineHeight=0;const f=new I1({style:h,overrideFill:o,overrideSize:!0,...this.defaultOptions});Ra++,Ra>50&&et("BitmapText",`You have dynamically created ${Ra} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),f.once("destroy",()=>{Ra--,Je.remove(s)}),Je.set(s,f)}const l=Je.get(s);return(u=l.ensureCharacters)==null||u.call(l,e),l}getLayout(e,t,s=!0){const o=this.getFont(e,t),l=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=za.graphemeSegmenter(e),h=a8(u,t,o,s);return this.measureCache.set(l,h),h}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){var p,m,y,v;let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:(p=e[2])==null?void 0:p.chars,resolution:(m=e[2])==null?void 0:m.resolution,padding:(y=e[2])==null?void 0:y.padding,skipKerning:(v=e[2])==null?void 0:v.skipKerning},Me(We,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t==null?void 0:t.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const o=t.style,l=o instanceof Ga?o:new Ga(o),u=t.dynamicFill??this._canUseTintForStyle(l),h=new I1({style:l,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),f=h8(t.chars);return h.ensureCharacters(f.join("")),Je.set(`${s}-bitmap`,h),h.once("destroy",()=>Je.remove(`${s}-bitmap`)),h}uninstall(e){const t=`${e}-bitmap`,s=Je.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const F1=new d8;class h0 extends Wp{constructor(e,t){super();const{textures:s,data:o}=e;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:h,source:f,rotate:p}=s[u.page],m=Ge.transformRectCoords(u,h,p,new ft),y=new Le({frame:m,orig:new ft(0,0,u.width,u.height),source:f,rotate:p});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){F1.install(e)}static uninstall(e){F1.uninstall(e)}}const rc={test(i){return typeof i=="string"&&i.startsWith("info face=")},parse(i){const e=i.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in e){const v=e[y].match(/^[a-z]+/gm)[0],_=e[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),S={};for(const b in _){const w=_[b].split("="),P=w[0],T=w[1].replace(/"/gm,""),E=parseFloat(T),I=isNaN(E)?T:E;S[P]=I}t[v].push(S)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=t.info,[l]=t.common,[u]=t.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const h=t.page;for(let y=0;y<h.length;y++)s.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const f={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const p=t.char;for(let y=0;y<p.length;y++){const v=p[y],_=parseInt(v.id,10);let S=v.letter??v.char??String.fromCharCode(_);S==="space"&&(S=" "),f[_]=S,s.chars[S]={id:_,page:parseInt(v.page,10)||0,x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xOffset:parseInt(v.xoffset,10),yOffset:parseInt(v.yoffset,10),xAdvance:parseInt(v.xadvance,10),kerning:{}}}const m=t.kerning||[];for(let y=0;y<m.length;y++){const v=parseInt(m[y].first,10),_=parseInt(m[y].second,10),S=parseInt(m[y].amount,10);s.chars[f[_]].kerning[f[v]]=S}return s}},z1={test(i){const e=i;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(i){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=i.getElementsByTagName("info")[0],s=i.getElementsByTagName("common")[0],o=i.getElementsByTagName("distanceField")[0];o&&(e.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=i.getElementsByTagName("page"),u=i.getElementsByTagName("char"),h=i.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let p=0;p<l.length;p++)e.pages.push({id:parseInt(l[p].getAttribute("id"),10)||0,file:l[p].getAttribute("file")});const f={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let p=0;p<u.length;p++){const m=u[p],y=parseInt(m.getAttribute("id"),10);let v=m.getAttribute("letter")??m.getAttribute("char")??String.fromCharCode(y);v==="space"&&(v=" "),f[y]=v,e.chars[v]={id:y,page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xOffset:parseInt(m.getAttribute("xoffset"),10),yOffset:parseInt(m.getAttribute("yoffset"),10),xAdvance:parseInt(m.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<h.length;p++){const m=parseInt(h[p].getAttribute("first"),10),y=parseInt(h[p].getAttribute("second"),10),v=parseInt(h[p].getAttribute("amount"),10);e.chars[f[y]].kerning[f[m]]=v}return e}},L1={test(i){return typeof i=="string"&&i.match(/<font(\s|>)/)?z1.test(tt.get().parseXML(i)):!1},parse(i){return z1.parse(tt.get().parseXML(i))}},f8=[".xml",".fnt"],p8={extension:{type:me.CacheParser,name:"cacheBitmapFont"},test:i=>i instanceof h0,getCacheableAssets(i,e){const t={};return i.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},m8={extension:{type:me.LoadParser,priority:Pr.Normal},name:"loadBitmapFont",id:"bitmap-font",test(i){return f8.includes(tn.extname(i).toLowerCase())},async testParse(i){return rc.test(i)||L1.test(i)},async parse(i,e,t){const s=rc.test(i)?rc.parse(i):L1.parse(i),{src:o}=e,{pages:l}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const v=l[y].file;let _=tn.join(tn.dirname(o),v);_=xc(_,o),u.push({src:_,data:h})}const f=await t.load(u),p=u.map(y=>f[y.src]);return new h0({data:s,textures:p},o)},async load(i,e){return await(await tt.get().fetch(i)).text()},async unload(i,e,t){await Promise.all(i.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),i.destroy()}};class g8{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const y8={extension:{type:me.CacheParser,name:"cacheTextureArray"},test:i=>Array.isArray(i)&&i.every(e=>e instanceof Le),getCacheableAssets:(i,e)=>{const t={};return i.forEach(s=>{e.forEach((o,l)=>{t[s+(l===0?"":l+1)]=o})}),t}};async function d0(i){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(i)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const x8={extension:{type:me.DetectionParser,priority:1},test:async()=>d0("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(e=>e!=="avif")},B1=["png","jpg","jpeg"],v8={extension:{type:me.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...B1],remove:async i=>i.filter(e=>!B1.includes(e))},_8="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Xa(i){return _8?!1:document.createElement("video").canPlayType(i)!==""}const w8={extension:{type:me.DetectionParser,priority:0},test:async()=>Xa("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(e=>e!=="mp4"&&e!=="m4v")},S8={extension:{type:me.DetectionParser,priority:0},test:async()=>Xa("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(e=>e!=="ogv")},k8={extension:{type:me.DetectionParser,priority:0},test:async()=>Xa("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(e=>e!=="webm")},C8={extension:{type:me.DetectionParser,priority:0},test:async()=>d0("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(e=>e!=="webp")},f0=class La{constructor(){this.loadOptions={...La.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{var u,h;let o=null,l=null;if((t.parser||t.loadParser)&&(l=this._parserHash[t.parser||t.loadParser],t.loadParser&&et(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),l||et(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!l){for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];if(p.load&&((u=p.test)!=null&&u.call(p,e,t,this))){l=p;break}}if(!l)return et(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(e,t,this),s.parser=l;for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];p.parse&&p.parse&&await((h=p.testParse)==null?void 0:h.call(p,o,t,this))&&(o=await p.parse(o,t,this)||o,s.parser=p)}return o})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...La.defaultOptions,...this.loadOptions,onProgress:t}:{...La.defaultOptions,...this.loadOptions,...t||{}},{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:f}=s;let p=0;const m={},y=Na(e),v=Sn(e,b=>({alias:[b],src:b,data:{}})),_=v.reduce((b,w)=>b+(w.progressSize||1),0),S=v.map(async b=>{const w=tn.toAbsolute(b.src);m[b.src]||(await this._loadAssetWithRetry(w,b,{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:f},m),p+=b.progressSize||1,o&&o(p/_))});return await Promise.all(S),y?m[v[0].src]:m}async unload(e){const s=Sn(e,o=>({alias:[o],src:o})).map(async o=>{var h,f;const l=tn.toAbsolute(o.src),u=this.promiseCache[l];if(u){const p=await u.promise;delete this.promiseCache[l],await((f=(h=u.parser)==null?void 0:h.unload)==null?void 0:f.call(h,p,o,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?et("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&et(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,o){let l=0;const{onError:u,strategy:h,retryCount:f,retryDelay:p}=s,m=y=>new Promise(v=>setTimeout(v,y));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),o[t.src]=await this.promiseCache[e].promise;return}catch(y){delete this.promiseCache[e],delete o[t.src],l++;const v=h!=="retry"||l>f;if(h==="retry"&&!v){u&&u(y,t),await m(p);continue}if(h==="skip"){u&&u(y,t);return}throw u&&u(y,t),new Error(`[Loader.load] Failed to load ${e}.
${y}`)}}};f0.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let b8=f0;function Ki(i,e){if(Array.isArray(e)){for(const t of e)if(i.startsWith(`data:${t}`))return!0;return!1}return i.startsWith(`data:${e}`)}function Qi(i,e){const t=i.split("?")[0],s=tn.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const A8=".json",P8="application/json",T8={extension:{type:me.LoadParser,priority:Pr.Low},name:"loadJson",id:"json",test(i){return Ki(i,P8)||Qi(i,A8)},async load(i){return await(await tt.get().fetch(i)).json()}},E8=".txt",M8="text/plain",R8={name:"loadTxt",id:"text",extension:{type:me.LoadParser,priority:Pr.Low,name:"loadTxt"},test(i){return Ki(i,M8)||Qi(i,E8)},async load(i){return await(await tt.get().fetch(i)).text()}},I8=["normal","bold","100","200","300","400","500","600","700","800","900"],F8=[".ttf",".otf",".woff",".woff2"],z8=["font/ttf","font/otf","font/woff","font/woff2"],L8=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function B8(i){const e=tn.extname(i),o=tn.basename(i,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let l=o.length>0;for(const h of o)if(!h.match(L8)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const j8=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function D8(i){return j8.test(i)?i:encodeURI(i)}const O8={extension:{type:me.LoadParser,priority:Pr.Low},name:"loadWebFont",id:"web-font",test(i){return Ki(i,z8)||Qi(i,F8)},async load(i,e){var s,o,l;const t=tt.get().getFontFaceSet();if(t){const u=[],h=((s=e.data)==null?void 0:s.family)??B8(i),f=((l=(o=e.data)==null?void 0:o.weights)==null?void 0:l.filter(m=>I8.includes(m)))??["normal"],p=e.data??{};for(let m=0;m<f.length;m++){const y=f[m],v=new FontFace(h,`url(${D8(i)})`,{...p,weight:y});await v.load(),t.add(v),u.push(v)}return Je.has(`${h}-and-url`)?Je.get(`${h}-and-url`).entries.push({url:i,faces:u}):Je.set(`${h}-and-url`,{entries:[{url:i,faces:u}]}),u.length===1?u[0]:u}return et("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){const e=Array.isArray(i)?i:[i],t=e[0].family,s=Je.get(`${t}-and-url`),o=s.entries.find(l=>l.faces.some(u=>e.indexOf(u)!==-1));o.faces=o.faces.filter(l=>e.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),e.forEach(l=>{tt.get().getFontFaceSet().delete(l)}),s.entries.length===0&&Je.remove(`${t}-and-url`)}};function Vc(i,e=1){var s;const t=(s=qi.RETINA_PREFIX)==null?void 0:s.exec(i);return t?parseFloat(t[1]):e}function Yc(i,e,t){i.label=t,i._sourceOrigin=t;const s=new Le({source:i,label:t}),o=()=>{delete e.promiseCache[t],Je.has(t)&&Je.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(et("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{i.destroyed||(et("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const N8=".svg",$8="image/svg+xml",U8={extension:{type:me.LoadParser,priority:Pr.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(i){return Ki(i,$8)||Qi(i,N8)},async load(i,e,t){var s;return((s=e.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?W8(i):G8(i,e,t,this.config.crossOrigin)},unload(i){i.destroy(!0)}};async function G8(i,e,t,s){var w,P,T;const o=await tt.get().fetch(i),l=tt.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=((w=e.data)==null?void 0:w.width)??l.width,h=((P=e.data)==null?void 0:P.height)??l.height,f=((T=e.data)==null?void 0:T.resolution)||Vc(i),p=Math.ceil(u*f),m=Math.ceil(h*f),y=tt.get().createCanvas(p,m),v=y.getContext("2d");v.imageSmoothingEnabled=!0,v.imageSmoothingQuality="high",v.drawImage(l,0,0,u*f,h*f);const{parseAsGraphicsContext:_,...S}=e.data??{},b=new ii({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:f,...S});return Yc(b,t,i)}async function W8(i){const t=await(await tt.get().fetch(i)).text(),s=new un;return s.svg(t),s}const H8=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Gi=null,Rc=class{constructor(){Gi||(Gi=URL.createObjectURL(new Blob([H8],{type:"application/javascript"}))),this.worker=new Worker(Gi)}};Rc.revokeObjectURL=function(){Gi&&(URL.revokeObjectURL(Gi),Gi=null)};const V8=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Wi=null;class p0{constructor(){Wi||(Wi=URL.createObjectURL(new Blob([V8],{type:"application/javascript"}))),this.worker=new Worker(Wi)}}p0.revokeObjectURL=function(){Wi&&(URL.revokeObjectURL(Wi),Wi=null)};let j1=0,ic;class Y8{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Rc;t.addEventListener("message",s=>{t.terminate(),Rc.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){var s;return this._run("loadImageBitmap",[e,(s=t==null?void 0:t.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){ic===void 0&&(ic=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<ic&&(this._createdWorkers++,e=new p0().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:e,arguments:t,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[j1]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:j1++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const D1=new Y8,X8=[".jpeg",".jpg",".png",".webp",".avif"],q8=["image/jpeg","image/png","image/webp","image/avif"];async function K8(i,e){var o;const t=await tt.get().fetch(i);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${t.status} ${t.statusText}`);const s=await t.blob();return((o=e==null?void 0:e.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const m0={name:"loadTextures",id:"texture",extension:{type:me.LoadParser,priority:Pr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return Ki(i,q8)||Qi(i,X8)},async load(i,e,t){var l;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await D1.isImageBitmapSupported()?s=await D1.loadImageBitmap(i,e):s=await K8(i,e):s=await new Promise((u,h)=>{s=tt.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=i,s.complete?u(s):(s.onload=()=>{u(s)},s.onerror=h)});const o=new ii({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((l=e.data)==null?void 0:l.resolution)||Vc(i),...e.data});return Yc(o,t,i)},unload(i){i.destroy(!0)}},Q8=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let sc,oc;function Z8(i,e,t){t===void 0&&!e.startsWith("data:")?i.crossOrigin=e5(e):t!==!1&&(i.crossOrigin=typeof t=="string"?t:"anonymous")}function J8(i){return new Promise((e,t)=>{i.addEventListener("canplaythrough",s),i.addEventListener("error",o),i.load();function s(){l(),e()}function o(u){l(),t(u)}function l(){i.removeEventListener("canplaythrough",s),i.removeEventListener("error",o)}})}function e5(i,e=globalThis.location){if(i.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(i,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function t5(){const i=[],e=[];for(const t of Q8){const s=Ys.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;Xa(s)&&(i.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:i,validVideoMime:e}}const n5={name:"loadVideo",id:"video",extension:{type:me.LoadParser,name:"loadVideo"},test(i){if(!sc||!oc){const{validVideoExtensions:s,validVideoMime:o}=t5();sc=s,oc=o}const e=Ki(i,oc),t=Qi(i,sc);return e||t},async load(i,e,t){var f,p;const s={...Ys.defaultOptions,resolution:((f=e.data)==null?void 0:f.resolution)||Vc(i),alphaMode:((p=e.data)==null?void 0:p.alphaMode)||await vp(),...e.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(m=>{const y=l[m];y!==void 0&&o.setAttribute(m,y)}),s.muted===!0&&(o.muted=!0),Z8(o,i,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(i.startsWith("data:"))h=i.slice(5,i.indexOf(";"));else if(!i.startsWith("blob:")){const m=i.split("?")[0].slice(i.lastIndexOf(".")+1).toLowerCase();h=Ys.MIME_TYPES[m]||`video/${m}`}return u.src=i,h&&(u.type=h),new Promise(m=>{const y=async()=>{const v=new Ys({...s,resource:o});o.removeEventListener("canplay",y),e.data.preload&&await J8(o),m(Yc(v,t,i))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",y),o.appendChild(u)})},unload(i){i.destroy(!0)}},g0={extension:{type:me.ResolveParser,name:"resolveTexture"},test:m0.test,parse:i=>{var e;return{resolution:parseFloat(((e=qi.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:i.split(".").pop(),src:i}}},r5={extension:{type:me.ResolveParser,priority:-2,name:"resolveJson"},test:i=>qi.RETINA_PREFIX.test(i)&&i.endsWith(".json"),parse:g0.parse};class i5{constructor(){this._detections=[],this._initialized=!1,this.resolver=new qi,this.loader=new b8,this.cache=Je,this._backgroundLoader=new g8(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var l,u;if(this._initialized){et("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let h=e.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}const t=((l=e.texturePreference)==null?void 0:l.resolution)??1,s=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:(u=e.texturePreference)==null?void 0:u.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=Na(e),o=Sn(e).map(h=>{if(typeof h!="string"){const f=this.resolver.getAlias(h);return f.some(p=>!this.resolver.hasKey(p))&&this.add(h),Array.isArray(f)?f[0]:f}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,t);return s?u[o[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const o=this.resolver.resolveBundle(e),l={},u=Object.keys(o);let h=0;const f=[],p=()=>{t==null||t(f.reduce((y,v)=>y+v,0)/h)},m=u.map((y,v)=>{const _=o[y],S=Object.values(_),w=[...new Set(S.flat())].reduce((P,T)=>P+(T.progressSize||1),0);return f.push(0),h+=w,this._mapLoadToResolve(_,P=>{f[v]=P*w,p()}).then(P=>{l[y]=P})});return await Promise.all(m),s?l[e[0]]:l}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Je.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=Je.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,t);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const h=o[u.src],f=[u.src];u.alias&&f.push(...u.alias),f.forEach(p=>{l[p]=h}),Je.set(f,h)}),l}async unload(e){this._initialized||await this.init();const t=Sn(e).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=Sn(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{Je.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,o)=>t.indexOf(s)===o),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const Ui=new i5;Mt.handleByList(me.LoadParser,Ui.loader.parsers).handleByList(me.ResolveParser,Ui.resolver.parsers).handleByList(me.CacheParser,Ui.cache.parsers).handleByList(me.DetectionParser,Ui.detections);Mt.add(y8,v8,x8,C8,w8,S8,k8,T8,R8,O8,U8,m0,n5,m8,p8,g0,r5);const O1={loader:me.LoadParser,resolver:me.ResolveParser,cache:me.CacheParser,detection:me.DetectionParser};Mt.handle(me.Asset,i=>{const e=i.ref;Object.entries(O1).filter(([t])=>!!e[t]).forEach(([t,s])=>Mt.add(Object.assign(e[t],{extension:e[t].extension??s})))},i=>{const e=i.ref;Object.keys(O1).filter(t=>!!e[t]).forEach(t=>Mt.remove(e[t]))});class no extends cp{constructor(e){e instanceof un&&(e={context:e});const{context:t,roundPixels:s,...o}=e||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new un,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new no(this._context.clone()):(this._ownedContext=null,new no(this._context))}lineStyle(e,t,s){Me(We,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return e&&(o.width=e),t&&(o.color=t),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(e,t){Me(We,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){Me(We,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==un.defaultStrokeStyle.width||e.color!==un.defaultStrokeStyle.color||e.alpha!==un.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Me(We,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Me(We,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Me(We,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Me(We,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Me(We,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Me(We,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}Mt.add(g2,y2);const Fn={nom:{nomcomplet:"Test Hero"},niveauGlobal:1,classe:{1:{classeId:"fighter"}},pvActuels:12,pvMax:12,CA:16,caracs:{force:{FOR:16},dexterite:{DEX:14,modDEX:2},constitution:{CON:14}}},s5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   width="210mm"
   height="297mm"
   viewBox="0 0 210 297"
   version="1.1"
   id="svg1"
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"
   sodipodi:docname="gentil.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview1"
     pagecolor="#191919"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#bd2727ff"
     inkscape:document-units="mm"
     inkscape:zoom="0.72604517"
     inkscape:cx="395.98087"
     inkscape:cy="561.25985"
     inkscape:window-width="1920"
     inkscape:window-height="1017"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1"
     showgrid="true">
    <inkscape:grid
       id="grid1"
       units="mm"
       originx="0"
       originy="0"
       spacingx="0.99999998"
       spacingy="1"
       empcolor="#0099e5"
       empopacity="0.30196078"
       color="#0099e5"
       opacity="0.14901961"
       empspacing="5"
       enabled="true"
       visible="true" />
  </sodipodi:namedview>
  <defs
     id="defs1" />
  <g
     inkscape:label="Calque 1"
     inkscape:groupmode="layer"
     id="layer1">
    <path
      transform="translate(-5, 5)"
       d="m 69.048457,20.142976 c -0.141111,0.105834 -1.234722,0.282223 -2.434166,0.352778 -2.504723,0.176389 -3.633611,0.740834 -4.445,2.293056 -0.352778,0.599722 -0.9525,1.622778 -1.411111,2.328333 -0.881945,1.340556 -2.046111,4.233334 -2.328334,5.891389 -0.105833,0.564445 -0.599722,2.2225 -1.093611,3.633611 -0.458611,1.446389 -1.093611,4.021667 -1.375833,5.785556 -0.282222,1.763888 -0.740833,3.421944 -1.023056,3.774721 -0.282222,0.3175 -0.599722,0.811389 -0.740833,1.093611 -0.141111,0.282223 0.07056,0.141112 0.458611,-0.352777 0.846667,-1.023056 0.9525,-0.740834 0.211667,0.670277 -0.282222,0.564445 -0.423333,1.093612 -0.282222,1.199445 0.105833,0.105833 -0.176389,0.811389 -0.635,1.516944 -0.740834,1.234722 -0.811389,1.27 -1.128889,0.564445 -0.176389,-0.388056 -0.881945,-0.987778 -1.516945,-1.305278 -1.093611,-0.529167 -1.305277,-0.529167 -2.434166,0.03528 -1.940278,0.917222 -4.233333,3.139722 -5.115278,4.974167 -0.670278,1.411111 -1.27,1.975555 -3.598333,3.457222 -3.033889,1.905 -5.750277,4.797777 -7.161388,7.584722 -0.458612,0.917222 -1.305278,2.116666 -1.869723,2.681111 -1.305277,1.340555 -3.139722,6.0325 -2.575277,6.596944 0.246944,0.246945 1.411111,0.423334 2.892777,0.388056 l 2.434167,-0.03528 -0.176389,1.093611 c -0.105833,0.599722 -0.352778,2.187222 -0.564444,3.563056 -0.176389,1.340555 -0.599723,2.751666 -0.917223,3.069166 -0.423333,0.458611 -0.493888,1.023056 -0.3175,2.257778 0.211667,1.763889 0.705556,2.610555 1.481667,2.610555 0.352778,0 0.423333,0.3175 0.246945,1.093611 -0.105834,0.635 -0.03528,1.199445 0.176388,1.340556 0.246945,0.141111 0.282223,0.987778 0.07056,2.681111 -0.176388,1.375833 -0.211666,2.822222 -0.105833,3.280833 0.246945,1.093611 -0.529167,3.774722 -1.340555,4.515556 -0.388056,0.3175 -0.670278,0.846666 -0.670278,1.199444 0,0.317504 -0.493889,0.740834 -1.234722,1.023054 -1.693334,0.59972 -2.081389,1.44639 -1.799167,4.1275 0.352778,3.35139 -0.282222,6.70278 -1.446389,7.69056 -1.128889,0.98778 -1.234722,2.61055 -0.282222,4.40972 0.3175,0.635 0.635,1.79917 0.705555,2.61056 0.529167,5.53861 0.529167,5.82083 -0.03528,6.0325 -0.3175,0.10583 -0.599722,0.21166 -0.670277,0.21166 -0.03528,0 -0.176389,-0.635 -0.3175,-1.44639 -0.176388,-1.02305 -0.423333,-1.51694 -0.917222,-1.62277 -0.529166,-0.14112 -0.705555,-0.49389 -0.705555,-1.30528 -0.03528,-2.11667 -2.575278,-6.17361 -3.633611,-5.75028 -1.023056,0.38806 -1.093611,2.54 -0.246945,4.86833 0.705556,1.79917 0.740834,2.2225 0.352778,2.96334 -0.246944,0.49389 -0.352778,1.30527 -0.246944,1.905 0.141111,0.70555 0,1.5875 -0.458612,2.57527 -0.388055,0.84667 -0.705555,2.2225 -0.705555,3.06917 0,1.51694 0,1.51694 -0.776111,0.9525 -2.081389,-1.44639 -2.187222,-1.44639 -1.940278,-0.0706 0.105833,0.70556 0.529167,1.72862 0.881945,2.25778 0.846666,1.16417 3.563055,7.51417 4.656666,10.83028 1.305278,3.98639 3.386667,7.83167 5.432778,9.91305 2.786944,2.89278 3.986389,2.46945 5.185833,-1.86972 1.058333,-3.81 0.917222,-5.57389 -0.635,-7.83166 -0.705556,-1.02306 -1.340556,-1.76389 -1.375833,-1.5875 -0.03528,0.17639 -0.176389,0.74083 -0.282223,1.27 -0.3175,1.37583 -0.670277,1.23472 -1.340555,-0.56445 l -0.564444,-1.55222 2.151944,0.17639 c 1.199444,0.0705 3.175,0.28222 4.374444,0.49389 2.434166,0.35278 3.739444,0.0705 4.303889,-1.05834 0.599722,-1.05833 0.458611,-2.08138 -0.3175,-2.8575 -0.881945,-0.88194 -1.305278,-1.94027 -2.010834,-4.7625 -0.246944,-1.16416 -0.846666,-2.75167 -1.305277,-3.52778 -0.705556,-1.16416 -0.811389,-1.69333 -0.564445,-2.99861 0.141111,-0.88194 0.529167,-2.15194 0.881945,-2.82222 1.164166,-2.18722 1.234722,-2.43417 1.234722,-3.52778 0,-1.23472 1.093611,-3.56305 2.116666,-4.58611 0.388056,-0.38805 0.705556,-0.98778 0.705556,-1.34055 0,-0.35278 0.246944,-0.9525 0.529167,-1.37584 0.3175,-0.45861 0.529166,-1.37583 0.458611,-2.11666 -0.03528,-0.74084 0.282222,-2.99862 0.705555,-5.04473 0.423334,-2.04611 0.9525,-4.58611 1.128889,-5.67972 0.246945,-1.19944 0.987778,-2.99861 1.905,-4.550832 0.846667,-1.375834 1.834444,-3.386667 2.187222,-4.445 0.352778,-1.058333 0.776111,-1.905 0.917222,-1.905 0.141112,0 0.529167,0.529167 0.846667,1.128889 0.3175,0.635 1.411111,2.434166 2.363611,3.951111 1.340556,2.046111 1.869722,3.280833 2.046111,4.691942 0.141111,1.05834 0.564445,2.32834 0.917222,2.82222 2.293056,3.24556 2.328334,4.37445 0.352778,7.09084 -0.670278,0.91722 -1.905,2.92805 -2.716389,4.445 -1.552222,2.96333 -1.552222,3.10444 -1.058333,9.03111 0.03528,0.28222 -0.105833,2.64583 -0.3175,5.22111 -0.352778,4.23334 -0.529167,4.97417 -1.658055,7.40834 -1.869723,3.95111 -1.940278,4.19805 -2.293056,7.65527 -0.211667,2.08139 -0.211667,4.09223 0.03528,5.89139 0.352778,2.61056 0.3175,2.92806 -0.917222,7.69056 -1.481667,5.57389 -1.516945,5.32694 1.199444,6.0325 0.881944,0.24694 1.658056,0.70555 1.905,1.12889 0.9525,1.79916 -0.599722,8.5725 -3.457222,14.99305 -1.058334,2.43417 -4.621389,7.16139 -5.185833,6.94972 -0.564445,-0.21166 -1.023056,0.14112 -1.693334,1.37584 -0.529166,0.9525 -1.058333,1.23472 -2.328333,1.34055 -0.246944,0.0353 -0.458611,0.21167 -0.458611,0.38806 0,0.17639 -0.3175,0.74083 -0.670278,1.27 -0.634999,0.88194 -0.634999,1.05833 -0.211666,1.905 0.458611,0.88194 0.352777,1.19944 -1.305278,4.72722 l -1.799166,3.81 -0.07055,5.46806 c -0.07056,7.76111 -0.458612,12.94694 -1.305278,17.85055 l -0.740834,4.30389 -1.552222,0.77611 c -0.846666,0.42333 -1.481666,0.84667 -1.375833,0.9525 0.07056,0.10583 -0.07056,0.81139 -0.352778,1.62278 -0.458611,1.30528 -0.458611,1.51694 0,1.86972 1.093611,0.77611 1.27,2.15195 0.917222,6.42056 -0.211666,2.25777 -0.493888,4.97416 -0.635,5.96194 -0.176388,1.02306 -0.211666,2.01083 -0.105833,2.15195 0.493889,0.74083 9.524999,4.7625 11.429999,5.07999 2.645833,0.45862 9.489722,-0.21166 11.006666,-1.09361 0.917222,-0.49388 1.058334,-0.84666 1.164167,-2.25777 0.07055,-1.19945 -0.105833,-2.01084 -0.599722,-2.82223 -0.776111,-1.27 -6.632222,-7.05555 -8.466667,-8.32555 -1.09361,-0.77611 -1.164165,-0.9525 -0.9525,-2.29306 0.141111,-0.81139 0.529167,-1.69333 0.9525,-1.97555 0.493889,-0.42334 0.776111,-1.19945 1.023056,-2.99861 0.388055,-3.21028 4.7625,-14.78139 8.290277,-21.94278 1.481667,-2.92806 2.822223,-6.17361 2.998611,-7.19667 0.635001,-3.38666 3.598334,-7.3025 6.138334,-8.07861 0.811388,-0.28222 1.552222,-0.81139 1.905,-1.41111 0.493888,-0.88194 0.740833,-0.98778 2.187222,-0.91722 2.081389,0.10583 3.139722,0.70555 6.35,3.56305 1.446388,1.30528 3.069166,2.43417 3.598333,2.54 0.529167,0.10584 1.199444,0.56445 1.516944,1.02306 0.846667,1.30528 3.245556,8.29028 3.527778,10.23055 0.282222,2.04612 1.516944,6.52639 1.940278,6.985 0.141111,0.14112 0.141111,0.74084 0,1.27 -0.176389,0.56445 -0.211667,1.09362 -0.105834,1.19945 0.105834,0.10583 0.03528,0.38805 -0.141111,0.635 -0.529166,0.635 -0.881944,2.99861 -0.529166,3.24555 0.176388,0.10584 0.246944,0.9525 0.176388,1.86973 -0.246944,2.50472 0.493889,7.86694 1.164167,8.60777 0.811389,0.91723 3.280833,1.16417 6.244177,0.67028 4.833056,-0.81139 6.596945,-0.81139 10.583333,-0.0353 2.610559,0.49389 5.185839,0.74084 8.219729,0.74084 3.98639,0 4.445,-0.0706 5.11528,-0.74084 0.56444,-0.56444 0.70555,-0.98777 0.52916,-1.83444 -0.10583,-0.56444 -0.38805,-1.23472 -0.56444,-1.48167 -0.17639,-0.24694 -2.04611,-0.88194 -4.1275,-1.41111 -2.11667,-0.52916 -4.02167,-1.16416 -4.30389,-1.37583 -0.52917,-0.42333 -2.50472,-1.48167 -4.974171,-2.71639 -3.421944,-1.65806 -5.679722,-4.19806 -4.974167,-5.53861 0.246945,-0.42333 0.105834,-1.27 -0.388055,-2.71639 -0.635,-1.905 -0.705556,-2.61056 -0.493889,-7.05556 0.141111,-2.71638 0.3175,-5.43277 0.423333,-5.99722 0.105834,-0.59972 0.3175,-3.38666 0.423334,-6.24416 0.141111,-3.13973 0.423333,-5.36223 0.635,-5.60917 0.599722,-0.56444 1.516944,-0.17639 3.280833,1.44639 1.552222,1.41111 2.504722,1.62278 2.504722,0.52917 0,-0.77612 -1.234722,-3.10445 -1.940278,-3.70417 -1.023055,-0.84667 -1.234722,-1.5875 -0.846666,-2.99861 0.211666,-0.74084 0.599722,-1.5875 0.881944,-1.83445 0.282222,-0.28222 0.493889,-0.81139 0.493889,-1.19944 0,-1.48167 3.139731,-0.59972 8.255001,2.39889 0.84667,0.49389 2.89278,0.59972 3.175,0.17639 0.10584,-0.17639 -1.05833,-1.37584 -2.54,-2.68111 -2.54,-2.29306 -6.84389,-4.79778 -8.255001,-4.79778 -0.3175,0 -0.705556,-0.17639 -0.811389,-0.35278 -0.105834,-0.21167 -0.670278,-0.35278 -1.234723,-0.35278 -0.811389,0 -1.058333,-0.21166 -1.375833,-1.12889 -0.317499,-0.84666 -0.493889,-1.02305 -0.811389,-0.70555 -1.128889,1.12889 -1.199445,0.0353 -0.352778,-4.62139 0.352778,-1.86972 1.128889,-3.06917 1.128889,-1.69333 0,1.5875 0.635,0.35277 0.776111,-1.55223 0.105833,-1.30527 0.423333,-2.29305 0.917222,-2.92805 2.751671,-3.42195 3.245561,-4.72722 3.245561,-8.71361 0,-1.72861 0.17639,-3.03389 0.42333,-3.28084 0.45861,-0.45861 0.49389,-3.56305 0.10584,-10.58333 -0.24695,-4.1275 -0.21167,-4.65667 0.3175,-4.65667 0.59972,0 0.77611,0.56445 1.05833,3.42195 0.24694,2.46944 1.16417,4.1275 3.66889,6.56167 2.18722,2.18722 3.03389,2.2225 1.94028,0.14111 -0.35278,-0.635 -1.02306,-1.905 -1.48167,-2.78695 -0.77611,-1.48166 -0.81139,-1.69333 -0.35278,-2.71639 0.3175,-0.67027 0.74083,-1.09361 1.16417,-1.09361 0.38805,0 1.19944,-0.17639 1.79916,-0.38805 2.01084,-0.74084 10.05417,1.65805 13.22917,3.91583 0.91722,0.635 1.23472,0.70556 2.36361,0.38806 0.74083,-0.21167 1.83444,-0.38806 2.46944,-0.38806 1.5875,0 4.97417,1.12889 6.70278,2.2225 1.34055,0.84667 1.94028,0.98778 5.29167,1.09361 5.78555,0.24695 15.98083,2.25778 19.685,3.91583 0.98777,0.42334 2.8575,0.88195 4.19805,0.98778 1.34056,0.14111 3.10444,0.56445 3.95111,0.9525 1.09361,0.56445 3.73945,1.02306 9.91306,1.76389 9.17222,1.16417 14.9225,1.62278 14.9225,1.30528 0,-0.49389 -3.66889,-2.01084 -10.58334,-4.445 -3.98639,-1.41111 -8.07861,-2.8575 -9.10166,-3.21028 -1.05834,-0.38805 -2.68111,-0.70555 -3.66889,-0.70555 -0.98778,0 -2.68111,-0.35278 -3.91584,-0.84667 -1.23472,-0.45861 -3.35138,-0.91722 -4.83305,-1.05833 -4.55083,-0.35278 -16.05139,-3.59834 -19.93194,-5.60917 -1.12889,-0.59972 -2.08139,-0.74083 -4.93889,-0.77611 -3.73945,0 -6.10306,-0.74084 -7.83167,-2.36361 -0.70556,-0.635 -1.16417,-0.70556 -4.445,-0.67028 -4.65666,0.10583 -11.21833,-1.27 -12.24138,-2.50472 -1.44639,-1.72861 -0.38806,-3.31611 3.31611,-5.00945 1.76389,-0.81139 2.96333,-1.79917 2.61055,-2.18722 -0.10583,-0.0706 -1.55222,0.17639 -3.24555,0.59972 -3.4925,0.88194 -6.49111,2.54 -8.21972,4.51556 -1.37584,1.65805 -2.32834,1.97555 -3.13973,1.05833 -0.49389,-0.56444 -0.52916,-0.84667 -0.21166,-1.5875 0.84666,-1.76389 0.21166,-6.6675 -1.12889,-8.78417 -0.705562,-1.12889 -1.340562,-6.87917 -1.093618,-9.63083 0.246945,-2.2225 0.176389,-2.54 -0.493888,-3.21028 -0.670278,-0.67028 -0.740834,-1.16417 -0.776112,-4.30389 0,-2.46944 -0.246944,-4.23333 -0.705555,-5.67972 -0.352778,-1.12889 -0.740833,-2.892779 -0.881945,-3.915834 -0.141111,-1.023056 -0.493888,-2.328334 -0.776111,-2.892778 -0.282222,-0.599722 -0.846666,-2.469445 -1.199444,-4.162778 -0.599722,-3.033889 -0.599722,-3.139722 0.03528,-3.704166 0.811389,-0.740834 1.622778,-3.316111 1.340555,-4.339167 -0.105833,-0.423333 0.03528,-1.869722 0.282223,-3.210278 0.282222,-1.340555 0.529166,-3.245555 0.529166,-4.233333 0,-1.763889 0,-1.799167 0.705556,-1.164167 0.599722,0.529167 0.811389,0.564445 1.763889,0.176389 1.763894,-0.740833 2.116674,-1.516944 1.587504,-3.4925 -0.49389,-1.905 -1.058338,-3.069166 -1.693338,-3.457222 -1.093611,-0.705555 -1.305278,-2.116666 -0.776111,-4.974166 0.917222,-4.7625 0.599722,-8.149167 -0.846667,-8.748889 -0.3175,-0.105833 -1.904999,-0.3175 -3.563055,-0.458611 l -2.963333,-0.211667 -0.105834,-3.175 C 90.638467,46.918809 90.28569,45.613531 88.945134,43.461587 87.569301,41.309643 86.369846,40.533532 84.464846,40.639365 l -1.552222,0.07056 0.07055,-1.340555 c 0.07056,-1.975556 -0.246939,-3.598334 -1.305273,-6.173612 -0.493889,-1.27 -0.987777,-2.610555 -1.058333,-2.963333 -0.282222,-1.375833 -1.058333,-3.175 -1.834444,-4.233333 -0.458611,-0.599722 -0.811389,-1.27 -0.811389,-1.446389 0,-0.388056 -3.139722,-3.351389 -4.092222,-3.845278 -0.811389,-0.458611 -4.550834,-0.881945 -4.833056,-0.564445 z m 26.35251,79.798332 c -0.282222,0.317502 -0.776111,-0.423333 -0.599722,-0.917222 0.211667,-0.529166 0.246944,-0.493889 0.458611,0.105834 0.141111,0.352777 0.211667,0.740833 0.141111,0.811388 z m -20.249454,68.615272 1.5875,0.74084 0.599722,2.99861 c 1.375833,6.73805 1.164166,11.04194 -0.635,12.73528 -0.458611,0.42333 -0.846667,1.02305 -0.846667,1.30527 0,0.28223 -0.3175,0.91723 -0.705555,1.48167 -0.811389,1.16417 -1.023056,4.02167 -0.388056,5.57389 0.246945,0.56444 0.388056,1.79917 0.3175,2.75167 l -0.105833,1.72861 -2.116667,-3.13972 c -1.834444,-2.75167 -5.609166,-6.56167 -6.491111,-6.56167 -0.141111,0 -0.458611,-0.38806 -0.670278,-0.88195 -0.246944,-0.49388 -0.811388,-1.05833 -1.305277,-1.23472 -0.493889,-0.17639 -0.917223,-0.56444 -0.917223,-0.88194 -0.211666,-2.64584 -0.176388,-2.82222 1.128889,-4.23334 2.116667,-2.29305 7.373056,-11.71222 7.373056,-13.22916 0,-0.45861 0.881944,-0.24695 3.175,0.84666 z"
       id="path3"
       style="fill:currentColor;stroke:none;stroke-width:0.0352778;fill-opacity:1" />
  </g>
</svg>
`,o5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<svg\r
   width="2342"\r
   height="3750"\r
   viewBox="0 0 2342 3750"\r
   version="1.1"\r
   id="svg1"\r
   sodipodi:docname="mechant.svg"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <defs\r
     id="defs1" />\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#ffffff"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#d1d1d1"\r
     inkscape:zoom="0.21733333"\r
     inkscape:cx="1171.0123"\r
     inkscape:cy="1875"\r
     inkscape:window-width="1920"\r
     inkscape:window-height="1017"\r
     inkscape:window-x="-"\r
     inkscape:window-y="-8"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="svg1" />\r
  <path\r
     fill-rule="nonzero"\r
     fill="#000000"\r
     fill-opacity="1"\r
     d="m 1179.4102,3716.9922 c -17.3907,-74.8555 -35.9414,-120.9844 -69.0313,-171.7774 -30.6094,-46.9726 -82.0898,-92.3789 -115.62499,-102 -9.15235,-2.625 -10.1875,-2.039 -14.46875,8.211 -2.53907,6.0703 -9.29688,27.6328 -15.01954,47.9101 -11.40625,40.4102 -25.3125,77.6563 -29,77.6563 -1.29296,0 -4.19531,-12.1133 -6.44921,-26.918 -6.85938,-45.0625 -25.47266,-111.832 -39.1875,-140.5703 -15.55469,-32.5898 -37.56641,-58.125 -60.26954,-69.918 -13.26171,-6.8906 -21.32421,-8.6875 -39.5039,-8.7929 -26.72266,-0.1563 -41.25781,5.8086 -60.45703,24.8164 -14.30469,14.164 -16.1836,14.9531 -16.28516,6.8594 -0.14062,-11.0079 -12.54687,-33.0313 -25.9375,-46.0235 -52.17578,-50.6328 -129.63672,-52.4961 -178.97266,-4.3008 -10.42578,10.1836 -21.48828,22.1836 -24.58203,26.6719 -5.5625,8.0625 -5.60937,7.9258 -4.17187,-11.4219 0.92187,-12.4336 11.65625,-51.1172 29.42578,-106.0351 62.49609,-193.1406 112.14844,-389.7969 155.69141,-616.6485 18.38671,-95.7812 35.44921,-222.3007 35.53125,-263.4609 l 0.0391,-17.1289 h -13.9961 c -32.30859,0 -86.14843,-21.6016 -135.19531,-54.2305 C 451.2891,2202.9102 384.21879,2073.8789 376.1602,1931.6914 l -2.07813,-36.6133 -92.28125,-185.9687 C 231.04687,1606.8203 167.20703,1474.6797 139.93359,1415.4609 76.816406,1278.4102 44.253906,1214.0586 17.546875,1173.6094 1.621094,1149.4805 -2.457031,1141.1289 1.300781,1140.3281 c 9.125,-1.9375 67.613281,12.9532 128.253909,32.6524 63.97656,20.789 114.91015,41.039 149.80859,59.5781 11.91406,6.3203 22.19141,10.9727 22.83203,10.332 0.64453,-0.6406 -6.85156,-34.75 -16.65625,-75.8008 -39.96484,-167.3398 -42.8164,-188.92964 -42.79297,-324.23043 0.0117,-82.66015 1.15625,-109.98046 5.83985,-139.60937 5.70703,-36.10156 23.48047,-112.28125 28.19531,-120.85156 2.13672,-3.87891 46.05469,69.26172 73.13281,121.80078 4.625,8.97265 11.3086,19.98047 14.85938,24.46094 l 6.44922,8.14843 7.98046,-17.9375 C 383.59375,709.01172 394.86328,683.32031 404.25,661.78125 442.76172,573.42969 496.08984,474 550.375,389.35156 c 9.78125,-15.26172 42.82031,-62.97265 73.42187,-106.04297 92.47657,-130.14843 130.32813,-180.25 132.13282,-174.89843 0.52734,1.57031 -3.46485,20.37109 -8.8711,41.78906 C 721.60937,251 718.21094,332 737.92187,367.83984 c 6.26954,11.39844 9.09766,13.5 19.33985,14.35157 15.53515,1.29687 20.58203,-1.5 82.62109,-45.72266 88.19531,-62.85938 122.33594,-82.6875 262.98829,-152.70703 50.1602,-24.97266 103.6289,-53.5 118.8008,-63.40234 40.8789,-26.64063 78.0976,-63.898442 97.6562,-97.757818 18.8321,-32.570312 19.3516,-32.203124 22.7032,16.007813 4.6406,66.839845 14.1093,105.718745 36.3984,149.460935 39.6289,77.75781 131.8516,149.3711 209.5,162.69141 26.8906,4.60937 41.2109,1.53906 61.5508,-13.20313 14.6797,-10.6289 35.6992,-47.6875 45.5781,-80.34765 10.5898,-35.05078 6.3516,-154.75 -7.5391,-212.890628 -0.9687,-4.039062 -0.3476,-7.339843 1.3711,-7.339843 5.0391,0 37.711,72.480471 57.3477,127.238281 9.9805,27.82031 29.4219,85.8125 43.2031,128.88281 29.3477,91.63672 46.9688,137.10938 72.8789,188.08985 19.2891,37.9375 83.0508,148.6289 89,154.48828 2.2188,2.1914 5.0313,0.57031 8.5195,-4.89844 19.4883,-30.47266 67.8711,-61.78125 106.2383,-68.76172 30.1407,-5.46875 31.6211,-2.66016 10.6211,20.03125 -22.9492,24.77734 -41.9375,63.57813 -49.4179,100.9375 -6.1602,30.76172 -5.543,104.87109 1.8984,228.39063 6.1016,101.17189 1.6406,283.24219 -8.4883,346.44139 l -1.9297,12.0078 35.5469,-20.2773 c 63.1797,-36.0625 178.2109,-81.5899 255.332,-101.082 17.0508,-4.3086 31.5782,-7.3204 32.3008,-6.6875 0.7188,0.6289 -6.7226,11.8085 -16.5312,24.8476 -42.1719,56.0508 -67.0704,92.3399 -95.8086,139.6328 -20.2422,33.3086 -84.3907,159.8594 -122.0118,240.6875 -34.7109,74.5703 -100.9687,208.5625 -127.4492,257.7422 l -23.3711,43.3789 8.5899,35.9297 c 16.332,68.2813 18.1992,120.6406 6.5,181.9883 -25.9492,136.0625 -111.0977,238.8125 -220.3477,265.8828 -25.1523,6.2305 -61.0625,6.8594 -84.3633,1.4805 -9.0976,-2.1016 -17.3789,-2.9805 -18.3984,-1.961 -4.8398,4.8282 8.7109,166.6875 23.0195,275.0703 17.5508,132.9375 27.0586,180.9141 70.461,355.5157 28.9687,116.5781 29.8789,119.8476 68.6992,247.1328 18.5117,60.7148 32.0703,110.7187 31.4101,115.8242 l -1.1796,8.9883 -4.2696,-8.5586 c -7.6523,-15.3281 -27.9804,-24.0664 -55.9804,-24.0664 -21.9102,0 -27.3789,1.3554 -49.5,12.2851 -29.7813,14.7227 -53.0586,38.4688 -58.8204,60.0157 -2.0898,7.7851 -4.5898,14.0351 -5.5585,13.8867 -0.9727,-0.1485 -9.1524,-9.2617 -18.1797,-20.2461 -20.6914,-25.1797 -39.4102,-35.2813 -69.2227,-37.336 -60.5976,-4.1835 -103.5703,40.6055 -123.25,128.4571 -9.0703,40.4883 -17.8281,95.0742 -17.8594,111.2929 -0.01,5.8321 -1.3086,10.6016 -2.8906,10.6016 -4.5898,0 -24.7695,-44.2031 -37.9805,-83.1992 -6.6875,-19.7383 -14.9375,-41.3984 -18.3476,-48.1367 l -6.1992,-12.2461 -11.3125,4.7226 c -43.5196,18.1836 -98.4805,81.2813 -124.461,142.8907 -14.9687,35.4882 -28.9883,82.4218 -37.3086,124.8437 -3.8711,19.7422 -8.1406,37.9609 -9.5,40.4883 -1.4882,2.8008 -5.8398,-9.9649 -11.1093,-32.625 z m 252.4492,-526.6289 c 3.8906,-143.336 6.4297,-182.332 19.8515,-305.0625 18.1993,-166.4805 34.3594,-261.8906 58.8282,-347.4727 14.3515,-50.1875 37.332,-110.7578 52.6015,-138.6679 5.3985,-9.8711 7.5391,-15.7383 4.7696,-13.0508 -6.1797,6.0117 -51.3204,90.9023 -63.0313,118.5195 -56.9883,134.5508 -90.5781,340.2422 -97.3281,596.0117 -3.1602,119.4805 5.8008,284.1328 17.1094,314.8203 1.3281,3.6055 2.7382,-17.6718 3.1289,-47.2812 0.3906,-29.6094 2.2304,-109.625 4.0703,-177.8164 z m -476.23831,206.4961 c 0,-2.168 2.36719,-23.0938 5.25782,-46.4922 4.29687,-34.7774 4.93359,-63.4024 3.49218,-156.7422 -1.72656,-111.3477 -5.07812,-159.8398 -20.32031,-293.6406 -22.0625,-193.7344 -77.27344,-378.336 -148.32812,-495.9727 -9.19532,-15.2304 -17.26172,-27.6914 -17.92188,-27.6914 -0.66016,0 3.71484,10.6485 9.72266,23.6602 36.0039,77.9804 83.30859,259.0898 109.29297,418.4375 28.6875,175.9179 46.22265,350.1601 50.98046,506.5312 1.26563,41.7227 3.54688,75.8594 5.06641,75.8594 1.51563,0 2.75781,-1.7773 2.75781,-3.9492 z m 707.76951,-177.1328 c -3.2617,-23.3282 -9.0117,-67.375 -12.789,-97.8789 -12.5821,-101.6602 -23.0625,-175.3789 -37.543,-264.2774 -7.8984,-48.4531 -16.0703,-100.207 -18.168,-115.0117 -9.4101,-66.6992 -7.3203,-3.0469 3.7891,115.0117 8.3789,88.9766 17.1406,155.0156 30.7617,231.7617 16.3399,92.086 35.4883,177.8164 38.8594,173.9766 0.5586,-0.6406 -1.6406,-20.2539 -4.9102,-43.582 z m -949.50779,-83.1953 c 16.32422,-93.6016 27.94922,-209.0079 31.05078,-308.3243 1.99219,-63.6757 -0.17187,-59.7031 -12.4375,22.836 -11.72656,78.9179 -28.77734,273.2695 -27.84375,317.375 0.34766,16.3008 1.54688,12.1523 9.23047,-31.8867 z m 514.98829,-8.211 c 22.2187,-19.0234 25.4883,-43.332 8.8008,-65.5586 -16.1133,-21.4648 -45.2617,-26.3398 -66.6133,-11.1367 -38.3867,27.3398 -18.0898,88.168 29.4414,88.168 12.3984,0 17.2617,-1.9649 28.3711,-11.4727 z m -13.7617,-365.2578 c 18.5625,-10.875 33.1406,-28.2422 45.1797,-53.793 8.6718,-18.3906 10.0625,-24.9882 9.9922,-47.4609 -0.1016,-30.0078 -6.9805,-48.8867 -26.5196,-72.7383 -42.4531,-51.8008 -123.2617,-33.3008 -142.8711,32.6914 -6.3203,21.2891 -6.3906,61.8086 -0.1523,82.8281 16.9101,56.9336 70.3711,84.2618 114.3711,58.4727 z m 110.8203,-103.7031 c 13.6289,-29.9688 22.25,-69.7578 22.4609,-103.5899 0.1602,-26.8281 -0.9687,-33.4804 -8.3906,-49.5078 -18.2109,-39.3125 -52.2109,-64.4336 -90.9414,-67.2031 -21.3672,-1.5273 -22.9492,-1.0977 -49.7695,13.5195 -34.418,18.7617 -47.1289,19.6836 -67.5703,4.8711 -45.0391,-32.6289 -88.5391,-30.6875 -124.0782,5.5196 -7.82419,7.9726 -15.46873,14.5 -16.98826,14.5 -3.83984,0 -17.79687,-31.668 -20.48047,-46.4688 -2.41796,-13.3203 0.16016,-28.5703 4.82422,-28.5703 1.61328,0 6.10938,9.5391 9.99219,21.1992 3.87891,11.6719 7.77344,21.2109 8.65234,21.2109 0.87891,0 8.46878,-5.789 16.85938,-12.8789 21.6719,-18.2617 43.0195,-26.9296 66.3906,-26.9296 16.3203,0 24.3086,2.3906 51.0313,15.1992 l 31.6875,15.1992 24.4297,-10.4688 c 55.5898,-23.8007 110.25,-13.0898 153.3711,30.0274 16.539,16.543 32.2812,44.8125 35.9101,64.4726 1.8594,10.0704 2.5899,10.8594 4.8516,5.3204 30.8398,-75.6719 66.789,-146.0704 97.039,-190.0313 23.0274,-33.4492 56.0079,-63.6211 79.6172,-72.8398 17.2735,-6.7383 24.9414,-7.4883 81.0625,-7.9297 66.7188,-0.5196 81.5196,-2.8907 114.4492,-18.2696 44.629,-20.8515 80.8985,-57.6914 105.6993,-107.3515 26.0507,-52.1797 34.0898,-90.3711 34,-161.5 -0.078,-57.7891 -3.25,-84.5899 -19.6993,-166.3985 -21.1679,-105.3515 -21.4609,-171.0312 -1.289,-290.3593 19.039,-112.6211 19.1992,-140.1211 1.2578,-213.6133 -25.0586,-102.6367 -62.8984,-173.5195 -126.4375,-236.8399 -57.4922,-57.289 -123.7109,-96.88668 -205.8594,-123.07809 C 1489.1992,921 1462.5703,916.85156 1422.0781,918.5 c -38.1992,1.57031 -54.3086,7.64062 -80.7578,30.46094 -25.0586,21.61718 -48.6406,78.78906 -76.5586,185.61716 l -7.6015,29.0703 -13.4297,-22.5898 c -30.0899,-50.6602 -95.6211,-94.6602 -190.2305,-127.7383 -85.77734,-29.99999 -150.83984,-40.78905 -244.69922,-40.62108 -76.19531,0.15234 -114.875,5.90234 -168.39062,25.01953 C 568,1023.6016 519.32422,1062.7109 494.09375,1115.3008 c -26.625,55.4805 -32.33984,108.2773 -29.84375,275.6875 1.03125,69.0898 1.22656,124.1523 0.43359,122.3515 -1.96875,-4.4609 -23.82422,-162.3203 -27.78125,-200.6484 -4.76953,-46.2617 -4.02734,-122.2812 1.50782,-154.0117 5.64453,-32.3594 24.76562,-89.2305 37.05468,-110.1992 11.125,-18.9805 42.41407,-56.30081 60.10157,-71.67191 56.8164,-49.38672 122.34375,-72.59765 223.70312,-79.23828 48.76953,-3.19922 56.28906,-4.39844 54.91016,-8.80859 -0.87891,-2.82031 -8.45703,-21.89063 -16.84375,-42.39063 -16.83985,-41.16015 -28.78516,-89.58984 -34.03516,-137.97265 -4.05859,-37.38672 -4.15625,-96.07813 -0.17578,-105.33985 2.27344,-5.29687 2.84766,-4.29687 3.03516,5.26172 0.32812,16.98828 18.11718,113.19141 27.84375,150.60938 13.96875,53.71093 46.52343,139.12109 53.20312,139.55078 1.30859,0.0898 17.79688,2.10937 36.63672,4.5 18.84375,2.3789 34.63672,4.00781 35.10156,3.62109 0.46485,-0.39062 -3.46875,-11.17187 -8.73828,-23.96094 -19.42969,-47.10937 -42.05859,-133.53906 -50.56641,-193.12109 -9.62109,-67.39062 -15.23828,-183.39844 -9.0664,-187.21094 1.4375,-0.88672 6.70312,25.8125 11.69922,59.35157 23.42968,157.30859 33.05078,203.39843 59.07422,283.01171 22.79296,69.73829 15.39062,61.48829 71.80859,80.06641 68.50395,22.57031 126.62505,52.65234 179.18355,92.76172 15.2188,11.6211 29,21.1211 30.6094,21.1211 1.6602,0 1.8711,-6.7109 0.4805,-15.5 -1.3399,-8.5195 -4.1289,-42.66016 -6.1992,-75.85157 -4.211,-67.67969 -13.3907,-162.50781 -23.0196,-237.94922 -3.5312,-27.6914 -5.8125,-50.96094 -5.0625,-51.71094 2.6329,-2.6289 21.5235,63.10157 27.9414,97.16016 10.8399,57.55078 13.3516,89.08203 15.2188,190.87109 1.582,86.71098 2.4922,99.51958 8.0195,112.32028 3.5235,8.1485 7.4102,13.1289 8.9102,11.418 1.4726,-1.6601 6.0625,-16.2383 10.1914,-32.3906 8.3789,-32.7578 21.4922,-68.63674 43.7187,-119.67971 23.7618,-54.58984 26.293,-68.78906 26.3008,-147.85937 0,-72.57813 -3.4883,-115.6875 -16.6289,-205.55078 -8.9492,-61.12891 -38.0312,-207.4375 -51.8906,-261.00782 -0.9414,-3.62109 0.7617,-2.21093 3.8008,3.16797 27.3593,48.26172 59,171.13282 77.75,301.89063 16.039,111.92969 17.7187,172.16015 6.4609,231.65234 -2.5508,13.45703 -4.6328,24.53906 -4.6328,24.62891 0,0.0781 10.9297,-5.17969 24.293,-11.69922 28.3984,-13.85156 65.2773,-22.72266 94.457,-22.72266 48,0 110.8711,16.92188 167.3633,45.05078 107.2695,53.40235 184.0195,129.41013 239.457,237.17193 23.1524,45 22.8399,41.4101 -4.0781,-47.3125 -30.4492,-100.32818 -36.75,-134.62896 -36.5625,-199.01958 0.1133,-39.21094 1.5117,-57.82031 5.1211,-68.50781 l 4.9609,-14.67188 2.2305,26.08984 c 6.1992,72.40235 17.6484,138.17969 34.539,198.40233 19.6016,69.8867 42.5704,175.5899 48.879,224.8672 3.621,28.2422 6.9531,74.7422 7.4101,103.3399 0.4609,28.6093 1.8399,50.2304 3.0703,48.0507 3.5391,-6.3007 21.5899,-120.7187 25.5508,-161.9414 5.9102,-61.6679 7.8984,-226.61716 3.4492,-287.11716 -7.3398,-99.88282 -29.6797,-190.25 -63.3789,-256.3711 l -14.832,-29.10937 -0.2188,22.83984 c -0.3007,31.21094 -5.9492,82.60938 -9.8007,89.21094 -2.2774,3.89062 -3.1875,-0.53125 -3.2696,-15.80078 -0.2773,-54.83985 -15.8906,-108.83985 -55.6484,-192.5 -28.582,-60.14063 -49.2813,-109.46875 -60.2617,-143.55078 -3.1797,-9.8711 -6.2383,-18.48828 -6.8086,-19.14844 -0.5703,-0.67188 -7.3516,4.20703 -15.0586,10.83984 -17.2422,14.8086 -53.8321,32.5586 -76.9922,37.34766 -24.9688,5.17187 -69.1797,4.40234 -95.8594,-1.66797 -44.8008,-10.19141 -83.2305,-29.62109 -128.289,-64.87109 -62.4219,-48.83985 -93.2305,-93.89063 -108.1211,-158.08985 -2.7305,-11.73828 -5.4883,-21.89062 -6.1485,-22.55078 -0.6523,-0.64844 -13.3906,5.44141 -28.2929,13.53906 -14.8985,8.10157 -59.3985,28.65235 -98.879,45.66016 -174.10152,75.03125 -254.00386,120.72266 -363.22261,207.74219 -27.48047,21.89844 -55.1836,41.98828 -61.56641,44.66015 -29.54687,12.33985 -66.04687,-8.82031 -87.19531,-50.55078 -8.75391,-17.26953 -18.125,-57.89062 -18.33985,-79.48047 l -0.13671,-14.00781 -7.89063,22.83985 c -17.38281,50.32031 -21.99219,78.25 -21.80859,132.13671 0.35937,104.04297 24.70312,220.21094 67.28906,321.10157 18.46875,43.76172 18.64453,44.32031 13.90625,44.32031 -4.48047,0 -25.25391,-32.60938 -41.46875,-65.08984 -23.32422,-46.73047 -51.96094,-131.92969 -66.39844,-197.55079 -7.16797,-32.58984 -12.86328,-95 -10.41406,-114.17968 l 2.08203,-16.32813 -13.63281,22.83985 c -31.75391,53.17968 -63.24219,126.92968 -97.83594,229.16015 -26.28906,77.66797 -34.85547,96.83985 -50.46484,112.91797 -14.48438,14.91016 -27.87891,15.98047 -41.14063,3.26953 l -9.02344,-8.64844 1.48047,11.09766 c 0.81641,6.10156 3.76953,34.58203 6.5625,63.29297 2.79297,28.71875 9.60938,82.30855 15.14844,119.08985 9.47266,62.8789 10.16406,73.918 11.5625,184.3398 0.82031,64.6094 0.75781,116.7305 -0.13281,115.8282 -1.8711,-1.8789 -9.66016,-66.4805 -17.10938,-141.9297 C 367.98047,1046.4102 353.51953,961.58984 326.375,865.69922 317.48437,834.30078 308.64844,802 306.74219,793.92187 c -5.32813,-22.52343 -1.75,137.27735 4.45703,199.01954 6.73047,66.99999 18.66406,146.99999 30.90625,207.17969 11.53125,56.6875 11.94922,58.207 46.29687,167.8281 58.89063,187.9727 70.33594,263.5508 66.24219,437.4102 -1.89844,80.4492 -1.42969,94.2695 4.52344,133.7617 17.55078,116.418 61.64453,200.2383 134.25781,255.2187 45.15234,34.1915 91.67969,50.8711 151.75391,54.4219 49.69922,2.9297 58.85156,6.5196 89.80078,35.168 21.3789,19.8008 68.35547,80.6797 107.24609,138.9805 35.01563,52.5 72.19534,128.8711 92.39454,189.7812 l 17.25,52.0391 1.9375,-28.1211 c 1.4531,-21.0391 4.1211,-32.5899 10.6406,-45.9102 22.8399,-46.6679 83.3594,-77.1679 134.5508,-67.8086 54.8984,10.0313 93.3086,47.8985 105.3203,103.8399 8.9883,41.8789 10.9414,49.7578 12.3399,49.7578 0.8086,0 4.9804,-7.707 9.2695,-17.1289 z m -159.8594,-285.9375 c -29,-7.5508 -63.1211,-34.8516 -80.9414,-64.7617 -8.3594,-14.0196 -11.707,-17.1016 -16.9375,-15.6094 -3.5898,1.0195 -23.7812,3.5195 -44.8711,5.539 -21.082,2.0313 -38.33202,4.9297 -38.33202,6.4493 0,7.6406 -7.60937,1.1523 -13.01953,-11.0977 -23.05078,-52.1719 2.92187,-130.7226 50.54295,-152.8516 18.8594,-8.7617 33.6602,-7.8398 51.0469,3.1915 24.3633,15.4375 35.1211,39.8789 41.832,95.0078 1.8594,15.25 5.6211,34.3398 8.3477,42.4218 6.3515,18.75 24.8828,44.0586 38.3711,52.3907 17.582,10.8593 24.1211,11.1484 38.332,1.75 25.8477,-17.1016 42.2969,-49.3321 48.6172,-95.2032 4.793,-34.75 11.6328,-54.1992 25.4297,-72.2773 l 11.5508,-15.1211 -8.3985,-7.2187 c -16.9101,-14.543 -1.1601,-14.9415 32.7305,-0.8399 41.1484,17.1367 59.3906,41.7969 68.1992,92.2383 5.211,29.7891 1.8594,69.6601 -7.3594,87.4609 -5.0312,9.7383 -5.6992,10.0782 -8.1914,4.0977 -1.5,-3.5664 -5.6211,-13.4492 -9.1601,-21.9375 l -6.4297,-15.4414 -15.6406,6.9219 c -15.9883,7.0781 -45.8203,9.75 -58.1602,5.1992 -5.75,-2.1094 -7.2187,-0.4492 -11.0703,12.5898 -6.1602,20.8711 -22.0469,40.7305 -39.418,49.2578 -16.5,8.1016 -42.4023,11.6602 -57.0703,7.8438 z m 158.2383,-113.9922 c 23.1133,-16.668 24.582,-48.5195 3.2227,-69.8906 -16.211,-16.1993 -26.4297,-16.2188 -41.6524,-0.09 -19.6992,20.8906 -26.3789,49.5 -15.2578,65.3711 9.8594,14.0899 37.2891,16.4414 53.6875,4.6094 z m -255.8789,1.1797 c 8.5508,-3.5781 13.1406,-8.6094 18.1406,-19.9102 7.4688,-16.8789 6.4805,-30.4375 -3.6601,-50.1992 -17.2813,-33.6992 -45.5586,-37.0781 -64.9688,-7.7812 -17.1211,25.8515 -16.2812,46.3203 2.6484,64.4531 7.1993,6.8984 26.3399,16.6562 35.4688,18.0781 0.5,0.078 6.0703,-2.0117 12.3711,-4.6406 z m -385.56251,-65.1289 c -22.03125,-5 -47.78907,-17.0391 -69.1836,-32.3399 -17.65234,-12.6211 -45.46875,-49.0195 -60.24609,-78.832 -17.97656,-36.2695 -17.69922,-41.1367 0.93359,-16.3086 48.14453,64.1406 95.76953,97.1406 167.28125,115.8906 18.02735,4.7188 27.52735,8.6602 25.58594,10.5977 -5.19141,5.1914 -43.3125,5.7812 -64.37109,0.9922 z m 926.86331,-3.4024 c -37.211,-8.0976 -88.6914,-33.207 -105.9492,-51.6797 -5.2305,-5.5976 -8.9727,-10.707 -8.3204,-11.3593 0.6485,-0.6485 14.1602,3.2226 30.0196,8.6015 66.8593,22.6602 132.289,27.9805 175.6679,14.3086 41.6016,-13.1094 92.711,-47.6289 120.6914,-81.5078 13.4493,-16.2812 15.8204,-12.6211 5.3204,8.1797 -44.0704,87.3086 -130.4805,132.3984 -217.4297,113.457 z m -395.0196,-32.7187 c 5.2696,-20.5313 8.2383,-114.668 4.8399,-153.7305 -3.6719,-42.0898 -2.0195,-105.2695 2.9805,-114.1992 1.8085,-3.2383 6.1484,5.9609 13.5703,28.8086 6,18.4609 13.3398,39.3203 16.3203,46.3633 l 5.4062,12.789 7.3711,-11.9218 c 18.8906,-30.5586 127.1602,-124.4883 232.0313,-201.2969 167.7578,-122.8633 214.2695,-150.0508 256.6797,-150.0508 22.6914,0 33.6992,9.3789 33.6992,28.7187 0,17.2813 -12.3008,33.4102 -44.0508,57.7383 -14.0469,10.7735 -30.8086,24.4922 -37.2383,30.5117 -11.1289,10.3907 -11.1914,10.6016 -1.5,4.1407 24.6914,-16.4297 93.0586,-49.3321 102.5078,-49.3321 15.8516,0 10.9922,9.3829 -11.5781,22.3516 -124.8906,71.7813 -165.8711,100.8984 -235.0508,167.0313 -24.0976,23.039 -53.5586,48.8398 -65.4687,57.3398 l -21.6524,15.4492 14.25,4.1992 c 26.711,7.8907 61.711,11.8789 88.2305,10.0586 67.9727,-4.6562 113.3828,-51.289 135.0117,-138.6562 4.1602,-16.7813 9.3086,-32.6133 11.4414,-35.1914 3.9492,-4.7617 35.1172,-15.5117 56.7188,-19.5586 l 11.8984,-2.2305 -1.9375,35.457 c -4.4805,82.4414 -14.3398,131.7618 -34.8125,174.1329 -45.7305,94.6601 -168.3984,138.3593 -277.6992,98.9296 -42.5,-15.332 -90.9688,-54.0898 -113.1797,-90.5312 -6.9883,-11.4688 -8.1602,-12.1914 -11.2617,-6.8984 -26.3164,44.8281 -66.0664,65.5468 -101.8985,53.1093 l -13.5898,-4.7304 0.4883,42.7617 c 0.5312,46.457 -4.6875,72.5078 -17.4883,87.2265 -6,6.9024 -6.5391,7.0313 -5.0391,1.211 z M 1629.5,2047.7383 c 14.4297,-5.1289 33.1094,-13.3399 41.5,-18.2578 19.5117,-11.4414 51.1602,-40.8086 59.2109,-54.9492 5.2696,-9.2696 4.0977,-8.5625 -7.6992,4.6484 -16.4023,18.3789 -46.2109,40.1406 -73.5703,53.7305 -26.3828,13.1093 -37.6016,16.4609 -73.6719,22.0312 l -30.7304,4.7383 29.3593,-1.3086 c 21.461,-0.9609 36.4297,-3.8203 55.6016,-10.6328 z m -896.38281,28.293 c -45.44141,-11.1719 -85.6875,-31.5196 -118.67969,-60 -33.39453,-28.8399 -64.13672,-85.75 -77.66016,-143.793 -6.39843,-27.457 -18.75781,-103.457 -17.09375,-105.1172 2.60938,-2.6094 49.9961,10 59.69532,15.8789 10.66015,6.4688 11.28515,7.7695 28.79296,59.8711 11.84766,35.2695 24.22657,56.1289 44.92188,75.6992 45.03516,42.5899 113.66797,55.7695 180.57031,34.6797 l 17.51953,-5.5195 -16.6914,-9.1289 c -21.45313,-11.7305 -38.53125,-25.7618 -82.77735,-68.0118 -59.21875,-56.5585 -87.95703,-76.1406 -191.6914,-130.6289 -31.85157,-16.7421 -57.91407,-31.6601 -57.91407,-33.1718 0,-1.5078 3.64454,-4.1289 8.10157,-5.8203 11.37109,-4.3282 33.42968,3.3007 85.69922,29.621 23.77734,11.9688 43.23046,21.25 43.23046,20.6094 0,-0.6406 -20.92187,-14.9297 -46.49218,-31.75 -48.83594,-32.1406 -58.57422,-40.5195 -64.14063,-55.2109 -4.17578,-11.0195 -0.77344,-20.8164 11.04688,-31.8086 7.96093,-7.3984 11.40625,-8.1602 37.05078,-8.1602 27.66797,0 29.08984,0.4024 65.80078,18.211 41.65234,20.2109 87.77734,48.4101 182.71094,111.7109 117.4414,78.3203 193.72261,143.1367 237.75391,202.0391 6.3594,8.5078 12.6484,14.3789 13.9687,13.0508 1.3204,-1.3399 7.4805,-17.5821 13.6915,-36.0899 6.1992,-18.5195 12,-34.3906 12.8789,-35.2695 3.8593,-3.8633 5.5898,45.0976 2.3711,67.2969 -5.6602,39.121 -25.5508,61.9609 -53.961,61.9804 -18.6719,0.02 -33.9609,-9.3906 -48.2305,-29.6679 -6.81636,-9.6915 -13.42183,-17.8516 -14.67964,-18.1329 -1.26172,-0.2773 -9.63282,8.0899 -18.60547,18.6016 -29.4961,34.5313 -90.2461,70.5 -135.14844,80.0195 -29.51172,6.2618 -71.875,5.4297 -102.03906,-1.9882 z m 101.98047,-32.9024 c 23.76562,-5.9805 58.53515,-20.0781 58.53515,-23.75 0,-0.6484 -8.82031,2.3711 -19.60156,6.7305 -10.78125,4.3515 -30.85156,10.789 -44.59766,14.3008 -23.10937,5.9101 -32.80468,9.6406 -25.05859,9.6406 1.75,0 15.57812,-3.1094 30.72266,-6.9219 z M 1060.0313,1744.5508 C 999.94531,1685.6406 863.01172,1611.5586 626.08984,1509.7891 l -17.9414,-7.711 13.50781,-0.078 c 43.24219,-0.25 165.47266,47.5 279.54297,109.1914 76.83984,41.5586 139.81248,86.8477 164.99218,118.668 9.5899,12.1211 21.4492,36.6914 17.3281,35.9101 -1.2578,-0.2382 -11.8281,-9.789 -23.4882,-21.2187 z m 159.9375,-3.2813 c 0.2109,-35.8906 25.6015,-61.6797 92.8007,-94.2382 138.8203,-67.25 229.6524,-108.0704 272.2188,-122.3321 34.3125,-11.5 46.6328,-12.7187 28.0117,-2.789 -7.1406,3.8203 -33.5508,18.7695 -58.6797,33.2187 -65.8789,37.9024 -101.832,57.1094 -182.6992,97.6406 -84.543,42.3516 -116.9023,62.3594 -136.9922,84.6993 l -14.7305,16.3906 z m -37.5899,-133.4297 -9.7891,-4.4804 14.9102,-0.1485 c 32.9805,-0.3203 66.8398,-17.4101 106.6289,-53.8125 23.25,-21.2773 27.6211,-17.4101 9,7.9532 -31.1601,42.4375 -87.168,65.8672 -120.75,50.4882 z M 1124.4219,1479 c -18.8633,-4.75 -60.6602,-27.5703 -57.0821,-31.1484 0.6407,-0.6407 10.629,2.707 22.211,7.4375 29.9609,12.2304 72.0078,12.0625 109.1406,-0.461 14.3594,-4.8281 29.5391,-11.0195 33.7305,-13.7383 10.957,-7.1015 12.9375,-2.5507 4.9297,11.3086 -11.1602,19.293 -30.8399,27.4922 -68.961,28.6914 -17.4297,0.5508 -37.2187,-0.3906 -43.9687,-2.0898 z M 432.74609,1028.1016 c 1.48047,-42.71098 8.55469,-119.91019 14.42578,-157.51176 l 4.07813,-26.10156 2.34766,14.69141 c 4.03906,25.23047 3.04296,77.64843 -2.16407,113.76953 -6.52734,45.28128 -14.57812,86.23048 -17.57812,89.41018 -1.3125,1.3906 -1.8125,-14.0196 -1.11328,-34.2578 z m 22.1211,8.8867 c 19.54687,-57.41018 40.63672,-145.94924 56.73437,-238.16799 7.20703,-41.28125 14.07813,-79.85156 15.27735,-85.71875 4.67578,-22.9414 7.85937,-12.38281 7.85937,26.07813 0,91 -20.74219,193.60937 -52.28906,258.66015 -12.03516,24.80856 -32.67578,54.10936 -27.58203,39.14846 z m 685.09371,-71.77736 c -16.6601,-35.24219 -45.4726,-111.69922 -60.8515,-161.5 -19.3594,-62.65235 -88.47659,-329.74219 -85.9844,-332.23047 2.48828,-2.49219 23.8164,47.35937 39.3047,91.84765 21.5703,61.96094 46.4805,146.8125 74.8789,255.0625 13.6523,52.03907 30.7227,111.9375 37.9297,133.09766 7.2109,21.17188 12.4531,40.26172 11.6406,42.42188 -0.8203,2.16015 -8.4297,-10.75 -16.918,-28.69922 z M 593.96875,876.30859 c -8.24609,-15.77734 -17.69922,-78.3789 -10.6875,-70.80859 2.85156,3.07812 19.97266,65.41016 19.97266,72.69922 0,5.76953 -5.90235,4.57031 -9.28516,-1.89063 z m 394.95312,-11.4375 c -9.93359,-11.96093 -25.72656,-69.1914 -20.0664,-72.6914 2.60937,-1.6211 10.59375,17.80078 20.83594,50.67968 3.07421,9.8711 6.16406,19.78125 6.86718,22.01954 1.64844,5.28125 -3.26172,5.26953 -7.63672,0 z M 701.69922,804.51953 C 687.97656,768.75 684.83203,755.64062 685.04687,735.19141 c 0.14844,-14.28125 0.79688,-16.42188 3.1875,-10.46094 2.51954,6.26953 19.28907,73.1289 24.51563,97.73828 3.04687,14.35156 -1.49219,6.98047 -11.05078,-17.94922 z m 833.41018,10.10156 c -1.0781,-6.90234 -4.9805,-47.05078 -8.668,-89.21093 -7.0117,-80.14063 -14.6914,-136.42969 -27.0312,-198.21875 -4.0391,-20.17969 -6.4805,-36.70313 -5.4297,-36.70313 3.8281,0 26.2812,57.90234 34.1601,88.08984 20.3477,77.92188 28.1992,172.8711 18.4883,223.35157 -4.7187,24.4414 -8.9687,29.1289 -11.5195,12.6914 z m -74.8906,-54.14062 c -1.0274,-7.62891 -2.6485,-25.60938 -3.6094,-39.96875 l -1.75,-26.10156 5.3906,11.41796 c 6.2188,13.19141 10.3594,68.51172 5.1211,68.51172 -1.8125,0 -4.1328,-6.23047 -5.1523,-13.85937 z m 254.5195,-97.87891 c -1.8594,-35.38281 -7.5195,-76.32031 -18.3594,-132.58203 -4.6875,-24.34766 -4.2891,-26.26953 3.1406,-15.05859 7.6211,11.5 20.8516,50.78906 26.1524,77.64843 7.039,35.64063 2.707,109.96094 -6.4024,109.96094 -1.3398,0 -3.3789,-17.99219 -4.5312,-39.96875 z m -38.0586,-36.71094 c 0,-33.67187 0.8086,-41.26953 4.0703,-38.01171 2.75,2.74218 4.0781,15.21093 4.0781,38.01171 0,22.78907 -1.3281,35.26954 -4.0781,38.00782 -3.2617,3.26172 -4.0703,-4.32813 -4.0703,-38.00782 z M 417.36719,1744.5586 c -14.4336,-199.7891 -75.11328,-338.3398 -190.38672,-434.668 -39.04688,-32.6406 -130.617189,-91.7304 -135.132814,-87.2187 -1.113281,1.1172 2.4375,6.7695 7.886719,12.5781 28.312495,30.1602 113.593745,153.4102 160.898435,232.5 49.9375,83.5195 125.22656,236.8789 148.55078,302.6211 4.95313,13.9492 9.60938,24.7695 10.34375,24.0273 0.73828,-0.7265 -0.23437,-23.1601 -2.16015,-49.8398 z m 1481.08201,10.2227 c 24.5899,-73 102.6211,-221.3321 167.3594,-318.1094 46.8203,-69.9922 93.2305,-129.211 136.9805,-174.7735 26.1914,-27.2773 31.7812,-35.8086 16.3125,-24.8984 -4.9414,3.4883 -16.6016,10.1797 -25.9219,14.8711 -29.8399,15.0391 -102.8594,66.0195 -132.3008,92.3789 -77.0976,69.0391 -139.5898,174.3906 -166.0898,280.0195 -5.0703,20.1719 -6.9493,41.3203 -8.2891,92.9922 -1.0586,40.6797 -0.5586,65.6094 1.2617,63.6172 1.6485,-1.7891 6.4571,-13.5391 10.6875,-26.0976 z m 0,0"\r
     id="path1"\r
     inkscape:highlight-color="#aaaaaa"\r
     style="fill:#ffffff;fill-opacity:1" />\r
</svg>\r
`,a5="#87CEFA",l5="#FF0000";function y0(i){const e=i.match(/viewBox\s*=\s*"([^"]+)"/i),t=i.match(/<path[^>]*\sd="([^"]+)"[^>]*>/i);if(!e||!t)throw new Error("Cannot parse SVG path/viewBox from source.");const s=t[0].match(/transform="([^"]+)"/i);return{d:t[1],transform:s?s[1]:void 0,viewBox:e[1]}}const u5=y0(s5),c5=y0(o5);function h5(i){return i==="player"?a5:l5}function d5(i){const e=i==="player"?u5:c5,t=h5(i),s=e.transform?` transform="${e.transform}"`:"";return[`<svg viewBox="${e.viewBox}" xmlns="http://www.w3.org/2000/svg" style="background:none">`,"<g>",`<path d="${e.d}"${s} fill="${t}" />`,"</g>","</svg>"].join("")}function Ic(i){const e=d5(i);return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}const x0="token-player-svg",v0="token-enemy-svg";async function f5(){const i=[{alias:x0,src:Ic("player")},{alias:v0,src:Ic("enemy")}];for(const e of i)Ui.add(e);await Ui.load(i.map(e=>e.alias))}const p5=["./brute.json","./archer.json","./assassin.json","./ghost.json"],N1={types:p5},m5="brute",g5="Brute",y5="Frontliner robuste qui avance pour engager le joueur.",x5="brute",v5={hp:10,moveRange:3,attackDamage:2,armorClass:14},_5={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},w5={shape:"cone",range:4,apertureDeg:90,canSeeInDark:!1},S5={id:m5,label:g5,description:y5,aiRole:x5,baseStats:v5,movement:_5,vision:w5},k5="archer",C5="Archer",b5="Tireur qui prefere garder une distance de securite avant de frapper.",A5="archer",P5={hp:7,moveRange:2,attackDamage:2,armorClass:13},T5={type:"ground",speed:2,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},E5={shape:"cone",range:15,apertureDeg:60,canSeeInDark:!1},M5={id:k5,label:C5,description:b5,aiRole:A5,baseStats:P5,movement:T5,vision:E5},R5="assassin",I5="Assassin",F5="Frappeur rapide qui cherche a se rapprocher pour porter un coup decisif.",z5="assassin",L5={hp:6,moveRange:3,attackDamage:3,armorClass:15},B5={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},j5={shape:"cone",range:6,apertureDeg:80,canSeeInDark:!1},D5={id:R5,label:I5,description:F5,aiRole:z5,baseStats:L5,movement:B5,vision:j5},O5="ghost",N5="Fantome",$5="Esprit intangible capable de traverser les autres creatures.",U5="ghost",G5={hp:8,moveRange:4,attackDamage:3,armorClass:12},W5={type:"ghost",speed:4,canPassThroughWalls:!0,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},H5={shape:"circle",range:6,canSeeInDark:!0},V5={id:O5,label:N5,description:$5,aiRole:U5,baseStats:G5,movement:W5,vision:H5},Y5=["./melee-strike.json","./dash.json","./second-wind.json","./throw-dagger.json"],$1={actions:Y5},X5="melee-strike",q5="Frappe basique",K5="Attaque de melee simple contre une cible a 1 case.",Q5="attack",Z5={actionType:"action",movementCost:0},J5={target:"enemy",range:{min:0,max:1,shape:"single"},maxTargets:1,requiresLos:!0},e4={perTurn:1,perEncounter:null,resource:null},t4=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_max",target:"primary",max:1,reason:"Portee de melee uniquement."},{type:"target_alive",target:"primary",reason:"La cible doit avoir des PV restants."}],n4={bonus:5,critRange:20},r4={formula:"1d6+3",critRule:"double-dice",damageType:"slashing"},i4=[{type:"damage",target:"primary",formula:"1d6 + modFOR",damageType:"slashing"},{type:"log",message:"Frappe basique inflige 1d6+FOR a la cible."}],s4={priority:"finish_low_hp_target",successLog:"Attaque de melee effectuee.",failureLog:"Cible hors portee ou deja a terre."},o4=["martial","arme","starter"],a4={id:X5,name:q5,summary:K5,category:Q5,actionCost:Z5,targeting:J5,usage:e4,conditions:t4,attack:n4,damage:r4,effects:i4,aiHints:s4,tags:o4},l4="dash",u4="Course",c4="Transforme l'action en 3 cases de mouvement en plus.",h4="movement",d4={actionType:"action",movementCost:0},f4={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},p4={perTurn:1,perEncounter:null,resource:null},m4=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."}],g4=[{type:"modify_path_limit",target:"self",delta:3,duration:"this_turn"},{type:"log",message:"Course: +3 cases de mouvement pour ce tour."}],y4={priority:"close_gap",successLog:"Course utilisee pour approcher.",failureLog:"Deja a portee, course ignoree."},x4=["mobilite","deplacement"],v4={id:l4,name:u4,summary:c4,category:h4,actionCost:d4,targeting:f4,usage:p4,conditions:m4,effects:g4,aiHints:y4,tags:x4},_4="second-wind",w4="Second souffle",S4="Restaure une partie des PV en bonus action.",k4="support",C4={actionType:"bonus",movementCost:0},b4={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},A4={perTurn:null,perEncounter:1,resource:null},P4=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"stat_below_percent",who:"self",stat:"hp",percentMax:.75,reason:"Economiser tant que les PV sont hauts."}],T4=[{type:"heal",target:"self",formula:"1d10 + niveau",min:1},{type:"temp_hp",target:"self",amount:2,duration:"end_of_turn"},{type:"log",message:"Second souffle: soigne 1d10 + niveau."}],E4={priority:"survive",successLog:"Second souffle declenche.",failureLog:"PV trop hauts ou tour non joueur."},M4=["soin","defense","survie"],R4={id:_4,name:w4,summary:S4,category:k4,actionCost:C4,targeting:b4,usage:A4,conditions:P4,effects:T4,aiHints:E4,tags:M4},I4="throw-dagger",F4="Lancer de dague",z4="Attaque a distance courte avec une dague a lancer.",L4="attack",B4={actionType:"action",movementCost:0},j4={target:"enemy",range:{min:1,max:4,shape:"single"},maxTargets:1,requiresLos:!0},D4={perTurn:1,perEncounter:null,resource:{name:"dagger",pool:"bandolier",min:1}},O4=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_between",target:"primary",min:1,max:4,reason:"Hors de melee mais a portee de lancer."},{type:"resource_at_least",resource:"dagger",pool:"bandolier",value:1,reason:"Besoin d'une dague a lancer."}],N4={bonus:4,critRange:20},$4={formula:"1d4+2",critRule:"double-dice",damageType:"piercing"},U4=[{type:"damage",target:"primary",formula:"1d4 + modDEX",damageType:"piercing"},{type:"resource_spend",resource:"dagger",pool:"bandolier",amount:1},{type:"log",message:"Dague lancee: 1d4+DEX degats perforants."}],G4={priority:"poke_from_range",successLog:"Dague lancee.",failureLog:"Pas de dague ou cible hors portee."},W4=["distance","arme","jet"],H4={id:I4,name:F4,summary:z4,category:L4,actionCost:B4,targeting:j4,usage:D4,conditions:O4,attack:N4,damage:$4,effects:U4,aiHints:G4,tags:W4},Ar=12,Qn=8,gt=64,Ba=Ar*gt,ac=Qn*gt,_0=gt,Xc=gt*.5,w0=Ba/2,S0=Xc*2,V4=1841961;function Xi(i,e){return i>=0&&i<Ar&&e>=0&&e<Qn}function wn(i,e){const t=_0/2,s=Xc/2,o=(i-e)*t+w0,l=(i+e)*s+S0;return{x:o,y:l}}function Y4(i,e){const t=_0/2,s=Xc/2,o=i-w0,l=e-S0,u=o/t,h=l/s,f=(u+h)/2,p=(h-u)/2,m=Math.round(f),y=Math.round(p);return{x:m,y}}function k0(i,e,t,s){const o=[];for(let l=-s;l<=s;l++)for(let u=-s;u<=s;u++){const h=e+u,f=t+l;if(!Xi(h,f))continue;Math.sqrt(u*u+l*l)<=s+.01&&o.push({x:h,y:f})}return{id:i,type:"circle",cells:o}}function X4(i,e,t,s,o){const l=[],u=Math.floor(s/2),h=Math.floor(o/2);for(let f=t-h;f<=t+h;f++)for(let p=e-u;p<=e+u;p++)Xi(p,f)&&l.push({x:p,y:f});return{id:i,type:"rectangle",cells:l}}function C0(i,e,t,s,o,l){const u=[],f=typeof l=="number"&&l>0&&l<180?l*Math.PI/360:null;for(let p=1;p<=s;p++){let m=p;if(f!==null){const y=Math.tan(f)*p;m=Math.floor(y),m<0&&(m=0),m>p&&(m=p)}for(let y=-m;y<=m;y++){let v=e,_=t;switch(o){case"right":v=e+p,_=t+y;break;case"left":v=e-p,_=t+y;break;case"down":v=e+y,_=t+p;break;case"up":v=e+y,_=t-p;break}Xi(v,_)&&u.push({x:v,y:_})}}return{id:i,type:"cone",cells:u}}function Ni(i,e=1){const t=[];for(let o=0;o<e;o++)t.push(1+Math.floor(Math.random()*i));const s=t.reduce((o,l)=>o+l,0);return{rolls:t,total:s}}function q4(i,e="normal",t=20){if(e==="advantage"){const o=Ni(20),l=Ni(20),u=Math.max(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:i,total:u+i,mode:e,isCrit:u>=t}}if(e==="disadvantage"){const o=Ni(20),l=Ni(20),u=Math.min(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:i,total:u+i,mode:e,isCrit:u>=t}}const s=Ni(20);return{d20:s,bonus:i,total:s.total+i,mode:e,isCrit:s.total>=t}}function K4(i){const e=[],s=i.replace(/\s+/g,"").split(/(?=[+-])/);for(const o of s){if(!o)continue;const l=o.startsWith("-")?-1:1,u=o.replace(/^[+-]/,""),h=u.match(/^(\d*)d(\d+)$/i);if(h){const p=h[1]?parseInt(h[1],10):1,m=parseInt(h[2],10);e.push({diceCount:l*p,diceSides:m,modifier:0});continue}const f=parseInt(u,10);Number.isNaN(f)||e.push({diceCount:0,diceSides:0,modifier:l*f})}return e}function Q4(i,e){const t=!!(e!=null&&e.isCrit),s=(e==null?void 0:e.critRule)??"double-dice",o=K4(i),l=[];let u=0;for(const p of o)if(p.diceCount!==0&&p.diceSides>0){const m=Math.abs(p.diceCount),y=t&&s==="double-dice"?m*2:m,v=Ni(p.diceSides,y);l.push(p.diceCount<0?{rolls:v.rolls,total:-v.total}:v)}else u+=p.modifier;let f=l.reduce((p,m)=>p+m.total,0)+u;return t&&s==="double-total"&&(f*=2),{dice:l,flatModifier:u,total:f,formula:i,isCrit:t}}function lc(i,e){return`${i},${e}`}function Z4(i){return i.movementProfile?i.movementProfile:typeof i.moveRange=="number"?{type:"ground",speed:i.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1}:null}function J4(i,e,t,s,o,l,u){if(t<0||s<0||t>=Ar||s>=Qn||!Xi(t,s))return!1;const h=t===u.x&&s===u.y;return!o.some(p=>p.id!==i.id&&p.hp>0&&p.x===t&&p.y===s)||h&&l?!0:e&&e.canPassThroughEntities?!(h&&e.canStopOnOccupiedTile===!1):!1}function U1(i,e,t,s){const o=Z4(i),l=o&&o.speed>0?Math.min(s.maxDistance,o.speed):s.maxDistance,u={x:i.x,y:i.y};if(u.x===e.x&&u.y===e.y)return[];const h=new Set,f=new Map,p=new Map,m=[],y=lc(u.x,u.y);h.add(y),f.set(y,null),p.set(y,0),m.push(u);let v=null;const _=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];for(;m.length>0;){const E=m.shift(),I=lc(E.x,E.y),V=p.get(I)??0;if(!(V>=l))for(const D of _){const O=E.x+D.x,re=E.y+D.y,ae=lc(O,re);if(h.has(ae)||!J4(i,o,O,re,t,s.allowTargetOccupied??!1,e))continue;h.add(ae),f.set(ae,I),p.set(ae,V+1);const Q={x:O,y:re};if(m.push(Q),O===e.x&&re===e.y){v=ae,m.length=0;break}}}let S=v;if(!S){let E=null,I=Number.POSITIVE_INFINITY;for(const V of h){const[D,O]=V.split(",").map(Number),re=Math.abs(D-e.x)+Math.abs(O-e.y),ae=p.get(V)??0;ae!==0&&(ae>l||re<I&&(I=re,E=V))}if(!E)return[];S=E}const b=[];let w=S;for(;w;){const[E,I]=w.split(",").map(Number);if(b.push({x:E,y:I}),w===y)break;w=f.get(w)??null}const P=b.reverse(),T=l+1;return P.length>T?P.slice(0,T):P}function e6(i,e){return e.find(t=>t.hp>0&&t.x===i.x&&t.y===i.y)??null}const t6=30,n6={shape:"cone",range:t6};function r6(i){return i.facing?i.facing:i.type==="player"?"right":"left"}function i6(i){return i.visionProfile?i.visionProfile:n6}function b0(i){const e=i6(i),t=r6(i),s=`vision-${i.id}`;return e.range<=0?{id:s,type:e.shape==="circle"?"circle":"cone",cells:[]}:e.shape==="circle"?k0(s,i.x,i.y,e.range):C0(s,i.x,i.y,e.range,t,e.apertureDeg)}function G1(i){return`${i.x},${i.y}`}function s6(i,e){const t=b0(i);if(!t.cells.length)return[];const s=new Set;for(const o of t.cells)s.add(G1(o));return e.filter(o=>o.id!==i.id&&o.hp>0&&s.has(G1({x:o.x,y:o.y})))}function o6(i,e,t){return e.hp<=0?!1:s6(i,t).some(o=>o.id===e.id)}const a6={"./melee-strike.json":a4,"./dash.json":v4,"./second-wind.json":R4,"./throw-dagger.json":H4},l6={"./brute.json":S5,"./archer.json":M5,"./assassin.json":D5,"./ghost.json":V5};function u6(){const i=Array.isArray(N1.types)?N1.types:[],e=[];for(const t of i){const s=l6[t];s?e.push(s):console.warn("[enemy-types] Type path missing in bundle:",t)}return e.length===0&&console.warn("[enemy-types] No enemy types loaded from index.json"),e}function c6(i,e,t){const{x:s,y:o}=t;return{id:`enemy-${i+1}`,type:"enemy",enemyTypeId:e.id,enemyTypeLabel:e.label,aiRole:e.aiRole,moveRange:e.baseStats.moveRange,attackDamage:e.baseStats.attackDamage,armorClass:e.baseStats.armorClass,movementProfile:e.movement?e.movement:{type:"ground",speed:e.baseStats.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},facing:"left",visionProfile:e.vision?e.vision:{shape:"cone",range:5},x:s,y:o,hp:e.baseStats.hp,maxHp:e.baseStats.hp}}function W1(i,e,t){return Math.max(e,Math.min(t,i))}function uc(i,e){return Math.abs(i.x-e.x)+Math.abs(i.y-e.y)}function cc(i,e){const t=e.x-i.x,s=e.y-i.y;return Math.abs(t)>=Math.abs(s)?t>=0?"right":"left":s>=0?"down":"up"}function h6(i){const e=Qn,t=Ar,s=Math.floor(i/e),o=i%e;return{x:Math.max(0,t-1-s),y:o}}const H1=[{action:"move",label:"Se deplacer jusqu'a 3 cases (Manhattan)",color:"#2ecc71"},{action:"attack",label:"Attaque le joueur a distance 1 (2 degats)",color:"#e74c3c"},{action:"wait",label:"Attend si aucune action viable",color:"#7f8c8d"}],d6=()=>{var po,rt,mo,pi;const i=ke.useRef(null),e=ke.useRef(null),t=ke.useRef(null),s=ke.useRef(null),[o,l]=ke.useState([]),[u,h]=ke.useState({id:"player-1",type:"player",x:0,y:Math.floor(Qn/2),facing:"right",visionProfile:{shape:"cone",range:5},hp:Fn.pvActuels,maxHp:Fn.pvMax}),[f,p]=ke.useState([]),[m,y]=ke.useState([]),[v,_]=ke.useState("player"),[S,b]=ke.useState(1),[w,P]=ke.useState(!1),[T,E]=ke.useState(!1),[I,V]=ke.useState(null),[D,O]=ke.useState([]),[re,ae]=ke.useState(0),[Q,ne]=ke.useState(!1),[Ce,be]=ke.useState(3),[Ae,yt]=ke.useState([]),[ee,ie]=ke.useState(null),[J,Z]=ke.useState(null),[te,R]=ke.useState("normal"),[N,xe]=ke.useState(null),[_e,Se]=ke.useState(null),[Pe,Ne]=ke.useState([]),[Fe,Be]=ke.useState(!1),[ht,dn]=ke.useState({usedAction:!1,usedBonus:!1}),[Ve,At]=ke.useState([]),[Ye,jt]=ke.useState(null),[oi,fn]=ke.useState("none"),[Tr,qt]=ke.useState([]),[Tn,tr]=ke.useState(!1),[Er,io]=ke.useState(null),[Mr,Rr]=ke.useState(null),[Zi,ai]=ke.useState(null),[Ir,nr]=ke.useState(!1);function Fr(k){if(Ir)return"Fallback local : poursuite/attaque basique du joueur";if(Mr===null)return"IA non appele pour l'instant";const j=Mr.find(U=>U.enemyId===k);if(!j)return"Aucune dcision reue pour cet ennemi";if(j.action==="move"){const U=typeof j.targetX=="number"?j.targetX:"?",le=typeof j.targetY=="number"?j.targetY:"?";return`Dplacement vers (${U}, ${le})`}return j.action==="attack"?"Attaque le joueur (distance 1)":"Attend ce tour"}function Bn(){if(!T||D.length===0)return null;const k=re>=0&&re<D.length?re:0;return D[k]??null}function so(){D.length!==0&&ae(k=>{const j=(k+1)%D.length;return j===0&&b(U=>U+1),j})}function oo(){if(T)return;const k=Fn.caracs.dexterite.modDEX,j=()=>Math.floor(Math.random()*20)+1,U=j(),le=U+k,G=[];G.push({id:u.id,kind:"player",initiative:le});const X=m.map($=>{const Te=j();return G.push({id:$.id,kind:"enemy",initiative:Te}),{...$,initiative:Te}});V(le),y(X),G.sort(($,se)=>se.initiative-$.initiative),O(G),ae(0),E(!0);const K=G[0];K&&(K.kind==="player"?pe(`Initiative: Joueur ${le} (d20=${U}, mod=${k})  le joueur commence.`):pe(`Initiative: Joueur ${le} (d20=${U}, mod=${k})  ${K.id} commence (initiative ${K.initiative}).`))}function pe(k){l(j=>[k,...j].slice(0,12))}function Ji(k){Ne(j=>[k,...j].slice(0,6)),pe(k)}ke.useEffect(()=>{const k=u6();p(k)},[]),ke.useEffect(()=>{Q&&!T&&m.length>0&&oo()},[Q,T,m.length]),ke.useEffect(()=>{const k=Array.isArray($1.actions)?$1.actions:[],j=[];for(const U of k){const le=a6[U];le?j.push(le):console.warn("[actions] Action path missing in bundle:",U)}j.length===0&&console.warn("[actions] No actions loaded from index.json"),yt(j),ie(j.length?j[0].id:null)},[]),ke.useEffect(()=>{if(!Q||!T)return;const k=Bn();if(k){if(k.kind==="player"){_("player"),dn({usedAction:!1,usedBonus:!1}),Be(!1),xe(null),Se(null);return}w||(_("enemies"),ns(k.id))}},[Q,T,D,re,w]);function zr(){if(m.length===0)return null;let k=null;for(const j of m){const U=uc(u,j);(k===null||U<k)&&(k=U)}return k}function li(k,j,U,le){if(j.type!=="enemy")return{ok:!1,reason:"La cible selectionnee n'est pas un ennemi."};if(j.hp<=0)return{ok:!1,reason:"La cible est deja a terre."};const G=k.targeting;if(!G||G.target!=="enemy")return{ok:!1,reason:"Cette action ne cible pas un ennemi."};const X=uc(U,j),K=G.range;if(K){if(typeof K.min=="number"&&X<K.min)return{ok:!1,reason:`Cible trop proche pour ${k.name} (distance ${X}, min ${K.min}).`};if(typeof K.max=="number"&&X>K.max)return{ok:!1,reason:`Cible hors portee pour ${k.name} (distance ${X}, max ${K.max}).`}}for(const $ of k.conditions||[]){if($.type==="distance_max"&&typeof $.max=="number"&&X>$.max)return{ok:!1,reason:$.reason||`Distance cible > ${$.max}.`};if($.type==="distance_between"){const se=typeof $.min=="number"?$.min:typeof(K==null?void 0:K.min)=="number"?K.min:null,Te=typeof $.max=="number"?$.max:typeof(K==null?void 0:K.max)=="number"?K.max:null;if(se!==null&&X<se)return{ok:!1,reason:$.reason||`Distance cible < ${se}.`};if(Te!==null&&X>Te)return{ok:!1,reason:$.reason||`Distance cible > ${Te}.`}}if($.type==="target_alive"&&j.hp<=0)return{ok:!1,reason:$.reason||"La cible doit avoir des PV restants."}}return G.requiresLos&&!o6(U,j,le)?{ok:!1,reason:"Cible hors du champ de vision ou derriere un obstacle (ligne de vue requise)."}:{ok:!0}}function Lr(k){var X,K;const j=[],U=[];v!=="player"&&j.push("Action bloquee pendant le tour des ennemis.");const le=(X=k.targeting)==null?void 0:X.target,G=(K=k.targeting)==null?void 0:K.range;if(le==="enemy"){const $=zr();$===null?j.push("Aucune cible ennemie presente."):(U.push(`Distance mini ennemie: ${$}`),typeof(G==null?void 0:G.min)=="number"&&$<G.min&&j.push(`Trop proche (< ${G.min}).`),typeof(G==null?void 0:G.max)=="number"&&$>G.max&&j.push(`Hors portee (> ${G.max}).`))}for(const $ of k.conditions||[]){if($.type==="phase"&&$.mustBe&&$.mustBe!==v&&j.push($.reason||"Phase incorrecte."),$.type==="distance_max"&&le==="enemy"){const se=zr();se!==null&&typeof $.max=="number"&&se>$.max&&j.push($.reason||`Distance > ${$.max}.`)}if($.type==="distance_between"&&le==="enemy"){const se=zr();se!==null&&(typeof $.min=="number"&&se<$.min&&j.push($.reason||`Distance < ${$.min}.`),typeof $.max=="number"&&se>$.max&&j.push($.reason||`Distance > ${$.max}.`))}}return{enabled:j.length===0,reasons:j,details:U}}function ui(k){var U;const j=[];if(k.perTurn&&j.push(`${k.perTurn}/tour`),k.perEncounter&&j.push(`${k.perEncounter}/rencontre`),(U=k.resource)!=null&&U.name){const le=k.resource.pool?` (${k.resource.pool})`:"";j.push(`Ressource: ${k.resource.name}${le}`)}return j.length?j.join(" | "):"Libre"}function ci(k){const{range:j,target:U}=k;return j.shape==="self"?"Portee: soi-meme":j.min===j.max?`Portee: ${j.max} (${U})`:`Portee: ${j.min}-${j.max} (${U})`}function rr(k){switch(k.type){case"phase":return`Phase requise: ${k.mustBe??"?"}`;case"distance_max":return`Distance <= ${k.max??"?"}`;case"distance_between":return`Distance ${k.min??0}-${k.max??"?"}`;case"stat_below_percent":return`Stat ${k.stat} < ${Math.round((k.percentMax??0)*100)}%`;case"target_alive":return"Cible doit etre vivante";case"resource_at_least":return`Ressource ${k.resource??"?"} >= ${k.value??"?"}`;default:return k.reason||k.type}}function ir(k){switch(k.type){case"damage":return`Degats ${k.damageType??""} (${k.formula??"?"})`;case"heal":return`Soin (${k.formula??"?"})`;case"status":return`Etat: ${k.status??"?"} (${k.duration??"?"} tour)`;case"temp_hp":return`PV temporaires: ${k.amount??"?"}`;case"move":return`Deplacement +${k.maxSteps??"?"} (${k.direction??"direction libre"})`;case"resource_spend":return`Consomme ${k.amount??1} ${k.resource??"ressource"}`;case"modify_path_limit":return`+${k.delta??"?"} cases de mouvement ce tour`;default:return k.type}}function ao(k){var le;const j=(le=k.targeting)==null?void 0:le.range;if(!j)return;const U=`preview-${k.id}`;if(j.shape==="rectangle"){qt([{id:U,kind:"rectangle",width:Math.max(1,j.max),height:Math.max(1,j.max)}]),pe(`Previsualisation rectangle pour ${k.name}.`);return}if(j.shape==="cone"){qt([{id:U,kind:"cone",range:Math.max(1,j.max),direction:"right"}]),pe(`Previsualisation cone (direction droite) pour ${k.name}.`);return}qt([{id:U,kind:"circle",radius:Math.max(1,j.max)}]),pe(`Previsualisation de portee pour ${k.name}.`)}function lo(k){var K,$,se;const j=(K=k.actionCost)==null?void 0:K.actionType,U=j==="action",le=j==="bonus";if(U&&ht.usedAction){pe(`Action ${k.name} refusee: action principale deja utilisee ce tour.`);return}if(le&&ht.usedBonus){pe(`Action ${k.name} refusee: action bonus deja utilisee ce tour.`);return}const G=Lr(k);if(!G.enabled){pe(`Action ${k.name} bloque: ${G.reasons.join(" | ")}`);return}Z(k.id),xe(null),Se(null),Be(!1),dn(Te=>({usedAction:Te.usedAction||U,usedBonus:Te.usedBonus||le}));const X=(($=k.aiHints)==null?void 0:$.successLog)||"Action validee. Prets pour les jets.";pe(`${k.name}: ${X}`),((se=k.targeting)==null?void 0:se.target)==="enemy"?(fn("selecting"),jt(null),pe("Selection de cible: cliquez sur un ennemi sur la grille ou dans la liste.")):(fn("none"),jt(null))}function sr(){return J&&Ae.find(k=>k.id===J)||null}function uo(k){return k?k.attack||k.damage||k.skillCheck?!0:(k.effects||[]).some(U=>typeof U.formula=="string"&&U.formula.trim().length>0):!1}function es(){var K,$;const k=sr();if(!k){pe("Aucune action validee pour lancer un jet.");return}if(!k.attack){pe("Cette action ne requiert pas de jet de touche.");return}if(Fe){pe("Jet de touche deja effectue pour cette action ce tour. Validez une nouvelle action ou terminez le tour.");return}let j=null;if(((K=k.targeting)==null?void 0:K.target)==="enemy"){if(!Ye){pe("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet.");return}const se=m.find(Te=>Te.id===Ye);if(!se){pe("Cible ennemie introuvable ou deja vaincue.");return}j=typeof se.armorClass=="number"?se.armorClass:null}const U=q4(k.attack.bonus,te,k.attack.critRange??20);xe(U),Be(!0),Se(null);const le=U.mode==="normal"?`${U.d20.total}`:`${U.d20.rolls.join(" / ")} -> ${U.d20.total}`,G=(($=k.targeting)==null?void 0:$.target)==="enemy"&&Ye?` sur ${Ye}`:"",X=`Jet de touche (${k.name})${G} : ${le} + ${U.bonus} = ${U.total}`;if(j!==null){const Te=U.total>=j||U.isCrit?`TOUCHE (CA ${j})${U.isCrit?" (critique!)":""}`:`RATE (CA ${j})`;Ji(`${X} -> ${Te}`)}else Ji(`${X}${U.isCrit?" (critique!)":""}`)}function Br(){var se,Te,Re;const k=sr();if(!k){pe("Aucune action validee pour lancer un jet.");return}if(!k.damage){pe("Cette action ne requiert pas de jet de degats.");return}if(k.attack&&!N){pe("Un jet de touche est requis avant les degats pour cette action.");return}let j=null,U=null;if(((se=k.targeting)==null?void 0:se.target)==="enemy"){if(!Ye){pe("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet de degats.");return}if(j=m.findIndex(ze=>ze.id===Ye),j===-1){pe("Cible ennemie introuvable ou deja vaincue.");return}const ve=m[j];U=typeof ve.armorClass=="number"?ve.armorClass:null}const le=!!(N!=null&&N.isCrit);if(U!==null&&k.attack&&N&&!(N.total>=U||N.isCrit)){const De=((Te=k.targeting)==null?void 0:Te.target)==="enemy"&&Ye?` sur ${Ye}`:"";pe(`L'attaque (${k.name})${De} a manque la cible (CA ${U}). Pas de degats.`);return}const G=Q4(k.damage.formula,{isCrit:le,critRule:k.damage.critRule});Se(G);const X=G.dice.map(ve=>ve.rolls.join("+")).join(" | "),K=G.total,$=((Re=k.targeting)==null?void 0:Re.target)==="enemy"&&Ye?` sur ${Ye}`:"";Ji(`Degats (${k.name})${$} : ${X||"0"} + ${G.flatModifier} = ${K}${le?" (critique)":""}`),typeof j=="number"&&j>=0&&y(ve=>{if(j===null||j<0||j>=ve.length)return ve;const ze=[...ve],De={...ze[j]};return De.hp=Math.max(0,De.hp-K),ze[j]=De,ze})}function co(){const k=sr();if(!k){pe("Aucune action validee pour lancer un jet.");return}if(!k.attack){pe("Mode auto: pas de jet de touche necessaire."),k.damage&&Br();return}es(),setTimeout(()=>{k.damage&&Br()},50)}function jr(k){if(v!=="player")return;const j=i.current;if(!j)return;const U=j.querySelector("canvas");if(!U)return;const le=U.getBoundingClientRect(),G=k.clientX-le.left,X=k.clientY-le.top,K=G/le.width*Ba,$=X/le.height*ac,{x:se,y:Te}=Y4(K,$),Re=se,ve=Te;if(!Xi(Re,ve))return;if(oi==="selecting"){const De=[u,...m],He=e6({x:Re,y:ve},De);if(!He||He.type!=="enemy"){pe(`Pas d'ennemi sur (${Re}, ${ve}).`);return}const Ke=sr();if(!Ke){pe("Aucune action validee pour selectionner une cible.");return}const $t=li(Ke,He,u,[u,...m]);if(!$t.ok){pe($t.reason||"Cette cible n'est pas valide pour cette action.");return}jt(He.id),fn("none"),pe(`Cible selectionnee: ${He.id}.`);return}const ze=(De,He)=>m.some(Ke=>Ke.hp>0&&Ke.x===De&&Ke.y===He);if(ze(Re,ve)){pe(`Case (${Re}, ${ve}) occupee par un ennemi : impossible de s'y deplacer.`);return}At(De=>{const Ke=[...De];if(Ke.length>=5)return pe("Limite de 5 cases atteinte pour ce tour."),Ke;let $t=Ke.length>0?Ke[Ke.length-1]:{x:u.x,y:u.y};if($t.x===Re&&$t.y===ve)return Ke;let pt=$t.x,xt=$t.y,On=5-Ke.length;for(;pt!==Re&&On>0;){const Nn=Math.sign(Re-pt),$n=pt+Nn;if(ze($n,xt)){pe(`Trajectoire bloquee par un ennemi en (${$n}, ${xt}).`);break}pt=$n,Ke.push({x:pt,y:xt}),On--}for(;xt!==ve&&On>0;){const Nn=Math.sign(ve-xt),$n=xt+Nn;if(ze(pt,$n)){pe(`Trajectoire bloquee par un ennemi en (${pt}, ${$n}).`);break}xt=$n,Ke.push({x:pt,y:xt}),On--}return pe(On===0&&(pt!==Re||xt!==ve)?"Trajectoire tronquee: limite de 5 cases atteinte.":`Trajectoire: ajout de la case (${Re}, ${ve}).`),Ke})}function ts(){if(v!=="player"||Ve.length===0)return;const k=Ve[Ve.length-1];h(j=>({...j,x:k.x,y:k.y})),pe(`Deplacement valide vers (${k.x}, ${k.y}) via ${Ve.length} etape(s).`),At([])}function Dr(){v==="player"&&(At([]),pe("Trajectoire reinitialisee."))}function hi(k){v==="player"&&(h(j=>({...j,facing:k})),pe(`Orientation du joueur mise a jour: ${k}.`))}function Or(){const k={x:u.x,y:u.y,hp:u.hp,maxHp:u.maxHp},j=m.map(U=>({id:U.id,x:U.x,y:U.y,hp:U.hp,maxHp:U.maxHp,type:U.enemyTypeId,aiRole:U.aiRole??null,moveRange:U.moveRange??null,attackDamage:U.attackDamage??null}));return{round:S,phase:v,grid:{cols:Ar,rows:Qn},player:k,enemies:j}}function di(k){const j=new Set(m.map(G=>G.id)),U=new Set(["move","attack","wait"]),le=[];for(const G of k){if(!G||typeof G!="object")continue;if(!j.has(G.enemyId)){console.warn("[enemy-ai] Decision ignoree (enemyId inconnu):",G);continue}const X=(G.action||"wait").toLowerCase();if(!U.has(X)){console.warn("[enemy-ai] Decision ignoree (action invalide):",G);continue}if(X==="move"&&(typeof G.targetX!="number"||typeof G.targetY!="number")){console.warn("[enemy-ai] Decision move ignoree (cible manquante):",G);continue}le.push({...G,action:X})}return le}async function fi(k){console.log("[enemy-ai] Envoi tat au backend:",k),io(k),ai(null),nr(!1);try{const j=await fetch("/api/enemy-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!j.ok)throw new Error(`HTTP ${j.status}`);const U=await j.json();if(!U.decisions||!Array.isArray(U.decisions))throw new Error("Rponse backend invalide (decisions manquant).");const le=di(U.decisions);return console.log("[enemy-ai] Dcisions reues (filtres):",le),Rr(le),le.length===0&&nr(!0),le}catch(j){return console.warn("[enemy-ai] Erreur lors de la requete IA:",j),ai(j instanceof Error?j.message:String(j??"unknown")),Rr(null),nr(!0),console.warn("[enemy-ai] Dcisions manquantes, utilisation du fallback local."),[]}}async function ns(k){P(!0),At([]),qt([]);const j=Or(),le=(await fi(j)).filter(G=>G.enemyId===k);le.length===0?(nr(!0),Rr([]),y(G=>{const X=G.map(ve=>({...ve}));let K={...u};const $=X.find(ve=>ve.id===k);if(!$)return G;const se=typeof $.moveRange=="number"?$.moveRange:3,Te=[K,...X],Re=U1($,{x:K.x,y:K.y},Te,{maxDistance:se,allowTargetOccupied:!0});if($.plannedPath=Re,Re.length===0)pe(`${$.id} ne trouve pas de chemin valide vers le joueur (fallback, reste en place).`);else{const ve=Re[Re.length-1];if($.x=ve.x,$.y=ve.y,$.facing=cc($,K),Math.abs($.x-K.x)+Math.abs($.y-K.y)<=1){const De=typeof $.attackDamage=="number"?$.attackDamage:2;K={...K,hp:Math.max(0,K.hp-De)},pe(`${$.id} suit un chemin et attaque le joueur pour ${De} degats (fallback).`)}else pe(`${$.id} suit un chemin vers (${ve.x}, ${ve.y}) (fallback).`)}return h(K),X})):(nr(!1),Rr(le),y(G=>{const X=G.map($=>({...$}));let K={...u};for(const $ of le){const se=X.find(Re=>Re.id===$.enemyId);if(!se)continue;const Te=($.action||"wait").toLowerCase();if(Te==="wait"){pe(`${se.id} attend.`);continue}if(Te==="move"){let Re=$.targetX,ve=$.targetY;const ze=$;if((typeof Re!="number"||typeof ve!="number")&&ze.target&&typeof ze.target.x=="number"&&typeof ze.target.y=="number"&&(Re=ze.target.x,ve=ze.target.y),typeof Re!="number"||typeof ve!="number"){pe(`${se.id}: decision MOVE ignoree (pas de cible valide).`);continue}const De=typeof se.moveRange=="number"?se.moveRange:3,He=W1(Re,0,Ar-1),Ke=W1(ve,0,Qn-1),$t=[K,...X],pt=U1(se,{x:He,y:Ke},$t,{maxDistance:De,allowTargetOccupied:!0});if(se.plannedPath=pt,pt.length===0){pe(`${se.id}: aucun trajet valide vers (${He}, ${Ke}), reste en place.`);continue}const xt=pt[pt.length-1];se.x=xt.x,se.y=xt.y,se.facing=cc(se,K),pe(`${se.id} suit un chemin vers (${xt.x}, ${xt.y}).`);continue}if(Te==="attack")if(se.facing=cc(se,K),uc(se,K)<=1){const ve=typeof se.attackDamage=="number"?se.attackDamage:2;K={...K,hp:Math.max(0,K.hp-ve)},pe(`${se.id} attaque le joueur pour ${ve} degats.`)}else pe(`${se.id} voulait attaquer mais est trop loin (ignore).`)}return h(K),X})),P(!1),so()}function qa(){const k=Bn();!k||k.kind!=="player"||(pe(`Fin du tour joueur (round ${S}).`),so())}function Ka(){qt([{id:"demo-circle",kind:"circle",radius:2}]),pe("Zone d'effet: cercle (rayon 2) autour du joueur.")}function Qa(){qt([{id:"demo-rect",kind:"rectangle",width:3,height:3}]),pe("Zone d'effet: rectangle 3x3 centre sur le joueur.")}function jn(){qt([{id:"demo-cone",kind:"cone",range:4,direction:"right"}]),pe("Zone d'effet: cone vers la droite (portee 4).")}function ho(){qt([]),pe("Zones d'effet effacees.")}ke.useEffect(()=>{if(!Q||!i.current||e.current)return;const k=new Gp;e.current=k;let j=!1,U=null,le=!1;return(async()=>{if(await k.init({width:Ba,height:ac,background:V4,antialias:!0}),le=!0,await f5(),j)return;const X=i.current;if(!X)return;X.appendChild(k.canvas);const K=new kn;k.stage.addChild(K);const $=new no;K.addChild($),(()=>{$.clear();for(let ze=0;ze<Qn;ze++)for(let De=0;De<Ar;De++){if(!Xi(De,ze))continue;const He=wn(De,ze),Ke=gt,$t=gt*.5,pt=[He.x,He.y-$t/2,He.x+Ke/2,He.y,He.x,He.y+$t/2,He.x-Ke/2,He.y],xt=(De+ze)%2===0;$.poly(pt).fill({color:xt?1381666:1908016,alpha:1})}})();const Te=new no;K.addChild(Te),s.current=Te;const Re=new kn;K.addChild(Re),t.current=Re;const ve=()=>{const ze=k.canvas,De=ze.parentElement;if(!De)return;const He=Math.min(De.clientWidth/Ba,De.clientHeight/ac);ze.style.transformOrigin="top left",ze.style.transform=`scale(${He})`};U=ve,ve(),window.addEventListener("resize",ve)})(),()=>{j=!0,U&&window.removeEventListener("resize",U),le&&e.current&&e.current.destroy(!0),e.current=null,t.current=null,s.current=null}},[Q]),ke.useEffect(()=>{const k=t.current;if(!k)return;k.removeChildren();const j=[u,...m];for(const U of j){const le=new kn,G=U.type==="player"?x0:v0,X=Vi.from(G);X.anchor.set(.5),X.width=gt*.9,X.height=gt*.9,le.addChild(X);const K=wn(U.x,U.y);le.x=K.x+gt*.05,le.y=K.y-gt*.1,k.addChild(le)}},[u,m]),ke.useEffect(()=>{const k=s.current;if(!k)return;k.clear();const j=Tr.map(G=>{switch(G.kind){case"circle":return k0(G.id,u.x,u.y,G.radius??1);case"rectangle":return X4(G.id,u.x,u.y,G.width??1,G.height??1);case"cone":return C0(G.id,u.x,u.y,G.range??1,G.direction??"right");default:return{id:G.id,type:"circle",cells:[]}}});for(const G of j)for(const X of G.cells){const K=wn(X.x,X.y),$=gt,se=gt*.5,Te=[K.x,K.y-se/2,K.x+$/2,K.y,K.x,K.y+se/2,K.x-$/2,K.y],Re=G.type==="circle"?3447003:G.type==="rectangle"?3066993:15158332;k.poly(Te).fill({color:Re,alpha:.45})}if(Tn){const G=[u,...m];for(const X of G){const K=b0(X);for(const $ of K.cells){const se=wn($.x,$.y),Te=gt,Re=gt*.5,ve=[se.x,se.y-Re/2,se.x+Te/2,se.y,se.x,se.y+Re/2,se.x-Te/2,se.y],ze=X.type==="player"?2719929:12597547;k.poly(ve).fill({color:ze,alpha:X.type==="player"?.25:.2})}}}const U=[u,...m];for(const G of U){const X=wn(G.x,G.y),K=gt,$=gt*.5,se=[X.x,X.y-$/2,X.x+K/2,X.y,X.x,X.y+$/2,X.x-K/2,X.y],Te=G.type==="player"?3066993:15158332;k.poly(se).fill({color:Te,alpha:.2})}if(Ye){const G=m.find(X=>X.id===Ye);if(G){const X=wn(G.x,G.y),K=gt,$=gt*.5,se=[X.x,X.y-$/2,X.x+K/2,X.y,X.x,X.y+$/2,X.x-K/2,X.y];k.poly(se).fill({color:3447003,alpha:.6})}}if(Ve.length>0){const G=Ve[Ve.length-1],X=wn(G.x,G.y),K=gt,$=gt*.5,se=[X.x,X.y-$/2,X.x+K/2,X.y,X.x,X.y+$/2,X.x-K/2,X.y];k.poly(se).fill({color:15844367,alpha:.2})}for(const G of m){if(!G.plannedPath||G.plannedPath.length===0)continue;const X=G.plannedPath,K=X[0],$=wn(K.x,K.y);k.setStrokeStyle({width:3,color:15158332,alpha:.9}),k.moveTo($.x,$.y);for(const se of X.slice(1)){const Te=wn(se.x,se.y);k.lineTo(Te.x,Te.y)}k.stroke()}if(Ve.length===0)return;k.setStrokeStyle({width:6,color:15844367,alpha:1});const le=wn(u.x,u.y);k.moveTo(le.x,le.y);for(const G of Ve){const X=wn(G.x,G.y);k.lineTo(X.x,X.y)}k.stroke()},[u,m,Ve,Tr,Ye,Tn]);const nt=Ae.find(k=>k.id===ee)||Ae[0]||null,Pt=nt?Lr(nt):null,$e=sr(),fo=uo($e),qe=v==="player",Dn=Bn(),Za=D;return Q?z.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"16px",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:"16px",boxSizing:"border-box"},children:[z.jsxs("div",{style:{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},children:[z.jsxs("div",{style:{marginBottom:8,padding:"6px 10px",background:"#111322",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%"},children:[z.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[z.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["Ordre d'initiative (round ",S,")"]}),Dn&&z.jsxs("span",{style:{fontSize:11,color:"#f1c40f"},children:["Tour actuel :"," ",Dn.kind==="player"?"Joueur":Dn.id]})]}),z.jsx("div",{style:{display:"flex",gap:8,alignItems:"center",overflowX:"auto",paddingBottom:2},children:Za.map(k=>{const j=Dn&&k.id===Dn.id&&k.kind===Dn.kind,U=k.kind==="player",le=Ic(U?"player":"enemy"),G=U?{svg:le,label:"PJ"}:{svg:le,label:k.id};return z.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:4,borderRadius:6,border:j?"2px solid #f1c40f":"1px solid #333",background:j?"#1b1b30":"#101020",minWidth:48},children:[z.jsx("img",{src:G.svg,alt:G.label,style:{width:32,height:32,objectFit:"contain",filter:U?"none":"grayscale(0.2)"}}),z.jsx("span",{style:{fontSize:10,marginTop:2,color:"#d0d6e0",whiteSpace:"nowrap"},children:G.label}),z.jsxs("span",{style:{fontSize:9,color:"#9aa0b5"},children:["Init ",k.initiative]})]},`${k.kind}-${k.id}`)})})]}),z.jsx("h1",{style:{marginBottom:8},children:"Mini Donjon (test-GAME)"}),z.jsx("p",{style:{marginBottom:8},children:"Tour par tour simple. Cliquez sur la grille pour definir une trajectoire (max 5 cases), validez le dplacement, puis terminez le tour pour laisser l'IA des ennemis jouer."}),z.jsx("div",{ref:i,onClick:jr,style:{flex:"1 1 auto",border:"1px solid #333",overflow:"hidden",maxHeight:"min(80vh, 640px)",maxWidth:"min(100%, 1024px)"}}),z.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,flexWrap:"wrap"},children:[z.jsx("button",{type:"button",onClick:ts,style:{padding:"4px 8px",background:qe&&Ve.length?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:qe&&Ve.length?"pointer":"default"},disabled:!qe||Ve.length===0,children:"Valider le deplacement"}),z.jsx("button",{type:"button",onClick:Dr,style:{padding:"4px 8px",background:qe?"#e67e22":"#555",color:"#fff",border:"none",borderRadius:4,cursor:qe?"pointer":"default"},disabled:!qe,children:"Reinitialiser trajet"}),z.jsx("button",{type:"button",onClick:qa,style:{padding:"4px 8px",background:qe?"#9b59b6":"#555",color:"#fff",border:"none",borderRadius:4,cursor:qe?"pointer":"default"},disabled:!qe||w,children:"Fin du tour joueur"}),z.jsx("button",{type:"button",onClick:()=>hi("up"),style:{padding:"4px 8px",background:qe?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:qe?"pointer":"default",fontSize:11},disabled:!qe,children:"Regarder haut"}),z.jsx("button",{type:"button",onClick:()=>hi("down"),style:{padding:"4px 8px",background:qe?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:qe?"pointer":"default",fontSize:11},disabled:!qe,children:"Regarder bas"}),z.jsx("button",{type:"button",onClick:()=>hi("left"),style:{padding:"4px 8px",background:qe?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:qe?"pointer":"default",fontSize:11},disabled:!qe,children:"Regarder gauche"}),z.jsx("button",{type:"button",onClick:()=>hi("right"),style:{padding:"4px 8px",background:qe?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:qe?"pointer":"default",fontSize:11},disabled:!qe,children:"Regarder droite"}),!qe&&z.jsx("span",{style:{fontSize:12,alignSelf:"center"},children:"Tour des ennemis en cours..."})]})]}),z.jsxs("div",{style:{width:"360px",display:"flex",flexDirection:"column",gap:"12px"},children:[z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333"},children:[z.jsx("h2",{style:{margin:"0 0 8px"},children:"Etat du combat"}),z.jsxs("div",{children:[z.jsx("strong",{children:"Round :"})," ",S," |"," ",z.jsx("strong",{children:"Phase :"})," ",v==="player"?"Joueur":"Ennemis"]}),z.jsxs("div",{style:{fontSize:12,marginTop:4},children:[z.jsx("strong",{children:"Initiative PJ :"})," ",I??"en cours..."," "]}),z.jsxs("div",{children:[z.jsx("strong",{children:"Nom :"})," ",Fn.nom.nomcomplet]}),z.jsxs("div",{children:[z.jsx("strong",{children:"Niveau :"})," ",Fn.niveauGlobal," |"," ",z.jsx("strong",{children:"Classe :"})," ",Fn.classe[1].classeId]}),z.jsxs("div",{children:[z.jsx("strong",{children:"PV :"})," ",u.hp," / ",u.maxHp]}),z.jsxs("div",{children:[z.jsx("strong",{children:"CA :"})," ",Fn.CA]}),z.jsxs("div",{style:{marginTop:8},children:[z.jsx("strong",{children:"Caracs :"})," ","FOR ",Fn.caracs.force.FOR," | DEX"," ",Fn.caracs.dexterite.DEX," | CON"," ",Fn.caracs.constitution.CON]}),z.jsxs("div",{style:{marginTop:8,fontSize:12},children:[z.jsx("strong",{children:"Trajectoire :"})," ",Ve.length===0?"aucune":`(${u.x}, ${u.y}) -> `+Ve.map(k=>`(${k.x}, ${k.y})`).join(" -> ")]}),z.jsxs("div",{style:{marginTop:8,fontSize:11,opacity:.85},children:[z.jsx("strong",{children:"IA ennemis (debug) :"}),z.jsxs("div",{children:["Dernier appel :"," ",Er?`round ${Er.round}, phase ${Er.phase}`:"aucun"]}),z.jsxs("div",{children:["Dcisions reues :"," ",Mr===null?"n/a":`${Mr.length} (fallback: ${Ir?"oui":"non"})`]}),Zi&&z.jsxs("div",{children:["Erreur : ",Zi]})]})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#151524",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Ennemis"}),z.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Chaque ennemi est une entit propre. Capacits IA : dplacement, attaque au contact, attente si aucune option."}),z.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:m.map(k=>{var j;return z.jsxs("div",{style:{background:"#0f0f19",border:"1px solid #2a2a3a",borderRadius:8,padding:"8px 10px",display:"flex",flexDirection:"column",gap:6},children:[z.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[z.jsx("strong",{style:{color:"#f5f5f5"},children:k.id}),z.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["PV ",k.hp," / ",k.maxHp]})]}),z.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Position : (",k.x,", ",k.y,")"]}),z.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Initiative :"," ",typeof k.initiative=="number"?k.initiative:"non definie"]}),z.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Type : ",k.enemyTypeLabel||k.enemyTypeId||"inconnu"," ",k.aiRole?`(role: ${k.aiRole})`:""]}),z.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:H1.map(U=>z.jsx("span",{style:{background:U.color,color:"#0b0b12",borderRadius:4,padding:"2px 6px",fontSize:11,fontWeight:700},children:U.action.toUpperCase()},`${k.id}-${U.action}`))}),z.jsxs("div",{style:{fontSize:12,color:"#d0d6e0"},children:["Ce qu'il peut faire :"," ",H1.map(U=>U.label).join(" | ")]}),$e&&((j=$e.targeting)==null?void 0:j.target)==="enemy"&&(()=>{const U=li($e,k,u,[u,...m]),le=U.ok,G=Ye===k.id;return z.jsx("button",{type:"button",onClick:()=>{if(!le){pe(U.reason||`Cible ${k.id} invalide pour ${$e.name}.`);return}jt(k.id),fn("none"),pe(`Cible selectionnee: ${k.id}.`)},disabled:!le,style:{marginTop:6,alignSelf:"flex-start",padding:"4px 8px",fontSize:11,borderRadius:4,border:"none",cursor:le?"pointer":"default",background:le?"#3498db":"#555",color:"#fff",opacity:G?1:.9},children:G?"Cible actuelle":"Cibler avec l'action validee"})})(),z.jsxs("div",{style:{fontSize:12,color:"#9cb2ff"},children:["Dernire dcision IA : ",Fr(k.id)]})]},k.id)})})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Actions detaillees"}),z.jsxs("p",{style:{margin:0,fontSize:12,opacity:.85},children:["Source: ",z.jsx("code",{children:"action-game/actions/index.json"}),". Liste chargee et verifiee localement (phase, distance)."]}),z.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[z.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:[Ae.map(k=>{const j=Lr(k),U=(nt==null?void 0:nt.id)===k.id,le=k.actionCost.actionType==="action"?"#8e44ad":k.actionCost.actionType==="bonus"?"#27ae60":k.actionCost.actionType==="reaction"?"#e67e22":"#2980b9",G=U?"#6c5ce7":"#2a2a3a";return z.jsxs("button",{type:"button",onClick:()=>ie(k.id),style:{textAlign:"left",background:U?"#1e1e2f":"#0f0f19",color:"#f5f5f5",border:`1px solid ${G}`,borderRadius:6,padding:"8px 10px",cursor:"pointer"},children:[z.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,marginBottom:4,alignItems:"center"},children:[z.jsx("span",{style:{fontWeight:600},children:k.name}),z.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:le,color:"#fff"},children:k.actionCost.actionType})]}),z.jsx("div",{style:{fontSize:12,opacity:.9},children:k.summary||k.category}),z.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:4,fontSize:11,alignItems:"center"},children:[z.jsx("span",{style:{color:j.enabled?"#2ecc71":"#e74c3c"},children:j.enabled?"Disponible":j.reasons[0]||"Bloquee"}),z.jsx("span",{style:{color:"#9aa0b5"},children:ci(k.targeting)}),z.jsx("span",{style:{color:"#9aa0b5"},children:ui(k.usage)})]})]},k.id)}),Ae.length===0&&z.jsx("div",{style:{fontSize:12,opacity:.8},children:"Aucune action chargee pour le moment."})]}),nt&&z.jsxs("div",{style:{borderTop:"1px solid #2a2a3a",paddingTop:8,display:"flex",flexDirection:"column",gap:6},children:[z.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",fontSize:11},children:[z.jsx("span",{style:{background:"#2d2d40",color:"#d0d4f7",padding:"2px 6px",borderRadius:4},children:nt.category}),(po=nt.tags)==null?void 0:po.slice(0,4).map(k=>z.jsx("span",{style:{background:"#1f2a38",color:"#9bb0d6",padding:"2px 6px",borderRadius:4},children:k},k))]}),z.jsx("div",{style:{fontSize:12},children:nt.summary||"Pas de resume."}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Cout:"})," ",nt.actionCost.actionType," ","| Mouvement ",nt.actionCost.movementCost]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Portee:"})," ",ci(nt.targeting)]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Usage:"})," ",ui(nt.usage)]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Conditions:"}),z.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:[nt.conditions.length===0&&z.jsx("span",{style:{color:"#9aa0b5"},children:"Aucune condition."}),nt.conditions.map((k,j)=>z.jsxs("div",{style:{color:"#cfd3ec"},children:[rr(k),k.reason?`  ${k.reason}`:""]},`${k.type}-${j}`)),Pt&&z.jsxs("div",{style:{color:Pt.enabled?"#2ecc71":"#e74c3c"},children:["Etat:"," ",Pt.enabled?"OK pour ce tour":Pt.reasons.join(" | ")||"Bloque",Pt.details.length>0&&z.jsx("div",{style:{color:"#9aa0b5",marginTop:2},children:Pt.details.join(" / ")})]})]})]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Effets:"}),z.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:nt.effects.map((k,j)=>z.jsx("div",{style:{color:"#cfd3ec"},children:ir(k)},`${k.type}-${j}`))})]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Hints IA:"})," ",((rt=nt.aiHints)==null?void 0:rt.priority)||"n/a",z.jsxs("div",{style:{color:"#9aa0b5"},children:["Success: ",((mo=nt.aiHints)==null?void 0:mo.successLog)||"n/a"]}),z.jsxs("div",{style:{color:"#9aa0b5"},children:["Failure: ",((pi=nt.aiHints)==null?void 0:pi.failureLog)||"n/a"]})]}),z.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[z.jsx("button",{type:"button",onClick:()=>ao(nt),style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Previsualiser"}),z.jsx("button",{type:"button",onClick:()=>lo(nt),disabled:!(Pt!=null&&Pt.enabled),style:{padding:"4px 8px",background:Pt!=null&&Pt.enabled?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Pt!=null&&Pt.enabled?"pointer":"default",fontSize:12},children:"Valider l'action"})]})]})]})]}),fo&&z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Jets de des"}),z.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Choisir une action, la valider, puis lancer le jet de touche et/ou de degats. Mode auto: enchaine touche + degats."}),z.jsxs("div",{style:{fontSize:12},children:["Action validee :"," ",$e?`${$e.name} (${$e.id})`:"aucune (valider une action d'abord)"]}),z.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["normal","advantage","disadvantage"].map(k=>z.jsx("button",{type:"button",onClick:()=>R(k),style:{padding:"4px 8px",background:te===k?"#8e44ad":"#2c2c3a",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:k},k))}),z.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[z.jsx("button",{type:"button",onClick:es,disabled:!($e!=null&&$e.attack),style:{padding:"4px 8px",background:$e!=null&&$e.attack?"#2980b9":"#555",color:"#fff",border:"none",borderRadius:4,cursor:$e!=null&&$e.attack?"pointer":"default",fontSize:12},children:"Lancer jet de touche"}),z.jsx("button",{type:"button",onClick:Br,disabled:!($e!=null&&$e.damage),style:{padding:"4px 8px",background:$e!=null&&$e.damage?"#27ae60":"#555",color:"#fff",border:"none",borderRadius:4,cursor:$e!=null&&$e.damage?"pointer":"default",fontSize:12},children:"Lancer degats"}),z.jsx("button",{type:"button",onClick:co,style:{padding:"4px 8px",background:"#9b59b6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Mode auto (touche + degats)"})]}),z.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[z.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[z.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de touche"}),N?z.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["d20: ",N.d20.rolls.join(" / "),"  ",N.d20.total," ","| bonus ",N.bonus," | total ",N.total," ",N.isCrit?"(critique)":""]}):z.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lance."})]}),z.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[z.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de degats"}),_e?z.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["Des:"," ",_e.dice.length?_e.dice.map(k=>k.rolls.join("+")).join(" | "):""," ","| mod ",_e.flatModifier," | total ",_e.total," ",_e.isCrit?"(critique)":""]}):z.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lance."})]})]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Logs des jets:"}),z.jsxs("div",{style:{marginTop:4,display:"flex",flexDirection:"column",gap:2},children:[Pe.map((k,j)=>z.jsxs("div",{style:{color:"#dfe6ff"},children:["- ",k]},j)),Pe.length===0&&z.jsx("div",{style:{color:"#9aa0b5"},children:"Aucun jet enregistre."})]})]})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Zones d'effet (demo)"}),z.jsxs("p",{style:{margin:0,fontSize:12},children:["Ces boutons utilisent les helpers de ",z.jsx("code",{children:"boardEffects.ts"})," ","pour dessiner des zones en coordonnees de grille autour du joueur."]}),z.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:[z.jsx("button",{type:"button",onClick:Ka,style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cercle R=2"}),z.jsx("button",{type:"button",onClick:Qa,style:{padding:"4px 8px",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Rectangle 3x3"}),z.jsx("button",{type:"button",onClick:jn,style:{padding:"4px 8px",background:"#c0392b",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cone portee 4"}),z.jsx("button",{type:"button",onClick:()=>tr(k=>!k),style:{padding:"4px 8px",background:Tn?"#f1c40f":"#555",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:Tn?"Masquer vision":"Afficher vision"}),z.jsx("button",{type:"button",onClick:ho,style:{padding:"4px 8px",background:"#7f8c8d",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Effacer zones"})]})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",flex:"1 1 auto",display:"flex",flexDirection:"column"},children:[z.jsx("h2",{style:{margin:"0 0 8px"},children:"Log"}),z.jsx("div",{style:{flex:"1 1 auto",overflowY:"auto",fontSize:12,lineHeight:1.4},children:o.map((k,j)=>z.jsxs("div",{children:["- ",k]},j))})]})]})]}):z.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:16,boxSizing:"border-box"},children:[z.jsx("h1",{style:{marginBottom:8},children:"Prparation du combat"}),z.jsx("p",{style:{marginBottom:16,fontSize:13,maxWidth:480,textAlign:"center"},children:"Configurez le combat avant de lancer la grille : nombre d'ennemis, puis dmarrez pour effectuer les jets d'initiative et entrer en mode tour par tour."}),z.jsxs("div",{style:{padding:16,borderRadius:8,background:"#141421",border:"1px solid #333",minWidth:260,display:"flex",flexDirection:"column",gap:12},children:[z.jsxs("label",{style:{fontSize:13},children:["Nombre d'ennemis :",z.jsx("input",{type:"number",min:1,max:8,value:Ce,onChange:k=>be(Math.max(1,Math.min(8,Number(k.target.value)||1))),style:{marginLeft:8,width:60,background:"#0f0f19",color:"#f5f5f5",border:"1px solid #333",borderRadius:4,padding:"2px 4px"}})]}),z.jsxs("p",{style:{fontSize:11,color:"#b0b8c4",margin:0},children:["Taille de la carte : actuellement fixe (",Ar," x ",Qn,"). Un redimensionnement dynamique demandera une refonte de boardConfig.ts."]}),z.jsx("button",{type:"button",onClick:()=>{if(f.length===0){pe("Aucun type d'ennemi charge (enemyTypes). Impossible de generer le combat.");return}const k=[],j=U=>f[U%f.length];for(let U=0;U<Ce;U++)k.push(c6(U,j(U),h6(U)));y(k),b(1),E(!1),O([]),ae(0),ne(!0)},style:{marginTop:8,padding:"6px 12px",background:"#2ecc71",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontWeight:600,fontSize:13},children:"Lancer le combat"})]})]})},f6=document.getElementById("root");f2.createRoot(f6).render(z.jsx(d6,{}));export{og as $,Op as A,Xt as B,kn as C,tt as D,me as E,up as F,Ha as G,Uf as H,Vi as I,Eg as J,Dg as K,ro as L,Ie as M,ct as N,ft as O,Bt as P,ny as Q,_c as R,Dc as S,ka as T,gc as U,Wf as V,Wu as W,Hf as X,lg as Y,Oa as Z,wt as _,Pp as a,sp as a0,Np as a1,Me as a2,We as a3,ay as a4,Ry as a5,Cy as a6,Ky as a7,Zy as a8,r3 as a9,s3 as aa,o3 as ab,Da as ac,za as ad,bc as ae,R1 as af,t0 as ag,o1 as ah,i1 as ai,F1 as aj,a8 as ak,Je as al,no as am,E2 as an,Ga as ao,i0 as ap,bn as b,wy as c,eo as d,Mt as e,s1 as f,xy as g,Fa as h,jc as i,Bp as j,yp as k,An as l,Rp as m,Mc as n,qy as o,Qy as p,t3 as q,G2 as r,i3 as s,Le as t,T2 as u,a3 as v,et as w,hn as x,np as y,Cn as z};
