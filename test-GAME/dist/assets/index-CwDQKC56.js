const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-Dn0fCXBD.js","assets/webworkerAll-5MS6rG13.js","assets/colorToUniform-C1FZDy57.js","assets/WebGPURenderer-B0bjNaV1.js","assets/SharedSystems-BT1ZcATp.js","assets/WebGLRenderer-D0Bzdj7-.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function uc(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var lu={exports:{}},ds={},uu={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf;function Xy(){if(nf)return Ce;nf=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function _(E){return E===null||typeof E!="object"?null:(E=y&&E[y]||E["@@iterator"],typeof E=="function"?E:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function w(E,O,me){this.props=E,this.context=O,this.refs=k,this.updater=me||v}w.prototype.isReactComponent={},w.prototype.setState=function(E,O){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,O,"setState")},w.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function b(){}b.prototype=w.prototype;function P(E,O,me){this.props=E,this.context=O,this.refs=k,this.updater=me||v}var M=P.prototype=new b;M.constructor=P,S(M,w.prototype),M.isPureReactComponent=!0;var R=Array.isArray,W=Object.prototype.hasOwnProperty,N={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function ee(E,O,me){var _e,ve={},ne=null,Ee=null;if(O!=null)for(_e in O.ref!==void 0&&(Ee=O.ref),O.key!==void 0&&(ne=""+O.key),O)W.call(O,_e)&&!D.hasOwnProperty(_e)&&(ve[_e]=O[_e]);var Ae=arguments.length-2;if(Ae===1)ve.children=me;else if(1<Ae){for(var Te=Array(Ae),et=0;et<Ae;et++)Te[et]=arguments[et+2];ve.children=Te}if(E&&E.defaultProps)for(_e in Ae=E.defaultProps,Ae)ve[_e]===void 0&&(ve[_e]=Ae[_e]);return{$$typeof:i,type:E,key:ne,ref:Ee,props:ve,_owner:N.current}}function le(E,O){return{$$typeof:i,type:E.type,key:O,ref:E.ref,props:E.props,_owner:E._owner}}function Y(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function J(E){var O={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(me){return O[me]})}var we=/\/+/g;function Se(E,O){return typeof E=="object"&&E!==null&&E.key!=null?J(""+E.key):O.toString(36)}function fe(E,O,me,_e,ve){var ne=typeof E;(ne==="undefined"||ne==="boolean")&&(E=null);var Ee=!1;if(E===null)Ee=!0;else switch(ne){case"string":case"number":Ee=!0;break;case"object":switch(E.$$typeof){case i:case e:Ee=!0}}if(Ee)return Ee=E,ve=ve(Ee),E=_e===""?"."+Se(Ee,0):_e,R(ve)?(me="",E!=null&&(me=E.replace(we,"$&/")+"/"),fe(ve,O,me,"",function(et){return et})):ve!=null&&(Y(ve)&&(ve=le(ve,me+(!ve.key||Ee&&Ee.key===ve.key?"":(""+ve.key).replace(we,"$&/")+"/")+E)),O.push(ve)),1;if(Ee=0,_e=_e===""?".":_e+":",R(E))for(var Ae=0;Ae<E.length;Ae++){ne=E[Ae];var Te=_e+Se(ne,Ae);Ee+=fe(ne,O,me,Te,ve)}else if(Te=_(E),typeof Te=="function")for(E=Te.call(E),Ae=0;!(ne=E.next()).done;)ne=ne.value,Te=_e+Se(ne,Ae++),Ee+=fe(ne,O,me,Te,ve);else if(ne==="object")throw O=String(E),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return Ee}function Ke(E,O,me){if(E==null)return E;var _e=[],ve=0;return fe(E,_e,"","",function(ne){return O.call(me,ne,ve++)}),_e}function K(E){if(E._status===-1){var O=E._result;O=O(),O.then(function(me){(E._status===0||E._status===-1)&&(E._status=1,E._result=me)},function(me){(E._status===0||E._status===-1)&&(E._status=2,E._result=me)}),E._status===-1&&(E._status=0,E._result=O)}if(E._status===1)return E._result.default;throw E._result}var q={current:null},X={transition:null},V={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:X,ReactCurrentOwner:N};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:Ke,forEach:function(E,O,me){Ke(E,function(){O.apply(this,arguments)},me)},count:function(E){var O=0;return Ke(E,function(){O++}),O},toArray:function(E){return Ke(E,function(O){return O})||[]},only:function(E){if(!Y(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Ce.Component=w,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=P,Ce.StrictMode=s,Ce.Suspense=f,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Ce.act=Q,Ce.cloneElement=function(E,O,me){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var _e=S({},E.props),ve=E.key,ne=E.ref,Ee=E._owner;if(O!=null){if(O.ref!==void 0&&(ne=O.ref,Ee=N.current),O.key!==void 0&&(ve=""+O.key),E.type&&E.type.defaultProps)var Ae=E.type.defaultProps;for(Te in O)W.call(O,Te)&&!D.hasOwnProperty(Te)&&(_e[Te]=O[Te]===void 0&&Ae!==void 0?Ae[Te]:O[Te])}var Te=arguments.length-2;if(Te===1)_e.children=me;else if(1<Te){Ae=Array(Te);for(var et=0;et<Te;et++)Ae[et]=arguments[et+2];_e.children=Ae}return{$$typeof:i,type:E.type,key:ve,ref:ne,props:_e,_owner:Ee}},Ce.createContext=function(E){return E={$$typeof:u,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:l,_context:E},E.Consumer=E},Ce.createElement=ee,Ce.createFactory=function(E){var O=ee.bind(null,E);return O.type=E,O},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(E){return{$$typeof:h,render:E}},Ce.isValidElement=Y,Ce.lazy=function(E){return{$$typeof:g,_payload:{_status:-1,_result:E},_init:K}},Ce.memo=function(E,O){return{$$typeof:p,type:E,compare:O===void 0?null:O}},Ce.startTransition=function(E){var O=X.transition;X.transition={};try{E()}finally{X.transition=O}},Ce.unstable_act=Q,Ce.useCallback=function(E,O){return q.current.useCallback(E,O)},Ce.useContext=function(E){return q.current.useContext(E)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(E){return q.current.useDeferredValue(E)},Ce.useEffect=function(E,O){return q.current.useEffect(E,O)},Ce.useId=function(){return q.current.useId()},Ce.useImperativeHandle=function(E,O,me){return q.current.useImperativeHandle(E,O,me)},Ce.useInsertionEffect=function(E,O){return q.current.useInsertionEffect(E,O)},Ce.useLayoutEffect=function(E,O){return q.current.useLayoutEffect(E,O)},Ce.useMemo=function(E,O){return q.current.useMemo(E,O)},Ce.useReducer=function(E,O,me){return q.current.useReducer(E,O,me)},Ce.useRef=function(E){return q.current.useRef(E)},Ce.useState=function(E){return q.current.useState(E)},Ce.useSyncExternalStore=function(E,O,me){return q.current.useSyncExternalStore(E,O,me)},Ce.useTransition=function(){return q.current.useTransition()},Ce.version="18.3.1",Ce}var rf;function cc(){return rf||(rf=1,uu.exports=Xy()),uu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf;function qy(){if(sf)return ds;sf=1;var i=cc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,p){var g,y={},_=null,v=null;p!==void 0&&(_=""+p),f.key!==void 0&&(_=""+f.key),f.ref!==void 0&&(v=f.ref);for(g in f)s.call(f,g)&&!l.hasOwnProperty(g)&&(y[g]=f[g]);if(h&&h.defaultProps)for(g in f=h.defaultProps,f)y[g]===void 0&&(y[g]=f[g]);return{$$typeof:e,type:h,key:_,ref:v,props:y,_owner:o.current}}return ds.Fragment=t,ds.jsx=u,ds.jsxs=u,ds}var of;function Ky(){return of||(of=1,lu.exports=qy()),lu.exports}var z=Ky(),qo={},cu={exports:{}},Nt={},hu={exports:{}},du={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af;function Qy(){return af||(af=1,(function(i){function e(X,V){var Q=X.length;X.push(V);e:for(;0<Q;){var E=Q-1>>>1,O=X[E];if(0<o(O,V))X[E]=V,X[Q]=O,Q=E;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var V=X[0],Q=X.pop();if(Q!==V){X[0]=Q;e:for(var E=0,O=X.length,me=O>>>1;E<me;){var _e=2*(E+1)-1,ve=X[_e],ne=_e+1,Ee=X[ne];if(0>o(ve,Q))ne<O&&0>o(Ee,ve)?(X[E]=Ee,X[ne]=Q,E=ne):(X[E]=ve,X[_e]=Q,E=_e);else if(ne<O&&0>o(Ee,Q))X[E]=Ee,X[ne]=Q,E=ne;else break e}}return V}function o(X,V){var Q=X.sortIndex-V.sortIndex;return Q!==0?Q:X.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var f=[],p=[],g=1,y=null,_=3,v=!1,S=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(X){for(var V=t(p);V!==null;){if(V.callback===null)s(p);else if(V.startTime<=X)s(p),V.sortIndex=V.expirationTime,e(f,V);else break;V=t(p)}}function R(X){if(k=!1,M(X),!S)if(t(f)!==null)S=!0,K(W);else{var V=t(p);V!==null&&q(R,V.startTime-X)}}function W(X,V){S=!1,k&&(k=!1,b(ee),ee=-1),v=!0;var Q=_;try{for(M(V),y=t(f);y!==null&&(!(y.expirationTime>V)||X&&!J());){var E=y.callback;if(typeof E=="function"){y.callback=null,_=y.priorityLevel;var O=E(y.expirationTime<=V);V=i.unstable_now(),typeof O=="function"?y.callback=O:y===t(f)&&s(f),M(V)}else s(f);y=t(f)}if(y!==null)var me=!0;else{var _e=t(p);_e!==null&&q(R,_e.startTime-V),me=!1}return me}finally{y=null,_=Q,v=!1}}var N=!1,D=null,ee=-1,le=5,Y=-1;function J(){return!(i.unstable_now()-Y<le)}function we(){if(D!==null){var X=i.unstable_now();Y=X;var V=!0;try{V=D(!0,X)}finally{V?Se():(N=!1,D=null)}}else N=!1}var Se;if(typeof P=="function")Se=function(){P(we)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Ke=fe.port2;fe.port1.onmessage=we,Se=function(){Ke.postMessage(null)}}else Se=function(){w(we,0)};function K(X){D=X,N||(N=!0,Se())}function q(X,V){ee=w(function(){X(i.unstable_now())},V)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){S||v||(S=!0,K(W))},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(X){switch(_){case 1:case 2:case 3:var V=3;break;default:V=_}var Q=_;_=V;try{return X()}finally{_=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,V){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Q=_;_=X;try{return V()}finally{_=Q}},i.unstable_scheduleCallback=function(X,V,Q){var E=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?E+Q:E):Q=E,X){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Q+O,X={id:g++,callback:V,priorityLevel:X,startTime:Q,expirationTime:O,sortIndex:-1},Q>E?(X.sortIndex=Q,e(p,X),t(f)===null&&X===t(p)&&(k?(b(ee),ee=-1):k=!0,q(R,Q-E))):(X.sortIndex=O,e(f,X),S||v||(S=!0,K(W))),X},i.unstable_shouldYield=J,i.unstable_wrapCallback=function(X){var V=_;return function(){var Q=_;_=V;try{return X.apply(this,arguments)}finally{_=Q}}}})(du)),du}var lf;function Zy(){return lf||(lf=1,hu.exports=Qy()),hu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf;function Jy(){if(uf)return Nt;uf=1;var i=cc(),e=Zy();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,r){u(n,r),u(n+"Capture",r)}function u(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function _(n){return f.call(y,n)?!0:f.call(g,n)?!1:p.test(n)?y[n]=!0:(g[n]=!0,!1)}function v(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,r,a,c){if(r===null||typeof r>"u"||v(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function k(n,r,a,c,d,m,x){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=m,this.removeEmptyString=x}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){w[n]=new k(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];w[r]=new k(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){w[n]=new k(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){w[n]=new k(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){w[n]=new k(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){w[n]=new k(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){w[n]=new k(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){w[n]=new k(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){w[n]=new k(n,5,!1,n.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function P(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(b,P);w[r]=new k(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(b,P);w[r]=new k(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(b,P);w[r]=new k(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){w[n]=new k(n,1,!1,n.toLowerCase(),null,!1,!1)}),w.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){w[n]=new k(n,1,!1,n.toLowerCase(),null,!0,!0)});function M(n,r,a,c){var d=w.hasOwnProperty(r)?w[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,a,d,c)&&(a=null),c||d===null?_(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),N=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),J=Symbol.for("react.context"),we=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),X=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var Q=Object.assign,E;function O(n){if(E===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);E=r&&r[1]||""}return`
`+E+n}var me=!1;function _e(n,r){if(!n||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(B){var c=B}Reflect.construct(n,[],r)}else{try{r.call()}catch(B){c=B}n.call(r.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),m=c.stack.split(`
`),x=d.length-1,C=m.length-1;1<=x&&0<=C&&d[x]!==m[C];)C--;for(;1<=x&&0<=C;x--,C--)if(d[x]!==m[C]){if(x!==1||C!==1)do if(x--,C--,0>C||d[x]!==m[C]){var A=`
`+d[x].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=x&&0<=C);break}}}finally{me=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?O(n):""}function ve(n){switch(n.tag){case 5:return O(n.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return n=_e(n.type,!1),n;case 11:return n=_e(n.type.render,!1),n;case 1:return n=_e(n.type,!0),n;default:return""}}function ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case N:return"Portal";case le:return"Profiler";case ee:return"StrictMode";case Se:return"Suspense";case fe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case J:return(n.displayName||"Context")+".Consumer";case Y:return(n._context.displayName||"Context")+".Provider";case we:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ke:return r=n.displayName||null,r!==null?r:ne(n.type)||"Memo";case K:r=n._payload,n=n._init;try{return ne(n(r))}catch{}}return null}function Ee(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(r);case 8:return r===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ae(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Te(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function et(n){var r=Te(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(x){c=""+x,m.call(this,x)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function un(n){n._valueTracker||(n._valueTracker=et(n))}function Xt(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Te(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Rt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function $t(n,r){var a=r.checked;return Q({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function qt(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Ae(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Rn(n,r){r=r.checked,r!=null&&M(n,"checked",r,!1)}function In(n,r){Rn(n,r);var a=Ae(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Ur(n,r.type,a):r.hasOwnProperty("defaultValue")&&Ur(n,r.type,Ae(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Yn(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ur(n,r,a){(r!=="number"||Rt(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var _r=Array.isArray;function Xn(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ae(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Ri(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ns(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(_r(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Ae(a)}}function Os(n,r){var a=Ae(r.value),c=Ae(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function js(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function $s(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ii(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?$s(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Wr,Gs=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Wr=Wr||document.createElement("div"),Wr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Wr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function vr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ve=["Webkit","ms","Moz","O"];Object.keys(wr).forEach(function(n){Ve.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),wr[r]=wr[n]})});function ht(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||wr.hasOwnProperty(n)&&wr[n]?(""+r).trim():r+"px"}function We(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=ht(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Kt=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hr(n,r){if(r){if(Kt[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Vr(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yr=null;function Xr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var I=null,j=null,Z=null;function oe(n){if(n=Qi(n)){if(typeof I!="function")throw Error(t(280));var r=n.stateNode;r&&(r=uo(r),I(n.stateNode,n.type,r))}}function pe(n){j?Z?Z.push(n):Z=[n]:j=n}function ye(){if(j){var n=j,r=Z;if(Z=j=null,oe(n),r)for(n=0;n<r.length;n++)oe(r[n])}}function Fe(n,r){return n(r)}function ge(){}var tt=!1;function bt(n,r,a){if(tt)return n(r,a);tt=!0;try{return Fe(n,r,a)}finally{tt=!1,(j!==null||Z!==null)&&(ge(),ye())}}function nt(n,r){var a=n.stateNode;if(a===null)return null;var c=uo(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var ot=!1;if(h)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){ot=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{ot=!1}function Pt(n,r,a,c,d,m,x,C,A){var B=Array.prototype.slice.call(arguments,3);try{r.apply(a,B)}catch(G){this.onError(G)}}var Ie=!1,Qt=null,It=!1,Zt=null,Fn={onError:function(n){Ie=!0,Qt=n}};function ng(n,r,a,c,d,m,x,C,A){Ie=!1,Qt=null,Pt.apply(Fn,arguments)}function rg(n,r,a,c,d,m,x,C,A){if(ng.apply(this,arguments),Ie){if(Ie){var B=Qt;Ie=!1,Qt=null}else throw Error(t(198));It||(It=!0,Zt=B)}}function Sr(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Ac(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function bc(n){if(Sr(n)!==n)throw Error(t(188))}function ig(n){var r=n.alternate;if(!r){if(r=Sr(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return bc(d),n;if(m===c)return bc(d),r;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var x=!1,C=d.child;C;){if(C===a){x=!0,a=d,c=m;break}if(C===c){x=!0,c=d,a=m;break}C=C.sibling}if(!x){for(C=m.child;C;){if(C===a){x=!0,a=m,c=d;break}if(C===c){x=!0,c=m,a=d;break}C=C.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function Pc(n){return n=ig(n),n!==null?Tc(n):null}function Tc(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Tc(n);if(r!==null)return r;n=n.sibling}return null}var Mc=e.unstable_scheduleCallback,Ec=e.unstable_cancelCallback,sg=e.unstable_shouldYield,og=e.unstable_requestPaint,rt=e.unstable_now,ag=e.unstable_getCurrentPriorityLevel,Ta=e.unstable_ImmediatePriority,Rc=e.unstable_UserBlockingPriority,Us=e.unstable_NormalPriority,lg=e.unstable_LowPriority,Ic=e.unstable_IdlePriority,Ws=null,kn=null;function ug(n){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Ws,n,void 0,(n.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:dg,cg=Math.log,hg=Math.LN2;function dg(n){return n>>>=0,n===0?32:31-(cg(n)/hg|0)|0}var Hs=64,Vs=4194304;function Fi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ys(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,x=a&268435455;if(x!==0){var C=x&~d;C!==0?c=Fi(C):(m&=x,m!==0&&(c=Fi(m)))}else x=a&~d,x!==0?c=Fi(x):m!==0&&(c=Fi(m));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,m=r&-r,d>=m||d===16&&(m&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-cn(r),d=1<<a,c|=n[a],r&=~d;return c}function fg(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pg(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var x=31-cn(m),C=1<<x,A=d[x];A===-1?((C&a)===0||(C&c)!==0)&&(d[x]=fg(C,r)):A<=r&&(n.expiredLanes|=C),m&=~C}}function Ma(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Fc(){var n=Hs;return Hs<<=1,(Hs&4194240)===0&&(Hs=64),n}function Ea(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Li(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-cn(r),n[r]=a}function mg(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-cn(a),m=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Ra(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-cn(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Le=0;function Lc(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Bc,Ia,zc,Dc,Nc,Fa=!1,Xs=[],qn=null,Kn=null,Qn=null,Bi=new Map,zi=new Map,Zn=[],gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oc(n,r){switch(n){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":Bi.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":zi.delete(r.pointerId)}}function Di(n,r,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},r!==null&&(r=Qi(r),r!==null&&Ia(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function yg(n,r,a,c,d){switch(r){case"focusin":return qn=Di(qn,n,r,a,c,d),!0;case"dragenter":return Kn=Di(Kn,n,r,a,c,d),!0;case"mouseover":return Qn=Di(Qn,n,r,a,c,d),!0;case"pointerover":var m=d.pointerId;return Bi.set(m,Di(Bi.get(m)||null,n,r,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,zi.set(m,Di(zi.get(m)||null,n,r,a,c,d)),!0}return!1}function jc(n){var r=Cr(n.target);if(r!==null){var a=Sr(r);if(a!==null){if(r=a.tag,r===13){if(r=Ac(a),r!==null){n.blockedOn=r,Nc(n.priority,function(){zc(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qs(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Ba(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Yr=c,a.target.dispatchEvent(c),Yr=null}else return r=Qi(a),r!==null&&Ia(r),n.blockedOn=a,!1;r.shift()}return!0}function $c(n,r,a){qs(n)&&a.delete(r)}function xg(){Fa=!1,qn!==null&&qs(qn)&&(qn=null),Kn!==null&&qs(Kn)&&(Kn=null),Qn!==null&&qs(Qn)&&(Qn=null),Bi.forEach($c),zi.forEach($c)}function Ni(n,r){n.blockedOn===r&&(n.blockedOn=null,Fa||(Fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xg)))}function Oi(n){function r(d){return Ni(d,n)}if(0<Xs.length){Ni(Xs[0],n);for(var a=1;a<Xs.length;a++){var c=Xs[a];c.blockedOn===n&&(c.blockedOn=null)}}for(qn!==null&&Ni(qn,n),Kn!==null&&Ni(Kn,n),Qn!==null&&Ni(Qn,n),Bi.forEach(r),zi.forEach(r),a=0;a<Zn.length;a++)c=Zn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Zn.length&&(a=Zn[0],a.blockedOn===null);)jc(a),a.blockedOn===null&&Zn.shift()}var qr=R.ReactCurrentBatchConfig,Ks=!0;function _g(n,r,a,c){var d=Le,m=qr.transition;qr.transition=null;try{Le=1,La(n,r,a,c)}finally{Le=d,qr.transition=m}}function vg(n,r,a,c){var d=Le,m=qr.transition;qr.transition=null;try{Le=4,La(n,r,a,c)}finally{Le=d,qr.transition=m}}function La(n,r,a,c){if(Ks){var d=Ba(n,r,a,c);if(d===null)Za(n,r,c,Qs,a),Oc(n,c);else if(yg(d,n,r,a,c))c.stopPropagation();else if(Oc(n,c),r&4&&-1<gg.indexOf(n)){for(;d!==null;){var m=Qi(d);if(m!==null&&Bc(m),m=Ba(n,r,a,c),m===null&&Za(n,r,c,Qs,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Za(n,r,c,null,a)}}var Qs=null;function Ba(n,r,a,c){if(Qs=null,n=Xr(c),n=Cr(n),n!==null)if(r=Sr(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Ac(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Qs=n,null}function Gc(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ag()){case Ta:return 1;case Rc:return 4;case Us:case lg:return 16;case Ic:return 536870912;default:return 16}default:return 16}}var Jn=null,za=null,Zs=null;function Uc(){if(Zs)return Zs;var n,r=za,a=r.length,c,d="value"in Jn?Jn.value:Jn.textContent,m=d.length;for(n=0;n<a&&r[n]===d[n];n++);var x=a-n;for(c=1;c<=x&&r[a-c]===d[m-c];c++);return Zs=d.slice(n,1<c?1-c:void 0)}function Js(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function eo(){return!0}function Wc(){return!1}function Gt(n){function r(a,c,d,m,x){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?eo:Wc,this.isPropagationStopped=Wc,this}return Q(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),r}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Da=Gt(Kr),ji=Q({},Kr,{view:0,detail:0}),wg=Gt(ji),Na,Oa,$i,to=Q({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$i&&($i&&n.type==="mousemove"?(Na=n.screenX-$i.screenX,Oa=n.screenY-$i.screenY):Oa=Na=0,$i=n),Na)},movementY:function(n){return"movementY"in n?n.movementY:Oa}}),Hc=Gt(to),Sg=Q({},to,{dataTransfer:0}),Cg=Gt(Sg),kg=Q({},ji,{relatedTarget:0}),ja=Gt(kg),Ag=Q({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),bg=Gt(Ag),Pg=Q({},Kr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Tg=Gt(Pg),Mg=Q({},Kr,{data:0}),Vc=Gt(Mg),Eg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ig={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fg(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Ig[n])?!!r[n]:!1}function $a(){return Fg}var Lg=Q({},ji,{key:function(n){if(n.key){var r=Eg[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Js(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Rg[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(n){return n.type==="keypress"?Js(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Js(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Bg=Gt(Lg),zg=Q({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yc=Gt(zg),Dg=Q({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),Ng=Gt(Dg),Og=Q({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),jg=Gt(Og),$g=Q({},to,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Gg=Gt($g),Ug=[9,13,27,32],Ga=h&&"CompositionEvent"in window,Gi=null;h&&"documentMode"in document&&(Gi=document.documentMode);var Wg=h&&"TextEvent"in window&&!Gi,Xc=h&&(!Ga||Gi&&8<Gi&&11>=Gi),qc=" ",Kc=!1;function Qc(n,r){switch(n){case"keyup":return Ug.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qr=!1;function Hg(n,r){switch(n){case"compositionend":return Zc(r);case"keypress":return r.which!==32?null:(Kc=!0,qc);case"textInput":return n=r.data,n===qc&&Kc?null:n;default:return null}}function Vg(n,r){if(Qr)return n==="compositionend"||!Ga&&Qc(n,r)?(n=Uc(),Zs=za=Jn=null,Qr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Xc&&r.locale!=="ko"?null:r.data;default:return null}}var Yg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Yg[n.type]:r==="textarea"}function eh(n,r,a,c){pe(c),r=oo(r,"onChange"),0<r.length&&(a=new Da("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var Ui=null,Wi=null;function Xg(n){xh(n,0)}function no(n){var r=ni(n);if(Xt(r))return n}function qg(n,r){if(n==="change")return r}var th=!1;if(h){var Ua;if(h){var Wa="oninput"in document;if(!Wa){var nh=document.createElement("div");nh.setAttribute("oninput","return;"),Wa=typeof nh.oninput=="function"}Ua=Wa}else Ua=!1;th=Ua&&(!document.documentMode||9<document.documentMode)}function rh(){Ui&&(Ui.detachEvent("onpropertychange",ih),Wi=Ui=null)}function ih(n){if(n.propertyName==="value"&&no(Wi)){var r=[];eh(r,Wi,n,Xr(n)),bt(Xg,r)}}function Kg(n,r,a){n==="focusin"?(rh(),Ui=r,Wi=a,Ui.attachEvent("onpropertychange",ih)):n==="focusout"&&rh()}function Qg(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return no(Wi)}function Zg(n,r){if(n==="click")return no(r)}function Jg(n,r){if(n==="input"||n==="change")return no(r)}function ey(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var hn=typeof Object.is=="function"?Object.is:ey;function Hi(n,r){if(hn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!f.call(r,d)||!hn(n[d],r[d]))return!1}return!0}function sh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function oh(n,r){var a=sh(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=sh(a)}}function ah(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?ah(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function lh(){for(var n=window,r=Rt();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Rt(n.document)}return r}function Ha(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function ty(n){var r=lh(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&ah(a.ownerDocument.documentElement,a)){if(c!==null&&Ha(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=oh(a,m);var x=oh(a,c);d&&x&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(r),n.extend(x.node,x.offset)):(r.setEnd(x.node,x.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ny=h&&"documentMode"in document&&11>=document.documentMode,Zr=null,Va=null,Vi=null,Ya=!1;function uh(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ya||Zr==null||Zr!==Rt(c)||(c=Zr,"selectionStart"in c&&Ha(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Vi&&Hi(Vi,c)||(Vi=c,c=oo(Va,"onSelect"),0<c.length&&(r=new Da("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Zr)))}function ro(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Jr={animationend:ro("Animation","AnimationEnd"),animationiteration:ro("Animation","AnimationIteration"),animationstart:ro("Animation","AnimationStart"),transitionend:ro("Transition","TransitionEnd")},Xa={},ch={};h&&(ch=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function io(n){if(Xa[n])return Xa[n];if(!Jr[n])return n;var r=Jr[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in ch)return Xa[n]=r[a];return n}var hh=io("animationend"),dh=io("animationiteration"),fh=io("animationstart"),ph=io("transitionend"),mh=new Map,gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(n,r){mh.set(n,r),l(r,[n])}for(var qa=0;qa<gh.length;qa++){var Ka=gh[qa],ry=Ka.toLowerCase(),iy=Ka[0].toUpperCase()+Ka.slice(1);er(ry,"on"+iy)}er(hh,"onAnimationEnd"),er(dh,"onAnimationIteration"),er(fh,"onAnimationStart"),er("dblclick","onDoubleClick"),er("focusin","onFocus"),er("focusout","onBlur"),er(ph,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function yh(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,rg(c,r,void 0,n),n.currentTarget=null}function xh(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var x=c.length-1;0<=x;x--){var C=c[x],A=C.instance,B=C.currentTarget;if(C=C.listener,A!==m&&d.isPropagationStopped())break e;yh(d,C,B),m=A}else for(x=0;x<c.length;x++){if(C=c[x],A=C.instance,B=C.currentTarget,C=C.listener,A!==m&&d.isPropagationStopped())break e;yh(d,C,B),m=A}}}if(It)throw n=Zt,It=!1,Zt=null,n}function Oe(n,r){var a=r[il];a===void 0&&(a=r[il]=new Set);var c=n+"__bubble";a.has(c)||(_h(r,n,2,!1),a.add(c))}function Qa(n,r,a){var c=0;r&&(c|=4),_h(a,n,c,r)}var so="_reactListening"+Math.random().toString(36).slice(2);function Xi(n){if(!n[so]){n[so]=!0,s.forEach(function(a){a!=="selectionchange"&&(sy.has(a)||Qa(a,!1,n),Qa(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[so]||(r[so]=!0,Qa("selectionchange",!1,r))}}function _h(n,r,a,c){switch(Gc(r)){case 1:var d=_g;break;case 4:d=vg;break;default:d=La}a=d.bind(null,r,a,n),d=void 0,!ot||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function Za(n,r,a,c,d){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(x===4)for(x=c.return;x!==null;){var A=x.tag;if((A===3||A===4)&&(A=x.stateNode.containerInfo,A===d||A.nodeType===8&&A.parentNode===d))return;x=x.return}for(;C!==null;){if(x=Cr(C),x===null)return;if(A=x.tag,A===5||A===6){c=m=x;continue e}C=C.parentNode}}c=c.return}bt(function(){var B=m,G=Xr(a),U=[];e:{var $=mh.get(n);if($!==void 0){var te=Da,ie=n;switch(n){case"keypress":if(Js(a)===0)break e;case"keydown":case"keyup":te=Bg;break;case"focusin":ie="focus",te=ja;break;case"focusout":ie="blur",te=ja;break;case"beforeblur":case"afterblur":te=ja;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Cg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Ng;break;case hh:case dh:case fh:te=bg;break;case ph:te=jg;break;case"scroll":te=wg;break;case"wheel":te=Gg;break;case"copy":case"cut":case"paste":te=Tg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Yc}var se=(r&4)!==0,it=!se&&n==="scroll",F=se?$!==null?$+"Capture":null:$;se=[];for(var T=B,L;T!==null;){L=T;var H=L.stateNode;if(L.tag===5&&H!==null&&(L=H,F!==null&&(H=nt(T,F),H!=null&&se.push(qi(T,H,L)))),it)break;T=T.return}0<se.length&&($=new te($,ie,null,a,G),U.push({event:$,listeners:se}))}}if((r&7)===0){e:{if($=n==="mouseover"||n==="pointerover",te=n==="mouseout"||n==="pointerout",$&&a!==Yr&&(ie=a.relatedTarget||a.fromElement)&&(Cr(ie)||ie[Ln]))break e;if((te||$)&&($=G.window===G?G:($=G.ownerDocument)?$.defaultView||$.parentWindow:window,te?(ie=a.relatedTarget||a.toElement,te=B,ie=ie?Cr(ie):null,ie!==null&&(it=Sr(ie),ie!==it||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(te=null,ie=B),te!==ie)){if(se=Hc,H="onMouseLeave",F="onMouseEnter",T="mouse",(n==="pointerout"||n==="pointerover")&&(se=Yc,H="onPointerLeave",F="onPointerEnter",T="pointer"),it=te==null?$:ni(te),L=ie==null?$:ni(ie),$=new se(H,T+"leave",te,a,G),$.target=it,$.relatedTarget=L,H=null,Cr(G)===B&&(se=new se(F,T+"enter",ie,a,G),se.target=L,se.relatedTarget=it,H=se),it=H,te&&ie)t:{for(se=te,F=ie,T=0,L=se;L;L=ei(L))T++;for(L=0,H=F;H;H=ei(H))L++;for(;0<T-L;)se=ei(se),T--;for(;0<L-T;)F=ei(F),L--;for(;T--;){if(se===F||F!==null&&se===F.alternate)break t;se=ei(se),F=ei(F)}se=null}else se=null;te!==null&&vh(U,$,te,se,!1),ie!==null&&it!==null&&vh(U,it,ie,se,!0)}}e:{if($=B?ni(B):window,te=$.nodeName&&$.nodeName.toLowerCase(),te==="select"||te==="input"&&$.type==="file")var ae=qg;else if(Jc($))if(th)ae=Jg;else{ae=Qg;var he=Kg}else(te=$.nodeName)&&te.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ae=Zg);if(ae&&(ae=ae(n,B))){eh(U,ae,a,G);break e}he&&he(n,$,B),n==="focusout"&&(he=$._wrapperState)&&he.controlled&&$.type==="number"&&Ur($,"number",$.value)}switch(he=B?ni(B):window,n){case"focusin":(Jc(he)||he.contentEditable==="true")&&(Zr=he,Va=B,Vi=null);break;case"focusout":Vi=Va=Zr=null;break;case"mousedown":Ya=!0;break;case"contextmenu":case"mouseup":case"dragend":Ya=!1,uh(U,a,G);break;case"selectionchange":if(ny)break;case"keydown":case"keyup":uh(U,a,G)}var de;if(Ga)e:{switch(n){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Qr?Qc(n,a)&&(xe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(Xc&&a.locale!=="ko"&&(Qr||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Qr&&(de=Uc()):(Jn=G,za="value"in Jn?Jn.value:Jn.textContent,Qr=!0)),he=oo(B,xe),0<he.length&&(xe=new Vc(xe,n,null,a,G),U.push({event:xe,listeners:he}),de?xe.data=de:(de=Zc(a),de!==null&&(xe.data=de)))),(de=Wg?Hg(n,a):Vg(n,a))&&(B=oo(B,"onBeforeInput"),0<B.length&&(G=new Vc("onBeforeInput","beforeinput",null,a,G),U.push({event:G,listeners:B}),G.data=de))}xh(U,r)})}function qi(n,r,a){return{instance:n,listener:r,currentTarget:a}}function oo(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=nt(n,a),m!=null&&c.unshift(qi(n,m,d)),m=nt(n,r),m!=null&&c.push(qi(n,m,d))),n=n.return}return c}function ei(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function vh(n,r,a,c,d){for(var m=r._reactName,x=[];a!==null&&a!==c;){var C=a,A=C.alternate,B=C.stateNode;if(A!==null&&A===c)break;C.tag===5&&B!==null&&(C=B,d?(A=nt(a,m),A!=null&&x.unshift(qi(a,A,C))):d||(A=nt(a,m),A!=null&&x.push(qi(a,A,C)))),a=a.return}x.length!==0&&n.push({event:r,listeners:x})}var oy=/\r\n?/g,ay=/\u0000|\uFFFD/g;function wh(n){return(typeof n=="string"?n:""+n).replace(oy,`
`).replace(ay,"")}function ao(n,r,a){if(r=wh(r),wh(n)!==r&&a)throw Error(t(425))}function lo(){}var Ja=null,el=null;function tl(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var nl=typeof setTimeout=="function"?setTimeout:void 0,ly=typeof clearTimeout=="function"?clearTimeout:void 0,Sh=typeof Promise=="function"?Promise:void 0,uy=typeof queueMicrotask=="function"?queueMicrotask:typeof Sh<"u"?function(n){return Sh.resolve(null).then(n).catch(cy)}:nl;function cy(n){setTimeout(function(){throw n})}function rl(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Oi(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Oi(r)}function tr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Ch(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var ti=Math.random().toString(36).slice(2),An="__reactFiber$"+ti,Ki="__reactProps$"+ti,Ln="__reactContainer$"+ti,il="__reactEvents$"+ti,hy="__reactListeners$"+ti,dy="__reactHandles$"+ti;function Cr(n){var r=n[An];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Ln]||a[An]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Ch(n);n!==null;){if(a=n[An])return a;n=Ch(n)}return r}n=a,a=n.parentNode}return null}function Qi(n){return n=n[An]||n[Ln],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ni(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function uo(n){return n[Ki]||null}var sl=[],ri=-1;function nr(n){return{current:n}}function je(n){0>ri||(n.current=sl[ri],sl[ri]=null,ri--)}function Ne(n,r){ri++,sl[ri]=n.current,n.current=r}var rr={},vt=nr(rr),Ft=nr(!1),kr=rr;function ii(n,r){var a=n.type.contextTypes;if(!a)return rr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=r[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function Lt(n){return n=n.childContextTypes,n!=null}function co(){je(Ft),je(vt)}function kh(n,r,a){if(vt.current!==rr)throw Error(t(168));Ne(vt,r),Ne(Ft,a)}function Ah(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,Ee(n)||"Unknown",d));return Q({},a,c)}function ho(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||rr,kr=vt.current,Ne(vt,n),Ne(Ft,Ft.current),!0}function bh(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Ah(n,r,kr),c.__reactInternalMemoizedMergedChildContext=n,je(Ft),je(vt),Ne(vt,n)):je(Ft),Ne(Ft,a)}var Bn=null,fo=!1,ol=!1;function Ph(n){Bn===null?Bn=[n]:Bn.push(n)}function fy(n){fo=!0,Ph(n)}function ir(){if(!ol&&Bn!==null){ol=!0;var n=0,r=Le;try{var a=Bn;for(Le=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Bn=null,fo=!1}catch(d){throw Bn!==null&&(Bn=Bn.slice(n+1)),Mc(Ta,ir),d}finally{Le=r,ol=!1}}return null}var si=[],oi=0,po=null,mo=0,Jt=[],en=0,Ar=null,zn=1,Dn="";function br(n,r){si[oi++]=mo,si[oi++]=po,po=n,mo=r}function Th(n,r,a){Jt[en++]=zn,Jt[en++]=Dn,Jt[en++]=Ar,Ar=n;var c=zn;n=Dn;var d=32-cn(c)-1;c&=~(1<<d),a+=1;var m=32-cn(r)+d;if(30<m){var x=d-d%5;m=(c&(1<<x)-1).toString(32),c>>=x,d-=x,zn=1<<32-cn(r)+d|a<<d|c,Dn=m+n}else zn=1<<m|a<<d|c,Dn=n}function al(n){n.return!==null&&(br(n,1),Th(n,1,0))}function ll(n){for(;n===po;)po=si[--oi],si[oi]=null,mo=si[--oi],si[oi]=null;for(;n===Ar;)Ar=Jt[--en],Jt[en]=null,Dn=Jt[--en],Jt[en]=null,zn=Jt[--en],Jt[en]=null}var Ut=null,Wt=null,He=!1,dn=null;function Mh(n,r){var a=sn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function Eh(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Ut=n,Wt=tr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Ut=n,Wt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Ar!==null?{id:zn,overflow:Dn}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=sn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,Ut=n,Wt=null,!0):!1;default:return!1}}function ul(n){return(n.mode&1)!==0&&(n.flags&128)===0}function cl(n){if(He){var r=Wt;if(r){var a=r;if(!Eh(n,r)){if(ul(n))throw Error(t(418));r=tr(a.nextSibling);var c=Ut;r&&Eh(n,r)?Mh(c,a):(n.flags=n.flags&-4097|2,He=!1,Ut=n)}}else{if(ul(n))throw Error(t(418));n.flags=n.flags&-4097|2,He=!1,Ut=n}}}function Rh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ut=n}function go(n){if(n!==Ut)return!1;if(!He)return Rh(n),He=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!tl(n.type,n.memoizedProps)),r&&(r=Wt)){if(ul(n))throw Ih(),Error(t(418));for(;r;)Mh(n,r),r=tr(r.nextSibling)}if(Rh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){Wt=tr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}Wt=null}}else Wt=Ut?tr(n.stateNode.nextSibling):null;return!0}function Ih(){for(var n=Wt;n;)n=tr(n.nextSibling)}function ai(){Wt=Ut=null,He=!1}function hl(n){dn===null?dn=[n]:dn.push(n)}var py=R.ReactCurrentBatchConfig;function Zi(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===m?r.ref:(r=function(x){var C=d.refs;x===null?delete C[m]:C[m]=x},r._stringRef=m,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function yo(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Fh(n){var r=n._init;return r(n._payload)}function Lh(n){function r(F,T){if(n){var L=F.deletions;L===null?(F.deletions=[T],F.flags|=16):L.push(T)}}function a(F,T){if(!n)return null;for(;T!==null;)r(F,T),T=T.sibling;return null}function c(F,T){for(F=new Map;T!==null;)T.key!==null?F.set(T.key,T):F.set(T.index,T),T=T.sibling;return F}function d(F,T){return F=dr(F,T),F.index=0,F.sibling=null,F}function m(F,T,L){return F.index=L,n?(L=F.alternate,L!==null?(L=L.index,L<T?(F.flags|=2,T):L):(F.flags|=2,T)):(F.flags|=1048576,T)}function x(F){return n&&F.alternate===null&&(F.flags|=2),F}function C(F,T,L,H){return T===null||T.tag!==6?(T=nu(L,F.mode,H),T.return=F,T):(T=d(T,L),T.return=F,T)}function A(F,T,L,H){var ae=L.type;return ae===D?G(F,T,L.props.children,H,L.key):T!==null&&(T.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===K&&Fh(ae)===T.type)?(H=d(T,L.props),H.ref=Zi(F,T,L),H.return=F,H):(H=$o(L.type,L.key,L.props,null,F.mode,H),H.ref=Zi(F,T,L),H.return=F,H)}function B(F,T,L,H){return T===null||T.tag!==4||T.stateNode.containerInfo!==L.containerInfo||T.stateNode.implementation!==L.implementation?(T=ru(L,F.mode,H),T.return=F,T):(T=d(T,L.children||[]),T.return=F,T)}function G(F,T,L,H,ae){return T===null||T.tag!==7?(T=Lr(L,F.mode,H,ae),T.return=F,T):(T=d(T,L),T.return=F,T)}function U(F,T,L){if(typeof T=="string"&&T!==""||typeof T=="number")return T=nu(""+T,F.mode,L),T.return=F,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case W:return L=$o(T.type,T.key,T.props,null,F.mode,L),L.ref=Zi(F,null,T),L.return=F,L;case N:return T=ru(T,F.mode,L),T.return=F,T;case K:var H=T._init;return U(F,H(T._payload),L)}if(_r(T)||V(T))return T=Lr(T,F.mode,L,null),T.return=F,T;yo(F,T)}return null}function $(F,T,L,H){var ae=T!==null?T.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return ae!==null?null:C(F,T,""+L,H);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case W:return L.key===ae?A(F,T,L,H):null;case N:return L.key===ae?B(F,T,L,H):null;case K:return ae=L._init,$(F,T,ae(L._payload),H)}if(_r(L)||V(L))return ae!==null?null:G(F,T,L,H,null);yo(F,L)}return null}function te(F,T,L,H,ae){if(typeof H=="string"&&H!==""||typeof H=="number")return F=F.get(L)||null,C(T,F,""+H,ae);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case W:return F=F.get(H.key===null?L:H.key)||null,A(T,F,H,ae);case N:return F=F.get(H.key===null?L:H.key)||null,B(T,F,H,ae);case K:var he=H._init;return te(F,T,L,he(H._payload),ae)}if(_r(H)||V(H))return F=F.get(L)||null,G(T,F,H,ae,null);yo(T,H)}return null}function ie(F,T,L,H){for(var ae=null,he=null,de=T,xe=T=0,mt=null;de!==null&&xe<L.length;xe++){de.index>xe?(mt=de,de=null):mt=de.sibling;var Re=$(F,de,L[xe],H);if(Re===null){de===null&&(de=mt);break}n&&de&&Re.alternate===null&&r(F,de),T=m(Re,T,xe),he===null?ae=Re:he.sibling=Re,he=Re,de=mt}if(xe===L.length)return a(F,de),He&&br(F,xe),ae;if(de===null){for(;xe<L.length;xe++)de=U(F,L[xe],H),de!==null&&(T=m(de,T,xe),he===null?ae=de:he.sibling=de,he=de);return He&&br(F,xe),ae}for(de=c(F,de);xe<L.length;xe++)mt=te(de,F,xe,L[xe],H),mt!==null&&(n&&mt.alternate!==null&&de.delete(mt.key===null?xe:mt.key),T=m(mt,T,xe),he===null?ae=mt:he.sibling=mt,he=mt);return n&&de.forEach(function(fr){return r(F,fr)}),He&&br(F,xe),ae}function se(F,T,L,H){var ae=V(L);if(typeof ae!="function")throw Error(t(150));if(L=ae.call(L),L==null)throw Error(t(151));for(var he=ae=null,de=T,xe=T=0,mt=null,Re=L.next();de!==null&&!Re.done;xe++,Re=L.next()){de.index>xe?(mt=de,de=null):mt=de.sibling;var fr=$(F,de,Re.value,H);if(fr===null){de===null&&(de=mt);break}n&&de&&fr.alternate===null&&r(F,de),T=m(fr,T,xe),he===null?ae=fr:he.sibling=fr,he=fr,de=mt}if(Re.done)return a(F,de),He&&br(F,xe),ae;if(de===null){for(;!Re.done;xe++,Re=L.next())Re=U(F,Re.value,H),Re!==null&&(T=m(Re,T,xe),he===null?ae=Re:he.sibling=Re,he=Re);return He&&br(F,xe),ae}for(de=c(F,de);!Re.done;xe++,Re=L.next())Re=te(de,F,xe,Re.value,H),Re!==null&&(n&&Re.alternate!==null&&de.delete(Re.key===null?xe:Re.key),T=m(Re,T,xe),he===null?ae=Re:he.sibling=Re,he=Re);return n&&de.forEach(function(Yy){return r(F,Yy)}),He&&br(F,xe),ae}function it(F,T,L,H){if(typeof L=="object"&&L!==null&&L.type===D&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case W:e:{for(var ae=L.key,he=T;he!==null;){if(he.key===ae){if(ae=L.type,ae===D){if(he.tag===7){a(F,he.sibling),T=d(he,L.props.children),T.return=F,F=T;break e}}else if(he.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===K&&Fh(ae)===he.type){a(F,he.sibling),T=d(he,L.props),T.ref=Zi(F,he,L),T.return=F,F=T;break e}a(F,he);break}else r(F,he);he=he.sibling}L.type===D?(T=Lr(L.props.children,F.mode,H,L.key),T.return=F,F=T):(H=$o(L.type,L.key,L.props,null,F.mode,H),H.ref=Zi(F,T,L),H.return=F,F=H)}return x(F);case N:e:{for(he=L.key;T!==null;){if(T.key===he)if(T.tag===4&&T.stateNode.containerInfo===L.containerInfo&&T.stateNode.implementation===L.implementation){a(F,T.sibling),T=d(T,L.children||[]),T.return=F,F=T;break e}else{a(F,T);break}else r(F,T);T=T.sibling}T=ru(L,F.mode,H),T.return=F,F=T}return x(F);case K:return he=L._init,it(F,T,he(L._payload),H)}if(_r(L))return ie(F,T,L,H);if(V(L))return se(F,T,L,H);yo(F,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,T!==null&&T.tag===6?(a(F,T.sibling),T=d(T,L),T.return=F,F=T):(a(F,T),T=nu(L,F.mode,H),T.return=F,F=T),x(F)):a(F,T)}return it}var li=Lh(!0),Bh=Lh(!1),xo=nr(null),_o=null,ui=null,dl=null;function fl(){dl=ui=_o=null}function pl(n){var r=xo.current;je(xo),n._currentValue=r}function ml(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function ci(n,r){_o=n,dl=ui=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Bt=!0),n.firstContext=null)}function tn(n){var r=n._currentValue;if(dl!==n)if(n={context:n,memoizedValue:r,next:null},ui===null){if(_o===null)throw Error(t(308));ui=n,_o.dependencies={lanes:0,firstContext:n}}else ui=ui.next=n;return r}var Pr=null;function gl(n){Pr===null?Pr=[n]:Pr.push(n)}function zh(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,gl(r)):(a.next=d.next,d.next=a),r.interleaved=a,Nn(n,c)}function Nn(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var sr=!1;function yl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dh(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function On(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function or(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Me&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,Nn(n,a)}return d=c.interleaved,d===null?(r.next=r,gl(c)):(r.next=d.next,d.next=r),c.interleaved=r,Nn(n,a)}function vo(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ra(n,a)}}function Nh(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?d=m=r:m=m.next=r}else d=m=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function wo(n,r,a,c){var d=n.updateQueue;sr=!1;var m=d.firstBaseUpdate,x=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var A=C,B=A.next;A.next=null,x===null?m=B:x.next=B,x=A;var G=n.alternate;G!==null&&(G=G.updateQueue,C=G.lastBaseUpdate,C!==x&&(C===null?G.firstBaseUpdate=B:C.next=B,G.lastBaseUpdate=A))}if(m!==null){var U=d.baseState;x=0,G=B=A=null,C=m;do{var $=C.lane,te=C.eventTime;if((c&$)===$){G!==null&&(G=G.next={eventTime:te,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ie=n,se=C;switch($=r,te=a,se.tag){case 1:if(ie=se.payload,typeof ie=="function"){U=ie.call(te,U,$);break e}U=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=se.payload,$=typeof ie=="function"?ie.call(te,U,$):ie,$==null)break e;U=Q({},U,$);break e;case 2:sr=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,$=d.effects,$===null?d.effects=[C]:$.push(C))}else te={eventTime:te,lane:$,tag:C.tag,payload:C.payload,callback:C.callback,next:null},G===null?(B=G=te,A=U):G=G.next=te,x|=$;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;$=C,C=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);if(G===null&&(A=U),d.baseState=A,d.firstBaseUpdate=B,d.lastBaseUpdate=G,r=d.shared.interleaved,r!==null){d=r;do x|=d.lane,d=d.next;while(d!==r)}else m===null&&(d.shared.lanes=0);Er|=x,n.lanes=x,n.memoizedState=U}}function Oh(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Ji={},bn=nr(Ji),es=nr(Ji),ts=nr(Ji);function Tr(n){if(n===Ji)throw Error(t(174));return n}function xl(n,r){switch(Ne(ts,r),Ne(es,n),Ne(bn,Ji),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Ii(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=Ii(r,n)}je(bn),Ne(bn,r)}function hi(){je(bn),je(es),je(ts)}function jh(n){Tr(ts.current);var r=Tr(bn.current),a=Ii(r,n.type);r!==a&&(Ne(es,n),Ne(bn,a))}function _l(n){es.current===n&&(je(bn),je(es))}var Ye=nr(0);function So(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vl=[];function wl(){for(var n=0;n<vl.length;n++)vl[n]._workInProgressVersionPrimary=null;vl.length=0}var Co=R.ReactCurrentDispatcher,Sl=R.ReactCurrentBatchConfig,Mr=0,Xe=null,lt=null,ft=null,ko=!1,ns=!1,rs=0,my=0;function wt(){throw Error(t(321))}function Cl(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!hn(n[a],r[a]))return!1;return!0}function kl(n,r,a,c,d,m){if(Mr=m,Xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Co.current=n===null||n.memoizedState===null?_y:vy,n=a(c,d),ns){m=0;do{if(ns=!1,rs=0,25<=m)throw Error(t(301));m+=1,ft=lt=null,r.updateQueue=null,Co.current=wy,n=a(c,d)}while(ns)}if(Co.current=Po,r=lt!==null&&lt.next!==null,Mr=0,ft=lt=Xe=null,ko=!1,r)throw Error(t(300));return n}function Al(){var n=rs!==0;return rs=0,n}function Pn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Xe.memoizedState=ft=n:ft=ft.next=n,ft}function nn(){if(lt===null){var n=Xe.alternate;n=n!==null?n.memoizedState:null}else n=lt.next;var r=ft===null?Xe.memoizedState:ft.next;if(r!==null)ft=r,lt=n;else{if(n===null)throw Error(t(310));lt=n,n={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ft===null?Xe.memoizedState=ft=n:ft=ft.next=n}return ft}function is(n,r){return typeof r=="function"?r(n):r}function bl(n){var r=nn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=lt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var x=d.next;d.next=m.next,m.next=x}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var C=x=null,A=null,B=m;do{var G=B.lane;if((Mr&G)===G)A!==null&&(A=A.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var U={lane:G,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};A===null?(C=A=U,x=c):A=A.next=U,Xe.lanes|=G,Er|=G}B=B.next}while(B!==null&&B!==m);A===null?x=c:A.next=C,hn(c,r.memoizedState)||(Bt=!0),r.memoizedState=c,r.baseState=x,r.baseQueue=A,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,Xe.lanes|=m,Er|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Pl(n){var r=nn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=r.memoizedState;if(d!==null){a.pending=null;var x=d=d.next;do m=n(m,x.action),x=x.next;while(x!==d);hn(m,r.memoizedState)||(Bt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,c]}function $h(){}function Gh(n,r){var a=Xe,c=nn(),d=r(),m=!hn(c.memoizedState,d);if(m&&(c.memoizedState=d,Bt=!0),c=c.queue,Tl(Hh.bind(null,a,c,n),[n]),c.getSnapshot!==r||m||ft!==null&&ft.memoizedState.tag&1){if(a.flags|=2048,ss(9,Wh.bind(null,a,c,d,r),void 0,null),pt===null)throw Error(t(349));(Mr&30)!==0||Uh(a,r,d)}return d}function Uh(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Wh(n,r,a,c){r.value=a,r.getSnapshot=c,Vh(r)&&Yh(n)}function Hh(n,r,a){return a(function(){Vh(r)&&Yh(n)})}function Vh(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!hn(n,a)}catch{return!0}}function Yh(n){var r=Nn(n,1);r!==null&&gn(r,n,1,-1)}function Xh(n){var r=Pn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:n},r.queue=n,n=n.dispatch=xy.bind(null,Xe,n),[r.memoizedState,n]}function ss(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function qh(){return nn().memoizedState}function Ao(n,r,a,c){var d=Pn();Xe.flags|=n,d.memoizedState=ss(1|r,a,void 0,c===void 0?null:c)}function bo(n,r,a,c){var d=nn();c=c===void 0?null:c;var m=void 0;if(lt!==null){var x=lt.memoizedState;if(m=x.destroy,c!==null&&Cl(c,x.deps)){d.memoizedState=ss(r,a,m,c);return}}Xe.flags|=n,d.memoizedState=ss(1|r,a,m,c)}function Kh(n,r){return Ao(8390656,8,n,r)}function Tl(n,r){return bo(2048,8,n,r)}function Qh(n,r){return bo(4,2,n,r)}function Zh(n,r){return bo(4,4,n,r)}function Jh(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function ed(n,r,a){return a=a!=null?a.concat([n]):null,bo(4,4,Jh.bind(null,r,n),a)}function Ml(){}function td(n,r){var a=nn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Cl(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function nd(n,r){var a=nn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Cl(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function rd(n,r,a){return(Mr&21)===0?(n.baseState&&(n.baseState=!1,Bt=!0),n.memoizedState=a):(hn(a,r)||(a=Fc(),Xe.lanes|=a,Er|=a,n.baseState=!0),r)}function gy(n,r){var a=Le;Le=a!==0&&4>a?a:4,n(!0);var c=Sl.transition;Sl.transition={};try{n(!1),r()}finally{Le=a,Sl.transition=c}}function id(){return nn().memoizedState}function yy(n,r,a){var c=cr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},sd(n))od(r,a);else if(a=zh(n,r,a,c),a!==null){var d=Mt();gn(a,n,c,d),ad(a,r,c)}}function xy(n,r,a){var c=cr(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(sd(n))od(r,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,C=m(x,a);if(d.hasEagerState=!0,d.eagerState=C,hn(C,x)){var A=r.interleaved;A===null?(d.next=d,gl(r)):(d.next=A.next,A.next=d),r.interleaved=d;return}}catch{}finally{}a=zh(n,r,d,c),a!==null&&(d=Mt(),gn(a,n,c,d),ad(a,r,c))}}function sd(n){var r=n.alternate;return n===Xe||r!==null&&r===Xe}function od(n,r){ns=ko=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function ad(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ra(n,a)}}var Po={readContext:tn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},_y={readContext:tn,useCallback:function(n,r){return Pn().memoizedState=[n,r===void 0?null:r],n},useContext:tn,useEffect:Kh,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Ao(4194308,4,Jh.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Ao(4194308,4,n,r)},useInsertionEffect:function(n,r){return Ao(4,2,n,r)},useMemo:function(n,r){var a=Pn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Pn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=yy.bind(null,Xe,n),[c.memoizedState,n]},useRef:function(n){var r=Pn();return n={current:n},r.memoizedState=n},useState:Xh,useDebugValue:Ml,useDeferredValue:function(n){return Pn().memoizedState=n},useTransition:function(){var n=Xh(!1),r=n[0];return n=gy.bind(null,n[1]),Pn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=Xe,d=Pn();if(He){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),pt===null)throw Error(t(349));(Mr&30)!==0||Uh(c,r,a)}d.memoizedState=a;var m={value:a,getSnapshot:r};return d.queue=m,Kh(Hh.bind(null,c,m,n),[n]),c.flags|=2048,ss(9,Wh.bind(null,c,m,a,r),void 0,null),a},useId:function(){var n=Pn(),r=pt.identifierPrefix;if(He){var a=Dn,c=zn;a=(c&~(1<<32-cn(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=rs++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=my++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},vy={readContext:tn,useCallback:td,useContext:tn,useEffect:Tl,useImperativeHandle:ed,useInsertionEffect:Qh,useLayoutEffect:Zh,useMemo:nd,useReducer:bl,useRef:qh,useState:function(){return bl(is)},useDebugValue:Ml,useDeferredValue:function(n){var r=nn();return rd(r,lt.memoizedState,n)},useTransition:function(){var n=bl(is)[0],r=nn().memoizedState;return[n,r]},useMutableSource:$h,useSyncExternalStore:Gh,useId:id,unstable_isNewReconciler:!1},wy={readContext:tn,useCallback:td,useContext:tn,useEffect:Tl,useImperativeHandle:ed,useInsertionEffect:Qh,useLayoutEffect:Zh,useMemo:nd,useReducer:Pl,useRef:qh,useState:function(){return Pl(is)},useDebugValue:Ml,useDeferredValue:function(n){var r=nn();return lt===null?r.memoizedState=n:rd(r,lt.memoizedState,n)},useTransition:function(){var n=Pl(is)[0],r=nn().memoizedState;return[n,r]},useMutableSource:$h,useSyncExternalStore:Gh,useId:id,unstable_isNewReconciler:!1};function fn(n,r){if(n&&n.defaultProps){r=Q({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function El(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:Q({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var To={isMounted:function(n){return(n=n._reactInternals)?Sr(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Mt(),d=cr(n),m=On(c,d);m.payload=r,a!=null&&(m.callback=a),r=or(n,m,d),r!==null&&(gn(r,n,d,c),vo(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Mt(),d=cr(n),m=On(c,d);m.tag=1,m.payload=r,a!=null&&(m.callback=a),r=or(n,m,d),r!==null&&(gn(r,n,d,c),vo(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Mt(),c=cr(n),d=On(a,c);d.tag=2,r!=null&&(d.callback=r),r=or(n,d,c),r!==null&&(gn(r,n,c,a),vo(r,n,c))}};function ld(n,r,a,c,d,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,x):r.prototype&&r.prototype.isPureReactComponent?!Hi(a,c)||!Hi(d,m):!0}function ud(n,r,a){var c=!1,d=rr,m=r.contextType;return typeof m=="object"&&m!==null?m=tn(m):(d=Lt(r)?kr:vt.current,c=r.contextTypes,m=(c=c!=null)?ii(n,d):rr),r=new r(a,m),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=To,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),r}function cd(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&To.enqueueReplaceState(r,r.state,null)}function Rl(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},yl(n);var m=r.contextType;typeof m=="object"&&m!==null?d.context=tn(m):(m=Lt(r)?kr:vt.current,d.context=ii(n,m)),d.state=n.memoizedState,m=r.getDerivedStateFromProps,typeof m=="function"&&(El(n,r,m,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&To.enqueueReplaceState(d,d.state,null),wo(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function di(n,r){try{var a="",c=r;do a+=ve(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:r,stack:d,digest:null}}function Il(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function Fl(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Sy=typeof WeakMap=="function"?WeakMap:Map;function hd(n,r,a){a=On(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){Bo||(Bo=!0,Xl=c),Fl(n,r)},a}function dd(n,r,a){a=On(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){Fl(n,r)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Fl(n,r),typeof c!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var x=r.stack;this.componentDidCatch(r.value,{componentStack:x!==null?x:""})}),a}function fd(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Sy;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=zy.bind(null,n,r,a),r.then(n,n))}function pd(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function md(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=On(-1,1),r.tag=2,or(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Cy=R.ReactCurrentOwner,Bt=!1;function Tt(n,r,a,c){r.child=n===null?Bh(r,null,a,c):li(r,n.child,a,c)}function gd(n,r,a,c,d){a=a.render;var m=r.ref;return ci(r,d),c=kl(n,r,a,c,m,d),a=Al(),n!==null&&!Bt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,jn(n,r,d)):(He&&a&&al(r),r.flags|=1,Tt(n,r,c,d),r.child)}function yd(n,r,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!tu(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=m,xd(n,r,m,c,d)):(n=$o(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,(n.lanes&d)===0){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:Hi,a(x,c)&&n.ref===r.ref)return jn(n,r,d)}return r.flags|=1,n=dr(m,c),n.ref=r.ref,n.return=r,r.child=n}function xd(n,r,a,c,d){if(n!==null){var m=n.memoizedProps;if(Hi(m,c)&&n.ref===r.ref)if(Bt=!1,r.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Bt=!0);else return r.lanes=n.lanes,jn(n,r,d)}return Ll(n,r,a,c,d)}function _d(n,r,a){var c=r.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(pi,Ht),Ht|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Ne(pi,Ht),Ht|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Ne(pi,Ht),Ht|=c}else m!==null?(c=m.baseLanes|a,r.memoizedState=null):c=a,Ne(pi,Ht),Ht|=c;return Tt(n,r,d,a),r.child}function vd(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Ll(n,r,a,c,d){var m=Lt(a)?kr:vt.current;return m=ii(r,m),ci(r,d),a=kl(n,r,a,c,m,d),c=Al(),n!==null&&!Bt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,jn(n,r,d)):(He&&c&&al(r),r.flags|=1,Tt(n,r,a,d),r.child)}function wd(n,r,a,c,d){if(Lt(a)){var m=!0;ho(r)}else m=!1;if(ci(r,d),r.stateNode===null)Eo(n,r),ud(r,a,c),Rl(r,a,c,d),c=!0;else if(n===null){var x=r.stateNode,C=r.memoizedProps;x.props=C;var A=x.context,B=a.contextType;typeof B=="object"&&B!==null?B=tn(B):(B=Lt(a)?kr:vt.current,B=ii(r,B));var G=a.getDerivedStateFromProps,U=typeof G=="function"||typeof x.getSnapshotBeforeUpdate=="function";U||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==c||A!==B)&&cd(r,x,c,B),sr=!1;var $=r.memoizedState;x.state=$,wo(r,c,x,d),A=r.memoizedState,C!==c||$!==A||Ft.current||sr?(typeof G=="function"&&(El(r,a,G,c),A=r.memoizedState),(C=sr||ld(r,a,C,c,$,A,B))?(U||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=A),x.props=c,x.state=A,x.context=B,c=C):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{x=r.stateNode,Dh(n,r),C=r.memoizedProps,B=r.type===r.elementType?C:fn(r.type,C),x.props=B,U=r.pendingProps,$=x.context,A=a.contextType,typeof A=="object"&&A!==null?A=tn(A):(A=Lt(a)?kr:vt.current,A=ii(r,A));var te=a.getDerivedStateFromProps;(G=typeof te=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==U||$!==A)&&cd(r,x,c,A),sr=!1,$=r.memoizedState,x.state=$,wo(r,c,x,d);var ie=r.memoizedState;C!==U||$!==ie||Ft.current||sr?(typeof te=="function"&&(El(r,a,te,c),ie=r.memoizedState),(B=sr||ld(r,a,B,c,$,ie,A)||!1)?(G||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,ie,A),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,ie,A)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ie),x.props=c,x.state=ie,x.context=A,c=B):(typeof x.componentDidUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),c=!1)}return Bl(n,r,a,c,m,d)}function Bl(n,r,a,c,d,m){vd(n,r);var x=(r.flags&128)!==0;if(!c&&!x)return d&&bh(r,a,!1),jn(n,r,m);c=r.stateNode,Cy.current=r;var C=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&x?(r.child=li(r,n.child,null,m),r.child=li(r,null,C,m)):Tt(n,r,C,m),r.memoizedState=c.state,d&&bh(r,a,!0),r.child}function Sd(n){var r=n.stateNode;r.pendingContext?kh(n,r.pendingContext,r.pendingContext!==r.context):r.context&&kh(n,r.context,!1),xl(n,r.containerInfo)}function Cd(n,r,a,c,d){return ai(),hl(d),r.flags|=256,Tt(n,r,a,c),r.child}var zl={dehydrated:null,treeContext:null,retryLane:0};function Dl(n){return{baseLanes:n,cachePool:null,transitions:null}}function kd(n,r,a){var c=r.pendingProps,d=Ye.current,m=!1,x=(r.flags&128)!==0,C;if((C=x)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(m=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ne(Ye,d&1),n===null)return cl(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(x=c.children,n=c.fallback,m?(c=r.mode,m=r.child,x={mode:"hidden",children:x},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=x):m=Go(x,c,0,null),n=Lr(n,c,a,null),m.return=r,n.return=r,m.sibling=n,r.child=m,r.child.memoizedState=Dl(a),r.memoizedState=zl,n):Nl(r,x));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return ky(n,r,x,c,C,d,a);if(m){m=c.fallback,x=r.mode,d=n.child,C=d.sibling;var A={mode:"hidden",children:c.children};return(x&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=A,r.deletions=null):(c=dr(d,A),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?m=dr(C,m):(m=Lr(m,x,a,null),m.flags|=2),m.return=r,c.return=r,c.sibling=m,r.child=c,c=m,m=r.child,x=n.child.memoizedState,x=x===null?Dl(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},m.memoizedState=x,m.childLanes=n.childLanes&~a,r.memoizedState=zl,c}return m=n.child,n=m.sibling,c=dr(m,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function Nl(n,r){return r=Go({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Mo(n,r,a,c){return c!==null&&hl(c),li(r,n.child,null,a),n=Nl(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function ky(n,r,a,c,d,m,x){if(a)return r.flags&256?(r.flags&=-257,c=Il(Error(t(422))),Mo(n,r,x,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(m=c.fallback,d=r.mode,c=Go({mode:"visible",children:c.children},d,0,null),m=Lr(m,d,x,null),m.flags|=2,c.return=r,m.return=r,c.sibling=m,r.child=c,(r.mode&1)!==0&&li(r,n.child,null,x),r.child.memoizedState=Dl(x),r.memoizedState=zl,m);if((r.mode&1)===0)return Mo(n,r,x,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,m=Error(t(419)),c=Il(m,c,void 0),Mo(n,r,x,c)}if(C=(x&n.childLanes)!==0,Bt||C){if(c=pt,c!==null){switch(x&-x){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|x))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Nn(n,d),gn(c,n,d,-1))}return eu(),c=Il(Error(t(421))),Mo(n,r,x,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=Dy.bind(null,n),d._reactRetry=r,null):(n=m.treeContext,Wt=tr(d.nextSibling),Ut=r,He=!0,dn=null,n!==null&&(Jt[en++]=zn,Jt[en++]=Dn,Jt[en++]=Ar,zn=n.id,Dn=n.overflow,Ar=r),r=Nl(r,c.children),r.flags|=4096,r)}function Ad(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),ml(n.return,r,a)}function Ol(n,r,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function bd(n,r,a){var c=r.pendingProps,d=c.revealOrder,m=c.tail;if(Tt(n,r,c.children,a),c=Ye.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ad(n,a,r);else if(n.tag===19)Ad(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ne(Ye,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&So(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Ol(r,!1,d,a,m);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&So(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Ol(r,!0,a,null,m);break;case"together":Ol(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Eo(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function jn(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Er|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=dr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=dr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Ay(n,r,a){switch(r.tag){case 3:Sd(r),ai();break;case 5:jh(r);break;case 1:Lt(r.type)&&ho(r);break;case 4:xl(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Ne(xo,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Ne(Ye,Ye.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?kd(n,r,a):(Ne(Ye,Ye.current&1),n=jn(n,r,a),n!==null?n.sibling:null);Ne(Ye,Ye.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return bd(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ne(Ye,Ye.current),c)break;return null;case 22:case 23:return r.lanes=0,_d(n,r,a)}return jn(n,r,a)}var Pd,jl,Td,Md;Pd=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},jl=function(){},Td=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,Tr(bn.current);var m=null;switch(a){case"input":d=$t(n,d),c=$t(n,c),m=[];break;case"select":d=Q({},d,{value:void 0}),c=Q({},c,{value:void 0}),m=[];break;case"textarea":d=Ri(n,d),c=Ri(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=lo)}Hr(a,c);var x;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var C=d[B];for(x in C)C.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in c){var A=c[B];if(C=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&A!==C&&(A!=null||C!=null))if(B==="style")if(C){for(x in C)!C.hasOwnProperty(x)||A&&A.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in A)A.hasOwnProperty(x)&&C[x]!==A[x]&&(a||(a={}),a[x]=A[x])}else a||(m||(m=[]),m.push(B,a)),a=A;else B==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,C=C?C.__html:void 0,A!=null&&C!==A&&(m=m||[]).push(B,A)):B==="children"?typeof A!="string"&&typeof A!="number"||(m=m||[]).push(B,""+A):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(A!=null&&B==="onScroll"&&Oe("scroll",n),m||C===A||(m=[])):(m=m||[]).push(B,A))}a&&(m=m||[]).push("style",a);var B=m;(r.updateQueue=B)&&(r.flags|=4)}},Md=function(n,r,a,c){a!==c&&(r.flags|=4)};function os(n,r){if(!He)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function St(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function by(n,r,a){var c=r.pendingProps;switch(ll(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(r),null;case 1:return Lt(r.type)&&co(),St(r),null;case 3:return c=r.stateNode,hi(),je(Ft),je(vt),wl(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(go(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,dn!==null&&(Ql(dn),dn=null))),jl(n,r),St(r),null;case 5:_l(r);var d=Tr(ts.current);if(a=r.type,n!==null&&r.stateNode!=null)Td(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return St(r),null}if(n=Tr(bn.current),go(r)){c=r.stateNode,a=r.type;var m=r.memoizedProps;switch(c[An]=r,c[Ki]=m,n=(r.mode&1)!==0,a){case"dialog":Oe("cancel",c),Oe("close",c);break;case"iframe":case"object":case"embed":Oe("load",c);break;case"video":case"audio":for(d=0;d<Yi.length;d++)Oe(Yi[d],c);break;case"source":Oe("error",c);break;case"img":case"image":case"link":Oe("error",c),Oe("load",c);break;case"details":Oe("toggle",c);break;case"input":qt(c,m),Oe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Oe("invalid",c);break;case"textarea":Ns(c,m),Oe("invalid",c)}Hr(a,m),d=null;for(var x in m)if(m.hasOwnProperty(x)){var C=m[x];x==="children"?typeof C=="string"?c.textContent!==C&&(m.suppressHydrationWarning!==!0&&ao(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(m.suppressHydrationWarning!==!0&&ao(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(x)&&C!=null&&x==="onScroll"&&Oe("scroll",c)}switch(a){case"input":un(c),Yn(c,m,!0);break;case"textarea":un(c),js(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=lo)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{x=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=$s(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=x.createElement(a,{is:c.is}):(n=x.createElement(a),a==="select"&&(x=n,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):n=x.createElementNS(n,a),n[An]=r,n[Ki]=c,Pd(n,r,!1,!1),r.stateNode=n;e:{switch(x=Vr(a,c),a){case"dialog":Oe("cancel",n),Oe("close",n),d=c;break;case"iframe":case"object":case"embed":Oe("load",n),d=c;break;case"video":case"audio":for(d=0;d<Yi.length;d++)Oe(Yi[d],n);d=c;break;case"source":Oe("error",n),d=c;break;case"img":case"image":case"link":Oe("error",n),Oe("load",n),d=c;break;case"details":Oe("toggle",n),d=c;break;case"input":qt(n,c),d=$t(n,c),Oe("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=Q({},c,{value:void 0}),Oe("invalid",n);break;case"textarea":Ns(n,c),d=Ri(n,c),Oe("invalid",n);break;default:d=c}Hr(a,d),C=d;for(m in C)if(C.hasOwnProperty(m)){var A=C[m];m==="style"?We(n,A):m==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&Gs(n,A)):m==="children"?typeof A=="string"?(a!=="textarea"||A!=="")&&vr(n,A):typeof A=="number"&&vr(n,""+A):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?A!=null&&m==="onScroll"&&Oe("scroll",n):A!=null&&M(n,m,A,x))}switch(a){case"input":un(n),Yn(n,c,!1);break;case"textarea":un(n),js(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ae(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?Xn(n,!!c.multiple,m,!1):c.defaultValue!=null&&Xn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=lo)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return St(r),null;case 6:if(n&&r.stateNode!=null)Md(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Tr(ts.current),Tr(bn.current),go(r)){if(c=r.stateNode,a=r.memoizedProps,c[An]=r,(m=c.nodeValue!==a)&&(n=Ut,n!==null))switch(n.tag){case 3:ao(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ao(c.nodeValue,a,(n.mode&1)!==0)}m&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[An]=r,r.stateNode=c}return St(r),null;case 13:if(je(Ye),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(He&&Wt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Ih(),ai(),r.flags|=98560,m=!1;else if(m=go(r),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[An]=r}else ai(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;St(r),m=!1}else dn!==null&&(Ql(dn),dn=null),m=!0;if(!m)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(Ye.current&1)!==0?ut===0&&(ut=3):eu())),r.updateQueue!==null&&(r.flags|=4),St(r),null);case 4:return hi(),jl(n,r),n===null&&Xi(r.stateNode.containerInfo),St(r),null;case 10:return pl(r.type._context),St(r),null;case 17:return Lt(r.type)&&co(),St(r),null;case 19:if(je(Ye),m=r.memoizedState,m===null)return St(r),null;if(c=(r.flags&128)!==0,x=m.rendering,x===null)if(c)os(m,!1);else{if(ut!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(x=So(n),x!==null){for(r.flags|=128,os(m,!1),c=x.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)m=a,n=c,m.flags&=14680066,x=m.alternate,x===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=x.childLanes,m.lanes=x.lanes,m.child=x.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=x.memoizedProps,m.memoizedState=x.memoizedState,m.updateQueue=x.updateQueue,m.type=x.type,n=x.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ne(Ye,Ye.current&1|2),r.child}n=n.sibling}m.tail!==null&&rt()>mi&&(r.flags|=128,c=!0,os(m,!1),r.lanes=4194304)}else{if(!c)if(n=So(x),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),os(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!He)return St(r),null}else 2*rt()-m.renderingStartTime>mi&&a!==1073741824&&(r.flags|=128,c=!0,os(m,!1),r.lanes=4194304);m.isBackwards?(x.sibling=r.child,r.child=x):(a=m.last,a!==null?a.sibling=x:r.child=x,m.last=x)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=rt(),r.sibling=null,a=Ye.current,Ne(Ye,c?a&1|2:a&1),r):(St(r),null);case 22:case 23:return Jl(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(Ht&1073741824)!==0&&(St(r),r.subtreeFlags&6&&(r.flags|=8192)):St(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function Py(n,r){switch(ll(r),r.tag){case 1:return Lt(r.type)&&co(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return hi(),je(Ft),je(vt),wl(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return _l(r),null;case 13:if(je(Ye),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));ai()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return je(Ye),null;case 4:return hi(),null;case 10:return pl(r.type._context),null;case 22:case 23:return Jl(),null;case 24:return null;default:return null}}var Ro=!1,Ct=!1,Ty=typeof WeakSet=="function"?WeakSet:Set,re=null;function fi(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Qe(n,r,c)}else a.current=null}function $l(n,r,a){try{a()}catch(c){Qe(n,r,c)}}var Ed=!1;function My(n,r){if(Ja=Ks,n=lh(),Ha(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,C=-1,A=-1,B=0,G=0,U=n,$=null;t:for(;;){for(var te;U!==a||d!==0&&U.nodeType!==3||(C=x+d),U!==m||c!==0&&U.nodeType!==3||(A=x+c),U.nodeType===3&&(x+=U.nodeValue.length),(te=U.firstChild)!==null;)$=U,U=te;for(;;){if(U===n)break t;if($===a&&++B===d&&(C=x),$===m&&++G===c&&(A=x),(te=U.nextSibling)!==null)break;U=$,$=U.parentNode}U=te}a=C===-1||A===-1?null:{start:C,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(el={focusedElem:n,selectionRange:a},Ks=!1,re=r;re!==null;)if(r=re,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,re=n;else for(;re!==null;){r=re;try{var ie=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var se=ie.memoizedProps,it=ie.memoizedState,F=r.stateNode,T=F.getSnapshotBeforeUpdate(r.elementType===r.type?se:fn(r.type,se),it);F.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var L=r.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(H){Qe(r,r.return,H)}if(n=r.sibling,n!==null){n.return=r.return,re=n;break}re=r.return}return ie=Ed,Ed=!1,ie}function as(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&$l(r,a,m)}d=d.next}while(d!==c)}}function Io(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function Gl(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Rd(n){var r=n.alternate;r!==null&&(n.alternate=null,Rd(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[An],delete r[Ki],delete r[il],delete r[hy],delete r[dy])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Id(n){return n.tag===5||n.tag===3||n.tag===4}function Fd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Id(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ul(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=lo));else if(c!==4&&(n=n.child,n!==null))for(Ul(n,r,a),n=n.sibling;n!==null;)Ul(n,r,a),n=n.sibling}function Wl(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Wl(n,r,a),n=n.sibling;n!==null;)Wl(n,r,a),n=n.sibling}var yt=null,pn=!1;function ar(n,r,a){for(a=a.child;a!==null;)Ld(n,r,a),a=a.sibling}function Ld(n,r,a){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Ws,a)}catch{}switch(a.tag){case 5:Ct||fi(a,r);case 6:var c=yt,d=pn;yt=null,ar(n,r,a),yt=c,pn=d,yt!==null&&(pn?(n=yt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):yt.removeChild(a.stateNode));break;case 18:yt!==null&&(pn?(n=yt,a=a.stateNode,n.nodeType===8?rl(n.parentNode,a):n.nodeType===1&&rl(n,a),Oi(n)):rl(yt,a.stateNode));break;case 4:c=yt,d=pn,yt=a.stateNode.containerInfo,pn=!0,ar(n,r,a),yt=c,pn=d;break;case 0:case 11:case 14:case 15:if(!Ct&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,x=m.destroy;m=m.tag,x!==void 0&&((m&2)!==0||(m&4)!==0)&&$l(a,r,x),d=d.next}while(d!==c)}ar(n,r,a);break;case 1:if(!Ct&&(fi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){Qe(a,r,C)}ar(n,r,a);break;case 21:ar(n,r,a);break;case 22:a.mode&1?(Ct=(c=Ct)||a.memoizedState!==null,ar(n,r,a),Ct=c):ar(n,r,a);break;default:ar(n,r,a)}}function Bd(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Ty),r.forEach(function(c){var d=Ny.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function mn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,x=r,C=x;e:for(;C!==null;){switch(C.tag){case 5:yt=C.stateNode,pn=!1;break e;case 3:yt=C.stateNode.containerInfo,pn=!0;break e;case 4:yt=C.stateNode.containerInfo,pn=!0;break e}C=C.return}if(yt===null)throw Error(t(160));Ld(m,x,d),yt=null,pn=!1;var A=d.alternate;A!==null&&(A.return=null),d.return=null}catch(B){Qe(d,r,B)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)zd(r,n),r=r.sibling}function zd(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(mn(r,n),Tn(n),c&4){try{as(3,n,n.return),Io(3,n)}catch(se){Qe(n,n.return,se)}try{as(5,n,n.return)}catch(se){Qe(n,n.return,se)}}break;case 1:mn(r,n),Tn(n),c&512&&a!==null&&fi(a,a.return);break;case 5:if(mn(r,n),Tn(n),c&512&&a!==null&&fi(a,a.return),n.flags&32){var d=n.stateNode;try{vr(d,"")}catch(se){Qe(n,n.return,se)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,x=a!==null?a.memoizedProps:m,C=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{C==="input"&&m.type==="radio"&&m.name!=null&&Rn(d,m),Vr(C,x);var B=Vr(C,m);for(x=0;x<A.length;x+=2){var G=A[x],U=A[x+1];G==="style"?We(d,U):G==="dangerouslySetInnerHTML"?Gs(d,U):G==="children"?vr(d,U):M(d,G,U,B)}switch(C){case"input":In(d,m);break;case"textarea":Os(d,m);break;case"select":var $=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var te=m.value;te!=null?Xn(d,!!m.multiple,te,!1):$!==!!m.multiple&&(m.defaultValue!=null?Xn(d,!!m.multiple,m.defaultValue,!0):Xn(d,!!m.multiple,m.multiple?[]:"",!1))}d[Ki]=m}catch(se){Qe(n,n.return,se)}}break;case 6:if(mn(r,n),Tn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(se){Qe(n,n.return,se)}}break;case 3:if(mn(r,n),Tn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Oi(r.containerInfo)}catch(se){Qe(n,n.return,se)}break;case 4:mn(r,n),Tn(n);break;case 13:mn(r,n),Tn(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Yl=rt())),c&4&&Bd(n);break;case 22:if(G=a!==null&&a.memoizedState!==null,n.mode&1?(Ct=(B=Ct)||G,mn(r,n),Ct=B):mn(r,n),Tn(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!G&&(n.mode&1)!==0)for(re=n,G=n.child;G!==null;){for(U=re=G;re!==null;){switch($=re,te=$.child,$.tag){case 0:case 11:case 14:case 15:as(4,$,$.return);break;case 1:fi($,$.return);var ie=$.stateNode;if(typeof ie.componentWillUnmount=="function"){c=$,a=$.return;try{r=c,ie.props=r.memoizedProps,ie.state=r.memoizedState,ie.componentWillUnmount()}catch(se){Qe(c,a,se)}}break;case 5:fi($,$.return);break;case 22:if($.memoizedState!==null){Od(U);continue}}te!==null?(te.return=$,re=te):Od(U)}G=G.sibling}e:for(G=null,U=n;;){if(U.tag===5){if(G===null){G=U;try{d=U.stateNode,B?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(C=U.stateNode,A=U.memoizedProps.style,x=A!=null&&A.hasOwnProperty("display")?A.display:null,C.style.display=ht("display",x))}catch(se){Qe(n,n.return,se)}}}else if(U.tag===6){if(G===null)try{U.stateNode.nodeValue=B?"":U.memoizedProps}catch(se){Qe(n,n.return,se)}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===n)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===n)break e;for(;U.sibling===null;){if(U.return===null||U.return===n)break e;G===U&&(G=null),U=U.return}G===U&&(G=null),U.sibling.return=U.return,U=U.sibling}}break;case 19:mn(r,n),Tn(n),c&4&&Bd(n);break;case 21:break;default:mn(r,n),Tn(n)}}function Tn(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Id(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(vr(d,""),c.flags&=-33);var m=Fd(n);Wl(n,m,d);break;case 3:case 4:var x=c.stateNode.containerInfo,C=Fd(n);Ul(n,C,x);break;default:throw Error(t(161))}}catch(A){Qe(n,n.return,A)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Ey(n,r,a){re=n,Dd(n)}function Dd(n,r,a){for(var c=(n.mode&1)!==0;re!==null;){var d=re,m=d.child;if(d.tag===22&&c){var x=d.memoizedState!==null||Ro;if(!x){var C=d.alternate,A=C!==null&&C.memoizedState!==null||Ct;C=Ro;var B=Ct;if(Ro=x,(Ct=A)&&!B)for(re=d;re!==null;)x=re,A=x.child,x.tag===22&&x.memoizedState!==null?jd(d):A!==null?(A.return=x,re=A):jd(d);for(;m!==null;)re=m,Dd(m),m=m.sibling;re=d,Ro=C,Ct=B}Nd(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,re=m):Nd(n)}}function Nd(n){for(;re!==null;){var r=re;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ct||Io(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Ct)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:fn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=r.updateQueue;m!==null&&Oh(r,m,c);break;case 3:var x=r.updateQueue;if(x!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Oh(r,x,a)}break;case 5:var C=r.stateNode;if(a===null&&r.flags&4){a=C;var A=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&a.focus();break;case"img":A.src&&(a.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var B=r.alternate;if(B!==null){var G=B.memoizedState;if(G!==null){var U=G.dehydrated;U!==null&&Oi(U)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ct||r.flags&512&&Gl(r)}catch($){Qe(r,r.return,$)}}if(r===n){re=null;break}if(a=r.sibling,a!==null){a.return=r.return,re=a;break}re=r.return}}function Od(n){for(;re!==null;){var r=re;if(r===n){re=null;break}var a=r.sibling;if(a!==null){a.return=r.return,re=a;break}re=r.return}}function jd(n){for(;re!==null;){var r=re;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Io(4,r)}catch(A){Qe(r,a,A)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(A){Qe(r,d,A)}}var m=r.return;try{Gl(r)}catch(A){Qe(r,m,A)}break;case 5:var x=r.return;try{Gl(r)}catch(A){Qe(r,x,A)}}}catch(A){Qe(r,r.return,A)}if(r===n){re=null;break}var C=r.sibling;if(C!==null){C.return=r.return,re=C;break}re=r.return}}var Ry=Math.ceil,Fo=R.ReactCurrentDispatcher,Hl=R.ReactCurrentOwner,rn=R.ReactCurrentBatchConfig,Me=0,pt=null,at=null,xt=0,Ht=0,pi=nr(0),ut=0,ls=null,Er=0,Lo=0,Vl=0,us=null,zt=null,Yl=0,mi=1/0,$n=null,Bo=!1,Xl=null,lr=null,zo=!1,ur=null,Do=0,cs=0,ql=null,No=-1,Oo=0;function Mt(){return(Me&6)!==0?rt():No!==-1?No:No=rt()}function cr(n){return(n.mode&1)===0?1:(Me&2)!==0&&xt!==0?xt&-xt:py.transition!==null?(Oo===0&&(Oo=Fc()),Oo):(n=Le,n!==0||(n=window.event,n=n===void 0?16:Gc(n.type)),n)}function gn(n,r,a,c){if(50<cs)throw cs=0,ql=null,Error(t(185));Li(n,a,c),((Me&2)===0||n!==pt)&&(n===pt&&((Me&2)===0&&(Lo|=a),ut===4&&hr(n,xt)),Dt(n,c),a===1&&Me===0&&(r.mode&1)===0&&(mi=rt()+500,fo&&ir()))}function Dt(n,r){var a=n.callbackNode;pg(n,r);var c=Ys(n,n===pt?xt:0);if(c===0)a!==null&&Ec(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&Ec(a),r===1)n.tag===0?fy(Gd.bind(null,n)):Ph(Gd.bind(null,n)),uy(function(){(Me&6)===0&&ir()}),a=null;else{switch(Lc(c)){case 1:a=Ta;break;case 4:a=Rc;break;case 16:a=Us;break;case 536870912:a=Ic;break;default:a=Us}a=Kd(a,$d.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function $d(n,r){if(No=-1,Oo=0,(Me&6)!==0)throw Error(t(327));var a=n.callbackNode;if(gi()&&n.callbackNode!==a)return null;var c=Ys(n,n===pt?xt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=jo(n,c);else{r=c;var d=Me;Me|=2;var m=Wd();(pt!==n||xt!==r)&&($n=null,mi=rt()+500,Ir(n,r));do try{Ly();break}catch(C){Ud(n,C)}while(!0);fl(),Fo.current=m,Me=d,at!==null?r=0:(pt=null,xt=0,r=ut)}if(r!==0){if(r===2&&(d=Ma(n),d!==0&&(c=d,r=Kl(n,d))),r===1)throw a=ls,Ir(n,0),hr(n,c),Dt(n,rt()),a;if(r===6)hr(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Iy(d)&&(r=jo(n,c),r===2&&(m=Ma(n),m!==0&&(c=m,r=Kl(n,m))),r===1))throw a=ls,Ir(n,0),hr(n,c),Dt(n,rt()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Fr(n,zt,$n);break;case 3:if(hr(n,c),(c&130023424)===c&&(r=Yl+500-rt(),10<r)){if(Ys(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Mt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=nl(Fr.bind(null,n,zt,$n),r);break}Fr(n,zt,$n);break;case 4:if(hr(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var x=31-cn(c);m=1<<x,x=r[x],x>d&&(d=x),c&=~m}if(c=d,c=rt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Ry(c/1960))-c,10<c){n.timeoutHandle=nl(Fr.bind(null,n,zt,$n),c);break}Fr(n,zt,$n);break;case 5:Fr(n,zt,$n);break;default:throw Error(t(329))}}}return Dt(n,rt()),n.callbackNode===a?$d.bind(null,n):null}function Kl(n,r){var a=us;return n.current.memoizedState.isDehydrated&&(Ir(n,r).flags|=256),n=jo(n,r),n!==2&&(r=zt,zt=a,r!==null&&Ql(r)),n}function Ql(n){zt===null?zt=n:zt.push.apply(zt,n)}function Iy(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!hn(m(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function hr(n,r){for(r&=~Vl,r&=~Lo,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-cn(r),c=1<<a;n[a]=-1,r&=~c}}function Gd(n){if((Me&6)!==0)throw Error(t(327));gi();var r=Ys(n,0);if((r&1)===0)return Dt(n,rt()),null;var a=jo(n,r);if(n.tag!==0&&a===2){var c=Ma(n);c!==0&&(r=c,a=Kl(n,c))}if(a===1)throw a=ls,Ir(n,0),hr(n,r),Dt(n,rt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Fr(n,zt,$n),Dt(n,rt()),null}function Zl(n,r){var a=Me;Me|=1;try{return n(r)}finally{Me=a,Me===0&&(mi=rt()+500,fo&&ir())}}function Rr(n){ur!==null&&ur.tag===0&&(Me&6)===0&&gi();var r=Me;Me|=1;var a=rn.transition,c=Le;try{if(rn.transition=null,Le=1,n)return n()}finally{Le=c,rn.transition=a,Me=r,(Me&6)===0&&ir()}}function Jl(){Ht=pi.current,je(pi)}function Ir(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,ly(a)),at!==null)for(a=at.return;a!==null;){var c=a;switch(ll(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&co();break;case 3:hi(),je(Ft),je(vt),wl();break;case 5:_l(c);break;case 4:hi();break;case 13:je(Ye);break;case 19:je(Ye);break;case 10:pl(c.type._context);break;case 22:case 23:Jl()}a=a.return}if(pt=n,at=n=dr(n.current,null),xt=Ht=r,ut=0,ls=null,Vl=Lo=Er=0,zt=us=null,Pr!==null){for(r=0;r<Pr.length;r++)if(a=Pr[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var x=m.next;m.next=d,c.next=x}a.pending=c}Pr=null}return n}function Ud(n,r){do{var a=at;try{if(fl(),Co.current=Po,ko){for(var c=Xe.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}ko=!1}if(Mr=0,ft=lt=Xe=null,ns=!1,rs=0,Hl.current=null,a===null||a.return===null){ut=1,ls=r,at=null;break}e:{var m=n,x=a.return,C=a,A=r;if(r=xt,C.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var B=A,G=C,U=G.tag;if((G.mode&1)===0&&(U===0||U===11||U===15)){var $=G.alternate;$?(G.updateQueue=$.updateQueue,G.memoizedState=$.memoizedState,G.lanes=$.lanes):(G.updateQueue=null,G.memoizedState=null)}var te=pd(x);if(te!==null){te.flags&=-257,md(te,x,C,m,r),te.mode&1&&fd(m,B,r),r=te,A=B;var ie=r.updateQueue;if(ie===null){var se=new Set;se.add(A),r.updateQueue=se}else ie.add(A);break e}else{if((r&1)===0){fd(m,B,r),eu();break e}A=Error(t(426))}}else if(He&&C.mode&1){var it=pd(x);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),md(it,x,C,m,r),hl(di(A,C));break e}}m=A=di(A,C),ut!==4&&(ut=2),us===null?us=[m]:us.push(m),m=x;do{switch(m.tag){case 3:m.flags|=65536,r&=-r,m.lanes|=r;var F=hd(m,A,r);Nh(m,F);break e;case 1:C=A;var T=m.type,L=m.stateNode;if((m.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(lr===null||!lr.has(L)))){m.flags|=65536,r&=-r,m.lanes|=r;var H=dd(m,C,r);Nh(m,H);break e}}m=m.return}while(m!==null)}Vd(a)}catch(ae){r=ae,at===a&&a!==null&&(at=a=a.return);continue}break}while(!0)}function Wd(){var n=Fo.current;return Fo.current=Po,n===null?Po:n}function eu(){(ut===0||ut===3||ut===2)&&(ut=4),pt===null||(Er&268435455)===0&&(Lo&268435455)===0||hr(pt,xt)}function jo(n,r){var a=Me;Me|=2;var c=Wd();(pt!==n||xt!==r)&&($n=null,Ir(n,r));do try{Fy();break}catch(d){Ud(n,d)}while(!0);if(fl(),Me=a,Fo.current=c,at!==null)throw Error(t(261));return pt=null,xt=0,ut}function Fy(){for(;at!==null;)Hd(at)}function Ly(){for(;at!==null&&!sg();)Hd(at)}function Hd(n){var r=qd(n.alternate,n,Ht);n.memoizedProps=n.pendingProps,r===null?Vd(n):at=r,Hl.current=null}function Vd(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=by(a,r,Ht),a!==null){at=a;return}}else{if(a=Py(a,r),a!==null){a.flags&=32767,at=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ut=6,at=null;return}}if(r=r.sibling,r!==null){at=r;return}at=r=n}while(r!==null);ut===0&&(ut=5)}function Fr(n,r,a){var c=Le,d=rn.transition;try{rn.transition=null,Le=1,By(n,r,a,c)}finally{rn.transition=d,Le=c}return null}function By(n,r,a,c){do gi();while(ur!==null);if((Me&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(mg(n,m),n===pt&&(at=pt=null,xt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||zo||(zo=!0,Kd(Us,function(){return gi(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=rn.transition,rn.transition=null;var x=Le;Le=1;var C=Me;Me|=4,Hl.current=null,My(n,a),zd(a,n),ty(el),Ks=!!Ja,el=Ja=null,n.current=a,Ey(a),og(),Me=C,Le=x,rn.transition=m}else n.current=a;if(zo&&(zo=!1,ur=n,Do=d),m=n.pendingLanes,m===0&&(lr=null),ug(a.stateNode),Dt(n,rt()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Bo)throw Bo=!1,n=Xl,Xl=null,n;return(Do&1)!==0&&n.tag!==0&&gi(),m=n.pendingLanes,(m&1)!==0?n===ql?cs++:(cs=0,ql=n):cs=0,ir(),null}function gi(){if(ur!==null){var n=Lc(Do),r=rn.transition,a=Le;try{if(rn.transition=null,Le=16>n?16:n,ur===null)var c=!1;else{if(n=ur,ur=null,Do=0,(Me&6)!==0)throw Error(t(331));var d=Me;for(Me|=4,re=n.current;re!==null;){var m=re,x=m.child;if((re.flags&16)!==0){var C=m.deletions;if(C!==null){for(var A=0;A<C.length;A++){var B=C[A];for(re=B;re!==null;){var G=re;switch(G.tag){case 0:case 11:case 15:as(8,G,m)}var U=G.child;if(U!==null)U.return=G,re=U;else for(;re!==null;){G=re;var $=G.sibling,te=G.return;if(Rd(G),G===B){re=null;break}if($!==null){$.return=te,re=$;break}re=te}}}var ie=m.alternate;if(ie!==null){var se=ie.child;if(se!==null){ie.child=null;do{var it=se.sibling;se.sibling=null,se=it}while(se!==null)}}re=m}}if((m.subtreeFlags&2064)!==0&&x!==null)x.return=m,re=x;else e:for(;re!==null;){if(m=re,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:as(9,m,m.return)}var F=m.sibling;if(F!==null){F.return=m.return,re=F;break e}re=m.return}}var T=n.current;for(re=T;re!==null;){x=re;var L=x.child;if((x.subtreeFlags&2064)!==0&&L!==null)L.return=x,re=L;else e:for(x=T;re!==null;){if(C=re,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Io(9,C)}}catch(ae){Qe(C,C.return,ae)}if(C===x){re=null;break e}var H=C.sibling;if(H!==null){H.return=C.return,re=H;break e}re=C.return}}if(Me=d,ir(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Ws,n)}catch{}c=!0}return c}finally{Le=a,rn.transition=r}}return!1}function Yd(n,r,a){r=di(a,r),r=hd(n,r,1),n=or(n,r,1),r=Mt(),n!==null&&(Li(n,1,r),Dt(n,r))}function Qe(n,r,a){if(n.tag===3)Yd(n,n,a);else for(;r!==null;){if(r.tag===3){Yd(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(lr===null||!lr.has(c))){n=di(a,n),n=dd(r,n,1),r=or(r,n,1),n=Mt(),r!==null&&(Li(r,1,n),Dt(r,n));break}}r=r.return}}function zy(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=Mt(),n.pingedLanes|=n.suspendedLanes&a,pt===n&&(xt&a)===a&&(ut===4||ut===3&&(xt&130023424)===xt&&500>rt()-Yl?Ir(n,0):Vl|=a),Dt(n,r)}function Xd(n,r){r===0&&((n.mode&1)===0?r=1:(r=Vs,Vs<<=1,(Vs&130023424)===0&&(Vs=4194304)));var a=Mt();n=Nn(n,r),n!==null&&(Li(n,r,a),Dt(n,a))}function Dy(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Xd(n,a)}function Ny(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),Xd(n,a)}var qd;qd=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Ft.current)Bt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Bt=!1,Ay(n,r,a);Bt=(n.flags&131072)!==0}else Bt=!1,He&&(r.flags&1048576)!==0&&Th(r,mo,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Eo(n,r),n=r.pendingProps;var d=ii(r,vt.current);ci(r,a),d=kl(null,r,c,n,d,a);var m=Al();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Lt(c)?(m=!0,ho(r)):m=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,yl(r),d.updater=To,r.stateNode=d,d._reactInternals=r,Rl(r,c,n,a),r=Bl(null,r,c,!0,m,a)):(r.tag=0,He&&m&&al(r),Tt(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Eo(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=jy(c),n=fn(c,n),d){case 0:r=Ll(null,r,c,n,a);break e;case 1:r=wd(null,r,c,n,a);break e;case 11:r=gd(null,r,c,n,a);break e;case 14:r=yd(null,r,c,fn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:fn(c,d),Ll(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:fn(c,d),wd(n,r,c,d,a);case 3:e:{if(Sd(r),n===null)throw Error(t(387));c=r.pendingProps,m=r.memoizedState,d=m.element,Dh(n,r),wo(r,c,null,a);var x=r.memoizedState;if(c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){d=di(Error(t(423)),r),r=Cd(n,r,c,a,d);break e}else if(c!==d){d=di(Error(t(424)),r),r=Cd(n,r,c,a,d);break e}else for(Wt=tr(r.stateNode.containerInfo.firstChild),Ut=r,He=!0,dn=null,a=Bh(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ai(),c===d){r=jn(n,r,a);break e}Tt(n,r,c,a)}r=r.child}return r;case 5:return jh(r),n===null&&cl(r),c=r.type,d=r.pendingProps,m=n!==null?n.memoizedProps:null,x=d.children,tl(c,d)?x=null:m!==null&&tl(c,m)&&(r.flags|=32),vd(n,r),Tt(n,r,x,a),r.child;case 6:return n===null&&cl(r),null;case 13:return kd(n,r,a);case 4:return xl(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=li(r,null,c,a):Tt(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:fn(c,d),gd(n,r,c,d,a);case 7:return Tt(n,r,r.pendingProps,a),r.child;case 8:return Tt(n,r,r.pendingProps.children,a),r.child;case 12:return Tt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,m=r.memoizedProps,x=d.value,Ne(xo,c._currentValue),c._currentValue=x,m!==null)if(hn(m.value,x)){if(m.children===d.children&&!Ft.current){r=jn(n,r,a);break e}}else for(m=r.child,m!==null&&(m.return=r);m!==null;){var C=m.dependencies;if(C!==null){x=m.child;for(var A=C.firstContext;A!==null;){if(A.context===c){if(m.tag===1){A=On(-1,a&-a),A.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var G=B.pending;G===null?A.next=A:(A.next=G.next,G.next=A),B.pending=A}}m.lanes|=a,A=m.alternate,A!==null&&(A.lanes|=a),ml(m.return,a,r),C.lanes|=a;break}A=A.next}}else if(m.tag===10)x=m.type===r.type?null:m.child;else if(m.tag===18){if(x=m.return,x===null)throw Error(t(341));x.lanes|=a,C=x.alternate,C!==null&&(C.lanes|=a),ml(x,a,r),x=m.sibling}else x=m.child;if(x!==null)x.return=m;else for(x=m;x!==null;){if(x===r){x=null;break}if(m=x.sibling,m!==null){m.return=x.return,x=m;break}x=x.return}m=x}Tt(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,ci(r,a),d=tn(d),c=c(d),r.flags|=1,Tt(n,r,c,a),r.child;case 14:return c=r.type,d=fn(c,r.pendingProps),d=fn(c.type,d),yd(n,r,c,d,a);case 15:return xd(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:fn(c,d),Eo(n,r),r.tag=1,Lt(c)?(n=!0,ho(r)):n=!1,ci(r,a),ud(r,c,d),Rl(r,c,d,a),Bl(null,r,c,!0,n,a);case 19:return bd(n,r,a);case 22:return _d(n,r,a)}throw Error(t(156,r.tag))};function Kd(n,r){return Mc(n,r)}function Oy(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(n,r,a,c){return new Oy(n,r,a,c)}function tu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jy(n){if(typeof n=="function")return tu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===we)return 11;if(n===Ke)return 14}return 2}function dr(n,r){var a=n.alternate;return a===null?(a=sn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function $o(n,r,a,c,d,m){var x=2;if(c=n,typeof n=="function")tu(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case D:return Lr(a.children,d,m,r);case ee:x=8,d|=8;break;case le:return n=sn(12,a,r,d|2),n.elementType=le,n.lanes=m,n;case Se:return n=sn(13,a,r,d),n.elementType=Se,n.lanes=m,n;case fe:return n=sn(19,a,r,d),n.elementType=fe,n.lanes=m,n;case q:return Go(a,d,m,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:x=10;break e;case J:x=9;break e;case we:x=11;break e;case Ke:x=14;break e;case K:x=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=sn(x,a,r,d),r.elementType=n,r.type=c,r.lanes=m,r}function Lr(n,r,a,c){return n=sn(7,n,c,r),n.lanes=a,n}function Go(n,r,a,c){return n=sn(22,n,c,r),n.elementType=q,n.lanes=a,n.stateNode={isHidden:!1},n}function nu(n,r,a){return n=sn(6,n,null,r),n.lanes=a,n}function ru(n,r,a){return r=sn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function $y(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ea(0),this.expirationTimes=Ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ea(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function iu(n,r,a,c,d,m,x,C,A){return n=new $y(n,r,a,C,A),r===1?(r=1,m===!0&&(r|=8)):r=0,m=sn(3,null,null,r),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},yl(m),n}function Gy(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function Qd(n){if(!n)return rr;n=n._reactInternals;e:{if(Sr(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Lt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Lt(a))return Ah(n,a,r)}return r}function Zd(n,r,a,c,d,m,x,C,A){return n=iu(a,c,!0,n,d,m,x,C,A),n.context=Qd(null),a=n.current,c=Mt(),d=cr(a),m=On(c,d),m.callback=r??null,or(a,m,d),n.current.lanes=d,Li(n,d,c),Dt(n,c),n}function Uo(n,r,a,c){var d=r.current,m=Mt(),x=cr(d);return a=Qd(a),r.context===null?r.context=a:r.pendingContext=a,r=On(m,x),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=or(d,r,x),n!==null&&(gn(n,d,x,m),vo(n,d,x)),x}function Wo(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Jd(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function su(n,r){Jd(n,r),(n=n.alternate)&&Jd(n,r)}function Uy(){return null}var ef=typeof reportError=="function"?reportError:function(n){console.error(n)};function ou(n){this._internalRoot=n}Ho.prototype.render=ou.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));Uo(n,r,null,null)},Ho.prototype.unmount=ou.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Rr(function(){Uo(null,n,null,null)}),r[Ln]=null}};function Ho(n){this._internalRoot=n}Ho.prototype.unstable_scheduleHydration=function(n){if(n){var r=Dc();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Zn.length&&r!==0&&r<Zn[a].priority;a++);Zn.splice(a,0,n),a===0&&jc(n)}};function au(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Vo(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function tf(){}function Wy(n,r,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var B=Wo(x);m.call(B)}}var x=Zd(r,c,n,0,null,!1,!1,"",tf);return n._reactRootContainer=x,n[Ln]=x.current,Xi(n.nodeType===8?n.parentNode:n),Rr(),x}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var B=Wo(A);C.call(B)}}var A=iu(n,0,!1,null,null,!1,!1,"",tf);return n._reactRootContainer=A,n[Ln]=A.current,Xi(n.nodeType===8?n.parentNode:n),Rr(function(){Uo(r,A,a,c)}),A}function Yo(n,r,a,c,d){var m=a._reactRootContainer;if(m){var x=m;if(typeof d=="function"){var C=d;d=function(){var A=Wo(x);C.call(A)}}Uo(r,x,n,d)}else x=Wy(a,r,n,d,c);return Wo(x)}Bc=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Fi(r.pendingLanes);a!==0&&(Ra(r,a|1),Dt(r,rt()),(Me&6)===0&&(mi=rt()+500,ir()))}break;case 13:Rr(function(){var c=Nn(n,1);if(c!==null){var d=Mt();gn(c,n,1,d)}}),su(n,1)}},Ia=function(n){if(n.tag===13){var r=Nn(n,134217728);if(r!==null){var a=Mt();gn(r,n,134217728,a)}su(n,134217728)}},zc=function(n){if(n.tag===13){var r=cr(n),a=Nn(n,r);if(a!==null){var c=Mt();gn(a,n,r,c)}su(n,r)}},Dc=function(){return Le},Nc=function(n,r){var a=Le;try{return Le=n,r()}finally{Le=a}},I=function(n,r,a){switch(r){case"input":if(In(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=uo(c);if(!d)throw Error(t(90));Xt(c),In(c,d)}}}break;case"textarea":Os(n,a);break;case"select":r=a.value,r!=null&&Xn(n,!!a.multiple,r,!1)}},Fe=Zl,ge=Rr;var Hy={usingClientEntryPoint:!1,Events:[Qi,ni,uo,pe,ye,Zl]},hs={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vy={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Pc(n),n===null?null:n.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||Uy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xo.isDisabled&&Xo.supportsFiber)try{Ws=Xo.inject(Vy),kn=Xo}catch{}}return Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hy,Nt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!au(r))throw Error(t(200));return Gy(n,r,null,a)},Nt.createRoot=function(n,r){if(!au(n))throw Error(t(299));var a=!1,c="",d=ef;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=iu(n,1,!1,null,null,a,!1,c,d),n[Ln]=r.current,Xi(n.nodeType===8?n.parentNode:n),new ou(r)},Nt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Pc(r),n=n===null?null:n.stateNode,n},Nt.flushSync=function(n){return Rr(n)},Nt.hydrate=function(n,r,a){if(!Vo(r))throw Error(t(200));return Yo(null,n,r,!0,a)},Nt.hydrateRoot=function(n,r,a){if(!au(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",x=ef;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),r=Zd(r,null,n,1,a??null,d,!1,m,x),n[Ln]=r.current,Xi(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new Ho(r)},Nt.render=function(n,r,a){if(!Vo(r))throw Error(t(200));return Yo(null,n,r,!1,a)},Nt.unmountComponentAtNode=function(n){if(!Vo(n))throw Error(t(40));return n._reactRootContainer?(Rr(function(){Yo(null,null,n,!1,function(){n._reactRootContainer=null,n[Ln]=null})}),!0):!1},Nt.unstable_batchedUpdates=Zl,Nt.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!Vo(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Yo(n,r,a,!1,c)},Nt.version="18.3.1-next-f1338f8080-20240426",Nt}var cf;function ex(){if(cf)return cu.exports;cf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),cu.exports=Jy(),cu.exports}var hf;function tx(){if(hf)return qo;hf=1;var i=ex();return qo.createRoot=i.createRoot,qo.hydrateRoot=i.hydrateRoot,qo}var nx=tx();const rx=uc(nx);var De=cc();const ix="modulepreload",sx=function(i){return"/"+i},df={},ga=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=u(t.map(p=>{if(p=sx(p),p in df)return;df[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":ix,g||(_.as="script"),_.crossOrigin="",_.href=p,f&&_.setAttribute("nonce",f),document.head.appendChild(_),g)return new Promise((v,S)=>{_.addEventListener("load",v),_.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};var ce=(i=>(i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i.ShapeBuilder="shape-builder",i.Batcher="batcher",i))(ce||{});const Gu=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},Ko=(i,e)=>Gu(i).priority??e,_t={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(Gu).forEach(e=>{e.type.forEach(t=>{var s,o;return(o=(s=this._removeHandlers)[t])==null?void 0:o.call(s,e)})}),this},add(...i){return i.map(Gu).forEach(e=>{e.type.forEach(t=>{var l,u;const s=this._addHandlers,o=this._queue;s[t]?(u=s[t])==null||u.call(s,e):(o[t]=o[t]||[],(l=o[t])==null||l.push(e))})}),this},handle(i,e,t){var u;const s=this._addHandlers,o=this._removeHandlers;if(s[i]||o[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=e,o[i]=t;const l=this._queue;return l[i]&&((u=l[i])==null||u.forEach(h=>e(h)),delete l[i]),this},handleByMap(i,e){return this.handle(i,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(i,e,t=-1){return this.handle(i,s=>{e.findIndex(l=>l.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((l,u)=>Ko(u.value,t)-Ko(l.value,t)))},s=>{const o=e.findIndex(l=>l.name===s.name);o!==-1&&e.splice(o,1)})},handleByList(i,e,t=-1){return this.handle(i,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((o,l)=>Ko(l,t)-Ko(o,t)))},s=>{const o=e.indexOf(s.ref);o!==-1&&e.splice(o,1)})},mixin(i,...e){for(const t of e)Object.defineProperties(i.prototype,Object.getOwnPropertyDescriptors(t))}},ox={extension:{type:ce.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await ga(()=>import("./browserAll-Dn0fCXBD.js"),__vite__mapDeps([0,1,2]))}},ax={extension:{type:ce.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await ga(()=>import("./webworkerAll-5MS6rG13.js"),__vite__mapDeps([1,2]))}};class kt{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new kt(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var fu={exports:{}},ff;function lx(){return ff||(ff=1,(function(i){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function o(f,p,g){this.fn=f,this.context=p,this.once=g||!1}function l(f,p,g,y,_){if(typeof g!="function")throw new TypeError("The listener must be a function");var v=new o(g,y||f,_),S=t?t+p:p;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],v]:f._events[S].push(v):(f._events[S]=v,f._eventsCount++),f}function u(f,p){--f._eventsCount===0?f._events=new s:delete f._events[p]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],g,y;if(this._eventsCount===0)return p;for(y in g=this._events)e.call(g,y)&&p.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},h.prototype.listeners=function(p){var g=t?t+p:p,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,v=y.length,S=new Array(v);_<v;_++)S[_]=y[_].fn;return S},h.prototype.listenerCount=function(p){var g=t?t+p:p,y=this._events[g];return y?y.fn?1:y.length:0},h.prototype.emit=function(p,g,y,_,v,S){var k=t?t+p:p;if(!this._events[k])return!1;var w=this._events[k],b=arguments.length,P,M;if(w.fn){switch(w.once&&this.removeListener(p,w.fn,void 0,!0),b){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,g),!0;case 3:return w.fn.call(w.context,g,y),!0;case 4:return w.fn.call(w.context,g,y,_),!0;case 5:return w.fn.call(w.context,g,y,_,v),!0;case 6:return w.fn.call(w.context,g,y,_,v,S),!0}for(M=1,P=new Array(b-1);M<b;M++)P[M-1]=arguments[M];w.fn.apply(w.context,P)}else{var R=w.length,W;for(M=0;M<R;M++)switch(w[M].once&&this.removeListener(p,w[M].fn,void 0,!0),b){case 1:w[M].fn.call(w[M].context);break;case 2:w[M].fn.call(w[M].context,g);break;case 3:w[M].fn.call(w[M].context,g,y);break;case 4:w[M].fn.call(w[M].context,g,y,_);break;default:if(!P)for(W=1,P=new Array(b-1);W<b;W++)P[W-1]=arguments[W];w[M].fn.apply(w[M].context,P)}}return!0},h.prototype.on=function(p,g,y){return l(this,p,g,y,!1)},h.prototype.once=function(p,g,y){return l(this,p,g,y,!0)},h.prototype.removeListener=function(p,g,y,_){var v=t?t+p:p;if(!this._events[v])return this;if(!g)return u(this,v),this;var S=this._events[v];if(S.fn)S.fn===g&&(!_||S.once)&&(!y||S.context===y)&&u(this,v);else{for(var k=0,w=[],b=S.length;k<b;k++)(S[k].fn!==g||_&&!S[k].once||y&&S[k].context!==y)&&w.push(S[k]);w.length?this._events[v]=w.length===1?w[0]:w:u(this,v)}return this},h.prototype.removeAllListeners=function(p){var g;return p?(g=t?t+p:p,this._events[g]&&u(this,g)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,i.exports=h})(fu)),fu.exports}var ux=lx();const wn=uc(ux),cx=Math.PI*2,hx=180/Math.PI,dx=Math.PI/180;class At{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new At(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return pu.x=0,pu.y=0,pu}}const pu=new At;class be{constructor(e=1,t=0,s=0,o=1,l=0,u=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,o,l,u){return this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new At;const s=e.x,o=e.y;return t.x=this.a*s+this.c*o+this.tx,t.y=this.b*s+this.d*o+this.ty,t}applyInverse(e,t){t=t||new At;const s=this.a,o=this.b,l=this.c,u=this.d,h=this.tx,f=this.ty,p=1/(s*u+l*-o),g=e.x,y=e.y;return t.x=u*p*g+-l*p*y+(f*l-h*u)*p,t.y=s*p*y+-o*p*g+(-f*s+h*o)*p,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.a,l=this.c,u=this.tx;return this.a=o*t-this.b*s,this.b=o*s+this.b*t,this.c=l*t-this.d*s,this.d=l*s+this.d*t,this.tx=u*t-this.ty*s,this.ty=u*s+this.ty*t,this}append(e){const t=this.a,s=this.b,o=this.c,l=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*s+e.b*l,this.c=e.c*t+e.d*o,this.d=e.c*s+e.d*l,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*s+e.ty*l+this.ty,this}appendFrom(e,t){const s=e.a,o=e.b,l=e.c,u=e.d,h=e.tx,f=e.ty,p=t.a,g=t.b,y=t.c,_=t.d;return this.a=s*p+o*y,this.b=s*g+o*_,this.c=l*p+u*y,this.d=l*g+u*_,this.tx=h*p+f*y+t.tx,this.ty=h*g+f*_+t.ty,this}setTransform(e,t,s,o,l,u,h,f,p){return this.a=Math.cos(h+p)*l,this.b=Math.sin(h+p)*l,this.c=-Math.sin(h-f)*u,this.d=Math.cos(h-f)*u,this.tx=e-(s*this.a+o*this.c),this.ty=t-(s*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,o=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,o=this.c,l=this.d,u=e.pivot,h=-Math.atan2(-o,l),f=Math.atan2(s,t),p=Math.abs(h+f);return p<1e-5||Math.abs(cx-p)<1e-5?(e.rotation=f,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=f),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(o*o+l*l),e.position.x=this.tx+(u.x*t+u.y*o),e.position.y=this.ty+(u.x*s+u.y*l),e}invert(){const e=this.a,t=this.b,s=this.c,o=this.d,l=this.tx,u=e*o-t*s;return this.a=o/u,this.b=-t/u,this.c=-s/u,this.d=e/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(e*this.ty-t*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new be;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return px.identity()}static get shared(){return fx.identity()}}const fx=new be,px=new be,zr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Dr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Nr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Or=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Uu=[],Tp=[],Qo=Math.sign;function mx(){for(let i=0;i<16;i++){const e=[];Uu.push(e);for(let t=0;t<16;t++){const s=Qo(zr[i]*zr[t]+Nr[i]*Dr[t]),o=Qo(Dr[i]*zr[t]+Or[i]*Dr[t]),l=Qo(zr[i]*Nr[t]+Nr[i]*Or[t]),u=Qo(Dr[i]*Nr[t]+Or[i]*Or[t]);for(let h=0;h<16;h++)if(zr[h]===s&&Dr[h]===o&&Nr[h]===l&&Or[h]===u){e.push(h);break}}}for(let i=0;i<16;i++){const e=new be;e.set(zr[i],Dr[i],Nr[i],Or[i],0,0),Tp.push(e)}}mx();const Be={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>zr[i],uY:i=>Dr[i],vX:i=>Nr[i],vY:i=>Or[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>Uu[i][e],sub:(i,e)=>Uu[i][Be.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?Be.S:Be.N:Math.abs(e)*2<=Math.abs(i)?i>0?Be.E:Be.W:e>0?i>0?Be.SE:Be.SW:i>0?Be.NE:Be.NW,matrixAppendRotationInv:(i,e,t=0,s=0)=>{const o=Tp[Be.inv(e)];o.tx=t,o.ty=s,i.append(o)},transformRectCoords:(i,e,t,s)=>{const{x:o,y:l,width:u,height:h}=i,{x:f,y:p,width:g,height:y}=e;return t===Be.E?(s.set(o+f,l+p,u,h),s):t===Be.S?s.set(g-l-h+f,o+p,h,u):t===Be.W?s.set(g-o-u+f,y-l-h+p,u,h):t===Be.N?s.set(l+f,y-o-u+p,h,u):s.set(o+f,l+p,u,h)}},Zo=[new At,new At,new At,new At];class st{constructor(e=0,t=0,s=0,o=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new st(0,0,0,0)}clone(){return new st(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,f=this.y,p=s*(1-o),g=s-p,y=h-p,_=h+l+p,v=f-p,S=f+u+p,k=h+g,w=h+l-g,b=f+g,P=f+u-g;return e>=y&&e<=_&&t>=v&&t<=S&&!(e>k&&e<w&&t>b&&t<P)}intersects(e,t){if(!t){const ee=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=ee)return!1;const Y=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>Y}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const h=Zo[0].set(e.left,e.top),f=Zo[1].set(e.left,e.bottom),p=Zo[2].set(e.right,e.top),g=Zo[3].set(e.right,e.bottom);if(p.x<=h.x||f.y<=h.y)return!1;const y=Math.sign(t.a*t.d-t.b*t.c);if(y===0||(t.apply(h,h),t.apply(f,f),t.apply(p,p),t.apply(g,g),Math.max(h.x,f.x,p.x,g.x)<=s||Math.min(h.x,f.x,p.x,g.x)>=o||Math.max(h.y,f.y,p.y,g.y)<=l||Math.min(h.y,f.y,p.y,g.y)>=u))return!1;const _=y*(f.y-h.y),v=y*(h.x-f.x),S=_*s+v*l,k=_*o+v*l,w=_*s+v*u,b=_*o+v*u;if(Math.max(S,k,w,b)<=_*h.x+v*h.y||Math.min(S,k,w,b)>=_*g.x+v*g.y)return!1;const P=y*(h.y-p.y),M=y*(p.x-h.x),R=P*s+M*l,W=P*o+M*l,N=P*s+M*u,D=P*o+M*u;return!(Math.max(R,W,N,D)<=P*h.x+M*h.y||Math.min(R,W,N,D)>=P*g.x+M*g.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),l=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=o-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),l=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=o,this.height=l-o,this}getBounds(e){return e||(e=new st),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,o=e.x+e.width,l=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(e,t,s,o){return this.x=e,this.y=t,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const mu={default:-1};function Je(i="default"){return mu[i]===void 0&&(mu[i]=-1),++mu[i]}const pf=new Set,ze="8.0.0",gx="8.3.4",Si={quiet:!1,noColor:!1},ke=(i,e,t=3)=>{if(Si.quiet||pf.has(e))return;let s=new Error().stack;const o=`${e}
Deprecated since v${i}`,l=typeof console.groupCollapsed=="function"&&!Si.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(t).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),pf.add(e)};Object.defineProperties(ke,{quiet:{get:()=>Si.quiet,set:i=>{Si.quiet=i},enumerable:!0,configurable:!1},noColor:{get:()=>Si.noColor,set:i=>{Si.noColor=i},enumerable:!0,configurable:!1}});const Mp=()=>{};function ya(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function mf(i){return!(i&i-1)&&!!i}function Ep(i){const e={};for(const t in i)i[t]!==void 0&&(e[t]=i[t]);return e}const gf=Object.create(null);function yx(i){const e=gf[i];return e===void 0&&(gf[i]=Je("resource")),e}const Rp=class Ip extends wn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...Ip.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){ke(ze,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=yx(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Rp.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let xa=Rp;const Fp=class Lp extends wn{constructor(e={}){super(),this.options=e,this.uid=Je("textureSource"),this._resourceType="textureSource",this._resourceId=Je("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...Lp.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new xa(Ep(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Je("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const o=Math.round(e*s),l=Math.round(t*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=Je("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=mf(this.pixelWidth)&&mf(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};Fp.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Sn=Fp;class hc extends Sn{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}hc.extension=ce.TextureSource;const yf=new be;class xx{constructor(e,t){this.mapCoord=new be,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let o=0;o<e.length;o+=2){const l=e[o],u=e[o+1];t[o]=l*s.a+u*s.c+s.tx,t[o+1]=l*s.b+u*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,o=e.trim;o&&(yf.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(yf));const l=e.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,f=this.clampOffset/l._resolution;return u[0]=(e.frame.x+h+f)/l.width,u[1]=(e.frame.y+h+f)/l.height,u[2]=(e.frame.x+e.frame.width-h+f)/l.width,u[3]=(e.frame.y+e.frame.height-h+f)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=e.frame.width===l.width&&e.frame.height===l.height&&e.rotate===0,!0}}class Pe extends wn{constructor({source:e,label:t,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:h,rotate:f,dynamic:p}={}){if(super(),this.uid=Je("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new st,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new Sn,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:g,height:y}=this._source;this.frame.width=g,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=f??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new xx(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:o}=this._source,l=t.x/s,u=t.y/o,h=t.width/s,f=t.height/o;let p=this.rotate;if(p){const g=h/2,y=f/2,_=l+g,v=u+y;p=Be.add(p,Be.NW),e.x0=_+g*Be.uX(p),e.y0=v+y*Be.uY(p),p=Be.add(p,2),e.x1=_+g*Be.uX(p),e.y1=v+y*Be.uY(p),p=Be.add(p,2),e.x2=_+g*Be.uX(p),e.y2=v+y*Be.uY(p),p=Be.add(p,2),e.x3=_+g*Be.uX(p),e.y3=v+y*Be.uY(p)}else e.x0=l,e.y0=u,e.x1=l+h,e.y1=u,e.x2=l+h,e.y2=u+f,e.x3=l,e.y3=u+f}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return ke(ze,"Texture.baseTexture is now Texture.source"),this._source}}Pe.EMPTY=new Pe({label:"EMPTY",source:new Sn({label:"EMPTY"})});Pe.EMPTY.destroy=Mp;Pe.WHITE=new Pe({source:new hc({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Pe.WHITE.destroy=Mp;function _x(i,e,t){const{width:s,height:o}=t.orig,l=t.trim;if(l){const u=l.width,h=l.height;i.minX=l.x-e._x*s,i.maxX=i.minX+u,i.minY=l.y-e._y*o,i.maxY=i.minY+h}else i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*o,i.maxY=i.minY+o}const xf=new be;class vn{constructor(e=1/0,t=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=xf,this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new st);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=xf,this}set(e,t,s,o){this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}addFrame(e,t,s,o,l){l||(l=this.matrix);const u=l.a,h=l.b,f=l.c,p=l.d,g=l.tx,y=l.ty;let _=this.minX,v=this.minY,S=this.maxX,k=this.maxY,w=u*e+f*t+g,b=h*e+p*t+y;w<_&&(_=w),b<v&&(v=b),w>S&&(S=w),b>k&&(k=b),w=u*s+f*t+g,b=h*s+p*t+y,w<_&&(_=w),b<v&&(v=b),w>S&&(S=w),b>k&&(k=b),w=u*e+f*o+g,b=h*e+p*o+y,w<_&&(_=w),b<v&&(v=b),w>S&&(S=w),b>k&&(k=b),w=u*s+f*o+g,b=h*s+p*o+y,w<_&&(_=w),b<v&&(v=b),w>S&&(S=w),b>k&&(k=b),this.minX=_,this.minY=v,this.maxX=S,this.maxY=k}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:h,c:f,d:p,tx:g,ty:y}=e;let _=u*t+f*s+g,v=h*t+p*s+y;this.minX=_,this.minY=v,this.maxX=_,this.maxY=v,_=u*o+f*s+g,v=h*o+p*s+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY,_=u*t+f*l+g,v=h*t+p*l+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY,_=u*o+f*l+g,v=h*o+p*l+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,o){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new vn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,o){let l=this.minX,u=this.minY,h=this.maxX,f=this.maxY;o||(o=this.matrix);const p=o.a,g=o.b,y=o.c,_=o.d,v=o.tx,S=o.ty;for(let k=t;k<s;k+=2){const w=e[k],b=e[k+1],P=p*w+y*b+v,M=g*w+_*b+S;l=P<l?P:l,u=M<u?M:u,h=P>h?P:h,f=M>f?M:f}this.minX=l,this.minY=u,this.maxX=h,this.maxY=f}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var vx={grad:.9,turn:360,rad:360/(2*Math.PI)},Gn=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},gt=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},an=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},Bp=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},_f=function(i){return{r:an(i.r,0,255),g:an(i.g,0,255),b:an(i.b,0,255),a:an(i.a)}},gu=function(i){return{r:gt(i.r),g:gt(i.g),b:gt(i.b),a:gt(i.a,3)}},wx=/^#([0-9a-f]{3,8})$/i,Jo=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},zp=function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=Math.max(e,t,s),u=l-Math.min(e,t,s),h=u?l===e?(t-s)/u:l===t?2+(s-e)/u:4+(e-t)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a:o}},Dp=function(i){var e=i.h,t=i.s,s=i.v,o=i.a;e=e/360*6,t/=100,s/=100;var l=Math.floor(e),u=s*(1-t),h=s*(1-(e-l)*t),f=s*(1-(1-e+l)*t),p=l%6;return{r:255*[s,h,u,u,f,s][p],g:255*[f,s,s,h,u,u][p],b:255*[u,u,f,s,s,h][p],a:o}},vf=function(i){return{h:Bp(i.h),s:an(i.s,0,100),l:an(i.l,0,100),a:an(i.a)}},wf=function(i){return{h:gt(i.h),s:gt(i.s),l:gt(i.l),a:gt(i.a,3)}},Sf=function(i){return Dp((t=(e=i).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},As=function(i){return{h:(e=zp(i)).h,s:(o=(200-(t=e.s))*(s=e.v)/100)>0&&o<200?t*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,s,o},Sx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Cx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kx=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ax=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Wu={string:[[function(i){var e=wx.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?gt(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?gt(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=kx.exec(i)||Ax.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:_f({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=Sx.exec(i)||Cx.exec(i);if(!e)return null;var t,s,o=vf({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(vx[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Sf(o)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=o===void 0?1:o;return Gn(e)&&Gn(t)&&Gn(s)?_f({r:Number(e),g:Number(t),b:Number(s),a:Number(l)}):null},"rgb"],[function(i){var e=i.h,t=i.s,s=i.l,o=i.a,l=o===void 0?1:o;if(!Gn(e)||!Gn(t)||!Gn(s))return null;var u=vf({h:Number(e),s:Number(t),l:Number(s),a:Number(l)});return Sf(u)},"hsl"],[function(i){var e=i.h,t=i.s,s=i.v,o=i.a,l=o===void 0?1:o;if(!Gn(e)||!Gn(t)||!Gn(s))return null;var u=(function(h){return{h:Bp(h.h),s:an(h.s,0,100),v:an(h.v,0,100),a:an(h.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(l)});return Dp(u)},"hsv"]]},Cf=function(i,e){for(var t=0;t<e.length;t++){var s=e[t][0](i);if(s)return[s,e[t][1]]}return[null,void 0]},bx=function(i){return typeof i=="string"?Cf(i.trim(),Wu.string):typeof i=="object"&&i!==null?Cf(i,Wu.object):[null,void 0]},yu=function(i,e){var t=As(i);return{h:t.h,s:an(t.s+100*e,0,100),l:t.l,a:t.a}},xu=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},kf=function(i,e){var t=As(i);return{h:t.h,s:t.s,l:an(t.l+100*e,0,100),a:t.a}},Hu=(function(){function i(e){this.parsed=bx(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return gt(xu(this.rgba),2)},i.prototype.isDark=function(){return xu(this.rgba)<.5},i.prototype.isLight=function(){return xu(this.rgba)>=.5},i.prototype.toHex=function(){return e=gu(this.rgba),t=e.r,s=e.g,o=e.b,u=(l=e.a)<1?Jo(gt(255*l)):"","#"+Jo(t)+Jo(s)+Jo(o)+u;var e,t,s,o,l,u},i.prototype.toRgb=function(){return gu(this.rgba)},i.prototype.toRgbString=function(){return e=gu(this.rgba),t=e.r,s=e.g,o=e.b,(l=e.a)<1?"rgba("+t+", "+s+", "+o+", "+l+")":"rgb("+t+", "+s+", "+o+")";var e,t,s,o,l},i.prototype.toHsl=function(){return wf(As(this.rgba))},i.prototype.toHslString=function(){return e=wf(As(this.rgba)),t=e.h,s=e.s,o=e.l,(l=e.a)<1?"hsla("+t+", "+s+"%, "+o+"%, "+l+")":"hsl("+t+", "+s+"%, "+o+"%)";var e,t,s,o,l},i.prototype.toHsv=function(){return e=zp(this.rgba),{h:gt(e.h),s:gt(e.s),v:gt(e.v),a:gt(e.a,3)};var e},i.prototype.invert=function(){return Mn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),Mn(yu(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),Mn(yu(this.rgba,-e))},i.prototype.grayscale=function(){return Mn(yu(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),Mn(kf(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),Mn(kf(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?Mn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):gt(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=As(this.rgba);return typeof e=="number"?Mn({h:e,s:t.s,l:t.l,a:t.a}):gt(t.h)},i.prototype.isEqual=function(e){return this.toHex()===Mn(e).toHex()},i})(),Mn=function(i){return i instanceof Hu?i:new Hu(i)},Af=[],Px=function(i){i.forEach(function(e){Af.indexOf(e)<0&&(e(Hu,Wu),Af.push(e))})};function Tx(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in t)s[t[o]]=o;var l={};i.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,f,p=s[this.toHex()];if(p)return p;if(u!=null&&u.closest){var g=this.toRgb(),y=1/0,_="black";if(!l.length)for(var v in t)l[v]=new i(t[v]).toRgb();for(var S in t){var k=(h=g,f=l[S],Math.pow(h.r-f.r,2)+Math.pow(h.g-f.g,2)+Math.pow(h.b-f.b,2));k<y&&(y=k,_=S)}return _}},e.string.push([function(u){var h=u.toLowerCase(),f=h==="transparent"?"#0000":t[h];return f?new i(f).toRgb():null},"name"])}Px([Tx]);const Ai=class vs{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof vs)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((l,u)=>l===t[u]);if(e!==null&&t!==null){const l=Object.keys(e),u=Object.keys(t);return l.length!==u.length?!1:l.every(h=>e[h]===t[h])}return e===t}toRgba(){const[e,t,s,o]=this._components;return{r:e,g:t,b:s,a:o}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(o*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,o,l]=this._components;return e[0]=t,e[1]=s,e[2]=o,e[3]=l,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,o]=this._components;return e[0]=t,e[1]=s,e[2]=o,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,o,l]=vs._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return t&&(s=s*e+.5|0,o=o*e+.5|0,l=l*e+.5|0),(e*255<<24)+(s<<16)+(o<<8)+l}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,o,l;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,o,l=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,o,l=255]=e,t/=255,s/=255,o/=255,l/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const h=vs.HEX_PATTERN.exec(e);h&&(e=`#${h[2]}`)}const u=Mn(e);u.isValid()&&({r:t,g:s,b:o,a:l}=u.rgba,t/=255,s/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((o,l)=>{e[l]=Math.min(Math.max(o,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof vs||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Ai.shared=new Ai;Ai._temp=new Ai;Ai.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ct=Ai;const Mx={cullArea:null,cullable:!1,cullableChildren:!0};let _u=0;const bf=500;function Ge(...i){_u!==bf&&(_u++,_u===bf?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}const Ds={_registeredResources:new Set,register(i){this._registeredResources.add(i)},unregister(i){this._registeredResources.delete(i)},release(){this._registeredResources.forEach(i=>i.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(i){return this._registeredResources.has(i)},reset(){this._registeredResources.clear()}};class Ex{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class Rx{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Ex(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const ln=new Rx;Ds.register(ln);const Ix={get isCachedAsTexture(){var i;return!!((i=this.renderGroup)!=null&&i.isCachedAsTexture)},cacheAsTexture(i){typeof i=="boolean"&&i===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(i===!0?{}:i))},updateCacheTexture(){var i;(i=this.renderGroup)==null||i.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(i){ke("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(i)}};function Fx(i,e,t){const s=i.length;let o;if(e>=s||t===0)return;t=e+t>s?s-e:t;const l=s-t;for(o=e;o<l;++o)i[o]=i[o+t];i.length=l}const Lx={allowChildren:!0,removeChildren(i=0,e){var l;const t=e??this.children.length,s=t-i,o=[];if(s>0&&s<=t){for(let h=t-1;h>=i;h--){const f=this.children[h];f&&(o.push(f),f.parent=null)}Fx(this.children,i,t);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(o);for(let h=0;h<o.length;++h){const f=o[h];(l=f.parentRenderLayer)==null||l.detach(f),this.emit("childRemoved",f,this,h),o[h].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){const e=this.getChildAt(i);return this.removeChild(e)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,e)},getChildIndex(i){const e=this.children.indexOf(i);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(i,e){this.allowChildren||ke(ze,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${i}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(i.parent){const o=i.parent.children.indexOf(i);if(i.parent===this&&o===e)return i;o!==-1&&i.parent.children.splice(o,1)}e===t.length?t.push(i):t.splice(e,0,i),i.parent=this,i.didChange=!0,i._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,e),i.emit("added",this),i},swapChildren(i,e){if(i===e)return;const t=this.getChildIndex(i),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=i;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var i;(i=this.parent)==null||i.removeChild(this)},reparentChild(...i){return i.length===1?this.reparentChildAt(i[0],this.children.length):(i.forEach(e=>this.reparentChildAt(e,this.children.length)),i[0])},reparentChildAt(i,e){if(i.parent===this)return this.setChildIndex(i,e),i;const t=i.worldTransform.clone();i.removeFromParent(),this.addChildAt(i,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),i.setFromMatrix(t),i},replaceChild(i,e){i.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(i)),e.setFromMatrix(i.localTransform),e.updateLocalTransform(),this.removeChild(i)}},Bx={collectRenderables(i,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(i,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,i):this.collectRenderablesWithEffects(i,e,t))},collectRenderablesSimple(i,e,t){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(i,e,t)},collectRenderablesWithEffects(i,e,t){const{renderPipes:s}=e;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,i)}this.collectRenderablesSimple(i,e,t);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,i)}}};class Pf{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class zx{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return ln.get(s.maskClass,e)}return e}returnMaskEffect(e){ln.return(e)}}const Vu=new zx;_t.handleByList(ce.MaskEffect,Vu._effectClasses);const Dx={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)},addEffect(i){this.effects.indexOf(i)===-1&&(this.effects.push(i),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(i){const e=this.effects.indexOf(i);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(i){const e=this._maskEffect;(e==null?void 0:e.mask)!==i&&(e&&(this.removeEffect(e),Vu.returnMaskEffect(e),this._maskEffect=null),i!=null&&(this._maskEffect=Vu.getMaskEffect(i),this.addEffect(this._maskEffect)))},get mask(){var i;return(i=this._maskEffect)==null?void 0:i.mask},setMask(i){this._maskOptions={...this._maskOptions,...i},i.mask&&(this.mask=i.mask),this._markStructureAsChanged()},set filters(i){var l;!Array.isArray(i)&&i&&(i=[i]);const e=this._filterEffect||(this._filterEffect=new Pf);i=i;const t=(i==null?void 0:i.length)>0,s=((l=e.filters)==null?void 0:l.length)>0,o=t!==s;i=Array.isArray(i)?i.slice(0):i,e.filters=Object.freeze(i),o&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=i??null))},get filters(){var i;return(i=this._filterEffect)==null?void 0:i.filters},set filterArea(i){this._filterEffect||(this._filterEffect=new Pf),this._filterEffect.filterArea=i},get filterArea(){var i;return(i=this._filterEffect)==null?void 0:i.filterArea}},Nx={label:null,get name(){return ke(ze,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){ke(ze,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,e=!1){return this.getChildByLabel(i,e)},getChildByLabel(i,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const o=t[s];if(o.label===i||i instanceof RegExp&&i.test(o.label))return o}if(e)for(let s=0;s<t.length;s++){const l=t[s].getChildByLabel(i,!0);if(l)return l}return null},getChildrenByLabel(i,e=!1,t=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===i||i instanceof RegExp&&i.test(l.label))&&t.push(l)}if(e)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(i,!0,t);return t}},Et=ln.getPool(be),Wn=ln.getPool(vn),Ox=new be,jx={getFastGlobalBounds(i,e){e||(e=new vn),e.clear(),this._getGlobalBoundsRecursive(!!i,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(i,e,t){let s=e;if(i&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=Wn.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(i,s,t)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(Ox).invert()),e.addBounds(s),Wn.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),Wn.return(s))}};function Np(i,e,t){t.clear();let s,o;return i.parent?e?s=i.parent.worldTransform:(o=Et.get().identity(),s=dc(i,o)):s=be.IDENTITY,Op(i,t,s,e),o&&Et.return(o),t.isValid||t.set(0,0,0,0),t}function Op(i,e,t,s){var h,f;if(!i.visible||!i.measurable)return;let o;s?o=i.worldTransform:(i.updateLocalTransform(),o=Et.get(),o.appendFrom(i.localTransform,t));const l=e,u=!!i.effects.length;if(u&&(e=Wn.get().clear()),i.boundsArea)e.addRect(i.boundsArea,o);else{const p=i.bounds;p&&!p.isEmpty()&&(e.matrix=o,e.addBounds(p));for(let g=0;g<i.children.length;g++)Op(i.children[g],e,o,s)}if(u){for(let p=0;p<i.effects.length;p++)(f=(h=i.effects[p]).addBounds)==null||f.call(h,e);l.addBounds(e,be.IDENTITY),Wn.return(e)}s||Et.return(o)}function dc(i,e){const t=i.parent;return t&&(dc(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function jp(i,e){if(i===16777215||!e)return e;if(e===16777215||!i)return i;const t=i>>16&255,s=i>>8&255,o=i&255,l=e>>16&255,u=e>>8&255,h=e&255,f=t*l/255|0,p=s*u/255|0,g=o*h/255|0;return(f<<16)+(p<<8)+g}const Tf=16777215;function Mf(i,e){return i===Tf?e:e===Tf?i:jp(i,e)}function ha(i){return((i&255)<<16)+(i&65280)+(i>>16&255)}const $x={getGlobalAlpha(i){if(i)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(i=new be,e){if(e)return i.copyFrom(this.worldTransform);this.updateLocalTransform();const t=dc(this,Et.get().identity());return i.appendFrom(this.localTransform,t),Et.return(t),i},getGlobalTint(i){if(i)return this.renderGroup?ha(this.renderGroup.worldColor):this.parentRenderGroup?ha(Mf(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Mf(e,t.localColor),t=t.parent;return ha(e)}};function $p(i,e,t){return e.clear(),t||(t=be.IDENTITY),Gp(i,e,t,i,!0),e.isValid||e.set(0,0,0,0),e}function Gp(i,e,t,s,o){var f,p;let l;if(o)l=Et.get(),l=t.copyTo(l);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const g=i.localTransform;l=Et.get(),l.appendFrom(g,t)}const u=e,h=!!i.effects.length;if(h&&(e=Wn.get().clear()),i.boundsArea)e.addRect(i.boundsArea,l);else{i.renderPipeId&&(e.matrix=l,e.addBounds(i.bounds));const g=i.children;for(let y=0;y<g.length;y++)Gp(g[y],e,l,s,!1)}if(h){for(let g=0;g<i.effects.length;g++)(p=(f=i.effects[g]).addLocalBounds)==null||p.call(f,e,s);u.addBounds(e,be.IDENTITY),Wn.return(e)}Et.return(l)}function Up(i,e){const t=i.children;for(let s=0;s<t.length;s++){const o=t[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,h=e.index;(e.data[h]!==l||e.data[h+1]!==u)&&(e.data[e.index]=l,e.data[e.index+1]=u,e.didChange=!0),e.index=h+2,o.children.length&&Up(o,e)}return e.didChange}const Gx=new be,Ux={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(i,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=i/e*t:this.scale.x=t},_setHeight(i,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=i/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new vn});const i=this._localBoundsCacheData;return i.index=1,i.didChange=!1,i.data[0]!==this._didViewChangeTick&&(i.didChange=!0,i.data[0]=this._didViewChangeTick),Up(this,i),i.didChange&&$p(this,i.localBounds,Gx),i.localBounds},getBounds(i,e){return Np(this,i,e||new vn)}},Wx={_onRender:null,set onRender(i){const e=this.renderGroup||this.parentRenderGroup;if(!i){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}},Hx={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Vx))}};function Vx(i,e){return i._zIndex-e._zIndex}const Yx={getGlobalPosition(i=new At,e=!1){return this.parent?this.parent.toGlobal(this._position,i,e):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,e,t=!1){const s=this.getGlobalTransform(Et.get(),t);return e=s.apply(i,e),Et.return(s),e},toLocal(i,e,t,s){e&&(i=e.toGlobal(i,t,s));const o=this.getGlobalTransform(Et.get(),s);return t=o.applyInverse(i,t),Et.return(o),t}};class Wp{constructor(){this.uid=Je("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let Xx=0;class qx{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new xa(this.textureOptions)}createTexture(e,t,s){const o=new Sn({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new Pe({source:o,label:`texturePool_${Xx++}`})}getOptimalTexture(e,t,s=1,o){let l=Math.ceil(e*s-1e-6),u=Math.ceil(t*s-1e-6);l=ya(l),u=ya(u);const h=(l<<17)+(u<<1)+(o?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let f=this._texturePool[h].pop();return f||(f=this.createTexture(l,u,o)),f.source._resolution=s,f.source.width=l/s,f.source.height=u/s,f.source.pixelWidth=l,f.source.pixelHeight=u,f.frame.x=0,f.frame.y=0,f.frame.width=e,f.frame.height=t,f.updateUvs(),this._poolKeyHash[f.uid]=h,f}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const Hp=new qx;Ds.register(Hp);class Kx{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new be,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Wp,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Hp.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new be),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new be),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new be),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function Qx(i,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(i[s]=e[s])}const vu=new kt(null),ea=new kt(null),wu=new kt(null,1,1),ta=new kt(null),Ef=1,Zx=2,Su=4;class _n extends wn{constructor(e={}){var t,s;super(),this.uid=Je("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new be,this.relativeGroupTransform=new be,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new kt(this,0,0),this._scale=wu,this._pivot=ea,this._origin=ta,this._skew=vu,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Qx(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(o=>this.addChild(o)),(s=e.parent)==null||s.addChild(this)}static mixin(e){ke("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),_t.mixin(_n,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||ke(ze,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let o=0;o<e.length;o++)this.addChild(e[o]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let o=0;o<e.length;o++)this.removeChild(e[o]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=ln.get(Kx,this),this.groupTransform=be.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),ln.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new be),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*hx}set angle(e){this.rotation=e*dx}get pivot(){return this._pivot===ea&&(this._pivot=new kt(this,0,0)),this._pivot}set pivot(e){this._pivot===ea&&(this._pivot=new kt(this,0,0),this._origin!==ta&&Ge("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===vu&&(this._skew=new kt(this,0,0)),this._skew}set skew(e){this._skew===vu&&(this._skew=new kt(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===wu&&(this._scale=new kt(this,1,1)),this._scale}set scale(e){this._scale===wu&&(this._scale=new kt(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===ta&&(this._origin=new kt(this,0,0)),this._origin}set origin(e){this._origin===ta&&(this._origin=new kt(this,0,0),this._pivot!==ea&&Ge("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,h=s._x,f=s._y,p=o._x,g=o._y,y=-l._x,_=-l._y;t.a=this._cx*h,t.b=this._sx*h,t.c=this._cy*f,t.d=this._sy*f,t.tx=u._x-(p*t.a+g*t.c)+(y*t.a+_*t.c)-y,t.ty=u._y-(p*t.b+g*t.d)+(y*t.b+_*t.d)-_}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Ef,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=ct.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=Ef,this._onUpdate())}get tint(){return ha(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Zx,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Su,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Su,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=Su,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var o;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let l=0;l<t.length;++l)t[l].destroy(e);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}_t.mixin(_n,Lx,jx,Yx,Wx,Ux,Dx,Nx,Hx,Mx,Ix,$x,Bx);class Vp extends _n{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new vn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:o}=e;return s>=t.minX&&s<=t.maxX&&o>=t.minY&&o<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var t,s;super.destroy(e),this._bounds=null;for(const o in this._gpuData)(s=(t=this._gpuData[o]).destroy)==null||s.call(t);this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:o}=t;o.blendMode.pushBlendMode(this,this.groupBlendMode,e),o[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let f=0;f<h;f++)u[f].collectRenderables(e,t,s);o.blendMode.popBlendMode(e)}}class bi extends Vp{constructor(e=Pe.EMPTY){e instanceof Pe&&(e={texture:e});const{texture:t=Pe.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...h}=e;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new kt({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof Pe?new bi(e):new bi(Pe.from(e,t))}set texture(e){e||(e=Pe.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return _x(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return ke("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:o,height:l}=t.orig;s.minX=-e._x*o,s.maxX=s.minX+o,s.minY=-e._y*l,s.maxY=s.minY+l}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const Jx=new vn;function Yp(i,e,t){const s=Jx;i.measurable=!0,Np(i,t,s),e.addBoundsMask(s),i.measurable=!1}function Xp(i,e,t){const s=Wn.get();i.measurable=!0;const o=Et.get().identity(),l=qp(i,t,o);$p(i,s,l),i.measurable=!1,e.addBoundsMask(s),Et.return(o),Wn.return(s)}function qp(i,e,t){return i?(i!==e&&(qp(i.parent,e,t),i.updateLocalTransform(),t.append(i.localTransform)),t):(Ge("Mask bounds, renderable is not inside the root container"),t)}class Kp{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof bi),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||Yp(this.mask,e,t)}addLocalBounds(e,t){Xp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof bi}}Kp.extension=ce.MaskEffect;class Qp{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}Qp.extension=ce.MaskEffect;class Zp{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){Yp(this.mask,e,t)}addLocalBounds(e,t){Xp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof _n}}Zp.extension=ce.MaskEffect;const e0={createCanvas:(i,e)=>{const t=document.createElement("canvas");return t.width=i,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,e)=>fetch(i,e),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};let Rf=e0;const Ue={get(){return Rf},set(i){Rf=i}};class Jp extends Sn{constructor(e){e.resource||(e.resource=Ue.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const o=super.resize(e,t,s);return o&&this.resizeCanvas(),o}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Jp.extension=ce.TextureSource;class $r extends Sn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}$r.extension=ce.TextureSource;var Yu=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(Yu||{});class Cu{constructor(e,t=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=o}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const em=class Vt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Cu(null,null,1/0),this.deltaMS=1/Vt.targetFPMS,this.elapsedMS=1/Vt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Yu.NORMAL){return this._addListener(new Cu(e,t,s))}addOnce(e,t,s=Yu.NORMAL){return this._addListener(new Cu(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const l=e-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=e-l%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Vt.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,Vt.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Vt._shared){const e=Vt._shared=new Vt;e.autoStart=!0,e._protected=!0}return Vt._shared}static get system(){if(!Vt._system){const e=Vt._system=new Vt;e.autoStart=!0,e._protected=!0}return Vt._system}};em.targetFPMS=.06;let na=em,ku;async function tm(){return ku??(ku=(async()=>{var u;const e=Ue.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(h=>{const f=document.createElement("video");f.onloadeddata=()=>h(f),f.onerror=()=>h(null),f.autoplay=!1,f.crossOrigin="anonymous",f.preload="auto",f.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",f.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),e.deleteFramebuffer(o),e.deleteTexture(s),(u=e.getExtension("WEBGL_lose_context"))==null||u.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),ku}const Ca=class nm extends Sn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...nm.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=na.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await tm(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(na.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(na.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(na.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Ca.extension=ce.TextureSource;Ca.defaultOptions={...Sn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Ca.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let bs=Ca;const xn=(i,e,t=!1)=>(Array.isArray(i)||(i=[i]),e?i.map(s=>typeof s=="string"||t?e(s):s):i);class t0{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Ge(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=xn(e);let o;for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];if(p.test(t)){o=p.getCacheableAssets(s,t);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(f=>{l.set(f,t)});const u=[...l.keys()],h={cacheKeys:u,keys:s};s.forEach(f=>{this._cacheMap.set(f,h)}),u.forEach(f=>{const p=o?o[f]:t;this._cache.has(f)&&this._cache.get(f)!==p&&Ge("[Cache] already has key:",f),this._cache.set(f,l.get(f))})}remove(e){if(!this._cacheMap.has(e)){Ge(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(o=>{this._cache.delete(o)}),t.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const $e=new t0,Xu=[];_t.handleByList(ce.TextureSource,Xu);function rm(i={}){const e=i&&i.resource,t=e?i.resource:i,s=e?i:{resource:i};for(let o=0;o<Xu.length;o++){const l=Xu[o];if(l.test(t))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function n0(i={},e=!1){const t=i&&i.resource,s=t?i.resource:i,o=t?i:{resource:i};if(!e&&$e.has(s))return $e.get(s);const l=new Pe({source:rm(o)});return l.on("destroy",()=>{$e.has(s)&&$e.remove(s)}),e||$e.set(s,l),l}function r0(i,e=!1){return typeof i=="string"?$e.get(i):i instanceof Sn?new Pe({source:i}):n0(i,e)}Pe.from=r0;Sn.from=rm;_t.add(Kp,Qp,Zp,bs,$r,Jp,hc);var xr=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(xr||{});function yn(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function fs(i){return i.split("?")[0].split("#")[0]}function i0(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s0(i,e,t){return i.replace(new RegExp(i0(e),"g"),t)}function o0(i,e){let t="",s=0,o=-1,l=0,u=-1;for(let h=0;h<=i.length;++h){if(h<i.length)u=i.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(o===h-1||l===1))if(o!==h-1&&l===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",s=0):(t=t.slice(0,f),s=t.length-1-t.lastIndexOf("/")),o=h,l=0;continue}}else if(t.length===2||t.length===1){t="",s=0,o=h,l=0;continue}}}else t.length>0?t+=`/${i.slice(o+1,h)}`:t=i.slice(o+1,h),s=h-o-1;o=h,l=0}else u===46&&l!==-1?++l:l=-1}return t}const Yt={toPosix(i){return s0(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){yn(i),i=this.toPosix(i);const e=/^file:\/\/\//.exec(i);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(i);return t?t[0]:""},toAbsolute(i,e,t){if(yn(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const s=fs(this.toPosix(e??Ue.get().getBaseUrl())),o=fs(this.toPosix(t??this.rootname(s)));return i=this.toPosix(i),i.startsWith("/")?Yt.join(o,i.slice(1)):this.isAbsolute(i)?i:this.join(s,i)},normalize(i){if(yn(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let e="";const t=i.startsWith("/");this.hasProtocol(i)&&(e=this.rootname(i),i=i.slice(e.length));const s=i.endsWith("/");return i=o0(i),i.length>0&&s&&(i+="/"),t?`/${i}`:e+i},isAbsolute(i){return yn(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const s=i[t];if(yn(s),s.length>0)if(e===void 0)e=s;else{const o=i[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(i){if(yn(i),i.length===0)return".";i=this.toPosix(i);let e=i.charCodeAt(0);const t=e===47;let s=-1,o=!0;const l=this.getProtocol(i),u=i;i=i.slice(l.length);for(let h=i.length-1;h>=1;--h)if(e=i.charCodeAt(h),e===47){if(!o){s=h;break}}else o=!1;return s===-1?t?"/":this.isUrl(u)?l+i:l:t&&s===1?"//":l+i.slice(0,s)},rootname(i){yn(i),i=this.toPosix(i);let e="";if(i.startsWith("/")?e="/":e=this.getProtocol(i),this.isUrl(i)){const t=i.indexOf("/",e.length);t!==-1?e=i.slice(0,t):e=i,e.endsWith("/")||(e+="/")}return e},basename(i,e){yn(i),e&&yn(e),i=fs(this.toPosix(i));let t=0,s=-1,o=!0,l;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";let u=e.length-1,h=-1;for(l=i.length-1;l>=0;--l){const f=i.charCodeAt(l);if(f===47){if(!o){t=l+1;break}}else h===-1&&(o=!1,h=l+1),u>=0&&(f===e.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=h))}return t===s?s=h:s===-1&&(s=i.length),i.slice(t,s)}for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!o){t=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":i.slice(t,s)},extname(i){yn(i),i=fs(this.toPosix(i));let e=-1,t=0,s=-1,o=!0,l=0;for(let u=i.length-1;u>=0;--u){const h=i.charCodeAt(u);if(h===47){if(!o){t=u+1;break}continue}s===-1&&(o=!1,s=u+1),h===46?e===-1?e=u:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||s===-1||l===0||l===1&&e===s-1&&e===t+1?"":i.slice(e,s)},parse(i){yn(i);const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;i=fs(this.toPosix(i));let t=i.charCodeAt(0);const s=this.isAbsolute(i);let o;e.root=this.rootname(i),s||this.hasProtocol(i)?o=1:o=0;let l=-1,u=0,h=-1,f=!0,p=i.length-1,g=0;for(;p>=o;--p){if(t=i.charCodeAt(p),t===47){if(!f){u=p+1;break}continue}h===-1&&(f=!1,h=p+1),t===46?l===-1?l=p:g!==1&&(g=1):l!==-1&&(g=-1)}return l===-1||h===-1||g===0||g===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&s?e.base=e.name=i.slice(1,h):e.base=e.name=i.slice(u,h)):(u===0&&s?(e.name=i.slice(1,l),e.base=i.slice(1,h)):(e.name=i.slice(u,l),e.base=i.slice(u,h)),e.ext=i.slice(l,h)),e.dir=this.dirname(i),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function im(i,e,t,s,o){const l=e[t];for(let u=0;u<l.length;u++){const h=l[u];t<e.length-1?im(i.replace(s[t],h),e,t+1,s,o):o.push(i.replace(s[t],h))}}function a0(i){const e=/\{(.*?)\}/g,t=i.match(e),s=[];if(t){const o=[];t.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),im(i,o,0,t,s)}else s.push(i);return s}const _a=i=>!Array.isArray(i);class Ti{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return xn(t||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>(u==null?void 0:u.src)??u):l!=null&&l.src?l.src:l,!0)}addManifest(e){this._manifest&&Ge("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let o=t;Array.isArray(t)||(o=Object.entries(t).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,h=l.alias;let f;if(typeof h=="string"){const p=this._createBundleAssetId(e,h);s.push(p),f=[h,p]}else{const p=h.map(g=>this._createBundleAssetId(e,g));s.push(...p),f=[...h,...p]}this.add({...l,alias:f,src:u})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=l=>{this.hasKey(l)&&Ge(`[Resolver] already has key: ${l} overwriting`)},xn(t).forEach(l=>{const{src:u}=l;let{data:h,format:f,loadParser:p,parser:g}=l;const y=xn(u).map(k=>typeof k=="string"?a0(k):Array.isArray(k)?k:[k]),_=this.getAlias(l);Array.isArray(_)?_.forEach(s):s(_);const v=[],S=k=>{const w=this._parsers.find(b=>b.test(k));return{...w==null?void 0:w.parse(k),src:k}};y.forEach(k=>{k.forEach(w=>{let b={};if(typeof w!="object"?b=S(w):(h=w.data??h,f=w.format??f,(w.loadParser||w.parser)&&(p=w.loadParser??p,g=w.parser??g),b={...S(w.src),...w}),!_)throw new Error(`[Resolver] alias is undefined for this asset: ${b.src}`);b=this._buildResolvedAsset(b,{aliases:_,data:h,format:f,loadParser:p,parser:g,progressSize:l.progressSize}),v.push(b)})}),_.forEach(k=>{this._assetMap[k]=v})})}resolveBundle(e){const t=_a(e);e=xn(e);const s={};return e.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),h={};for(const f in u){const p=u[f];h[this._extractAssetIdFromBundle(o,f)]=p}s[o]=h}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const o in t)s[o]=t[o].src;return s}return t.src}resolve(e){const t=_a(e);e=xn(e);const s={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u==null||u.priority.forEach(h=>{u.params[h].forEach(f=>{const p=l.filter(g=>g[h]?g[h]===f:!1);p.length&&(l=p)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:o,loadParser:l,parser:u,format:h,progressSize:f}=t;return(this._basePath||this._rootPath)&&(e.src=Yt.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=l??e.loadParser,e.parser=u??e.parser,e.format=h??e.format??l0(e.src),f!==void 0&&(e.progressSize=f),e}}Ti.RETINA_PREFIX=/@([0-9\.]+)x/;function l0(i){return i.split(".").pop().split("?").shift().split("#").shift()}const qu=(i,e)=>{const t=e.split("?")[1];return t&&(i+=`?${t}`),i},sm=class ws{constructor(e,t){this.linkedSheets=[];let s=e;(e==null?void 0:e.source)instanceof Sn&&(s={texture:e,data:t});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof Pe?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const h=parseFloat(l.meta.scale);h?(this.resolution=h,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=ws.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=ws.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const o=this._frameKeys[t],l=this._frames[o],u=l.frame;if(u){let h=null,f=null;const p=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,g=new st(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);l.rotated?h=new st(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new st(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(f=new st(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new Pe({source:this.textureSource,frame:h,orig:g,trim:f,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const o=e[t][s];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ws.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ws.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};sm.BATCH_SIZE=1e3;let If=sm;const u0=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function om(i,e,t){const s={};if(i.forEach(o=>{s[o]=e}),Object.keys(e.textures).forEach(o=>{s[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=Yt.dirname(i[0]);e.linkedSheets.forEach((l,u)=>{const h=om([`${o}/${e.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,h)})}return s}const c0={extension:ce.Asset,cache:{test:i=>i instanceof If,getCacheableAssets:(i,e)=>om(i,e,!1)},resolver:{extension:{type:ce.ResolveParser,name:"resolveSpritesheet"},test:i=>{const t=i.split("?")[0].split("."),s=t.pop(),o=t.pop();return s==="json"&&u0.includes(o)},parse:i=>{var t;const e=i.split(".");return{resolution:parseFloat(((t=Ti.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:e[e.length-2],src:i}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:ce.LoadParser,priority:xr.Normal,name:"spritesheetLoader"},async testParse(i,e){return Yt.extname(e.src).toLowerCase()===".json"&&!!i.frames},async parse(i,e,t){var y,_;const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=(e==null?void 0:e.data)??{};let h=Yt.dirname(e.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let f;if(s instanceof Pe)f=s;else{const v=qu(h+(o??i.meta.image),e.src);f=(await t.load([{src:v,data:l}]))[v]}const p=new If({texture:f.source,data:i,cachePrefix:u});await p.parse();const g=(y=i==null?void 0:i.meta)==null?void 0:y.related_multi_packs;if(Array.isArray(g)){const v=[];for(const k of g){if(typeof k!="string")continue;let w=h+k;(_=e.data)!=null&&_.ignoreMultiPack||(w=qu(w,e.src),v.push(t.load({src:w,data:{textureOptions:l,ignoreMultiPack:!0}})))}const S=await Promise.all(v);p.linkedSheets=S,S.forEach(k=>{k.linkedSheets=[p].concat(p.linkedSheets.filter(w=>w!==k))})}return p},async unload(i,e,t){await t.unload(i.textureSource._sourceOrigin),i.destroy(!1)}}};_t.add(c0);const Au=Object.create(null),Ff=Object.create(null);function fc(i,e){let t=Ff[i];return t===void 0&&(Au[e]===void 0&&(Au[e]=1),Ff[i]=t=Au[e]++),t}let yi;function am(){return(!yi||yi!=null&&yi.isContextLost())&&(yi=Ue.get().createCanvas().getContext("webgl",{})),yi}let ra;function h0(){if(!ra){ra="mediump";const i=am();i&&i.getShaderPrecisionFormat&&(ra=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?"highp":"mediump")}return ra}function d0(i,e,t){return e?i:t?(i=i.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${i}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${i}
        `}function f0(i,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(i.substring(0,9)!=="precision"){let o=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${i}`}else if(s!=="highp"&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}function p0(i,e){return e?`#version 300 es
${i}`:i}const m0={},g0={};function y0(i,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?m0:g0;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,i.indexOf("#define SHADER_NAME")!==-1?i:`${`#define SHADER_NAME ${e}`}
${i}`}function x0(i,e){return e?i.replace("#version 300 es",""):i}const bu={stripVersion:x0,ensurePrecision:f0,addProgramDefines:d0,setProgramName:y0,insertVersion:p0},ps=Object.create(null),lm=class Ku{constructor(e){e={...Ku.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:h0()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let o=e.fragment,l=e.vertex;Object.keys(bu).forEach(u=>{const h=s[u];o=bu[u](o,h,!0),l=bu[u](l,h,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=fc(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,ps[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return ps[t]||(ps[t]=new Ku(e),ps[t]._cacheKey=t),ps[t]}};lm.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let um=lm;const Lf={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function _0(i){return Lf[i]??Lf.float32}const v0={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function w0({source:i,entryPoint:e}){const t={},s=i.indexOf(`fn ${e}`);if(s!==-1){const o=i.indexOf("->",s);if(o!==-1){const l=i.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const f=v0[h[3]]??"float32";t[h[2]]={location:parseInt(h[1],10),format:f,stride:_0(f).stride,offset:0,instance:!1,start:0}}}}return t}function Pu(i){var y,_;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,f=/struct\s+(\w+)/,p=(y=i.match(e))==null?void 0:y.map(v=>({group:parseInt(v.match(t)[1],10),binding:parseInt(v.match(s)[1],10),name:v.match(o)[2],isUniform:v.match(o)[1]==="<uniform>",type:v.match(l)[1]}));if(!p)return{groups:[],structs:[]};const g=((_=i.match(u))==null?void 0:_.map(v=>{const S=v.match(f)[1],k=v.match(h).reduce((w,b)=>{const[P,M]=b.split(":");return w[P.trim()]=M.trim(),w},{});return k?{name:S,members:k}:null}).filter(({name:v})=>p.some(S=>S.type===v)))??[];return{groups:p,structs:g}}var Ss=(i=>(i[i.VERTEX=1]="VERTEX",i[i.FRAGMENT=2]="FRAGMENT",i[i.COMPUTE=4]="COMPUTE",i))(Ss||{});function S0({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:Ss.VERTEX|Ss.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:Ss.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:Ss.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function C0({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function k0(i,e){const t=new Set,s=new Set,o=[...i.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),l=[...i.groups,...e.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:o,groups:l}}const ms=Object.create(null);class ka{constructor(e){var h,f;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:o,gpuLayout:l,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=s,t.source===s.source){const p=Pu(t.source);this.structsAndGroups=p}else{const p=Pu(s.source),g=Pu(t.source);this.structsAndGroups=k0(p,g)}this.layout=o??C0(this.structsAndGroups),this.gpuLayout=l??S0(this.structsAndGroups),this.autoAssignGlobalUniforms=((h=this.layout[0])==null?void 0:h.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((f=this.layout[1])==null?void 0:f.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=fc(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=w0(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,ms[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return ms[t]||(ms[t]=new ka(e),ms[t]._cacheKey=t),ms[t]}}const cm=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],A0=cm.reduce((i,e)=>(i[e]=!0,i),{});function b0(i,e){switch(i){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const hm=class dm{constructor(e,t){this._touched=0,this.uid=Je("uniform"),this._resourceType="uniformGroup",this._resourceId=Je("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...dm.defaultOptions,...t},this.uniformStructures=e;const s={};for(const o in e){const l=e[o];if(l.name=o,l.size=l.size??1,!A0[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,f]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${h}', size: ${f} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${cm.join(", ")}`)}l.value??(l.value=b0(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=fc(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};hm.defaultOptions={ubo:!1,isStatic:!1};let fm=hm;class da{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const o=e[s];this.setResource(o,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){var o,l;const s=this.resources[t];e!==s&&(s&&((o=e.off)==null||o.call(e,"change",this.onResourceChange,this)),(l=e.on)==null||l.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){var t;const e=this.resources;for(const s in e){const o=e[s];(t=o==null?void 0:o.off)==null||t.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var Qu=(i=>(i[i.WEBGL=1]="WEBGL",i[i.WEBGPU=2]="WEBGPU",i[i.BOTH=3]="BOTH",i))(Qu||{});class pc extends wn{constructor(e){super(),this.uid=Je("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:h}=e;this.gpuProgram=t,this.glProgram=s,u===void 0&&(u=0,t&&(u|=Qu.WEBGPU),s&&(u|=Qu.WEBGL)),this.compatibleRenderers=u;const f={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&o&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&o&&h)for(const p in h)for(const g in h[p]){const y=h[p][g];f[y]={group:p,binding:g,name:y}}else if(t&&o&&!h){const p=t.structsAndGroups.groups;h={},p.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,f[g.name]=g})}else if(l){o={},h={},t&&t.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,f[y.name]=y});let p=0;for(const g in l)f[g]||(o[99]||(o[99]=new da,this._ownedBindGroups.push(o[99])),f[g]={group:99,binding:p,name:g},h[99]=h[99]||{},h[99][p]=g,p++);for(const g in l){const y=g;let _=l[g];!_.source&&!_._resourceType&&(_=new fm(_));const v=f[y];v&&(o[v.group]||(o[v.group]=new da,this._ownedBindGroups.push(o[v.group])),o[v.group].setResource(_,v.binding))}}this.groups=o,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(o,f)}addResource(e,t,s){var o,l;(o=this._uniformBindMap)[t]||(o[t]={}),(l=this._uniformBindMap[t])[s]||(l[s]=e),this.groups[t]||(this.groups[t]=new da,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const o in t){const l=t[o];Object.defineProperty(s,l.name,{get(){return e[l.group].getResource(l.binding)},set(u){e[l.group].setResource(u,l.binding)}})}return s}destroy(e=!1){var t,s;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...o}=e;let l,u;return t&&(l=ka.from(t)),s&&(u=um.from(s)),new pc({gpuProgram:l,glProgram:u,...o})}}const Zu=[];_t.handleByNamedList(ce.Environment,Zu);async function P0(i){if(!i)for(let e=0;e<Zu.length;e++){const t=Zu[e];if(t.value.test()){await t.value.load();return}}}let gs;function T0(){if(typeof gs=="boolean")return gs;try{gs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{gs=!1}return gs}function Bf(i,e,t=2){const s=e&&e.length,o=s?e[0]*t:i.length;let l=pm(i,0,o,t,!0);const u=[];if(!l||l.next===l.prev)return u;let h,f,p;if(s&&(l=F0(i,e,l,t)),i.length>80*t){h=i[0],f=i[1];let g=h,y=f;for(let _=t;_<o;_+=t){const v=i[_],S=i[_+1];v<h&&(h=v),S<f&&(f=S),v>g&&(g=v),S>y&&(y=S)}p=Math.max(g-h,y-f),p=p!==0?32767/p:0}return Es(l,u,t,h,f,p,0),u}function pm(i,e,t,s,o){let l;if(o===W0(i,e,t,s)>0)for(let u=e;u<t;u+=s)l=zf(u/s|0,i[u],i[u+1],l);else for(let u=t-s;u>=e;u-=s)l=zf(u/s|0,i[u],i[u+1],l);return l&&Pi(l,l.next)&&(Is(l),l=l.next),l}function Gr(i,e){if(!i)return i;e||(e=i);let t=i,s;do if(s=!1,!t.steiner&&(Pi(t,t.next)||qe(t.prev,t,t.next)===0)){if(Is(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function Es(i,e,t,s,o,l,u){if(!i)return;!u&&l&&N0(i,s,o,l);let h=i;for(;i.prev!==i.next;){const f=i.prev,p=i.next;if(l?E0(i,s,o,l):M0(i)){e.push(f.i,i.i,p.i),Is(i),i=p.next,h=p.next;continue}if(i=p,i===h){u?u===1?(i=R0(Gr(i),e),Es(i,e,t,s,o,l,2)):u===2&&I0(i,e,t,s,o,l):Es(Gr(i),e,t,s,o,l,1);break}}}function M0(i){const e=i.prev,t=i,s=i.next;if(qe(e,t,s)>=0)return!1;const o=e.x,l=t.x,u=s.x,h=e.y,f=t.y,p=s.y,g=Math.min(o,l,u),y=Math.min(h,f,p),_=Math.max(o,l,u),v=Math.max(h,f,p);let S=s.next;for(;S!==e;){if(S.x>=g&&S.x<=_&&S.y>=y&&S.y<=v&&Cs(o,h,l,f,u,p,S.x,S.y)&&qe(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function E0(i,e,t,s){const o=i.prev,l=i,u=i.next;if(qe(o,l,u)>=0)return!1;const h=o.x,f=l.x,p=u.x,g=o.y,y=l.y,_=u.y,v=Math.min(h,f,p),S=Math.min(g,y,_),k=Math.max(h,f,p),w=Math.max(g,y,_),b=Ju(v,S,e,t,s),P=Ju(k,w,e,t,s);let M=i.prevZ,R=i.nextZ;for(;M&&M.z>=b&&R&&R.z<=P;){if(M.x>=v&&M.x<=k&&M.y>=S&&M.y<=w&&M!==o&&M!==u&&Cs(h,g,f,y,p,_,M.x,M.y)&&qe(M.prev,M,M.next)>=0||(M=M.prevZ,R.x>=v&&R.x<=k&&R.y>=S&&R.y<=w&&R!==o&&R!==u&&Cs(h,g,f,y,p,_,R.x,R.y)&&qe(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;M&&M.z>=b;){if(M.x>=v&&M.x<=k&&M.y>=S&&M.y<=w&&M!==o&&M!==u&&Cs(h,g,f,y,p,_,M.x,M.y)&&qe(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;R&&R.z<=P;){if(R.x>=v&&R.x<=k&&R.y>=S&&R.y<=w&&R!==o&&R!==u&&Cs(h,g,f,y,p,_,R.x,R.y)&&qe(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function R0(i,e){let t=i;do{const s=t.prev,o=t.next.next;!Pi(s,o)&&gm(s,t,t.next,o)&&Rs(s,o)&&Rs(o,s)&&(e.push(s.i,t.i,o.i),Is(t),Is(t.next),t=i=o),t=t.next}while(t!==i);return Gr(t)}function I0(i,e,t,s,o,l){let u=i;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&$0(u,h)){let f=ym(u,h);u=Gr(u,u.next),f=Gr(f,f.next),Es(u,e,t,s,o,l,0),Es(f,e,t,s,o,l,0);return}h=h.next}u=u.next}while(u!==i)}function F0(i,e,t,s){const o=[];for(let l=0,u=e.length;l<u;l++){const h=e[l]*s,f=l<u-1?e[l+1]*s:i.length,p=pm(i,h,f,s,!1);p===p.next&&(p.steiner=!0),o.push(j0(p))}o.sort(L0);for(let l=0;l<o.length;l++)t=B0(o[l],t);return t}function L0(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const s=(i.next.y-i.y)/(i.next.x-i.x),o=(e.next.y-e.y)/(e.next.x-e.x);t=s-o}return t}function B0(i,e){const t=z0(i,e);if(!t)return e;const s=ym(t,i);return Gr(s,s.next),Gr(t,t.next)}function z0(i,e){let t=e;const s=i.x,o=i.y;let l=-1/0,u;if(Pi(i,t))return t;do{if(Pi(i,t.next))return t.next;if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>l&&(l=y,u=t.x<t.next.x?t:t.next,y===s))return u}t=t.next}while(t!==e);if(!u)return null;const h=u,f=u.x,p=u.y;let g=1/0;t=u;do{if(s>=t.x&&t.x>=f&&s!==t.x&&mm(o<p?s:l,o,f,p,o<p?l:s,o,t.x,t.y)){const y=Math.abs(o-t.y)/(s-t.x);Rs(t,i)&&(y<g||y===g&&(t.x>u.x||t.x===u.x&&D0(u,t)))&&(u=t,g=y)}t=t.next}while(t!==h);return u}function D0(i,e){return qe(i.prev,i,e.prev)<0&&qe(e.next,i,i.next)<0}function N0(i,e,t,s){let o=i;do o.z===0&&(o.z=Ju(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,O0(o)}function O0(i){let e,t=1;do{let s=i,o;i=null;let l=null;for(e=0;s;){e++;let u=s,h=0;for(let p=0;p<t&&(h++,u=u.nextZ,!!u);p++);let f=t;for(;h>0||f>0&&u;)h!==0&&(f===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,h--):(o=u,u=u.nextZ,f--),l?l.nextZ=o:i=o,o.prevZ=l,l=o;s=u}l.nextZ=null,t*=2}while(e>1);return i}function Ju(i,e,t,s,o){return i=(i-t)*o|0,e=(e-s)*o|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function j0(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function mm(i,e,t,s,o,l,u,h){return(o-u)*(e-h)>=(i-u)*(l-h)&&(i-u)*(s-h)>=(t-u)*(e-h)&&(t-u)*(l-h)>=(o-u)*(s-h)}function Cs(i,e,t,s,o,l,u,h){return!(i===u&&e===h)&&mm(i,e,t,s,o,l,u,h)}function $0(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!G0(i,e)&&(Rs(i,e)&&Rs(e,i)&&U0(i,e)&&(qe(i.prev,i,e.prev)||qe(i,e.prev,e))||Pi(i,e)&&qe(i.prev,i,i.next)>0&&qe(e.prev,e,e.next)>0)}function qe(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Pi(i,e){return i.x===e.x&&i.y===e.y}function gm(i,e,t,s){const o=sa(qe(i,e,t)),l=sa(qe(i,e,s)),u=sa(qe(t,s,i)),h=sa(qe(t,s,e));return!!(o!==l&&u!==h||o===0&&ia(i,t,e)||l===0&&ia(i,s,e)||u===0&&ia(t,i,s)||h===0&&ia(t,e,s))}function ia(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function sa(i){return i>0?1:i<0?-1:0}function G0(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&gm(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Rs(i,e){return qe(i.prev,i,i.next)<0?qe(i,e,i.next)>=0&&qe(i,i.prev,e)>=0:qe(i,e,i.prev)<0||qe(i,i.next,e)<0}function U0(i,e){let t=i,s=!1;const o=(i.x+e.x)/2,l=(i.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==i);return s}function ym(i,e){const t=ec(i.i,i.x,i.y),s=ec(e.i,e.x,e.y),o=i.next,l=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,s.next=t,t.prev=s,l.next=s,s.prev=l,s}function zf(i,e,t,s){const o=ec(i,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function Is(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function ec(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function W0(i,e,t,s){let o=0;for(let l=e,u=t-s;l<t;l+=s)o+=(i[u]-i[l])*(i[l+1]+i[u+1]),u=l;return o}const H0=Bf.default||Bf;var xm=(i=>(i[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i))(xm||{});class V0{constructor(e){this.items=[],this._name=e}emit(e,t,s,o,l,u,h,f){const{name:p,items:g}=this;for(let y=0,_=g.length;y<_;y++)g[y][p](e,t,s,o,l,u,h,f);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Y0=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],_m=class vm extends wn{constructor(e){super(),this.uid=Je("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...Y0,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await P0(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...vm.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof _n&&(s={container:s},t&&(ke(ze,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:ct.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const o=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=xm.ALL);const{clear:s,clearColor:o,target:l}=e;ct.shared.setValue(o??this.background.colorRgba),t.renderTarget.clear(l,s,ct.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new V0(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(e,t){const s=t.reduce((o,l)=>(o[l.name]=l.value,o),{});e.forEach(o=>{const l=o.value,u=o.name,h=s[u];this.renderPipes[u]=new l(this,h?new h:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&Ds.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!T0())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};_m.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let wm=_m,oa;function X0(i){return oa!==void 0||(oa=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:i??wm.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ue.get().getWebGLRenderingContext())return!1;let o=Ue.get().createCanvas().getContext("webgl",e);const l=!!((t=o==null?void 0:o.getContextAttributes())!=null&&t.stencil);if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,l}catch{return!1}})()),oa}let aa;async function q0(i={}){return aa!==void 0||(aa=await(async()=>{const e=Ue.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(i)).requestDevice(),!0}catch{return!1}})()),aa}const Df=["webgl","webgpu","canvas"];async function K0(i){let e=[];i.preference?(e.push(i.preference),Df.forEach(l=>{l!==i.preference&&e.push(l)})):e=Df.slice();let t,s={};for(let l=0;l<e.length;l++){const u=e[l];if(u==="webgpu"&&await q0()){const{WebGPURenderer:h}=await ga(async()=>{const{WebGPURenderer:f}=await import("./WebGPURenderer-B0bjNaV1.js");return{WebGPURenderer:f}},__vite__mapDeps([3,2,4]));t=h,s={...i,...i.webgpu};break}else if(u==="webgl"&&X0(i.failIfMajorPerformanceCaveat??wm.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await ga(async()=>{const{WebGLRenderer:f}=await import("./WebGLRenderer-D0Bzdj7-.js");return{WebGLRenderer:f}},__vite__mapDeps([5,2,4]));t=h,s={...i,...i.webgl};break}else if(u==="canvas")throw s={...i},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const o=new t;return await o.init(s),o}const Sm="8.14.3";class Cm{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,Sm)}static destroy(){}}Cm.extension=ce.Application;class Q0{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,Sm)}destroy(){this._renderer=null}}Q0.extension={type:[ce.WebGLSystem,ce.WebGPUSystem],name:"initHook",priority:-10};const km=class tc{constructor(...e){this.stage=new _n,e[0]!==void 0&&ke(ze,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new _n),this.renderer=await K0(e),tc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return ke(ze,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=tc._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};km._plugins=[];let Am=km;_t.handleByList(ce.Application,Am._plugins);_t.add(Cm);class bm extends wn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return ke(ze,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return ke(ze,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return ke(ze,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return ke(ze,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return ke(ze,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(t=this.chars[s].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class Z0{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let o=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(e,t,s=!1,o=this.resetTtl){let l=this.items[e];return s||l!==void 0?(l.value=t,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function Pm(i=1e3,e=0,t=!1){if(isNaN(i)||i<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new Z0(i,e,t)}const J0=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function nc(i){const e=typeof i.fontSize=="number"?`${i.fontSize}px`:i.fontSize;let t=i.fontFamily;Array.isArray(i.fontFamily)||(t=i.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let o=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!J0.includes(o)&&(o=`"${o}"`),t[s]=o}return`${i.fontStyle} ${i.fontVariant} ${i.fontWeight} ${e} ${t.join(",")}`}const Tu={willReadFrequently:!0},Cn=class ue{static get experimentalLetterSpacingSupported(){let e=ue._experimentalLetterSpacingSupported;if(e===void 0){const t=Ue.get().getCanvasRenderingContext2D().prototype;e=ue._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,o,l,u,h,f,p){this.text=e,this.style=t,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=f,this.fontProperties=p}static measureText(e=" ",t,s=ue._canvas,o=t.wordWrap){var P;const l=`${e}-${t.styleKey}-wordWrap-${o}`;if(ue._measurementCache.has(l))return ue._measurementCache.get(l);const u=nc(t),h=ue.measureFont(u);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);const f=ue.__context;f.font=u;const g=(o?ue._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),y=new Array(g.length);let _=0;for(let M=0;M<g.length;M++){const R=ue._measureText(g[M],t.letterSpacing,f);y[M]=R,_=Math.max(_,R)}const v=((P=t._stroke)==null?void 0:P.width)||0;let S=_+v;t.dropShadow&&(S+=t.dropShadow.distance);const k=t.lineHeight||h.fontSize;let w=Math.max(k,h.fontSize+v)+(g.length-1)*(k+t.leading);t.dropShadow&&(w+=t.dropShadow.distance);const b=new ue(e,t,S,w,g,y,k+t.leading,_,h);return ue._measurementCache.set(l,b),b}static _measureText(e,t,s){let o=!1;ue.experimentalLetterSpacingSupported&&(ue.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(e);let u=l.width;const h=-l.actualBoundingBoxLeft;let p=l.actualBoundingBoxRight-h;if(u>0)if(o)u-=t,p-=t;else{const g=(ue.graphemeSegmenter(e).length-1)*t;u+=g,p+=g}return Math.max(u,p)}static _wordWrap(e,t,s=ue._canvas){const o=s.getContext("2d",Tu);let l=0,u="",h="";const f=Object.create(null),{letterSpacing:p,whiteSpace:g}=t,y=ue._collapseSpaces(g),_=ue._collapseNewlines(g);let v=!y;const S=t.wordWrapWidth+p,k=ue._tokenize(e);for(let w=0;w<k.length;w++){let b=k[w];if(ue._isNewline(b)){if(!_){h+=ue._addLine(u),v=!y,u="",l=0;continue}b=" "}if(y){const M=ue.isBreakingSpace(b),R=ue.isBreakingSpace(u[u.length-1]);if(M&&R)continue}const P=ue._getFromCache(b,p,f,o);if(P>S)if(u!==""&&(h+=ue._addLine(u),u="",l=0),ue.canBreakWords(b,t.breakWords)){const M=ue.wordWrapSplit(b);for(let R=0;R<M.length;R++){let W=M[R],N=W,D=1;for(;M[R+D];){const le=M[R+D];if(!ue.canBreakChars(N,le,b,R,t.breakWords))W+=le;else break;N=le,D++}R+=D-1;const ee=ue._getFromCache(W,p,f,o);ee+l>S&&(h+=ue._addLine(u),v=!1,u="",l=0),u+=W,l+=ee}}else{u.length>0&&(h+=ue._addLine(u),u="",l=0);const M=w===k.length-1;h+=ue._addLine(b,!M),v=!1,u="",l=0}else P+l>S&&(v=!1,h+=ue._addLine(u),u="",l=0),(u.length>0||!ue.isBreakingSpace(b)||v)&&(u+=b,l+=P)}return h+=ue._addLine(u,!1),h}static _addLine(e,t=!0){return e=ue._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,o){let l=s[e];return typeof l!="number"&&(l=ue._measureText(e,t,o)+t,s[e]=l),l}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!ue.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ue._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ue._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1];if(ue.isBreakingSpace(l,u)||ue._isNewline(l)){s!==""&&(t.push(s),s=""),l==="\r"&&u===`
`?(t.push(`\r
`),o++):t.push(l);continue}s+=l}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,o,l){return!0}static wordWrapSplit(e){return ue.graphemeSegmenter(e)}static measureFont(e){if(ue._fonts[e])return ue._fonts[e];const t=ue._context;t.font=e;const s=t.measureText(ue.METRICS_STRING+ue.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return ue._fonts[e]=o,o}static clearMetrics(e=""){e?delete ue._fonts[e]:ue._fonts={}}static get _canvas(){if(!ue.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",Tu);if(s!=null&&s.measureText)return ue.__canvas=t,t;e=Ue.get().createCanvas()}catch{e=Ue.get().createCanvas()}e.width=e.height=10,ue.__canvas=e}return ue.__canvas}static get _context(){return ue.__context||(ue.__context=ue._canvas.getContext("2d",Tu)),ue.__context}};Cn.METRICS_STRING="|q";Cn.BASELINE_SYMBOL="M";Cn.BASELINE_MULTIPLIER=1.4;Cn.HEIGHT_MULTIPLIER=2;Cn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return e=>{const t=i.segment(e),s=[];let o=0;for(const l of t)s[o++]=l.segment;return s}}return i=>[...i]})();Cn.experimentalLetterSpacing=!1;Cn._fonts={};Cn._newlines=[10,13];Cn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Cn._measurementCache=Pm(1e3);let fa=Cn;const Nf=[{offset:0,color:"white"},{offset:1,color:"black"}],mc=class rc{constructor(...e){this.uid=Je("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=e_(e);t={...t.type==="radial"?rc.defaultRadialOptions:rc.defaultLinearOptions,...Ep(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:ct.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:o}=this.end,l=s-e,u=o-t;const h=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const w=e;e=s,s=w,l*=-1}if(u<0){const w=t;t=o,o=w,u*=-1}}const f=this.colorStops.length?this.colorStops:Nf,p=this._textureSize,{canvas:g,context:y}=jf(p,1),_=h?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);Of(_,f),y.fillStyle=_,y.fillRect(0,0,p,1),this.texture=new Pe({source:new $r({resource:g,addressMode:this._wrapMode})});const v=Math.sqrt(l*l+u*u),S=Math.atan2(u,l),k=new be;k.scale(v/p,1),k.rotate(S),k.translate(e,t),this.textureSpace==="local"&&k.scale(p,p),this.transform=k}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:Nf,t=this._textureSize,{canvas:s,context:o}=jf(t,t),{x:l,y:u}=this.center,{x:h,y:f}=this.outerCenter,p=this.innerRadius,g=this.outerRadius,y=h-g,_=f-g,v=t/(g*2),S=(l-y)*v,k=(u-_)*v,w=o.createRadialGradient(S,k,p*v,(h-y)*v,(f-_)*v,g*v);Of(w,e),o.fillStyle=e[e.length-1].color,o.fillRect(0,0,t,t),o.fillStyle=w,o.translate(S,k),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-S,-k),o.fillRect(0,0,t,t),this.texture=new Pe({source:new $r({resource:s,addressMode:this._wrapMode})});const b=new be;b.scale(1/v,1/v),b.translate(y,_),this.textureSpace==="local"&&b.scale(t,t),this.transform=b}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};mc.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};mc.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Vn=mc;function Of(i,e){for(let t=0;t<e.length;t++){const s=e[t];i.addColorStop(s.offset,s.color)}}function jf(i,e){const t=Ue.get().createCanvas(i,e),s=t.getContext("2d");return{canvas:t,context:s}}function e_(i){let e=i[0]??{};return(typeof e=="number"||i[1])&&(ke("8.5.2","use options object instead"),e={type:"linear",start:{x:i[0],y:i[1]},end:{x:i[2],y:i[3]},textureSpace:i[4],textureSize:i[5]??Vn.defaultLinearOptions.textureSize}),e}const $f={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Aa{constructor(e,t){this.uid=Je("fillPattern"),this._tick=0,this.transform=new be,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=$f[t].addressModeU,e.source.style.addressModeV=$f[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var Mu,Gf;function t_(){if(Gf)return Mu;Gf=1,Mu=t;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(l){var u=[];return l.replace(e,function(h,f,p){var g=f.toLowerCase();for(p=o(p),g=="m"&&p.length>2&&(u.push([f].concat(p.splice(0,2))),g="l",f=f=="m"?"l":"L");;){if(p.length==i[g])return p.unshift(f),u.push(p);if(p.length<i[g])throw new Error("malformed path data");u.push([f].concat(p.splice(0,i[g])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return Mu}var n_=t_();const r_=uc(n_);function i_(i,e){const t=r_(i),s=[];let o=null,l=0,u=0;for(let h=0;h<t.length;h++){const f=t[h],p=f[0],g=f;switch(p){case"M":l=g[1],u=g[2],e.moveTo(l,u);break;case"m":l+=g[1],u+=g[2],e.moveTo(l,u);break;case"H":l=g[1],e.lineTo(l,u);break;case"h":l+=g[1],e.lineTo(l,u);break;case"V":u=g[1],e.lineTo(l,u);break;case"v":u+=g[1],e.lineTo(l,u);break;case"L":l=g[1],u=g[2],e.lineTo(l,u);break;case"l":l+=g[1],u+=g[2],e.lineTo(l,u);break;case"C":l=g[5],u=g[6],e.bezierCurveTo(g[1],g[2],g[3],g[4],l,u);break;case"c":e.bezierCurveTo(l+g[1],u+g[2],l+g[3],u+g[4],l+g[5],u+g[6]),l+=g[5],u+=g[6];break;case"S":l=g[3],u=g[4],e.bezierCurveToShort(g[1],g[2],l,u);break;case"s":e.bezierCurveToShort(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"Q":l=g[3],u=g[4],e.quadraticCurveTo(g[1],g[2],l,u);break;case"q":e.quadraticCurveTo(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"T":l=g[1],u=g[2],e.quadraticCurveToShort(l,u);break;case"t":l+=g[1],u+=g[2],e.quadraticCurveToShort(l,u);break;case"A":l=g[6],u=g[7],e.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"a":l+=g[6],u+=g[7],e.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:Ge(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return e}class gc{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new gc(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-e,l=this.y-t;return o*=o,l*=l,o+l<=s}strokeContains(e,t,s,o=.5){if(this.radius===0)return!1;const l=this.x-e,u=this.y-t,h=this.radius,f=(1-o)*s,p=Math.sqrt(l*l+u*u);return p<=h+f&&p>h-(s-f)}getBounds(e){return e||(e=new st),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class yc{constructor(e=0,t=0,s=0,o=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=o}clone(){return new yc(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,o=(t-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(e,t,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=s*(1-o),f=s-h,p=l-f,g=u-f,y=l+h,_=u+h,v=e-this.x,S=t-this.y,k=v*v/(p*p)+S*S/(g*g),w=v*v/(y*y)+S*S/(_*_);return k>1&&w<=1}getBounds(e){return e||(e=new st),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function s_(i,e,t,s,o,l){const u=i-t,h=e-s,f=o-t,p=l-s,g=u*f+h*p,y=f*f+p*p;let _=-1;y!==0&&(_=g/y);let v,S;_<0?(v=t,S=s):_>1?(v=o,S=l):(v=t+_*f,S=s+_*p);const k=i-v,w=e-S;return k*k+w*w}let o_,a_;class Ps{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let o=0,l=t.length;o<l;o++)s.push(t[o].x,t[o].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let o=0;o<s;o+=2){const l=t[o],u=t[o+1],h=t[(o+2)%s],f=t[(o+3)%s];e+=(h-l)*(f+u)}return e<0}containsPolygon(e){const t=this.getBounds(o_),s=e.getBounds(a_);if(!t.containsRect(s))return!1;const o=e.points;for(let l=0;l<o.length;l+=2){const u=o[l],h=o[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const e=this.points.slice(),t=new Ps(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const h=this.points[l*2],f=this.points[l*2+1],p=this.points[u*2],g=this.points[u*2+1];f>t!=g>t&&e<(p-h)*((t-f)/(g-f))+h&&(s=!s)}return s}strokeContains(e,t,s,o=.5){const l=s*s,u=l*(1-o),h=l-u,{points:f}=this,p=f.length-(this.closePath?0:2);for(let g=0;g<p;g+=2){const y=f[g],_=f[g+1],v=f[(g+2)%f.length],S=f[(g+3)%f.length],k=s_(e,t,y,_,v,S),w=Math.sign((v-y)*(t-_)-(S-_)*(e-y));if(k<=(w<0?h:u))return!0}return!1}getBounds(e){e||(e=new st);const t=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let h=0,f=t.length;h<f;h+=2){const p=t[h],g=t[h+1];s=p<s?p:s,o=p>o?p:o,l=g<l?g:l,u=g>u?g:u}return e.x=s,e.width=o-s,e.y=l,e.height=u-l,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return ke("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return ke("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const la=(i,e,t,s,o,l,u)=>{const h=i-t,f=e-s,p=Math.sqrt(h*h+f*f);return p>=o-l&&p<=o+u};class xc{constructor(e=0,t=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=o,this.radius=l}getBounds(e){return e||(e=new st),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new xc(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let o=e-(this.x+s),l=t-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=e-(this.x+this.width-s),o*o+l*l<=u)||(l=t-(this.y+this.height-s),o*o+l*l<=u)||(o=e-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(e,t,s,o=.5){const{x:l,y:u,width:h,height:f,radius:p}=this,g=s*(1-o),y=s-g,_=l+p,v=u+p,S=h-p*2,k=f-p*2,w=l+h,b=u+f;return(e>=l-g&&e<=l+y||e>=w-y&&e<=w+g)&&t>=v&&t<=v+k||(t>=u-g&&t<=u+y||t>=b-y&&t<=b+g)&&e>=_&&e<=_+S?!0:e<_&&t<v&&la(e,t,_,v,p,y,g)||e>w-p&&t<v&&la(e,t,w-p,v,p,y,g)||e>w-p&&t>b-p&&la(e,t,w-p,b-p,p,y,g)||e<_&&t>b-p&&la(e,t,_,b-p,p,y,g)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const Tm={};function l_(i,e,t){let s=2166136261;for(let o=0;o<e;o++)s^=i[o].uid,s=Math.imul(s,16777619),s>>>=0;return Tm[s]||u_(i,e,s,t)}function u_(i,e,t,s){const o={};let l=0;for(let h=0;h<s;h++){const f=h<e?i[h]:Pe.EMPTY.source;o[l++]=f.source,o[l++]=f.style}const u=new da(o);return Tm[t]=u,u}class Uf{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function Wf(i,e){const t=i.byteLength/8|0,s=new Float64Array(i,0,t);new Float64Array(e,0,t).set(s);const l=i.byteLength-t*8;if(l>0){const u=new Uint8Array(i,t*8,l);new Uint8Array(e,t*8,l).set(u)}}const c_={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var h_=(i=>(i[i.DISABLED=0]="DISABLED",i[i.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",i[i.MASK_ACTIVE=2]="MASK_ACTIVE",i[i.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",i[i.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",i[i.NONE=5]="NONE",i))(h_||{});function Hf(i,e){return e.alphaMode==="no-premultiply-alpha"&&c_[i]||i}const d_=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function f_(i){let e="";for(let t=0;t<i;++t)t>0&&(e+=`
else `),t<i-1&&(e+=`if(test == ${t}.0){}`);return e}function p_(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=d_.replace(/%forloop%/gi,f_(i));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))i=i/2|0;else break}}finally{e.deleteShader(t)}return i}let xi=null;function m_(){var e;if(xi)return xi;const i=am();return xi=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),xi=p_(xi,i),(e=i.getExtension("WEBGL_lose_context"))==null||e.loseContext(),xi}class g_{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class y_{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new g_,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Ts=[];let va=0;Ds.register({clear:()=>{if(Ts.length>0)for(const i of Ts)i&&i.destroy();Ts.length=0,va=0}});function Vf(){return va>0?Ts[--va]:new y_}function Yf(i){Ts[va++]=i}let ys=0;const Mm=class Em{constructor(e){this.uid=Je("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...Em.defaultOptions,...e},e.maxTextures||(ke("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=m_());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new Uf(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)Yf(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=Vf(),o=s.textures;o.clear();const l=t[this.elementStart];let u=Hf(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const f=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,g=this.indexBuffer;let y=this._batchIndexSize,_=this._batchIndexStart,v="startBatch";const S=this.maxTextures;for(let k=this.elementStart;k<this.elementSize;++k){const w=t[k];t[k]=null;const P=w.texture._source,M=Hf(w.blendMode,P),R=u!==M||h!==w.topology;if(P._batchTick===ys&&!R){w._textureId=P._textureBindLocation,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,f,p,w._attributeStart,w._textureId),this.packQuadIndex(g,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,f,p,w._attributeStart,w._textureId),this.packIndex(w,g,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}P._batchTick=ys,(o.count>=S||R)&&(this._finishBatch(s,_,y-_,o,u,h,e,v),v="renderBatch",_=y,u=M,h=w.topology,s=Vf(),o=s.textures,o.clear(),++ys),w._textureId=P._textureBindLocation=o.count,o.ids[P.uid]=o.count,o.textures[o.count++]=P,w._batch=s,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,f,p,w._attributeStart,w._textureId),this.packQuadIndex(g,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,f,p,w._attributeStart,w._textureId),this.packIndex(w,g,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,_,y-_,o,u,h,e,v),_=y,++ys),this.elementStart=this.elementSize,this._batchIndexStart=_,this._batchIndexSize=y}_finishBatch(e,t,s,o,l,u,h,f){e.gpuBindGroup=null,e.bindGroup=null,e.action=f,e.batcher=this,e.textures=o,e.blendMode=l,e.topology=u,e.start=t,e.size=s,++ys,this.batches[this.batchIndex++]=e,h.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new Uf(t);Wf(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let l=0;l<t.length;l++)o[l]=t[l];else Wf(t.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,o){const l=e.indices,u=e.indexSize,h=e.indexOffset,f=e.attributeOffset;for(let p=0;p<u;p++)t[s++]=o+l[p+h]-f}destroy(e={}){var t;if(this.batches!==null){for(let s=0;s<this.batches.length;s++)Yf(this.batches[s]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((t=this.shader)==null||t.destroy(),this.shader=null);for(let s=0;s<this._elements.length;s++)this._elements[s]&&(this._elements[s]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};Mm.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let x_=Mm;var jt=(i=>(i[i.MAP_READ=1]="MAP_READ",i[i.MAP_WRITE=2]="MAP_WRITE",i[i.COPY_SRC=4]="COPY_SRC",i[i.COPY_DST=8]="COPY_DST",i[i.INDEX=16]="INDEX",i[i.VERTEX=32]="VERTEX",i[i.UNIFORM=64]="UNIFORM",i[i.STORAGE=128]="STORAGE",i[i.INDIRECT=256]="INDIRECT",i[i.QUERY_RESOLVE=512]="QUERY_RESOLVE",i[i.STATIC=1024]="STATIC",i))(jt||{});class Fs extends wn{constructor(e){let{data:t,size:s}=e;const{usage:o,label:l,shrinkToFit:u}=e;super(),this.uid=Je("buffer"),this._resourceType="buffer",this._resourceId=Je("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t==null?void 0:t.byteLength);const h=!!t;this.descriptor={size:s,usage:o,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&jt.STATIC)}set static(e){e?this.descriptor.usage|=jt.STATIC:this.descriptor.usage&=~jt.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const o=this._data;if(this._data=e,this._dataInt32=null,!o||o.length!==e.length){!this.shrinkToFit&&o&&e.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Je("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function Rm(i,e){if(!(i instanceof Fs)){let t=e?jt.INDEX:jt.VERTEX;i instanceof Array&&(e?(i=new Uint32Array(i),t=jt.INDEX|jt.COPY_DST):(i=new Float32Array(i),t=jt.VERTEX|jt.COPY_DST)),i=new Fs({data:i,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return i}function __(i,e,t){const s=i.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const o=s.buffer.data;let l=1/0,u=1/0,h=-1/0,f=-1/0;const p=o.BYTES_PER_ELEMENT,g=(s.offset||0)/p,y=(s.stride||8)/p;for(let _=g;_<o.length;_+=y){const v=o[_],S=o[_+1];v>h&&(h=v),S>f&&(f=S),v<l&&(l=v),S<u&&(u=S)}return t.minX=l,t.minY=u,t.maxX=h,t.maxY=f,t}function v_(i){return(i instanceof Fs||Array.isArray(i)||i.BYTES_PER_ELEMENT)&&(i={buffer:i}),i.buffer=Rm(i.buffer,!1),i}class w_ extends wn{constructor(e={}){super(),this.uid=Je("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new vn,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:o}=e;if(this.buffers=[],this.attributes={},t)for(const l in t)this.addAttribute(l,t[l]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=v_(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=Rm(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,__(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(s=>s.destroy()),(t=this.indexBuffer)==null||t.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const S_=new Float32Array(1),C_=new Uint32Array(1);class k_ extends w_{constructor(){const t=new Fs({data:S_,label:"attribute-batch-buffer",usage:jt.VERTEX|jt.COPY_DST,shrinkToFit:!1}),s=new Fs({data:C_,label:"index-batch-buffer",usage:jt.INDEX|jt.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:o,offset:0},aUV:{buffer:t,format:"float32x2",stride:o,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function Xf(i,e,t){if(i)for(const s in i){const o=s.toLocaleLowerCase(),l=e[o];if(l){let u=i[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&l.push(`//----${t}----//`),l.push(u)}else Ge(`${s} placement hook does not exist in shader`)}}const A_=/\{\{(.*?)\}\}/g;function qf(i){var s;const e={};return(((s=i.match(A_))==null?void 0:s.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{e[o]=[]}),e}function Kf(i,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function Qf(i,e,t=!1){const s=[];Kf(e,s),i.forEach(h=>{h.header&&Kf(h.header,s)});const o=s;t&&o.sort();const l=o.map((h,f)=>`       @location(${f}) ${h},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function Zf(i,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function b_(i){const t=/\b(\w+)\s*:/g.exec(i);return t?t[1]:""}function P_(i){const e=/@.*?\s+/g;return i.replace(e,"")}function T_(i,e){const t=[];Zf(e,t),i.forEach(f=>{f.header&&Zf(f.header,t)});let s=0;const o=t.sort().map(f=>f.indexOf("builtin")>-1?f:`@location(${s++}) ${f}`).join(`,
`),l=t.sort().map(f=>`       var ${P_(f)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(f=>` ${b_(f)}`).join(`,
`)});`;let h=e.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${o}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function Jf(i,e){let t=i;for(const s in e){const o=e[s];o.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const yr=Object.create(null),Eu=new Map;let M_=0;function E_({template:i,bits:e}){const t=Im(i,e);if(yr[t])return yr[t];const{vertex:s,fragment:o}=I_(i,e);return yr[t]=Fm(s,o,e),yr[t]}function R_({template:i,bits:e}){const t=Im(i,e);return yr[t]||(yr[t]=Fm(i.vertex,i.fragment,e)),yr[t]}function I_(i,e){const t=e.map(u=>u.vertex).filter(u=>!!u),s=e.map(u=>u.fragment).filter(u=>!!u);let o=Qf(t,i.vertex,!0);o=T_(t,o);const l=Qf(s,i.fragment,!0);return{vertex:o,fragment:l}}function Im(i,e){return e.map(t=>(Eu.has(t)||Eu.set(t,M_++),Eu.get(t))).sort((t,s)=>t-s).join("-")+i.vertex+i.fragment}function Fm(i,e,t){const s=qf(i),o=qf(e);return t.forEach(l=>{Xf(l.vertex,s,l.name),Xf(l.fragment,o,l.name)}),{vertex:Jf(i,s),fragment:Jf(e,o)}}const F_=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,L_=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,B_=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,z_=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,D_={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},N_={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function O_({bits:i,name:e}){const t=E_({template:{fragment:L_,vertex:F_},bits:[D_,...i]});return ka.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function j_({bits:i,name:e}){return new um({name:e,...R_({template:{vertex:B_,fragment:z_},bits:[N_,...i]})})}const $_={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},G_={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Ru={};function U_(i){const e=[];if(i===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<i;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function W_(i){const e=[];if(i===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<i;t++)t===i-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function H_(i){return Ru[i]||(Ru[i]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${U_(i)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${W_(i)}
            `}}),Ru[i]}const Iu={};function V_(i){const e=[];for(let t=0;t<i;t++)t>0&&e.push("else"),t<i-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function Y_(i){return Iu[i]||(Iu[i]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${i}];

            `,main:`

                ${V_(i)}
            `}}),Iu[i]}const X_={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},q_={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},ep={};function K_(i){let e=ep[i];if(e)return e;const t=new Int32Array(i);for(let s=0;s<i;s++)t[s]=s;return e=ep[i]=new fm({uTextures:{value:t,type:"i32",size:i}},{isStatic:!0}),e}class tp extends pc{constructor(e){const t=j_({name:"batch",bits:[G_,Y_(e),q_]}),s=O_({name:"batch",bits:[$_,H_(e),X_]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:K_(e)}}),this.maxTextures=e}}let xs=null;const Lm=class Bm extends x_{constructor(e){super(e),this.geometry=new k_,this.name=Bm.extension.name,this.vertexSize=6,xs??(xs=new tp(e.maxTextures)),this.shader=xs}packAttributes(e,t,s,o,l){const u=l<<16|e.roundPixels&65535,h=e.transform,f=h.a,p=h.b,g=h.c,y=h.d,_=h.tx,v=h.ty,{positions:S,uvs:k}=e,w=e.color,b=e.attributeOffset,P=b+e.attributeSize;for(let M=b;M<P;M++){const R=M*2,W=S[R],N=S[R+1];t[o++]=f*W+g*N+_,t[o++]=y*N+p*W+v,t[o++]=k[R],t[o++]=k[R+1],s[o++]=w,s[o++]=u}}packQuadAttributes(e,t,s,o,l){const u=e.texture,h=e.transform,f=h.a,p=h.b,g=h.c,y=h.d,_=h.tx,v=h.ty,S=e.bounds,k=S.maxX,w=S.minX,b=S.maxY,P=S.minY,M=u.uvs,R=e.color,W=l<<16|e.roundPixels&65535;t[o+0]=f*w+g*P+_,t[o+1]=y*P+p*w+v,t[o+2]=M.x0,t[o+3]=M.y0,s[o+4]=R,s[o+5]=W,t[o+6]=f*k+g*P+_,t[o+7]=y*P+p*k+v,t[o+8]=M.x1,t[o+9]=M.y1,s[o+10]=R,s[o+11]=W,t[o+12]=f*k+g*b+_,t[o+13]=y*b+p*k+v,t[o+14]=M.x2,t[o+15]=M.y2,s[o+16]=R,s[o+17]=W,t[o+18]=f*w+g*b+_,t[o+19]=y*b+p*w+v,t[o+20]=M.x3,t[o+21]=M.y3,s[o+22]=R,s[o+23]=W}_updateMaxTextures(e){this.shader.maxTextures!==e&&(xs=new tp(e),this.shader=xs)}destroy(){this.shader=null,super.destroy()}};Lm.extension={type:[ce.Batcher],name:"default"};let Q_=Lm;function Z_(i,e,t,s,o,l,u,h=null){let f=0;t*=e,o*=l;const p=h.a,g=h.b,y=h.c,_=h.d,v=h.tx,S=h.ty;for(;f<u;){const k=i[t],w=i[t+1];s[o]=p*k+y*w+v,s[o+1]=g*k+_*w+S,o+=l,t+=e,f++}}function J_(i,e,t,s){let o=0;for(e*=t;o<s;)i[e]=0,i[e+1]=0,e+=t,o++}function zm(i,e,t,s,o){const l=e.a,u=e.b,h=e.c,f=e.d,p=e.tx,g=e.ty;t||(t=0),s||(s=2),o||(o=i.length/s-t);let y=t*s;for(let _=0;_<o;_++){const v=i[y],S=i[y+1];i[y]=l*v+h*S+p,i[y+1]=u*v+f*S+g,y+=s}}const ev=new be;class Dm{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?jp(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||ev}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Ls={extension:{type:ce.ShapeBuilder,name:"circle"},build(i,e){let t,s,o,l,u,h;if(i.type==="circle"){const R=i;if(u=h=R.radius,u<=0)return!1;t=R.x,s=R.y,o=l=0}else if(i.type==="ellipse"){const R=i;if(u=R.halfWidth,h=R.halfHeight,u<=0||h<=0)return!1;t=R.x,s=R.y,o=l=0}else{const R=i,W=R.width/2,N=R.height/2;t=R.x+W,s=R.y+N,u=h=Math.max(0,Math.min(R.radius,Math.min(W,N))),o=W-u,l=N-h}if(o<0||l<0)return!1;const f=Math.ceil(2.3*Math.sqrt(u+h)),p=f*8+(o?4:0)+(l?4:0);if(p===0)return!1;if(f===0)return e[0]=e[6]=t+o,e[1]=e[3]=s+l,e[2]=e[4]=t-o,e[5]=e[7]=s-l,!0;let g=0,y=f*4+(o?2:0)+2,_=y,v=p,S=o+u,k=l,w=t+S,b=t-S,P=s+k;if(e[g++]=w,e[g++]=P,e[--y]=P,e[--y]=b,l){const R=s-k;e[_++]=b,e[_++]=R,e[--v]=R,e[--v]=w}for(let R=1;R<f;R++){const W=Math.PI/2*(R/f),N=o+Math.cos(W)*u,D=l+Math.sin(W)*h,ee=t+N,le=t-N,Y=s+D,J=s-D;e[g++]=ee,e[g++]=Y,e[--y]=Y,e[--y]=le,e[_++]=le,e[_++]=J,e[--v]=J,e[--v]=ee}S=o,k=l+h,w=t+S,b=t-S,P=s+k;const M=s-k;return e[g++]=w,e[g++]=P,e[--v]=M,e[--v]=w,o&&(e[g++]=b,e[g++]=P,e[--v]=M,e[--v]=b),!0},triangulate(i,e,t,s,o,l){if(i.length===0)return;let u=0,h=0;for(let g=0;g<i.length;g+=2)u+=i[g],h+=i[g+1];u/=i.length/2,h/=i.length/2;let f=s;e[f*t]=u,e[f*t+1]=h;const p=f++;for(let g=0;g<i.length;g+=2)e[f*t]=i[g],e[f*t+1]=i[g+1],g>0&&(o[l++]=f,o[l++]=p,o[l++]=f-1),f++;o[l++]=p+1,o[l++]=p,o[l++]=f-1}},tv={...Ls,extension:{...Ls.extension,name:"ellipse"}},nv={...Ls,extension:{...Ls.extension,name:"roundedRectangle"}},Nm=1e-4,np=1e-4;function rv(i){const e=i.length;if(e<6)return 1;let t=0;for(let s=0,o=i[e-2],l=i[e-1];s<e;s+=2){const u=i[s],h=i[s+1];t+=(u-o)*(h+l),o=u,l=h}return t<0?-1:1}function rp(i,e,t,s,o,l,u,h){const f=i-t*o,p=e-s*o,g=i+t*l,y=e+s*l;let _,v;u?(_=s,v=-t):(_=-s,v=t);const S=f+_,k=p+v,w=g+_,b=y+v;return h.push(S,k),h.push(w,b),2}function Br(i,e,t,s,o,l,u,h){const f=t-i,p=s-e;let g=Math.atan2(f,p),y=Math.atan2(o-i,l-e);h&&g<y?g+=Math.PI*2:!h&&g>y&&(y+=Math.PI*2);let _=g;const v=y-g,S=Math.abs(v),k=Math.sqrt(f*f+p*p),w=(15*S*Math.sqrt(k)/Math.PI>>0)+1,b=v/w;if(_+=b,h){u.push(i,e),u.push(t,s);for(let P=1,M=_;P<w;P++,M+=b)u.push(i,e),u.push(i+Math.sin(M)*k,e+Math.cos(M)*k);u.push(i,e),u.push(o,l)}else{u.push(t,s),u.push(i,e);for(let P=1,M=_;P<w;P++,M+=b)u.push(i+Math.sin(M)*k,e+Math.cos(M)*k),u.push(i,e);u.push(o,l),u.push(i,e)}return w*2}function iv(i,e,t,s,o,l){const u=Nm;if(i.length===0)return;const h=e;let f=h.alignment;if(e.alignment!==.5){let V=rv(i);f=(f-.5)*V+.5}const p=new At(i[0],i[1]),g=new At(i[i.length-2],i[i.length-1]),y=s,_=Math.abs(p.x-g.x)<u&&Math.abs(p.y-g.y)<u;if(y){i=i.slice(),_&&(i.pop(),i.pop(),g.set(i[i.length-2],i[i.length-1]));const V=(p.x+g.x)*.5,Q=(g.y+p.y)*.5;i.unshift(V,Q),i.push(V,Q)}const v=o,S=i.length/2;let k=i.length;const w=v.length/2,b=h.width/2,P=b*b,M=h.miterLimit*h.miterLimit;let R=i[0],W=i[1],N=i[2],D=i[3],ee=0,le=0,Y=-(W-D),J=R-N,we=0,Se=0,fe=Math.sqrt(Y*Y+J*J);Y/=fe,J/=fe,Y*=b,J*=b;const Ke=f,K=(1-Ke)*2,q=Ke*2;y||(h.cap==="round"?k+=Br(R-Y*(K-q)*.5,W-J*(K-q)*.5,R-Y*K,W-J*K,R+Y*q,W+J*q,v,!0)+2:h.cap==="square"&&(k+=rp(R,W,Y,J,K,q,!0,v))),v.push(R-Y*K,W-J*K),v.push(R+Y*q,W+J*q);for(let V=1;V<S-1;++V){R=i[(V-1)*2],W=i[(V-1)*2+1],N=i[V*2],D=i[V*2+1],ee=i[(V+1)*2],le=i[(V+1)*2+1],Y=-(W-D),J=R-N,fe=Math.sqrt(Y*Y+J*J),Y/=fe,J/=fe,Y*=b,J*=b,we=-(D-le),Se=N-ee,fe=Math.sqrt(we*we+Se*Se),we/=fe,Se/=fe,we*=b,Se*=b;const Q=N-R,E=W-D,O=N-ee,me=le-D,_e=Q*O+E*me,ve=E*O-me*Q,ne=ve<0;if(Math.abs(ve)<.001*Math.abs(_e)){v.push(N-Y*K,D-J*K),v.push(N+Y*q,D+J*q),_e>=0&&(h.join==="round"?k+=Br(N,D,N-Y*K,D-J*K,N-we*K,D-Se*K,v,!1)+4:k+=2,v.push(N-we*q,D-Se*q),v.push(N+we*K,D+Se*K));continue}const Ee=(-Y+R)*(-J+D)-(-Y+N)*(-J+W),Ae=(-we+ee)*(-Se+D)-(-we+N)*(-Se+le),Te=(Q*Ae-O*Ee)/ve,et=(me*Ee-E*Ae)/ve,un=(Te-N)*(Te-N)+(et-D)*(et-D),Xt=N+(Te-N)*K,Rt=D+(et-D)*K,$t=N-(Te-N)*q,qt=D-(et-D)*q,Rn=Math.min(Q*Q+E*E,O*O+me*me),In=ne?K:q,Yn=Rn+In*In*P;un<=Yn?h.join==="bevel"||un/P>M?(ne?(v.push(Xt,Rt),v.push(N+Y*q,D+J*q),v.push(Xt,Rt),v.push(N+we*q,D+Se*q)):(v.push(N-Y*K,D-J*K),v.push($t,qt),v.push(N-we*K,D-Se*K),v.push($t,qt)),k+=2):h.join==="round"?ne?(v.push(Xt,Rt),v.push(N+Y*q,D+J*q),k+=Br(N,D,N+Y*q,D+J*q,N+we*q,D+Se*q,v,!0)+4,v.push(Xt,Rt),v.push(N+we*q,D+Se*q)):(v.push(N-Y*K,D-J*K),v.push($t,qt),k+=Br(N,D,N-Y*K,D-J*K,N-we*K,D-Se*K,v,!1)+4,v.push(N-we*K,D-Se*K),v.push($t,qt)):(v.push(Xt,Rt),v.push($t,qt)):(v.push(N-Y*K,D-J*K),v.push(N+Y*q,D+J*q),h.join==="round"?ne?k+=Br(N,D,N+Y*q,D+J*q,N+we*q,D+Se*q,v,!0)+2:k+=Br(N,D,N-Y*K,D-J*K,N-we*K,D-Se*K,v,!1)+2:h.join==="miter"&&un/P<=M&&(ne?(v.push($t,qt),v.push($t,qt)):(v.push(Xt,Rt),v.push(Xt,Rt)),k+=2),v.push(N-we*K,D-Se*K),v.push(N+we*q,D+Se*q),k+=2)}R=i[(S-2)*2],W=i[(S-2)*2+1],N=i[(S-1)*2],D=i[(S-1)*2+1],Y=-(W-D),J=R-N,fe=Math.sqrt(Y*Y+J*J),Y/=fe,J/=fe,Y*=b,J*=b,v.push(N-Y*K,D-J*K),v.push(N+Y*q,D+J*q),y||(h.cap==="round"?k+=Br(N-Y*(K-q)*.5,D-J*(K-q)*.5,N-Y*K,D-J*K,N+Y*q,D+J*q,v,!1)+2:h.cap==="square"&&(k+=rp(N,D,Y,J,K,q,!1,v)));const X=np*np;for(let V=w;V<k+w-2;++V)R=v[V*2],W=v[V*2+1],N=v[(V+1)*2],D=v[(V+1)*2+1],ee=v[(V+2)*2],le=v[(V+2)*2+1],!(Math.abs(R*(D-le)+N*(le-W)+ee*(W-D))<X)&&l.push(V,V+1,V+2)}function sv(i,e,t,s){const o=Nm;if(i.length===0)return;const l=i[0],u=i[1],h=i[i.length-2],f=i[i.length-1],p=e||Math.abs(l-h)<o&&Math.abs(u-f)<o,g=t,y=i.length/2,_=g.length/2;for(let v=0;v<y;v++)g.push(i[v*2]),g.push(i[v*2+1]);for(let v=0;v<y-1;v++)s.push(_+v,_+v+1);p&&s.push(_+y-1,_)}function Om(i,e,t,s,o,l,u){const h=H0(i,e,2);if(!h)return;for(let p=0;p<h.length;p+=3)l[u++]=h[p]+o,l[u++]=h[p+1]+o,l[u++]=h[p+2]+o;let f=o*s;for(let p=0;p<i.length;p+=2)t[f]=i[p],t[f+1]=i[p+1],f+=s}const ov=[],av={extension:{type:ce.ShapeBuilder,name:"polygon"},build(i,e){for(let t=0;t<i.points.length;t++)e[t]=i.points[t];return!0},triangulate(i,e,t,s,o,l){Om(i,ov,e,t,s,o,l)}},lv={extension:{type:ce.ShapeBuilder,name:"rectangle"},build(i,e){const t=i,s=t.x,o=t.y,l=t.width,u=t.height;return l>0&&u>0?(e[0]=s,e[1]=o,e[2]=s+l,e[3]=o,e[4]=s+l,e[5]=o+u,e[6]=s,e[7]=o+u,!0):!1},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[6],e[s+u+1]=i[7],u+=t,e[s+u]=i[4],e[s+u+1]=i[5],u+=t;const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2,o[l++]=h+1,o[l++]=h+3,o[l++]=h+2}},uv={extension:{type:ce.ShapeBuilder,name:"triangle"},build(i,e){return e[0]=i.x,e[1]=i.y,e[2]=i.x2,e[3]=i.y2,e[4]=i.x3,e[5]=i.y3,!0},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[4],e[s+u+1]=i[5];const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2}},cv=new be,hv=new st;function dv(i,e,t,s){const o=e.matrix?i.copyFrom(e.matrix).invert():i.identity();if(e.textureSpace==="local"){const u=t.getBounds(hv);e.width&&u.pad(e.width);const{x:h,y:f}=u,p=1/u.width,g=1/u.height,y=-h*p,_=-f*g,v=o.a,S=o.b,k=o.c,w=o.d;o.a*=p,o.b*=p,o.c*=g,o.d*=g,o.tx=y*v+_*k+o.tx,o.ty=y*S+_*w+o.ty}else o.translate(e.texture.frame.x,e.texture.frame.y),o.scale(1/e.texture.source.width,1/e.texture.source.height);const l=e.texture.source.style;return!(e.fill instanceof Vn)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(cv.copyFrom(s).invert()),o}const ba={};_t.handleByMap(ce.ShapeBuilder,ba);_t.add(lv,av,uv,Ls,tv,nv);const fv=new st,pv=new be;function mv(i,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let o=0;o<i.instructions.length;o++){const l=i.instructions[o];if(l.action==="texture")gv(l.data,s,t);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,f=l.data.style,p=l.data.hole;u&&p&&ip(p.shapePath,f,!0,s,t),p&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=p.shapePath.shapePrimitives),ip(h,f,u,s,t)}}}function gv(i,e,t){const s=[],o=ba.rectangle,l=fv;l.x=i.dx,l.y=i.dy,l.width=i.dw,l.height=i.dh;const u=i.transform;if(!o.build(l,s))return;const{vertices:h,uvs:f,indices:p}=t,g=p.length,y=h.length/2;u&&zm(s,u),o.triangulate(s,h,2,y,p,g);const _=i.image,v=_.uvs;f.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const S=ln.get(Dm);S.indexOffset=g,S.indexSize=p.length-g,S.attributeOffset=y,S.attributeSize=h.length/2-y,S.baseColor=i.style,S.alpha=i.alpha,S.texture=_,S.geometryData=t,e.push(S)}function ip(i,e,t,s,o){const{vertices:l,uvs:u,indices:h}=o;i.shapePrimitives.forEach(({shape:f,transform:p,holes:g})=>{const y=[],_=ba[f.type];if(!_.build(f,y))return;const v=h.length,S=l.length/2;let k="triangle-list";if(p&&zm(y,p),t){const M=f.closePath??!0,R=e;R.pixelLine?(sv(y,M,l,h),k="line-list"):iv(y,R,!1,M,l,h)}else if(g){const M=[],R=y.slice();yv(g).forEach(N=>{M.push(R.length/2),R.push(...N)}),Om(R,M,l,2,S,h,v)}else _.triangulate(y,l,2,S,h,v);const w=u.length/2,b=e.texture;if(b!==Pe.WHITE){const M=dv(pv,e,f,p);Z_(l,2,S,u,w,2,l.length/2-S,M)}else J_(u,w,2,l.length/2-S);const P=ln.get(Dm);P.indexOffset=v,P.indexSize=h.length-v,P.attributeOffset=S,P.attributeSize=l.length/2-S,P.baseColor=e.color,P.alpha=e.alpha,P.texture=b,P.geometryData=o,P.topology=k,s.push(P)})}function yv(i){const e=[];for(let t=0;t<i.length;t++){const s=i[t].shape,o=[];ba[s.type].build(s,o)&&e.push(o)}return e}class xv{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class _v{constructor(){this.instructions=new Wp}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new Q_({maxTextures:t}),this.instructions.reset()}get geometry(){return ke(gx,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const _c=class ic{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){ic.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??ic.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),mv(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=ln.get(_v,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[e.uid],l=o.vertices.length,u=o.indices.length;for(let g=0;g<s.length;g++)s[g].applyTransform=!1;const h=t.batcher;h.ensureAttributeBuffer(l),h.ensureIndexBuffer(u),h.begin();for(let g=0;g<s.length;g++){const y=s[g];h.add(y)}h.finish(t.instructions);const f=h.geometry;f.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),f.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const p=h.batches;for(let g=0;g<p.length;g++){const y=p[g];y.bindGroup=l_(y.textures.textures,y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new xv;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(ln.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{ln.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};_c.extension={type:[ce.WebGLSystem,ce.WebGPUSystem,ce.CanvasSystem],name:"graphicsContext"};_c.defaultOptions={bezierSmoothness:.5};let jm=_c;const vv=8,ua=11920929e-14,wv=1;function $m(i,e,t,s,o,l,u,h,f,p){const y=Math.min(.99,Math.max(0,p??jm.defaultOptions.bezierSmoothness));let _=(wv-y)/1;return _*=_,Sv(e,t,s,o,l,u,h,f,i,_),i}function Sv(i,e,t,s,o,l,u,h,f,p){sc(i,e,t,s,o,l,u,h,f,p,0),f.push(u,h)}function sc(i,e,t,s,o,l,u,h,f,p,g){if(g>vv)return;const y=(i+t)/2,_=(e+s)/2,v=(t+o)/2,S=(s+l)/2,k=(o+u)/2,w=(l+h)/2,b=(y+v)/2,P=(_+S)/2,M=(v+k)/2,R=(S+w)/2,W=(b+M)/2,N=(P+R)/2;if(g>0){let D=u-i,ee=h-e;const le=Math.abs((t-u)*ee-(s-h)*D),Y=Math.abs((o-u)*ee-(l-h)*D);if(le>ua&&Y>ua){if((le+Y)*(le+Y)<=p*(D*D+ee*ee)){f.push(W,N);return}}else if(le>ua){if(le*le<=p*(D*D+ee*ee)){f.push(W,N);return}}else if(Y>ua){if(Y*Y<=p*(D*D+ee*ee)){f.push(W,N);return}}else if(D=W-(i+u)/2,ee=N-(e+h)/2,D*D+ee*ee<=p){f.push(W,N);return}}sc(i,e,y,_,b,P,W,N,f,p,g+1),sc(W,N,M,R,k,w,u,h,f,p,g+1)}const Cv=8,kv=11920929e-14,Av=1;function bv(i,e,t,s,o,l,u,h){const p=Math.min(.99,Math.max(0,h??jm.defaultOptions.bezierSmoothness));let g=(Av-p)/1;return g*=g,Pv(e,t,s,o,l,u,i,g),i}function Pv(i,e,t,s,o,l,u,h){oc(u,i,e,t,s,o,l,h,0),u.push(o,l)}function oc(i,e,t,s,o,l,u,h,f){if(f>Cv)return;const p=(e+s)/2,g=(t+o)/2,y=(s+l)/2,_=(o+u)/2,v=(p+y)/2,S=(g+_)/2;let k=l-e,w=u-t;const b=Math.abs((s-l)*w-(o-u)*k);if(b>kv){if(b*b<=h*(k*k+w*w)){i.push(v,S);return}}else if(k=v-(e+l)/2,w=S-(t+u)/2,k*k+w*w<=h){i.push(v,S);return}oc(i,e,t,p,g,v,S,h,f+1),oc(i,v,S,y,_,l,u,h,f+1)}function Gm(i,e,t,s,o,l,u,h){let f=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(f=2*Math.PI-f),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(f/Math.PI)))),h=Math.max(h,3);let p=f/h,g=o;p*=u?-1:1;for(let y=0;y<h+1;y++){const _=Math.cos(g),v=Math.sin(g),S=e+_*s,k=t+v*s;i.push(S,k),g+=p}}function Tv(i,e,t,s,o,l){const u=i[i.length-2],f=i[i.length-1]-t,p=u-e,g=o-t,y=s-e,_=Math.abs(f*y-p*g);if(_<1e-8||l===0){(i[i.length-2]!==e||i[i.length-1]!==t)&&i.push(e,t);return}const v=f*f+p*p,S=g*g+y*y,k=f*g+p*y,w=l*Math.sqrt(v)/_,b=l*Math.sqrt(S)/_,P=w*k/v,M=b*k/S,R=w*y+b*p,W=w*g+b*f,N=p*(b+P),D=f*(b+P),ee=y*(w+M),le=g*(w+M),Y=Math.atan2(D-W,N-R),J=Math.atan2(le-W,ee-R);Gm(i,R+e,W+t,l,Y,J,p*g>y*f)}const Ms=Math.PI*2,Fu={centerX:0,centerY:0,ang1:0,ang2:0},Lu=({x:i,y:e},t,s,o,l,u,h,f)=>{i*=t,e*=s;const p=o*i-l*e,g=l*i+o*e;return f.x=p+u,f.y=g+h,f};function Mv(i,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,o=Math.cos(i),l=Math.sin(i),u=Math.cos(i+e),h=Math.sin(i+e);return[{x:o-l*s,y:l+o*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const sp=(i,e,t,s)=>{const o=i*s-e*t<0?-1:1;let l=i*t+e*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},Ev=(i,e,t,s,o,l,u,h,f,p,g,y,_)=>{const v=Math.pow(o,2),S=Math.pow(l,2),k=Math.pow(g,2),w=Math.pow(y,2);let b=v*S-v*w-S*k;b<0&&(b=0),b/=v*w+S*k,b=Math.sqrt(b)*(u===h?-1:1);const P=b*o/l*y,M=b*-l/o*g,R=p*P-f*M+(i+t)/2,W=f*P+p*M+(e+s)/2,N=(g-P)/o,D=(y-M)/l,ee=(-g-P)/o,le=(-y-M)/l,Y=sp(1,0,N,D);let J=sp(N,D,ee,le);h===0&&J>0&&(J-=Ms),h===1&&J<0&&(J+=Ms),_.centerX=R,_.centerY=W,_.ang1=Y,_.ang2=J};function Rv(i,e,t,s,o,l,u,h=0,f=0,p=0){if(l===0||u===0)return;const g=Math.sin(h*Ms/360),y=Math.cos(h*Ms/360),_=y*(e-s)/2+g*(t-o)/2,v=-g*(e-s)/2+y*(t-o)/2;if(_===0&&v===0)return;l=Math.abs(l),u=Math.abs(u);const S=Math.pow(_,2)/Math.pow(l,2)+Math.pow(v,2)/Math.pow(u,2);S>1&&(l*=Math.sqrt(S),u*=Math.sqrt(S)),Ev(e,t,s,o,l,u,f,p,g,y,_,v,Fu);let{ang1:k,ang2:w}=Fu;const{centerX:b,centerY:P}=Fu;let M=Math.abs(w)/(Ms/4);Math.abs(1-M)<1e-7&&(M=1);const R=Math.max(Math.ceil(M),1);w/=R;let W=i[i.length-2],N=i[i.length-1];const D={x:0,y:0};for(let ee=0;ee<R;ee++){const le=Mv(k,w),{x:Y,y:J}=Lu(le[0],l,u,y,g,b,P,D),{x:we,y:Se}=Lu(le[1],l,u,y,g,b,P,D),{x:fe,y:Ke}=Lu(le[2],l,u,y,g,b,P,D);$m(i,W,N,Y,J,we,Se,fe,Ke),W=fe,N=Ke,k+=w}}function Iv(i,e,t){const s=(u,h)=>{const f=h.x-u.x,p=h.y-u.y,g=Math.sqrt(f*f+p*p),y=f/g,_=p/g;return{len:g,nx:y,ny:_}},o=(u,h)=>{u===0?i.moveTo(h.x,h.y):i.lineTo(h.x,h.y)};let l=e[e.length-1];for(let u=0;u<e.length;u++){const h=e[u%e.length],f=h.radius??t;if(f<=0){o(u,h),l=h;continue}const p=e[(u+1)%e.length],g=s(h,l),y=s(h,p);if(g.len<1e-4||y.len<1e-4){o(u,h),l=h;continue}let _=Math.asin(g.nx*y.ny-g.ny*y.nx),v=1,S=!1;g.nx*y.nx-g.ny*-y.ny<0?_<0?_=Math.PI+_:(_=Math.PI-_,v=-1,S=!0):_>0&&(v=-1,S=!0);const k=_/2;let w,b=Math.abs(Math.cos(k)*f/Math.sin(k));b>Math.min(g.len/2,y.len/2)?(b=Math.min(g.len/2,y.len/2),w=Math.abs(b*Math.sin(k)/Math.cos(k))):w=f;const P=h.x+y.nx*b+-y.ny*w*v,M=h.y+y.ny*b+y.nx*w*v,R=Math.atan2(g.ny,g.nx)+Math.PI/2*v,W=Math.atan2(y.ny,y.nx)-Math.PI/2*v;u===0&&i.moveTo(P+Math.cos(R)*w,M+Math.sin(R)*w),i.arc(P,M,w,R,W,S),l=h}}function Fv(i,e,t,s){const o=(h,f)=>Math.sqrt((h.x-f.x)**2+(h.y-f.y)**2),l=(h,f,p)=>({x:h.x+(f.x-h.x)*p,y:h.y+(f.y-h.y)*p}),u=e.length;for(let h=0;h<u;h++){const f=e[(h+1)%u],p=f.radius??t;if(p<=0){h===0?i.moveTo(f.x,f.y):i.lineTo(f.x,f.y);continue}const g=e[h],y=e[(h+2)%u],_=o(g,f);let v;if(_<1e-4)v=f;else{const w=Math.min(_/2,p);v=l(f,g,w/_)}const S=o(y,f);let k;if(S<1e-4)k=f;else{const w=Math.min(S/2,p);k=l(f,y,w/S)}h===0?i.moveTo(v.x,v.y):i.lineTo(v.x,v.y),i.quadraticCurveTo(f.x,f.y,k.x,k.y,s)}}const Lv=new st;class Bv{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new vn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==e||l!==t)&&s.push(e,t),this}arc(e,t,s,o,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return Gm(h,e,t,s,o,l,u),this}arcTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return Tv(u,e,t,s,o,l),this}arcToSvg(e,t,s,o,l,u,h){const f=this._currentPoly.points;return Rv(f,this._currentPoly.lastX,this._currentPoly.lastY,u,h,e,t,s,o,l),this}bezierCurveTo(e,t,s,o,l,u,h){this._ensurePoly();const f=this._currentPoly;return $m(this._currentPoly.points,f.lastX,f.lastY,e,t,s,o,l,u,h),this}quadraticCurveTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly;return bv(this._currentPoly.points,u.lastX,u.lastY,e,t,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,o=s.length;for(let l=0;l<e.instructions.length;l++){const u=e.instructions[l];this[u.action](...u.data)}if(e.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const f=h.shape,p=l==null?void 0:l.shape;p&&p.containsPolygon(f)?(l.holes||(l.holes=[]),l.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):l=h}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,o,l){return this.drawShape(new st(e,t,s,o),l),this}circle(e,t,s,o){return this.drawShape(new gc(e,t,s),o),this}poly(e,t,s){const o=new Ps(e);return o.closePath=t,this.drawShape(o,s),this}regularPoly(e,t,s,o,l=0,u){o=Math.max(o|0,3);const h=-1*Math.PI/2+l,f=Math.PI*2/o,p=[];for(let g=0;g<o;g++){const y=h-g*f;p.push(e+s*Math.cos(y),t+s*Math.sin(y))}return this.poly(p,!0,u),this}roundPoly(e,t,s,o,l,u=0,h){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(e,t,s,o,u);const f=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,f);const p=-1*Math.PI/2+u,g=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let _=0;_<o;_++){const v=_*g+p,S=e+s*Math.cos(v),k=t+s*Math.sin(v),w=v+Math.PI+y,b=v-Math.PI-y,P=S+l*Math.cos(w),M=k+l*Math.sin(w),R=S+l*Math.cos(b),W=k+l*Math.sin(b);_===0?this.moveTo(P,M):this.lineTo(P,M),this.quadraticCurveTo(S,k,R,W,h)}return this.closePath()}roundShape(e,t,s=!1,o){return e.length<3?this:(s?Fv(this,e,t,o):Iv(this,e,t),this.closePath())}filletRect(e,t,s,o,l){if(l===0)return this.rect(e,t,s,o);const u=Math.min(s,o)/2,h=Math.min(u,Math.max(-u,l)),f=e+s,p=t+o,g=h<0?-h:0,y=Math.abs(h);return this.moveTo(e,t+y).arcTo(e+g,t+g,e+y,t,y).lineTo(f-y,t).arcTo(f-g,t+g,f,t+y,y).lineTo(f,p-y).arcTo(f-g,p-g,e+s-y,p,y).lineTo(e+y,p).arcTo(e+g,p-g,e,p-y,y).closePath()}chamferRect(e,t,s,o,l,u){if(l<=0)return this.rect(e,t,s,o);const h=Math.min(l,Math.min(s,o)/2),f=e+s,p=t+o,g=[e+h,t,f-h,t,f,t+h,f,p-h,f-h,p,e+h,p,e,p-h,e,t+h];for(let y=g.length-1;y>=2;y-=2)g[y]===g[y-2]&&g[y-1]===g[y-3]&&g.splice(y-1,2);return this.poly(g,!0,u)}ellipse(e,t,s,o,l){return this.drawShape(new yc(e,t,s,o),l),this}roundRect(e,t,s,o,l,u){return this.drawShape(new xc(e,t,s,o,l),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new Ps,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Ps,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,o=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const l=t.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const o=t[s],l=o.shape.getBounds(Lv);o.transform?e.addRect(l,o.transform):e.addRect(l)}return e}}class Hn{constructor(e,t=!1){this.instructions=[],this.uid=Je("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?i_(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new Bv(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,o,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(At.shared);let f=0,p=0;if(!u||u.action!=="bezierCurveTo")f=h.x,p=h.y;else{f=u.data[2],p=u.data[3];const g=h.x,y=h.y;f=g+(g-f),p=y+(y-p)}return this.instructions.push({action:"bezierCurveTo",data:[f,p,e,t,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(At.shared);let u=0,h=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=o.data[0],h=o.data[1];const f=l.x,p=l.y;u=f+(f-u),h=p+(p-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,e,t,s]}),this._dirty=!0,this}rect(e,t,s,o,l){return this.instructions.push({action:"rect",data:[e,t,s,o,l]}),this._dirty=!0,this}circle(e,t,s,o){return this.instructions.push({action:"circle",data:[e,t,s,o]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,o,l,u,h){l||(l=o/2);const f=-1*Math.PI/2+u,p=s*2,g=Math.PI*2/p,y=[];for(let _=0;_<p;_++){const v=_%2?l:o,S=_*g+f;y.push(e+v*Math.cos(S),t+v*Math.sin(S))}return this.poly(y,!0,h),this}clone(e=!1){const t=new Hn;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];t.instructions.push({action:o.action,data:o.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,o=e.c,l=e.d,u=e.tx,h=e.ty;let f=0,p=0,g=0,y=0,_=0,v=0,S=0,k=0;for(let w=0;w<this.instructions.length;w++){const b=this.instructions[w],P=b.data;switch(b.action){case"moveTo":case"lineTo":f=P[0],p=P[1],P[0]=t*f+o*p+u,P[1]=s*f+l*p+h;break;case"bezierCurveTo":g=P[0],y=P[1],_=P[2],v=P[3],f=P[4],p=P[5],P[0]=t*g+o*y+u,P[1]=s*g+l*y+h,P[2]=t*_+o*v+u,P[3]=s*_+l*v+h,P[4]=t*f+o*p+u,P[5]=s*f+l*p+h;break;case"quadraticCurveTo":g=P[0],y=P[1],f=P[2],p=P[3],P[0]=t*g+o*y+u,P[1]=s*g+l*y+h,P[2]=t*f+o*p+u,P[3]=s*f+l*p+h;break;case"arcToSvg":f=P[5],p=P[6],S=P[0],k=P[1],P[0]=t*S+o*k,P[1]=s*S+l*k,P[5]=t*f+o*p+u,P[6]=s*f+l*p+h;break;case"circle":P[4]=_s(P[3],e);break;case"rect":P[4]=_s(P[4],e);break;case"ellipse":P[8]=_s(P[8],e);break;case"roundRect":P[5]=_s(P[5],e);break;case"addPath":P[0].transform(e);break;case"poly":P[2]=_s(P[2],e);break;default:Ge("unknown transform action",b.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function _s(i,e){return i?i.prepend(e):e.clone()}function Ze(i,e,t){const s=i.getAttribute(e);return s?Number(s):t}function zv(i,e){const t=i.querySelectorAll("defs");for(let s=0;s<t.length;s++){const o=t[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=Dv(u);break;case"radialgradient":e.defs[u.id]=Nv();break}}}}function Dv(i){const e=Ze(i,"x1",0),t=Ze(i,"y1",0),s=Ze(i,"x2",1),o=Ze(i,"y2",0),l=i.getAttribute("gradientUnits")||"objectBoundingBox",u=new Vn(e,t,s,o,l==="objectBoundingBox"?"local":"global");for(let h=0;h<i.children.length;h++){const f=i.children[h],p=Ze(f,"offset",0),g=ct.shared.setValue(f.getAttribute("stop-color")).toNumber();u.addColorStop(p,g)}return u}function Nv(i){return Ge("[SVG Parser] Radial gradients are not yet supported"),new Vn(0,0,1,0)}function op(i){const e=i.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const ap={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Um(i,e){const t=i.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in ap){const h=i.getAttribute(u);h&&lp(e,l,u,h.trim())}if(t){const u=t.split(";");for(let h=0;h<u.length;h++){const f=u[h].trim(),[p,g]=f.split(":");ap[p]&&lp(e,l,p,g.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function lp(i,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=op(s);e.strokeStyle.fill=i.defs[o]}else e.strokeStyle.color=ct.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=op(s);e.fillStyle.fill=i.defs[o]}else e.fillStyle.color=ct.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function Ov(i){if(i.length<=2)return!0;const e=i.map(h=>h.area).sort((h,f)=>f-h),[t,s]=e,o=e[e.length-1],l=t/s,u=s/o;return!(l>3&&u<2)}function jv(i){return i.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function $v(i){const e=i.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],o=[];for(let g=0;g<t.length;g+=2)g+1<t.length&&(s.push(t[g]),o.push(t[g+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),h=Math.min(...o),f=Math.max(...o);return(u-l)*(f-h)}function up(i,e){const t=new Hn(i,!1);for(const s of t.instructions)e.instructions.push(s)}function Gv(i,e){if(typeof i=="string"){const u=document.createElement("div");u.innerHTML=i.trim(),i=u.querySelector("svg")}const t={context:e,defs:{},path:new Hn};zv(i,t);const s=i.children,{fillStyle:o,strokeStyle:l}=Um(i,t);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&Wm(h,t,o,l)}return e}function Wm(i,e,t,s){const o=i.children,{fillStyle:l,strokeStyle:u}=Um(i,e);l&&t?t={...t,...l}:l&&(t=l),u&&s?s={...s,...u}:u&&(s=u);const h=!t&&!s;h&&(t={color:0});let f,p,g,y,_,v,S,k,w,b,P,M,R,W,N,D,ee;switch(i.nodeName.toLowerCase()){case"path":{W=i.getAttribute("d");const le=i.getAttribute("fill-rule"),Y=jv(W),J=le==="evenodd",we=Y.length>1;if(J&&we){const fe=Y.map(K=>({path:K,area:$v(K)}));if(fe.sort((K,q)=>q.area-K.area),Y.length>3||!Ov(fe))for(let K=0;K<fe.length;K++){const q=fe[K],X=K===0;e.context.beginPath();const V=new Hn(void 0,!0);up(q.path,V),e.context.path(V),X?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let K=0;K<fe.length;K++){const q=fe[K],X=K%2===1;e.context.beginPath();const V=new Hn(void 0,!0);up(q.path,V),e.context.path(V),X?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const fe=le?le==="evenodd":!0;N=new Hn(W,fe),e.context.path(N),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":S=Ze(i,"cx",0),k=Ze(i,"cy",0),w=Ze(i,"r",0),e.context.ellipse(S,k,w,w),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":f=Ze(i,"x",0),p=Ze(i,"y",0),D=Ze(i,"width",0),ee=Ze(i,"height",0),b=Ze(i,"rx",0),P=Ze(i,"ry",0),b||P?e.context.roundRect(f,p,D,ee,b||P):e.context.rect(f,p,D,ee),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":S=Ze(i,"cx",0),k=Ze(i,"cy",0),b=Ze(i,"rx",0),P=Ze(i,"ry",0),e.context.beginPath(),e.context.ellipse(S,k,b,P),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":g=Ze(i,"x1",0),y=Ze(i,"y1",0),_=Ze(i,"x2",0),v=Ze(i,"y2",0),e.context.beginPath(),e.context.moveTo(g,y),e.context.lineTo(_,v),s&&e.context.stroke(s);break;case"polygon":R=i.getAttribute("points"),M=R.match(/\d+/g).map(le=>parseInt(le,10)),e.context.poly(M,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":R=i.getAttribute("points"),M=R.match(/\d+/g).map(le=>parseInt(le,10)),e.context.poly(M,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{Ge(`[SVG parser] <${i.nodeName}> elements unsupported`);break}}h&&(t=null);for(let le=0;le<o.length;le++)Wm(o[le],e,t,s)}function Uv(i){return ct.isColorLike(i)}function cp(i){return i instanceof Aa}function hp(i){return i instanceof Vn}function Wv(i){return i instanceof Pe}function Hv(i,e,t){const s=ct.shared.setValue(e??0);return i.color=s.toNumber(),i.alpha=s.alpha===1?t.alpha:s.alpha,i.texture=Pe.WHITE,{...t,...i}}function Vv(i,e,t){return i.texture=e,{...t,...i}}function dp(i,e,t){return i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,{...t,...i}}function fp(i,e,t){return e.buildGradient(),i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,i.textureSpace=e.textureSpace,{...t,...i}}function Yv(i,e){const t={...e,...i},s=ct.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function jr(i,e){if(i==null)return null;const t={},s=i;return Uv(i)?Hv(t,i,e):Wv(i)?Vv(t,i,e):cp(i)?dp(t,i,e):hp(i)?fp(t,i,e):s.fill&&cp(s.fill)?dp(s,s.fill,e):s.fill&&hp(s.fill)?fp(s,s.fill,e):Yv(s,e)}function wa(i,e){const{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...f}=e,p=jr(i,f);return p?{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...p}:null}const Xv=new At,pp=new be,vc=class En extends wn{constructor(){super(...arguments),this.uid=Je("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Hn,this._transform=new be,this._fillStyle={...En.defaultFillStyle},this._strokeStyle={...En.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new vn,this._boundsDirty=!0}clone(){const e=new En;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=jr(e,En.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=wa(e,En.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=jr(e,En.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=jr(e,En.defaultStrokeStyle),this}texture(e,t,s,o,l,u){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:o||0,dw:l||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?ct.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Hn,this}fill(e,t){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&(o==null?void 0:o.action)==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(ke(ze,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=jr(e,En.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(At.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&(s==null?void 0:s.action)==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=wa(e,En.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,o,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,s,o,l,u),this}arcTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(e,t,s,o,l,u,h){this._tick++;const f=this._transform;return this._activePath.arcToSvg(e,t,s,o,l,f.a*u+f.c*h+f.tx,f.b*u+f.d*h+f.ty),this}bezierCurveTo(e,t,s,o,l,u,h){this._tick++;const f=this._transform;return this._activePath.bezierCurveTo(f.a*e+f.c*t+f.tx,f.b*e+f.d*t+f.ty,f.a*s+f.c*o+f.tx,f.b*s+f.d*o+f.ty,f.a*l+f.c*u+f.tx,f.b*l+f.d*u+f.ty,h),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,s,o){return this._tick++,this._activePath.ellipse(e,t,s,o,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*e+s.c*t+s.tx,u=s.b*e+s.d*t+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(e,t,s,o){return this._tick++,this._activePath.rect(e,t,s,o,this._transform.clone()),this}roundRect(e,t,s,o,l){return this._tick++,this._activePath.roundRect(e,t,s,o,l,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(e,t,s,o,l,u),this}roundPoly(e,t,s,o,l,u){return this._tick++,this._activePath.roundPoly(e,t,s,o,l,u),this}roundShape(e,t,s,o){return this._tick++,this._activePath.roundShape(e,t,s,o),this}filletRect(e,t,s,o,l){return this._tick++,this._activePath.filletRect(e,t,s,o,l),this}chamferRect(e,t,s,o,l,u){return this._tick++,this._activePath.chamferRect(e,t,s,o,l,u),this}star(e,t,s,o,l=0,u=0){return this._tick++,this._activePath.star(e,t,s,o,l,u,this._transform.clone()),this}svg(e){return this._tick++,Gv(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,o,l,u){return e instanceof be?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,o,l,u),this)}transform(e,t,s,o,l,u){return e instanceof be?(this._transform.append(e),this):(pp.set(e,t,s,o,l,u),this._transform.append(pp),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],o=s.action;if(o==="fill"){const l=s.data;e.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;e.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,h=l.style.width*(1-u),f=l.path.bounds;e.addFrame(f.minX-h,f.minY-h,f.maxX+h,f.maxY+h)}}return e}containsPoint(e){var o;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let l=0;l<t.length;l++){const u=t[l],h=u.data,f=h.path;if(!u.action||!f)continue;const p=h.style,g=f.shapePath.shapePrimitives;for(let y=0;y<g.length;y++){const _=g[y].shape;if(!p||!_)continue;const v=g[y].transform,S=v?v.applyInverse(e,Xv):e;if(u.action==="fill")s=_.contains(S.x,S.y);else{const w=p;s=_.strokeContains(S.x,S.y,w.width,w.alignment)}const k=h.hole;if(k){const w=(o=k.shapePath)==null?void 0:o.shapePrimitives;if(w)for(let b=0;b<w.length;b++)w[b].shape.contains(S.x,S.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};vc.defaultFillStyle={color:16777215,alpha:1,texture:Pe.WHITE,matrix:null,fill:null,textureSpace:"local"};vc.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Pe.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let on=vc;const wc=class vi extends wn{constructor(e={}){super(),this.uid=Je("textStyle"),this._tick=0,qv(e);const t={...vi.defaultTextStyle,...e};for(const s in t){const o=s;this[o]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...vi.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...vi.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...on.defaultFillStyle,...e},()=>{this._fill=jr({...this._originalFill},on.defaultFillStyle)})),this._fill=jr(e===0?"black":e,on.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...on.defaultStrokeStyle,...e},()=>{this._stroke=wa({...this._originalStroke},on.defaultStrokeStyle)})),this._stroke=wa(e,on.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=vi.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new vi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){var s,o,l,u;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const h=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(h),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(h),(l=this._stroke)!=null&&l.texture&&this._stroke.texture.destroy(h),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(h)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,o,l)=>(s[o]===l||(s[o]=l,t==null||t(o,l),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(ct.isColorLike(e)||e instanceof Vn||e instanceof Aa)}};wc.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};wc.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Sa=wc;function qv(i){const e=i;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=Sa.defaultDropShadow;i.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){ke(ze,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(ct.isColorLike(t))s.color=t;else if(t instanceof Vn||t instanceof Aa)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");i.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(ke(ze,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Ge("The number of fill colors must match the number of fill gradient stops.");const t=new Vn({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),o=e.fill.map(l=>ct.shared.setValue(l).toNumber());s.forEach((l,u)=>{t.addColorStop(l,o[u])}),i.fill={fill:t}}}class Kv{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=Ue.get().createCanvas();s.width=e,s.height=t;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=ya(e),t=ya(t);const o=(e<<17)+(t<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(e,t)),l}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:o}=t,l=(s<<17)+(o<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,o),this._canvasPool[l].push(e)}clear(){this._canvasPool={}}}const ac=new Kv;Ds.register(ac);const mp=1e5;function gp(i,e,t,s=0){if(i.texture===Pe.WHITE&&!i.fill)return ct.shared.setValue(i.color).setAlpha(i.alpha??1).toHexa();if(i.fill){if(i.fill instanceof Aa){const o=i.fill,l=e.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(be.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(i.fill instanceof Vn){const o=i.fill,l=o.type==="linear",u=o.textureSpace==="local";let h=1,f=1;u&&t&&(h=t.width+s,f=t.height+s);let p,g=!1;if(l){const{start:y,end:_}=o;p=e.createLinearGradient(y.x*h,y.y*f,_.x*h,_.y*f),g=Math.abs(_.x-y.x)<Math.abs((_.y-y.y)*.1)}else{const{center:y,innerRadius:_,outerCenter:v,outerRadius:S}=o;p=e.createRadialGradient(y.x*h,y.y*f,_*h,v.x*h,v.y*f,S*h)}if(g&&u&&t){const y=t.lineHeight/f;for(let _=0;_<t.lines.length;_++){const v=(_*t.lineHeight+s/2)/f;o.colorStops.forEach(S=>{const k=v+S.offset*y;p.addColorStop(Math.floor(k*mp)/mp,ct.shared.setValue(S.color).toHex())})}}else o.colorStops.forEach(y=>{p.addColorStop(y.offset,ct.shared.setValue(y.color).toHex())});return p}}else{const o=e.createPattern(i.texture.source.resource,"repeat"),l=i.matrix.copyTo(be.shared);return l.scale(i.texture.frame.width,i.texture.frame.height),o.setTransform(l),o}return Ge("FillStyle not recognised",i),"red"}const Hm=class Vm extends bm{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...Vm.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Pe.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=nc(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof xa?t.textureStyle:new xa(t.textureStyle)),this.fontMetrics=fa.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){var w,b;const t=fa.graphemeSegmenter(e).filter(P=>!this._currentChars.includes(P)).filter((P,M,R)=>R.indexOf(P)===M);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const h=this._style;let f=this._currentX,p=this._currentY,g=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,_=this._padding*y;let v=!1;const S=o.width/this.resolution,k=o.height/this.resolution;for(let P=0;P<t.length;P++){const M=t[P],R=fa.measureText(M,h,o,!1);R.lineHeight=R.height;const W=R.width*y,N=Math.ceil((h.fontStyle==="italic"?2:1)*W),D=R.height*y,ee=N+_*2,le=D+_*2;if(v=!1,M!==`
`&&M!=="\r"&&M!=="	"&&M!==" "&&(v=!0,g=Math.ceil(Math.max(le,g))),f+ee>S&&(p+=g,g=le,f=0,p+g>k)){u.update();const J=this._nextPage();o=J.canvasAndContext.canvas,l=J.canvasAndContext.context,u=J.texture.source,f=0,p=0,g=0}const Y=W/y-(((w=h.dropShadow)==null?void 0:w.distance)??0)-(((b=h._stroke)==null?void 0:b.width)??0);if(this.chars[M]={id:M.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:Y,kerning:{}},v){this._drawGlyph(l,R,f+_,p+_,y,h);const J=u.width*y,we=u.height*y,Se=new st(f/J*u.width,p/we*u.height,ee/J*u.width,le/we*u.height);this.chars[M].texture=new Pe({source:u,frame:Se}),f+=Math.ceil(ee)}}u.update(),this._currentX=f,this._currentY=p,this._currentMaxCharHeight=g,this._skipKerning&&this._applyKerning(t,l)}get pageTextures(){return ke(ze,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let o=0;o<e.length;o++){const l=e[o];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let f=s[l];f||(f=s[l]=t.measureText(l).width);let p=s[h];p||(p=s[h]=t.measureText(h).width);let g=t.measureText(l+h).width,y=g-(f+p);y&&(this.chars[l].kerning[h]=y),g=t.measureText(l+h).width,y=g-(f+p),y&&(this.chars[h].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=ac.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Pe({source:new $r({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:t,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=nc(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const o=t._stroke,l=(o==null?void 0:o.width)??0;if(o&&(e.lineWidth=l,e.lineJoin=o.join,e.miterLimit=o.miterLimit,e.strokeStyle=gp(o,e)),t._fill&&(e.fillStyle=gp(t._fill,e)),t.dropShadow){const u=t.dropShadow,h=ct.shared.setValue(u.color).toArray(),f=u.blur*s,p=u.distance*s;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,e.shadowBlur=f,e.shadowOffsetX=Math.cos(u.angle)*p,e.shadowOffsetY=Math.sin(u.angle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,o,l,u){const h=t.text,f=t.fontProperties,p=u._stroke,g=((p==null?void 0:p.width)??0)*l,y=s+g/2,_=o-g/2,v=f.descent*l,S=t.lineHeight*l;let k=!1;u.stroke&&g&&(k=!0,e.strokeText(h,y,_+S-v));const{shadowBlur:w,shadowOffsetX:b,shadowOffsetY:P}=e;u._fill&&(k&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(h,y,_+S-v)),k&&(e.shadowBlur=w,e.shadowOffsetX=b,e.shadowOffsetY=P)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];ac.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};Hm.defaultOptions={textureSize:512,style:new Sa,mipmap:!0};let yp=Hm;function Qv(i,e,t,s){const o={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=t.baseLineOffset;let l=o.lines[0],u=null,h=!0;const f={width:0,start:0,index:0,positions:[],chars:[]},p=t.baseMeasurementFontSize/e.fontSize,g=e.letterSpacing*p,y=e.wordWrapWidth*p,_=e.lineHeight?e.lineHeight*p:t.lineHeight,v=e.wordWrap&&e.breakWords,S=b=>{const P=l.width;for(let M=0;M<f.index;M++){const R=b.positions[M];l.chars.push(b.chars[M]),l.charPositions.push(R+P)}l.width+=b.width,h=!1,f.width=0,f.index=0,f.chars.length=0},k=()=>{let b=l.chars.length-1;if(s){let P=l.chars[b];for(;P===" ";)l.width-=t.chars[P].xAdvance,P=l.chars[--b]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,o.lines.push(l),o.height+=_},w=b=>b-g>y;for(let b=0;b<i.length+1;b++){let P;const M=b===i.length;M||(P=i[b]);const R=t.chars[P]||t.chars[" "];if(/(?:\s)/.test(P)||P==="\r"||P===`
`||M){if(!h&&e.wordWrap&&w(l.width+f.width)?(k(),S(f),M||l.charPositions.push(0)):(f.start=l.width,S(f),M||l.charPositions.push(0)),P==="\r"||P===`
`)k();else if(!M){const ee=R.xAdvance+(R.kerning[u]||0)+g;l.width+=ee,l.spaceWidth=ee,l.spacesIndex.push(l.charPositions.length),l.chars.push(P)}}else{const D=R.kerning[u]||0,ee=R.xAdvance+D+g;v&&w(l.width+f.width+ee)&&(S(f),k()),f.positions[f.index++]=f.width+D,f.chars.push(P),f.width+=ee}u=P}return k(),e.align==="center"?Zv(o):e.align==="right"?Jv(o):e.align==="justify"&&e1(o),o}function Zv(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width/2-t.width/2;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function Jv(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width-t.width;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function e1(i){const e=i.width;for(let t=0;t<i.lines.length;t++){const s=i.lines[t];let o=0,l=s.spacesIndex[o++],u=0;const h=s.spacesIndex.length,p=(e-s.width)/h;for(let g=0;g<s.charPositions.length;g++)g===l&&(l=s.spacesIndex[o++],u+=p),s.charPositions[g]+=u}}function t1(i){if(i==="")return[];typeof i=="string"&&(i=[i]);const e=[];for(let t=0,s=i.length;t<s;t++){const o=i[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let h=l,f=u;h<=f;h++)e.push(String.fromCharCode(h))}else e.push(...Array.from(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let ca=0;class n1{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=Pm(1e3)}getFont(e,t){var u;let s=`${t.fontFamily}-bitmap`,o=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,o=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,o=!1),!$e.has(s)){const h=Object.create(t);h.lineHeight=0;const f=new yp({style:h,overrideFill:o,overrideSize:!0,...this.defaultOptions});ca++,ca>50&&Ge("BitmapText",`You have dynamically created ${ca} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),f.once("destroy",()=>{ca--,$e.remove(s)}),$e.set(s,f)}const l=$e.get(s);return(u=l.ensureCharacters)==null||u.call(l,e),l}getLayout(e,t,s=!0){const o=this.getFont(e,t),l=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=fa.graphemeSegmenter(e),h=Qv(u,t,o,s);return this.measureCache.set(l,h),h}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){var p,g,y,_;let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:(p=e[2])==null?void 0:p.chars,resolution:(g=e[2])==null?void 0:g.resolution,padding:(y=e[2])==null?void 0:y.padding,skipKerning:(_=e[2])==null?void 0:_.skipKerning},ke(ze,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t==null?void 0:t.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const o=t.style,l=o instanceof Sa?o:new Sa(o),u=t.dynamicFill??this._canUseTintForStyle(l),h=new yp({style:l,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),f=t1(t.chars);return h.ensureCharacters(f.join("")),$e.set(`${s}-bitmap`,h),h.once("destroy",()=>$e.remove(`${s}-bitmap`)),h}uninstall(e){const t=`${e}-bitmap`,s=$e.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const xp=new n1;class Ym extends bm{constructor(e,t){super();const{textures:s,data:o}=e;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:h,source:f,rotate:p}=s[u.page],g=Be.transformRectCoords(u,h,p,new st),y=new Pe({frame:g,orig:new st(0,0,u.width,u.height),source:f,rotate:p});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){xp.install(e)}static uninstall(e){xp.uninstall(e)}}const Bu={test(i){return typeof i=="string"&&i.startsWith("info face=")},parse(i){const e=i.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in e){const _=e[y].match(/^[a-z]+/gm)[0],v=e[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),S={};for(const k in v){const w=v[k].split("="),b=w[0],P=w[1].replace(/"/gm,""),M=parseFloat(P),R=isNaN(M)?P:M;S[b]=R}t[_].push(S)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=t.info,[l]=t.common,[u]=t.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const h=t.page;for(let y=0;y<h.length;y++)s.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const f={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const p=t.char;for(let y=0;y<p.length;y++){const _=p[y],v=parseInt(_.id,10);let S=_.letter??_.char??String.fromCharCode(v);S==="space"&&(S=" "),f[v]=S,s.chars[S]={id:v,page:parseInt(_.page,10)||0,x:parseInt(_.x,10),y:parseInt(_.y,10),width:parseInt(_.width,10),height:parseInt(_.height,10),xOffset:parseInt(_.xoffset,10),yOffset:parseInt(_.yoffset,10),xAdvance:parseInt(_.xadvance,10),kerning:{}}}const g=t.kerning||[];for(let y=0;y<g.length;y++){const _=parseInt(g[y].first,10),v=parseInt(g[y].second,10),S=parseInt(g[y].amount,10);s.chars[f[v]].kerning[f[_]]=S}return s}},_p={test(i){const e=i;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(i){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=i.getElementsByTagName("info")[0],s=i.getElementsByTagName("common")[0],o=i.getElementsByTagName("distanceField")[0];o&&(e.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=i.getElementsByTagName("page"),u=i.getElementsByTagName("char"),h=i.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let p=0;p<l.length;p++)e.pages.push({id:parseInt(l[p].getAttribute("id"),10)||0,file:l[p].getAttribute("file")});const f={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let p=0;p<u.length;p++){const g=u[p],y=parseInt(g.getAttribute("id"),10);let _=g.getAttribute("letter")??g.getAttribute("char")??String.fromCharCode(y);_==="space"&&(_=" "),f[y]=_,e.chars[_]={id:y,page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xOffset:parseInt(g.getAttribute("xoffset"),10),yOffset:parseInt(g.getAttribute("yoffset"),10),xAdvance:parseInt(g.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<h.length;p++){const g=parseInt(h[p].getAttribute("first"),10),y=parseInt(h[p].getAttribute("second"),10),_=parseInt(h[p].getAttribute("amount"),10);e.chars[f[y]].kerning[f[g]]=_}return e}},vp={test(i){return typeof i=="string"&&i.match(/<font(\s|>)/)?_p.test(Ue.get().parseXML(i)):!1},parse(i){return _p.parse(Ue.get().parseXML(i))}},r1=[".xml",".fnt"],i1={extension:{type:ce.CacheParser,name:"cacheBitmapFont"},test:i=>i instanceof Ym,getCacheableAssets(i,e){const t={};return i.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},s1={extension:{type:ce.LoadParser,priority:xr.Normal},name:"loadBitmapFont",id:"bitmap-font",test(i){return r1.includes(Yt.extname(i).toLowerCase())},async testParse(i){return Bu.test(i)||vp.test(i)},async parse(i,e,t){const s=Bu.test(i)?Bu.parse(i):vp.parse(i),{src:o}=e,{pages:l}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const _=l[y].file;let v=Yt.join(Yt.dirname(o),_);v=qu(v,o),u.push({src:v,data:h})}const f=await t.load(u),p=u.map(y=>f[y.src]);return new Ym({data:s,textures:p},o)},async load(i,e){return await(await Ue.get().fetch(i)).text()},async unload(i,e,t){await Promise.all(i.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),i.destroy()}};class o1{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const a1={extension:{type:ce.CacheParser,name:"cacheTextureArray"},test:i=>Array.isArray(i)&&i.every(e=>e instanceof Pe),getCacheableAssets:(i,e)=>{const t={};return i.forEach(s=>{e.forEach((o,l)=>{t[s+(l===0?"":l+1)]=o})}),t}};async function Xm(i){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(i)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const l1={extension:{type:ce.DetectionParser,priority:1},test:async()=>Xm("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(e=>e!=="avif")},wp=["png","jpg","jpeg"],u1={extension:{type:ce.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...wp],remove:async i=>i.filter(e=>!wp.includes(e))},c1="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Pa(i){return c1?!1:document.createElement("video").canPlayType(i)!==""}const h1={extension:{type:ce.DetectionParser,priority:0},test:async()=>Pa("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(e=>e!=="mp4"&&e!=="m4v")},d1={extension:{type:ce.DetectionParser,priority:0},test:async()=>Pa("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(e=>e!=="ogv")},f1={extension:{type:ce.DetectionParser,priority:0},test:async()=>Pa("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(e=>e!=="webm")},p1={extension:{type:ce.DetectionParser,priority:0},test:async()=>Xm("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(e=>e!=="webp")},qm=class pa{constructor(){this.loadOptions={...pa.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{var u,h;let o=null,l=null;if((t.parser||t.loadParser)&&(l=this._parserHash[t.parser||t.loadParser],t.loadParser&&Ge(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),l||Ge(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!l){for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];if(p.load&&((u=p.test)!=null&&u.call(p,e,t,this))){l=p;break}}if(!l)return Ge(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(e,t,this),s.parser=l;for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];p.parse&&p.parse&&await((h=p.testParse)==null?void 0:h.call(p,o,t,this))&&(o=await p.parse(o,t,this)||o,s.parser=p)}return o})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...pa.defaultOptions,...this.loadOptions,onProgress:t}:{...pa.defaultOptions,...this.loadOptions,...t||{}},{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:f}=s;let p=0;const g={},y=_a(e),_=xn(e,k=>({alias:[k],src:k,data:{}})),v=_.reduce((k,w)=>k+(w.progressSize||1),0),S=_.map(async k=>{const w=Yt.toAbsolute(k.src);g[k.src]||(await this._loadAssetWithRetry(w,k,{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:f},g),p+=k.progressSize||1,o&&o(p/v))});return await Promise.all(S),y?g[_[0].src]:g}async unload(e){const s=xn(e,o=>({alias:[o],src:o})).map(async o=>{var h,f;const l=Yt.toAbsolute(o.src),u=this.promiseCache[l];if(u){const p=await u.promise;delete this.promiseCache[l],await((f=(h=u.parser)==null?void 0:h.unload)==null?void 0:f.call(h,p,o,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?Ge("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&Ge(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,o){let l=0;const{onError:u,strategy:h,retryCount:f,retryDelay:p}=s,g=y=>new Promise(_=>setTimeout(_,y));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),o[t.src]=await this.promiseCache[e].promise;return}catch(y){delete this.promiseCache[e],delete o[t.src],l++;const _=h!=="retry"||l>f;if(h==="retry"&&!_){u&&u(y,t),await g(p);continue}if(h==="skip"){u&&u(y,t);return}throw u&&u(y,t),new Error(`[Loader.load] Failed to load ${e}.
${y}`)}}};qm.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let m1=qm;function Mi(i,e){if(Array.isArray(e)){for(const t of e)if(i.startsWith(`data:${t}`))return!0;return!1}return i.startsWith(`data:${e}`)}function Ei(i,e){const t=i.split("?")[0],s=Yt.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const g1=".json",y1="application/json",x1={extension:{type:ce.LoadParser,priority:xr.Low},name:"loadJson",id:"json",test(i){return Mi(i,y1)||Ei(i,g1)},async load(i){return await(await Ue.get().fetch(i)).json()}},_1=".txt",v1="text/plain",w1={name:"loadTxt",id:"text",extension:{type:ce.LoadParser,priority:xr.Low,name:"loadTxt"},test(i){return Mi(i,v1)||Ei(i,_1)},async load(i){return await(await Ue.get().fetch(i)).text()}},S1=["normal","bold","100","200","300","400","500","600","700","800","900"],C1=[".ttf",".otf",".woff",".woff2"],k1=["font/ttf","font/otf","font/woff","font/woff2"],A1=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function b1(i){const e=Yt.extname(i),o=Yt.basename(i,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let l=o.length>0;for(const h of o)if(!h.match(A1)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const P1=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function T1(i){return P1.test(i)?i:encodeURI(i)}const M1={extension:{type:ce.LoadParser,priority:xr.Low},name:"loadWebFont",id:"web-font",test(i){return Mi(i,k1)||Ei(i,C1)},async load(i,e){var s,o,l;const t=Ue.get().getFontFaceSet();if(t){const u=[],h=((s=e.data)==null?void 0:s.family)??b1(i),f=((l=(o=e.data)==null?void 0:o.weights)==null?void 0:l.filter(g=>S1.includes(g)))??["normal"],p=e.data??{};for(let g=0;g<f.length;g++){const y=f[g],_=new FontFace(h,`url(${T1(i)})`,{...p,weight:y});await _.load(),t.add(_),u.push(_)}return $e.has(`${h}-and-url`)?$e.get(`${h}-and-url`).entries.push({url:i,faces:u}):$e.set(`${h}-and-url`,{entries:[{url:i,faces:u}]}),u.length===1?u[0]:u}return Ge("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){const e=Array.isArray(i)?i:[i],t=e[0].family,s=$e.get(`${t}-and-url`),o=s.entries.find(l=>l.faces.some(u=>e.indexOf(u)!==-1));o.faces=o.faces.filter(l=>e.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),e.forEach(l=>{Ue.get().getFontFaceSet().delete(l)}),s.entries.length===0&&$e.remove(`${t}-and-url`)}};function Sc(i,e=1){var s;const t=(s=Ti.RETINA_PREFIX)==null?void 0:s.exec(i);return t?parseFloat(t[1]):e}function Cc(i,e,t){i.label=t,i._sourceOrigin=t;const s=new Pe({source:i,label:t}),o=()=>{delete e.promiseCache[t],$e.has(t)&&$e.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(Ge("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{i.destroyed||(Ge("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const E1=".svg",R1="image/svg+xml",I1={extension:{type:ce.LoadParser,priority:xr.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(i){return Mi(i,R1)||Ei(i,E1)},async load(i,e,t){var s;return((s=e.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?L1(i):F1(i,e,t,this.config.crossOrigin)},unload(i){i.destroy(!0)}};async function F1(i,e,t,s){var w,b,P;const o=await Ue.get().fetch(i),l=Ue.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=((w=e.data)==null?void 0:w.width)??l.width,h=((b=e.data)==null?void 0:b.height)??l.height,f=((P=e.data)==null?void 0:P.resolution)||Sc(i),p=Math.ceil(u*f),g=Math.ceil(h*f),y=Ue.get().createCanvas(p,g),_=y.getContext("2d");_.imageSmoothingEnabled=!0,_.imageSmoothingQuality="high",_.drawImage(l,0,0,u*f,h*f);const{parseAsGraphicsContext:v,...S}=e.data??{},k=new $r({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:f,...S});return Cc(k,t,i)}async function L1(i){const t=await(await Ue.get().fetch(i)).text(),s=new on;return s.svg(t),s}const B1=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Ci=null,lc=class{constructor(){Ci||(Ci=URL.createObjectURL(new Blob([B1],{type:"application/javascript"}))),this.worker=new Worker(Ci)}};lc.revokeObjectURL=function(){Ci&&(URL.revokeObjectURL(Ci),Ci=null)};const z1=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let ki=null;class Km{constructor(){ki||(ki=URL.createObjectURL(new Blob([z1],{type:"application/javascript"}))),this.worker=new Worker(ki)}}Km.revokeObjectURL=function(){ki&&(URL.revokeObjectURL(ki),ki=null)};let Sp=0,zu;class D1{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new lc;t.addEventListener("message",s=>{t.terminate(),lc.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){var s;return this._run("loadImageBitmap",[e,(s=t==null?void 0:t.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){zu===void 0&&(zu=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<zu&&(this._createdWorkers++,e=new Km().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:e,arguments:t,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[Sp]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Sp++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const Cp=new D1,N1=[".jpeg",".jpg",".png",".webp",".avif"],O1=["image/jpeg","image/png","image/webp","image/avif"];async function j1(i,e){var o;const t=await Ue.get().fetch(i);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${t.status} ${t.statusText}`);const s=await t.blob();return((o=e==null?void 0:e.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const Qm={name:"loadTextures",id:"texture",extension:{type:ce.LoadParser,priority:xr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return Mi(i,O1)||Ei(i,N1)},async load(i,e,t){var l;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Cp.isImageBitmapSupported()?s=await Cp.loadImageBitmap(i,e):s=await j1(i,e):s=await new Promise((u,h)=>{s=Ue.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=i,s.complete?u(s):(s.onload=()=>{u(s)},s.onerror=h)});const o=new $r({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((l=e.data)==null?void 0:l.resolution)||Sc(i),...e.data});return Cc(o,t,i)},unload(i){i.destroy(!0)}},$1=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let Du,Nu;function G1(i,e,t){t===void 0&&!e.startsWith("data:")?i.crossOrigin=W1(e):t!==!1&&(i.crossOrigin=typeof t=="string"?t:"anonymous")}function U1(i){return new Promise((e,t)=>{i.addEventListener("canplaythrough",s),i.addEventListener("error",o),i.load();function s(){l(),e()}function o(u){l(),t(u)}function l(){i.removeEventListener("canplaythrough",s),i.removeEventListener("error",o)}})}function W1(i,e=globalThis.location){if(i.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(i,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function H1(){const i=[],e=[];for(const t of $1){const s=bs.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;Pa(s)&&(i.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:i,validVideoMime:e}}const V1={name:"loadVideo",id:"video",extension:{type:ce.LoadParser,name:"loadVideo"},test(i){if(!Du||!Nu){const{validVideoExtensions:s,validVideoMime:o}=H1();Du=s,Nu=o}const e=Mi(i,Nu),t=Ei(i,Du);return e||t},async load(i,e,t){var f,p;const s={...bs.defaultOptions,resolution:((f=e.data)==null?void 0:f.resolution)||Sc(i),alphaMode:((p=e.data)==null?void 0:p.alphaMode)||await tm(),...e.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(g=>{const y=l[g];y!==void 0&&o.setAttribute(g,y)}),s.muted===!0&&(o.muted=!0),G1(o,i,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(i.startsWith("data:"))h=i.slice(5,i.indexOf(";"));else if(!i.startsWith("blob:")){const g=i.split("?")[0].slice(i.lastIndexOf(".")+1).toLowerCase();h=bs.MIME_TYPES[g]||`video/${g}`}return u.src=i,h&&(u.type=h),new Promise(g=>{const y=async()=>{const _=new bs({...s,resource:o});o.removeEventListener("canplay",y),e.data.preload&&await U1(o),g(Cc(_,t,i))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",y),o.appendChild(u)})},unload(i){i.destroy(!0)}},Zm={extension:{type:ce.ResolveParser,name:"resolveTexture"},test:Qm.test,parse:i=>{var e;return{resolution:parseFloat(((e=Ti.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:i.split(".").pop(),src:i}}},Y1={extension:{type:ce.ResolveParser,priority:-2,name:"resolveJson"},test:i=>Ti.RETINA_PREFIX.test(i)&&i.endsWith(".json"),parse:Zm.parse};class X1{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ti,this.loader=new m1,this.cache=$e,this._backgroundLoader=new o1(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var l,u;if(this._initialized){Ge("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let h=e.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}const t=((l=e.texturePreference)==null?void 0:l.resolution)??1,s=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:(u=e.texturePreference)==null?void 0:u.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=_a(e),o=xn(e).map(h=>{if(typeof h!="string"){const f=this.resolver.getAlias(h);return f.some(p=>!this.resolver.hasKey(p))&&this.add(h),Array.isArray(f)?f[0]:f}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,t);return s?u[o[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const o=this.resolver.resolveBundle(e),l={},u=Object.keys(o);let h=0;const f=[],p=()=>{t==null||t(f.reduce((y,_)=>y+_,0)/h)},g=u.map((y,_)=>{const v=o[y],S=Object.values(v),w=[...new Set(S.flat())].reduce((b,P)=>b+(P.progressSize||1),0);return f.push(0),h+=w,this._mapLoadToResolve(v,b=>{f[_]=b*w,p()}).then(b=>{l[y]=b})});return await Promise.all(g),s?l[e[0]]:l}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return $e.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=$e.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,t);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const h=o[u.src],f=[u.src];u.alias&&f.push(...u.alias),f.forEach(p=>{l[p]=h}),$e.set(f,h)}),l}async unload(e){this._initialized||await this.init();const t=xn(e).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=xn(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{$e.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,o)=>t.indexOf(s)===o),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const ks=new X1;_t.handleByList(ce.LoadParser,ks.loader.parsers).handleByList(ce.ResolveParser,ks.resolver.parsers).handleByList(ce.CacheParser,ks.cache.parsers).handleByList(ce.DetectionParser,ks.detections);_t.add(a1,u1,l1,p1,h1,d1,f1,x1,w1,M1,I1,Qm,V1,s1,i1,Zm,Y1);const kp={loader:ce.LoadParser,resolver:ce.ResolveParser,cache:ce.CacheParser,detection:ce.DetectionParser};_t.handle(ce.Asset,i=>{const e=i.ref;Object.entries(kp).filter(([t])=>!!e[t]).forEach(([t,s])=>_t.add(Object.assign(e[t],{extension:e[t].extension??s})))},i=>{const e=i.ref;Object.keys(kp).filter(t=>!!e[t]).forEach(t=>_t.remove(e[t]))});class Bs extends Vp{constructor(e){e instanceof on&&(e={context:e});const{context:t,roundPixels:s,...o}=e||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new on,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Bs(this._context.clone()):(this._ownedContext=null,new Bs(this._context))}lineStyle(e,t,s){ke(ze,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return e&&(o.width=e),t&&(o.color=t),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(e,t){ke(ze,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){ke(ze,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==on.defaultStrokeStyle.width||e.color!==on.defaultStrokeStyle.color||e.alpha!==on.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return ke(ze,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return ke(ze,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return ke(ze,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return ke(ze,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return ke(ze,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return ke(ze,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}_t.add(ox,ax);const Un={nom:{nomcomplet:"Test Hero"},niveauGlobal:1,classe:{1:{classeId:"fighter"}},pvActuels:12,pvMax:12,CA:16,caracs:{force:{FOR:16},dexterite:{DEX:14},constitution:{CON:14}}},Ap="/assets/gentil-D3kZSH5T.svg",bp="/assets/mechant-ks3vjuPe.svg",q1=["./melee-strike.json","./dash.json","./second-wind.json","./throw-dagger.json"],Pp={actions:q1},K1="melee-strike",Q1="Frappe basique",Z1="Attaque de melee simple contre une cible a 1 case.",J1="attack",ew={actionType:"action",movementCost:0},tw={target:"enemy",range:{min:0,max:1,shape:"single"},maxTargets:1,requiresLos:!0},nw={perTurn:1,perEncounter:null,resource:null},rw=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_max",target:"primary",max:1,reason:"Portee de melee uniquement."},{type:"target_alive",target:"primary",reason:"La cible doit avoir des PV restants."}],iw={bonus:5,critRange:20},sw={formula:"1d6+3",critRule:"double-dice",damageType:"slashing"},ow=[{type:"damage",target:"primary",formula:"1d6 + modFOR",damageType:"slashing"},{type:"log",message:"Frappe basique inflige 1d6+FOR a la cible."}],aw={priority:"finish_low_hp_target",successLog:"Attaque de melee effectuee.",failureLog:"Cible hors portee ou deja a terre."},lw=["martial","arme","starter"],uw={id:K1,name:Q1,summary:Z1,category:J1,actionCost:ew,targeting:tw,usage:nw,conditions:rw,attack:iw,damage:sw,effects:ow,aiHints:aw,tags:lw},cw="dash",hw="Course",dw="Transforme l'action en 3 cases de mouvement en plus.",fw="movement",pw={actionType:"action",movementCost:0},mw={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},gw={perTurn:1,perEncounter:null,resource:null},yw=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."}],xw=[{type:"modify_path_limit",target:"self",delta:3,duration:"this_turn"},{type:"log",message:"Course: +3 cases de mouvement pour ce tour."}],_w={priority:"close_gap",successLog:"Course utilisee pour approcher.",failureLog:"Deja a portee, course ignoree."},vw=["mobilite","deplacement"],ww={id:cw,name:hw,summary:dw,category:fw,actionCost:pw,targeting:mw,usage:gw,conditions:yw,effects:xw,aiHints:_w,tags:vw},Sw="second-wind",Cw="Second souffle",kw="Restaure une partie des PV en bonus action.",Aw="support",bw={actionType:"bonus",movementCost:0},Pw={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},Tw={perTurn:null,perEncounter:1,resource:null},Mw=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"stat_below_percent",who:"self",stat:"hp",percentMax:.75,reason:"Economiser tant que les PV sont hauts."}],Ew=[{type:"heal",target:"self",formula:"1d10 + niveau",min:1},{type:"temp_hp",target:"self",amount:2,duration:"end_of_turn"},{type:"log",message:"Second souffle: soigne 1d10 + niveau."}],Rw={priority:"survive",successLog:"Second souffle declenche.",failureLog:"PV trop hauts ou tour non joueur."},Iw=["soin","defense","survie"],Fw={id:Sw,name:Cw,summary:kw,category:Aw,actionCost:bw,targeting:Pw,usage:Tw,conditions:Mw,effects:Ew,aiHints:Rw,tags:Iw},Lw="throw-dagger",Bw="Lancer de dague",zw="Attaque a distance courte avec une dague a lancer.",Dw="attack",Nw={actionType:"action",movementCost:0},Ow={target:"enemy",range:{min:1,max:4,shape:"single"},maxTargets:1,requiresLos:!0},jw={perTurn:1,perEncounter:null,resource:{name:"dagger",pool:"bandolier",min:1}},$w=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_between",target:"primary",min:1,max:4,reason:"Hors de melee mais a portee de lancer."},{type:"resource_at_least",resource:"dagger",pool:"bandolier",value:1,reason:"Besoin d'une dague a lancer."}],Gw={bonus:4,critRange:20},Uw={formula:"1d4+2",critRule:"double-dice",damageType:"piercing"},Ww=[{type:"damage",target:"primary",formula:"1d4 + modDEX",damageType:"piercing"},{type:"resource_spend",resource:"dagger",pool:"bandolier",amount:1},{type:"log",message:"Dague lancee: 1d4+DEX degats perforants."}],Hw={priority:"poke_from_range",successLog:"Dague lancee.",failureLog:"Pas de dague ou cible hors portee."},Vw=["distance","arme","jet"],Yw={id:Lw,name:Bw,summary:zw,category:Dw,actionCost:Nw,targeting:Ow,usage:jw,conditions:$w,attack:Gw,damage:Uw,effects:Ww,aiHints:Hw,tags:Vw},gr=12,mr=8,Ot=64,ma=gr*Ot,Ou=mr*Ot,Jm=Ot,kc=Ot*.5,eg=ma/2,tg=kc*2,Xw=1841961;function zs(i,e){return i>=0&&i<gr&&e>=0&&e<mr}function _i(i,e){const t=Jm/2,s=kc/2,o=(i-e)*t+eg,l=(i+e)*s+tg;return{x:o,y:l}}function qw(i,e){const t=Jm/2,s=kc/2,o=i-eg,l=e-tg,u=o/t,h=l/s,f=(u+h)/2,p=(h-u)/2,g=Math.round(f),y=Math.round(p);return{x:g,y}}function Kw(i,e,t,s){const o=[];for(let l=-s;l<=s;l++)for(let u=-s;u<=s;u++){const h=e+u,f=t+l;if(!zs(h,f))continue;Math.sqrt(u*u+l*l)<=s+.01&&o.push({x:h,y:f})}return{id:i,type:"circle",cells:o}}function Qw(i,e,t,s,o){const l=[],u=Math.floor(s/2),h=Math.floor(o/2);for(let f=t-h;f<=t+h;f++)for(let p=e-u;p<=e+u;p++)zs(p,f)&&l.push({x:p,y:f});return{id:i,type:"rectangle",cells:l}}function Zw(i,e,t,s,o){const l=[];for(let u=1;u<=s;u++)for(let h=-u;h<=u;h++){let f=e,p=t;switch(o){case"right":f=e+u,p=t+h;break;case"left":f=e-u,p=t+h;break;case"down":f=e+h,p=t+u;break;case"up":f=e+h,p=t-u;break}zs(f,p)&&l.push({x:f,y:p})}return{id:i,type:"cone",cells:l}}function wi(i,e=1){const t=[];for(let o=0;o<e;o++)t.push(1+Math.floor(Math.random()*i));const s=t.reduce((o,l)=>o+l,0);return{rolls:t,total:s}}function Jw(i,e="normal",t=20){if(e==="advantage"){const o=wi(20),l=wi(20),u=Math.max(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:i,total:u+i,mode:e,isCrit:u>=t}}if(e==="disadvantage"){const o=wi(20),l=wi(20),u=Math.min(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:i,total:u+i,mode:e,isCrit:u>=t}}const s=wi(20);return{d20:s,bonus:i,total:s.total+i,mode:e,isCrit:s.total>=t}}function eS(i){const e=[],s=i.replace(/\s+/g,"").split(/(?=[+-])/);for(const o of s){if(!o)continue;const l=o.startsWith("-")?-1:1,u=o.replace(/^[+-]/,""),h=u.match(/^(\d*)d(\d+)$/i);if(h){const p=h[1]?parseInt(h[1],10):1,g=parseInt(h[2],10);e.push({diceCount:l*p,diceSides:g,modifier:0});continue}const f=parseInt(u,10);Number.isNaN(f)||e.push({diceCount:0,diceSides:0,modifier:l*f})}return e}function tS(i,e){const t=!!(e!=null&&e.isCrit),s=(e==null?void 0:e.critRule)??"double-dice",o=eS(i),l=[];let u=0;for(const p of o)if(p.diceCount!==0&&p.diceSides>0){const g=Math.abs(p.diceCount),y=t&&s==="double-dice"?g*2:g,_=wi(p.diceSides,y);l.push(p.diceCount<0?{rolls:_.rolls,total:-_.total}:_)}else u+=p.modifier;let f=l.reduce((p,g)=>p+g.total,0)+u;return t&&s==="double-total"&&(f*=2),{dice:l,flatModifier:u,total:f,formula:i,isCrit:t}}const nS={"./melee-strike.json":uw,"./dash.json":ww,"./second-wind.json":Fw,"./throw-dagger.json":Yw};function ju(i){const e=gr-1,t=i;return{id:`enemy-${i}`,type:"enemy",x:e,y:t,hp:6,maxHp:6}}function pr(i,e,t){return Math.max(e,Math.min(t,i))}function $u(i,e){return Math.abs(i.x-e.x)+Math.abs(i.y-e.y)}const rS=()=>{var Hr,Vr,Yr,Xr;const i=De.useRef(null),e=De.useRef(null),t=De.useRef(null),s=De.useRef(null),[o,l]=De.useState([]),[u,h]=De.useState({id:"player-1",type:"player",x:0,y:Math.floor(mr/2),hp:Un.pvActuels,maxHp:Un.pvMax}),[f,p]=De.useState([ju(1),ju(3),ju(5)]),[g,y]=De.useState("player"),[_,v]=De.useState(1),[S,k]=De.useState(!1),[w,b]=De.useState([]),[P,M]=De.useState(null),[R,W]=De.useState(null),[N,D]=De.useState("normal"),[ee,le]=De.useState(null),[Y,J]=De.useState(null),[we,Se]=De.useState([]),[fe,Ke]=De.useState([]),[K,q]=De.useState([]),[X,V]=De.useState(null),[Q,E]=De.useState(null),[O,me]=De.useState(null),[_e,ve]=De.useState(!1);function ne(I){l(j=>[I,...j].slice(0,12))}function Ee(I){Se(j=>[I,...j].slice(0,6)),ne(I)}De.useEffect(()=>{const I=Array.isArray(Pp.actions)?Pp.actions:[],j=[];for(const Z of I){const oe=nS[Z];oe?j.push(oe):console.warn("[actions] Action path missing in bundle:",Z)}j.length===0&&console.warn("[actions] No actions loaded from index.json"),b(j),M(j.length?j[0].id:null)},[]);function Ae(){if(f.length===0)return null;let I=null;for(const j of f){const Z=$u(u,j);(I===null||Z<I)&&(I=Z)}return I}function Te(I){var ye,Fe;const j=[],Z=[];g!=="player"&&j.push("Action bloquee pendant le tour des ennemis.");const oe=(ye=I.targeting)==null?void 0:ye.target,pe=(Fe=I.targeting)==null?void 0:Fe.range;if(oe==="enemy"){const ge=Ae();ge===null?j.push("Aucune cible ennemie presente."):(Z.push(`Distance mini ennemie: ${ge}`),typeof(pe==null?void 0:pe.min)=="number"&&ge<pe.min&&j.push(`Trop proche (< ${pe.min}).`),typeof(pe==null?void 0:pe.max)=="number"&&ge>pe.max&&j.push(`Hors portee (> ${pe.max}).`))}for(const ge of I.conditions||[]){if(ge.type==="phase"&&ge.mustBe&&ge.mustBe!==g&&j.push(ge.reason||"Phase incorrecte."),ge.type==="distance_max"&&oe==="enemy"){const tt=Ae();tt!==null&&typeof ge.max=="number"&&tt>ge.max&&j.push(ge.reason||`Distance > ${ge.max}.`)}if(ge.type==="distance_between"&&oe==="enemy"){const tt=Ae();tt!==null&&(typeof ge.min=="number"&&tt<ge.min&&j.push(ge.reason||`Distance < ${ge.min}.`),typeof ge.max=="number"&&tt>ge.max&&j.push(ge.reason||`Distance > ${ge.max}.`))}}return{enabled:j.length===0,reasons:j,details:Z}}function et(I){var Z;const j=[];if(I.perTurn&&j.push(`${I.perTurn}/tour`),I.perEncounter&&j.push(`${I.perEncounter}/rencontre`),(Z=I.resource)!=null&&Z.name){const oe=I.resource.pool?` (${I.resource.pool})`:"";j.push(`Ressource: ${I.resource.name}${oe}`)}return j.length?j.join(" | "):"Libre"}function un(I){const{range:j,target:Z}=I;return j.shape==="self"?"Portee: soi-meme":j.min===j.max?`Portee: ${j.max} (${Z})`:`Portee: ${j.min}-${j.max} (${Z})`}function Xt(I){switch(I.type){case"phase":return`Phase requise: ${I.mustBe??"?"}`;case"distance_max":return`Distance <= ${I.max??"?"}`;case"distance_between":return`Distance ${I.min??0}-${I.max??"?"}`;case"stat_below_percent":return`Stat ${I.stat} < ${Math.round((I.percentMax??0)*100)}%`;case"target_alive":return"Cible doit etre vivante";case"resource_at_least":return`Ressource ${I.resource??"?"} >= ${I.value??"?"}`;default:return I.reason||I.type}}function Rt(I){switch(I.type){case"damage":return`Degats ${I.damageType??""} (${I.formula??"?"})`;case"heal":return`Soin (${I.formula??"?"})`;case"status":return`Etat: ${I.status??"?"} (${I.duration??"?"} tour)`;case"temp_hp":return`PV temporaires: ${I.amount??"?"}`;case"move":return`Deplacement +${I.maxSteps??"?"} (${I.direction??"direction libre"})`;case"resource_spend":return`Consomme ${I.amount??1} ${I.resource??"ressource"}`;case"modify_path_limit":return`+${I.delta??"?"} cases de mouvement ce tour`;default:return I.type}}function $t(I){var oe;const j=(oe=I.targeting)==null?void 0:oe.range;if(!j)return;const Z=`preview-${I.id}`;if(j.shape==="rectangle"){q([{id:Z,kind:"rectangle",width:Math.max(1,j.max),height:Math.max(1,j.max)}]),ne(`Previsualisation rectangle pour ${I.name}.`);return}if(j.shape==="cone"){q([{id:Z,kind:"cone",range:Math.max(1,j.max),direction:"right"}]),ne(`Previsualisation cone (direction droite) pour ${I.name}.`);return}q([{id:Z,kind:"circle",radius:Math.max(1,j.max)}]),ne(`Previsualisation de portee pour ${I.name}.`)}function qt(I){var oe;const j=Te(I);if(!j.enabled){ne(`Action ${I.name} bloque: ${j.reasons.join(" | ")}`);return}W(I.id),le(null),J(null);const Z=((oe=I.aiHints)==null?void 0:oe.successLog)||"Action validee. Prets pour les jets.";ne(`${I.name}: ${Z}`)}function Rn(){return R&&w.find(I=>I.id===R)||null}function In(){const I=Rn();if(!I){ne("Aucune action validee pour lancer un jet.");return}if(!I.attack){ne("Cette action ne requiert pas de jet de touche.");return}const j=Jw(I.attack.bonus,N,I.attack.critRange??20);le(j),J(null);const Z=j.mode==="normal"?`${j.d20.total}`:`${j.d20.rolls.join(" / ")} -> ${j.d20.total}`;Ee(`Jet de touche (${I.name}) : ${Z} + ${j.bonus} = ${j.total}${j.isCrit?" (critique!)":""}`)}function Yn(){const I=Rn();if(!I){ne("Aucune action validee pour lancer un jet.");return}if(!I.damage){ne("Cette action ne requiert pas de jet de degats.");return}const j=!!(ee!=null&&ee.isCrit),Z=tS(I.damage.formula,{isCrit:j,critRule:I.damage.critRule});J(Z);const oe=Z.dice.map(pe=>pe.rolls.join("+")).join(" | ");Ee(`Degats (${I.name}) : ${oe||"0"} + ${Z.flatModifier} = ${Z.total}${j?" (critique)":""}`)}function Ur(){const I=Rn();if(!I){ne("Aucune action validee pour lancer un jet.");return}if(!I.attack){ne("Mode auto: pas de jet de touche necessaire."),I.damage&&Yn();return}In(),setTimeout(()=>{I.damage&&Yn()},50)}function _r(I){if(g!=="player")return;const j=i.current;if(!j)return;const Z=j.querySelector("canvas");if(!Z)return;const oe=Z.getBoundingClientRect(),pe=I.clientX-oe.left,ye=I.clientY-oe.top,Fe=pe/oe.width*ma,ge=ye/oe.height*Ou,{x:tt,y:bt}=qw(Fe,ge),nt=tt,ot=bt;zs(nt,ot)&&Ke(dt=>{const Ie=[...dt];if(Ie.length>=5)return ne("Limite de 5 cases atteinte pour ce tour."),Ie;let Qt=Ie.length>0?Ie[Ie.length-1]:{x:u.x,y:u.y};if(Qt.x===nt&&Qt.y===ot)return Ie;let It=Qt.x,Zt=Qt.y,Fn=5-Ie.length;for(;It!==nt&&Fn>0;)It+=Math.sign(nt-It),Ie.push({x:It,y:Zt}),Fn--;for(;Zt!==ot&&Fn>0;)Zt+=Math.sign(ot-Zt),Ie.push({x:It,y:Zt}),Fn--;return ne(Fn===0&&(It!==nt||Zt!==ot)?"Trajectoire tronquee: limite de 5 cases atteinte.":`Trajectoire: ajout de la case (${nt}, ${ot}).`),Ie})}function Xn(){if(g!=="player"||fe.length===0)return;const I=fe[fe.length-1];h(j=>({...j,x:I.x,y:I.y})),ne(`Deplacement valide vers (${I.x}, ${I.y}) via ${fe.length} etape(s).`),Ke([])}function Ri(){g==="player"&&(Ke([]),ne("Trajectoire reinitialisee."))}function Ns(){const I={x:u.x,y:u.y,hp:u.hp,maxHp:u.maxHp},j=f.map(Z=>({id:Z.id,x:Z.x,y:Z.y,hp:Z.hp,maxHp:Z.maxHp}));return{round:_,phase:g,grid:{cols:gr,rows:mr},player:I,enemies:j}}async function Os(I){V(I),me(null),ve(!1);try{const j=await fetch("/api/enemy-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!j.ok)throw new Error(`HTTP ${j.status}`);const Z=await j.json();if(!Z.decisions||!Array.isArray(Z.decisions))throw new Error("Rponse backend invalide (decisions manquant).");return E(Z.decisions),Z.decisions}catch(j){return console.warn("[enemy-ai] Erreur lors de la requete IA:",j),me(j instanceof Error?j.message:String(j??"unknown")),E(null),ve(!0),[]}}function js(I){if(!I.length){ve(!0),E([]),p(j=>j.map(Z=>{const oe=u.x>Z.x?1:u.x<Z.x?-1:0,pe=u.y>Z.y?1:u.y<Z.y?-1:0,ye=pr(Z.x+oe,0,gr-1),Fe=pr(Z.y+pe,0,mr-1);return ye===u.x&&Fe===u.y?(h(ge=>({...ge,hp:Math.max(0,ge.hp-2)})),ne(`${Z.id} attaque le joueur pour 2 degats (fallback).`)):ne(`${Z.id} avance vers (${ye}, ${Fe}).`),{...Z,x:ye,y:Fe}}));return}ve(!1),p(j=>{const Z=j.map(pe=>({...pe}));let oe={...u};for(const pe of I){const ye=Z.find(ge=>ge.id===pe.enemyId);if(!ye)continue;const Fe=(pe.action||"wait").toLowerCase();if(Fe==="wait"){ne(`${ye.id} attend.`);continue}if(Fe==="move"){let ge=pe.targetX,tt=pe.targetY;const bt=pe;if((typeof ge!="number"||typeof tt!="number")&&bt.target&&typeof bt.target.x=="number"&&typeof bt.target.y=="number"&&(ge=bt.target.x,tt=bt.target.y),typeof ge!="number"||typeof tt!="number"){ne(`${ye.id}: decision MOVE ignoree (pas de cible valide).`);continue}let nt=pr(ge,0,gr-1),ot=pr(tt,0,mr-1);if($u(ye,{x:nt,y:ot})>3){const Pt=pr(nt-ye.x,-3,3),Ie=pr(ot-ye.y,-3,3);nt=pr(ye.x+Math.sign(Pt)*Math.min(Math.abs(Pt),3),0,gr-1),ot=pr(ye.y+Math.sign(Ie)*Math.min(Math.abs(Ie),3),0,mr-1)}ye.x=nt,ye.y=ot,ne(`${ye.id} se deplace vers (${nt}, ${ot}).`);continue}Fe==="attack"&&($u(ye,oe)<=1?(oe={...oe,hp:Math.max(0,oe.hp-2)},ne(`${ye.id} attaque le joueur pour 2 degats.`)):ne(`${ye.id} voulait attaquer mais est trop loin (ignore).`))}return h(oe),Z})}async function $s(){k(!0),Ke([]),q([]);const I=Ns(),j=await Os(I);js(j),k(!1),y("player"),v(Z=>Z+1)}function Ii(){g==="player"&&(y("enemies"),ne(`Fin du tour joueur (round ${_}). Tour des ennemis...`),$s())}function Wr(){q([{id:"demo-circle",kind:"circle",radius:2}]),ne("Zone d'effet: cercle (rayon 2) autour du joueur.")}function Gs(){q([{id:"demo-rect",kind:"rectangle",width:3,height:3}]),ne("Zone d'effet: rectangle 3x3 centre sur le joueur.")}function vr(){q([{id:"demo-cone",kind:"cone",range:4,direction:"right"}]),ne("Zone d'effet: cone vers la droite (portee 4).")}function wr(){q([]),ne("Zones d'effet effacees.")}De.useEffect(()=>{if(!i.current||e.current)return;const I=new Am;e.current=I;let j=!1,Z=null,oe=!1;return(async()=>{if(await I.init({width:ma,height:Ou,background:Xw,antialias:!0}),oe=!0,await ks.load([Ap,bp]),j)return;const ye=i.current;if(!ye)return;ye.appendChild(I.canvas);const Fe=new _n;I.stage.addChild(Fe);const ge=new Bs;Fe.addChild(ge),(()=>{ge.clear();for(let dt=0;dt<mr;dt++)for(let Pt=0;Pt<gr;Pt++){if(!zs(Pt,dt))continue;const Ie=_i(Pt,dt),Qt=Ot,It=Ot*.5,Zt=[Ie.x,Ie.y-It/2,Ie.x+Qt/2,Ie.y,Ie.x,Ie.y+It/2,Ie.x-Qt/2,Ie.y],Fn=(Pt+dt)%2===0;ge.poly(Zt).fill({color:Fn?1381666:1908016,alpha:1})}})();const bt=new Bs;Fe.addChild(bt),s.current=bt;const nt=new _n;Fe.addChild(nt),t.current=nt;const ot=()=>{const dt=I.canvas,Pt=dt.parentElement;if(!Pt)return;const Ie=Math.min(Pt.clientWidth/ma,Pt.clientHeight/Ou);dt.style.transformOrigin="top left",dt.style.transform=`scale(${Ie})`};Z=ot,ot(),window.addEventListener("resize",ot)})(),()=>{j=!0,Z&&window.removeEventListener("resize",Z),oe&&e.current&&e.current.destroy(!0),e.current=null,t.current=null,s.current=null}},[]),De.useEffect(()=>{const I=t.current;if(!I)return;I.removeChildren();const j=[u,...f];for(const Z of j){const oe=Z.type==="player"?Ap:bp,pe=new _n,ye=bi.from(oe);ye.anchor.set(.5),ye.width=Ot*.9,ye.height=Ot*.9,ye.tint=16777215,pe.addChild(ye);const Fe=_i(Z.x,Z.y);pe.x=Fe.x+Ot*.05,pe.y=Fe.y-Ot*.1,I.addChild(pe)}},[u,f]),De.useEffect(()=>{const I=s.current;if(!I)return;I.clear();const j=K.map(oe=>{switch(oe.kind){case"circle":return Kw(oe.id,u.x,u.y,oe.radius??1);case"rectangle":return Qw(oe.id,u.x,u.y,oe.width??1,oe.height??1);case"cone":return Zw(oe.id,u.x,u.y,oe.range??1,oe.direction??"right");default:return{id:oe.id,type:"circle",cells:[]}}});for(const oe of j)for(const pe of oe.cells){const ye=_i(pe.x,pe.y),Fe=Ot,ge=Ot*.5,tt=[ye.x,ye.y-ge/2,ye.x+Fe/2,ye.y,ye.x,ye.y+ge/2,ye.x-Fe/2,ye.y],bt=oe.type==="circle"?3447003:oe.type==="rectangle"?3066993:15158332;I.poly(tt).fill({color:bt,alpha:.45})}if(fe.length>0){const oe=fe[fe.length-1],pe=_i(oe.x,oe.y),ye=Ot,Fe=Ot*.5,ge=[pe.x,pe.y-Fe/2,pe.x+ye/2,pe.y,pe.x,pe.y+Fe/2,pe.x-ye/2,pe.y];I.poly(ge).fill({color:15844367,alpha:.2})}if(fe.length===0)return;I.setStrokeStyle({width:6,color:15844367,alpha:1});const Z=_i(u.x,u.y);I.moveTo(Z.x,Z.y);for(const oe of fe){const pe=_i(oe.x,oe.y);I.lineTo(pe.x,pe.y)}I.stroke()},[u,fe,K]);const Ve=w.find(I=>I.id===P)||w[0]||null,ht=Ve?Te(Ve):null,We=Rn(),Kt=g==="player";return z.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"16px",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:"16px",boxSizing:"border-box"},children:[z.jsxs("div",{style:{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},children:[z.jsx("h1",{style:{marginBottom:8},children:"Mini Donjon (test-GAME)"}),z.jsx("p",{style:{marginBottom:8},children:"Tour par tour simple. Cliquez sur la grille pour definir une trajectoire (max 5 cases), validez le dplacement, puis terminez le tour pour laisser l'IA des ennemis jouer."}),z.jsx("div",{ref:i,onClick:_r,style:{flex:"1 1 auto",border:"1px solid #333",overflow:"hidden",maxHeight:"min(80vh, 640px)",maxWidth:"min(100%, 1024px)"}}),z.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,flexWrap:"wrap"},children:[z.jsx("button",{type:"button",onClick:Xn,style:{padding:"4px 8px",background:Kt&&fe.length?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Kt&&fe.length?"pointer":"default"},disabled:!Kt||fe.length===0,children:"Valider le deplacement"}),z.jsx("button",{type:"button",onClick:Ri,style:{padding:"4px 8px",background:Kt?"#e67e22":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Kt?"pointer":"default"},disabled:!Kt,children:"Reinitialiser trajet"}),z.jsx("button",{type:"button",onClick:Ii,style:{padding:"4px 8px",background:Kt?"#9b59b6":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Kt?"pointer":"default"},disabled:!Kt||S,children:"Fin du tour joueur"}),!Kt&&z.jsx("span",{style:{fontSize:12,alignSelf:"center"},children:"Tour des ennemis en cours..."})]})]}),z.jsxs("div",{style:{width:"360px",display:"flex",flexDirection:"column",gap:"12px"},children:[z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333"},children:[z.jsx("h2",{style:{margin:"0 0 8px"},children:"Etat du combat"}),z.jsxs("div",{children:[z.jsx("strong",{children:"Round :"})," ",_," |"," ",z.jsx("strong",{children:"Phase :"})," ",g==="player"?"Joueur":"Ennemis"]}),z.jsxs("div",{children:[z.jsx("strong",{children:"Nom :"})," ",Un.nom.nomcomplet]}),z.jsxs("div",{children:[z.jsx("strong",{children:"Niveau :"})," ",Un.niveauGlobal," |"," ",z.jsx("strong",{children:"Classe :"})," ",Un.classe[1].classeId]}),z.jsxs("div",{children:[z.jsx("strong",{children:"PV :"})," ",u.hp," / ",u.maxHp]}),z.jsxs("div",{children:[z.jsx("strong",{children:"CA :"})," ",Un.CA]}),z.jsxs("div",{style:{marginTop:8},children:[z.jsx("strong",{children:"Caracs :"})," ","FOR ",Un.caracs.force.FOR," | DEX"," ",Un.caracs.dexterite.DEX," | CON"," ",Un.caracs.constitution.CON]}),z.jsxs("div",{style:{marginTop:8,fontSize:12},children:[z.jsx("strong",{children:"Trajectoire :"})," ",fe.length===0?"aucune":`(${u.x}, ${u.y}) -> `+fe.map(I=>`(${I.x}, ${I.y})`).join(" -> ")]}),z.jsxs("div",{style:{marginTop:8,fontSize:11,opacity:.85},children:[z.jsx("strong",{children:"IA ennemis (debug) :"}),z.jsxs("div",{children:["Dernier appel :"," ",X?`round ${X.round}, phase ${X.phase}`:"aucun"]}),z.jsxs("div",{children:["Dcisions reues :"," ",Q===null?"n/a":`${Q.length} (fallback: ${_e?"oui":"non"})`]}),O&&z.jsxs("div",{children:["Erreur : ",O]})]})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Actions detaillees"}),z.jsxs("p",{style:{margin:0,fontSize:12,opacity:.85},children:["Source: ",z.jsx("code",{children:"action-game/actions/index.json"}),". Liste chargee et verifiee localement (phase, distance)."]}),z.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[z.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:[w.map(I=>{const j=Te(I),Z=(Ve==null?void 0:Ve.id)===I.id,oe=I.actionCost.actionType==="action"?"#8e44ad":I.actionCost.actionType==="bonus"?"#27ae60":I.actionCost.actionType==="reaction"?"#e67e22":"#2980b9",pe=Z?"#6c5ce7":"#2a2a3a";return z.jsxs("button",{type:"button",onClick:()=>M(I.id),style:{textAlign:"left",background:Z?"#1e1e2f":"#0f0f19",color:"#f5f5f5",border:`1px solid ${pe}`,borderRadius:6,padding:"8px 10px",cursor:"pointer"},children:[z.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,marginBottom:4,alignItems:"center"},children:[z.jsx("span",{style:{fontWeight:600},children:I.name}),z.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:oe,color:"#fff"},children:I.actionCost.actionType})]}),z.jsx("div",{style:{fontSize:12,opacity:.9},children:I.summary||I.category}),z.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:4,fontSize:11,alignItems:"center"},children:[z.jsx("span",{style:{color:j.enabled?"#2ecc71":"#e74c3c"},children:j.enabled?"Disponible":j.reasons[0]||"Bloquee"}),z.jsx("span",{style:{color:"#9aa0b5"},children:un(I.targeting)}),z.jsx("span",{style:{color:"#9aa0b5"},children:et(I.usage)})]})]},I.id)}),w.length===0&&z.jsx("div",{style:{fontSize:12,opacity:.8},children:"Aucune action chargee pour le moment."})]}),Ve&&z.jsxs("div",{style:{borderTop:"1px solid #2a2a3a",paddingTop:8,display:"flex",flexDirection:"column",gap:6},children:[z.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",fontSize:11},children:[z.jsx("span",{style:{background:"#2d2d40",color:"#d0d4f7",padding:"2px 6px",borderRadius:4},children:Ve.category}),(Hr=Ve.tags)==null?void 0:Hr.slice(0,4).map(I=>z.jsx("span",{style:{background:"#1f2a38",color:"#9bb0d6",padding:"2px 6px",borderRadius:4},children:I},I))]}),z.jsx("div",{style:{fontSize:12},children:Ve.summary||"Pas de resume."}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Cout:"})," ",Ve.actionCost.actionType," ","| Mouvement ",Ve.actionCost.movementCost]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Portee:"})," ",un(Ve.targeting)]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Usage:"})," ",et(Ve.usage)]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Conditions:"}),z.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:[Ve.conditions.length===0&&z.jsx("span",{style:{color:"#9aa0b5"},children:"Aucune condition."}),Ve.conditions.map((I,j)=>z.jsxs("div",{style:{color:"#cfd3ec"},children:[Xt(I),I.reason?`  ${I.reason}`:""]},`${I.type}-${j}`)),ht&&z.jsxs("div",{style:{color:ht.enabled?"#2ecc71":"#e74c3c"},children:["Etat:"," ",ht.enabled?"OK pour ce tour":ht.reasons.join(" | ")||"Bloque",ht.details.length>0&&z.jsx("div",{style:{color:"#9aa0b5",marginTop:2},children:ht.details.join(" / ")})]})]})]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Effets:"}),z.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:Ve.effects.map((I,j)=>z.jsx("div",{style:{color:"#cfd3ec"},children:Rt(I)},`${I.type}-${j}`))})]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Hints IA:"})," ",((Vr=Ve.aiHints)==null?void 0:Vr.priority)||"n/a",z.jsxs("div",{style:{color:"#9aa0b5"},children:["Success: ",((Yr=Ve.aiHints)==null?void 0:Yr.successLog)||"n/a"]}),z.jsxs("div",{style:{color:"#9aa0b5"},children:["Failure: ",((Xr=Ve.aiHints)==null?void 0:Xr.failureLog)||"n/a"]})]}),z.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[z.jsx("button",{type:"button",onClick:()=>$t(Ve),style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Previsualiser"}),z.jsx("button",{type:"button",onClick:()=>qt(Ve),disabled:!(ht!=null&&ht.enabled),style:{padding:"4px 8px",background:ht!=null&&ht.enabled?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:ht!=null&&ht.enabled?"pointer":"default",fontSize:12},children:"Valider l'action"})]})]})]})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Jets de des"}),z.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Choisir une action, la valider, puis lancer le jet de touche et/ou de degats. Mode auto: enchaine touche + degats."}),z.jsxs("div",{style:{fontSize:12},children:["Action validee :"," ",We?`${We.name} (${We.id})`:"aucune (valider une action d'abord)"]}),z.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["normal","advantage","disadvantage"].map(I=>z.jsx("button",{type:"button",onClick:()=>D(I),style:{padding:"4px 8px",background:N===I?"#8e44ad":"#2c2c3a",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:I},I))}),z.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[z.jsx("button",{type:"button",onClick:In,disabled:!(We!=null&&We.attack),style:{padding:"4px 8px",background:We!=null&&We.attack?"#2980b9":"#555",color:"#fff",border:"none",borderRadius:4,cursor:We!=null&&We.attack?"pointer":"default",fontSize:12},children:"Lancer jet de touche"}),z.jsx("button",{type:"button",onClick:Yn,disabled:!(We!=null&&We.damage),style:{padding:"4px 8px",background:We!=null&&We.damage?"#27ae60":"#555",color:"#fff",border:"none",borderRadius:4,cursor:We!=null&&We.damage?"pointer":"default",fontSize:12},children:"Lancer degats"}),z.jsx("button",{type:"button",onClick:Ur,style:{padding:"4px 8px",background:"#9b59b6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Mode auto (touche + degats)"})]}),z.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[z.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[z.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de touche"}),ee?z.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["d20: ",ee.d20.rolls.join(" / "),"  ",ee.d20.total," ","| bonus ",ee.bonus," | total ",ee.total," ",ee.isCrit?"(critique)":""]}):z.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lance."})]}),z.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[z.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de degats"}),Y?z.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["Des:"," ",Y.dice.length?Y.dice.map(I=>I.rolls.join("+")).join(" | "):""," ","| mod ",Y.flatModifier," | total ",Y.total," ",Y.isCrit?"(critique)":""]}):z.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lance."})]})]}),z.jsxs("div",{style:{fontSize:12},children:[z.jsx("strong",{children:"Logs des jets:"}),z.jsxs("div",{style:{marginTop:4,display:"flex",flexDirection:"column",gap:2},children:[we.map((I,j)=>z.jsxs("div",{style:{color:"#dfe6ff"},children:["- ",I]},j)),we.length===0&&z.jsx("div",{style:{color:"#9aa0b5"},children:"Aucun jet enregistre."})]})]})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[z.jsx("h2",{style:{margin:"0 0 4px"},children:"Zones d'effet (demo)"}),z.jsxs("p",{style:{margin:0,fontSize:12},children:["Ces boutons utilisent les helpers de ",z.jsx("code",{children:"boardEffects.ts"})," ","pour dessiner des zones en coordonnees de grille autour du joueur."]}),z.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:[z.jsx("button",{type:"button",onClick:Wr,style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cercle R=2"}),z.jsx("button",{type:"button",onClick:Gs,style:{padding:"4px 8px",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Rectangle 3x3"}),z.jsx("button",{type:"button",onClick:vr,style:{padding:"4px 8px",background:"#c0392b",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cone portee 4"}),z.jsx("button",{type:"button",onClick:wr,style:{padding:"4px 8px",background:"#7f8c8d",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Effacer zones"})]})]}),z.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",flex:"1 1 auto",display:"flex",flexDirection:"column"},children:[z.jsx("h2",{style:{margin:"0 0 8px"},children:"Log"}),z.jsx("div",{style:{flex:"1 1 auto",overflowY:"auto",fontSize:12,lineHeight:1.4},children:o.map((I,j)=>z.jsxs("div",{children:["- ",I]},j))})]})]})]})},iS=document.getElementById("root");rx.createRoot(iS).render(z.jsx(rS,{}));export{Kx as $,wm as A,jt as B,_n as C,Ue as D,ce as E,Hp as F,ka as G,Pf as H,bi as I,_0 as J,T0 as K,Ds as L,be as M,Je as N,st as O,At as P,V0 as Q,Qu as R,pc as S,na as T,Yu as U,Mf as V,Su as W,Ef as X,Zx as Y,xa as Z,ct as _,um as a,$p as a0,Sm as a1,ke as a2,ze as a3,Q0 as a4,w_ as a5,p_ as a6,j_ as a7,G_ as a8,Y_ as a9,q_ as aa,K_ as ab,ya as ac,fa as ad,nc as ae,gp as af,Dm as ag,Hf as ah,Uf as ai,xp as aj,Qv as ak,$e as al,Bs as am,_x as an,Sa as ao,jm as ap,wn as b,h_ as c,Fs as d,_t as e,Wf as f,l_ as g,da as h,fc as i,xm as j,Jp as k,Sn as l,fm as m,ac as n,O_ as o,$_ as p,H_ as q,Fx as r,X_ as s,Pe as t,xx as u,Q_ as v,Ge as w,ln as x,Np as y,vn as z};
