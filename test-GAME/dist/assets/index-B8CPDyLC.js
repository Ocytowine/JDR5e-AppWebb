const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-DLWC9VGJ.js","assets/webworkerAll-QgRLjns0.js","assets/colorToUniform-Q0BHt6N_.js","assets/WebGPURenderer-C8wrQWZT.js","assets/SharedSystems-Dllpzwpe.js","assets/WebGLRenderer-BkF3xwx8.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function th(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nc={exports:{}},Ks={},rc={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf;function Sg(){if(Lf)return Me;Lf=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function w(L,W,ve){this.props=L,this.context=W,this.refs=b,this.updater=ve||v}w.prototype.isReactComponent={},w.prototype.setState=function(L,W){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,W,"setState")},w.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function C(){}C.prototype=w.prototype;function P(L,W,ve){this.props=L,this.context=W,this.refs=b,this.updater=ve||v}var E=P.prototype=new C;E.constructor=P,S(E,w.prototype),E.isPureReactComponent=!0;var I=Array.isArray,U=Object.prototype.hasOwnProperty,O={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function Y(L,W,ve){var we,be={},Ae=null,$e=null;if(W!=null)for(we in W.ref!==void 0&&($e=W.ref),W.key!==void 0&&(Ae=""+W.key),W)U.call(W,we)&&!D.hasOwnProperty(we)&&(be[we]=W[we]);var Fe=arguments.length-2;if(Fe===1)be.children=ve;else if(1<Fe){for(var Oe=Array(Fe),st=0;st<Fe;st++)Oe[st]=arguments[st+2];be.children=Oe}if(L&&L.defaultProps)for(we in Fe=L.defaultProps,Fe)be[we]===void 0&&(be[we]=Fe[we]);return{$$typeof:r,type:L,key:Ae,ref:$e,props:be,_owner:O.current}}function Q(L,W){return{$$typeof:r,type:L.type,key:W,ref:L.ref,props:L.props,_owner:L._owner}}function q(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function Z(L){var W={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ve){return W[ve]})}var pe=/\/+/g;function ce(L,W){return typeof L=="object"&&L!==null&&L.key!=null?Z(""+L.key):W.toString(36)}function Se(L,W,ve,we,be){var Ae=typeof L;(Ae==="undefined"||Ae==="boolean")&&(L=null);var $e=!1;if(L===null)$e=!0;else switch(Ae){case"string":case"number":$e=!0;break;case"object":switch(L.$$typeof){case r:case e:$e=!0}}if($e)return $e=L,be=be($e),L=we===""?"."+ce($e,0):we,I(be)?(ve="",L!=null&&(ve=L.replace(pe,"$&/")+"/"),Se(be,W,ve,"",function(st){return st})):be!=null&&(q(be)&&(be=Q(be,ve+(!be.key||$e&&$e.key===be.key?"":(""+be.key).replace(pe,"$&/")+"/")+L)),W.push(be)),1;if($e=0,we=we===""?".":we+":",I(L))for(var Fe=0;Fe<L.length;Fe++){Ae=L[Fe];var Oe=we+ce(Ae,Fe);$e+=Se(Ae,W,ve,Oe,be)}else if(Oe=x(L),typeof Oe=="function")for(L=Oe.call(L),Fe=0;!(Ae=L.next()).done;)Ae=Ae.value,Oe=we+ce(Ae,Fe++),$e+=Se(Ae,W,ve,Oe,be);else if(Ae==="object")throw W=String(L),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return $e}function Qe(L,W,ve){if(L==null)return L;var we=[],be=0;return Se(L,we,"","",function(Ae){return W.call(ve,Ae,be++)}),we}function J(L){if(L._status===-1){var W=L._result;W=W(),W.then(function(ve){(L._status===0||L._status===-1)&&(L._status=1,L._result=ve)},function(ve){(L._status===0||L._status===-1)&&(L._status=2,L._result=ve)}),L._status===-1&&(L._status=0,L._result=W)}if(L._status===1)return L._result.default;throw L._result}var te={current:null},ee={transition:null},X={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:ee,ReactCurrentOwner:O};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:Qe,forEach:function(L,W,ve){Qe(L,function(){W.apply(this,arguments)},ve)},count:function(L){var W=0;return Qe(L,function(){W++}),W},toArray:function(L){return Qe(L,function(W){return W})||[]},only:function(L){if(!q(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Me.Component=w,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=P,Me.StrictMode=s,Me.Suspense=d,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Me.act=ne,Me.cloneElement=function(L,W,ve){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var we=S({},L.props),be=L.key,Ae=L.ref,$e=L._owner;if(W!=null){if(W.ref!==void 0&&(Ae=W.ref,$e=O.current),W.key!==void 0&&(be=""+W.key),L.type&&L.type.defaultProps)var Fe=L.type.defaultProps;for(Oe in W)U.call(W,Oe)&&!D.hasOwnProperty(Oe)&&(we[Oe]=W[Oe]===void 0&&Fe!==void 0?Fe[Oe]:W[Oe])}var Oe=arguments.length-2;if(Oe===1)we.children=ve;else if(1<Oe){Fe=Array(Oe);for(var st=0;st<Oe;st++)Fe[st]=arguments[st+2];we.children=Fe}return{$$typeof:r,type:L.type,key:be,ref:Ae,props:we,_owner:$e}},Me.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Me.createElement=Y,Me.createFactory=function(L){var W=Y.bind(null,L);return W.type=L,W},Me.createRef=function(){return{current:null}},Me.forwardRef=function(L){return{$$typeof:c,render:L}},Me.isValidElement=q,Me.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:J}},Me.memo=function(L,W){return{$$typeof:f,type:L,compare:W===void 0?null:W}},Me.startTransition=function(L){var W=ee.transition;ee.transition={};try{L()}finally{ee.transition=W}},Me.unstable_act=ne,Me.useCallback=function(L,W){return te.current.useCallback(L,W)},Me.useContext=function(L){return te.current.useContext(L)},Me.useDebugValue=function(){},Me.useDeferredValue=function(L){return te.current.useDeferredValue(L)},Me.useEffect=function(L,W){return te.current.useEffect(L,W)},Me.useId=function(){return te.current.useId()},Me.useImperativeHandle=function(L,W,ve){return te.current.useImperativeHandle(L,W,ve)},Me.useInsertionEffect=function(L,W){return te.current.useInsertionEffect(L,W)},Me.useLayoutEffect=function(L,W){return te.current.useLayoutEffect(L,W)},Me.useMemo=function(L,W){return te.current.useMemo(L,W)},Me.useReducer=function(L,W,ve){return te.current.useReducer(L,W,ve)},Me.useRef=function(L){return te.current.useRef(L)},Me.useState=function(L){return te.current.useState(L)},Me.useSyncExternalStore=function(L,W,ve){return te.current.useSyncExternalStore(L,W,ve)},Me.useTransition=function(){return te.current.useTransition()},Me.version="18.3.1",Me}var Ff;function nh(){return Ff||(Ff=1,rc.exports=Sg()),rc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf;function bg(){if(zf)return Ks;zf=1;var r=nh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,f){var m,y={},x=null,v=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(m in d)s.call(d,m)&&!l.hasOwnProperty(m)&&(y[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:c,key:x,ref:v,props:y,_owner:o.current}}return Ks.Fragment=t,Ks.jsx=u,Ks.jsxs=u,Ks}var Bf;function kg(){return Bf||(Bf=1,nc.exports=bg()),nc.exports}var M=kg(),Ba={},ic={exports:{}},Zt={},sc={exports:{}},oc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf;function Cg(){return jf||(jf=1,(function(r){function e(ee,X){var ne=ee.length;ee.push(X);e:for(;0<ne;){var L=ne-1>>>1,W=ee[L];if(0<o(W,X))ee[L]=X,ee[ne]=W,ne=L;else break e}}function t(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var X=ee[0],ne=ee.pop();if(ne!==X){ee[0]=ne;e:for(var L=0,W=ee.length,ve=W>>>1;L<ve;){var we=2*(L+1)-1,be=ee[we],Ae=we+1,$e=ee[Ae];if(0>o(be,ne))Ae<W&&0>o($e,be)?(ee[L]=$e,ee[Ae]=ne,L=Ae):(ee[L]=be,ee[we]=ne,L=we);else if(Ae<W&&0>o($e,ne))ee[L]=$e,ee[Ae]=ne,L=Ae;else break e}}return X}function o(ee,X){var ne=ee.sortIndex-X.sortIndex;return ne!==0?ne:ee.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],f=[],m=1,y=null,x=3,v=!1,S=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(ee){for(var X=t(f);X!==null;){if(X.callback===null)s(f);else if(X.startTime<=ee)s(f),X.sortIndex=X.expirationTime,e(d,X);else break;X=t(f)}}function I(ee){if(b=!1,E(ee),!S)if(t(d)!==null)S=!0,J(U);else{var X=t(f);X!==null&&te(I,X.startTime-ee)}}function U(ee,X){S=!1,b&&(b=!1,C(Y),Y=-1),v=!0;var ne=x;try{for(E(X),y=t(d);y!==null&&(!(y.expirationTime>X)||ee&&!Z());){var L=y.callback;if(typeof L=="function"){y.callback=null,x=y.priorityLevel;var W=L(y.expirationTime<=X);X=r.unstable_now(),typeof W=="function"?y.callback=W:y===t(d)&&s(d),E(X)}else s(d);y=t(d)}if(y!==null)var ve=!0;else{var we=t(f);we!==null&&te(I,we.startTime-X),ve=!1}return ve}finally{y=null,x=ne,v=!1}}var O=!1,D=null,Y=-1,Q=5,q=-1;function Z(){return!(r.unstable_now()-q<Q)}function pe(){if(D!==null){var ee=r.unstable_now();q=ee;var X=!0;try{X=D(!0,ee)}finally{X?ce():(O=!1,D=null)}}else O=!1}var ce;if(typeof P=="function")ce=function(){P(pe)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Qe=Se.port2;Se.port1.onmessage=pe,ce=function(){Qe.postMessage(null)}}else ce=function(){w(pe,0)};function J(ee){D=ee,O||(O=!0,ce())}function te(ee,X){Y=w(function(){ee(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ee){ee.callback=null},r.unstable_continueExecution=function(){S||v||(S=!0,J(U))},r.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<ee?Math.floor(1e3/ee):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(ee){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var ne=x;x=X;try{return ee()}finally{x=ne}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ee,X){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ne=x;x=ee;try{return X()}finally{x=ne}},r.unstable_scheduleCallback=function(ee,X,ne){var L=r.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?L+ne:L):ne=L,ee){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ne+W,ee={id:m++,callback:X,priorityLevel:ee,startTime:ne,expirationTime:W,sortIndex:-1},ne>L?(ee.sortIndex=ne,e(f,ee),t(d)===null&&ee===t(f)&&(b?(C(Y),Y=-1):b=!0,te(I,ne-L))):(ee.sortIndex=W,e(d,ee),S||v||(S=!0,J(U))),ee},r.unstable_shouldYield=Z,r.unstable_wrapCallback=function(ee){var X=x;return function(){var ne=x;x=X;try{return ee.apply(this,arguments)}finally{x=ne}}}})(oc)),oc}var Df;function Ag(){return Df||(Df=1,sc.exports=Cg()),sc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f;function Pg(){if($f)return Zt;$f=1;var r=nh(),e=Ag();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){u(n,i),u(n+"Capture",i)}function u(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function x(n){return d.call(y,n)?!0:d.call(m,n)?!1:f.test(n)?y[n]=!0:(m[n]=!0,!1)}function v(n,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,i,a,h){if(i===null||typeof i>"u"||v(n,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function b(n,i,a,h,p,g,_){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=_}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){w[n]=new b(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];w[i]=new b(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){w[n]=new b(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){w[n]=new b(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){w[n]=new b(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){w[n]=new b(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){w[n]=new b(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){w[n]=new b(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){w[n]=new b(n,5,!1,n.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function P(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(C,P);w[i]=new b(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(C,P);w[i]=new b(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(C,P);w[i]=new b(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){w[n]=new b(n,1,!1,n.toLowerCase(),null,!1,!1)}),w.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){w[n]=new b(n,1,!1,n.toLowerCase(),null,!0,!0)});function E(n,i,a,h){var p=w.hasOwnProperty(i)?w[i]:null;(p!==null?p.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(S(i,a,p,h)&&(a=null),h||p===null?x(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):p.mustUseProperty?n[p.propertyName]=a===null?p.type===3?!1:"":a:(i=p.attributeName,h=p.attributeNamespace,a===null?n.removeAttribute(i):(p=p.type,a=p===3||p===4&&a===!0?"":""+a,h?n.setAttributeNS(h,i,a):n.setAttribute(i,a))))}var I=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),O=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),Z=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),Qe=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),ee=Symbol.iterator;function X(n){return n===null||typeof n!="object"?null:(n=ee&&n[ee]||n["@@iterator"],typeof n=="function"?n:null)}var ne=Object.assign,L;function W(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var ve=!1;function we(n,i){if(!n||ve)return"";ve=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(j){var h=j}Reflect.construct(n,[],i)}else{try{i.call()}catch(j){h=j}n.call(i.prototype)}else{try{throw Error()}catch(j){h=j}n()}}catch(j){if(j&&h&&typeof j.stack=="string"){for(var p=j.stack.split(`
`),g=h.stack.split(`
`),_=p.length-1,k=g.length-1;1<=_&&0<=k&&p[_]!==g[k];)k--;for(;1<=_&&0<=k;_--,k--)if(p[_]!==g[k]){if(_!==1||k!==1)do if(_--,k--,0>k||p[_]!==g[k]){var T=`
`+p[_].replace(" at new "," at ");return n.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",n.displayName)),T}while(1<=_&&0<=k);break}}}finally{ve=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?W(n):""}function be(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=we(n.type,!1),n;case 11:return n=we(n.type.render,!1),n;case 1:return n=we(n.type,!0),n;default:return""}}function Ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case O:return"Portal";case Q:return"Profiler";case Y:return"StrictMode";case ce:return"Suspense";case Se:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Z:return(n.displayName||"Context")+".Consumer";case q:return(n._context.displayName||"Context")+".Provider";case pe:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Qe:return i=n.displayName||null,i!==null?i:Ae(n.type)||"Memo";case J:i=n._payload,n=n._init;try{return Ae(n(i))}catch{}}return null}function $e(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(i);case 8:return i===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Oe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function st(n){var i=Oe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),h=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return p.call(this)},set:function(_){h=""+_,g.call(this,_)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(_){h=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Dn(n){n._valueTracker||(n._valueTracker=st(n))}function cn(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return n&&(h=Oe(n)?n.checked?"true":"false":n.value),n=h,n!==a?(i.setValue(n),!0):!1}function Nt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ht(n,i){var a=i.checked;return ne({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function hn(n,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=Fe(i.value!=null?i.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Br(n,i){i=i.checked,i!=null&&E(n,"checked",i,!1)}function hr(n,i){Br(n,i);var a=Fe(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?dr(n,i.type,a):i.hasOwnProperty("defaultValue")&&dr(n,i.type,Fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function en(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function dr(n,i,a){(i!=="number"||Nt(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var jr=Array.isArray;function kn(n,i,a,h){if(n=n.options,i){i={};for(var p=0;p<a.length;p++)i["$"+a[p]]=!0;for(a=0;a<n.length;a++)p=i.hasOwnProperty("$"+n[a].value),n[a].selected!==p&&(n[a].selected=p),p&&h&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,p=0;p<n.length;p++){if(n[p].value===a){n[p].selected=!0,h&&(n[p].defaultSelected=!0);return}i!==null||n[p].disabled||(i=n[p])}i!==null&&(i.selected=!0)}}function hs(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Co(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(jr(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Fe(a)}}function Ao(n,i){var a=Fe(i.value),h=Fe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function mi(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ds(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gi(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ds(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dt,Dr=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,p){MSApp.execUnsafeLocalFunction(function(){return n(i,a,h,p)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(dt=dt||document.createElement("div"),dt.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=dt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function gt(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var $n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fs=["Webkit","ms","Moz","O"];Object.keys($n).forEach(function(n){fs.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),$n[i]=$n[n]})});function fr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||$n.hasOwnProperty(n)&&$n[n]?(""+i).trim():i+"px"}function $r(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,p=fr(a,i[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,p):n[a]=p}}var Or=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ne(n,i){if(i){if(Or[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function yi(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function dn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xi=null,pr=null,mr=null;function Po(n){if(n=zs(n)){if(typeof xi!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Qo(i),xi(n.stateNode,n.type,i))}}function vi(n){pr?mr?mr.push(n):mr=[n]:pr=n}function Nr(){if(pr){var n=pr,i=mr;if(mr=pr=null,Po(n),i)for(n=0;n<i.length;n++)Po(i[n])}}function To(n,i){return n(i)}function ms(){}var _i=!1;function gr(n,i,a){if(_i)return n(i,a);_i=!0;try{return To(n,i,a)}finally{_i=!1,(pr!==null||mr!==null)&&(ms(),Nr())}}function kt(n,i){var a=n.stateNode;if(a===null)return null;var h=Qo(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var gs=!1;if(c)try{var Et={};Object.defineProperty(Et,"passive",{get:function(){gs=!0}}),window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,Et)}catch{gs=!1}function yl(n,i,a,h,p,g,_,k,T){var j=Array.prototype.slice.call(arguments,3);try{i.apply(a,j)}catch(H){this.onError(H)}}var Wr=!1,yr=null,wi=!1,Ur=null,xl={onError:function(n){Wr=!0,yr=n}};function oe(n,i,a,h,p,g,_,k,T){Wr=!1,yr=null,yl.apply(xl,arguments)}function Eo(n,i,a,h,p,g,_,k,T){if(oe.apply(this,arguments),Wr){if(Wr){var j=yr;Wr=!1,yr=null}else throw Error(t(198));wi||(wi=!0,Ur=j)}}function Cn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Mo(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Ro(n){if(Cn(n)!==n)throw Error(t(188))}function Io(n){var i=n.alternate;if(!i){if(i=Cn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,h=i;;){var p=a.return;if(p===null)break;var g=p.alternate;if(g===null){if(h=p.return,h!==null){a=h;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===a)return Ro(p),n;if(g===h)return Ro(p),i;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=p,h=g;else{for(var _=!1,k=p.child;k;){if(k===a){_=!0,a=p,h=g;break}if(k===h){_=!0,h=p,a=g;break}k=k.sibling}if(!_){for(k=g.child;k;){if(k===a){_=!0,a=g,h=p;break}if(k===h){_=!0,h=g,a=p;break}k=k.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Lo(n){return n=Io(n),n!==null?Si(n):null}function Si(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Si(n);if(i!==null)return i;n=n.sibling}return null}var ys=e.unstable_scheduleCallback,bi=e.unstable_cancelCallback,vl=e.unstable_shouldYield,_l=e.unstable_requestPaint,ot=e.unstable_now,wl=e.unstable_getCurrentPriorityLevel,xs=e.unstable_ImmediatePriority,Fo=e.unstable_UserBlockingPriority,On=e.unstable_NormalPriority,Sl=e.unstable_LowPriority,vs=e.unstable_IdlePriority,xr=null,fn=null;function bl(n){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(xr,n,void 0,(n.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:Cl,zo=Math.log,kl=Math.LN2;function Cl(n){return n>>>=0,n===0?32:31-(zo(n)/kl|0)|0}var ki=64,Ci=4194304;function Gr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ai(n,i){var a=n.pendingLanes;if(a===0)return 0;var h=0,p=n.suspendedLanes,g=n.pingedLanes,_=a&268435455;if(_!==0){var k=_&~p;k!==0?h=Gr(k):(g&=_,g!==0&&(h=Gr(g)))}else _=a&~p,_!==0?h=Gr(_):g!==0&&(h=Gr(g));if(h===0)return 0;if(i!==0&&i!==h&&(i&p)===0&&(p=h&-h,g=i&-i,p>=g||p===16&&(g&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=h;0<i;)a=31-Vt(i),p=1<<a,h|=n[a],i&=~p;return h}function Al(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pl(n,i){for(var a=n.suspendedLanes,h=n.pingedLanes,p=n.expirationTimes,g=n.pendingLanes;0<g;){var _=31-Vt(g),k=1<<_,T=p[_];T===-1?((k&a)===0||(k&h)!==0)&&(p[_]=Al(k,i)):T<=i&&(n.expiredLanes|=k),g&=~k}}function _s(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Bo(){var n=ki;return ki<<=1,(ki&4194240)===0&&(ki=64),n}function Hr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Vr(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Vt(i),n[i]=a}function ws(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var p=31-Vt(a),g=1<<p;i[p]=0,h[p]=-1,n[p]=-1,a&=~g}}function Ss(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var h=31-Vt(a),p=1<<h;p&i|n[h]&i&&(n[h]|=i),a&=~p}}var We=0;function jo(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Nn,bs,Do,A,z,$=!1,N=[],re=null,Ce=null,me=null,ie=new Map,Pe=new Map,Be=[],at="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Te(n,i){switch(n){case"focusin":case"focusout":re=null;break;case"dragenter":case"dragleave":Ce=null;break;case"mouseover":case"mouseout":me=null;break;case"pointerover":case"pointerout":ie.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(i.pointerId)}}function Ie(n,i,a,h,p,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[p]},i!==null&&(i=zs(i),i!==null&&bs(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),n)}function Ee(n,i,a,h,p){switch(i){case"focusin":return re=Ie(re,n,i,a,h,p),!0;case"dragenter":return Ce=Ie(Ce,n,i,a,h,p),!0;case"mouseover":return me=Ie(me,n,i,a,h,p),!0;case"pointerover":var g=p.pointerId;return ie.set(g,Ie(ie.get(g)||null,n,i,a,h,p)),!0;case"gotpointercapture":return g=p.pointerId,Pe.set(g,Ie(Pe.get(g)||null,n,i,a,h,p)),!0}return!1}function ke(n){var i=Yr(n.target);if(i!==null){var a=Cn(i);if(a!==null){if(i=a.tag,i===13){if(i=Mo(a),i!==null){n.blockedOn=i,z(n.priority,function(){Do(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ze(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=El(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);ps=h,a.target.dispatchEvent(h),ps=null}else return i=zs(a),i!==null&&bs(i),n.blockedOn=a,!1;i.shift()}return!0}function Ue(n,i,a){Ze(n)&&a.delete(i)}function yt(){$=!1,re!==null&&Ze(re)&&(re=null),Ce!==null&&Ze(Ce)&&(Ce=null),me!==null&&Ze(me)&&(me=null),ie.forEach(Ue),Pe.forEach(Ue)}function Ye(n,i){n.blockedOn===i&&(n.blockedOn=null,$||($=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yt)))}function Xe(n){function i(p){return Ye(p,n)}if(0<N.length){Ye(N[0],n);for(var a=1;a<N.length;a++){var h=N[a];h.blockedOn===n&&(h.blockedOn=null)}}for(re!==null&&Ye(re,n),Ce!==null&&Ye(Ce,n),me!==null&&Ye(me,n),ie.forEach(i),Pe.forEach(i),a=0;a<Be.length;a++)h=Be[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<Be.length&&(a=Be[0],a.blockedOn===null);)ke(a),a.blockedOn===null&&Be.shift()}var vt=I.ReactCurrentBatchConfig,Ft=!0;function Kn(n,i,a,h){var p=We,g=vt.transition;vt.transition=null;try{We=1,Tl(n,i,a,h)}finally{We=p,vt.transition=g}}function Xp(n,i,a,h){var p=We,g=vt.transition;vt.transition=null;try{We=4,Tl(n,i,a,h)}finally{We=p,vt.transition=g}}function Tl(n,i,a,h){if(Ft){var p=El(n,i,a,h);if(p===null)Vl(n,i,h,$o,a),Te(n,h);else if(Ee(p,n,i,a,h))h.stopPropagation();else if(Te(n,h),i&4&&-1<at.indexOf(n)){for(;p!==null;){var g=zs(p);if(g!==null&&Nn(g),g=El(n,i,a,h),g===null&&Vl(n,i,h,$o,a),g===p)break;p=g}p!==null&&h.stopPropagation()}else Vl(n,i,h,null,a)}}var $o=null;function El(n,i,a,h){if($o=null,n=dn(h),n=Yr(n),n!==null)if(i=Cn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Mo(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return $o=n,null}function xh(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wl()){case xs:return 1;case Fo:return 4;case On:case Sl:return 16;case vs:return 536870912;default:return 16}default:return 16}}var vr=null,Ml=null,Oo=null;function vh(){if(Oo)return Oo;var n,i=Ml,a=i.length,h,p="value"in vr?vr.value:vr.textContent,g=p.length;for(n=0;n<a&&i[n]===p[n];n++);var _=a-n;for(h=1;h<=_&&i[a-h]===p[g-h];h++);return Oo=p.slice(n,1<h?1-h:void 0)}function No(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Wo(){return!0}function _h(){return!1}function tn(n){function i(a,h,p,g,_){this._reactName=a,this._targetInst=p,this.type=h,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Wo:_h,this.isPropagationStopped=_h,this}return ne(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),i}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=tn(Pi),ks=ne({},Pi,{view:0,detail:0}),qp=tn(ks),Il,Ll,Cs,Uo=ne({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cs&&(Cs&&n.type==="mousemove"?(Il=n.screenX-Cs.screenX,Ll=n.screenY-Cs.screenY):Ll=Il=0,Cs=n),Il)},movementY:function(n){return"movementY"in n?n.movementY:Ll}}),wh=tn(Uo),Kp=ne({},Uo,{dataTransfer:0}),Qp=tn(Kp),Zp=ne({},ks,{relatedTarget:0}),Fl=tn(Zp),Jp=ne({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),em=tn(Jp),tm=ne({},Pi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),nm=tn(tm),rm=ne({},Pi,{data:0}),Sh=tn(rm),im={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},om={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function am(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=om[n])?!!i[n]:!1}function zl(){return am}var lm=ne({},ks,{key:function(n){if(n.key){var i=im[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=No(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?sm[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zl,charCode:function(n){return n.type==="keypress"?No(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?No(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),um=tn(lm),cm=ne({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bh=tn(cm),hm=ne({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zl}),dm=tn(hm),fm=ne({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),pm=tn(fm),mm=ne({},Uo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),gm=tn(mm),ym=[9,13,27,32],Bl=c&&"CompositionEvent"in window,As=null;c&&"documentMode"in document&&(As=document.documentMode);var xm=c&&"TextEvent"in window&&!As,kh=c&&(!Bl||As&&8<As&&11>=As),Ch=" ",Ah=!1;function Ph(n,i){switch(n){case"keyup":return ym.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Th(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ti=!1;function vm(n,i){switch(n){case"compositionend":return Th(i);case"keypress":return i.which!==32?null:(Ah=!0,Ch);case"textInput":return n=i.data,n===Ch&&Ah?null:n;default:return null}}function _m(n,i){if(Ti)return n==="compositionend"||!Bl&&Ph(n,i)?(n=vh(),Oo=Ml=vr=null,Ti=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kh&&i.locale!=="ko"?null:i.data;default:return null}}var wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!wm[n.type]:i==="textarea"}function Mh(n,i,a,h){vi(h),i=Xo(i,"onChange"),0<i.length&&(a=new Rl("onChange","change",null,a,h),n.push({event:a,listeners:i}))}var Ps=null,Ts=null;function Sm(n){Xh(n,0)}function Go(n){var i=Li(n);if(cn(i))return n}function bm(n,i){if(n==="change")return i}var Rh=!1;if(c){var jl;if(c){var Dl="oninput"in document;if(!Dl){var Ih=document.createElement("div");Ih.setAttribute("oninput","return;"),Dl=typeof Ih.oninput=="function"}jl=Dl}else jl=!1;Rh=jl&&(!document.documentMode||9<document.documentMode)}function Lh(){Ps&&(Ps.detachEvent("onpropertychange",Fh),Ts=Ps=null)}function Fh(n){if(n.propertyName==="value"&&Go(Ts)){var i=[];Mh(i,Ts,n,dn(n)),gr(Sm,i)}}function km(n,i,a){n==="focusin"?(Lh(),Ps=i,Ts=a,Ps.attachEvent("onpropertychange",Fh)):n==="focusout"&&Lh()}function Cm(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Go(Ts)}function Am(n,i){if(n==="click")return Go(i)}function Pm(n,i){if(n==="input"||n==="change")return Go(i)}function Tm(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var An=typeof Object.is=="function"?Object.is:Tm;function Es(n,i){if(An(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var p=a[h];if(!d.call(i,p)||!An(n[p],i[p]))return!1}return!0}function zh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bh(n,i){var a=zh(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=i&&h>=i)return{node:a,offset:i-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=zh(a)}}function jh(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?jh(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Dh(){for(var n=window,i=Nt();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Nt(n.document)}return i}function $l(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Em(n){var i=Dh(),a=n.focusedElem,h=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&jh(a.ownerDocument.documentElement,a)){if(h!==null&&$l(a)){if(i=h.start,n=h.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var p=a.textContent.length,g=Math.min(h.start,p);h=h.end===void 0?g:Math.min(h.end,p),!n.extend&&g>h&&(p=h,h=g,g=p),p=Bh(a,g);var _=Bh(a,h);p&&_&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),n.removeAllRanges(),g>h?(n.addRange(i),n.extend(_.node,_.offset)):(i.setEnd(_.node,_.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Mm=c&&"documentMode"in document&&11>=document.documentMode,Ei=null,Ol=null,Ms=null,Nl=!1;function $h(n,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nl||Ei==null||Ei!==Nt(h)||(h=Ei,"selectionStart"in h&&$l(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ms&&Es(Ms,h)||(Ms=h,h=Xo(Ol,"onSelect"),0<h.length&&(i=new Rl("onSelect","select",null,i,a),n.push({event:i,listeners:h}),i.target=Ei)))}function Ho(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Mi={animationend:Ho("Animation","AnimationEnd"),animationiteration:Ho("Animation","AnimationIteration"),animationstart:Ho("Animation","AnimationStart"),transitionend:Ho("Transition","TransitionEnd")},Wl={},Oh={};c&&(Oh=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function Vo(n){if(Wl[n])return Wl[n];if(!Mi[n])return n;var i=Mi[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Oh)return Wl[n]=i[a];return n}var Nh=Vo("animationend"),Wh=Vo("animationiteration"),Uh=Vo("animationstart"),Gh=Vo("transitionend"),Hh=new Map,Vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(n,i){Hh.set(n,i),l(i,[n])}for(var Ul=0;Ul<Vh.length;Ul++){var Gl=Vh[Ul],Rm=Gl.toLowerCase(),Im=Gl[0].toUpperCase()+Gl.slice(1);_r(Rm,"on"+Im)}_r(Nh,"onAnimationEnd"),_r(Wh,"onAnimationIteration"),_r(Uh,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(Gh,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function Yh(n,i,a){var h=n.type||"unknown-event";n.currentTarget=a,Eo(h,i,void 0,n),n.currentTarget=null}function Xh(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],p=h.event;h=h.listeners;e:{var g=void 0;if(i)for(var _=h.length-1;0<=_;_--){var k=h[_],T=k.instance,j=k.currentTarget;if(k=k.listener,T!==g&&p.isPropagationStopped())break e;Yh(p,k,j),g=T}else for(_=0;_<h.length;_++){if(k=h[_],T=k.instance,j=k.currentTarget,k=k.listener,T!==g&&p.isPropagationStopped())break e;Yh(p,k,j),g=T}}}if(wi)throw n=Ur,wi=!1,Ur=null,n}function Je(n,i){var a=i[Zl];a===void 0&&(a=i[Zl]=new Set);var h=n+"__bubble";a.has(h)||(qh(i,n,2,!1),a.add(h))}function Hl(n,i,a){var h=0;i&&(h|=4),qh(a,n,h,i)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function Is(n){if(!n[Yo]){n[Yo]=!0,s.forEach(function(a){a!=="selectionchange"&&(Lm.has(a)||Hl(a,!1,n),Hl(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Yo]||(i[Yo]=!0,Hl("selectionchange",!1,i))}}function qh(n,i,a,h){switch(xh(i)){case 1:var p=Kn;break;case 4:p=Xp;break;default:p=Tl}a=p.bind(null,i,a,n),p=void 0,!gs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?n.addEventListener(i,a,{capture:!0,passive:p}):n.addEventListener(i,a,!0):p!==void 0?n.addEventListener(i,a,{passive:p}):n.addEventListener(i,a,!1)}function Vl(n,i,a,h,p){var g=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var k=h.stateNode.containerInfo;if(k===p||k.nodeType===8&&k.parentNode===p)break;if(_===4)for(_=h.return;_!==null;){var T=_.tag;if((T===3||T===4)&&(T=_.stateNode.containerInfo,T===p||T.nodeType===8&&T.parentNode===p))return;_=_.return}for(;k!==null;){if(_=Yr(k),_===null)return;if(T=_.tag,T===5||T===6){h=g=_;continue e}k=k.parentNode}}h=h.return}gr(function(){var j=g,H=dn(a),V=[];e:{var G=Hh.get(n);if(G!==void 0){var se=Rl,ue=n;switch(n){case"keypress":if(No(a)===0)break e;case"keydown":case"keyup":se=um;break;case"focusin":ue="focus",se=Fl;break;case"focusout":ue="blur",se=Fl;break;case"beforeblur":case"afterblur":se=Fl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Qp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=dm;break;case Nh:case Wh:case Uh:se=em;break;case Gh:se=pm;break;case"scroll":se=qp;break;case"wheel":se=gm;break;case"copy":case"cut":case"paste":se=nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=bh}var he=(i&4)!==0,xt=!he&&n==="scroll",F=he?G!==null?G+"Capture":null:G;he=[];for(var R=j,B;R!==null;){B=R;var K=B.stateNode;if(B.tag===5&&K!==null&&(B=K,F!==null&&(K=kt(R,F),K!=null&&he.push(Ls(R,K,B)))),xt)break;R=R.return}0<he.length&&(G=new se(G,ue,null,a,H),V.push({event:G,listeners:he}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",G&&a!==ps&&(ue=a.relatedTarget||a.fromElement)&&(Yr(ue)||ue[Qn]))break e;if((se||G)&&(G=H.window===H?H:(G=H.ownerDocument)?G.defaultView||G.parentWindow:window,se?(ue=a.relatedTarget||a.toElement,se=j,ue=ue?Yr(ue):null,ue!==null&&(xt=Cn(ue),ue!==xt||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(se=null,ue=j),se!==ue)){if(he=wh,K="onMouseLeave",F="onMouseEnter",R="mouse",(n==="pointerout"||n==="pointerover")&&(he=bh,K="onPointerLeave",F="onPointerEnter",R="pointer"),xt=se==null?G:Li(se),B=ue==null?G:Li(ue),G=new he(K,R+"leave",se,a,H),G.target=xt,G.relatedTarget=B,K=null,Yr(H)===j&&(he=new he(F,R+"enter",ue,a,H),he.target=B,he.relatedTarget=xt,K=he),xt=K,se&&ue)t:{for(he=se,F=ue,R=0,B=he;B;B=Ri(B))R++;for(B=0,K=F;K;K=Ri(K))B++;for(;0<R-B;)he=Ri(he),R--;for(;0<B-R;)F=Ri(F),B--;for(;R--;){if(he===F||F!==null&&he===F.alternate)break t;he=Ri(he),F=Ri(F)}he=null}else he=null;se!==null&&Kh(V,G,se,he,!1),ue!==null&&xt!==null&&Kh(V,xt,ue,he,!0)}}e:{if(G=j?Li(j):window,se=G.nodeName&&G.nodeName.toLowerCase(),se==="select"||se==="input"&&G.type==="file")var de=bm;else if(Eh(G))if(Rh)de=Pm;else{de=Cm;var ye=km}else(se=G.nodeName)&&se.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(de=Am);if(de&&(de=de(n,j))){Mh(V,de,a,H);break e}ye&&ye(n,G,j),n==="focusout"&&(ye=G._wrapperState)&&ye.controlled&&G.type==="number"&&dr(G,"number",G.value)}switch(ye=j?Li(j):window,n){case"focusin":(Eh(ye)||ye.contentEditable==="true")&&(Ei=ye,Ol=j,Ms=null);break;case"focusout":Ms=Ol=Ei=null;break;case"mousedown":Nl=!0;break;case"contextmenu":case"mouseup":case"dragend":Nl=!1,$h(V,a,H);break;case"selectionchange":if(Mm)break;case"keydown":case"keyup":$h(V,a,H)}var xe;if(Bl)e:{switch(n){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Ti?Ph(n,a)&&(_e="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(kh&&a.locale!=="ko"&&(Ti||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Ti&&(xe=vh()):(vr=H,Ml="value"in vr?vr.value:vr.textContent,Ti=!0)),ye=Xo(j,_e),0<ye.length&&(_e=new Sh(_e,n,null,a,H),V.push({event:_e,listeners:ye}),xe?_e.data=xe:(xe=Th(a),xe!==null&&(_e.data=xe)))),(xe=xm?vm(n,a):_m(n,a))&&(j=Xo(j,"onBeforeInput"),0<j.length&&(H=new Sh("onBeforeInput","beforeinput",null,a,H),V.push({event:H,listeners:j}),H.data=xe))}Xh(V,i)})}function Ls(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Xo(n,i){for(var a=i+"Capture",h=[];n!==null;){var p=n,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=kt(n,a),g!=null&&h.unshift(Ls(n,g,p)),g=kt(n,i),g!=null&&h.push(Ls(n,g,p))),n=n.return}return h}function Ri(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Kh(n,i,a,h,p){for(var g=i._reactName,_=[];a!==null&&a!==h;){var k=a,T=k.alternate,j=k.stateNode;if(T!==null&&T===h)break;k.tag===5&&j!==null&&(k=j,p?(T=kt(a,g),T!=null&&_.unshift(Ls(a,T,k))):p||(T=kt(a,g),T!=null&&_.push(Ls(a,T,k)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var Fm=/\r\n?/g,zm=/\u0000|\uFFFD/g;function Qh(n){return(typeof n=="string"?n:""+n).replace(Fm,`
`).replace(zm,"")}function qo(n,i,a){if(i=Qh(i),Qh(n)!==i&&a)throw Error(t(425))}function Ko(){}var Yl=null,Xl=null;function ql(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Kl=typeof setTimeout=="function"?setTimeout:void 0,Bm=typeof clearTimeout=="function"?clearTimeout:void 0,Zh=typeof Promise=="function"?Promise:void 0,jm=typeof queueMicrotask=="function"?queueMicrotask:typeof Zh<"u"?function(n){return Zh.resolve(null).then(n).catch(Dm)}:Kl;function Dm(n){setTimeout(function(){throw n})}function Ql(n,i){var a=i,h=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(h===0){n.removeChild(p),Xe(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=p}while(a);Xe(i)}function wr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Jh(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Ii=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Ii,Fs="__reactProps$"+Ii,Qn="__reactContainer$"+Ii,Zl="__reactEvents$"+Ii,$m="__reactListeners$"+Ii,Om="__reactHandles$"+Ii;function Yr(n){var i=n[Wn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Qn]||a[Wn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Jh(n);n!==null;){if(a=n[Wn])return a;n=Jh(n)}return i}n=a,a=n.parentNode}return null}function zs(n){return n=n[Wn]||n[Qn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Li(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Qo(n){return n[Fs]||null}var Jl=[],Fi=-1;function Sr(n){return{current:n}}function et(n){0>Fi||(n.current=Jl[Fi],Jl[Fi]=null,Fi--)}function qe(n,i){Fi++,Jl[Fi]=n.current,n.current=i}var br={},zt=Sr(br),Yt=Sr(!1),Xr=br;function zi(n,i){var a=n.type.contextTypes;if(!a)return br;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in a)p[g]=i[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=p),p}function Xt(n){return n=n.childContextTypes,n!=null}function Zo(){et(Yt),et(zt)}function ed(n,i,a){if(zt.current!==br)throw Error(t(168));qe(zt,i),qe(Yt,a)}function td(n,i,a){var h=n.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var p in h)if(!(p in i))throw Error(t(108,$e(n)||"Unknown",p));return ne({},a,h)}function Jo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||br,Xr=zt.current,qe(zt,n),qe(Yt,Yt.current),!0}function nd(n,i,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=td(n,i,Xr),h.__reactInternalMemoizedMergedChildContext=n,et(Yt),et(zt),qe(zt,n)):et(Yt),qe(Yt,a)}var Zn=null,ea=!1,eu=!1;function rd(n){Zn===null?Zn=[n]:Zn.push(n)}function Nm(n){ea=!0,rd(n)}function kr(){if(!eu&&Zn!==null){eu=!0;var n=0,i=We;try{var a=Zn;for(We=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}Zn=null,ea=!1}catch(p){throw Zn!==null&&(Zn=Zn.slice(n+1)),ys(xs,kr),p}finally{We=i,eu=!1}}return null}var Bi=[],ji=0,ta=null,na=0,pn=[],mn=0,qr=null,Jn=1,er="";function Kr(n,i){Bi[ji++]=na,Bi[ji++]=ta,ta=n,na=i}function id(n,i,a){pn[mn++]=Jn,pn[mn++]=er,pn[mn++]=qr,qr=n;var h=Jn;n=er;var p=32-Vt(h)-1;h&=~(1<<p),a+=1;var g=32-Vt(i)+p;if(30<g){var _=p-p%5;g=(h&(1<<_)-1).toString(32),h>>=_,p-=_,Jn=1<<32-Vt(i)+p|a<<p|h,er=g+n}else Jn=1<<g|a<<p|h,er=n}function tu(n){n.return!==null&&(Kr(n,1),id(n,1,0))}function nu(n){for(;n===ta;)ta=Bi[--ji],Bi[ji]=null,na=Bi[--ji],Bi[ji]=null;for(;n===qr;)qr=pn[--mn],pn[mn]=null,er=pn[--mn],pn[mn]=null,Jn=pn[--mn],pn[mn]=null}var nn=null,rn=null,rt=!1,Pn=null;function sd(n,i){var a=vn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function od(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,nn=n,rn=wr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,nn=n,rn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=qr!==null?{id:Jn,overflow:er}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=vn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,nn=n,rn=null,!0):!1;default:return!1}}function ru(n){return(n.mode&1)!==0&&(n.flags&128)===0}function iu(n){if(rt){var i=rn;if(i){var a=i;if(!od(n,i)){if(ru(n))throw Error(t(418));i=wr(a.nextSibling);var h=nn;i&&od(n,i)?sd(h,a):(n.flags=n.flags&-4097|2,rt=!1,nn=n)}}else{if(ru(n))throw Error(t(418));n.flags=n.flags&-4097|2,rt=!1,nn=n}}}function ad(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;nn=n}function ra(n){if(n!==nn)return!1;if(!rt)return ad(n),rt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!ql(n.type,n.memoizedProps)),i&&(i=rn)){if(ru(n))throw ld(),Error(t(418));for(;i;)sd(n,i),i=wr(i.nextSibling)}if(ad(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){rn=wr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}rn=null}}else rn=nn?wr(n.stateNode.nextSibling):null;return!0}function ld(){for(var n=rn;n;)n=wr(n.nextSibling)}function Di(){rn=nn=null,rt=!1}function su(n){Pn===null?Pn=[n]:Pn.push(n)}var Wm=I.ReactCurrentBatchConfig;function Bs(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var p=h,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(_){var k=p.refs;_===null?delete k[g]:k[g]=_},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ia(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function ud(n){var i=n._init;return i(n._payload)}function cd(n){function i(F,R){if(n){var B=F.deletions;B===null?(F.deletions=[R],F.flags|=16):B.push(R)}}function a(F,R){if(!n)return null;for(;R!==null;)i(F,R),R=R.sibling;return null}function h(F,R){for(F=new Map;R!==null;)R.key!==null?F.set(R.key,R):F.set(R.index,R),R=R.sibling;return F}function p(F,R){return F=Ir(F,R),F.index=0,F.sibling=null,F}function g(F,R,B){return F.index=B,n?(B=F.alternate,B!==null?(B=B.index,B<R?(F.flags|=2,R):B):(F.flags|=2,R)):(F.flags|=1048576,R)}function _(F){return n&&F.alternate===null&&(F.flags|=2),F}function k(F,R,B,K){return R===null||R.tag!==6?(R=Ku(B,F.mode,K),R.return=F,R):(R=p(R,B),R.return=F,R)}function T(F,R,B,K){var de=B.type;return de===D?H(F,R,B.props.children,K,B.key):R!==null&&(R.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===J&&ud(de)===R.type)?(K=p(R,B.props),K.ref=Bs(F,R,B),K.return=F,K):(K=Ta(B.type,B.key,B.props,null,F.mode,K),K.ref=Bs(F,R,B),K.return=F,K)}function j(F,R,B,K){return R===null||R.tag!==4||R.stateNode.containerInfo!==B.containerInfo||R.stateNode.implementation!==B.implementation?(R=Qu(B,F.mode,K),R.return=F,R):(R=p(R,B.children||[]),R.return=F,R)}function H(F,R,B,K,de){return R===null||R.tag!==7?(R=ii(B,F.mode,K,de),R.return=F,R):(R=p(R,B),R.return=F,R)}function V(F,R,B){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Ku(""+R,F.mode,B),R.return=F,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case U:return B=Ta(R.type,R.key,R.props,null,F.mode,B),B.ref=Bs(F,null,R),B.return=F,B;case O:return R=Qu(R,F.mode,B),R.return=F,R;case J:var K=R._init;return V(F,K(R._payload),B)}if(jr(R)||X(R))return R=ii(R,F.mode,B,null),R.return=F,R;ia(F,R)}return null}function G(F,R,B,K){var de=R!==null?R.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return de!==null?null:k(F,R,""+B,K);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case U:return B.key===de?T(F,R,B,K):null;case O:return B.key===de?j(F,R,B,K):null;case J:return de=B._init,G(F,R,de(B._payload),K)}if(jr(B)||X(B))return de!==null?null:H(F,R,B,K,null);ia(F,B)}return null}function se(F,R,B,K,de){if(typeof K=="string"&&K!==""||typeof K=="number")return F=F.get(B)||null,k(R,F,""+K,de);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case U:return F=F.get(K.key===null?B:K.key)||null,T(R,F,K,de);case O:return F=F.get(K.key===null?B:K.key)||null,j(R,F,K,de);case J:var ye=K._init;return se(F,R,B,ye(K._payload),de)}if(jr(K)||X(K))return F=F.get(B)||null,H(R,F,K,de,null);ia(R,K)}return null}function ue(F,R,B,K){for(var de=null,ye=null,xe=R,_e=R=0,Pt=null;xe!==null&&_e<B.length;_e++){xe.index>_e?(Pt=xe,xe=null):Pt=xe.sibling;var De=G(F,xe,B[_e],K);if(De===null){xe===null&&(xe=Pt);break}n&&xe&&De.alternate===null&&i(F,xe),R=g(De,R,_e),ye===null?de=De:ye.sibling=De,ye=De,xe=Pt}if(_e===B.length)return a(F,xe),rt&&Kr(F,_e),de;if(xe===null){for(;_e<B.length;_e++)xe=V(F,B[_e],K),xe!==null&&(R=g(xe,R,_e),ye===null?de=xe:ye.sibling=xe,ye=xe);return rt&&Kr(F,_e),de}for(xe=h(F,xe);_e<B.length;_e++)Pt=se(xe,F,_e,B[_e],K),Pt!==null&&(n&&Pt.alternate!==null&&xe.delete(Pt.key===null?_e:Pt.key),R=g(Pt,R,_e),ye===null?de=Pt:ye.sibling=Pt,ye=Pt);return n&&xe.forEach(function(Lr){return i(F,Lr)}),rt&&Kr(F,_e),de}function he(F,R,B,K){var de=X(B);if(typeof de!="function")throw Error(t(150));if(B=de.call(B),B==null)throw Error(t(151));for(var ye=de=null,xe=R,_e=R=0,Pt=null,De=B.next();xe!==null&&!De.done;_e++,De=B.next()){xe.index>_e?(Pt=xe,xe=null):Pt=xe.sibling;var Lr=G(F,xe,De.value,K);if(Lr===null){xe===null&&(xe=Pt);break}n&&xe&&Lr.alternate===null&&i(F,xe),R=g(Lr,R,_e),ye===null?de=Lr:ye.sibling=Lr,ye=Lr,xe=Pt}if(De.done)return a(F,xe),rt&&Kr(F,_e),de;if(xe===null){for(;!De.done;_e++,De=B.next())De=V(F,De.value,K),De!==null&&(R=g(De,R,_e),ye===null?de=De:ye.sibling=De,ye=De);return rt&&Kr(F,_e),de}for(xe=h(F,xe);!De.done;_e++,De=B.next())De=se(xe,F,_e,De.value,K),De!==null&&(n&&De.alternate!==null&&xe.delete(De.key===null?_e:De.key),R=g(De,R,_e),ye===null?de=De:ye.sibling=De,ye=De);return n&&xe.forEach(function(wg){return i(F,wg)}),rt&&Kr(F,_e),de}function xt(F,R,B,K){if(typeof B=="object"&&B!==null&&B.type===D&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case U:e:{for(var de=B.key,ye=R;ye!==null;){if(ye.key===de){if(de=B.type,de===D){if(ye.tag===7){a(F,ye.sibling),R=p(ye,B.props.children),R.return=F,F=R;break e}}else if(ye.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===J&&ud(de)===ye.type){a(F,ye.sibling),R=p(ye,B.props),R.ref=Bs(F,ye,B),R.return=F,F=R;break e}a(F,ye);break}else i(F,ye);ye=ye.sibling}B.type===D?(R=ii(B.props.children,F.mode,K,B.key),R.return=F,F=R):(K=Ta(B.type,B.key,B.props,null,F.mode,K),K.ref=Bs(F,R,B),K.return=F,F=K)}return _(F);case O:e:{for(ye=B.key;R!==null;){if(R.key===ye)if(R.tag===4&&R.stateNode.containerInfo===B.containerInfo&&R.stateNode.implementation===B.implementation){a(F,R.sibling),R=p(R,B.children||[]),R.return=F,F=R;break e}else{a(F,R);break}else i(F,R);R=R.sibling}R=Qu(B,F.mode,K),R.return=F,F=R}return _(F);case J:return ye=B._init,xt(F,R,ye(B._payload),K)}if(jr(B))return ue(F,R,B,K);if(X(B))return he(F,R,B,K);ia(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,R!==null&&R.tag===6?(a(F,R.sibling),R=p(R,B),R.return=F,F=R):(a(F,R),R=Ku(B,F.mode,K),R.return=F,F=R),_(F)):a(F,R)}return xt}var $i=cd(!0),hd=cd(!1),sa=Sr(null),oa=null,Oi=null,ou=null;function au(){ou=Oi=oa=null}function lu(n){var i=sa.current;et(sa),n._currentValue=i}function uu(n,i,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===a)break;n=n.return}}function Ni(n,i){oa=n,ou=Oi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(qt=!0),n.firstContext=null)}function gn(n){var i=n._currentValue;if(ou!==n)if(n={context:n,memoizedValue:i,next:null},Oi===null){if(oa===null)throw Error(t(308));Oi=n,oa.dependencies={lanes:0,firstContext:n}}else Oi=Oi.next=n;return i}var Qr=null;function cu(n){Qr===null?Qr=[n]:Qr.push(n)}function dd(n,i,a,h){var p=i.interleaved;return p===null?(a.next=a,cu(i)):(a.next=p.next,p.next=a),i.interleaved=a,tr(n,h)}function tr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Cr=!1;function hu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function nr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Ar(n,i,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(je&2)!==0){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,tr(n,a)}return p=h.interleaved,p===null?(i.next=i,cu(h)):(i.next=p.next,p.next=i),h.interleaved=i,tr(n,a)}function aa(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=n.pendingLanes,a|=h,i.lanes=a,Ss(n,a)}}function pd(n,i){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var p=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?p=g=_:g=g.next=_,a=a.next}while(a!==null);g===null?p=g=i:g=g.next=i}else p=g=i;a={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function la(n,i,a,h){var p=n.updateQueue;Cr=!1;var g=p.firstBaseUpdate,_=p.lastBaseUpdate,k=p.shared.pending;if(k!==null){p.shared.pending=null;var T=k,j=T.next;T.next=null,_===null?g=j:_.next=j,_=T;var H=n.alternate;H!==null&&(H=H.updateQueue,k=H.lastBaseUpdate,k!==_&&(k===null?H.firstBaseUpdate=j:k.next=j,H.lastBaseUpdate=T))}if(g!==null){var V=p.baseState;_=0,H=j=T=null,k=g;do{var G=k.lane,se=k.eventTime;if((h&G)===G){H!==null&&(H=H.next={eventTime:se,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ue=n,he=k;switch(G=i,se=a,he.tag){case 1:if(ue=he.payload,typeof ue=="function"){V=ue.call(se,V,G);break e}V=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=he.payload,G=typeof ue=="function"?ue.call(se,V,G):ue,G==null)break e;V=ne({},V,G);break e;case 2:Cr=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,G=p.effects,G===null?p.effects=[k]:G.push(k))}else se={eventTime:se,lane:G,tag:k.tag,payload:k.payload,callback:k.callback,next:null},H===null?(j=H=se,T=V):H=H.next=se,_|=G;if(k=k.next,k===null){if(k=p.shared.pending,k===null)break;G=k,k=G.next,G.next=null,p.lastBaseUpdate=G,p.shared.pending=null}}while(!0);if(H===null&&(T=V),p.baseState=T,p.firstBaseUpdate=j,p.lastBaseUpdate=H,i=p.shared.interleaved,i!==null){p=i;do _|=p.lane,p=p.next;while(p!==i)}else g===null&&(p.shared.lanes=0);ei|=_,n.lanes=_,n.memoizedState=V}}function md(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var h=n[i],p=h.callback;if(p!==null){if(h.callback=null,h=a,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var js={},Un=Sr(js),Ds=Sr(js),$s=Sr(js);function Zr(n){if(n===js)throw Error(t(174));return n}function du(n,i){switch(qe($s,i),qe(Ds,n),qe(Un,js),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:gi(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=gi(i,n)}et(Un),qe(Un,i)}function Wi(){et(Un),et(Ds),et($s)}function gd(n){Zr($s.current);var i=Zr(Un.current),a=gi(i,n.type);i!==a&&(qe(Ds,n),qe(Un,a))}function fu(n){Ds.current===n&&(et(Un),et(Ds))}var lt=Sr(0);function ua(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var pu=[];function mu(){for(var n=0;n<pu.length;n++)pu[n]._workInProgressVersionPrimary=null;pu.length=0}var ca=I.ReactCurrentDispatcher,gu=I.ReactCurrentBatchConfig,Jr=0,ut=null,St=null,Ct=null,ha=!1,Os=!1,Ns=0,Um=0;function Bt(){throw Error(t(321))}function yu(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!An(n[a],i[a]))return!1;return!0}function xu(n,i,a,h,p,g){if(Jr=g,ut=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ca.current=n===null||n.memoizedState===null?Ym:Xm,n=a(h,p),Os){g=0;do{if(Os=!1,Ns=0,25<=g)throw Error(t(301));g+=1,Ct=St=null,i.updateQueue=null,ca.current=qm,n=a(h,p)}while(Os)}if(ca.current=pa,i=St!==null&&St.next!==null,Jr=0,Ct=St=ut=null,ha=!1,i)throw Error(t(300));return n}function vu(){var n=Ns!==0;return Ns=0,n}function Gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ut.memoizedState=Ct=n:Ct=Ct.next=n,Ct}function yn(){if(St===null){var n=ut.alternate;n=n!==null?n.memoizedState:null}else n=St.next;var i=Ct===null?ut.memoizedState:Ct.next;if(i!==null)Ct=i,St=n;else{if(n===null)throw Error(t(310));St=n,n={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Ct===null?ut.memoizedState=Ct=n:Ct=Ct.next=n}return Ct}function Ws(n,i){return typeof i=="function"?i(n):i}function _u(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=St,p=h.baseQueue,g=a.pending;if(g!==null){if(p!==null){var _=p.next;p.next=g.next,g.next=_}h.baseQueue=p=g,a.pending=null}if(p!==null){g=p.next,h=h.baseState;var k=_=null,T=null,j=g;do{var H=j.lane;if((Jr&H)===H)T!==null&&(T=T.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),h=j.hasEagerState?j.eagerState:n(h,j.action);else{var V={lane:H,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};T===null?(k=T=V,_=h):T=T.next=V,ut.lanes|=H,ei|=H}j=j.next}while(j!==null&&j!==g);T===null?_=h:T.next=k,An(h,i.memoizedState)||(qt=!0),i.memoizedState=h,i.baseState=_,i.baseQueue=T,a.lastRenderedState=h}if(n=a.interleaved,n!==null){p=n;do g=p.lane,ut.lanes|=g,ei|=g,p=p.next;while(p!==n)}else p===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function wu(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,p=a.pending,g=i.memoizedState;if(p!==null){a.pending=null;var _=p=p.next;do g=n(g,_.action),_=_.next;while(_!==p);An(g,i.memoizedState)||(qt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,h]}function yd(){}function xd(n,i){var a=ut,h=yn(),p=i(),g=!An(h.memoizedState,p);if(g&&(h.memoizedState=p,qt=!0),h=h.queue,Su(wd.bind(null,a,h,n),[n]),h.getSnapshot!==i||g||Ct!==null&&Ct.memoizedState.tag&1){if(a.flags|=2048,Us(9,_d.bind(null,a,h,p,i),void 0,null),At===null)throw Error(t(349));(Jr&30)!==0||vd(a,i,p)}return p}function vd(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=ut.updateQueue,i===null?(i={lastEffect:null,stores:null},ut.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function _d(n,i,a,h){i.value=a,i.getSnapshot=h,Sd(i)&&bd(n)}function wd(n,i,a){return a(function(){Sd(i)&&bd(n)})}function Sd(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!An(n,a)}catch{return!0}}function bd(n){var i=tr(n,1);i!==null&&Rn(i,n,1,-1)}function kd(n){var i=Gn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:n},i.queue=n,n=n.dispatch=Vm.bind(null,ut,n),[i.memoizedState,n]}function Us(n,i,a,h){return n={tag:n,create:i,destroy:a,deps:h,next:null},i=ut.updateQueue,i===null?(i={lastEffect:null,stores:null},ut.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,i.lastEffect=n)),n}function Cd(){return yn().memoizedState}function da(n,i,a,h){var p=Gn();ut.flags|=n,p.memoizedState=Us(1|i,a,void 0,h===void 0?null:h)}function fa(n,i,a,h){var p=yn();h=h===void 0?null:h;var g=void 0;if(St!==null){var _=St.memoizedState;if(g=_.destroy,h!==null&&yu(h,_.deps)){p.memoizedState=Us(i,a,g,h);return}}ut.flags|=n,p.memoizedState=Us(1|i,a,g,h)}function Ad(n,i){return da(8390656,8,n,i)}function Su(n,i){return fa(2048,8,n,i)}function Pd(n,i){return fa(4,2,n,i)}function Td(n,i){return fa(4,4,n,i)}function Ed(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Md(n,i,a){return a=a!=null?a.concat([n]):null,fa(4,4,Ed.bind(null,i,n),a)}function bu(){}function Rd(n,i){var a=yn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&yu(i,h[1])?h[0]:(a.memoizedState=[n,i],n)}function Id(n,i){var a=yn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&yu(i,h[1])?h[0]:(n=n(),a.memoizedState=[n,i],n)}function Ld(n,i,a){return(Jr&21)===0?(n.baseState&&(n.baseState=!1,qt=!0),n.memoizedState=a):(An(a,i)||(a=Bo(),ut.lanes|=a,ei|=a,n.baseState=!0),i)}function Gm(n,i){var a=We;We=a!==0&&4>a?a:4,n(!0);var h=gu.transition;gu.transition={};try{n(!1),i()}finally{We=a,gu.transition=h}}function Fd(){return yn().memoizedState}function Hm(n,i,a){var h=Mr(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},zd(n))Bd(i,a);else if(a=dd(n,i,a,h),a!==null){var p=Ut();Rn(a,n,h,p),jd(a,i,h)}}function Vm(n,i,a){var h=Mr(n),p={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(zd(n))Bd(i,p);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var _=i.lastRenderedState,k=g(_,a);if(p.hasEagerState=!0,p.eagerState=k,An(k,_)){var T=i.interleaved;T===null?(p.next=p,cu(i)):(p.next=T.next,T.next=p),i.interleaved=p;return}}catch{}finally{}a=dd(n,i,p,h),a!==null&&(p=Ut(),Rn(a,n,h,p),jd(a,i,h))}}function zd(n){var i=n.alternate;return n===ut||i!==null&&i===ut}function Bd(n,i){Os=ha=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function jd(n,i,a){if((a&4194240)!==0){var h=i.lanes;h&=n.pendingLanes,a|=h,i.lanes=a,Ss(n,a)}}var pa={readContext:gn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},Ym={readContext:gn,useCallback:function(n,i){return Gn().memoizedState=[n,i===void 0?null:i],n},useContext:gn,useEffect:Ad,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,da(4194308,4,Ed.bind(null,i,n),a)},useLayoutEffect:function(n,i){return da(4194308,4,n,i)},useInsertionEffect:function(n,i){return da(4,2,n,i)},useMemo:function(n,i){var a=Gn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var h=Gn();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},h.queue=n,n=n.dispatch=Hm.bind(null,ut,n),[h.memoizedState,n]},useRef:function(n){var i=Gn();return n={current:n},i.memoizedState=n},useState:kd,useDebugValue:bu,useDeferredValue:function(n){return Gn().memoizedState=n},useTransition:function(){var n=kd(!1),i=n[0];return n=Gm.bind(null,n[1]),Gn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var h=ut,p=Gn();if(rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),At===null)throw Error(t(349));(Jr&30)!==0||vd(h,i,a)}p.memoizedState=a;var g={value:a,getSnapshot:i};return p.queue=g,Ad(wd.bind(null,h,g,n),[n]),h.flags|=2048,Us(9,_d.bind(null,h,g,a,i),void 0,null),a},useId:function(){var n=Gn(),i=At.identifierPrefix;if(rt){var a=er,h=Jn;a=(h&~(1<<32-Vt(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ns++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Um++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Xm={readContext:gn,useCallback:Rd,useContext:gn,useEffect:Su,useImperativeHandle:Md,useInsertionEffect:Pd,useLayoutEffect:Td,useMemo:Id,useReducer:_u,useRef:Cd,useState:function(){return _u(Ws)},useDebugValue:bu,useDeferredValue:function(n){var i=yn();return Ld(i,St.memoizedState,n)},useTransition:function(){var n=_u(Ws)[0],i=yn().memoizedState;return[n,i]},useMutableSource:yd,useSyncExternalStore:xd,useId:Fd,unstable_isNewReconciler:!1},qm={readContext:gn,useCallback:Rd,useContext:gn,useEffect:Su,useImperativeHandle:Md,useInsertionEffect:Pd,useLayoutEffect:Td,useMemo:Id,useReducer:wu,useRef:Cd,useState:function(){return wu(Ws)},useDebugValue:bu,useDeferredValue:function(n){var i=yn();return St===null?i.memoizedState=n:Ld(i,St.memoizedState,n)},useTransition:function(){var n=wu(Ws)[0],i=yn().memoizedState;return[n,i]},useMutableSource:yd,useSyncExternalStore:xd,useId:Fd,unstable_isNewReconciler:!1};function Tn(n,i){if(n&&n.defaultProps){i=ne({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function ku(n,i,a,h){i=n.memoizedState,a=a(h,i),a=a==null?i:ne({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var ma={isMounted:function(n){return(n=n._reactInternals)?Cn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var h=Ut(),p=Mr(n),g=nr(h,p);g.payload=i,a!=null&&(g.callback=a),i=Ar(n,g,p),i!==null&&(Rn(i,n,p,h),aa(i,n,p))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var h=Ut(),p=Mr(n),g=nr(h,p);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Ar(n,g,p),i!==null&&(Rn(i,n,p,h),aa(i,n,p))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Ut(),h=Mr(n),p=nr(a,h);p.tag=2,i!=null&&(p.callback=i),i=Ar(n,p,h),i!==null&&(Rn(i,n,h,a),aa(i,n,h))}};function Dd(n,i,a,h,p,g,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,_):i.prototype&&i.prototype.isPureReactComponent?!Es(a,h)||!Es(p,g):!0}function $d(n,i,a){var h=!1,p=br,g=i.contextType;return typeof g=="object"&&g!==null?g=gn(g):(p=Xt(i)?Xr:zt.current,h=i.contextTypes,g=(h=h!=null)?zi(n,p):br),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ma,n.stateNode=i,i._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=g),i}function Od(n,i,a,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==n&&ma.enqueueReplaceState(i,i.state,null)}function Cu(n,i,a,h){var p=n.stateNode;p.props=a,p.state=n.memoizedState,p.refs={},hu(n);var g=i.contextType;typeof g=="object"&&g!==null?p.context=gn(g):(g=Xt(i)?Xr:zt.current,p.context=zi(n,g)),p.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(ku(n,i,g,a),p.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&ma.enqueueReplaceState(p,p.state,null),la(n,a,p,h),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function Ui(n,i){try{var a="",h=i;do a+=be(h),h=h.return;while(h);var p=a}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:p,digest:null}}function Au(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Pu(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Km=typeof WeakMap=="function"?WeakMap:Map;function Nd(n,i,a){a=nr(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){Sa||(Sa=!0,Wu=h),Pu(n,i)},a}function Wd(n,i,a){a=nr(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var p=i.value;a.payload=function(){return h(p)},a.callback=function(){Pu(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Pu(n,i),typeof h!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),a}function Ud(n,i,a){var h=n.pingCache;if(h===null){h=n.pingCache=new Km;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(a)||(p.add(a),n=cg.bind(null,n,i,a),i.then(n,n))}function Gd(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Hd(n,i,a,h,p){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=nr(-1,1),i.tag=2,Ar(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var Qm=I.ReactCurrentOwner,qt=!1;function Wt(n,i,a,h){i.child=n===null?hd(i,null,a,h):$i(i,n.child,a,h)}function Vd(n,i,a,h,p){a=a.render;var g=i.ref;return Ni(i,p),h=xu(n,i,a,h,g,p),a=vu(),n!==null&&!qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,rr(n,i,p)):(rt&&a&&tu(i),i.flags|=1,Wt(n,i,h,p),i.child)}function Yd(n,i,a,h,p){if(n===null){var g=a.type;return typeof g=="function"&&!qu(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Xd(n,i,g,h,p)):(n=Ta(a.type,null,h,i,i.mode,p),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&p)===0){var _=g.memoizedProps;if(a=a.compare,a=a!==null?a:Es,a(_,h)&&n.ref===i.ref)return rr(n,i,p)}return i.flags|=1,n=Ir(g,h),n.ref=i.ref,n.return=i,i.child=n}function Xd(n,i,a,h,p){if(n!==null){var g=n.memoizedProps;if(Es(g,h)&&n.ref===i.ref)if(qt=!1,i.pendingProps=h=g,(n.lanes&p)!==0)(n.flags&131072)!==0&&(qt=!0);else return i.lanes=n.lanes,rr(n,i,p)}return Tu(n,i,a,h,p)}function qd(n,i,a){var h=i.pendingProps,p=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Hi,sn),sn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,qe(Hi,sn),sn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,qe(Hi,sn),sn|=h}else g!==null?(h=g.baseLanes|a,i.memoizedState=null):h=a,qe(Hi,sn),sn|=h;return Wt(n,i,p,a),i.child}function Kd(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Tu(n,i,a,h,p){var g=Xt(a)?Xr:zt.current;return g=zi(i,g),Ni(i,p),a=xu(n,i,a,h,g,p),h=vu(),n!==null&&!qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,rr(n,i,p)):(rt&&h&&tu(i),i.flags|=1,Wt(n,i,a,p),i.child)}function Qd(n,i,a,h,p){if(Xt(a)){var g=!0;Jo(i)}else g=!1;if(Ni(i,p),i.stateNode===null)ya(n,i),$d(i,a,h),Cu(i,a,h,p),h=!0;else if(n===null){var _=i.stateNode,k=i.memoizedProps;_.props=k;var T=_.context,j=a.contextType;typeof j=="object"&&j!==null?j=gn(j):(j=Xt(a)?Xr:zt.current,j=zi(i,j));var H=a.getDerivedStateFromProps,V=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function";V||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==h||T!==j)&&Od(i,_,h,j),Cr=!1;var G=i.memoizedState;_.state=G,la(i,h,_,p),T=i.memoizedState,k!==h||G!==T||Yt.current||Cr?(typeof H=="function"&&(ku(i,a,H,h),T=i.memoizedState),(k=Cr||Dd(i,a,k,h,G,T,j))?(V||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=T),_.props=h,_.state=T,_.context=j,h=k):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{_=i.stateNode,fd(n,i),k=i.memoizedProps,j=i.type===i.elementType?k:Tn(i.type,k),_.props=j,V=i.pendingProps,G=_.context,T=a.contextType,typeof T=="object"&&T!==null?T=gn(T):(T=Xt(a)?Xr:zt.current,T=zi(i,T));var se=a.getDerivedStateFromProps;(H=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==V||G!==T)&&Od(i,_,h,T),Cr=!1,G=i.memoizedState,_.state=G,la(i,h,_,p);var ue=i.memoizedState;k!==V||G!==ue||Yt.current||Cr?(typeof se=="function"&&(ku(i,a,se,h),ue=i.memoizedState),(j=Cr||Dd(i,a,j,h,G,ue,T)||!1)?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,ue,T),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,ue,T)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||k===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ue),_.props=h,_.state=ue,_.context=T,h=j):(typeof _.componentDidUpdate!="function"||k===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),h=!1)}return Eu(n,i,a,h,g,p)}function Eu(n,i,a,h,p,g){Kd(n,i);var _=(i.flags&128)!==0;if(!h&&!_)return p&&nd(i,a,!1),rr(n,i,g);h=i.stateNode,Qm.current=i;var k=_&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,n!==null&&_?(i.child=$i(i,n.child,null,g),i.child=$i(i,null,k,g)):Wt(n,i,k,g),i.memoizedState=h.state,p&&nd(i,a,!0),i.child}function Zd(n){var i=n.stateNode;i.pendingContext?ed(n,i.pendingContext,i.pendingContext!==i.context):i.context&&ed(n,i.context,!1),du(n,i.containerInfo)}function Jd(n,i,a,h,p){return Di(),su(p),i.flags|=256,Wt(n,i,a,h),i.child}var Mu={dehydrated:null,treeContext:null,retryLane:0};function Ru(n){return{baseLanes:n,cachePool:null,transitions:null}}function ef(n,i,a){var h=i.pendingProps,p=lt.current,g=!1,_=(i.flags&128)!==0,k;if((k=_)||(k=n!==null&&n.memoizedState===null?!1:(p&2)!==0),k?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),qe(lt,p&1),n===null)return iu(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(_=h.children,n=h.fallback,g?(h=i.mode,g=i.child,_={mode:"hidden",children:_},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=_):g=Ea(_,h,0,null),n=ii(n,h,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=Ru(a),i.memoizedState=Mu,n):Iu(i,_));if(p=n.memoizedState,p!==null&&(k=p.dehydrated,k!==null))return Zm(n,i,_,h,k,p,a);if(g){g=h.fallback,_=i.mode,p=n.child,k=p.sibling;var T={mode:"hidden",children:h.children};return(_&1)===0&&i.child!==p?(h=i.child,h.childLanes=0,h.pendingProps=T,i.deletions=null):(h=Ir(p,T),h.subtreeFlags=p.subtreeFlags&14680064),k!==null?g=Ir(k,g):(g=ii(g,_,a,null),g.flags|=2),g.return=i,h.return=i,h.sibling=g,i.child=h,h=g,g=i.child,_=n.child.memoizedState,_=_===null?Ru(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},g.memoizedState=_,g.childLanes=n.childLanes&~a,i.memoizedState=Mu,h}return g=n.child,n=g.sibling,h=Ir(g,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=h,i.memoizedState=null,h}function Iu(n,i){return i=Ea({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ga(n,i,a,h){return h!==null&&su(h),$i(i,n.child,null,a),n=Iu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Zm(n,i,a,h,p,g,_){if(a)return i.flags&256?(i.flags&=-257,h=Au(Error(t(422))),ga(n,i,_,h)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=h.fallback,p=i.mode,h=Ea({mode:"visible",children:h.children},p,0,null),g=ii(g,p,_,null),g.flags|=2,h.return=i,g.return=i,h.sibling=g,i.child=h,(i.mode&1)!==0&&$i(i,n.child,null,_),i.child.memoizedState=Ru(_),i.memoizedState=Mu,g);if((i.mode&1)===0)return ga(n,i,_,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var k=h.dgst;return h=k,g=Error(t(419)),h=Au(g,h,void 0),ga(n,i,_,h)}if(k=(_&n.childLanes)!==0,qt||k){if(h=At,h!==null){switch(_&-_){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|_))!==0?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,tr(n,p),Rn(h,n,p,-1))}return Xu(),h=Au(Error(t(421))),ga(n,i,_,h)}return p.data==="$?"?(i.flags|=128,i.child=n.child,i=hg.bind(null,n),p._reactRetry=i,null):(n=g.treeContext,rn=wr(p.nextSibling),nn=i,rt=!0,Pn=null,n!==null&&(pn[mn++]=Jn,pn[mn++]=er,pn[mn++]=qr,Jn=n.id,er=n.overflow,qr=i),i=Iu(i,h.children),i.flags|=4096,i)}function tf(n,i,a){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),uu(n.return,i,a)}function Lu(n,i,a,h,p){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:p}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=p)}function nf(n,i,a){var h=i.pendingProps,p=h.revealOrder,g=h.tail;if(Wt(n,i,h.children,a),h=lt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tf(n,a,i);else if(n.tag===19)tf(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(qe(lt,h),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(a=i.child,p=null;a!==null;)n=a.alternate,n!==null&&ua(n)===null&&(p=a),a=a.sibling;a=p,a===null?(p=i.child,i.child=null):(p=a.sibling,a.sibling=null),Lu(i,!1,p,a,g);break;case"backwards":for(a=null,p=i.child,i.child=null;p!==null;){if(n=p.alternate,n!==null&&ua(n)===null){i.child=p;break}n=p.sibling,p.sibling=a,a=p,p=n}Lu(i,!0,a,null,g);break;case"together":Lu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ya(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function rr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),ei|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Ir(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Ir(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Jm(n,i,a){switch(i.tag){case 3:Zd(i),Di();break;case 5:gd(i);break;case 1:Xt(i.type)&&Jo(i);break;case 4:du(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,p=i.memoizedProps.value;qe(sa,h._currentValue),h._currentValue=p;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(qe(lt,lt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?ef(n,i,a):(qe(lt,lt.current&1),n=rr(n,i,a),n!==null?n.sibling:null);qe(lt,lt.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(n.flags&128)!==0){if(h)return nf(n,i,a);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),qe(lt,lt.current),h)break;return null;case 22:case 23:return i.lanes=0,qd(n,i,a)}return rr(n,i,a)}var rf,Fu,sf,of;rf=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Fu=function(){},sf=function(n,i,a,h){var p=n.memoizedProps;if(p!==h){n=i.stateNode,Zr(Un.current);var g=null;switch(a){case"input":p=Ht(n,p),h=Ht(n,h),g=[];break;case"select":p=ne({},p,{value:void 0}),h=ne({},h,{value:void 0}),g=[];break;case"textarea":p=hs(n,p),h=hs(n,h),g=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Ko)}Ne(a,h);var _;a=null;for(j in p)if(!h.hasOwnProperty(j)&&p.hasOwnProperty(j)&&p[j]!=null)if(j==="style"){var k=p[j];for(_ in k)k.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?g||(g=[]):(g=g||[]).push(j,null));for(j in h){var T=h[j];if(k=p!=null?p[j]:void 0,h.hasOwnProperty(j)&&T!==k&&(T!=null||k!=null))if(j==="style")if(k){for(_ in k)!k.hasOwnProperty(_)||T&&T.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in T)T.hasOwnProperty(_)&&k[_]!==T[_]&&(a||(a={}),a[_]=T[_])}else a||(g||(g=[]),g.push(j,a)),a=T;else j==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,k=k?k.__html:void 0,T!=null&&k!==T&&(g=g||[]).push(j,T)):j==="children"?typeof T!="string"&&typeof T!="number"||(g=g||[]).push(j,""+T):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(o.hasOwnProperty(j)?(T!=null&&j==="onScroll"&&Je("scroll",n),g||k===T||(g=[])):(g=g||[]).push(j,T))}a&&(g=g||[]).push("style",a);var j=g;(i.updateQueue=j)&&(i.flags|=4)}},of=function(n,i,a,h){a!==h&&(i.flags|=4)};function Gs(n,i){if(!rt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function jt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(i)for(var p=n.child;p!==null;)a|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)a|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=h,n.childLanes=a,i}function eg(n,i,a){var h=i.pendingProps;switch(nu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(i),null;case 1:return Xt(i.type)&&Zo(),jt(i),null;case 3:return h=i.stateNode,Wi(),et(Yt),et(zt),mu(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(ra(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pn!==null&&(Hu(Pn),Pn=null))),Fu(n,i),jt(i),null;case 5:fu(i);var p=Zr($s.current);if(a=i.type,n!==null&&i.stateNode!=null)sf(n,i,a,h,p),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return jt(i),null}if(n=Zr(Un.current),ra(i)){h=i.stateNode,a=i.type;var g=i.memoizedProps;switch(h[Wn]=i,h[Fs]=g,n=(i.mode&1)!==0,a){case"dialog":Je("cancel",h),Je("close",h);break;case"iframe":case"object":case"embed":Je("load",h);break;case"video":case"audio":for(p=0;p<Rs.length;p++)Je(Rs[p],h);break;case"source":Je("error",h);break;case"img":case"image":case"link":Je("error",h),Je("load",h);break;case"details":Je("toggle",h);break;case"input":hn(h,g),Je("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Je("invalid",h);break;case"textarea":Co(h,g),Je("invalid",h)}Ne(a,g),p=null;for(var _ in g)if(g.hasOwnProperty(_)){var k=g[_];_==="children"?typeof k=="string"?h.textContent!==k&&(g.suppressHydrationWarning!==!0&&qo(h.textContent,k,n),p=["children",k]):typeof k=="number"&&h.textContent!==""+k&&(g.suppressHydrationWarning!==!0&&qo(h.textContent,k,n),p=["children",""+k]):o.hasOwnProperty(_)&&k!=null&&_==="onScroll"&&Je("scroll",h)}switch(a){case"input":Dn(h),en(h,g,!0);break;case"textarea":Dn(h),mi(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Ko)}h=p,i.updateQueue=h,h!==null&&(i.flags|=4)}else{_=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ds(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=_.createElement(a,{is:h.is}):(n=_.createElement(a),a==="select"&&(_=n,h.multiple?_.multiple=!0:h.size&&(_.size=h.size))):n=_.createElementNS(n,a),n[Wn]=i,n[Fs]=h,rf(n,i,!1,!1),i.stateNode=n;e:{switch(_=yi(a,h),a){case"dialog":Je("cancel",n),Je("close",n),p=h;break;case"iframe":case"object":case"embed":Je("load",n),p=h;break;case"video":case"audio":for(p=0;p<Rs.length;p++)Je(Rs[p],n);p=h;break;case"source":Je("error",n),p=h;break;case"img":case"image":case"link":Je("error",n),Je("load",n),p=h;break;case"details":Je("toggle",n),p=h;break;case"input":hn(n,h),p=Ht(n,h),Je("invalid",n);break;case"option":p=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},p=ne({},h,{value:void 0}),Je("invalid",n);break;case"textarea":Co(n,h),p=hs(n,h),Je("invalid",n);break;default:p=h}Ne(a,p),k=p;for(g in k)if(k.hasOwnProperty(g)){var T=k[g];g==="style"?$r(n,T):g==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&Dr(n,T)):g==="children"?typeof T=="string"?(a!=="textarea"||T!=="")&&gt(n,T):typeof T=="number"&&gt(n,""+T):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?T!=null&&g==="onScroll"&&Je("scroll",n):T!=null&&E(n,g,T,_))}switch(a){case"input":Dn(n),en(n,h,!1);break;case"textarea":Dn(n),mi(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Fe(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?kn(n,!!h.multiple,g,!1):h.defaultValue!=null&&kn(n,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=Ko)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return jt(i),null;case 6:if(n&&i.stateNode!=null)of(n,i,n.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=Zr($s.current),Zr(Un.current),ra(i)){if(h=i.stateNode,a=i.memoizedProps,h[Wn]=i,(g=h.nodeValue!==a)&&(n=nn,n!==null))switch(n.tag){case 3:qo(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&qo(h.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Wn]=i,i.stateNode=h}return jt(i),null;case 13:if(et(lt),h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&rn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)ld(),Di(),i.flags|=98560,g=!1;else if(g=ra(i),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Wn]=i}else Di(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;jt(i),g=!1}else Pn!==null&&(Hu(Pn),Pn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(lt.current&1)!==0?bt===0&&(bt=3):Xu())),i.updateQueue!==null&&(i.flags|=4),jt(i),null);case 4:return Wi(),Fu(n,i),n===null&&Is(i.stateNode.containerInfo),jt(i),null;case 10:return lu(i.type._context),jt(i),null;case 17:return Xt(i.type)&&Zo(),jt(i),null;case 19:if(et(lt),g=i.memoizedState,g===null)return jt(i),null;if(h=(i.flags&128)!==0,_=g.rendering,_===null)if(h)Gs(g,!1);else{if(bt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=ua(n),_!==null){for(i.flags|=128,Gs(g,!1),h=_.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)g=a,n=h,g.flags&=14680066,_=g.alternate,_===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,g.type=_.type,n=_.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return qe(lt,lt.current&1|2),i.child}n=n.sibling}g.tail!==null&&ot()>Vi&&(i.flags|=128,h=!0,Gs(g,!1),i.lanes=4194304)}else{if(!h)if(n=ua(_),n!==null){if(i.flags|=128,h=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Gs(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!rt)return jt(i),null}else 2*ot()-g.renderingStartTime>Vi&&a!==1073741824&&(i.flags|=128,h=!0,Gs(g,!1),i.lanes=4194304);g.isBackwards?(_.sibling=i.child,i.child=_):(a=g.last,a!==null?a.sibling=_:i.child=_,g.last=_)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=ot(),i.sibling=null,a=lt.current,qe(lt,h?a&1|2:a&1),i):(jt(i),null);case 22:case 23:return Yu(),h=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(sn&1073741824)!==0&&(jt(i),i.subtreeFlags&6&&(i.flags|=8192)):jt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function tg(n,i){switch(nu(i),i.tag){case 1:return Xt(i.type)&&Zo(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Wi(),et(Yt),et(zt),mu(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return fu(i),null;case 13:if(et(lt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Di()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return et(lt),null;case 4:return Wi(),null;case 10:return lu(i.type._context),null;case 22:case 23:return Yu(),null;case 24:return null;default:return null}}var xa=!1,Dt=!1,ng=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Gi(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ft(n,i,h)}else a.current=null}function zu(n,i,a){try{a()}catch(h){ft(n,i,h)}}var af=!1;function rg(n,i){if(Yl=Ft,n=Dh(),$l(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var p=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var _=0,k=-1,T=-1,j=0,H=0,V=n,G=null;t:for(;;){for(var se;V!==a||p!==0&&V.nodeType!==3||(k=_+p),V!==g||h!==0&&V.nodeType!==3||(T=_+h),V.nodeType===3&&(_+=V.nodeValue.length),(se=V.firstChild)!==null;)G=V,V=se;for(;;){if(V===n)break t;if(G===a&&++j===p&&(k=_),G===g&&++H===h&&(T=_),(se=V.nextSibling)!==null)break;V=G,G=V.parentNode}V=se}a=k===-1||T===-1?null:{start:k,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(Xl={focusedElem:n,selectionRange:a},Ft=!1,ae=i;ae!==null;)if(i=ae,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ae=n;else for(;ae!==null;){i=ae;try{var ue=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var he=ue.memoizedProps,xt=ue.memoizedState,F=i.stateNode,R=F.getSnapshotBeforeUpdate(i.elementType===i.type?he:Tn(i.type,he),xt);F.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var B=i.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(K){ft(i,i.return,K)}if(n=i.sibling,n!==null){n.return=i.return,ae=n;break}ae=i.return}return ue=af,af=!1,ue}function Hs(n,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&n)===n){var g=p.destroy;p.destroy=void 0,g!==void 0&&zu(i,a,g)}p=p.next}while(p!==h)}}function va(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function Bu(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function lf(n){var i=n.alternate;i!==null&&(n.alternate=null,lf(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Wn],delete i[Fs],delete i[Zl],delete i[$m],delete i[Om])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function uf(n){return n.tag===5||n.tag===3||n.tag===4}function cf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||uf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ju(n,i,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ko));else if(h!==4&&(n=n.child,n!==null))for(ju(n,i,a),n=n.sibling;n!==null;)ju(n,i,a),n=n.sibling}function Du(n,i,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Du(n,i,a),n=n.sibling;n!==null;)Du(n,i,a),n=n.sibling}var Mt=null,En=!1;function Pr(n,i,a){for(a=a.child;a!==null;)hf(n,i,a),a=a.sibling}function hf(n,i,a){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(xr,a)}catch{}switch(a.tag){case 5:Dt||Gi(a,i);case 6:var h=Mt,p=En;Mt=null,Pr(n,i,a),Mt=h,En=p,Mt!==null&&(En?(n=Mt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Mt.removeChild(a.stateNode));break;case 18:Mt!==null&&(En?(n=Mt,a=a.stateNode,n.nodeType===8?Ql(n.parentNode,a):n.nodeType===1&&Ql(n,a),Xe(n)):Ql(Mt,a.stateNode));break;case 4:h=Mt,p=En,Mt=a.stateNode.containerInfo,En=!0,Pr(n,i,a),Mt=h,En=p;break;case 0:case 11:case 14:case 15:if(!Dt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var g=p,_=g.destroy;g=g.tag,_!==void 0&&((g&2)!==0||(g&4)!==0)&&zu(a,i,_),p=p.next}while(p!==h)}Pr(n,i,a);break;case 1:if(!Dt&&(Gi(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(k){ft(a,i,k)}Pr(n,i,a);break;case 21:Pr(n,i,a);break;case 22:a.mode&1?(Dt=(h=Dt)||a.memoizedState!==null,Pr(n,i,a),Dt=h):Pr(n,i,a);break;default:Pr(n,i,a)}}function df(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new ng),i.forEach(function(h){var p=dg.bind(null,n,h);a.has(h)||(a.add(h),h.then(p,p))})}}function Mn(n,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var p=a[h];try{var g=n,_=i,k=_;e:for(;k!==null;){switch(k.tag){case 5:Mt=k.stateNode,En=!1;break e;case 3:Mt=k.stateNode.containerInfo,En=!0;break e;case 4:Mt=k.stateNode.containerInfo,En=!0;break e}k=k.return}if(Mt===null)throw Error(t(160));hf(g,_,p),Mt=null,En=!1;var T=p.alternate;T!==null&&(T.return=null),p.return=null}catch(j){ft(p,i,j)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ff(i,n),i=i.sibling}function ff(n,i){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Mn(i,n),Hn(n),h&4){try{Hs(3,n,n.return),va(3,n)}catch(he){ft(n,n.return,he)}try{Hs(5,n,n.return)}catch(he){ft(n,n.return,he)}}break;case 1:Mn(i,n),Hn(n),h&512&&a!==null&&Gi(a,a.return);break;case 5:if(Mn(i,n),Hn(n),h&512&&a!==null&&Gi(a,a.return),n.flags&32){var p=n.stateNode;try{gt(p,"")}catch(he){ft(n,n.return,he)}}if(h&4&&(p=n.stateNode,p!=null)){var g=n.memoizedProps,_=a!==null?a.memoizedProps:g,k=n.type,T=n.updateQueue;if(n.updateQueue=null,T!==null)try{k==="input"&&g.type==="radio"&&g.name!=null&&Br(p,g),yi(k,_);var j=yi(k,g);for(_=0;_<T.length;_+=2){var H=T[_],V=T[_+1];H==="style"?$r(p,V):H==="dangerouslySetInnerHTML"?Dr(p,V):H==="children"?gt(p,V):E(p,H,V,j)}switch(k){case"input":hr(p,g);break;case"textarea":Ao(p,g);break;case"select":var G=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var se=g.value;se!=null?kn(p,!!g.multiple,se,!1):G!==!!g.multiple&&(g.defaultValue!=null?kn(p,!!g.multiple,g.defaultValue,!0):kn(p,!!g.multiple,g.multiple?[]:"",!1))}p[Fs]=g}catch(he){ft(n,n.return,he)}}break;case 6:if(Mn(i,n),Hn(n),h&4){if(n.stateNode===null)throw Error(t(162));p=n.stateNode,g=n.memoizedProps;try{p.nodeValue=g}catch(he){ft(n,n.return,he)}}break;case 3:if(Mn(i,n),Hn(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Xe(i.containerInfo)}catch(he){ft(n,n.return,he)}break;case 4:Mn(i,n),Hn(n);break;case 13:Mn(i,n),Hn(n),p=n.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||(Nu=ot())),h&4&&df(n);break;case 22:if(H=a!==null&&a.memoizedState!==null,n.mode&1?(Dt=(j=Dt)||H,Mn(i,n),Dt=j):Mn(i,n),Hn(n),h&8192){if(j=n.memoizedState!==null,(n.stateNode.isHidden=j)&&!H&&(n.mode&1)!==0)for(ae=n,H=n.child;H!==null;){for(V=ae=H;ae!==null;){switch(G=ae,se=G.child,G.tag){case 0:case 11:case 14:case 15:Hs(4,G,G.return);break;case 1:Gi(G,G.return);var ue=G.stateNode;if(typeof ue.componentWillUnmount=="function"){h=G,a=G.return;try{i=h,ue.props=i.memoizedProps,ue.state=i.memoizedState,ue.componentWillUnmount()}catch(he){ft(h,a,he)}}break;case 5:Gi(G,G.return);break;case 22:if(G.memoizedState!==null){gf(V);continue}}se!==null?(se.return=G,ae=se):gf(V)}H=H.sibling}e:for(H=null,V=n;;){if(V.tag===5){if(H===null){H=V;try{p=V.stateNode,j?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(k=V.stateNode,T=V.memoizedProps.style,_=T!=null&&T.hasOwnProperty("display")?T.display:null,k.style.display=fr("display",_))}catch(he){ft(n,n.return,he)}}}else if(V.tag===6){if(H===null)try{V.stateNode.nodeValue=j?"":V.memoizedProps}catch(he){ft(n,n.return,he)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===n)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===n)break e;for(;V.sibling===null;){if(V.return===null||V.return===n)break e;H===V&&(H=null),V=V.return}H===V&&(H=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:Mn(i,n),Hn(n),h&4&&df(n);break;case 21:break;default:Mn(i,n),Hn(n)}}function Hn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(uf(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(gt(p,""),h.flags&=-33);var g=cf(n);Du(n,g,p);break;case 3:case 4:var _=h.stateNode.containerInfo,k=cf(n);ju(n,k,_);break;default:throw Error(t(161))}}catch(T){ft(n,n.return,T)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function ig(n,i,a){ae=n,pf(n)}function pf(n,i,a){for(var h=(n.mode&1)!==0;ae!==null;){var p=ae,g=p.child;if(p.tag===22&&h){var _=p.memoizedState!==null||xa;if(!_){var k=p.alternate,T=k!==null&&k.memoizedState!==null||Dt;k=xa;var j=Dt;if(xa=_,(Dt=T)&&!j)for(ae=p;ae!==null;)_=ae,T=_.child,_.tag===22&&_.memoizedState!==null?yf(p):T!==null?(T.return=_,ae=T):yf(p);for(;g!==null;)ae=g,pf(g),g=g.sibling;ae=p,xa=k,Dt=j}mf(n)}else(p.subtreeFlags&8772)!==0&&g!==null?(g.return=p,ae=g):mf(n)}}function mf(n){for(;ae!==null;){var i=ae;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Dt||va(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Dt)if(a===null)h.componentDidMount();else{var p=i.elementType===i.type?a.memoizedProps:Tn(i.type,a.memoizedProps);h.componentDidUpdate(p,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&md(i,g,h);break;case 3:var _=i.updateQueue;if(_!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}md(i,_,a)}break;case 5:var k=i.stateNode;if(a===null&&i.flags&4){a=k;var T=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&a.focus();break;case"img":T.src&&(a.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var j=i.alternate;if(j!==null){var H=j.memoizedState;if(H!==null){var V=H.dehydrated;V!==null&&Xe(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Dt||i.flags&512&&Bu(i)}catch(G){ft(i,i.return,G)}}if(i===n){ae=null;break}if(a=i.sibling,a!==null){a.return=i.return,ae=a;break}ae=i.return}}function gf(n){for(;ae!==null;){var i=ae;if(i===n){ae=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ae=a;break}ae=i.return}}function yf(n){for(;ae!==null;){var i=ae;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{va(4,i)}catch(T){ft(i,a,T)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var p=i.return;try{h.componentDidMount()}catch(T){ft(i,p,T)}}var g=i.return;try{Bu(i)}catch(T){ft(i,g,T)}break;case 5:var _=i.return;try{Bu(i)}catch(T){ft(i,_,T)}}}catch(T){ft(i,i.return,T)}if(i===n){ae=null;break}var k=i.sibling;if(k!==null){k.return=i.return,ae=k;break}ae=i.return}}var sg=Math.ceil,_a=I.ReactCurrentDispatcher,$u=I.ReactCurrentOwner,xn=I.ReactCurrentBatchConfig,je=0,At=null,_t=null,Rt=0,sn=0,Hi=Sr(0),bt=0,Vs=null,ei=0,wa=0,Ou=0,Ys=null,Kt=null,Nu=0,Vi=1/0,ir=null,Sa=!1,Wu=null,Tr=null,ba=!1,Er=null,ka=0,Xs=0,Uu=null,Ca=-1,Aa=0;function Ut(){return(je&6)!==0?ot():Ca!==-1?Ca:Ca=ot()}function Mr(n){return(n.mode&1)===0?1:(je&2)!==0&&Rt!==0?Rt&-Rt:Wm.transition!==null?(Aa===0&&(Aa=Bo()),Aa):(n=We,n!==0||(n=window.event,n=n===void 0?16:xh(n.type)),n)}function Rn(n,i,a,h){if(50<Xs)throw Xs=0,Uu=null,Error(t(185));Vr(n,a,h),((je&2)===0||n!==At)&&(n===At&&((je&2)===0&&(wa|=a),bt===4&&Rr(n,Rt)),Qt(n,h),a===1&&je===0&&(i.mode&1)===0&&(Vi=ot()+500,ea&&kr()))}function Qt(n,i){var a=n.callbackNode;Pl(n,i);var h=Ai(n,n===At?Rt:0);if(h===0)a!==null&&bi(a),n.callbackNode=null,n.callbackPriority=0;else if(i=h&-h,n.callbackPriority!==i){if(a!=null&&bi(a),i===1)n.tag===0?Nm(vf.bind(null,n)):rd(vf.bind(null,n)),jm(function(){(je&6)===0&&kr()}),a=null;else{switch(jo(h)){case 1:a=xs;break;case 4:a=Fo;break;case 16:a=On;break;case 536870912:a=vs;break;default:a=On}a=Pf(a,xf.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function xf(n,i){if(Ca=-1,Aa=0,(je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Yi()&&n.callbackNode!==a)return null;var h=Ai(n,n===At?Rt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||i)i=Pa(n,h);else{i=h;var p=je;je|=2;var g=wf();(At!==n||Rt!==i)&&(ir=null,Vi=ot()+500,ni(n,i));do try{lg();break}catch(k){_f(n,k)}while(!0);au(),_a.current=g,je=p,_t!==null?i=0:(At=null,Rt=0,i=bt)}if(i!==0){if(i===2&&(p=_s(n),p!==0&&(h=p,i=Gu(n,p))),i===1)throw a=Vs,ni(n,0),Rr(n,h),Qt(n,ot()),a;if(i===6)Rr(n,h);else{if(p=n.current.alternate,(h&30)===0&&!og(p)&&(i=Pa(n,h),i===2&&(g=_s(n),g!==0&&(h=g,i=Gu(n,g))),i===1))throw a=Vs,ni(n,0),Rr(n,h),Qt(n,ot()),a;switch(n.finishedWork=p,n.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:ri(n,Kt,ir);break;case 3:if(Rr(n,h),(h&130023424)===h&&(i=Nu+500-ot(),10<i)){if(Ai(n,0)!==0)break;if(p=n.suspendedLanes,(p&h)!==h){Ut(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=Kl(ri.bind(null,n,Kt,ir),i);break}ri(n,Kt,ir);break;case 4:if(Rr(n,h),(h&4194240)===h)break;for(i=n.eventTimes,p=-1;0<h;){var _=31-Vt(h);g=1<<_,_=i[_],_>p&&(p=_),h&=~g}if(h=p,h=ot()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*sg(h/1960))-h,10<h){n.timeoutHandle=Kl(ri.bind(null,n,Kt,ir),h);break}ri(n,Kt,ir);break;case 5:ri(n,Kt,ir);break;default:throw Error(t(329))}}}return Qt(n,ot()),n.callbackNode===a?xf.bind(null,n):null}function Gu(n,i){var a=Ys;return n.current.memoizedState.isDehydrated&&(ni(n,i).flags|=256),n=Pa(n,i),n!==2&&(i=Kt,Kt=a,i!==null&&Hu(i)),n}function Hu(n){Kt===null?Kt=n:Kt.push.apply(Kt,n)}function og(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var p=a[h],g=p.getSnapshot;p=p.value;try{if(!An(g(),p))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Rr(n,i){for(i&=~Ou,i&=~wa,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Vt(i),h=1<<a;n[a]=-1,i&=~h}}function vf(n){if((je&6)!==0)throw Error(t(327));Yi();var i=Ai(n,0);if((i&1)===0)return Qt(n,ot()),null;var a=Pa(n,i);if(n.tag!==0&&a===2){var h=_s(n);h!==0&&(i=h,a=Gu(n,h))}if(a===1)throw a=Vs,ni(n,0),Rr(n,i),Qt(n,ot()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ri(n,Kt,ir),Qt(n,ot()),null}function Vu(n,i){var a=je;je|=1;try{return n(i)}finally{je=a,je===0&&(Vi=ot()+500,ea&&kr())}}function ti(n){Er!==null&&Er.tag===0&&(je&6)===0&&Yi();var i=je;je|=1;var a=xn.transition,h=We;try{if(xn.transition=null,We=1,n)return n()}finally{We=h,xn.transition=a,je=i,(je&6)===0&&kr()}}function Yu(){sn=Hi.current,et(Hi)}function ni(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Bm(a)),_t!==null)for(a=_t.return;a!==null;){var h=a;switch(nu(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Zo();break;case 3:Wi(),et(Yt),et(zt),mu();break;case 5:fu(h);break;case 4:Wi();break;case 13:et(lt);break;case 19:et(lt);break;case 10:lu(h.type._context);break;case 22:case 23:Yu()}a=a.return}if(At=n,_t=n=Ir(n.current,null),Rt=sn=i,bt=0,Vs=null,Ou=wa=ei=0,Kt=Ys=null,Qr!==null){for(i=0;i<Qr.length;i++)if(a=Qr[i],h=a.interleaved,h!==null){a.interleaved=null;var p=h.next,g=a.pending;if(g!==null){var _=g.next;g.next=p,h.next=_}a.pending=h}Qr=null}return n}function _f(n,i){do{var a=_t;try{if(au(),ca.current=pa,ha){for(var h=ut.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}ha=!1}if(Jr=0,Ct=St=ut=null,Os=!1,Ns=0,$u.current=null,a===null||a.return===null){bt=1,Vs=i,_t=null;break}e:{var g=n,_=a.return,k=a,T=i;if(i=Rt,k.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var j=T,H=k,V=H.tag;if((H.mode&1)===0&&(V===0||V===11||V===15)){var G=H.alternate;G?(H.updateQueue=G.updateQueue,H.memoizedState=G.memoizedState,H.lanes=G.lanes):(H.updateQueue=null,H.memoizedState=null)}var se=Gd(_);if(se!==null){se.flags&=-257,Hd(se,_,k,g,i),se.mode&1&&Ud(g,j,i),i=se,T=j;var ue=i.updateQueue;if(ue===null){var he=new Set;he.add(T),i.updateQueue=he}else ue.add(T);break e}else{if((i&1)===0){Ud(g,j,i),Xu();break e}T=Error(t(426))}}else if(rt&&k.mode&1){var xt=Gd(_);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),Hd(xt,_,k,g,i),su(Ui(T,k));break e}}g=T=Ui(T,k),bt!==4&&(bt=2),Ys===null?Ys=[g]:Ys.push(g),g=_;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var F=Nd(g,T,i);pd(g,F);break e;case 1:k=T;var R=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Tr===null||!Tr.has(B)))){g.flags|=65536,i&=-i,g.lanes|=i;var K=Wd(g,k,i);pd(g,K);break e}}g=g.return}while(g!==null)}bf(a)}catch(de){i=de,_t===a&&a!==null&&(_t=a=a.return);continue}break}while(!0)}function wf(){var n=_a.current;return _a.current=pa,n===null?pa:n}function Xu(){(bt===0||bt===3||bt===2)&&(bt=4),At===null||(ei&268435455)===0&&(wa&268435455)===0||Rr(At,Rt)}function Pa(n,i){var a=je;je|=2;var h=wf();(At!==n||Rt!==i)&&(ir=null,ni(n,i));do try{ag();break}catch(p){_f(n,p)}while(!0);if(au(),je=a,_a.current=h,_t!==null)throw Error(t(261));return At=null,Rt=0,bt}function ag(){for(;_t!==null;)Sf(_t)}function lg(){for(;_t!==null&&!vl();)Sf(_t)}function Sf(n){var i=Af(n.alternate,n,sn);n.memoizedProps=n.pendingProps,i===null?bf(n):_t=i,$u.current=null}function bf(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=eg(a,i,sn),a!==null){_t=a;return}}else{if(a=tg(a,i),a!==null){a.flags&=32767,_t=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{bt=6,_t=null;return}}if(i=i.sibling,i!==null){_t=i;return}_t=i=n}while(i!==null);bt===0&&(bt=5)}function ri(n,i,a){var h=We,p=xn.transition;try{xn.transition=null,We=1,ug(n,i,a,h)}finally{xn.transition=p,We=h}return null}function ug(n,i,a,h){do Yi();while(Er!==null);if((je&6)!==0)throw Error(t(327));a=n.finishedWork;var p=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(ws(n,g),n===At&&(_t=At=null,Rt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ba||(ba=!0,Pf(On,function(){return Yi(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=xn.transition,xn.transition=null;var _=We;We=1;var k=je;je|=4,$u.current=null,rg(n,a),ff(a,n),Em(Xl),Ft=!!Yl,Xl=Yl=null,n.current=a,ig(a),_l(),je=k,We=_,xn.transition=g}else n.current=a;if(ba&&(ba=!1,Er=n,ka=p),g=n.pendingLanes,g===0&&(Tr=null),bl(a.stateNode),Qt(n,ot()),i!==null)for(h=n.onRecoverableError,a=0;a<i.length;a++)p=i[a],h(p.value,{componentStack:p.stack,digest:p.digest});if(Sa)throw Sa=!1,n=Wu,Wu=null,n;return(ka&1)!==0&&n.tag!==0&&Yi(),g=n.pendingLanes,(g&1)!==0?n===Uu?Xs++:(Xs=0,Uu=n):Xs=0,kr(),null}function Yi(){if(Er!==null){var n=jo(ka),i=xn.transition,a=We;try{if(xn.transition=null,We=16>n?16:n,Er===null)var h=!1;else{if(n=Er,Er=null,ka=0,(je&6)!==0)throw Error(t(331));var p=je;for(je|=4,ae=n.current;ae!==null;){var g=ae,_=g.child;if((ae.flags&16)!==0){var k=g.deletions;if(k!==null){for(var T=0;T<k.length;T++){var j=k[T];for(ae=j;ae!==null;){var H=ae;switch(H.tag){case 0:case 11:case 15:Hs(8,H,g)}var V=H.child;if(V!==null)V.return=H,ae=V;else for(;ae!==null;){H=ae;var G=H.sibling,se=H.return;if(lf(H),H===j){ae=null;break}if(G!==null){G.return=se,ae=G;break}ae=se}}}var ue=g.alternate;if(ue!==null){var he=ue.child;if(he!==null){ue.child=null;do{var xt=he.sibling;he.sibling=null,he=xt}while(he!==null)}}ae=g}}if((g.subtreeFlags&2064)!==0&&_!==null)_.return=g,ae=_;else e:for(;ae!==null;){if(g=ae,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Hs(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,ae=F;break e}ae=g.return}}var R=n.current;for(ae=R;ae!==null;){_=ae;var B=_.child;if((_.subtreeFlags&2064)!==0&&B!==null)B.return=_,ae=B;else e:for(_=R;ae!==null;){if(k=ae,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:va(9,k)}}catch(de){ft(k,k.return,de)}if(k===_){ae=null;break e}var K=k.sibling;if(K!==null){K.return=k.return,ae=K;break e}ae=k.return}}if(je=p,kr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(xr,n)}catch{}h=!0}return h}finally{We=a,xn.transition=i}}return!1}function kf(n,i,a){i=Ui(a,i),i=Nd(n,i,1),n=Ar(n,i,1),i=Ut(),n!==null&&(Vr(n,1,i),Qt(n,i))}function ft(n,i,a){if(n.tag===3)kf(n,n,a);else for(;i!==null;){if(i.tag===3){kf(i,n,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Tr===null||!Tr.has(h))){n=Ui(a,n),n=Wd(i,n,1),i=Ar(i,n,1),n=Ut(),i!==null&&(Vr(i,1,n),Qt(i,n));break}}i=i.return}}function cg(n,i,a){var h=n.pingCache;h!==null&&h.delete(i),i=Ut(),n.pingedLanes|=n.suspendedLanes&a,At===n&&(Rt&a)===a&&(bt===4||bt===3&&(Rt&130023424)===Rt&&500>ot()-Nu?ni(n,0):Ou|=a),Qt(n,i)}function Cf(n,i){i===0&&((n.mode&1)===0?i=1:(i=Ci,Ci<<=1,(Ci&130023424)===0&&(Ci=4194304)));var a=Ut();n=tr(n,i),n!==null&&(Vr(n,i,a),Qt(n,a))}function hg(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Cf(n,a)}function dg(n,i){var a=0;switch(n.tag){case 13:var h=n.stateNode,p=n.memoizedState;p!==null&&(a=p.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Cf(n,a)}var Af;Af=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Yt.current)qt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return qt=!1,Jm(n,i,a);qt=(n.flags&131072)!==0}else qt=!1,rt&&(i.flags&1048576)!==0&&id(i,na,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;ya(n,i),n=i.pendingProps;var p=zi(i,zt.current);Ni(i,a),p=xu(null,i,h,n,p,a);var g=vu();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Xt(h)?(g=!0,Jo(i)):g=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,hu(i),p.updater=ma,i.stateNode=p,p._reactInternals=i,Cu(i,h,n,a),i=Eu(null,i,h,!0,g,a)):(i.tag=0,rt&&g&&tu(i),Wt(null,i,p,a),i=i.child),i;case 16:h=i.elementType;e:{switch(ya(n,i),n=i.pendingProps,p=h._init,h=p(h._payload),i.type=h,p=i.tag=pg(h),n=Tn(h,n),p){case 0:i=Tu(null,i,h,n,a);break e;case 1:i=Qd(null,i,h,n,a);break e;case 11:i=Vd(null,i,h,n,a);break e;case 14:i=Yd(null,i,h,Tn(h.type,n),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Tn(h,p),Tu(n,i,h,p,a);case 1:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Tn(h,p),Qd(n,i,h,p,a);case 3:e:{if(Zd(i),n===null)throw Error(t(387));h=i.pendingProps,g=i.memoizedState,p=g.element,fd(n,i),la(i,h,null,a);var _=i.memoizedState;if(h=_.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){p=Ui(Error(t(423)),i),i=Jd(n,i,h,a,p);break e}else if(h!==p){p=Ui(Error(t(424)),i),i=Jd(n,i,h,a,p);break e}else for(rn=wr(i.stateNode.containerInfo.firstChild),nn=i,rt=!0,Pn=null,a=hd(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Di(),h===p){i=rr(n,i,a);break e}Wt(n,i,h,a)}i=i.child}return i;case 5:return gd(i),n===null&&iu(i),h=i.type,p=i.pendingProps,g=n!==null?n.memoizedProps:null,_=p.children,ql(h,p)?_=null:g!==null&&ql(h,g)&&(i.flags|=32),Kd(n,i),Wt(n,i,_,a),i.child;case 6:return n===null&&iu(i),null;case 13:return ef(n,i,a);case 4:return du(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=$i(i,null,h,a):Wt(n,i,h,a),i.child;case 11:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Tn(h,p),Vd(n,i,h,p,a);case 7:return Wt(n,i,i.pendingProps,a),i.child;case 8:return Wt(n,i,i.pendingProps.children,a),i.child;case 12:return Wt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,p=i.pendingProps,g=i.memoizedProps,_=p.value,qe(sa,h._currentValue),h._currentValue=_,g!==null)if(An(g.value,_)){if(g.children===p.children&&!Yt.current){i=rr(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var k=g.dependencies;if(k!==null){_=g.child;for(var T=k.firstContext;T!==null;){if(T.context===h){if(g.tag===1){T=nr(-1,a&-a),T.tag=2;var j=g.updateQueue;if(j!==null){j=j.shared;var H=j.pending;H===null?T.next=T:(T.next=H.next,H.next=T),j.pending=T}}g.lanes|=a,T=g.alternate,T!==null&&(T.lanes|=a),uu(g.return,a,i),k.lanes|=a;break}T=T.next}}else if(g.tag===10)_=g.type===i.type?null:g.child;else if(g.tag===18){if(_=g.return,_===null)throw Error(t(341));_.lanes|=a,k=_.alternate,k!==null&&(k.lanes|=a),uu(_,a,i),_=g.sibling}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}Wt(n,i,p.children,a),i=i.child}return i;case 9:return p=i.type,h=i.pendingProps.children,Ni(i,a),p=gn(p),h=h(p),i.flags|=1,Wt(n,i,h,a),i.child;case 14:return h=i.type,p=Tn(h,i.pendingProps),p=Tn(h.type,p),Yd(n,i,h,p,a);case 15:return Xd(n,i,i.type,i.pendingProps,a);case 17:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:Tn(h,p),ya(n,i),i.tag=1,Xt(h)?(n=!0,Jo(i)):n=!1,Ni(i,a),$d(i,h,p),Cu(i,h,p,a),Eu(null,i,h,!0,n,a);case 19:return nf(n,i,a);case 22:return qd(n,i,a)}throw Error(t(156,i.tag))};function Pf(n,i){return ys(n,i)}function fg(n,i,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(n,i,a,h){return new fg(n,i,a,h)}function qu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function pg(n){if(typeof n=="function")return qu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===pe)return 11;if(n===Qe)return 14}return 2}function Ir(n,i){var a=n.alternate;return a===null?(a=vn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Ta(n,i,a,h,p,g){var _=2;if(h=n,typeof n=="function")qu(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case D:return ii(a.children,p,g,i);case Y:_=8,p|=8;break;case Q:return n=vn(12,a,i,p|2),n.elementType=Q,n.lanes=g,n;case ce:return n=vn(13,a,i,p),n.elementType=ce,n.lanes=g,n;case Se:return n=vn(19,a,i,p),n.elementType=Se,n.lanes=g,n;case te:return Ea(a,p,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case q:_=10;break e;case Z:_=9;break e;case pe:_=11;break e;case Qe:_=14;break e;case J:_=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=vn(_,a,i,p),i.elementType=n,i.type=h,i.lanes=g,i}function ii(n,i,a,h){return n=vn(7,n,h,i),n.lanes=a,n}function Ea(n,i,a,h){return n=vn(22,n,h,i),n.elementType=te,n.lanes=a,n.stateNode={isHidden:!1},n}function Ku(n,i,a){return n=vn(6,n,null,i),n.lanes=a,n}function Qu(n,i,a){return i=vn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function mg(n,i,a,h,p){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hr(0),this.expirationTimes=Hr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Zu(n,i,a,h,p,g,_,k,T){return n=new mg(n,i,a,k,T),i===1?(i=1,g===!0&&(i|=8)):i=0,g=vn(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},hu(g),n}function gg(n,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:h==null?null:""+h,children:n,containerInfo:i,implementation:a}}function Tf(n){if(!n)return br;n=n._reactInternals;e:{if(Cn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Xt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Xt(a))return td(n,a,i)}return i}function Ef(n,i,a,h,p,g,_,k,T){return n=Zu(a,h,!0,n,p,g,_,k,T),n.context=Tf(null),a=n.current,h=Ut(),p=Mr(a),g=nr(h,p),g.callback=i??null,Ar(a,g,p),n.current.lanes=p,Vr(n,p,h),Qt(n,h),n}function Ma(n,i,a,h){var p=i.current,g=Ut(),_=Mr(p);return a=Tf(a),i.context===null?i.context=a:i.pendingContext=a,i=nr(g,_),i.payload={element:n},h=h===void 0?null:h,h!==null&&(i.callback=h),n=Ar(p,i,_),n!==null&&(Rn(n,p,_,g),aa(n,p,_)),_}function Ra(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Mf(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Ju(n,i){Mf(n,i),(n=n.alternate)&&Mf(n,i)}function yg(){return null}var Rf=typeof reportError=="function"?reportError:function(n){console.error(n)};function ec(n){this._internalRoot=n}Ia.prototype.render=ec.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Ma(n,i,null,null)},Ia.prototype.unmount=ec.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ti(function(){Ma(null,n,null,null)}),i[Qn]=null}};function Ia(n){this._internalRoot=n}Ia.prototype.unstable_scheduleHydration=function(n){if(n){var i=A();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Be.length&&i!==0&&i<Be[a].priority;a++);Be.splice(a,0,n),a===0&&ke(n)}};function tc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function La(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function If(){}function xg(n,i,a,h,p){if(p){if(typeof h=="function"){var g=h;h=function(){var j=Ra(_);g.call(j)}}var _=Ef(i,h,n,0,null,!1,!1,"",If);return n._reactRootContainer=_,n[Qn]=_.current,Is(n.nodeType===8?n.parentNode:n),ti(),_}for(;p=n.lastChild;)n.removeChild(p);if(typeof h=="function"){var k=h;h=function(){var j=Ra(T);k.call(j)}}var T=Zu(n,0,!1,null,null,!1,!1,"",If);return n._reactRootContainer=T,n[Qn]=T.current,Is(n.nodeType===8?n.parentNode:n),ti(function(){Ma(i,T,a,h)}),T}function Fa(n,i,a,h,p){var g=a._reactRootContainer;if(g){var _=g;if(typeof p=="function"){var k=p;p=function(){var T=Ra(_);k.call(T)}}Ma(i,_,n,p)}else _=xg(a,i,n,p,h);return Ra(_)}Nn=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Gr(i.pendingLanes);a!==0&&(Ss(i,a|1),Qt(i,ot()),(je&6)===0&&(Vi=ot()+500,kr()))}break;case 13:ti(function(){var h=tr(n,1);if(h!==null){var p=Ut();Rn(h,n,1,p)}}),Ju(n,1)}},bs=function(n){if(n.tag===13){var i=tr(n,134217728);if(i!==null){var a=Ut();Rn(i,n,134217728,a)}Ju(n,134217728)}},Do=function(n){if(n.tag===13){var i=Mr(n),a=tr(n,i);if(a!==null){var h=Ut();Rn(a,n,i,h)}Ju(n,i)}},A=function(){return We},z=function(n,i){var a=We;try{return We=n,i()}finally{We=a}},xi=function(n,i,a){switch(i){case"input":if(hr(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==n&&h.form===n.form){var p=Qo(h);if(!p)throw Error(t(90));cn(h),hr(h,p)}}}break;case"textarea":Ao(n,a);break;case"select":i=a.value,i!=null&&kn(n,!!a.multiple,i,!1)}},To=Vu,ms=ti;var vg={usingClientEntryPoint:!1,Events:[zs,Li,Qo,vi,Nr,Vu]},qs={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_g={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Lo(n),n===null?null:n.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||yg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{xr=za.inject(_g),fn=za}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vg,Zt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tc(i))throw Error(t(200));return gg(n,i,null,a)},Zt.createRoot=function(n,i){if(!tc(n))throw Error(t(299));var a=!1,h="",p=Rf;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=Zu(n,1,!1,null,null,a,!1,h,p),n[Qn]=i.current,Is(n.nodeType===8?n.parentNode:n),new ec(i)},Zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Lo(i),n=n===null?null:n.stateNode,n},Zt.flushSync=function(n){return ti(n)},Zt.hydrate=function(n,i,a){if(!La(i))throw Error(t(200));return Fa(null,n,i,!0,a)},Zt.hydrateRoot=function(n,i,a){if(!tc(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,p=!1,g="",_=Rf;if(a!=null&&(a.unstable_strictMode===!0&&(p=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),i=Ef(i,null,n,1,a??null,p,!1,g,_),n[Qn]=i.current,Is(n),h)for(n=0;n<h.length;n++)a=h[n],p=a._getVersion,p=p(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,p]:i.mutableSourceEagerHydrationData.push(a,p);return new Ia(i)},Zt.render=function(n,i,a){if(!La(i))throw Error(t(200));return Fa(null,n,i,!1,a)},Zt.unmountComponentAtNode=function(n){if(!La(n))throw Error(t(40));return n._reactRootContainer?(ti(function(){Fa(null,null,n,!1,function(){n._reactRootContainer=null,n[Qn]=null})}),!0):!1},Zt.unstable_batchedUpdates=Vu,Zt.unstable_renderSubtreeIntoContainer=function(n,i,a,h){if(!La(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Fa(n,i,a,!1,h)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Of;function Tg(){if(Of)return ic.exports;Of=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ic.exports=Pg(),ic.exports}var Nf;function Eg(){if(Nf)return Ba;Nf=1;var r=Tg();return Ba.createRoot=r.createRoot,Ba.hydrateRoot=r.hydrateRoot,Ba}var Mg=Eg();const Rg=th(Mg);var le=nh();const ja={id:"pj-1",nom:{nomcomplet:"Test Hero",prenom:"Aryn",surnom:"the Blue"},age:25,sexe:"H",taille:175,poids:70,vitesse:9,langues:"Common",alignement:"Neutral Good",raceId:"human",backgroundId:"adventurer",niveauGlobal:1,classe:{1:{classeId:"fighter",subclasseId:"champion",niveau:1}},xp:0,dv:10,maitriseBonus:2,pvActuels:12,pvMax:12,pvTmp:0,calculPvMax:{classe1:{niveauGlobal_1:"10 + modCON",par_niveau_apres_1:"1d10 + modCON"},classe2:{par_niveau_apres_1:""}},CA:16,CalculCA:{base:"10 + modDEX",bonusArmure:"+ armor proficiency + shield"},nivFatigueActuel:0,nivFatigueMax:3,initiative:"modDEX",besoin:[],caracs:{force:{FOR:16,modFOR:3},dexterite:{DEX:14,modDEX:2},constitution:{CON:14,modCON:2},intelligence:{INT:10,modINT:0},sagesse:{SAG:12,modSAG:1},charisme:{CHA:10,modCHA:0}},competences:{},percPassive:11,proficiencies:{},savingThrows:["force","constitution"],inspiration:!1,traits:["Veteran soldier","Brave"],features:[],compteur:{},ressources:{},etats:[],historique:[],notes:"",argent:{cuivre:0,argent:0,or:10,platine:0},materielSlots:{Ceinture_gauche:null,Ceinture_droite:null,Dos_gauche:null,Dos_droit:null,Armure:null,Vetement:null,paquetage:null,accessoire:null},armesDefaut:{main_droite:null,main_gauche:null,mains:null},Inventaire:{id:"",idUnique:"",quantite:0,mod:null,conteneur:null},capaMax:120,capaAvantMalus:60,capaActuel:0,StatEncombrement:"Not encumbered",descriptionPersonnage:{bio:"Test hero for the mini-game.",physique:"Athletic human in light armor.",personnalite:"Calm and determined.",objectifs:"Explore the test dungeon.",relations:"",defauts:"Too reckless."},uiClasse:{ui_template1:"fighter_base",ui_template2:null},SpellcastingSpec:{ability:null,spellSaveDc:null,spellAttackMod:null,slots:{},focusId:null,description:null,spellIds:[]}},ar=12,Xn=8,ct=64,uo=ar*ct,nl=Xn*ct,d0=ct,rh=ct*.5,f0=uo/2,p0=rh*2,Ig=1841961;function as(r,e){return r>=0&&r<ar&&e>=0&&e<Xn}function _n(r,e){const t=d0/2,s=rh/2,o=(r-e)*t+f0,l=(r+e)*s+p0;return{x:o,y:l}}function Lg(r,e){const t=d0/2,s=rh/2,o=r-f0,l=e-p0,u=o/t,c=l/s,d=(u+c)/2,f=(c-u)/2,m=Math.round(d),y=Math.round(f);return{x:m,y}}function m0(r,e,t,s){const o=[];for(let l=-s;l<=s;l++)for(let u=-s;u<=s;u++){const c=e+u,d=t+l;if(!as(c,d))continue;Math.sqrt(u*u+l*l)<=s+.01&&o.push({x:c,y:d})}return{id:r,type:"circle",cells:o}}function Fg(r,e,t,s,o){const l=[],u=Math.floor(s/2),c=Math.floor(o/2);for(let d=t-c;d<=t+c;d++)for(let f=e-u;f<=e+u;f++)as(f,d)&&l.push({x:f,y:d});return{id:r,type:"rectangle",cells:l}}function g0(r,e,t,s,o,l){const u=[],d=typeof l=="number"&&l>0&&l<180?l*Math.PI/360:null;for(let f=1;f<=s;f++){let m=f;if(d!==null){const y=Math.tan(d)*f;m=Math.floor(y),m<0&&(m=0),m>f&&(m=f)}for(let y=-m;y<=m;y++){let x=e,v=t;switch(o){case"right":x=e+f,v=t+y;break;case"left":x=e-f,v=t+y;break;case"down":x=e+y,v=t+f;break;case"up":x=e+y,v=t-f;break}as(x,v)&&u.push({x,y:v})}}return{id:r,type:"cone",cells:u}}const zg=30,Bg={shape:"cone",range:zg};function jg(r){return r.facing?r.facing:r.type==="player"?"right":"left"}function Dg(r){return r.visionProfile?r.visionProfile:Bg}function y0(r){const e=Dg(r),t=jg(r),s=`vision-${r.id}`;return e.range<=0?{id:s,type:e.shape==="circle"?"circle":"cone",cells:[]}:e.shape==="circle"?m0(s,r.x,r.y,e.range):g0(s,r.x,r.y,e.range,t,e.apertureDeg)}function Wf(r){return`${r.x},${r.y}`}function x0(r,e){const t=y0(r);if(!t.cells.length)return[];const s=new Set;for(const o of t.cells)s.add(Wf(o));return e.filter(o=>o.id!==r.id&&o.hp>0&&s.has(Wf({x:o.x,y:o.y})))}function v0(r,e,t){return e.hp<=0?!1:x0(r,t).some(o=>o.id===e.id)}function Da(r,e,t){return Math.max(e,Math.min(t,r))}function Qs(r,e){return Math.abs(r.x-e.x)+Math.abs(r.y-e.y)}function $t(r){return r.hp<=0}function Uf(r){return typeof r.attackRange=="number"&&r.attackRange>0?r.attackRange:1}function Gf(r){return typeof r.maxAttacksPerTurn=="number"&&r.maxAttacksPerTurn>0?r.maxAttacksPerTurn:1}function $a(r,e,t){return $t(r)||$t(e)?!1:v0(r,e,t)}function ac(r,e){const t=e.x-r.x,s=e.y-r.y;return Math.abs(t)>=Math.abs(s)?t>=0?"right":"left":s>=0?"down":"up"}const $g=["./brute.json","./archer.json","./assassin.json","./ghost.json"],Hf={types:$g},Og="brute",Ng="Brute",Wg="Frontliner robuste qui avance pour engager le joueur.",Ug="brute",Gg={raceOrOrigin:"Brute mercenaire",register:"familier",tone:["agressif","direct","impatient"],vocabulary:["charge","ecrase","avance","finissons-en"],quirks:["phrases courtes","menaces simples"],taboos:["pas de modernisme","pas de meta-jeu"]},Hg={hp:10,moveRange:3,attackDamage:2,armorClass:14,attackRange:1,maxAttacksPerTurn:2},Vg={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},Yg={shape:"cone",range:4,apertureDeg:90,canSeeInDark:!1},Xg={id:Og,label:Ng,description:Wg,aiRole:Ug,speechProfile:Gg,baseStats:Hg,movement:Vg,vision:Yg},qg="archer",Kg="Archer",Qg="Tireur qui prefere garder une distance de securite avant de frapper.",Zg="archer",Jg={raceOrOrigin:"Archer de bande",register:"neutre",tone:["tactique","moqueur","vigilant"],vocabulary:["a couvert","recule","je l'ai en vue","distance"],quirks:["annonce ce qu'il voit","donne des consignes courtes"],taboos:["pas de modernisme","pas de meta-jeu"]},e2={hp:7,moveRange:2,attackDamage:2,armorClass:13,attackRange:6,maxAttacksPerTurn:1},t2={type:"ground",speed:2,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},n2={shape:"cone",range:15,apertureDeg:60,canSeeInDark:!1},r2={id:qg,label:Kg,description:Qg,aiRole:Zg,speechProfile:Jg,baseStats:e2,movement:t2,vision:n2},i2="assassin",s2="Assassin",o2="Frappeur rapide qui cherche a se rapprocher pour porter un coup decisif.",a2="assassin",l2={raceOrOrigin:"Assassin",register:"soutenu",tone:["froid","tranchant","calme"],vocabulary:["silence","cible","dans l'ombre","fin"],quirks:["parle peu","phrases courtes et precises"],taboos:["pas de modernisme","pas de meta-jeu"]},u2={hp:6,moveRange:3,attackDamage:3,armorClass:15},c2={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},h2={shape:"cone",range:6,apertureDeg:80,canSeeInDark:!1},d2={id:i2,label:s2,description:o2,aiRole:a2,speechProfile:l2,baseStats:u2,movement:c2,vision:h2},f2="ghost",p2="Fantome",m2="Esprit intangible capable de traverser les autres creatures.",g2="ghost",y2={raceOrOrigin:"Esprit vengeur",register:"soutenu",tone:["cryptique","menaant","surnaturel"],vocabulary:["je te sens","au-dela","froideur","souffle"],quirks:["parle en images","phrases etranges mais courtes"],taboos:["pas de modernisme","pas de meta-jeu"]},x2={hp:8,moveRange:4,attackDamage:3,armorClass:12},v2={type:"ghost",speed:4,canPassThroughWalls:!0,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},_2={shape:"circle",range:6,canSeeInDark:!0},w2={id:f2,label:p2,description:m2,aiRole:g2,speechProfile:y2,baseStats:x2,movement:v2,vision:_2},S2=["./melee-strike.json","./dash.json","./second-wind.json","./throw-dagger.json"],Vf={actions:S2},b2="melee-strike",k2="Frappe basique",C2="Attaque de melee simple contre une cible a 1 case.",A2="attack",P2={actionType:"action",movementCost:0},T2={target:"enemy",range:{min:0,max:1,shape:"single"},maxTargets:1,requiresLos:!0},E2={perTurn:1,perEncounter:null,resource:null},M2=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_max",target:"primary",max:1,reason:"Portee de melee uniquement."},{type:"target_alive",target:"primary",reason:"La cible doit avoir des PV restants."}],R2={bonus:5,critRange:20},I2={formula:"1d6+3",critRule:"double-dice",damageType:"slashing"},L2=[{type:"damage",target:"primary",formula:"1d6 + modFOR",damageType:"slashing"},{type:"log",message:"Frappe basique inflige 1d6+FOR a la cible."}],F2={priority:"finish_low_hp_target",successLog:"Attaque de melee effectuee.",failureLog:"Cible hors portee ou deja a terre."},z2=["martial","arme","starter"],B2={id:b2,name:k2,summary:C2,category:A2,actionCost:P2,targeting:T2,usage:E2,conditions:M2,attack:R2,damage:I2,effects:L2,aiHints:F2,tags:z2},j2="dash",D2="Course",$2="Transforme l'action en 3 cases de mouvement en plus.",O2="movement",N2={actionType:"action",movementCost:0},W2={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},U2={perTurn:1,perEncounter:null,resource:null},G2=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."}],H2=[{type:"modify_path_limit",target:"self",delta:3,duration:"this_turn"},{type:"log",message:"Course: +3 cases de mouvement pour ce tour."}],V2={priority:"close_gap",successLog:"Course utilisee pour approcher.",failureLog:"Deja a portee, course ignoree."},Y2=["mobilite","deplacement"],X2={id:j2,name:D2,summary:$2,category:O2,actionCost:N2,targeting:W2,usage:U2,conditions:G2,effects:H2,aiHints:V2,tags:Y2},q2="second-wind",K2="Second souffle",Q2="Restaure une partie des PV en bonus action.",Z2="support",J2={actionType:"bonus",movementCost:0},ey={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},ty={perTurn:null,perEncounter:1,resource:null},ny=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"stat_below_percent",who:"self",stat:"hp",percentMax:.75,reason:"Economiser tant que les PV sont hauts."}],ry=[{type:"heal",target:"self",formula:"1d10 + niveau",min:1},{type:"temp_hp",target:"self",amount:2,duration:"end_of_turn"},{type:"log",message:"Second souffle: soigne 1d10 + niveau."}],iy={priority:"survive",successLog:"Second souffle declenche.",failureLog:"PV trop hauts ou tour non joueur."},sy=["soin","defense","survie"],oy={id:q2,name:K2,summary:Q2,category:Z2,actionCost:J2,targeting:ey,usage:ty,conditions:ny,effects:ry,aiHints:iy,tags:sy},ay="throw-dagger",ly="Lancer de dague",uy="Attaque a distance courte avec une dague a lancer.",cy="attack",hy={actionType:"action",movementCost:0},dy={target:"enemy",range:{min:1,max:4,shape:"single"},maxTargets:1,requiresLos:!0},fy={perTurn:1,perEncounter:null,resource:{name:"dagger",pool:"bandolier",min:1}},py=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_between",target:"primary",min:1,max:4,reason:"Hors de melee mais a portee de lancer."},{type:"resource_at_least",resource:"dagger",pool:"bandolier",value:1,reason:"Besoin d'une dague a lancer."}],my={bonus:4,critRange:20},gy={formula:"1d4+2",critRule:"double-dice",damageType:"piercing"},yy=[{type:"damage",target:"primary",formula:"1d4 + modDEX",damageType:"piercing"},{type:"resource_spend",resource:"dagger",pool:"bandolier",amount:1},{type:"log",message:"Dague lancee: 1d4+DEX degats perforants."}],xy={priority:"poke_from_range",successLog:"Dague lancee.",failureLog:"Pas de dague ou cible hors portee."},vy=["distance","arme","jet"],_y={id:ay,name:ly,summary:uy,category:cy,actionCost:hy,targeting:dy,usage:fy,conditions:py,attack:my,damage:gy,effects:yy,aiHints:xy,tags:vy};function Ki(r,e=1){const t=[];for(let o=0;o<e;o++)t.push(1+Math.floor(Math.random()*r));const s=t.reduce((o,l)=>o+l,0);return{rolls:t,total:s}}function wy(r,e="normal",t=20){if(e==="advantage"){const o=Ki(20),l=Ki(20),u=Math.max(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:r,total:u+r,mode:e,isCrit:u>=t}}if(e==="disadvantage"){const o=Ki(20),l=Ki(20),u=Math.min(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:r,total:u+r,mode:e,isCrit:u>=t}}const s=Ki(20);return{d20:s,bonus:r,total:s.total+r,mode:e,isCrit:s.total>=t}}function Sy(r){const e=[],s=r.replace(/\s+/g,"").split(/(?=[+-])/);for(const o of s){if(!o)continue;const l=o.startsWith("-")?-1:1,u=o.replace(/^[+-]/,""),c=u.match(/^(\d*)d(\d+)$/i);if(c){const f=c[1]?parseInt(c[1],10):1,m=parseInt(c[2],10);e.push({diceCount:l*f,diceSides:m,modifier:0});continue}const d=parseInt(u,10);Number.isNaN(d)||e.push({diceCount:0,diceSides:0,modifier:l*d})}return e}function by(r,e){const t=!!(e!=null&&e.isCrit),s=(e==null?void 0:e.critRule)??"double-dice",o=Sy(r),l=[];let u=0;for(const f of o)if(f.diceCount!==0&&f.diceSides>0){const m=Math.abs(f.diceCount),y=t&&s==="double-dice"?m*2:m,x=Ki(f.diceSides,y);l.push(f.diceCount<0?{rolls:x.rolls,total:-x.total}:x)}else u+=f.modifier;let d=l.reduce((f,m)=>f+m.total,0)+u;return t&&s==="double-total"&&(d*=2),{dice:l,flatModifier:u,total:d,formula:r,isCrit:t}}function lc(r,e){return`${r},${e}`}function ky(r){return r.movementProfile?r.movementProfile:typeof r.moveRange=="number"?{type:"ground",speed:r.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1}:null}function Cy(r,e,t,s,o,l,u){if(t<0||s<0||t>=ar||s>=Xn||!as(t,s))return!1;const c=t===u.x&&s===u.y;return!o.some(f=>f.id!==r.id&&f.hp>0&&f.x===t&&f.y===s)||c&&l?!0:e&&e.canPassThroughEntities?!(c&&e.canStopOnOccupiedTile===!1):!1}function Yf(r,e,t,s){const o=ky(r),l=o&&o.speed>0?Math.min(s.maxDistance,o.speed):s.maxDistance,u={x:r.x,y:r.y};if(u.x===e.x&&u.y===e.y)return[];const c=new Set,d=new Map,f=new Map,m=[],y=lc(u.x,u.y);c.add(y),d.set(y,null),f.set(y,0),m.push(u);let x=null;const v=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];for(;m.length>0;){const E=m.shift(),I=lc(E.x,E.y),U=f.get(I)??0;if(!(U>=l))for(const O of v){const D=E.x+O.x,Y=E.y+O.y,Q=lc(D,Y);if(c.has(Q)||!Cy(r,o,D,Y,t,s.allowTargetOccupied??!1,e))continue;c.add(Q),d.set(Q,I),f.set(Q,U+1);const q={x:D,y:Y};if(m.push(q),D===e.x&&Y===e.y){x=Q,m.length=0;break}}}let S=x;if(!S){let E=null,I=Number.POSITIVE_INFINITY;for(const U of c){const[O,D]=U.split(",").map(Number),Y=Math.abs(O-e.x)+Math.abs(D-e.y),Q=f.get(U)??0;Q!==0&&(Q>l||Y<I&&(I=Y,E=U))}if(!E)return[];S=E}const b=[];let w=S;for(;w;){const[E,I]=w.split(",").map(Number);if(b.push({x:E,y:I}),w===y)break;w=d.get(w)??null}const C=b.reverse(),P=l+1;return C.length>P?C.slice(0,P):C}function Xf(r,e){return e.find(t=>t.hp>0&&t.x===r.x&&t.y===r.y)??null}const Ge={active:!1,round:null,stateStart:null,events:[],enemySpeeches:[],lastSpeechByEnemyThisRound:new Map};let Ay=0;const _0=new Map;function Py(r,e){Ge.active=!0,Ge.round=r,Ge.stateStart=e,Ge.events=[],Ge.enemySpeeches=[],Ge.lastSpeechByEnemyThisRound=new Map}function on(r){if(!Ge.active||Ge.round!==null&&r.round!==Ge.round)return;const e={id:`evt-${Date.now()}-${Ay++}`,round:r.round,phase:r.phase,kind:r.kind,actorId:r.actorId,actorKind:r.actorKind,targetId:r.targetId??null,targetKind:r.targetKind??null,summary:r.summary,data:r.data??{},timestamp:Date.now()};Ge.events.push(e)}function Ty(r,e){if(!Ge.active)return;const t=(e??"").trim();t&&(Ge.enemySpeeches.push({enemyId:r,line:t}),Ge.lastSpeechByEnemyThisRound.set(r,t),_0.set(r,t),Ge.round!==null&&on({round:Ge.round,phase:"enemies",kind:"speech",actorId:r,actorKind:"enemy",summary:`${r} dit: "${t}"`,data:{line:t}}))}function Ey(){return Ge.enemySpeeches.slice()}function My(r){return _0.get(r)??null}function Ry(r){return!Number.isFinite(r)||r<=0?Ge.events.slice():Ge.events.slice(-Math.floor(r))}function Iy(r){return!Ge.active||!Ge.stateStart||Ge.round===null?null:{language:"fr",focusSide:"player",focusActorId:r.focusActorId,stateStart:Ge.stateStart,stateEnd:r.stateEnd,events:Ge.events.slice(),enemySpeeches:Ge.enemySpeeches.slice()}}function Ly(){Ge.active=!1,Ge.round=null,Ge.stateStart=null,Ge.events=[],Ge.enemySpeeches=[],Ge.lastSpeechByEnemyThisRound=new Map}async function Fy(r){const e=await fetch("/api/narration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)return{summary:"",error:"IA non fonctionnel."};const t=await e.json();return!t||typeof t.summary!="string"?{summary:"",error:"IA non fonctionnel."}:t.error&&typeof t.error=="string"?{summary:"",error:t.error}:{summary:t.summary}}async function zy(r){const e=await fetch("/api/enemy-speech",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)return{line:""};const t=await e.json();return!t||typeof t.line!="string"?{line:""}:{line:t.line}}const By="modulepreload",jy=function(r){return"/"+r},qf={},ol=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let u=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=u(t.map(f=>{if(f=jy(f),f in qf)return;qf[f]=!0;const m=f.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":By,m||(x.as="script"),x.crossOrigin="",x.href=f,d&&x.setAttribute("nonce",d),document.head.appendChild(x),m)return new Promise((v,S)=>{x.addEventListener("load",v),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return o.then(u=>{for(const c of u||[])c.status==="rejected"&&l(c.reason);return e().catch(l)})};var ge=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(ge||{});const zc=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Oa=(r,e)=>zc(r).priority??e,Lt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(zc).forEach(e=>{e.type.forEach(t=>{var s,o;return(o=(s=this._removeHandlers)[t])==null?void 0:o.call(s,e)})}),this},add(...r){return r.map(zc).forEach(e=>{e.type.forEach(t=>{var l,u;const s=this._addHandlers,o=this._queue;s[t]?(u=s[t])==null||u.call(s,e):(o[t]=o[t]||[],(l=o[t])==null||l.push(e))})}),this},handle(r,e,t){var u;const s=this._addHandlers,o=this._removeHandlers;if(s[r]||o[r])throw new Error(`Extension type ${r} already has a handler`);s[r]=e,o[r]=t;const l=this._queue;return l[r]&&((u=l[r])==null||u.forEach(c=>e(c)),delete l[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(r,e,t=-1){return this.handle(r,s=>{e.findIndex(l=>l.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((l,u)=>Oa(u.value,t)-Oa(l.value,t)))},s=>{const o=e.findIndex(l=>l.name===s.name);o!==-1&&e.splice(o,1)})},handleByList(r,e,t=-1){return this.handle(r,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((o,l)=>Oa(l,t)-Oa(o,t)))},s=>{const o=e.indexOf(s.ref);o!==-1&&e.splice(o,1)})},mixin(r,...e){for(const t of e)Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(t))}},Dy={extension:{type:ge.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await ol(()=>import("./browserAll-DLWC9VGJ.js"),__vite__mapDeps([0,1,2]))}},$y={extension:{type:ge.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await ol(()=>import("./webworkerAll-QgRLjns0.js"),__vite__mapDeps([1,2]))}};class It{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new It(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var uc={exports:{}},Kf;function Oy(){return Kf||(Kf=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function o(d,f,m){this.fn=d,this.context=f,this.once=m||!1}function l(d,f,m,y,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new o(m,y||d,x),S=t?t+f:f;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],v]:d._events[S].push(v):(d._events[S]=v,d._eventsCount++),d}function u(d,f){--d._eventsCount===0?d._events=new s:delete d._events[f]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],m,y;if(this._eventsCount===0)return f;for(y in m=this._events)e.call(m,y)&&f.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},c.prototype.listeners=function(f){var m=t?t+f:f,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var x=0,v=y.length,S=new Array(v);x<v;x++)S[x]=y[x].fn;return S},c.prototype.listenerCount=function(f){var m=t?t+f:f,y=this._events[m];return y?y.fn?1:y.length:0},c.prototype.emit=function(f,m,y,x,v,S){var b=t?t+f:f;if(!this._events[b])return!1;var w=this._events[b],C=arguments.length,P,E;if(w.fn){switch(w.once&&this.removeListener(f,w.fn,void 0,!0),C){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,y),!0;case 4:return w.fn.call(w.context,m,y,x),!0;case 5:return w.fn.call(w.context,m,y,x,v),!0;case 6:return w.fn.call(w.context,m,y,x,v,S),!0}for(E=1,P=new Array(C-1);E<C;E++)P[E-1]=arguments[E];w.fn.apply(w.context,P)}else{var I=w.length,U;for(E=0;E<I;E++)switch(w[E].once&&this.removeListener(f,w[E].fn,void 0,!0),C){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,m);break;case 3:w[E].fn.call(w[E].context,m,y);break;case 4:w[E].fn.call(w[E].context,m,y,x);break;default:if(!P)for(U=1,P=new Array(C-1);U<C;U++)P[U-1]=arguments[U];w[E].fn.apply(w[E].context,P)}}return!0},c.prototype.on=function(f,m,y){return l(this,f,m,y,!1)},c.prototype.once=function(f,m,y){return l(this,f,m,y,!0)},c.prototype.removeListener=function(f,m,y,x){var v=t?t+f:f;if(!this._events[v])return this;if(!m)return u(this,v),this;var S=this._events[v];if(S.fn)S.fn===m&&(!x||S.once)&&(!y||S.context===y)&&u(this,v);else{for(var b=0,w=[],C=S.length;b<C;b++)(S[b].fn!==m||x&&!S[b].once||y&&S[b].context!==y)&&w.push(S[b]);w.length?this._events[v]=w.length===1?w[0]:w:u(this,v)}return this},c.prototype.removeAllListeners=function(f){var m;return f?(m=t?t+f:f,this._events[m]&&u(this,m)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(uc)),uc.exports}var Ny=Oy();const zn=th(Ny),Wy=Math.PI*2,Uy=180/Math.PI,Gy=Math.PI/180;class Ot{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Ot(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return cc.x=0,cc.y=0,cc}}const cc=new Ot;class Le{constructor(e=1,t=0,s=0,o=1,l=0,u=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,o,l,u){return this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new Ot;const s=e.x,o=e.y;return t.x=this.a*s+this.c*o+this.tx,t.y=this.b*s+this.d*o+this.ty,t}applyInverse(e,t){t=t||new Ot;const s=this.a,o=this.b,l=this.c,u=this.d,c=this.tx,d=this.ty,f=1/(s*u+l*-o),m=e.x,y=e.y;return t.x=u*f*m+-l*f*y+(d*l-c*u)*f,t.y=s*f*y+-o*f*m+(-d*s+c*o)*f,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.a,l=this.c,u=this.tx;return this.a=o*t-this.b*s,this.b=o*s+this.b*t,this.c=l*t-this.d*s,this.d=l*s+this.d*t,this.tx=u*t-this.ty*s,this.ty=u*s+this.ty*t,this}append(e){const t=this.a,s=this.b,o=this.c,l=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*s+e.b*l,this.c=e.c*t+e.d*o,this.d=e.c*s+e.d*l,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*s+e.ty*l+this.ty,this}appendFrom(e,t){const s=e.a,o=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty,f=t.a,m=t.b,y=t.c,x=t.d;return this.a=s*f+o*y,this.b=s*m+o*x,this.c=l*f+u*y,this.d=l*m+u*x,this.tx=c*f+d*y+t.tx,this.ty=c*m+d*x+t.ty,this}setTransform(e,t,s,o,l,u,c,d,f){return this.a=Math.cos(c+f)*l,this.b=Math.sin(c+f)*l,this.c=-Math.sin(c-d)*u,this.d=Math.cos(c-d)*u,this.tx=e-(s*this.a+o*this.c),this.ty=t-(s*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,o=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,o=this.c,l=this.d,u=e.pivot,c=-Math.atan2(-o,l),d=Math.atan2(s,t),f=Math.abs(c+d);return f<1e-5||Math.abs(Wy-f)<1e-5?(e.rotation=d,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=d),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(o*o+l*l),e.position.x=this.tx+(u.x*t+u.y*o),e.position.y=this.ty+(u.x*s+u.y*l),e}invert(){const e=this.a,t=this.b,s=this.c,o=this.d,l=this.tx,u=e*o-t*s;return this.a=o/u,this.b=-t/u,this.c=-s/u,this.d=e/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(e*this.ty-t*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Le;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Vy.identity()}static get shared(){return Hy.identity()}}const Hy=new Le,Vy=new Le,ai=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],li=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ui=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ci=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Bc=[],w0=[],Na=Math.sign;function Yy(){for(let r=0;r<16;r++){const e=[];Bc.push(e);for(let t=0;t<16;t++){const s=Na(ai[r]*ai[t]+ui[r]*li[t]),o=Na(li[r]*ai[t]+ci[r]*li[t]),l=Na(ai[r]*ui[t]+ui[r]*ci[t]),u=Na(li[r]*ui[t]+ci[r]*ci[t]);for(let c=0;c<16;c++)if(ai[c]===s&&li[c]===o&&ui[c]===l&&ci[c]===u){e.push(c);break}}}for(let r=0;r<16;r++){const e=new Le;e.set(ai[r],li[r],ui[r],ci[r],0,0),w0.push(e)}}Yy();const Ve={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>ai[r],uY:r=>li[r],vX:r=>ui[r],vY:r=>ci[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>Bc[r][e],sub:(r,e)=>Bc[r][Ve.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Ve.S:Ve.N:Math.abs(e)*2<=Math.abs(r)?r>0?Ve.E:Ve.W:e>0?r>0?Ve.SE:Ve.SW:r>0?Ve.NE:Ve.NW,matrixAppendRotationInv:(r,e,t=0,s=0)=>{const o=w0[Ve.inv(e)];o.tx=t,o.ty=s,r.append(o)},transformRectCoords:(r,e,t,s)=>{const{x:o,y:l,width:u,height:c}=r,{x:d,y:f,width:m,height:y}=e;return t===Ve.E?(s.set(o+d,l+f,u,c),s):t===Ve.S?s.set(m-l-c+d,o+f,c,u):t===Ve.W?s.set(m-o-u+d,y-l-c+f,u,c):t===Ve.N?s.set(l+d,y-o-u+f,c,u):s.set(o+d,l+f,u,c)}},Wa=[new Ot,new Ot,new Ot,new Ot];class it{constructor(e=0,t=0,s=0,o=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new it(0,0,0,0)}clone(){return new it(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const c=this.x,d=this.y,f=s*(1-o),m=s-f,y=c-f,x=c+l+f,v=d-f,S=d+u+f,b=c+m,w=c+l-m,C=d+m,P=d+u-m;return e>=y&&e<=x&&t>=v&&t<=S&&!(e>b&&e<w&&t>C&&t<P)}intersects(e,t){if(!t){const Y=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=Y)return!1;const q=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>q}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const c=Wa[0].set(e.left,e.top),d=Wa[1].set(e.left,e.bottom),f=Wa[2].set(e.right,e.top),m=Wa[3].set(e.right,e.bottom);if(f.x<=c.x||d.y<=c.y)return!1;const y=Math.sign(t.a*t.d-t.b*t.c);if(y===0||(t.apply(c,c),t.apply(d,d),t.apply(f,f),t.apply(m,m),Math.max(c.x,d.x,f.x,m.x)<=s||Math.min(c.x,d.x,f.x,m.x)>=o||Math.max(c.y,d.y,f.y,m.y)<=l||Math.min(c.y,d.y,f.y,m.y)>=u))return!1;const x=y*(d.y-c.y),v=y*(c.x-d.x),S=x*s+v*l,b=x*o+v*l,w=x*s+v*u,C=x*o+v*u;if(Math.max(S,b,w,C)<=x*c.x+v*c.y||Math.min(S,b,w,C)>=x*m.x+v*m.y)return!1;const P=y*(c.y-f.y),E=y*(f.x-c.x),I=P*s+E*l,U=P*o+E*l,O=P*s+E*u,D=P*o+E*u;return!(Math.max(I,U,O,D)<=P*c.x+E*c.y||Math.min(I,U,O,D)>=P*m.x+E*m.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),l=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=o-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),l=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=o,this.height=l-o,this}getBounds(e){return e||(e=new it),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,o=e.x+e.width,l=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(e,t,s,o){return this.x=e,this.y=t,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const hc={default:-1};function mt(r="default"){return hc[r]===void 0&&(hc[r]=-1),++hc[r]}const Qf=new Set,He="8.0.0",Xy="8.3.4",Zi={quiet:!1,noColor:!1},Re=(r,e,t=3)=>{if(Zi.quiet||Qf.has(e))return;let s=new Error().stack;const o=`${e}
Deprecated since v${r}`,l=typeof console.groupCollapsed=="function"&&!Zi.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(t).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),Qf.add(e)};Object.defineProperties(Re,{quiet:{get:()=>Zi.quiet,set:r=>{Zi.quiet=r},enumerable:!0,configurable:!1},noColor:{get:()=>Zi.noColor,set:r=>{Zi.noColor=r},enumerable:!0,configurable:!1}});const S0=()=>{};function ns(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Zf(r){return!(r&r-1)&&!!r}function b0(r){const e={};for(const t in r)r[t]!==void 0&&(e[t]=r[t]);return e}const Jf=Object.create(null);function qy(r){const e=Jf[r];return e===void 0&&(Jf[r]=mt("resource")),e}const k0=class C0 extends zn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...C0.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Re(He,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=qy(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};k0.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let rs=k0;const A0=class P0 extends zn{constructor(e={}){super(),this.options=e,this.uid=mt("textureSource"),this._resourceType="textureSource",this._resourceId=mt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...P0.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new rs(b0(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=mt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const o=Math.round(e*s),l=Math.round(t*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=mt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Zf(this.pixelWidth)&&Zf(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};A0.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Bn=A0;class ih extends Bn{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}ih.extension=ge.TextureSource;const e1=new Le;class Ky{constructor(e,t){this.mapCoord=new Le,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let o=0;o<e.length;o+=2){const l=e[o],u=e[o+1];t[o]=l*s.a+u*s.c+s.tx,t[o+1]=l*s.b+u*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,o=e.trim;o&&(e1.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(e1));const l=e.source,u=this.uClampFrame,c=this.clampMargin/l._resolution,d=this.clampOffset/l._resolution;return u[0]=(e.frame.x+c+d)/l.width,u[1]=(e.frame.y+c+d)/l.height,u[2]=(e.frame.x+e.frame.width-c+d)/l.width,u[3]=(e.frame.y+e.frame.height-c+d)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=e.frame.width===l.width&&e.frame.height===l.height&&e.rotate===0,!0}}class ze extends zn{constructor({source:e,label:t,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:c,rotate:d,dynamic:f}={}){if(super(),this.uid=mt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new it,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new Bn,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:m,height:y}=this._source;this.frame.width=m,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=c,this.destroyed=!1,this.dynamic=f||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Ky(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:o}=this._source,l=t.x/s,u=t.y/o,c=t.width/s,d=t.height/o;let f=this.rotate;if(f){const m=c/2,y=d/2,x=l+m,v=u+y;f=Ve.add(f,Ve.NW),e.x0=x+m*Ve.uX(f),e.y0=v+y*Ve.uY(f),f=Ve.add(f,2),e.x1=x+m*Ve.uX(f),e.y1=v+y*Ve.uY(f),f=Ve.add(f,2),e.x2=x+m*Ve.uX(f),e.y2=v+y*Ve.uY(f),f=Ve.add(f,2),e.x3=x+m*Ve.uX(f),e.y3=v+y*Ve.uY(f)}else e.x0=l,e.y0=u,e.x1=l+c,e.y1=u,e.x2=l+c,e.y2=u+d,e.x3=l,e.y3=u+d}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Re(He,"Texture.baseTexture is now Texture.source"),this._source}}ze.EMPTY=new ze({label:"EMPTY",source:new Bn({label:"EMPTY"})});ze.EMPTY.destroy=S0;ze.WHITE=new ze({source:new ih({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});ze.WHITE.destroy=S0;function Qy(r,e,t){const{width:s,height:o}=t.orig,l=t.trim;if(l){const u=l.width,c=l.height;r.minX=l.x-e._x*s,r.maxX=r.minX+u,r.minY=l.y-e._y*o,r.maxY=r.minY+c}else r.minX=-e._x*s,r.maxX=r.minX+s,r.minY=-e._y*o,r.maxY=r.minY+o}const t1=new Le;class Fn{constructor(e=1/0,t=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=t1,this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new it);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=t1,this}set(e,t,s,o){this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}addFrame(e,t,s,o,l){l||(l=this.matrix);const u=l.a,c=l.b,d=l.c,f=l.d,m=l.tx,y=l.ty;let x=this.minX,v=this.minY,S=this.maxX,b=this.maxY,w=u*e+d*t+m,C=c*e+f*t+y;w<x&&(x=w),C<v&&(v=C),w>S&&(S=w),C>b&&(b=C),w=u*s+d*t+m,C=c*s+f*t+y,w<x&&(x=w),C<v&&(v=C),w>S&&(S=w),C>b&&(b=C),w=u*e+d*o+m,C=c*e+f*o+y,w<x&&(x=w),C<v&&(v=C),w>S&&(S=w),C>b&&(b=C),w=u*s+d*o+m,C=c*s+f*o+y,w<x&&(x=w),C<v&&(v=C),w>S&&(S=w),C>b&&(b=C),this.minX=x,this.minY=v,this.maxX=S,this.maxY=b}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:c,c:d,d:f,tx:m,ty:y}=e;let x=u*t+d*s+m,v=c*t+f*s+y;this.minX=x,this.minY=v,this.maxX=x,this.maxY=v,x=u*o+d*s+m,v=c*o+f*s+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=u*t+d*l+m,v=c*t+f*l+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=u*o+d*l+m,v=c*o+f*l+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,o){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Fn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,o){let l=this.minX,u=this.minY,c=this.maxX,d=this.maxY;o||(o=this.matrix);const f=o.a,m=o.b,y=o.c,x=o.d,v=o.tx,S=o.ty;for(let b=t;b<s;b+=2){const w=e[b],C=e[b+1],P=f*w+y*C+v,E=m*w+x*C+S;l=P<l?P:l,u=E<u?E:u,c=P>c?P:c,d=E>d?E:d}this.minX=l,this.minY=u,this.maxX=c,this.maxY=d}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var Zy={grad:.9,turn:360,rad:360/(2*Math.PI)},sr=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Tt=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},Sn=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},T0=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},n1=function(r){return{r:Sn(r.r,0,255),g:Sn(r.g,0,255),b:Sn(r.b,0,255),a:Sn(r.a)}},dc=function(r){return{r:Tt(r.r),g:Tt(r.g),b:Tt(r.b),a:Tt(r.a,3)}},Jy=/^#([0-9a-f]{3,8})$/i,Ua=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},E0=function(r){var e=r.r,t=r.g,s=r.b,o=r.a,l=Math.max(e,t,s),u=l-Math.min(e,t,s),c=u?l===e?(t-s)/u:l===t?2+(s-e)/u:4+(e-t)/u:0;return{h:60*(c<0?c+6:c),s:l?u/l*100:0,v:l/255*100,a:o}},M0=function(r){var e=r.h,t=r.s,s=r.v,o=r.a;e=e/360*6,t/=100,s/=100;var l=Math.floor(e),u=s*(1-t),c=s*(1-(e-l)*t),d=s*(1-(1-e+l)*t),f=l%6;return{r:255*[s,c,u,u,d,s][f],g:255*[d,s,s,c,u,u][f],b:255*[u,u,d,s,s,c][f],a:o}},r1=function(r){return{h:T0(r.h),s:Sn(r.s,0,100),l:Sn(r.l,0,100),a:Sn(r.a)}},i1=function(r){return{h:Tt(r.h),s:Tt(r.s),l:Tt(r.l),a:Tt(r.a,3)}},s1=function(r){return M0((t=(e=r).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},co=function(r){return{h:(e=E0(r)).h,s:(o=(200-(t=e.s))*(s=e.v)/100)>0&&o<200?t*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,s,o},e3=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,t3=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,n3=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,r3=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jc={string:[[function(r){var e=Jy.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Tt(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Tt(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=n3.exec(r)||r3.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:n1({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=e3.exec(r)||t3.exec(r);if(!e)return null;var t,s,o=r1({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(Zy[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return s1(o)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,s=r.b,o=r.a,l=o===void 0?1:o;return sr(e)&&sr(t)&&sr(s)?n1({r:Number(e),g:Number(t),b:Number(s),a:Number(l)}):null},"rgb"],[function(r){var e=r.h,t=r.s,s=r.l,o=r.a,l=o===void 0?1:o;if(!sr(e)||!sr(t)||!sr(s))return null;var u=r1({h:Number(e),s:Number(t),l:Number(s),a:Number(l)});return s1(u)},"hsl"],[function(r){var e=r.h,t=r.s,s=r.v,o=r.a,l=o===void 0?1:o;if(!sr(e)||!sr(t)||!sr(s))return null;var u=(function(c){return{h:T0(c.h),s:Sn(c.s,0,100),v:Sn(c.v,0,100),a:Sn(c.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(l)});return M0(u)},"hsv"]]},o1=function(r,e){for(var t=0;t<e.length;t++){var s=e[t][0](r);if(s)return[s,e[t][1]]}return[null,void 0]},i3=function(r){return typeof r=="string"?o1(r.trim(),jc.string):typeof r=="object"&&r!==null?o1(r,jc.object):[null,void 0]},fc=function(r,e){var t=co(r);return{h:t.h,s:Sn(t.s+100*e,0,100),l:t.l,a:t.a}},pc=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},a1=function(r,e){var t=co(r);return{h:t.h,s:t.s,l:Sn(t.l+100*e,0,100),a:t.a}},Dc=(function(){function r(e){this.parsed=i3(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Tt(pc(this.rgba),2)},r.prototype.isDark=function(){return pc(this.rgba)<.5},r.prototype.isLight=function(){return pc(this.rgba)>=.5},r.prototype.toHex=function(){return e=dc(this.rgba),t=e.r,s=e.g,o=e.b,u=(l=e.a)<1?Ua(Tt(255*l)):"","#"+Ua(t)+Ua(s)+Ua(o)+u;var e,t,s,o,l,u},r.prototype.toRgb=function(){return dc(this.rgba)},r.prototype.toRgbString=function(){return e=dc(this.rgba),t=e.r,s=e.g,o=e.b,(l=e.a)<1?"rgba("+t+", "+s+", "+o+", "+l+")":"rgb("+t+", "+s+", "+o+")";var e,t,s,o,l},r.prototype.toHsl=function(){return i1(co(this.rgba))},r.prototype.toHslString=function(){return e=i1(co(this.rgba)),t=e.h,s=e.s,o=e.l,(l=e.a)<1?"hsla("+t+", "+s+"%, "+o+"%, "+l+")":"hsl("+t+", "+s+"%, "+o+"%)";var e,t,s,o,l},r.prototype.toHsv=function(){return e=E0(this.rgba),{h:Tt(e.h),s:Tt(e.s),v:Tt(e.v),a:Tt(e.a,3)};var e},r.prototype.invert=function(){return Vn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Vn(fc(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Vn(fc(this.rgba,-e))},r.prototype.grayscale=function(){return Vn(fc(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Vn(a1(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Vn(a1(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Vn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Tt(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=co(this.rgba);return typeof e=="number"?Vn({h:e,s:t.s,l:t.l,a:t.a}):Tt(t.h)},r.prototype.isEqual=function(e){return this.toHex()===Vn(e).toHex()},r})(),Vn=function(r){return r instanceof Dc?r:new Dc(r)},l1=[],s3=function(r){r.forEach(function(e){l1.indexOf(e)<0&&(e(Dc,jc),l1.push(e))})};function o3(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in t)s[t[o]]=o;var l={};r.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,d,f=s[this.toHex()];if(f)return f;if(u!=null&&u.closest){var m=this.toRgb(),y=1/0,x="black";if(!l.length)for(var v in t)l[v]=new r(t[v]).toRgb();for(var S in t){var b=(c=m,d=l[S],Math.pow(c.r-d.r,2)+Math.pow(c.g-d.g,2)+Math.pow(c.b-d.b,2));b<y&&(y=b,x=S)}return x}},e.string.push([function(u){var c=u.toLowerCase(),d=c==="transparent"?"#0000":t[c];return d?new r(d).toRgb():null},"name"])}s3([o3]);const is=class so{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof so)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((l,u)=>l===t[u]);if(e!==null&&t!==null){const l=Object.keys(e),u=Object.keys(t);return l.length!==u.length?!1:l.every(c=>e[c]===t[c])}return e===t}toRgba(){const[e,t,s,o]=this._components;return{r:e,g:t,b:s,a:o}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(o*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,o,l]=this._components;return e[0]=t,e[1]=s,e[2]=o,e[3]=l,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,o]=this._components;return e[0]=t,e[1]=s,e[2]=o,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,o,l]=so._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return t&&(s=s*e+.5|0,o=o*e+.5|0,l=l*e+.5|0),(e*255<<24)+(s<<16)+(o<<8)+l}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,o,l;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,o,l=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,o,l=255]=e,t/=255,s/=255,o/=255,l/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const c=so.HEX_PATTERN.exec(e);c&&(e=`#${c[2]}`)}const u=Vn(e);u.isValid()&&({r:t,g:s,b:o,a:l}=u.rgba,t/=255,s/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((o,l)=>{e[l]=Math.min(Math.max(o,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof so||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};is.shared=new is;is._temp=new is;is.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let wt=is;const a3={cullArea:null,cullable:!1,cullableChildren:!0};let mc=0;const u1=500;function nt(...r){mc!==u1&&(mc++,mc===u1?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}const ko={_registeredResources:new Set,register(r){this._registeredResources.add(r)},unregister(r){this._registeredResources.delete(r)},release(){this._registeredResources.forEach(r=>r.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(r){return this._registeredResources.has(r)},reset(){this._registeredResources.clear()}};class l3{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class u3{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new l3(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const bn=new u3;ko.register(bn);const c3={get isCachedAsTexture(){var r;return!!((r=this.renderGroup)!=null&&r.isCachedAsTexture)},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){var r;(r=this.renderGroup)==null||r.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){Re("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function h3(r,e,t){const s=r.length;let o;if(e>=s||t===0)return;t=e+t>s?s-e:t;const l=s-t;for(o=e;o<l;++o)r[o]=r[o+t];r.length=l}const d3={allowChildren:!0,removeChildren(r=0,e){var l;const t=e??this.children.length,s=t-r,o=[];if(s>0&&s<=t){for(let c=t-1;c>=r;c--){const d=this.children[c];d&&(o.push(d),d.parent=null)}h3(this.children,r,t);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(o);for(let c=0;c<o.length;++c){const d=o[c];(l=d.parentRenderLayer)==null||l.detach(d),this.emit("childRemoved",d,this,c),o[c].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const e=this.getChildAt(r);return this.removeChild(e)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,e)},getChildIndex(r){const e=this.children.indexOf(r);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(r,e){this.allowChildren||Re(He,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${r}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(r.parent){const o=r.parent.children.indexOf(r);if(r.parent===this&&o===e)return r;o!==-1&&r.parent.children.splice(o,1)}e===t.length?t.push(r):t.splice(e,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,e),r.emit("added",this),r},swapChildren(r,e){if(r===e)return;const t=this.getChildIndex(r),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=r;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var r;(r=this.parent)==null||r.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(e=>this.reparentChildAt(e,this.children.length)),r[0])},reparentChildAt(r,e){if(r.parent===this)return this.setChildIndex(r,e),r;const t=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),r.setFromMatrix(t),r},replaceChild(r,e){r.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(r)),e.setFromMatrix(r.localTransform),e.updateLocalTransform(),this.removeChild(r)}},f3={collectRenderables(r,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(r,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,r):this.collectRenderablesWithEffects(r,e,t))},collectRenderablesSimple(r,e,t){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(r,e,t)},collectRenderablesWithEffects(r,e,t){const{renderPipes:s}=e;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,r)}this.collectRenderablesSimple(r,e,t);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,r)}}};class c1{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class p3{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return bn.get(s.maskClass,e)}return e}returnMaskEffect(e){bn.return(e)}}const $c=new p3;Lt.handleByList(ge.MaskEffect,$c._effectClasses);const m3={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const e=this.effects.indexOf(r);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const e=this._maskEffect;(e==null?void 0:e.mask)!==r&&(e&&(this.removeEffect(e),$c.returnMaskEffect(e),this._maskEffect=null),r!=null&&(this._maskEffect=$c.getMaskEffect(r),this.addEffect(this._maskEffect)))},get mask(){var r;return(r=this._maskEffect)==null?void 0:r.mask},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},set filters(r){var l;!Array.isArray(r)&&r&&(r=[r]);const e=this._filterEffect||(this._filterEffect=new c1);r=r;const t=(r==null?void 0:r.length)>0,s=((l=e.filters)==null?void 0:l.length)>0,o=t!==s;r=Array.isArray(r)?r.slice(0):r,e.filters=Object.freeze(r),o&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=r??null))},get filters(){var r;return(r=this._filterEffect)==null?void 0:r.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new c1),this._filterEffect.filterArea=r},get filterArea(){var r;return(r=this._filterEffect)==null?void 0:r.filterArea}},g3={label:null,get name(){return Re(He,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){Re(He,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,e=!1){return this.getChildByLabel(r,e)},getChildByLabel(r,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const o=t[s];if(o.label===r||r instanceof RegExp&&r.test(o.label))return o}if(e)for(let s=0;s<t.length;s++){const l=t[s].getChildByLabel(r,!0);if(l)return l}return null},getChildrenByLabel(r,e=!1,t=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===r||r instanceof RegExp&&r.test(l.label))&&t.push(l)}if(e)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(r,!0,t);return t}},Gt=bn.getPool(Le),lr=bn.getPool(Fn),y3=new Le,x3={getFastGlobalBounds(r,e){e||(e=new Fn),e.clear(),this._getGlobalBoundsRecursive(!!r,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(r,e,t){let s=e;if(r&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=lr.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(r,s,t)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let c=0;c<this.effects.length;c++)this.effects[c].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[c].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(y3).invert()),e.addBounds(s),lr.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),lr.return(s))}};function R0(r,e,t){t.clear();let s,o;return r.parent?e?s=r.parent.worldTransform:(o=Gt.get().identity(),s=sh(r,o)):s=Le.IDENTITY,I0(r,t,s,e),o&&Gt.return(o),t.isValid||t.set(0,0,0,0),t}function I0(r,e,t,s){var c,d;if(!r.visible||!r.measurable)return;let o;s?o=r.worldTransform:(r.updateLocalTransform(),o=Gt.get(),o.appendFrom(r.localTransform,t));const l=e,u=!!r.effects.length;if(u&&(e=lr.get().clear()),r.boundsArea)e.addRect(r.boundsArea,o);else{const f=r.bounds;f&&!f.isEmpty()&&(e.matrix=o,e.addBounds(f));for(let m=0;m<r.children.length;m++)I0(r.children[m],e,o,s)}if(u){for(let f=0;f<r.effects.length;f++)(d=(c=r.effects[f]).addBounds)==null||d.call(c,e);l.addBounds(e,Le.IDENTITY),lr.return(e)}s||Gt.return(o)}function sh(r,e){const t=r.parent;return t&&(sh(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function L0(r,e){if(r===16777215||!e)return e;if(e===16777215||!r)return r;const t=r>>16&255,s=r>>8&255,o=r&255,l=e>>16&255,u=e>>8&255,c=e&255,d=t*l/255|0,f=s*u/255|0,m=o*c/255|0;return(d<<16)+(f<<8)+m}const h1=16777215;function d1(r,e){return r===h1?e:e===h1?r:L0(r,e)}function rl(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const v3={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(r=new Le,e){if(e)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const t=sh(this,Gt.get().identity());return r.appendFrom(this.localTransform,t),Gt.return(t),r},getGlobalTint(r){if(r)return this.renderGroup?rl(this.renderGroup.worldColor):this.parentRenderGroup?rl(d1(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=d1(e,t.localColor),t=t.parent;return rl(e)}};function F0(r,e,t){return e.clear(),t||(t=Le.IDENTITY),z0(r,e,t,r,!0),e.isValid||e.set(0,0,0,0),e}function z0(r,e,t,s,o){var d,f;let l;if(o)l=Gt.get(),l=t.copyTo(l);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const m=r.localTransform;l=Gt.get(),l.appendFrom(m,t)}const u=e,c=!!r.effects.length;if(c&&(e=lr.get().clear()),r.boundsArea)e.addRect(r.boundsArea,l);else{r.renderPipeId&&(e.matrix=l,e.addBounds(r.bounds));const m=r.children;for(let y=0;y<m.length;y++)z0(m[y],e,l,s,!1)}if(c){for(let m=0;m<r.effects.length;m++)(f=(d=r.effects[m]).addLocalBounds)==null||f.call(d,e,s);u.addBounds(e,Le.IDENTITY),lr.return(e)}Gt.return(l)}function B0(r,e){const t=r.children;for(let s=0;s<t.length;s++){const o=t[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,c=e.index;(e.data[c]!==l||e.data[c+1]!==u)&&(e.data[e.index]=l,e.data[e.index+1]=u,e.didChange=!0),e.index=c+2,o.children.length&&B0(o,e)}return e.didChange}const _3=new Le,w3={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=r/e*t:this.scale.x=t},_setHeight(r,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=r/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Fn});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),B0(this,r),r.didChange&&F0(this,r.localBounds,_3),r.localBounds},getBounds(r,e){return R0(this,r,e||new Fn)}},S3={_onRender:null,set onRender(r){const e=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},b3={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(k3))}};function k3(r,e){return r._zIndex-e._zIndex}const C3={getGlobalPosition(r=new Ot,e=!1){return this.parent?this.parent.toGlobal(this._position,r,e):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,e,t=!1){const s=this.getGlobalTransform(Gt.get(),t);return e=s.apply(r,e),Gt.return(s),e},toLocal(r,e,t,s){e&&(r=e.toGlobal(r,t,s));const o=this.getGlobalTransform(Gt.get(),s);return t=o.applyInverse(r,t),Gt.return(o),t}};class j0{constructor(){this.uid=mt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let A3=0;class P3{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new rs(this.textureOptions)}createTexture(e,t,s){const o=new Bn({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new ze({source:o,label:`texturePool_${A3++}`})}getOptimalTexture(e,t,s=1,o){let l=Math.ceil(e*s-1e-6),u=Math.ceil(t*s-1e-6);l=ns(l),u=ns(u);const c=(l<<17)+(u<<1)+(o?1:0);this._texturePool[c]||(this._texturePool[c]=[]);let d=this._texturePool[c].pop();return d||(d=this.createTexture(l,u,o)),d.source._resolution=s,d.source.width=l/s,d.source.height=u/s,d.source.pixelWidth=l,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=e,d.frame.height=t,d.updateUvs(),this._poolKeyHash[d.uid]=c,d}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const D0=new P3;ko.register(D0);class T3{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Le,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new j0,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(D0.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Le),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Le),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Le),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function E3(r,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(r[s]=e[s])}const gc=new It(null),Ga=new It(null),yc=new It(null,1,1),Ha=new It(null),f1=1,M3=2,xc=4;class ln extends zn{constructor(e={}){var t,s;super(),this.uid=mt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Le,this.relativeGroupTransform=new Le,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new It(this,0,0),this._scale=yc,this._pivot=Ga,this._origin=Ha,this._skew=gc,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],E3(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(o=>this.addChild(o)),(s=e.parent)==null||s.addChild(this)}static mixin(e){Re("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Lt.mixin(ln,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Re(He,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let o=0;o<e.length;o++)this.addChild(e[o]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let o=0;o<e.length;o++)this.removeChild(e[o]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=bn.get(T3,this),this.groupTransform=Le.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),bn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Le),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*Uy}set angle(e){this.rotation=e*Gy}get pivot(){return this._pivot===Ga&&(this._pivot=new It(this,0,0)),this._pivot}set pivot(e){this._pivot===Ga&&(this._pivot=new It(this,0,0),this._origin!==Ha&&nt("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===gc&&(this._skew=new It(this,0,0)),this._skew}set skew(e){this._skew===gc&&(this._skew=new It(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===yc&&(this._scale=new It(this,1,1)),this._scale}set scale(e){this._scale===yc&&(this._scale=new It(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Ha&&(this._origin=new It(this,0,0)),this._origin}set origin(e){this._origin===Ha&&(this._origin=new It(this,0,0),this._pivot!==Ga&&nt("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,c=s._x,d=s._y,f=o._x,m=o._y,y=-l._x,x=-l._y;t.a=this._cx*c,t.b=this._sx*c,t.c=this._cy*d,t.d=this._sy*d,t.tx=u._x-(f*t.a+m*t.c)+(y*t.a+x*t.c)-y,t.ty=u._y-(f*t.b+m*t.d)+(y*t.b+x*t.d)-x}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=f1,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=wt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=f1,this._onUpdate())}get tint(){return rl(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=M3,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=xc,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=xc,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=xc,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var o;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let l=0;l<t.length;++l)t[l].destroy(e);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}Lt.mixin(ln,d3,x3,C3,S3,w3,m3,g3,b3,a3,c3,v3,f3);class oh extends ln{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Fn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:o}=e;return s>=t.minX&&s<=t.maxX&&o>=t.minY&&o<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var t,s;super.destroy(e),this._bounds=null;for(const o in this._gpuData)(s=(t=this._gpuData[o]).destroy)==null||s.call(t);this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:o}=t;o.blendMode.pushBlendMode(this,this.groupBlendMode,e),o[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const u=this.children,c=u.length;for(let d=0;d<c;d++)u[d].collectRenderables(e,t,s);o.blendMode.popBlendMode(e)}}class ss extends oh{constructor(e=ze.EMPTY){e instanceof ze&&(e={texture:e});const{texture:t=ze.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...c}=e;super({label:"Sprite",...c}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new It({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof ze?new ss(e):new ss(ze.from(e,t))}set texture(e){e||(e=ze.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Qy(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Re("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:o,height:l}=t.orig;s.minX=-e._x*o,s.maxX=s.minX+o,s.minY=-e._y*l,s.maxY=s.minY+l}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const R3=new Fn;function $0(r,e,t){const s=R3;r.measurable=!0,R0(r,t,s),e.addBoundsMask(s),r.measurable=!1}function O0(r,e,t){const s=lr.get();r.measurable=!0;const o=Gt.get().identity(),l=N0(r,t,o);F0(r,s,l),r.measurable=!1,e.addBoundsMask(s),Gt.return(o),lr.return(s)}function N0(r,e,t){return r?(r!==e&&(N0(r.parent,e,t),r.updateLocalTransform(),t.append(r.localTransform)),t):(nt("Mask bounds, renderable is not inside the root container"),t)}class W0{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof ss),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||$0(this.mask,e,t)}addLocalBounds(e,t){O0(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof ss}}W0.extension=ge.MaskEffect;class U0{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}U0.extension=ge.MaskEffect;class G0{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){$0(this.mask,e,t)}addLocalBounds(e,t){O0(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof ln}}G0.extension=ge.MaskEffect;const I3={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};let p1=I3;const Ke={get(){return p1},set(r){p1=r}};class H0 extends Bn{constructor(e){e.resource||(e.resource=Ke.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const o=super.resize(e,t,s);return o&&this.resizeCanvas(),o}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}H0.extension=ge.TextureSource;class di extends Bn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}di.extension=ge.TextureSource;var Oc=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Oc||{});class vc{constructor(e,t=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=o}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const V0=class an{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new vc(null,null,1/0),this.deltaMS=1/an.targetFPMS,this.elapsedMS=1/an.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Oc.NORMAL){return this._addListener(new vc(e,t,s))}addOnce(e,t,s=Oc.NORMAL){return this._addListener(new vc(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const l=e-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=e-l%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*an.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,an.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!an._shared){const e=an._shared=new an;e.autoStart=!0,e._protected=!0}return an._shared}static get system(){if(!an._system){const e=an._system=new an;e.autoStart=!0,e._protected=!0}return an._system}};V0.targetFPMS=.06;let Va=V0,_c;async function Y0(){return _c??(_c=(async()=>{var u;const e=Ke.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(c=>{const d=document.createElement("video");d.onloadeddata=()=>c(d),d.onerror=()=>c(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),e.deleteFramebuffer(o),e.deleteTexture(s),(u=e.getExtension("WEBGL_lose_context"))==null||u.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),_c}const dl=class X0 extends Bn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...X0.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=Va.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Y0(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Va.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Va.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Va.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};dl.extension=ge.TextureSource;dl.defaultOptions={...Bn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};dl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let ho=dl;const Ln=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(s=>typeof s=="string"||t?e(s):s):r);class L3{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||nt(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=Ln(e);let o;for(let d=0;d<this.parsers.length;d++){const f=this.parsers[d];if(f.test(t)){o=f.getCacheableAssets(s,t);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(d=>{l.set(d,t)});const u=[...l.keys()],c={cacheKeys:u,keys:s};s.forEach(d=>{this._cacheMap.set(d,c)}),u.forEach(d=>{const f=o?o[d]:t;this._cache.has(d)&&this._cache.get(d)!==f&&nt("[Cache] already has key:",d),this._cache.set(d,l.get(d))})}remove(e){if(!this._cacheMap.has(e)){nt(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(o=>{this._cache.delete(o)}),t.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const tt=new L3,Nc=[];Lt.handleByList(ge.TextureSource,Nc);function q0(r={}){const e=r&&r.resource,t=e?r.resource:r,s=e?r:{resource:r};for(let o=0;o<Nc.length;o++){const l=Nc[o];if(l.test(t))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function F3(r={},e=!1){const t=r&&r.resource,s=t?r.resource:r,o=t?r:{resource:r};if(!e&&tt.has(s))return tt.get(s);const l=new ze({source:q0(o)});return l.on("destroy",()=>{tt.has(s)&&tt.remove(s)}),e||tt.set(s,l),l}function z3(r,e=!1){return typeof r=="string"?tt.get(r):r instanceof Bn?new ze({source:r}):F3(r,e)}ze.from=z3;Bn.from=q0;Lt.add(W0,U0,G0,ho,di,H0,ih);var zr=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(zr||{});function In(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Zs(r){return r.split("?")[0].split("#")[0]}function B3(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function j3(r,e,t){return r.replace(new RegExp(B3(e),"g"),t)}function D3(r,e){let t="",s=0,o=-1,l=0,u=-1;for(let c=0;c<=r.length;++c){if(c<r.length)u=r.charCodeAt(c);else{if(u===47)break;u=47}if(u===47){if(!(o===c-1||l===1))if(o!==c-1&&l===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const d=t.lastIndexOf("/");if(d!==t.length-1){d===-1?(t="",s=0):(t=t.slice(0,d),s=t.length-1-t.lastIndexOf("/")),o=c,l=0;continue}}else if(t.length===2||t.length===1){t="",s=0,o=c,l=0;continue}}}else t.length>0?t+=`/${r.slice(o+1,c)}`:t=r.slice(o+1,c),s=c-o-1;o=c,l=0}else u===46&&l!==-1?++l:l=-1}return t}const un={toPosix(r){return j3(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){In(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(In(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const s=Zs(this.toPosix(e??Ke.get().getBaseUrl())),o=Zs(this.toPosix(t??this.rootname(s)));return r=this.toPosix(r),r.startsWith("/")?un.join(o,r.slice(1)):this.isAbsolute(r)?r:this.join(s,r)},normalize(r){if(In(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const s=r.endsWith("/");return r=D3(r),r.length>0&&s&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return In(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const s=r[t];if(In(s),s.length>0)if(e===void 0)e=s;else{const o=r[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(In(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let s=-1,o=!0;const l=this.getProtocol(r),u=r;r=r.slice(l.length);for(let c=r.length-1;c>=1;--c)if(e=r.charCodeAt(c),e===47){if(!o){s=c;break}}else o=!1;return s===-1?t?"/":this.isUrl(u)?l+r:l:t&&s===1?"//":l+r.slice(0,s)},rootname(r){In(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){In(r),e&&In(e),r=Zs(this.toPosix(r));let t=0,s=-1,o=!0,l;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let u=e.length-1,c=-1;for(l=r.length-1;l>=0;--l){const d=r.charCodeAt(l);if(d===47){if(!o){t=l+1;break}}else c===-1&&(o=!1,c=l+1),u>=0&&(d===e.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=c))}return t===s?s=c:s===-1&&(s=r.length),r.slice(t,s)}for(l=r.length-1;l>=0;--l)if(r.charCodeAt(l)===47){if(!o){t=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":r.slice(t,s)},extname(r){In(r),r=Zs(this.toPosix(r));let e=-1,t=0,s=-1,o=!0,l=0;for(let u=r.length-1;u>=0;--u){const c=r.charCodeAt(u);if(c===47){if(!o){t=u+1;break}continue}s===-1&&(o=!1,s=u+1),c===46?e===-1?e=u:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||s===-1||l===0||l===1&&e===s-1&&e===t+1?"":r.slice(e,s)},parse(r){In(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=Zs(this.toPosix(r));let t=r.charCodeAt(0);const s=this.isAbsolute(r);let o;e.root=this.rootname(r),s||this.hasProtocol(r)?o=1:o=0;let l=-1,u=0,c=-1,d=!0,f=r.length-1,m=0;for(;f>=o;--f){if(t=r.charCodeAt(f),t===47){if(!d){u=f+1;break}continue}c===-1&&(d=!1,c=f+1),t===46?l===-1?l=f:m!==1&&(m=1):l!==-1&&(m=-1)}return l===-1||c===-1||m===0||m===1&&l===c-1&&l===u+1?c!==-1&&(u===0&&s?e.base=e.name=r.slice(1,c):e.base=e.name=r.slice(u,c)):(u===0&&s?(e.name=r.slice(1,l),e.base=r.slice(1,c)):(e.name=r.slice(u,l),e.base=r.slice(u,c)),e.ext=r.slice(l,c)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function K0(r,e,t,s,o){const l=e[t];for(let u=0;u<l.length;u++){const c=l[u];t<e.length-1?K0(r.replace(s[t],c),e,t+1,s,o):o.push(r.replace(s[t],c))}}function $3(r){const e=/\{(.*?)\}/g,t=r.match(e),s=[];if(t){const o=[];t.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),K0(r,o,0,t,s)}else s.push(r);return s}const al=r=>!Array.isArray(r);class ls{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return Ln(t||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>(u==null?void 0:u.src)??u):l!=null&&l.src?l.src:l,!0)}addManifest(e){this._manifest&&nt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let o=t;Array.isArray(t)||(o=Object.entries(t).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,c=l.alias;let d;if(typeof c=="string"){const f=this._createBundleAssetId(e,c);s.push(f),d=[c,f]}else{const f=c.map(m=>this._createBundleAssetId(e,m));s.push(...f),d=[...c,...f]}this.add({...l,alias:d,src:u})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=l=>{this.hasKey(l)&&nt(`[Resolver] already has key: ${l} overwriting`)},Ln(t).forEach(l=>{const{src:u}=l;let{data:c,format:d,loadParser:f,parser:m}=l;const y=Ln(u).map(b=>typeof b=="string"?$3(b):Array.isArray(b)?b:[b]),x=this.getAlias(l);Array.isArray(x)?x.forEach(s):s(x);const v=[],S=b=>{const w=this._parsers.find(C=>C.test(b));return{...w==null?void 0:w.parse(b),src:b}};y.forEach(b=>{b.forEach(w=>{let C={};if(typeof w!="object"?C=S(w):(c=w.data??c,d=w.format??d,(w.loadParser||w.parser)&&(f=w.loadParser??f,m=w.parser??m),C={...S(w.src),...w}),!x)throw new Error(`[Resolver] alias is undefined for this asset: ${C.src}`);C=this._buildResolvedAsset(C,{aliases:x,data:c,format:d,loadParser:f,parser:m,progressSize:l.progressSize}),v.push(C)})}),x.forEach(b=>{this._assetMap[b]=v})})}resolveBundle(e){const t=al(e);e=Ln(e);const s={};return e.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),c={};for(const d in u){const f=u[d];c[this._extractAssetIdFromBundle(o,d)]=f}s[o]=c}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const o in t)s[o]=t[o].src;return s}return t.src}resolve(e){const t=al(e);e=Ln(e);const s={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u==null||u.priority.forEach(c=>{u.params[c].forEach(d=>{const f=l.filter(m=>m[c]?m[c]===d:!1);f.length&&(l=f)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:o,loadParser:l,parser:u,format:c,progressSize:d}=t;return(this._basePath||this._rootPath)&&(e.src=un.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=l??e.loadParser,e.parser=u??e.parser,e.format=c??e.format??O3(e.src),d!==void 0&&(e.progressSize=d),e}}ls.RETINA_PREFIX=/@([0-9\.]+)x/;function O3(r){return r.split(".").pop().split("?").shift().split("#").shift()}const Wc=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r},Q0=class oo{constructor(e,t){this.linkedSheets=[];let s=e;(e==null?void 0:e.source)instanceof Bn&&(s={texture:e,data:t});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof ze?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const c=parseFloat(l.meta.scale);c?(this.resolution=c,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=oo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=oo.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const o=this._frameKeys[t],l=this._frames[o],u=l.frame;if(u){let c=null,d=null;const f=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,m=new it(0,0,Math.floor(f.w)/this.resolution,Math.floor(f.h)/this.resolution);l.rotated?c=new it(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):c=new it(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(d=new it(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new ze({source:this.textureSource,frame:c,orig:m,trim:d,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const o=e[t][s];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*oo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*oo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Q0.BATCH_SIZE=1e3;let m1=Q0;const N3=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Z0(r,e,t){const s={};if(r.forEach(o=>{s[o]=e}),Object.keys(e.textures).forEach(o=>{s[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=un.dirname(r[0]);e.linkedSheets.forEach((l,u)=>{const c=Z0([`${o}/${e.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,c)})}return s}const W3={extension:ge.Asset,cache:{test:r=>r instanceof m1,getCacheableAssets:(r,e)=>Z0(r,e,!1)},resolver:{extension:{type:ge.ResolveParser,name:"resolveSpritesheet"},test:r=>{const t=r.split("?")[0].split("."),s=t.pop(),o=t.pop();return s==="json"&&N3.includes(o)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=ls.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:ge.LoadParser,priority:zr.Normal,name:"spritesheetLoader"},async testParse(r,e){return un.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var y,x;const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=(e==null?void 0:e.data)??{};let c=un.dirname(e.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let d;if(s instanceof ze)d=s;else{const v=Wc(c+(o??r.meta.image),e.src);d=(await t.load([{src:v,data:l}]))[v]}const f=new m1({texture:d.source,data:r,cachePrefix:u});await f.parse();const m=(y=r==null?void 0:r.meta)==null?void 0:y.related_multi_packs;if(Array.isArray(m)){const v=[];for(const b of m){if(typeof b!="string")continue;let w=c+b;(x=e.data)!=null&&x.ignoreMultiPack||(w=Wc(w,e.src),v.push(t.load({src:w,data:{textureOptions:l,ignoreMultiPack:!0}})))}const S=await Promise.all(v);f.linkedSheets=S,S.forEach(b=>{b.linkedSheets=[f].concat(f.linkedSheets.filter(w=>w!==b))})}return f},async unload(r,e,t){await t.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};Lt.add(W3);const wc=Object.create(null),g1=Object.create(null);function ah(r,e){let t=g1[r];return t===void 0&&(wc[e]===void 0&&(wc[e]=1),g1[r]=t=wc[e]++),t}let Xi;function J0(){return(!Xi||Xi!=null&&Xi.isContextLost())&&(Xi=Ke.get().createCanvas().getContext("webgl",{})),Xi}let Ya;function U3(){if(!Ya){Ya="mediump";const r=J0();r&&r.getShaderPrecisionFormat&&(Ya=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return Ya}function G3(r,e,t){return e?r:t?(r=r.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function H3(r,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let o=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${r}`}else if(s!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function V3(r,e){return e?`#version 300 es
${r}`:r}const Y3={},X3={};function q3(r,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?Y3:X3;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${e}`}
${r}`}function K3(r,e){return e?r.replace("#version 300 es",""):r}const Sc={stripVersion:K3,ensurePrecision:H3,addProgramDefines:G3,setProgramName:q3,insertVersion:V3},Js=Object.create(null),ep=class Uc{constructor(e){e={...Uc.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:U3()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let o=e.fragment,l=e.vertex;Object.keys(Sc).forEach(u=>{const c=s[u];o=Sc[u](o,c,!0),l=Sc[u](l,c,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=ah(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Js[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return Js[t]||(Js[t]=new Uc(e),Js[t]._cacheKey=t),Js[t]}};ep.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let tp=ep;const y1={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Q3(r){return y1[r]??y1.float32}const Z3={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function J3({source:r,entryPoint:e}){const t={},s=r.indexOf(`fn ${e}`);if(s!==-1){const o=r.indexOf("->",s);if(o!==-1){const l=r.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let c;for(;(c=u.exec(l))!==null;){const d=Z3[c[3]]??"float32";t[c[2]]={location:parseInt(c[1],10),format:d,stride:Q3(d).stride,offset:0,instance:!1,start:0}}}}return t}function bc(r){var y,x;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,c=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,f=(y=r.match(e))==null?void 0:y.map(v=>({group:parseInt(v.match(t)[1],10),binding:parseInt(v.match(s)[1],10),name:v.match(o)[2],isUniform:v.match(o)[1]==="<uniform>",type:v.match(l)[1]}));if(!f)return{groups:[],structs:[]};const m=((x=r.match(u))==null?void 0:x.map(v=>{const S=v.match(d)[1],b=v.match(c).reduce((w,C)=>{const[P,E]=C.split(":");return w[P.trim()]=E.trim(),w},{});return b?{name:S,members:b}:null}).filter(({name:v})=>f.some(S=>S.type===v)))??[];return{groups:f,structs:m}}var ao=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(ao||{});function e5({groups:r}){const e=[];for(let t=0;t<r.length;t++){const s=r[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:ao.VERTEX|ao.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:ao.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:ao.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function t5({groups:r}){const e=[];for(let t=0;t<r.length;t++){const s=r[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function n5(r,e){const t=new Set,s=new Set,o=[...r.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),l=[...r.groups,...e.groups].filter(u=>{const c=`${u.name}-${u.binding}`;return s.has(c)?!1:(s.add(c),!0)});return{structs:o,groups:l}}const eo=Object.create(null);class fl{constructor(e){var c,d;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:o,gpuLayout:l,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=s,t.source===s.source){const f=bc(t.source);this.structsAndGroups=f}else{const f=bc(s.source),m=bc(t.source);this.structsAndGroups=n5(f,m)}this.layout=o??t5(this.structsAndGroups),this.gpuLayout=l??e5(this.structsAndGroups),this.autoAssignGlobalUniforms=((c=this.layout[0])==null?void 0:c.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((d=this.layout[1])==null?void 0:d.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=ah(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=J3(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,eo[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return eo[t]||(eo[t]=new fl(e),eo[t]._cacheKey=t),eo[t]}}const np=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],r5=np.reduce((r,e)=>(r[e]=!0,r),{});function i5(r,e){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const rp=class ip{constructor(e,t){this._touched=0,this.uid=mt("uniform"),this._resourceType="uniformGroup",this._resourceId=mt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...ip.defaultOptions,...t},this.uniformStructures=e;const s={};for(const o in e){const l=e[o];if(l.name=o,l.size=l.size??1,!r5[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,c,d]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${c}', size: ${d} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${np.join(", ")}`)}l.value??(l.value=i5(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=ah(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};rp.defaultOptions={ubo:!1,isStatic:!1};let sp=rp;class il{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const o=e[s];this.setResource(o,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){var o,l;const s=this.resources[t];e!==s&&(s&&((o=e.off)==null||o.call(e,"change",this.onResourceChange,this)),(l=e.on)==null||l.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){var t;const e=this.resources;for(const s in e){const o=e[s];(t=o==null?void 0:o.off)==null||t.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var Gc=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(Gc||{});class lh extends zn{constructor(e){super(),this.uid=mt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:c}=e;this.gpuProgram=t,this.glProgram=s,u===void 0&&(u=0,t&&(u|=Gc.WEBGPU),s&&(u|=Gc.WEBGL)),this.compatibleRenderers=u;const d={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&o&&!c)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&o&&c)for(const f in c)for(const m in c[f]){const y=c[f][m];d[y]={group:f,binding:m,name:y}}else if(t&&o&&!c){const f=t.structsAndGroups.groups;c={},f.forEach(m=>{c[m.group]=c[m.group]||{},c[m.group][m.binding]=m.name,d[m.name]=m})}else if(l){o={},c={},t&&t.structsAndGroups.groups.forEach(y=>{c[y.group]=c[y.group]||{},c[y.group][y.binding]=y.name,d[y.name]=y});let f=0;for(const m in l)d[m]||(o[99]||(o[99]=new il,this._ownedBindGroups.push(o[99])),d[m]={group:99,binding:f,name:m},c[99]=c[99]||{},c[99][f]=m,f++);for(const m in l){const y=m;let x=l[m];!x.source&&!x._resourceType&&(x=new sp(x));const v=d[y];v&&(o[v.group]||(o[v.group]=new il,this._ownedBindGroups.push(o[v.group])),o[v.group].setResource(x,v.binding))}}this.groups=o,this._uniformBindMap=c,this.resources=this._buildResourceAccessor(o,d)}addResource(e,t,s){var o,l;(o=this._uniformBindMap)[t]||(o[t]={}),(l=this._uniformBindMap[t])[s]||(l[s]=e),this.groups[t]||(this.groups[t]=new il,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const o in t){const l=t[o];Object.defineProperty(s,l.name,{get(){return e[l.group].getResource(l.binding)},set(u){e[l.group].setResource(u,l.binding)}})}return s}destroy(e=!1){var t,s;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...o}=e;let l,u;return t&&(l=fl.from(t)),s&&(u=tp.from(s)),new lh({gpuProgram:l,glProgram:u,...o})}}const Hc=[];Lt.handleByNamedList(ge.Environment,Hc);async function s5(r){if(!r)for(let e=0;e<Hc.length;e++){const t=Hc[e];if(t.value.test()){await t.value.load();return}}}let to;function o5(){if(typeof to=="boolean")return to;try{to=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{to=!1}return to}function x1(r,e,t=2){const s=e&&e.length,o=s?e[0]*t:r.length;let l=op(r,0,o,t,!0);const u=[];if(!l||l.next===l.prev)return u;let c,d,f;if(s&&(l=h5(r,e,l,t)),r.length>80*t){c=r[0],d=r[1];let m=c,y=d;for(let x=t;x<o;x+=t){const v=r[x],S=r[x+1];v<c&&(c=v),S<d&&(d=S),v>m&&(m=v),S>y&&(y=S)}f=Math.max(m-c,y-d),f=f!==0?32767/f:0}return yo(l,u,t,c,d,f,0),u}function op(r,e,t,s,o){let l;if(o===S5(r,e,t,s)>0)for(let u=e;u<t;u+=s)l=v1(u/s|0,r[u],r[u+1],l);else for(let u=t-s;u>=e;u-=s)l=v1(u/s|0,r[u],r[u+1],l);return l&&os(l,l.next)&&(vo(l),l=l.next),l}function fi(r,e){if(!r)return r;e||(e=r);let t=r,s;do if(s=!1,!t.steiner&&(os(t,t.next)||ht(t.prev,t,t.next)===0)){if(vo(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function yo(r,e,t,s,o,l,u){if(!r)return;!u&&l&&g5(r,s,o,l);let c=r;for(;r.prev!==r.next;){const d=r.prev,f=r.next;if(l?l5(r,s,o,l):a5(r)){e.push(d.i,r.i,f.i),vo(r),r=f.next,c=f.next;continue}if(r=f,r===c){u?u===1?(r=u5(fi(r),e),yo(r,e,t,s,o,l,2)):u===2&&c5(r,e,t,s,o,l):yo(fi(r),e,t,s,o,l,1);break}}}function a5(r){const e=r.prev,t=r,s=r.next;if(ht(e,t,s)>=0)return!1;const o=e.x,l=t.x,u=s.x,c=e.y,d=t.y,f=s.y,m=Math.min(o,l,u),y=Math.min(c,d,f),x=Math.max(o,l,u),v=Math.max(c,d,f);let S=s.next;for(;S!==e;){if(S.x>=m&&S.x<=x&&S.y>=y&&S.y<=v&&lo(o,c,l,d,u,f,S.x,S.y)&&ht(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function l5(r,e,t,s){const o=r.prev,l=r,u=r.next;if(ht(o,l,u)>=0)return!1;const c=o.x,d=l.x,f=u.x,m=o.y,y=l.y,x=u.y,v=Math.min(c,d,f),S=Math.min(m,y,x),b=Math.max(c,d,f),w=Math.max(m,y,x),C=Vc(v,S,e,t,s),P=Vc(b,w,e,t,s);let E=r.prevZ,I=r.nextZ;for(;E&&E.z>=C&&I&&I.z<=P;){if(E.x>=v&&E.x<=b&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&lo(c,m,d,y,f,x,E.x,E.y)&&ht(E.prev,E,E.next)>=0||(E=E.prevZ,I.x>=v&&I.x<=b&&I.y>=S&&I.y<=w&&I!==o&&I!==u&&lo(c,m,d,y,f,x,I.x,I.y)&&ht(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;E&&E.z>=C;){if(E.x>=v&&E.x<=b&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&lo(c,m,d,y,f,x,E.x,E.y)&&ht(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;I&&I.z<=P;){if(I.x>=v&&I.x<=b&&I.y>=S&&I.y<=w&&I!==o&&I!==u&&lo(c,m,d,y,f,x,I.x,I.y)&&ht(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function u5(r,e){let t=r;do{const s=t.prev,o=t.next.next;!os(s,o)&&lp(s,t,t.next,o)&&xo(s,o)&&xo(o,s)&&(e.push(s.i,t.i,o.i),vo(t),vo(t.next),t=r=o),t=t.next}while(t!==r);return fi(t)}function c5(r,e,t,s,o,l){let u=r;do{let c=u.next.next;for(;c!==u.prev;){if(u.i!==c.i&&v5(u,c)){let d=up(u,c);u=fi(u,u.next),d=fi(d,d.next),yo(u,e,t,s,o,l,0),yo(d,e,t,s,o,l,0);return}c=c.next}u=u.next}while(u!==r)}function h5(r,e,t,s){const o=[];for(let l=0,u=e.length;l<u;l++){const c=e[l]*s,d=l<u-1?e[l+1]*s:r.length,f=op(r,c,d,s,!1);f===f.next&&(f.steiner=!0),o.push(x5(f))}o.sort(d5);for(let l=0;l<o.length;l++)t=f5(o[l],t);return t}function d5(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const s=(r.next.y-r.y)/(r.next.x-r.x),o=(e.next.y-e.y)/(e.next.x-e.x);t=s-o}return t}function f5(r,e){const t=p5(r,e);if(!t)return e;const s=up(t,r);return fi(s,s.next),fi(t,t.next)}function p5(r,e){let t=e;const s=r.x,o=r.y;let l=-1/0,u;if(os(r,t))return t;do{if(os(r,t.next))return t.next;if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>l&&(l=y,u=t.x<t.next.x?t:t.next,y===s))return u}t=t.next}while(t!==e);if(!u)return null;const c=u,d=u.x,f=u.y;let m=1/0;t=u;do{if(s>=t.x&&t.x>=d&&s!==t.x&&ap(o<f?s:l,o,d,f,o<f?l:s,o,t.x,t.y)){const y=Math.abs(o-t.y)/(s-t.x);xo(t,r)&&(y<m||y===m&&(t.x>u.x||t.x===u.x&&m5(u,t)))&&(u=t,m=y)}t=t.next}while(t!==c);return u}function m5(r,e){return ht(r.prev,r,e.prev)<0&&ht(e.next,r,r.next)<0}function g5(r,e,t,s){let o=r;do o.z===0&&(o.z=Vc(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,y5(o)}function y5(r){let e,t=1;do{let s=r,o;r=null;let l=null;for(e=0;s;){e++;let u=s,c=0;for(let f=0;f<t&&(c++,u=u.nextZ,!!u);f++);let d=t;for(;c>0||d>0&&u;)c!==0&&(d===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,c--):(o=u,u=u.nextZ,d--),l?l.nextZ=o:r=o,o.prevZ=l,l=o;s=u}l.nextZ=null,t*=2}while(e>1);return r}function Vc(r,e,t,s,o){return r=(r-t)*o|0,e=(e-s)*o|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function x5(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function ap(r,e,t,s,o,l,u,c){return(o-u)*(e-c)>=(r-u)*(l-c)&&(r-u)*(s-c)>=(t-u)*(e-c)&&(t-u)*(l-c)>=(o-u)*(s-c)}function lo(r,e,t,s,o,l,u,c){return!(r===u&&e===c)&&ap(r,e,t,s,o,l,u,c)}function v5(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!_5(r,e)&&(xo(r,e)&&xo(e,r)&&w5(r,e)&&(ht(r.prev,r,e.prev)||ht(r,e.prev,e))||os(r,e)&&ht(r.prev,r,r.next)>0&&ht(e.prev,e,e.next)>0)}function ht(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function os(r,e){return r.x===e.x&&r.y===e.y}function lp(r,e,t,s){const o=qa(ht(r,e,t)),l=qa(ht(r,e,s)),u=qa(ht(t,s,r)),c=qa(ht(t,s,e));return!!(o!==l&&u!==c||o===0&&Xa(r,t,e)||l===0&&Xa(r,s,e)||u===0&&Xa(t,r,s)||c===0&&Xa(t,e,s))}function Xa(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function qa(r){return r>0?1:r<0?-1:0}function _5(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&lp(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function xo(r,e){return ht(r.prev,r,r.next)<0?ht(r,e,r.next)>=0&&ht(r,r.prev,e)>=0:ht(r,e,r.prev)<0||ht(r,r.next,e)<0}function w5(r,e){let t=r,s=!1;const o=(r.x+e.x)/2,l=(r.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==r);return s}function up(r,e){const t=Yc(r.i,r.x,r.y),s=Yc(e.i,e.x,e.y),o=r.next,l=e.prev;return r.next=e,e.prev=r,t.next=o,o.prev=t,s.next=t,t.prev=s,l.next=s,s.prev=l,s}function v1(r,e,t,s){const o=Yc(r,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function vo(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Yc(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function S5(r,e,t,s){let o=0;for(let l=e,u=t-s;l<t;l+=s)o+=(r[u]-r[l])*(r[l+1]+r[u+1]),u=l;return o}const b5=x1.default||x1;var cp=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(cp||{});class k5{constructor(e){this.items=[],this._name=e}emit(e,t,s,o,l,u,c,d){const{name:f,items:m}=this;for(let y=0,x=m.length;y<x;y++)m[y][f](e,t,s,o,l,u,c,d);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const C5=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],hp=class dp extends zn{constructor(e){super(),this.uid=mt("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...C5,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await s5(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...dp.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof ln&&(s={container:s},t&&(Re(He,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:wt.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const o=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=cp.ALL);const{clear:s,clearColor:o,target:l}=e;wt.shared.setValue(o??this.background.colorRgba),t.renderTarget.clear(l,s,wt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new k5(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(e,t){const s=t.reduce((o,l)=>(o[l.name]=l.value,o),{});e.forEach(o=>{const l=o.value,u=o.name,c=s[u];this.renderPipes[u]=new l(this,c?new c:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&ko.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!o5())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};hp.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let fp=hp,Ka;function A5(r){return Ka!==void 0||(Ka=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:r??fp.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ke.get().getWebGLRenderingContext())return!1;let o=Ke.get().createCanvas().getContext("webgl",e);const l=!!((t=o==null?void 0:o.getContextAttributes())!=null&&t.stencil);if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,l}catch{return!1}})()),Ka}let Qa;async function P5(r={}){return Qa!==void 0||(Qa=await(async()=>{const e=Ke.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),Qa}const _1=["webgl","webgpu","canvas"];async function T5(r){let e=[];r.preference?(e.push(r.preference),_1.forEach(l=>{l!==r.preference&&e.push(l)})):e=_1.slice();let t,s={};for(let l=0;l<e.length;l++){const u=e[l];if(u==="webgpu"&&await P5()){const{WebGPURenderer:c}=await ol(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-C8wrQWZT.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]));t=c,s={...r,...r.webgpu};break}else if(u==="webgl"&&A5(r.failIfMajorPerformanceCaveat??fp.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:c}=await ol(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-BkF3xwx8.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]));t=c,s={...r,...r.webgl};break}else if(u==="canvas")throw s={...r},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const o=new t;return await o.init(s),o}const pp="8.14.3";class mp{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,pp)}static destroy(){}}mp.extension=ge.Application;class E5{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,pp)}destroy(){this._renderer=null}}E5.extension={type:[ge.WebGLSystem,ge.WebGPUSystem],name:"initHook",priority:-10};const gp=class Xc{constructor(...e){this.stage=new ln,e[0]!==void 0&&Re(He,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new ln),this.renderer=await T5(e),Xc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Re(He,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=Xc._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};gp._plugins=[];let yp=gp;Lt.handleByList(ge.Application,yp._plugins);Lt.add(mp);class xp extends zn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Re(He,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Re(He,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Re(He,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Re(He,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Re(He,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(t=this.chars[s].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class M5{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let o=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(e,t,s=!1,o=this.resetTtl){let l=this.items[e];return s||l!==void 0?(l.value=t,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function vp(r=1e3,e=0,t=!1){if(isNaN(r)||r<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new M5(r,e,t)}const R5=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function ll(r){const e=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let t=r.fontFamily;Array.isArray(r.fontFamily)||(t=r.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let o=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!R5.includes(o)&&(o=`"${o}"`),t[s]=o}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${e} ${t.join(",")}`}const kc={willReadFrequently:!0},jn=class fe{static get experimentalLetterSpacingSupported(){let e=fe._experimentalLetterSpacingSupported;if(e===void 0){const t=Ke.get().getCanvasRenderingContext2D().prototype;e=fe._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,o,l,u,c,d,f){this.text=e,this.style=t,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=c,this.maxLineWidth=d,this.fontProperties=f}static measureText(e=" ",t,s=fe._canvas,o=t.wordWrap){var P;const l=`${e}-${t.styleKey}-wordWrap-${o}`;if(fe._measurementCache.has(l))return fe._measurementCache.get(l);const u=ll(t),c=fe.measureFont(u);c.fontSize===0&&(c.fontSize=t.fontSize,c.ascent=t.fontSize);const d=fe.__context;d.font=u;const m=(o?fe._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),y=new Array(m.length);let x=0;for(let E=0;E<m.length;E++){const I=fe._measureText(m[E],t.letterSpacing,d);y[E]=I,x=Math.max(x,I)}const v=((P=t._stroke)==null?void 0:P.width)||0;let S=x+v;t.dropShadow&&(S+=t.dropShadow.distance);const b=t.lineHeight||c.fontSize;let w=Math.max(b,c.fontSize+v)+(m.length-1)*(b+t.leading);t.dropShadow&&(w+=t.dropShadow.distance);const C=new fe(e,t,S,w,m,y,b+t.leading,x,c);return fe._measurementCache.set(l,C),C}static _measureText(e,t,s){let o=!1;fe.experimentalLetterSpacingSupported&&(fe.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(e);let u=l.width;const c=-l.actualBoundingBoxLeft;let f=l.actualBoundingBoxRight-c;if(u>0)if(o)u-=t,f-=t;else{const m=(fe.graphemeSegmenter(e).length-1)*t;u+=m,f+=m}return Math.max(u,f)}static _wordWrap(e,t,s=fe._canvas){const o=s.getContext("2d",kc);let l=0,u="",c="";const d=Object.create(null),{letterSpacing:f,whiteSpace:m}=t,y=fe._collapseSpaces(m),x=fe._collapseNewlines(m);let v=!y;const S=t.wordWrapWidth+f,b=fe._tokenize(e);for(let w=0;w<b.length;w++){let C=b[w];if(fe._isNewline(C)){if(!x){c+=fe._addLine(u),v=!y,u="",l=0;continue}C=" "}if(y){const E=fe.isBreakingSpace(C),I=fe.isBreakingSpace(u[u.length-1]);if(E&&I)continue}const P=fe._getFromCache(C,f,d,o);if(P>S)if(u!==""&&(c+=fe._addLine(u),u="",l=0),fe.canBreakWords(C,t.breakWords)){const E=fe.wordWrapSplit(C);for(let I=0;I<E.length;I++){let U=E[I],O=U,D=1;for(;E[I+D];){const Q=E[I+D];if(!fe.canBreakChars(O,Q,C,I,t.breakWords))U+=Q;else break;O=Q,D++}I+=D-1;const Y=fe._getFromCache(U,f,d,o);Y+l>S&&(c+=fe._addLine(u),v=!1,u="",l=0),u+=U,l+=Y}}else{u.length>0&&(c+=fe._addLine(u),u="",l=0);const E=w===b.length-1;c+=fe._addLine(C,!E),v=!1,u="",l=0}else P+l>S&&(v=!1,c+=fe._addLine(u),u="",l=0),(u.length>0||!fe.isBreakingSpace(C)||v)&&(u+=C,l+=P)}return c+=fe._addLine(u,!1),c}static _addLine(e,t=!0){return e=fe._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,o){let l=s[e];return typeof l!="number"&&(l=fe._measureText(e,t,o)+t,s[e]=l),l}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!fe.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:fe._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:fe._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1];if(fe.isBreakingSpace(l,u)||fe._isNewline(l)){s!==""&&(t.push(s),s=""),l==="\r"&&u===`
`?(t.push(`\r
`),o++):t.push(l);continue}s+=l}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,o,l){return!0}static wordWrapSplit(e){return fe.graphemeSegmenter(e)}static measureFont(e){if(fe._fonts[e])return fe._fonts[e];const t=fe._context;t.font=e;const s=t.measureText(fe.METRICS_STRING+fe.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return fe._fonts[e]=o,o}static clearMetrics(e=""){e?delete fe._fonts[e]:fe._fonts={}}static get _canvas(){if(!fe.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",kc);if(s!=null&&s.measureText)return fe.__canvas=t,t;e=Ke.get().createCanvas()}catch{e=Ke.get().createCanvas()}e.width=e.height=10,fe.__canvas=e}return fe.__canvas}static get _context(){return fe.__context||(fe.__context=fe._canvas.getContext("2d",kc)),fe.__context}};jn.METRICS_STRING="|q";jn.BASELINE_SYMBOL="M";jn.BASELINE_MULTIPLIER=1.4;jn.HEIGHT_MULTIPLIER=2;jn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>{const t=r.segment(e),s=[];let o=0;for(const l of t)s[o++]=l.segment;return s}}return r=>[...r]})();jn.experimentalLetterSpacing=!1;jn._fonts={};jn._newlines=[10,13];jn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];jn._measurementCache=vp(1e3);let qn=jn;const w1=[{offset:0,color:"white"},{offset:1,color:"black"}],uh=class qc{constructor(...e){this.uid=mt("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=I5(e);t={...t.type==="radial"?qc.defaultRadialOptions:qc.defaultLinearOptions,...b0(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:wt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:o}=this.end,l=s-e,u=o-t;const c=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const w=e;e=s,s=w,l*=-1}if(u<0){const w=t;t=o,o=w,u*=-1}}const d=this.colorStops.length?this.colorStops:w1,f=this._textureSize,{canvas:m,context:y}=b1(f,1),x=c?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);S1(x,d),y.fillStyle=x,y.fillRect(0,0,f,1),this.texture=new ze({source:new di({resource:m,addressMode:this._wrapMode})});const v=Math.sqrt(l*l+u*u),S=Math.atan2(u,l),b=new Le;b.scale(v/f,1),b.rotate(S),b.translate(e,t),this.textureSpace==="local"&&b.scale(f,f),this.transform=b}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:w1,t=this._textureSize,{canvas:s,context:o}=b1(t,t),{x:l,y:u}=this.center,{x:c,y:d}=this.outerCenter,f=this.innerRadius,m=this.outerRadius,y=c-m,x=d-m,v=t/(m*2),S=(l-y)*v,b=(u-x)*v,w=o.createRadialGradient(S,b,f*v,(c-y)*v,(d-x)*v,m*v);S1(w,e),o.fillStyle=e[e.length-1].color,o.fillRect(0,0,t,t),o.fillStyle=w,o.translate(S,b),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-S,-b),o.fillRect(0,0,t,t),this.texture=new ze({source:new di({resource:s,addressMode:this._wrapMode})});const C=new Le;C.scale(1/v,1/v),C.translate(y,x),this.textureSpace==="local"&&C.scale(t,t),this.transform=C}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};uh.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};uh.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let cr=uh;function S1(r,e){for(let t=0;t<e.length;t++){const s=e[t];r.addColorStop(s.offset,s.color)}}function b1(r,e){const t=Ke.get().createCanvas(r,e),s=t.getContext("2d");return{canvas:t,context:s}}function I5(r){let e=r[0]??{};return(typeof e=="number"||r[1])&&(Re("8.5.2","use options object instead"),e={type:"linear",start:{x:r[0],y:r[1]},end:{x:r[2],y:r[3]},textureSpace:r[4],textureSize:r[5]??cr.defaultLinearOptions.textureSize}),e}const k1={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class pl{constructor(e,t){this.uid=mt("fillPattern"),this._tick=0,this.transform=new Le,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=k1[t].addressModeU,e.source.style.addressModeV=k1[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var Cc,C1;function L5(){if(C1)return Cc;C1=1,Cc=t;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(l){var u=[];return l.replace(e,function(c,d,f){var m=d.toLowerCase();for(f=o(f),m=="m"&&f.length>2&&(u.push([d].concat(f.splice(0,2))),m="l",d=d=="m"?"l":"L");;){if(f.length==r[m])return f.unshift(d),u.push(f);if(f.length<r[m])throw new Error("malformed path data");u.push([d].concat(f.splice(0,r[m])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return Cc}var F5=L5();const z5=th(F5);function B5(r,e){const t=z5(r),s=[];let o=null,l=0,u=0;for(let c=0;c<t.length;c++){const d=t[c],f=d[0],m=d;switch(f){case"M":l=m[1],u=m[2],e.moveTo(l,u);break;case"m":l+=m[1],u+=m[2],e.moveTo(l,u);break;case"H":l=m[1],e.lineTo(l,u);break;case"h":l+=m[1],e.lineTo(l,u);break;case"V":u=m[1],e.lineTo(l,u);break;case"v":u+=m[1],e.lineTo(l,u);break;case"L":l=m[1],u=m[2],e.lineTo(l,u);break;case"l":l+=m[1],u+=m[2],e.lineTo(l,u);break;case"C":l=m[5],u=m[6],e.bezierCurveTo(m[1],m[2],m[3],m[4],l,u);break;case"c":e.bezierCurveTo(l+m[1],u+m[2],l+m[3],u+m[4],l+m[5],u+m[6]),l+=m[5],u+=m[6];break;case"S":l=m[3],u=m[4],e.bezierCurveToShort(m[1],m[2],l,u);break;case"s":e.bezierCurveToShort(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"Q":l=m[3],u=m[4],e.quadraticCurveTo(m[1],m[2],l,u);break;case"q":e.quadraticCurveTo(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"T":l=m[1],u=m[2],e.quadraticCurveToShort(l,u);break;case"t":l+=m[1],u+=m[2],e.quadraticCurveToShort(l,u);break;case"A":l=m[6],u=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"a":l+=m[6],u+=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:nt(`Unknown SVG path command: ${f}`)}f!=="Z"&&f!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return e}class ch{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new ch(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-e,l=this.y-t;return o*=o,l*=l,o+l<=s}strokeContains(e,t,s,o=.5){if(this.radius===0)return!1;const l=this.x-e,u=this.y-t,c=this.radius,d=(1-o)*s,f=Math.sqrt(l*l+u*u);return f<=c+d&&f>c-(s-d)}getBounds(e){return e||(e=new it),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class hh{constructor(e=0,t=0,s=0,o=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=o}clone(){return new hh(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,o=(t-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(e,t,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const c=s*(1-o),d=s-c,f=l-d,m=u-d,y=l+c,x=u+c,v=e-this.x,S=t-this.y,b=v*v/(f*f)+S*S/(m*m),w=v*v/(y*y)+S*S/(x*x);return b>1&&w<=1}getBounds(e){return e||(e=new it),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function j5(r,e,t,s,o,l){const u=r-t,c=e-s,d=o-t,f=l-s,m=u*d+c*f,y=d*d+f*f;let x=-1;y!==0&&(x=m/y);let v,S;x<0?(v=t,S=s):x>1?(v=o,S=l):(v=t+x*d,S=s+x*f);const b=r-v,w=e-S;return b*b+w*w}let D5,$5;class fo{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let o=0,l=t.length;o<l;o++)s.push(t[o].x,t[o].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let o=0;o<s;o+=2){const l=t[o],u=t[o+1],c=t[(o+2)%s],d=t[(o+3)%s];e+=(c-l)*(d+u)}return e<0}containsPolygon(e){const t=this.getBounds(D5),s=e.getBounds($5);if(!t.containsRect(s))return!1;const o=e.points;for(let l=0;l<o.length;l+=2){const u=o[l],c=o[l+1];if(!this.contains(u,c))return!1}return!0}clone(){const e=this.points.slice(),t=new fo(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const c=this.points[l*2],d=this.points[l*2+1],f=this.points[u*2],m=this.points[u*2+1];d>t!=m>t&&e<(f-c)*((t-d)/(m-d))+c&&(s=!s)}return s}strokeContains(e,t,s,o=.5){const l=s*s,u=l*(1-o),c=l-u,{points:d}=this,f=d.length-(this.closePath?0:2);for(let m=0;m<f;m+=2){const y=d[m],x=d[m+1],v=d[(m+2)%d.length],S=d[(m+3)%d.length],b=j5(e,t,y,x,v,S),w=Math.sign((v-y)*(t-x)-(S-x)*(e-y));if(b<=(w<0?c:u))return!0}return!1}getBounds(e){e||(e=new it);const t=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let c=0,d=t.length;c<d;c+=2){const f=t[c],m=t[c+1];s=f<s?f:s,o=f>o?f:o,l=m<l?m:l,u=m>u?m:u}return e.x=s,e.width=o-s,e.y=l,e.height=u-l,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Re("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Re("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Za=(r,e,t,s,o,l,u)=>{const c=r-t,d=e-s,f=Math.sqrt(c*c+d*d);return f>=o-l&&f<=o+u};class dh{constructor(e=0,t=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=o,this.radius=l}getBounds(e){return e||(e=new it),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new dh(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let o=e-(this.x+s),l=t-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=e-(this.x+this.width-s),o*o+l*l<=u)||(l=t-(this.y+this.height-s),o*o+l*l<=u)||(o=e-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(e,t,s,o=.5){const{x:l,y:u,width:c,height:d,radius:f}=this,m=s*(1-o),y=s-m,x=l+f,v=u+f,S=c-f*2,b=d-f*2,w=l+c,C=u+d;return(e>=l-m&&e<=l+y||e>=w-y&&e<=w+m)&&t>=v&&t<=v+b||(t>=u-m&&t<=u+y||t>=C-y&&t<=C+m)&&e>=x&&e<=x+S?!0:e<x&&t<v&&Za(e,t,x,v,f,y,m)||e>w-f&&t<v&&Za(e,t,w-f,v,f,y,m)||e>w-f&&t>C-f&&Za(e,t,w-f,C-f,f,y,m)||e<x&&t>C-f&&Za(e,t,x,C-f,f,y,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const _p={};function O5(r,e,t){let s=2166136261;for(let o=0;o<e;o++)s^=r[o].uid,s=Math.imul(s,16777619),s>>>=0;return _p[s]||N5(r,e,s,t)}function N5(r,e,t,s){const o={};let l=0;for(let c=0;c<s;c++){const d=c<e?r[c]:ze.EMPTY.source;o[l++]=d.source,o[l++]=d.style}const u=new il(o);return _p[t]=u,u}class A1{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function P1(r,e){const t=r.byteLength/8|0,s=new Float64Array(r,0,t);new Float64Array(e,0,t).set(s);const l=r.byteLength-t*8;if(l>0){const u=new Uint8Array(r,t*8,l);new Uint8Array(e,t*8,l).set(u)}}const W5={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var U5=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))(U5||{});function T1(r,e){return e.alphaMode==="no-premultiply-alpha"&&W5[r]||r}const G5=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function H5(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function V5(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=G5.replace(/%forloop%/gi,H5(r));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}}finally{e.deleteShader(t)}return r}let qi=null;function Y5(){var e;if(qi)return qi;const r=J0();return qi=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),qi=V5(qi,r),(e=r.getExtension("WEBGL_lose_context"))==null||e.loseContext(),qi}class X5{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class q5{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new X5,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const po=[];let ul=0;ko.register({clear:()=>{if(po.length>0)for(const r of po)r&&r.destroy();po.length=0,ul=0}});function E1(){return ul>0?po[--ul]:new q5}function M1(r){po[ul++]=r}let no=0;const wp=class Sp{constructor(e){this.uid=mt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...Sp.defaultOptions,...e},e.maxTextures||(Re("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=Y5());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new A1(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)M1(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=E1(),o=s.textures;o.clear();const l=t[this.elementStart];let u=T1(l.blendMode,l.texture._source),c=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,f=this.attributeBuffer.uint32View,m=this.indexBuffer;let y=this._batchIndexSize,x=this._batchIndexStart,v="startBatch";const S=this.maxTextures;for(let b=this.elementStart;b<this.elementSize;++b){const w=t[b];t[b]=null;const P=w.texture._source,E=T1(w.blendMode,P),I=u!==E||c!==w.topology;if(P._batchTick===no&&!I){w._textureId=P._textureBindLocation,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,f,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,f,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}P._batchTick=no,(o.count>=S||I)&&(this._finishBatch(s,x,y-x,o,u,c,e,v),v="renderBatch",x=y,u=E,c=w.topology,s=E1(),o=s.textures,o.clear(),++no),w._textureId=P._textureBindLocation=o.count,o.ids[P.uid]=o.count,o.textures[o.count++]=P,w._batch=s,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,f,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,f,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,x,y-x,o,u,c,e,v),x=y,++no),this.elementStart=this.elementSize,this._batchIndexStart=x,this._batchIndexSize=y}_finishBatch(e,t,s,o,l,u,c,d){e.gpuBindGroup=null,e.bindGroup=null,e.action=d,e.batcher=this,e.textures=o,e.blendMode=l,e.topology=u,e.start=t,e.size=s,++no,this.batches[this.batchIndex++]=e,c.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new A1(t);P1(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let l=0;l<t.length;l++)o[l]=t[l];else P1(t.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,o){const l=e.indices,u=e.indexSize,c=e.indexOffset,d=e.attributeOffset;for(let f=0;f<u;f++)t[s++]=o+l[f+c]-d}destroy(e={}){var t;if(this.batches!==null){for(let s=0;s<this.batches.length;s++)M1(this.batches[s]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((t=this.shader)==null||t.destroy(),this.shader=null);for(let s=0;s<this._elements.length;s++)this._elements[s]&&(this._elements[s]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};wp.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let K5=wp;var Jt=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(Jt||{});class _o extends zn{constructor(e){let{data:t,size:s}=e;const{usage:o,label:l,shrinkToFit:u}=e;super(),this.uid=mt("buffer"),this._resourceType="buffer",this._resourceId=mt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t==null?void 0:t.byteLength);const c=!!t;this.descriptor={size:s,usage:o,mappedAtCreation:c,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Jt.STATIC)}set static(e){e?this.descriptor.usage|=Jt.STATIC:this.descriptor.usage&=~Jt.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const o=this._data;if(this._data=e,this._dataInt32=null,!o||o.length!==e.length){!this.shrinkToFit&&o&&e.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=mt("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function bp(r,e){if(!(r instanceof _o)){let t=e?Jt.INDEX:Jt.VERTEX;r instanceof Array&&(e?(r=new Uint32Array(r),t=Jt.INDEX|Jt.COPY_DST):(r=new Float32Array(r),t=Jt.VERTEX|Jt.COPY_DST)),r=new _o({data:r,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return r}function Q5(r,e,t){const s=r.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const o=s.buffer.data;let l=1/0,u=1/0,c=-1/0,d=-1/0;const f=o.BYTES_PER_ELEMENT,m=(s.offset||0)/f,y=(s.stride||8)/f;for(let x=m;x<o.length;x+=y){const v=o[x],S=o[x+1];v>c&&(c=v),S>d&&(d=S),v<l&&(l=v),S<u&&(u=S)}return t.minX=l,t.minY=u,t.maxX=c,t.maxY=d,t}function Z5(r){return(r instanceof _o||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=bp(r.buffer,!1),r}class J5 extends zn{constructor(e={}){super(),this.uid=mt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Fn,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:o}=e;if(this.buffers=[],this.attributes={},t)for(const l in t)this.addAttribute(l,t[l]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=Z5(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=bp(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,Q5(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(s=>s.destroy()),(t=this.indexBuffer)==null||t.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const ex=new Float32Array(1),tx=new Uint32Array(1);class nx extends J5{constructor(){const t=new _o({data:ex,label:"attribute-batch-buffer",usage:Jt.VERTEX|Jt.COPY_DST,shrinkToFit:!1}),s=new _o({data:tx,label:"index-batch-buffer",usage:Jt.INDEX|Jt.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:o,offset:0},aUV:{buffer:t,format:"float32x2",stride:o,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function R1(r,e,t){if(r)for(const s in r){const o=s.toLocaleLowerCase(),l=e[o];if(l){let u=r[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&l.push(`//----${t}----//`),l.push(u)}else nt(`${s} placement hook does not exist in shader`)}}const rx=/\{\{(.*?)\}\}/g;function I1(r){var s;const e={};return(((s=r.match(rx))==null?void 0:s.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{e[o]=[]}),e}function L1(r,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(r))!==null;)e.push(t[1])}function F1(r,e,t=!1){const s=[];L1(e,s),r.forEach(c=>{c.header&&L1(c.header,s)});const o=s;t&&o.sort();const l=o.map((c,d)=>`       @location(${d}) ${c},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function z1(r,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(r))!==null;)e.push(t[1])}function ix(r){const t=/\b(\w+)\s*:/g.exec(r);return t?t[1]:""}function sx(r){const e=/@.*?\s+/g;return r.replace(e,"")}function ox(r,e){const t=[];z1(e,t),r.forEach(d=>{d.header&&z1(d.header,t)});let s=0;const o=t.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),l=t.sort().map(d=>`       var ${sx(d)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(d=>` ${ix(d)}`).join(`,
`)});`;let c=e.replace(/@out\s+[^;]+;\s*/g,"");return c=c.replace("{{struct}}",`
${o}
`),c=c.replace("{{start}}",`
${l}
`),c=c.replace("{{return}}",`
${u}
`),c}function B1(r,e){let t=r;for(const s in e){const o=e[s];o.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const Fr=Object.create(null),Ac=new Map;let ax=0;function lx({template:r,bits:e}){const t=kp(r,e);if(Fr[t])return Fr[t];const{vertex:s,fragment:o}=cx(r,e);return Fr[t]=Cp(s,o,e),Fr[t]}function ux({template:r,bits:e}){const t=kp(r,e);return Fr[t]||(Fr[t]=Cp(r.vertex,r.fragment,e)),Fr[t]}function cx(r,e){const t=e.map(u=>u.vertex).filter(u=>!!u),s=e.map(u=>u.fragment).filter(u=>!!u);let o=F1(t,r.vertex,!0);o=ox(t,o);const l=F1(s,r.fragment,!0);return{vertex:o,fragment:l}}function kp(r,e){return e.map(t=>(Ac.has(t)||Ac.set(t,ax++),Ac.get(t))).sort((t,s)=>t-s).join("-")+r.vertex+r.fragment}function Cp(r,e,t){const s=I1(r),o=I1(e);return t.forEach(l=>{R1(l.vertex,s,l.name),R1(l.fragment,o,l.name)}),{vertex:B1(r,s),fragment:B1(e,o)}}const hx=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,dx=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,fx=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,px=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,mx={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},gx={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function yx({bits:r,name:e}){const t=lx({template:{fragment:dx,vertex:hx},bits:[mx,...r]});return fl.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function xx({bits:r,name:e}){return new tp({name:e,...ux({template:{vertex:fx,fragment:px},bits:[gx,...r]})})}const vx={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},_x={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Pc={};function wx(r){const e=[];if(r===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<r;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function Sx(r){const e=[];if(r===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<r;t++)t===r-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function bx(r){return Pc[r]||(Pc[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${wx(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${Sx(r)}
            `}}),Pc[r]}const Tc={};function kx(r){const e=[];for(let t=0;t<r;t++)t>0&&e.push("else"),t<r-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function Cx(r){return Tc[r]||(Tc[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${kx(r)}
            `}}),Tc[r]}const Ax={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Px={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},j1={};function Tx(r){let e=j1[r];if(e)return e;const t=new Int32Array(r);for(let s=0;s<r;s++)t[s]=s;return e=j1[r]=new sp({uTextures:{value:t,type:"i32",size:r}},{isStatic:!0}),e}class D1 extends lh{constructor(e){const t=xx({name:"batch",bits:[_x,Cx(e),Px]}),s=yx({name:"batch",bits:[vx,bx(e),Ax]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:Tx(e)}}),this.maxTextures=e}}let ro=null;const Ap=class Pp extends K5{constructor(e){super(e),this.geometry=new nx,this.name=Pp.extension.name,this.vertexSize=6,ro??(ro=new D1(e.maxTextures)),this.shader=ro}packAttributes(e,t,s,o,l){const u=l<<16|e.roundPixels&65535,c=e.transform,d=c.a,f=c.b,m=c.c,y=c.d,x=c.tx,v=c.ty,{positions:S,uvs:b}=e,w=e.color,C=e.attributeOffset,P=C+e.attributeSize;for(let E=C;E<P;E++){const I=E*2,U=S[I],O=S[I+1];t[o++]=d*U+m*O+x,t[o++]=y*O+f*U+v,t[o++]=b[I],t[o++]=b[I+1],s[o++]=w,s[o++]=u}}packQuadAttributes(e,t,s,o,l){const u=e.texture,c=e.transform,d=c.a,f=c.b,m=c.c,y=c.d,x=c.tx,v=c.ty,S=e.bounds,b=S.maxX,w=S.minX,C=S.maxY,P=S.minY,E=u.uvs,I=e.color,U=l<<16|e.roundPixels&65535;t[o+0]=d*w+m*P+x,t[o+1]=y*P+f*w+v,t[o+2]=E.x0,t[o+3]=E.y0,s[o+4]=I,s[o+5]=U,t[o+6]=d*b+m*P+x,t[o+7]=y*P+f*b+v,t[o+8]=E.x1,t[o+9]=E.y1,s[o+10]=I,s[o+11]=U,t[o+12]=d*b+m*C+x,t[o+13]=y*C+f*b+v,t[o+14]=E.x2,t[o+15]=E.y2,s[o+16]=I,s[o+17]=U,t[o+18]=d*w+m*C+x,t[o+19]=y*C+f*w+v,t[o+20]=E.x3,t[o+21]=E.y3,s[o+22]=I,s[o+23]=U}_updateMaxTextures(e){this.shader.maxTextures!==e&&(ro=new D1(e),this.shader=ro)}destroy(){this.shader=null,super.destroy()}};Ap.extension={type:[ge.Batcher],name:"default"};let Ex=Ap;function Mx(r,e,t,s,o,l,u,c=null){let d=0;t*=e,o*=l;const f=c.a,m=c.b,y=c.c,x=c.d,v=c.tx,S=c.ty;for(;d<u;){const b=r[t],w=r[t+1];s[o]=f*b+y*w+v,s[o+1]=m*b+x*w+S,o+=l,t+=e,d++}}function Rx(r,e,t,s){let o=0;for(e*=t;o<s;)r[e]=0,r[e+1]=0,e+=t,o++}function Tp(r,e,t,s,o){const l=e.a,u=e.b,c=e.c,d=e.d,f=e.tx,m=e.ty;t||(t=0),s||(s=2),o||(o=r.length/s-t);let y=t*s;for(let x=0;x<o;x++){const v=r[y],S=r[y+1];r[y]=l*v+c*S+f,r[y+1]=u*v+d*S+m,y+=s}}const Ix=new Le;class Ep{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?L0(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||Ix}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const wo={extension:{type:ge.ShapeBuilder,name:"circle"},build(r,e){let t,s,o,l,u,c;if(r.type==="circle"){const I=r;if(u=c=I.radius,u<=0)return!1;t=I.x,s=I.y,o=l=0}else if(r.type==="ellipse"){const I=r;if(u=I.halfWidth,c=I.halfHeight,u<=0||c<=0)return!1;t=I.x,s=I.y,o=l=0}else{const I=r,U=I.width/2,O=I.height/2;t=I.x+U,s=I.y+O,u=c=Math.max(0,Math.min(I.radius,Math.min(U,O))),o=U-u,l=O-c}if(o<0||l<0)return!1;const d=Math.ceil(2.3*Math.sqrt(u+c)),f=d*8+(o?4:0)+(l?4:0);if(f===0)return!1;if(d===0)return e[0]=e[6]=t+o,e[1]=e[3]=s+l,e[2]=e[4]=t-o,e[5]=e[7]=s-l,!0;let m=0,y=d*4+(o?2:0)+2,x=y,v=f,S=o+u,b=l,w=t+S,C=t-S,P=s+b;if(e[m++]=w,e[m++]=P,e[--y]=P,e[--y]=C,l){const I=s-b;e[x++]=C,e[x++]=I,e[--v]=I,e[--v]=w}for(let I=1;I<d;I++){const U=Math.PI/2*(I/d),O=o+Math.cos(U)*u,D=l+Math.sin(U)*c,Y=t+O,Q=t-O,q=s+D,Z=s-D;e[m++]=Y,e[m++]=q,e[--y]=q,e[--y]=Q,e[x++]=Q,e[x++]=Z,e[--v]=Z,e[--v]=Y}S=o,b=l+c,w=t+S,C=t-S,P=s+b;const E=s-b;return e[m++]=w,e[m++]=P,e[--v]=E,e[--v]=w,o&&(e[m++]=C,e[m++]=P,e[--v]=E,e[--v]=C),!0},triangulate(r,e,t,s,o,l){if(r.length===0)return;let u=0,c=0;for(let m=0;m<r.length;m+=2)u+=r[m],c+=r[m+1];u/=r.length/2,c/=r.length/2;let d=s;e[d*t]=u,e[d*t+1]=c;const f=d++;for(let m=0;m<r.length;m+=2)e[d*t]=r[m],e[d*t+1]=r[m+1],m>0&&(o[l++]=d,o[l++]=f,o[l++]=d-1),d++;o[l++]=f+1,o[l++]=f,o[l++]=d-1}},Lx={...wo,extension:{...wo.extension,name:"ellipse"}},Fx={...wo,extension:{...wo.extension,name:"roundedRectangle"}},Mp=1e-4,$1=1e-4;function zx(r){const e=r.length;if(e<6)return 1;let t=0;for(let s=0,o=r[e-2],l=r[e-1];s<e;s+=2){const u=r[s],c=r[s+1];t+=(u-o)*(c+l),o=u,l=c}return t<0?-1:1}function O1(r,e,t,s,o,l,u,c){const d=r-t*o,f=e-s*o,m=r+t*l,y=e+s*l;let x,v;u?(x=s,v=-t):(x=-s,v=t);const S=d+x,b=f+v,w=m+x,C=y+v;return c.push(S,b),c.push(w,C),2}function si(r,e,t,s,o,l,u,c){const d=t-r,f=s-e;let m=Math.atan2(d,f),y=Math.atan2(o-r,l-e);c&&m<y?m+=Math.PI*2:!c&&m>y&&(y+=Math.PI*2);let x=m;const v=y-m,S=Math.abs(v),b=Math.sqrt(d*d+f*f),w=(15*S*Math.sqrt(b)/Math.PI>>0)+1,C=v/w;if(x+=C,c){u.push(r,e),u.push(t,s);for(let P=1,E=x;P<w;P++,E+=C)u.push(r,e),u.push(r+Math.sin(E)*b,e+Math.cos(E)*b);u.push(r,e),u.push(o,l)}else{u.push(t,s),u.push(r,e);for(let P=1,E=x;P<w;P++,E+=C)u.push(r+Math.sin(E)*b,e+Math.cos(E)*b),u.push(r,e);u.push(o,l),u.push(r,e)}return w*2}function Bx(r,e,t,s,o,l){const u=Mp;if(r.length===0)return;const c=e;let d=c.alignment;if(e.alignment!==.5){let X=zx(r);d=(d-.5)*X+.5}const f=new Ot(r[0],r[1]),m=new Ot(r[r.length-2],r[r.length-1]),y=s,x=Math.abs(f.x-m.x)<u&&Math.abs(f.y-m.y)<u;if(y){r=r.slice(),x&&(r.pop(),r.pop(),m.set(r[r.length-2],r[r.length-1]));const X=(f.x+m.x)*.5,ne=(m.y+f.y)*.5;r.unshift(X,ne),r.push(X,ne)}const v=o,S=r.length/2;let b=r.length;const w=v.length/2,C=c.width/2,P=C*C,E=c.miterLimit*c.miterLimit;let I=r[0],U=r[1],O=r[2],D=r[3],Y=0,Q=0,q=-(U-D),Z=I-O,pe=0,ce=0,Se=Math.sqrt(q*q+Z*Z);q/=Se,Z/=Se,q*=C,Z*=C;const Qe=d,J=(1-Qe)*2,te=Qe*2;y||(c.cap==="round"?b+=si(I-q*(J-te)*.5,U-Z*(J-te)*.5,I-q*J,U-Z*J,I+q*te,U+Z*te,v,!0)+2:c.cap==="square"&&(b+=O1(I,U,q,Z,J,te,!0,v))),v.push(I-q*J,U-Z*J),v.push(I+q*te,U+Z*te);for(let X=1;X<S-1;++X){I=r[(X-1)*2],U=r[(X-1)*2+1],O=r[X*2],D=r[X*2+1],Y=r[(X+1)*2],Q=r[(X+1)*2+1],q=-(U-D),Z=I-O,Se=Math.sqrt(q*q+Z*Z),q/=Se,Z/=Se,q*=C,Z*=C,pe=-(D-Q),ce=O-Y,Se=Math.sqrt(pe*pe+ce*ce),pe/=Se,ce/=Se,pe*=C,ce*=C;const ne=O-I,L=U-D,W=O-Y,ve=Q-D,we=ne*W+L*ve,be=L*W-ve*ne,Ae=be<0;if(Math.abs(be)<.001*Math.abs(we)){v.push(O-q*J,D-Z*J),v.push(O+q*te,D+Z*te),we>=0&&(c.join==="round"?b+=si(O,D,O-q*J,D-Z*J,O-pe*J,D-ce*J,v,!1)+4:b+=2,v.push(O-pe*te,D-ce*te),v.push(O+pe*J,D+ce*J));continue}const $e=(-q+I)*(-Z+D)-(-q+O)*(-Z+U),Fe=(-pe+Y)*(-ce+D)-(-pe+O)*(-ce+Q),Oe=(ne*Fe-W*$e)/be,st=(ve*$e-L*Fe)/be,Dn=(Oe-O)*(Oe-O)+(st-D)*(st-D),cn=O+(Oe-O)*J,Nt=D+(st-D)*J,Ht=O-(Oe-O)*te,hn=D-(st-D)*te,Br=Math.min(ne*ne+L*L,W*W+ve*ve),hr=Ae?J:te,en=Br+hr*hr*P;Dn<=en?c.join==="bevel"||Dn/P>E?(Ae?(v.push(cn,Nt),v.push(O+q*te,D+Z*te),v.push(cn,Nt),v.push(O+pe*te,D+ce*te)):(v.push(O-q*J,D-Z*J),v.push(Ht,hn),v.push(O-pe*J,D-ce*J),v.push(Ht,hn)),b+=2):c.join==="round"?Ae?(v.push(cn,Nt),v.push(O+q*te,D+Z*te),b+=si(O,D,O+q*te,D+Z*te,O+pe*te,D+ce*te,v,!0)+4,v.push(cn,Nt),v.push(O+pe*te,D+ce*te)):(v.push(O-q*J,D-Z*J),v.push(Ht,hn),b+=si(O,D,O-q*J,D-Z*J,O-pe*J,D-ce*J,v,!1)+4,v.push(O-pe*J,D-ce*J),v.push(Ht,hn)):(v.push(cn,Nt),v.push(Ht,hn)):(v.push(O-q*J,D-Z*J),v.push(O+q*te,D+Z*te),c.join==="round"?Ae?b+=si(O,D,O+q*te,D+Z*te,O+pe*te,D+ce*te,v,!0)+2:b+=si(O,D,O-q*J,D-Z*J,O-pe*J,D-ce*J,v,!1)+2:c.join==="miter"&&Dn/P<=E&&(Ae?(v.push(Ht,hn),v.push(Ht,hn)):(v.push(cn,Nt),v.push(cn,Nt)),b+=2),v.push(O-pe*J,D-ce*J),v.push(O+pe*te,D+ce*te),b+=2)}I=r[(S-2)*2],U=r[(S-2)*2+1],O=r[(S-1)*2],D=r[(S-1)*2+1],q=-(U-D),Z=I-O,Se=Math.sqrt(q*q+Z*Z),q/=Se,Z/=Se,q*=C,Z*=C,v.push(O-q*J,D-Z*J),v.push(O+q*te,D+Z*te),y||(c.cap==="round"?b+=si(O-q*(J-te)*.5,D-Z*(J-te)*.5,O-q*J,D-Z*J,O+q*te,D+Z*te,v,!1)+2:c.cap==="square"&&(b+=O1(O,D,q,Z,J,te,!1,v)));const ee=$1*$1;for(let X=w;X<b+w-2;++X)I=v[X*2],U=v[X*2+1],O=v[(X+1)*2],D=v[(X+1)*2+1],Y=v[(X+2)*2],Q=v[(X+2)*2+1],!(Math.abs(I*(D-Q)+O*(Q-U)+Y*(U-D))<ee)&&l.push(X,X+1,X+2)}function jx(r,e,t,s){const o=Mp;if(r.length===0)return;const l=r[0],u=r[1],c=r[r.length-2],d=r[r.length-1],f=e||Math.abs(l-c)<o&&Math.abs(u-d)<o,m=t,y=r.length/2,x=m.length/2;for(let v=0;v<y;v++)m.push(r[v*2]),m.push(r[v*2+1]);for(let v=0;v<y-1;v++)s.push(x+v,x+v+1);f&&s.push(x+y-1,x)}function Rp(r,e,t,s,o,l,u){const c=b5(r,e,2);if(!c)return;for(let f=0;f<c.length;f+=3)l[u++]=c[f]+o,l[u++]=c[f+1]+o,l[u++]=c[f+2]+o;let d=o*s;for(let f=0;f<r.length;f+=2)t[d]=r[f],t[d+1]=r[f+1],d+=s}const Dx=[],$x={extension:{type:ge.ShapeBuilder,name:"polygon"},build(r,e){for(let t=0;t<r.points.length;t++)e[t]=r.points[t];return!0},triangulate(r,e,t,s,o,l){Rp(r,Dx,e,t,s,o,l)}},Ox={extension:{type:ge.ShapeBuilder,name:"rectangle"},build(r,e){const t=r,s=t.x,o=t.y,l=t.width,u=t.height;return l>0&&u>0?(e[0]=s,e[1]=o,e[2]=s+l,e[3]=o,e[4]=s+l,e[5]=o+u,e[6]=s,e[7]=o+u,!0):!1},triangulate(r,e,t,s,o,l){let u=0;s*=t,e[s+u]=r[0],e[s+u+1]=r[1],u+=t,e[s+u]=r[2],e[s+u+1]=r[3],u+=t,e[s+u]=r[6],e[s+u+1]=r[7],u+=t,e[s+u]=r[4],e[s+u+1]=r[5],u+=t;const c=s/t;o[l++]=c,o[l++]=c+1,o[l++]=c+2,o[l++]=c+1,o[l++]=c+3,o[l++]=c+2}},Nx={extension:{type:ge.ShapeBuilder,name:"triangle"},build(r,e){return e[0]=r.x,e[1]=r.y,e[2]=r.x2,e[3]=r.y2,e[4]=r.x3,e[5]=r.y3,!0},triangulate(r,e,t,s,o,l){let u=0;s*=t,e[s+u]=r[0],e[s+u+1]=r[1],u+=t,e[s+u]=r[2],e[s+u+1]=r[3],u+=t,e[s+u]=r[4],e[s+u+1]=r[5];const c=s/t;o[l++]=c,o[l++]=c+1,o[l++]=c+2}},Wx=new Le,Ux=new it;function Gx(r,e,t,s){const o=e.matrix?r.copyFrom(e.matrix).invert():r.identity();if(e.textureSpace==="local"){const u=t.getBounds(Ux);e.width&&u.pad(e.width);const{x:c,y:d}=u,f=1/u.width,m=1/u.height,y=-c*f,x=-d*m,v=o.a,S=o.b,b=o.c,w=o.d;o.a*=f,o.b*=f,o.c*=m,o.d*=m,o.tx=y*v+x*b+o.tx,o.ty=y*S+x*w+o.ty}else o.translate(e.texture.frame.x,e.texture.frame.y),o.scale(1/e.texture.source.width,1/e.texture.source.height);const l=e.texture.source.style;return!(e.fill instanceof cr)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(Wx.copyFrom(s).invert()),o}const ml={};Lt.handleByMap(ge.ShapeBuilder,ml);Lt.add(Ox,$x,Nx,wo,Lx,Fx);const Hx=new it,Vx=new Le;function Yx(r,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let o=0;o<r.instructions.length;o++){const l=r.instructions[o];if(l.action==="texture")Xx(l.data,s,t);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",c=l.data.path.shapePath,d=l.data.style,f=l.data.hole;u&&f&&N1(f.shapePath,d,!0,s,t),f&&(c.shapePrimitives[c.shapePrimitives.length-1].holes=f.shapePath.shapePrimitives),N1(c,d,u,s,t)}}}function Xx(r,e,t){const s=[],o=ml.rectangle,l=Hx;l.x=r.dx,l.y=r.dy,l.width=r.dw,l.height=r.dh;const u=r.transform;if(!o.build(l,s))return;const{vertices:c,uvs:d,indices:f}=t,m=f.length,y=c.length/2;u&&Tp(s,u),o.triangulate(s,c,2,y,f,m);const x=r.image,v=x.uvs;d.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const S=bn.get(Ep);S.indexOffset=m,S.indexSize=f.length-m,S.attributeOffset=y,S.attributeSize=c.length/2-y,S.baseColor=r.style,S.alpha=r.alpha,S.texture=x,S.geometryData=t,e.push(S)}function N1(r,e,t,s,o){const{vertices:l,uvs:u,indices:c}=o;r.shapePrimitives.forEach(({shape:d,transform:f,holes:m})=>{const y=[],x=ml[d.type];if(!x.build(d,y))return;const v=c.length,S=l.length/2;let b="triangle-list";if(f&&Tp(y,f),t){const E=d.closePath??!0,I=e;I.pixelLine?(jx(y,E,l,c),b="line-list"):Bx(y,I,!1,E,l,c)}else if(m){const E=[],I=y.slice();qx(m).forEach(O=>{E.push(I.length/2),I.push(...O)}),Rp(I,E,l,2,S,c,v)}else x.triangulate(y,l,2,S,c,v);const w=u.length/2,C=e.texture;if(C!==ze.WHITE){const E=Gx(Vx,e,d,f);Mx(l,2,S,u,w,2,l.length/2-S,E)}else Rx(u,w,2,l.length/2-S);const P=bn.get(Ep);P.indexOffset=v,P.indexSize=c.length-v,P.attributeOffset=S,P.attributeSize=l.length/2-S,P.baseColor=e.color,P.alpha=e.alpha,P.texture=C,P.geometryData=o,P.topology=b,s.push(P)})}function qx(r){const e=[];for(let t=0;t<r.length;t++){const s=r[t].shape,o=[];ml[s.type].build(s,o)&&e.push(o)}return e}class Kx{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class Qx{constructor(){this.instructions=new j0}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new Ex({maxTextures:t}),this.instructions.reset()}get geometry(){return Re(Xy,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const fh=class Kc{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Kc.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??Kc.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),Yx(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=bn.get(Qx,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[e.uid],l=o.vertices.length,u=o.indices.length;for(let m=0;m<s.length;m++)s[m].applyTransform=!1;const c=t.batcher;c.ensureAttributeBuffer(l),c.ensureIndexBuffer(u),c.begin();for(let m=0;m<s.length;m++){const y=s[m];c.add(y)}c.finish(t.instructions);const d=c.geometry;d.indexBuffer.setDataWithSize(c.indexBuffer,c.indexSize,!0),d.buffers[0].setDataWithSize(c.attributeBuffer.float32View,c.attributeSize,!0);const f=c.batches;for(let m=0;m<f.length;m++){const y=f[m];y.bindGroup=O5(y.textures.textures,y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new Kx;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(bn.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{bn.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};fh.extension={type:[ge.WebGLSystem,ge.WebGPUSystem,ge.CanvasSystem],name:"graphicsContext"};fh.defaultOptions={bezierSmoothness:.5};let Ip=fh;const Zx=8,Ja=11920929e-14,Jx=1;function Lp(r,e,t,s,o,l,u,c,d,f){const y=Math.min(.99,Math.max(0,f??Ip.defaultOptions.bezierSmoothness));let x=(Jx-y)/1;return x*=x,e8(e,t,s,o,l,u,c,d,r,x),r}function e8(r,e,t,s,o,l,u,c,d,f){Qc(r,e,t,s,o,l,u,c,d,f,0),d.push(u,c)}function Qc(r,e,t,s,o,l,u,c,d,f,m){if(m>Zx)return;const y=(r+t)/2,x=(e+s)/2,v=(t+o)/2,S=(s+l)/2,b=(o+u)/2,w=(l+c)/2,C=(y+v)/2,P=(x+S)/2,E=(v+b)/2,I=(S+w)/2,U=(C+E)/2,O=(P+I)/2;if(m>0){let D=u-r,Y=c-e;const Q=Math.abs((t-u)*Y-(s-c)*D),q=Math.abs((o-u)*Y-(l-c)*D);if(Q>Ja&&q>Ja){if((Q+q)*(Q+q)<=f*(D*D+Y*Y)){d.push(U,O);return}}else if(Q>Ja){if(Q*Q<=f*(D*D+Y*Y)){d.push(U,O);return}}else if(q>Ja){if(q*q<=f*(D*D+Y*Y)){d.push(U,O);return}}else if(D=U-(r+u)/2,Y=O-(e+c)/2,D*D+Y*Y<=f){d.push(U,O);return}}Qc(r,e,y,x,C,P,U,O,d,f,m+1),Qc(U,O,E,I,b,w,u,c,d,f,m+1)}const t8=8,n8=11920929e-14,r8=1;function i8(r,e,t,s,o,l,u,c){const f=Math.min(.99,Math.max(0,c??Ip.defaultOptions.bezierSmoothness));let m=(r8-f)/1;return m*=m,s8(e,t,s,o,l,u,r,m),r}function s8(r,e,t,s,o,l,u,c){Zc(u,r,e,t,s,o,l,c,0),u.push(o,l)}function Zc(r,e,t,s,o,l,u,c,d){if(d>t8)return;const f=(e+s)/2,m=(t+o)/2,y=(s+l)/2,x=(o+u)/2,v=(f+y)/2,S=(m+x)/2;let b=l-e,w=u-t;const C=Math.abs((s-l)*w-(o-u)*b);if(C>n8){if(C*C<=c*(b*b+w*w)){r.push(v,S);return}}else if(b=v-(e+l)/2,w=S-(t+u)/2,b*b+w*w<=c){r.push(v,S);return}Zc(r,e,t,f,m,v,S,c,d+1),Zc(r,v,S,y,x,l,u,c,d+1)}function Fp(r,e,t,s,o,l,u,c){let d=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(d=2*Math.PI-d),c||(c=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),c=Math.max(c,3);let f=d/c,m=o;f*=u?-1:1;for(let y=0;y<c+1;y++){const x=Math.cos(m),v=Math.sin(m),S=e+x*s,b=t+v*s;r.push(S,b),m+=f}}function o8(r,e,t,s,o,l){const u=r[r.length-2],d=r[r.length-1]-t,f=u-e,m=o-t,y=s-e,x=Math.abs(d*y-f*m);if(x<1e-8||l===0){(r[r.length-2]!==e||r[r.length-1]!==t)&&r.push(e,t);return}const v=d*d+f*f,S=m*m+y*y,b=d*m+f*y,w=l*Math.sqrt(v)/x,C=l*Math.sqrt(S)/x,P=w*b/v,E=C*b/S,I=w*y+C*f,U=w*m+C*d,O=f*(C+P),D=d*(C+P),Y=y*(w+E),Q=m*(w+E),q=Math.atan2(D-U,O-I),Z=Math.atan2(Q-U,Y-I);Fp(r,I+e,U+t,l,q,Z,f*m>y*d)}const mo=Math.PI*2,Ec={centerX:0,centerY:0,ang1:0,ang2:0},Mc=({x:r,y:e},t,s,o,l,u,c,d)=>{r*=t,e*=s;const f=o*r-l*e,m=l*r+o*e;return d.x=f+u,d.y=m+c,d};function a8(r,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,o=Math.cos(r),l=Math.sin(r),u=Math.cos(r+e),c=Math.sin(r+e);return[{x:o-l*s,y:l+o*s},{x:u+c*s,y:c-u*s},{x:u,y:c}]}const W1=(r,e,t,s)=>{const o=r*s-e*t<0?-1:1;let l=r*t+e*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},l8=(r,e,t,s,o,l,u,c,d,f,m,y,x)=>{const v=Math.pow(o,2),S=Math.pow(l,2),b=Math.pow(m,2),w=Math.pow(y,2);let C=v*S-v*w-S*b;C<0&&(C=0),C/=v*w+S*b,C=Math.sqrt(C)*(u===c?-1:1);const P=C*o/l*y,E=C*-l/o*m,I=f*P-d*E+(r+t)/2,U=d*P+f*E+(e+s)/2,O=(m-P)/o,D=(y-E)/l,Y=(-m-P)/o,Q=(-y-E)/l,q=W1(1,0,O,D);let Z=W1(O,D,Y,Q);c===0&&Z>0&&(Z-=mo),c===1&&Z<0&&(Z+=mo),x.centerX=I,x.centerY=U,x.ang1=q,x.ang2=Z};function u8(r,e,t,s,o,l,u,c=0,d=0,f=0){if(l===0||u===0)return;const m=Math.sin(c*mo/360),y=Math.cos(c*mo/360),x=y*(e-s)/2+m*(t-o)/2,v=-m*(e-s)/2+y*(t-o)/2;if(x===0&&v===0)return;l=Math.abs(l),u=Math.abs(u);const S=Math.pow(x,2)/Math.pow(l,2)+Math.pow(v,2)/Math.pow(u,2);S>1&&(l*=Math.sqrt(S),u*=Math.sqrt(S)),l8(e,t,s,o,l,u,d,f,m,y,x,v,Ec);let{ang1:b,ang2:w}=Ec;const{centerX:C,centerY:P}=Ec;let E=Math.abs(w)/(mo/4);Math.abs(1-E)<1e-7&&(E=1);const I=Math.max(Math.ceil(E),1);w/=I;let U=r[r.length-2],O=r[r.length-1];const D={x:0,y:0};for(let Y=0;Y<I;Y++){const Q=a8(b,w),{x:q,y:Z}=Mc(Q[0],l,u,y,m,C,P,D),{x:pe,y:ce}=Mc(Q[1],l,u,y,m,C,P,D),{x:Se,y:Qe}=Mc(Q[2],l,u,y,m,C,P,D);Lp(r,U,O,q,Z,pe,ce,Se,Qe),U=Se,O=Qe,b+=w}}function c8(r,e,t){const s=(u,c)=>{const d=c.x-u.x,f=c.y-u.y,m=Math.sqrt(d*d+f*f),y=d/m,x=f/m;return{len:m,nx:y,ny:x}},o=(u,c)=>{u===0?r.moveTo(c.x,c.y):r.lineTo(c.x,c.y)};let l=e[e.length-1];for(let u=0;u<e.length;u++){const c=e[u%e.length],d=c.radius??t;if(d<=0){o(u,c),l=c;continue}const f=e[(u+1)%e.length],m=s(c,l),y=s(c,f);if(m.len<1e-4||y.len<1e-4){o(u,c),l=c;continue}let x=Math.asin(m.nx*y.ny-m.ny*y.nx),v=1,S=!1;m.nx*y.nx-m.ny*-y.ny<0?x<0?x=Math.PI+x:(x=Math.PI-x,v=-1,S=!0):x>0&&(v=-1,S=!0);const b=x/2;let w,C=Math.abs(Math.cos(b)*d/Math.sin(b));C>Math.min(m.len/2,y.len/2)?(C=Math.min(m.len/2,y.len/2),w=Math.abs(C*Math.sin(b)/Math.cos(b))):w=d;const P=c.x+y.nx*C+-y.ny*w*v,E=c.y+y.ny*C+y.nx*w*v,I=Math.atan2(m.ny,m.nx)+Math.PI/2*v,U=Math.atan2(y.ny,y.nx)-Math.PI/2*v;u===0&&r.moveTo(P+Math.cos(I)*w,E+Math.sin(I)*w),r.arc(P,E,w,I,U,S),l=c}}function h8(r,e,t,s){const o=(c,d)=>Math.sqrt((c.x-d.x)**2+(c.y-d.y)**2),l=(c,d,f)=>({x:c.x+(d.x-c.x)*f,y:c.y+(d.y-c.y)*f}),u=e.length;for(let c=0;c<u;c++){const d=e[(c+1)%u],f=d.radius??t;if(f<=0){c===0?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y);continue}const m=e[c],y=e[(c+2)%u],x=o(m,d);let v;if(x<1e-4)v=d;else{const w=Math.min(x/2,f);v=l(d,m,w/x)}const S=o(y,d);let b;if(S<1e-4)b=d;else{const w=Math.min(S/2,f);b=l(d,y,w/S)}c===0?r.moveTo(v.x,v.y):r.lineTo(v.x,v.y),r.quadraticCurveTo(d.x,d.y,b.x,b.y,s)}}const d8=new it;class f8{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Fn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==e||l!==t)&&s.push(e,t),this}arc(e,t,s,o,l,u){this._ensurePoly(!1);const c=this._currentPoly.points;return Fp(c,e,t,s,o,l,u),this}arcTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return o8(u,e,t,s,o,l),this}arcToSvg(e,t,s,o,l,u,c){const d=this._currentPoly.points;return u8(d,this._currentPoly.lastX,this._currentPoly.lastY,u,c,e,t,s,o,l),this}bezierCurveTo(e,t,s,o,l,u,c){this._ensurePoly();const d=this._currentPoly;return Lp(this._currentPoly.points,d.lastX,d.lastY,e,t,s,o,l,u,c),this}quadraticCurveTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly;return i8(this._currentPoly.points,u.lastX,u.lastY,e,t,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,o=s.length;for(let l=0;l<e.instructions.length;l++){const u=e.instructions[l];this[u.action](...u.data)}if(e.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const c=s[u];if(c.shape.type==="polygon"){const d=c.shape,f=l==null?void 0:l.shape;f&&f.containsPolygon(d)?(l.holes||(l.holes=[]),l.holes.push(c),s.copyWithin(u,u+1),s.length--,u--):l=c}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,o,l){return this.drawShape(new it(e,t,s,o),l),this}circle(e,t,s,o){return this.drawShape(new ch(e,t,s),o),this}poly(e,t,s){const o=new fo(e);return o.closePath=t,this.drawShape(o,s),this}regularPoly(e,t,s,o,l=0,u){o=Math.max(o|0,3);const c=-1*Math.PI/2+l,d=Math.PI*2/o,f=[];for(let m=0;m<o;m++){const y=c-m*d;f.push(e+s*Math.cos(y),t+s*Math.sin(y))}return this.poly(f,!0,u),this}roundPoly(e,t,s,o,l,u=0,c){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(e,t,s,o,u);const d=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,d);const f=-1*Math.PI/2+u,m=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let x=0;x<o;x++){const v=x*m+f,S=e+s*Math.cos(v),b=t+s*Math.sin(v),w=v+Math.PI+y,C=v-Math.PI-y,P=S+l*Math.cos(w),E=b+l*Math.sin(w),I=S+l*Math.cos(C),U=b+l*Math.sin(C);x===0?this.moveTo(P,E):this.lineTo(P,E),this.quadraticCurveTo(S,b,I,U,c)}return this.closePath()}roundShape(e,t,s=!1,o){return e.length<3?this:(s?h8(this,e,t,o):c8(this,e,t),this.closePath())}filletRect(e,t,s,o,l){if(l===0)return this.rect(e,t,s,o);const u=Math.min(s,o)/2,c=Math.min(u,Math.max(-u,l)),d=e+s,f=t+o,m=c<0?-c:0,y=Math.abs(c);return this.moveTo(e,t+y).arcTo(e+m,t+m,e+y,t,y).lineTo(d-y,t).arcTo(d-m,t+m,d,t+y,y).lineTo(d,f-y).arcTo(d-m,f-m,e+s-y,f,y).lineTo(e+y,f).arcTo(e+m,f-m,e,f-y,y).closePath()}chamferRect(e,t,s,o,l,u){if(l<=0)return this.rect(e,t,s,o);const c=Math.min(l,Math.min(s,o)/2),d=e+s,f=t+o,m=[e+c,t,d-c,t,d,t+c,d,f-c,d-c,f,e+c,f,e,f-c,e,t+c];for(let y=m.length-1;y>=2;y-=2)m[y]===m[y-2]&&m[y-1]===m[y-3]&&m.splice(y-1,2);return this.poly(m,!0,u)}ellipse(e,t,s,o,l){return this.drawShape(new hh(e,t,s,o),l),this}roundRect(e,t,s,o,l,u){return this.drawShape(new dh(e,t,s,o,l),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new fo,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new fo,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,o=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const l=t.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const o=t[s],l=o.shape.getBounds(d8);o.transform?e.addRect(l,o.transform):e.addRect(l)}return e}}class ur{constructor(e,t=!1){this.instructions=[],this.uid=mt("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?B5(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new f8(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,o,l){const u=this.instructions[this.instructions.length-1],c=this.getLastPoint(Ot.shared);let d=0,f=0;if(!u||u.action!=="bezierCurveTo")d=c.x,f=c.y;else{d=u.data[2],f=u.data[3];const m=c.x,y=c.y;d=m+(m-d),f=y+(y-f)}return this.instructions.push({action:"bezierCurveTo",data:[d,f,e,t,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(Ot.shared);let u=0,c=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,c=l.y;else{u=o.data[0],c=o.data[1];const d=l.x,f=l.y;u=d+(d-u),c=f+(f-c)}return this.instructions.push({action:"quadraticCurveTo",data:[u,c,e,t,s]}),this._dirty=!0,this}rect(e,t,s,o,l){return this.instructions.push({action:"rect",data:[e,t,s,o,l]}),this._dirty=!0,this}circle(e,t,s,o){return this.instructions.push({action:"circle",data:[e,t,s,o]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,o,l,u,c){l||(l=o/2);const d=-1*Math.PI/2+u,f=s*2,m=Math.PI*2/f,y=[];for(let x=0;x<f;x++){const v=x%2?l:o,S=x*m+d;y.push(e+v*Math.cos(S),t+v*Math.sin(S))}return this.poly(y,!0,c),this}clone(e=!1){const t=new ur;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];t.instructions.push({action:o.action,data:o.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,o=e.c,l=e.d,u=e.tx,c=e.ty;let d=0,f=0,m=0,y=0,x=0,v=0,S=0,b=0;for(let w=0;w<this.instructions.length;w++){const C=this.instructions[w],P=C.data;switch(C.action){case"moveTo":case"lineTo":d=P[0],f=P[1],P[0]=t*d+o*f+u,P[1]=s*d+l*f+c;break;case"bezierCurveTo":m=P[0],y=P[1],x=P[2],v=P[3],d=P[4],f=P[5],P[0]=t*m+o*y+u,P[1]=s*m+l*y+c,P[2]=t*x+o*v+u,P[3]=s*x+l*v+c,P[4]=t*d+o*f+u,P[5]=s*d+l*f+c;break;case"quadraticCurveTo":m=P[0],y=P[1],d=P[2],f=P[3],P[0]=t*m+o*y+u,P[1]=s*m+l*y+c,P[2]=t*d+o*f+u,P[3]=s*d+l*f+c;break;case"arcToSvg":d=P[5],f=P[6],S=P[0],b=P[1],P[0]=t*S+o*b,P[1]=s*S+l*b,P[5]=t*d+o*f+u,P[6]=s*d+l*f+c;break;case"circle":P[4]=io(P[3],e);break;case"rect":P[4]=io(P[4],e);break;case"ellipse":P[8]=io(P[8],e);break;case"roundRect":P[5]=io(P[5],e);break;case"addPath":P[0].transform(e);break;case"poly":P[2]=io(P[2],e);break;default:nt("unknown transform action",C.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function io(r,e){return r?r.prepend(e):e.clone()}function pt(r,e,t){const s=r.getAttribute(e);return s?Number(s):t}function p8(r,e){const t=r.querySelectorAll("defs");for(let s=0;s<t.length;s++){const o=t[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=m8(u);break;case"radialgradient":e.defs[u.id]=g8();break}}}}function m8(r){const e=pt(r,"x1",0),t=pt(r,"y1",0),s=pt(r,"x2",1),o=pt(r,"y2",0),l=r.getAttribute("gradientUnits")||"objectBoundingBox",u=new cr(e,t,s,o,l==="objectBoundingBox"?"local":"global");for(let c=0;c<r.children.length;c++){const d=r.children[c],f=pt(d,"offset",0),m=wt.shared.setValue(d.getAttribute("stop-color")).toNumber();u.addColorStop(f,m)}return u}function g8(r){return nt("[SVG Parser] Radial gradients are not yet supported"),new cr(0,0,1,0)}function U1(r){const e=r.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const G1={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function zp(r,e){const t=r.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in G1){const c=r.getAttribute(u);c&&H1(e,l,u,c.trim())}if(t){const u=t.split(";");for(let c=0;c<u.length;c++){const d=u[c].trim(),[f,m]=d.split(":");G1[f]&&H1(e,l,f,m.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function H1(r,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=U1(s);e.strokeStyle.fill=r.defs[o]}else e.strokeStyle.color=wt.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=U1(s);e.fillStyle.fill=r.defs[o]}else e.fillStyle.color=wt.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function y8(r){if(r.length<=2)return!0;const e=r.map(c=>c.area).sort((c,d)=>d-c),[t,s]=e,o=e[e.length-1],l=t/s,u=s/o;return!(l>3&&u<2)}function x8(r){return r.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function v8(r){const e=r.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],o=[];for(let m=0;m<t.length;m+=2)m+1<t.length&&(s.push(t[m]),o.push(t[m+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),c=Math.min(...o),d=Math.max(...o);return(u-l)*(d-c)}function V1(r,e){const t=new ur(r,!1);for(const s of t.instructions)e.instructions.push(s)}function _8(r,e){if(typeof r=="string"){const u=document.createElement("div");u.innerHTML=r.trim(),r=u.querySelector("svg")}const t={context:e,defs:{},path:new ur};p8(r,t);const s=r.children,{fillStyle:o,strokeStyle:l}=zp(r,t);for(let u=0;u<s.length;u++){const c=s[u];c.nodeName.toLowerCase()!=="defs"&&Bp(c,t,o,l)}return e}function Bp(r,e,t,s){const o=r.children,{fillStyle:l,strokeStyle:u}=zp(r,e);l&&t?t={...t,...l}:l&&(t=l),u&&s?s={...s,...u}:u&&(s=u);const c=!t&&!s;c&&(t={color:0});let d,f,m,y,x,v,S,b,w,C,P,E,I,U,O,D,Y;switch(r.nodeName.toLowerCase()){case"path":{U=r.getAttribute("d");const Q=r.getAttribute("fill-rule"),q=x8(U),Z=Q==="evenodd",pe=q.length>1;if(Z&&pe){const Se=q.map(J=>({path:J,area:v8(J)}));if(Se.sort((J,te)=>te.area-J.area),q.length>3||!y8(Se))for(let J=0;J<Se.length;J++){const te=Se[J],ee=J===0;e.context.beginPath();const X=new ur(void 0,!0);V1(te.path,X),e.context.path(X),ee?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let J=0;J<Se.length;J++){const te=Se[J],ee=J%2===1;e.context.beginPath();const X=new ur(void 0,!0);V1(te.path,X),e.context.path(X),ee?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const Se=Q?Q==="evenodd":!0;O=new ur(U,Se),e.context.path(O),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":S=pt(r,"cx",0),b=pt(r,"cy",0),w=pt(r,"r",0),e.context.ellipse(S,b,w,w),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":d=pt(r,"x",0),f=pt(r,"y",0),D=pt(r,"width",0),Y=pt(r,"height",0),C=pt(r,"rx",0),P=pt(r,"ry",0),C||P?e.context.roundRect(d,f,D,Y,C||P):e.context.rect(d,f,D,Y),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":S=pt(r,"cx",0),b=pt(r,"cy",0),C=pt(r,"rx",0),P=pt(r,"ry",0),e.context.beginPath(),e.context.ellipse(S,b,C,P),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":m=pt(r,"x1",0),y=pt(r,"y1",0),x=pt(r,"x2",0),v=pt(r,"y2",0),e.context.beginPath(),e.context.moveTo(m,y),e.context.lineTo(x,v),s&&e.context.stroke(s);break;case"polygon":I=r.getAttribute("points"),E=I.match(/\d+/g).map(Q=>parseInt(Q,10)),e.context.poly(E,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":I=r.getAttribute("points"),E=I.match(/\d+/g).map(Q=>parseInt(Q,10)),e.context.poly(E,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{nt(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}c&&(t=null);for(let Q=0;Q<o.length;Q++)Bp(o[Q],e,t,s)}function w8(r){return wt.isColorLike(r)}function Y1(r){return r instanceof pl}function X1(r){return r instanceof cr}function S8(r){return r instanceof ze}function b8(r,e,t){const s=wt.shared.setValue(e??0);return r.color=s.toNumber(),r.alpha=s.alpha===1?t.alpha:s.alpha,r.texture=ze.WHITE,{...t,...r}}function k8(r,e,t){return r.texture=e,{...t,...r}}function q1(r,e,t){return r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,{...t,...r}}function K1(r,e,t){return e.buildGradient(),r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,r.textureSpace=e.textureSpace,{...t,...r}}function C8(r,e){const t={...e,...r},s=wt.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function hi(r,e){if(r==null)return null;const t={},s=r;return w8(r)?b8(t,r,e):S8(r)?k8(t,r,e):Y1(r)?q1(t,r,e):X1(r)?K1(t,r,e):s.fill&&Y1(s.fill)?q1(s,s.fill,e):s.fill&&X1(s.fill)?K1(s,s.fill,e):C8(s,e)}function cl(r,e){const{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:c,...d}=e,f=hi(r,d);return f?{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:c,...f}:null}const A8=new Ot,Q1=new Le,ph=class Yn extends zn{constructor(){super(...arguments),this.uid=mt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new ur,this._transform=new Le,this._fillStyle={...Yn.defaultFillStyle},this._strokeStyle={...Yn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Fn,this._boundsDirty=!0}clone(){const e=new Yn;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=hi(e,Yn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=cl(e,Yn.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=hi(e,Yn.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=hi(e,Yn.defaultStrokeStyle),this}texture(e,t,s,o,l,u){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:o||0,dw:l||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?wt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ur,this}fill(e,t){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&(o==null?void 0:o.action)==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(Re(He,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=hi(e,Yn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Ot.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&(s==null?void 0:s.action)==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=cl(e,Yn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,o,l,u){this._tick++;const c=this._transform;return this._activePath.arc(c.a*e+c.c*t+c.tx,c.b*e+c.d*t+c.ty,s,o,l,u),this}arcTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(e,t,s,o,l,u,c){this._tick++;const d=this._transform;return this._activePath.arcToSvg(e,t,s,o,l,d.a*u+d.c*c+d.tx,d.b*u+d.d*c+d.ty),this}bezierCurveTo(e,t,s,o,l,u,c){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*e+d.c*t+d.tx,d.b*e+d.d*t+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*l+d.c*u+d.tx,d.b*l+d.d*u+d.ty,c),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,s,o){return this._tick++,this._activePath.ellipse(e,t,s,o,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*e+s.c*t+s.tx,u=s.b*e+s.d*t+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(e,t,s,o){return this._tick++,this._activePath.rect(e,t,s,o,this._transform.clone()),this}roundRect(e,t,s,o,l){return this._tick++,this._activePath.roundRect(e,t,s,o,l,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(e,t,s,o,l,u),this}roundPoly(e,t,s,o,l,u){return this._tick++,this._activePath.roundPoly(e,t,s,o,l,u),this}roundShape(e,t,s,o){return this._tick++,this._activePath.roundShape(e,t,s,o),this}filletRect(e,t,s,o,l){return this._tick++,this._activePath.filletRect(e,t,s,o,l),this}chamferRect(e,t,s,o,l,u){return this._tick++,this._activePath.chamferRect(e,t,s,o,l,u),this}star(e,t,s,o,l=0,u=0){return this._tick++,this._activePath.star(e,t,s,o,l,u,this._transform.clone()),this}svg(e){return this._tick++,_8(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,o,l,u){return e instanceof Le?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,o,l,u),this)}transform(e,t,s,o,l,u){return e instanceof Le?(this._transform.append(e),this):(Q1.set(e,t,s,o,l,u),this._transform.append(Q1),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],o=s.action;if(o==="fill"){const l=s.data;e.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;e.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,c=l.style.width*(1-u),d=l.path.bounds;e.addFrame(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c)}}return e}containsPoint(e){var o;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let l=0;l<t.length;l++){const u=t[l],c=u.data,d=c.path;if(!u.action||!d)continue;const f=c.style,m=d.shapePath.shapePrimitives;for(let y=0;y<m.length;y++){const x=m[y].shape;if(!f||!x)continue;const v=m[y].transform,S=v?v.applyInverse(e,A8):e;if(u.action==="fill")s=x.contains(S.x,S.y);else{const w=f;s=x.strokeContains(S.x,S.y,w.width,w.alignment)}const b=c.hole;if(b){const w=(o=b.shapePath)==null?void 0:o.shapePrimitives;if(w)for(let C=0;C<w.length;C++)w[C].shape.contains(S.x,S.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};ph.defaultFillStyle={color:16777215,alpha:1,texture:ze.WHITE,matrix:null,fill:null,textureSpace:"local"};ph.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:ze.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let wn=ph;const mh=class Qi extends zn{constructor(e={}){super(),this.uid=mt("textStyle"),this._tick=0,P8(e);const t={...Qi.defaultTextStyle,...e};for(const s in t){const o=s;this[o]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Qi.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Qi.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...wn.defaultFillStyle,...e},()=>{this._fill=hi({...this._originalFill},wn.defaultFillStyle)})),this._fill=hi(e===0?"black":e,wn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...wn.defaultStrokeStyle,...e},()=>{this._stroke=cl({...this._originalStroke},wn.defaultStrokeStyle)})),this._stroke=cl(e,wn.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=Qi.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Qi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){var s,o,l,u;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const c=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(c),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(c),(l=this._stroke)!=null&&l.texture&&this._stroke.texture.destroy(c),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(c)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,o,l)=>(s[o]===l||(s[o]=l,t==null||t(o,l),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(wt.isColorLike(e)||e instanceof cr||e instanceof pl)}};mh.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};mh.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let So=mh;function P8(r){const e=r;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=So.defaultDropShadow;r.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Re(He,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(wt.isColorLike(t))s.color=t;else if(t instanceof cr||t instanceof pl)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");r.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Re(He,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&nt("The number of fill colors must match the number of fill gradient stops.");const t=new cr({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),o=e.fill.map(l=>wt.shared.setValue(l).toNumber());s.forEach((l,u)=>{t.addColorStop(l,o[u])}),r.fill={fill:t}}}class T8{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=Ke.get().createCanvas();s.width=e,s.height=t;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=ns(e),t=ns(t);const o=(e<<17)+(t<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(e,t)),l}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:o}=t,l=(s<<17)+(o<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,o),this._canvasPool[l].push(e)}clear(){this._canvasPool={}}}const bo=new T8;ko.register(bo);const Z1=1e5;function hl(r,e,t,s=0){if(r.texture===ze.WHITE&&!r.fill)return wt.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof pl){const o=r.fill,l=e.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(Le.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(r.fill instanceof cr){const o=r.fill,l=o.type==="linear",u=o.textureSpace==="local";let c=1,d=1;u&&t&&(c=t.width+s,d=t.height+s);let f,m=!1;if(l){const{start:y,end:x}=o;f=e.createLinearGradient(y.x*c,y.y*d,x.x*c,x.y*d),m=Math.abs(x.x-y.x)<Math.abs((x.y-y.y)*.1)}else{const{center:y,innerRadius:x,outerCenter:v,outerRadius:S}=o;f=e.createRadialGradient(y.x*c,y.y*d,x*c,v.x*c,v.y*d,S*c)}if(m&&u&&t){const y=t.lineHeight/d;for(let x=0;x<t.lines.length;x++){const v=(x*t.lineHeight+s/2)/d;o.colorStops.forEach(S=>{const b=v+S.offset*y;f.addColorStop(Math.floor(b*Z1)/Z1,wt.shared.setValue(S.color).toHex())})}}else o.colorStops.forEach(y=>{f.addColorStop(y.offset,wt.shared.setValue(y.color).toHex())});return f}}else{const o=e.createPattern(r.texture.source.resource,"repeat"),l=r.matrix.copyTo(Le.shared);return l.scale(r.texture.frame.width,r.texture.frame.height),o.setTransform(l),o}return nt("FillStyle not recognised",r),"red"}const jp=class Dp extends xp{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...Dp.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=ze.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=ll(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof rs?t.textureStyle:new rs(t.textureStyle)),this.fontMetrics=qn.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){var w,C;const t=qn.graphemeSegmenter(e).filter(P=>!this._currentChars.includes(P)).filter((P,E,I)=>I.indexOf(P)===E);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const c=this._style;let d=this._currentX,f=this._currentY,m=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,x=this._padding*y;let v=!1;const S=o.width/this.resolution,b=o.height/this.resolution;for(let P=0;P<t.length;P++){const E=t[P],I=qn.measureText(E,c,o,!1);I.lineHeight=I.height;const U=I.width*y,O=Math.ceil((c.fontStyle==="italic"?2:1)*U),D=I.height*y,Y=O+x*2,Q=D+x*2;if(v=!1,E!==`
`&&E!=="\r"&&E!=="	"&&E!==" "&&(v=!0,m=Math.ceil(Math.max(Q,m))),d+Y>S&&(f+=m,m=Q,d=0,f+m>b)){u.update();const Z=this._nextPage();o=Z.canvasAndContext.canvas,l=Z.canvasAndContext.context,u=Z.texture.source,d=0,f=0,m=0}const q=U/y-(((w=c.dropShadow)==null?void 0:w.distance)??0)-(((C=c._stroke)==null?void 0:C.width)??0);if(this.chars[E]={id:E.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:q,kerning:{}},v){this._drawGlyph(l,I,d+x,f+x,y,c);const Z=u.width*y,pe=u.height*y,ce=new it(d/Z*u.width,f/pe*u.height,Y/Z*u.width,Q/pe*u.height);this.chars[E].texture=new ze({source:u,frame:ce}),d+=Math.ceil(Y)}}u.update(),this._currentX=d,this._currentY=f,this._currentMaxCharHeight=m,this._skipKerning&&this._applyKerning(t,l)}get pageTextures(){return Re(He,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let o=0;o<e.length;o++){const l=e[o];for(let u=0;u<this._currentChars.length;u++){const c=this._currentChars[u];let d=s[l];d||(d=s[l]=t.measureText(l).width);let f=s[c];f||(f=s[c]=t.measureText(c).width);let m=t.measureText(l+c).width,y=m-(d+f);y&&(this.chars[l].kerning[c]=y),m=t.measureText(l+c).width,y=m-(d+f),y&&(this.chars[c].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=bo.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new ze({source:new di({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:t,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=ll(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const o=t._stroke,l=(o==null?void 0:o.width)??0;if(o&&(e.lineWidth=l,e.lineJoin=o.join,e.miterLimit=o.miterLimit,e.strokeStyle=hl(o,e)),t._fill&&(e.fillStyle=hl(t._fill,e)),t.dropShadow){const u=t.dropShadow,c=wt.shared.setValue(u.color).toArray(),d=u.blur*s,f=u.distance*s;e.shadowColor=`rgba(${c[0]*255},${c[1]*255},${c[2]*255},${u.alpha})`,e.shadowBlur=d,e.shadowOffsetX=Math.cos(u.angle)*f,e.shadowOffsetY=Math.sin(u.angle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,o,l,u){const c=t.text,d=t.fontProperties,f=u._stroke,m=((f==null?void 0:f.width)??0)*l,y=s+m/2,x=o-m/2,v=d.descent*l,S=t.lineHeight*l;let b=!1;u.stroke&&m&&(b=!0,e.strokeText(c,y,x+S-v));const{shadowBlur:w,shadowOffsetX:C,shadowOffsetY:P}=e;u._fill&&(b&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(c,y,x+S-v)),b&&(e.shadowBlur=w,e.shadowOffsetX=C,e.shadowOffsetY=P)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];bo.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};jp.defaultOptions={textureSize:512,style:new So,mipmap:!0};let J1=jp;function E8(r,e,t,s){const o={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=t.baseLineOffset;let l=o.lines[0],u=null,c=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},f=t.baseMeasurementFontSize/e.fontSize,m=e.letterSpacing*f,y=e.wordWrapWidth*f,x=e.lineHeight?e.lineHeight*f:t.lineHeight,v=e.wordWrap&&e.breakWords,S=C=>{const P=l.width;for(let E=0;E<d.index;E++){const I=C.positions[E];l.chars.push(C.chars[E]),l.charPositions.push(I+P)}l.width+=C.width,c=!1,d.width=0,d.index=0,d.chars.length=0},b=()=>{let C=l.chars.length-1;if(s){let P=l.chars[C];for(;P===" ";)l.width-=t.chars[P].xAdvance,P=l.chars[--C]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},c=!0,o.lines.push(l),o.height+=x},w=C=>C-m>y;for(let C=0;C<r.length+1;C++){let P;const E=C===r.length;E||(P=r[C]);const I=t.chars[P]||t.chars[" "];if(/(?:\s)/.test(P)||P==="\r"||P===`
`||E){if(!c&&e.wordWrap&&w(l.width+d.width)?(b(),S(d),E||l.charPositions.push(0)):(d.start=l.width,S(d),E||l.charPositions.push(0)),P==="\r"||P===`
`)b();else if(!E){const Y=I.xAdvance+(I.kerning[u]||0)+m;l.width+=Y,l.spaceWidth=Y,l.spacesIndex.push(l.charPositions.length),l.chars.push(P)}}else{const D=I.kerning[u]||0,Y=I.xAdvance+D+m;v&&w(l.width+d.width+Y)&&(S(d),b()),d.positions[d.index++]=d.width+D,d.chars.push(P),d.width+=Y}u=P}return b(),e.align==="center"?M8(o):e.align==="right"?R8(o):e.align==="justify"&&I8(o),o}function M8(r){for(let e=0;e<r.lines.length;e++){const t=r.lines[e],s=r.width/2-t.width/2;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function R8(r){for(let e=0;e<r.lines.length;e++){const t=r.lines[e],s=r.width-t.width;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function I8(r){const e=r.width;for(let t=0;t<r.lines.length;t++){const s=r.lines[t];let o=0,l=s.spacesIndex[o++],u=0;const c=s.spacesIndex.length,f=(e-s.width)/c;for(let m=0;m<s.charPositions.length;m++)m===l&&(l=s.spacesIndex[o++],u+=f),s.charPositions[m]+=u}}function L8(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const e=[];for(let t=0,s=r.length;t<s;t++){const o=r[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let c=l,d=u;c<=d;c++)e.push(String.fromCharCode(c))}else e.push(...Array.from(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let el=0;class F8{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=vp(1e3)}getFont(e,t){var u;let s=`${t.fontFamily}-bitmap`,o=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,o=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,o=!1),!tt.has(s)){const c=Object.create(t);c.lineHeight=0;const d=new J1({style:c,overrideFill:o,overrideSize:!0,...this.defaultOptions});el++,el>50&&nt("BitmapText",`You have dynamically created ${el} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),d.once("destroy",()=>{el--,tt.remove(s)}),tt.set(s,d)}const l=tt.get(s);return(u=l.ensureCharacters)==null||u.call(l,e),l}getLayout(e,t,s=!0){const o=this.getFont(e,t),l=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=qn.graphemeSegmenter(e),c=E8(u,t,o,s);return this.measureCache.set(l,c),c}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){var f,m,y,x;let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:(f=e[2])==null?void 0:f.chars,resolution:(m=e[2])==null?void 0:m.resolution,padding:(y=e[2])==null?void 0:y.padding,skipKerning:(x=e[2])==null?void 0:x.skipKerning},Re(He,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t==null?void 0:t.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const o=t.style,l=o instanceof So?o:new So(o),u=t.dynamicFill??this._canUseTintForStyle(l),c=new J1({style:l,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),d=L8(t.chars);return c.ensureCharacters(d.join("")),tt.set(`${s}-bitmap`,c),c.once("destroy",()=>tt.remove(`${s}-bitmap`)),c}uninstall(e){const t=`${e}-bitmap`,s=tt.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const e0=new F8;class $p extends xp{constructor(e,t){super();const{textures:s,data:o}=e;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],c=s[u.id];this.pages.push({texture:c})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:c,source:d,rotate:f}=s[u.page],m=Ve.transformRectCoords(u,c,f,new it),y=new ze({frame:m,orig:new it(0,0,u.width,u.height),source:d,rotate:f});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){e0.install(e)}static uninstall(e){e0.uninstall(e)}}const Rc={test(r){return typeof r=="string"&&r.startsWith("info face=")},parse(r){const e=r.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in e){const x=e[y].match(/^[a-z]+/gm)[0],v=e[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),S={};for(const b in v){const w=v[b].split("="),C=w[0],P=w[1].replace(/"/gm,""),E=parseFloat(P),I=isNaN(E)?P:E;S[C]=I}t[x].push(S)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=t.info,[l]=t.common,[u]=t.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const c=t.page;for(let y=0;y<c.length;y++)s.pages.push({id:parseInt(c[y].id,10)||0,file:c[y].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const f=t.char;for(let y=0;y<f.length;y++){const x=f[y],v=parseInt(x.id,10);let S=x.letter??x.char??String.fromCharCode(v);S==="space"&&(S=" "),d[v]=S,s.chars[S]={id:v,page:parseInt(x.page,10)||0,x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xOffset:parseInt(x.xoffset,10),yOffset:parseInt(x.yoffset,10),xAdvance:parseInt(x.xadvance,10),kerning:{}}}const m=t.kerning||[];for(let y=0;y<m.length;y++){const x=parseInt(m[y].first,10),v=parseInt(m[y].second,10),S=parseInt(m[y].amount,10);s.chars[d[v]].kerning[d[x]]=S}return s}},t0={test(r){const e=r;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(r){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=r.getElementsByTagName("info")[0],s=r.getElementsByTagName("common")[0],o=r.getElementsByTagName("distanceField")[0];o&&(e.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=r.getElementsByTagName("page"),u=r.getElementsByTagName("char"),c=r.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let f=0;f<l.length;f++)e.pages.push({id:parseInt(l[f].getAttribute("id"),10)||0,file:l[f].getAttribute("file")});const d={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let f=0;f<u.length;f++){const m=u[f],y=parseInt(m.getAttribute("id"),10);let x=m.getAttribute("letter")??m.getAttribute("char")??String.fromCharCode(y);x==="space"&&(x=" "),d[y]=x,e.chars[x]={id:y,page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xOffset:parseInt(m.getAttribute("xoffset"),10),yOffset:parseInt(m.getAttribute("yoffset"),10),xAdvance:parseInt(m.getAttribute("xadvance"),10),kerning:{}}}for(let f=0;f<c.length;f++){const m=parseInt(c[f].getAttribute("first"),10),y=parseInt(c[f].getAttribute("second"),10),x=parseInt(c[f].getAttribute("amount"),10);e.chars[d[y]].kerning[d[m]]=x}return e}},n0={test(r){return typeof r=="string"&&r.match(/<font(\s|>)/)?t0.test(Ke.get().parseXML(r)):!1},parse(r){return t0.parse(Ke.get().parseXML(r))}},z8=[".xml",".fnt"],B8={extension:{type:ge.CacheParser,name:"cacheBitmapFont"},test:r=>r instanceof $p,getCacheableAssets(r,e){const t={};return r.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},j8={extension:{type:ge.LoadParser,priority:zr.Normal},name:"loadBitmapFont",id:"bitmap-font",test(r){return z8.includes(un.extname(r).toLowerCase())},async testParse(r){return Rc.test(r)||n0.test(r)},async parse(r,e,t){const s=Rc.test(r)?Rc.parse(r):n0.parse(r),{src:o}=e,{pages:l}=s,u=[],c=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const x=l[y].file;let v=un.join(un.dirname(o),x);v=Wc(v,o),u.push({src:v,data:c})}const d=await t.load(u),f=u.map(y=>d[y.src]);return new $p({data:s,textures:f},o)},async load(r,e){return await(await Ke.get().fetch(r)).text()},async unload(r,e,t){await Promise.all(r.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),r.destroy()}};class D8{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const $8={extension:{type:ge.CacheParser,name:"cacheTextureArray"},test:r=>Array.isArray(r)&&r.every(e=>e instanceof ze),getCacheableAssets:(r,e)=>{const t={};return r.forEach(s=>{e.forEach((o,l)=>{t[s+(l===0?"":l+1)]=o})}),t}};async function Op(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const O8={extension:{type:ge.DetectionParser,priority:1},test:async()=>Op("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")},r0=["png","jpg","jpeg"],N8={extension:{type:ge.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...r0],remove:async r=>r.filter(e=>!r0.includes(e))},W8="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function gl(r){return W8?!1:document.createElement("video").canPlayType(r)!==""}const U8={extension:{type:ge.DetectionParser,priority:0},test:async()=>gl("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")},G8={extension:{type:ge.DetectionParser,priority:0},test:async()=>gl("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")},H8={extension:{type:ge.DetectionParser,priority:0},test:async()=>gl("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")},V8={extension:{type:ge.DetectionParser,priority:0},test:async()=>Op("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")},Np=class sl{constructor(){this.loadOptions={...sl.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{var u,c;let o=null,l=null;if((t.parser||t.loadParser)&&(l=this._parserHash[t.parser||t.loadParser],t.loadParser&&nt(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),l||nt(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!l){for(let d=0;d<this.parsers.length;d++){const f=this.parsers[d];if(f.load&&((u=f.test)!=null&&u.call(f,e,t,this))){l=f;break}}if(!l)return nt(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(e,t,this),s.parser=l;for(let d=0;d<this.parsers.length;d++){const f=this.parsers[d];f.parse&&f.parse&&await((c=f.testParse)==null?void 0:c.call(f,o,t,this))&&(o=await f.parse(o,t,this)||o,s.parser=f)}return o})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...sl.defaultOptions,...this.loadOptions,onProgress:t}:{...sl.defaultOptions,...this.loadOptions,...t||{}},{onProgress:o,onError:l,strategy:u,retryCount:c,retryDelay:d}=s;let f=0;const m={},y=al(e),x=Ln(e,b=>({alias:[b],src:b,data:{}})),v=x.reduce((b,w)=>b+(w.progressSize||1),0),S=x.map(async b=>{const w=un.toAbsolute(b.src);m[b.src]||(await this._loadAssetWithRetry(w,b,{onProgress:o,onError:l,strategy:u,retryCount:c,retryDelay:d},m),f+=b.progressSize||1,o&&o(f/v))});return await Promise.all(S),y?m[x[0].src]:m}async unload(e){const s=Ln(e,o=>({alias:[o],src:o})).map(async o=>{var c,d;const l=un.toAbsolute(o.src),u=this.promiseCache[l];if(u){const f=await u.promise;delete this.promiseCache[l],await((d=(c=u.parser)==null?void 0:c.unload)==null?void 0:d.call(c,f,o,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?nt("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&nt(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,o){let l=0;const{onError:u,strategy:c,retryCount:d,retryDelay:f}=s,m=y=>new Promise(x=>setTimeout(x,y));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),o[t.src]=await this.promiseCache[e].promise;return}catch(y){delete this.promiseCache[e],delete o[t.src],l++;const x=c!=="retry"||l>d;if(c==="retry"&&!x){u&&u(y,t),await m(f);continue}if(c==="skip"){u&&u(y,t);return}throw u&&u(y,t),new Error(`[Loader.load] Failed to load ${e}.
${y}`)}}};Np.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let Y8=Np;function us(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function cs(r,e){const t=r.split("?")[0],s=un.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const X8=".json",q8="application/json",K8={extension:{type:ge.LoadParser,priority:zr.Low},name:"loadJson",id:"json",test(r){return us(r,q8)||cs(r,X8)},async load(r){return await(await Ke.get().fetch(r)).json()}},Q8=".txt",Z8="text/plain",J8={name:"loadTxt",id:"text",extension:{type:ge.LoadParser,priority:zr.Low,name:"loadTxt"},test(r){return us(r,Z8)||cs(r,Q8)},async load(r){return await(await Ke.get().fetch(r)).text()}},e4=["normal","bold","100","200","300","400","500","600","700","800","900"],t4=[".ttf",".otf",".woff",".woff2"],n4=["font/ttf","font/otf","font/woff","font/woff2"],r4=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function i4(r){const e=un.extname(r),o=un.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1));let l=o.length>0;for(const c of o)if(!c.match(r4)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const s4=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function o4(r){return s4.test(r)?r:encodeURI(r)}const a4={extension:{type:ge.LoadParser,priority:zr.Low},name:"loadWebFont",id:"web-font",test(r){return us(r,n4)||cs(r,t4)},async load(r,e){var s,o,l;const t=Ke.get().getFontFaceSet();if(t){const u=[],c=((s=e.data)==null?void 0:s.family)??i4(r),d=((l=(o=e.data)==null?void 0:o.weights)==null?void 0:l.filter(m=>e4.includes(m)))??["normal"],f=e.data??{};for(let m=0;m<d.length;m++){const y=d[m],x=new FontFace(c,`url(${o4(r)})`,{...f,weight:y});await x.load(),t.add(x),u.push(x)}return tt.has(`${c}-and-url`)?tt.get(`${c}-and-url`).entries.push({url:r,faces:u}):tt.set(`${c}-and-url`,{entries:[{url:r,faces:u}]}),u.length===1?u[0]:u}return nt("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){const e=Array.isArray(r)?r:[r],t=e[0].family,s=tt.get(`${t}-and-url`),o=s.entries.find(l=>l.faces.some(u=>e.indexOf(u)!==-1));o.faces=o.faces.filter(l=>e.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),e.forEach(l=>{Ke.get().getFontFaceSet().delete(l)}),s.entries.length===0&&tt.remove(`${t}-and-url`)}};function gh(r,e=1){var s;const t=(s=ls.RETINA_PREFIX)==null?void 0:s.exec(r);return t?parseFloat(t[1]):e}function yh(r,e,t){r.label=t,r._sourceOrigin=t;const s=new ze({source:r,label:t}),o=()=>{delete e.promiseCache[t],tt.has(t)&&tt.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(nt("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{r.destroyed||(nt("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const l4=".svg",u4="image/svg+xml",c4={extension:{type:ge.LoadParser,priority:zr.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(r){return us(r,u4)||cs(r,l4)},async load(r,e,t){var s;return((s=e.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?d4(r):h4(r,e,t,this.config.crossOrigin)},unload(r){r.destroy(!0)}};async function h4(r,e,t,s){var w,C,P;const o=await Ke.get().fetch(r),l=Ke.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=((w=e.data)==null?void 0:w.width)??l.width,c=((C=e.data)==null?void 0:C.height)??l.height,d=((P=e.data)==null?void 0:P.resolution)||gh(r),f=Math.ceil(u*d),m=Math.ceil(c*d),y=Ke.get().createCanvas(f,m),x=y.getContext("2d");x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(l,0,0,u*d,c*d);const{parseAsGraphicsContext:v,...S}=e.data??{},b=new di({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:d,...S});return yh(b,t,r)}async function d4(r){const t=await(await Ke.get().fetch(r)).text(),s=new wn;return s.svg(t),s}const f4=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let es=null,Jc=class{constructor(){es||(es=URL.createObjectURL(new Blob([f4],{type:"application/javascript"}))),this.worker=new Worker(es)}};Jc.revokeObjectURL=function(){es&&(URL.revokeObjectURL(es),es=null)};const p4=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let ts=null;class Wp{constructor(){ts||(ts=URL.createObjectURL(new Blob([p4],{type:"application/javascript"}))),this.worker=new Worker(ts)}}Wp.revokeObjectURL=function(){ts&&(URL.revokeObjectURL(ts),ts=null)};let i0=0,Ic;class m4{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Jc;t.addEventListener("message",s=>{t.terminate(),Jc.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){var s;return this._run("loadImageBitmap",[e,(s=t==null?void 0:t.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){Ic===void 0&&(Ic=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<Ic&&(this._createdWorkers++,e=new Wp().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:e,arguments:t,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[i0]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:i0++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const s0=new m4,g4=[".jpeg",".jpg",".png",".webp",".avif"],y4=["image/jpeg","image/png","image/webp","image/avif"];async function x4(r,e){var o;const t=await Ke.get().fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const s=await t.blob();return((o=e==null?void 0:e.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const Up={name:"loadTextures",id:"texture",extension:{type:ge.LoadParser,priority:zr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return us(r,y4)||cs(r,g4)},async load(r,e,t){var l;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await s0.isImageBitmapSupported()?s=await s0.loadImageBitmap(r,e):s=await x4(r,e):s=await new Promise((u,c)=>{s=Ke.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=r,s.complete?u(s):(s.onload=()=>{u(s)},s.onerror=c)});const o=new di({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((l=e.data)==null?void 0:l.resolution)||gh(r),...e.data});return yh(o,t,r)},unload(r){r.destroy(!0)}},v4=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let Lc,Fc;function _4(r,e,t){t===void 0&&!e.startsWith("data:")?r.crossOrigin=S4(e):t!==!1&&(r.crossOrigin=typeof t=="string"?t:"anonymous")}function w4(r){return new Promise((e,t)=>{r.addEventListener("canplaythrough",s),r.addEventListener("error",o),r.load();function s(){l(),e()}function o(u){l(),t(u)}function l(){r.removeEventListener("canplaythrough",s),r.removeEventListener("error",o)}})}function S4(r,e=globalThis.location){if(r.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function b4(){const r=[],e=[];for(const t of v4){const s=ho.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;gl(s)&&(r.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:r,validVideoMime:e}}const k4={name:"loadVideo",id:"video",extension:{type:ge.LoadParser,name:"loadVideo"},test(r){if(!Lc||!Fc){const{validVideoExtensions:s,validVideoMime:o}=b4();Lc=s,Fc=o}const e=us(r,Fc),t=cs(r,Lc);return e||t},async load(r,e,t){var d,f;const s={...ho.defaultOptions,resolution:((d=e.data)==null?void 0:d.resolution)||gh(r),alphaMode:((f=e.data)==null?void 0:f.alphaMode)||await Y0(),...e.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(m=>{const y=l[m];y!==void 0&&o.setAttribute(m,y)}),s.muted===!0&&(o.muted=!0),_4(o,r,s.crossorigin);const u=document.createElement("source");let c;if(s.mime)c=s.mime;else if(r.startsWith("data:"))c=r.slice(5,r.indexOf(";"));else if(!r.startsWith("blob:")){const m=r.split("?")[0].slice(r.lastIndexOf(".")+1).toLowerCase();c=ho.MIME_TYPES[m]||`video/${m}`}return u.src=r,c&&(u.type=c),new Promise(m=>{const y=async()=>{const x=new ho({...s,resource:o});o.removeEventListener("canplay",y),e.data.preload&&await w4(o),m(yh(x,t,r))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",y),o.appendChild(u)})},unload(r){r.destroy(!0)}},Gp={extension:{type:ge.ResolveParser,name:"resolveTexture"},test:Up.test,parse:r=>{var e;return{resolution:parseFloat(((e=ls.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:r.split(".").pop(),src:r}}},C4={extension:{type:ge.ResolveParser,priority:-2,name:"resolveJson"},test:r=>ls.RETINA_PREFIX.test(r)&&r.endsWith(".json"),parse:Gp.parse};class A4{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ls,this.loader=new Y8,this.cache=tt,this._backgroundLoader=new D8(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var l,u;if(this._initialized){nt("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let c=e.manifest;typeof c=="string"&&(c=await this.load(c)),this.resolver.addManifest(c)}const t=((l=e.texturePreference)==null?void 0:l.resolution)??1,s=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:(u=e.texturePreference)==null?void 0:u.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=al(e),o=Ln(e).map(c=>{if(typeof c!="string"){const d=this.resolver.getAlias(c);return d.some(f=>!this.resolver.hasKey(f))&&this.add(c),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,t);return s?u[o[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const o=this.resolver.resolveBundle(e),l={},u=Object.keys(o);let c=0;const d=[],f=()=>{t==null||t(d.reduce((y,x)=>y+x,0)/c)},m=u.map((y,x)=>{const v=o[y],S=Object.values(v),w=[...new Set(S.flat())].reduce((C,P)=>C+(P.progressSize||1),0);return d.push(0),c+=w,this._mapLoadToResolve(v,C=>{d[x]=C*w,f()}).then(C=>{l[y]=C})});return await Promise.all(m),s?l[e[0]]:l}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return tt.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=tt.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,t);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const c=o[u.src],d=[u.src];u.alias&&d.push(...u.alias),d.forEach(f=>{l[f]=c}),tt.set(d,c)}),l}async unload(e){this._initialized||await this.init();const t=Ln(e).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=Ln(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{tt.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,o)=>t.indexOf(s)===o),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const Ji=new A4;Lt.handleByList(ge.LoadParser,Ji.loader.parsers).handleByList(ge.ResolveParser,Ji.resolver.parsers).handleByList(ge.CacheParser,Ji.cache.parsers).handleByList(ge.DetectionParser,Ji.detections);Lt.add($8,N8,O8,V8,U8,G8,H8,K8,J8,a4,c4,Up,k4,j8,B8,Gp,C4);const o0={loader:ge.LoadParser,resolver:ge.ResolveParser,cache:ge.CacheParser,detection:ge.DetectionParser};Lt.handle(ge.Asset,r=>{const e=r.ref;Object.entries(o0).filter(([t])=>!!e[t]).forEach(([t,s])=>Lt.add(Object.assign(e[t],{extension:e[t].extension??s})))},r=>{const e=r.ref;Object.keys(o0).filter(t=>!!e[t]).forEach(t=>Lt.remove(e[t]))});class pi extends oh{constructor(e){e instanceof wn&&(e={context:e});const{context:t,roundPixels:s,...o}=e||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new wn,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new pi(this._context.clone()):(this._ownedContext=null,new pi(this._context))}lineStyle(e,t,s){Re(He,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return e&&(o.width=e),t&&(o.color=t),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(e,t){Re(He,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){Re(He,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==wn.defaultStrokeStyle.width||e.color!==wn.defaultStrokeStyle.color||e.alpha!==wn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Re(He,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Re(He,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Re(He,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Re(He,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Re(He,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Re(He,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class P4 extends oh{constructor(e,t){const{text:s,resolution:o,style:l,anchor:u,width:c,height:d,roundPixels:f,...m}=e;super({...m}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=s??"",this.style=l,this.resolution=o??null,this.allowChildren=!1,this._anchor=new It({_onUpdate:()=>{this.onViewUpdate()}}),u&&(this.anchor=u),this.roundPixels=f??!1,c!==void 0&&(this.width=c),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,s=this.bounds.height,o=-t*this.anchor.x;let l=0;return e.x>=o&&e.x<=o+t&&(l=-s*this.anchor.y,e.y>=l&&e.y<=l+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function T4(r,e){let t=r[0]??{};return(typeof t=="string"||r[1])&&(Re(He,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:r[1]}),t}let oi=null,or=null;function E4(r,e){oi||(oi=Ke.get().createCanvas(256,128),or=oi.getContext("2d",{willReadFrequently:!0}),or.globalCompositeOperation="copy",or.globalAlpha=1),(oi.width<r||oi.height<e)&&(oi.width=ns(r),oi.height=ns(e))}function a0(r,e,t){for(let s=0,o=4*t*e;s<e;++s,o+=4)if(r[o+3]!==0)return!1;return!0}function l0(r,e,t,s,o){const l=4*e;for(let u=s,c=s*l+4*t;u<=o;++u,c+=l)if(r[c+3]!==0)return!1;return!0}function M4(...r){let e=r[0];e.canvas||(e={canvas:r[0],resolution:r[1]});const{canvas:t}=e,s=Math.min(e.resolution??1,1),o=e.width??t.width,l=e.height??t.height;let u=e.output;if(E4(o,l),!or)throw new TypeError("Failed to get canvas 2D context");or.drawImage(t,0,0,o,l,0,0,o*s,l*s);const d=or.getImageData(0,0,o,l).data;let f=0,m=0,y=o-1,x=l-1;for(;m<l&&a0(d,o,m);)++m;if(m===l)return it.EMPTY;for(;a0(d,o,x);)--x;for(;l0(d,o,f,m,x);)++f;for(;l0(d,o,y,m,x);)--y;return++y,++x,or.globalCompositeOperation="source-over",or.strokeRect(f,m,y-f,x-m),or.globalCompositeOperation="copy",u??(u=new it),u.set(f/s,m/s,(y-f)/s,(x-m)/s),u}const u0=new it;class R4{getCanvasAndContext(e){const{text:t,style:s,resolution:o=1}=e,l=s._getFinalPadding(),u=qn.measureText(t||" ",s),c=Math.ceil(Math.ceil(Math.max(1,u.width)+l*2)*o),d=Math.ceil(Math.ceil(Math.max(1,u.height)+l*2)*o),f=bo.getOptimalCanvasAndContext(c,d);this._renderTextToCanvas(t,s,l,o,f);const m=s.trim?M4({canvas:f.canvas,width:c,height:d,resolution:1,output:u0}):u0.set(0,0,c,d);return{canvasAndContext:f,frame:m}}returnCanvasAndContext(e){bo.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,s,o,l){var E,I,U,O;const{canvas:u,context:c}=l,d=ll(t),f=qn.measureText(e||" ",t),m=f.lines,y=f.lineHeight,x=f.lineWidths,v=f.maxLineWidth,S=f.fontProperties,b=u.height;if(c.resetTransform(),c.scale(o,o),c.textBaseline=t.textBaseline,(E=t._stroke)!=null&&E.width){const D=t._stroke;c.lineWidth=D.width,c.miterLimit=D.miterLimit,c.lineJoin=D.join,c.lineCap=D.cap}c.font=d;let w,C;const P=t.dropShadow?2:1;for(let D=0;D<P;++D){const Y=t.dropShadow&&D===0,Q=Y?Math.ceil(Math.max(1,b)+s*2):0,q=Q*o;if(Y){c.fillStyle="black",c.strokeStyle="black";const ce=t.dropShadow,Se=ce.color,Qe=ce.alpha;c.shadowColor=wt.shared.setValue(Se).setAlpha(Qe).toRgbaString();const J=ce.blur*o,te=ce.distance*o;c.shadowBlur=J,c.shadowOffsetX=Math.cos(ce.angle)*te,c.shadowOffsetY=Math.sin(ce.angle)*te+q}else{if(c.fillStyle=t._fill?hl(t._fill,c,f,s*2):null,(I=t._stroke)!=null&&I.width){const ce=t._stroke.width*.5+s*2;c.strokeStyle=hl(t._stroke,c,f,ce)}c.shadowColor="black"}let Z=(y-S.fontSize)/2;y-S.fontSize<0&&(Z=0);const pe=((U=t._stroke)==null?void 0:U.width)??0;for(let ce=0;ce<m.length;ce++)w=pe/2,C=pe/2+ce*y+S.ascent+Z,t.align==="right"?w+=v-x[ce]:t.align==="center"&&(w+=(v-x[ce])/2),(O=t._stroke)!=null&&O.width&&this._drawLetterSpacing(m[ce],t,l,w+s,C+s-Q,!0),t._fill!==void 0&&this._drawLetterSpacing(m[ce],t,l,w+s,C+s-Q)}}_drawLetterSpacing(e,t,s,o,l,u=!1){const{context:c}=s,d=t.letterSpacing;let f=!1;if(qn.experimentalLetterSpacingSupported&&(qn.experimentalLetterSpacing?(c.letterSpacing=`${d}px`,c.textLetterSpacing=`${d}px`,f=!0):(c.letterSpacing="0px",c.textLetterSpacing="0px")),d===0||f){u?c.strokeText(e,o,l):c.fillText(e,o,l);return}let m=o;const y=qn.graphemeSegmenter(e);let x=c.measureText(e).width,v=0;for(let S=0;S<y.length;++S){const b=y[S];u?c.strokeText(b,m,l):c.fillText(b,m,l);let w="";for(let C=S+1;C<y.length;++C)w+=y[C];v=c.measureText(w).width,m+=x-v+d,x=v}}}const c0=new R4;class I4 extends P4{constructor(...e){const t=T4(e,"Text");super(t,So),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof rs?t.textureStyle:new rs(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let s=0,o=0;if(this._style.trim){const{frame:l,canvasAndContext:u}=c0.getCanvasAndContext({text:this.text,style:this._style,resolution:1});c0.returnCanvasAndContext(u),s=l.width,o=l.height}else{const l=qn.measureText(this._text,this._style);s=l.width,o=l.height}e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*o,e.maxY=e.minY+o}}Lt.add(Dy,$y);const L4=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<!-- Created with Inkscape (http://www.inkscape.org/) -->\r
\r
<svg\r
   width="174.61385mm"\r
   height="234.6797mm"\r
   viewBox="0 0 174.61385 234.6797"\r
   version="1.1"\r
   id="svg1"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   sodipodi:docname="gentil.svg"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#191919"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#bd2727ff"\r
     inkscape:document-units="mm"\r
     inkscape:zoom="0.72604517"\r
     inkscape:cx="331.24661"\r
     inkscape:cy="485.50698"\r
     inkscape:window-width="1920"\r
     inkscape:window-height="1017"\r
     inkscape:window-x="1912"\r
     inkscape:window-y="-8"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="layer1"\r
     showgrid="true">\r
    <inkscape:grid\r
       id="grid1"\r
       units="mm"\r
       originx="-17.307133"\r
       originy="-20.032634"\r
       spacingx="0.99999998"\r
       spacingy="1"\r
       empcolor="#0099e5"\r
       empopacity="0.30196078"\r
       color="#0099e5"\r
       opacity="0.14901961"\r
       empspacing="5"\r
       enabled="true"\r
       visible="true" />\r
  </sodipodi:namedview>\r
  <defs\r
     id="defs1" />\r
  <g\r
     inkscape:label="Calque 1"\r
     inkscape:groupmode="layer"\r
     id="layer1"\r
     transform="translate(-17.307132,-20.032634)">\r
    <path\r
       d="m 69.048457,20.142976 c -0.141111,0.105834 -1.234722,0.282223 -2.434166,0.352778 -2.504723,0.176389 -3.633611,0.740834 -4.445,2.293056 -0.352778,0.599722 -0.9525,1.622778 -1.411111,2.328333 -0.881945,1.340556 -2.046111,4.233334 -2.328334,5.891389 -0.105833,0.564445 -0.599722,2.2225 -1.093611,3.633611 -0.458611,1.446389 -1.093611,4.021667 -1.375833,5.785556 -0.282222,1.763888 -0.740833,3.421944 -1.023056,3.774721 -0.282222,0.3175 -0.599722,0.811389 -0.740833,1.093611 -0.141111,0.282223 0.07056,0.141112 0.458611,-0.352777 0.846667,-1.023056 0.9525,-0.740834 0.211667,0.670277 -0.282222,0.564445 -0.423333,1.093612 -0.282222,1.199445 0.105833,0.105833 -0.176389,0.811389 -0.635,1.516944 -0.740834,1.234722 -0.811389,1.27 -1.128889,0.564445 -0.176389,-0.388056 -0.881945,-0.987778 -1.516945,-1.305278 -1.093611,-0.529167 -1.305277,-0.529167 -2.434166,0.03528 -1.940278,0.917222 -4.233333,3.139722 -5.115278,4.974167 -0.670278,1.411111 -1.27,1.975555 -3.598333,3.457222 -3.033889,1.905 -5.750277,4.797777 -7.161388,7.584722 -0.458612,0.917222 -1.305278,2.116666 -1.869723,2.681111 -1.305277,1.340555 -3.139722,6.0325 -2.575277,6.596944 0.246944,0.246945 1.411111,0.423334 2.892777,0.388056 l 2.434167,-0.03528 -0.176389,1.093611 c -0.105833,0.599722 -0.352778,2.187222 -0.564444,3.563056 -0.176389,1.340555 -0.599723,2.751666 -0.917223,3.069166 -0.423333,0.458611 -0.493888,1.023056 -0.3175,2.257778 0.211667,1.763889 0.705556,2.610555 1.481667,2.610555 0.352778,0 0.423333,0.3175 0.246945,1.093611 -0.105834,0.635 -0.03528,1.199445 0.176388,1.340556 0.246945,0.141111 0.282223,0.987778 0.07056,2.681111 -0.176388,1.375833 -0.211666,2.822222 -0.105833,3.280833 0.246945,1.093611 -0.529167,3.774722 -1.340555,4.515556 -0.388056,0.3175 -0.670278,0.846666 -0.670278,1.199444 0,0.317504 -0.493889,0.740834 -1.234722,1.023054 -1.693334,0.59972 -2.081389,1.44639 -1.799167,4.1275 0.352778,3.35139 -0.282222,6.70278 -1.446389,7.69056 -1.128889,0.98778 -1.234722,2.61055 -0.282222,4.40972 0.3175,0.635 0.635,1.79917 0.705555,2.61056 0.529167,5.53861 0.529167,5.82083 -0.03528,6.0325 -0.3175,0.10583 -0.599722,0.21166 -0.670277,0.21166 -0.03528,0 -0.176389,-0.635 -0.3175,-1.44639 -0.176388,-1.02305 -0.423333,-1.51694 -0.917222,-1.62277 -0.529166,-0.14112 -0.705555,-0.49389 -0.705555,-1.30528 -0.03528,-2.11667 -2.575278,-6.17361 -3.633611,-5.75028 -1.023056,0.38806 -1.093611,2.54 -0.246945,4.86833 0.705556,1.79917 0.740834,2.2225 0.352778,2.96334 -0.246944,0.49389 -0.352778,1.30527 -0.246944,1.905 0.141111,0.70555 0,1.5875 -0.458612,2.57527 -0.388055,0.84667 -0.705555,2.2225 -0.705555,3.06917 0,1.51694 0,1.51694 -0.776111,0.9525 -2.081389,-1.44639 -2.187222,-1.44639 -1.940278,-0.0706 0.105833,0.70556 0.529167,1.72862 0.881945,2.25778 0.846666,1.16417 3.563055,7.51417 4.656666,10.83028 1.305278,3.98639 3.386667,7.83167 5.432778,9.91305 2.786944,2.89278 3.986389,2.46945 5.185833,-1.86972 1.058333,-3.81 0.917222,-5.57389 -0.635,-7.83166 -0.705556,-1.02306 -1.340556,-1.76389 -1.375833,-1.5875 -0.03528,0.17639 -0.176389,0.74083 -0.282223,1.27 -0.3175,1.37583 -0.670277,1.23472 -1.340555,-0.56445 l -0.564444,-1.55222 2.151944,0.17639 c 1.199444,0.0705 3.175,0.28222 4.374444,0.49389 2.434166,0.35278 3.739444,0.0705 4.303889,-1.05834 0.599722,-1.05833 0.458611,-2.08138 -0.3175,-2.8575 -0.881945,-0.88194 -1.305278,-1.94027 -2.010834,-4.7625 -0.246944,-1.16416 -0.846666,-2.75167 -1.305277,-3.52778 -0.705556,-1.16416 -0.811389,-1.69333 -0.564445,-2.99861 0.141111,-0.88194 0.529167,-2.15194 0.881945,-2.82222 1.164166,-2.18722 1.234722,-2.43417 1.234722,-3.52778 0,-1.23472 1.093611,-3.56305 2.116666,-4.58611 0.388056,-0.38805 0.705556,-0.98778 0.705556,-1.34055 0,-0.35278 0.246944,-0.9525 0.529167,-1.37584 0.3175,-0.45861 0.529166,-1.37583 0.458611,-2.11666 -0.03528,-0.74084 0.282222,-2.99862 0.705555,-5.04473 0.423334,-2.04611 0.9525,-4.58611 1.128889,-5.67972 0.246945,-1.19944 0.987778,-2.99861 1.905,-4.550832 0.846667,-1.375834 1.834444,-3.386667 2.187222,-4.445 0.352778,-1.058333 0.776111,-1.905 0.917222,-1.905 0.141112,0 0.529167,0.529167 0.846667,1.128889 0.3175,0.635 1.411111,2.434166 2.363611,3.951111 1.340556,2.046111 1.869722,3.280833 2.046111,4.691942 0.141111,1.05834 0.564445,2.32834 0.917222,2.82222 2.293056,3.24556 2.328334,4.37445 0.352778,7.09084 -0.670278,0.91722 -1.905,2.92805 -2.716389,4.445 -1.552222,2.96333 -1.552222,3.10444 -1.058333,9.03111 0.03528,0.28222 -0.105833,2.64583 -0.3175,5.22111 -0.352778,4.23334 -0.529167,4.97417 -1.658055,7.40834 -1.869723,3.95111 -1.940278,4.19805 -2.293056,7.65527 -0.211667,2.08139 -0.211667,4.09223 0.03528,5.89139 0.352778,2.61056 0.3175,2.92806 -0.917222,7.69056 -1.481667,5.57389 -1.516945,5.32694 1.199444,6.0325 0.881944,0.24694 1.658056,0.70555 1.905,1.12889 0.9525,1.79916 -0.599722,8.5725 -3.457222,14.99305 -1.058334,2.43417 -4.621389,7.16139 -5.185833,6.94972 -0.564445,-0.21166 -1.023056,0.14112 -1.693334,1.37584 -0.529166,0.9525 -1.058333,1.23472 -2.328333,1.34055 -0.246944,0.0353 -0.458611,0.21167 -0.458611,0.38806 0,0.17639 -0.3175,0.74083 -0.670278,1.27 -0.634999,0.88194 -0.634999,1.05833 -0.211666,1.905 0.458611,0.88194 0.352777,1.19944 -1.305278,4.72722 l -1.799166,3.81 -0.07055,5.46806 c -0.07056,7.76111 -0.458612,12.94694 -1.305278,17.85055 l -0.740834,4.30389 -1.552222,0.77611 c -0.846666,0.42333 -1.481666,0.84667 -1.375833,0.9525 0.07056,0.10583 -0.07056,0.81139 -0.352778,1.62278 -0.458611,1.30528 -0.458611,1.51694 0,1.86972 1.093611,0.77611 1.27,2.15195 0.917222,6.42056 -0.211666,2.25777 -0.493888,4.97416 -0.635,5.96194 -0.176388,1.02306 -0.211666,2.01083 -0.105833,2.15195 0.493889,0.74083 9.524999,4.7625 11.429999,5.07999 2.645833,0.45862 9.489722,-0.21166 11.006666,-1.09361 0.917222,-0.49388 1.058334,-0.84666 1.164167,-2.25777 0.07055,-1.19945 -0.105833,-2.01084 -0.599722,-2.82223 -0.776111,-1.27 -6.632222,-7.05555 -8.466667,-8.32555 -1.09361,-0.77611 -1.164165,-0.9525 -0.9525,-2.29306 0.141111,-0.81139 0.529167,-1.69333 0.9525,-1.97555 0.493889,-0.42334 0.776111,-1.19945 1.023056,-2.99861 0.388055,-3.21028 4.7625,-14.78139 8.290277,-21.94278 1.481667,-2.92806 2.822223,-6.17361 2.998611,-7.19667 0.635001,-3.38666 3.598334,-7.3025 6.138334,-8.07861 0.811388,-0.28222 1.552222,-0.81139 1.905,-1.41111 0.493888,-0.88194 0.740833,-0.98778 2.187222,-0.91722 2.081389,0.10583 3.139722,0.70555 6.35,3.56305 1.446388,1.30528 3.069166,2.43417 3.598333,2.54 0.529167,0.10584 1.199444,0.56445 1.516944,1.02306 0.846667,1.30528 3.245556,8.29028 3.527778,10.23055 0.282222,2.04612 1.516944,6.52639 1.940278,6.985 0.141111,0.14112 0.141111,0.74084 0,1.27 -0.176389,0.56445 -0.211667,1.09362 -0.105834,1.19945 0.105834,0.10583 0.03528,0.38805 -0.141111,0.635 -0.529166,0.635 -0.881944,2.99861 -0.529166,3.24555 0.176388,0.10584 0.246944,0.9525 0.176388,1.86973 -0.246944,2.50472 0.493889,7.86694 1.164167,8.60777 0.811389,0.91723 3.280833,1.16417 6.244177,0.67028 4.833056,-0.81139 6.596945,-0.81139 10.583333,-0.0353 2.610561,0.49389 5.185841,0.74084 8.219731,0.74084 3.98639,0 4.445,-0.0706 5.11528,-0.74084 0.56444,-0.56444 0.70555,-0.98777 0.52916,-1.83444 -0.10583,-0.56444 -0.38805,-1.23472 -0.56444,-1.48167 -0.17639,-0.24694 -2.04611,-0.88194 -4.1275,-1.41111 -2.11667,-0.52916 -4.02167,-1.16416 -4.30389,-1.37583 -0.52917,-0.42333 -2.50472,-1.48167 -4.974173,-2.71639 -3.421944,-1.65806 -5.679722,-4.19806 -4.974167,-5.53861 0.246945,-0.42333 0.105834,-1.27 -0.388055,-2.71639 -0.635,-1.905 -0.705556,-2.61056 -0.493889,-7.05556 0.141111,-2.71638 0.3175,-5.43277 0.423333,-5.99722 0.105834,-0.59972 0.3175,-3.38666 0.423334,-6.24416 0.141111,-3.13973 0.423333,-5.36223 0.635,-5.60917 0.599722,-0.56444 1.516944,-0.17639 3.280833,1.44639 1.552222,1.41111 2.504722,1.62278 2.504722,0.52917 0,-0.77612 -1.234722,-3.10445 -1.940278,-3.70417 -1.023055,-0.84667 -1.234722,-1.5875 -0.846666,-2.99861 0.211666,-0.74084 0.599722,-1.5875 0.881944,-1.83445 0.282222,-0.28222 0.493889,-0.81139 0.493889,-1.19944 0,-1.48167 3.139733,-0.59972 8.255003,2.39889 0.84667,0.49389 2.89278,0.59972 3.175,0.17639 0.10584,-0.17639 -1.05833,-1.37584 -2.54,-2.68111 -2.54,-2.29306 -6.84389,-4.79778 -8.255003,-4.79778 -0.3175,0 -0.705556,-0.17639 -0.811389,-0.35278 -0.105834,-0.21167 -0.670278,-0.35278 -1.234723,-0.35278 -0.811389,0 -1.058333,-0.21166 -1.375833,-1.12889 -0.317499,-0.84666 -0.493889,-1.02305 -0.811389,-0.70555 -1.128889,1.12889 -1.199445,0.0353 -0.352778,-4.62139 0.352778,-1.86972 1.128889,-3.06917 1.128889,-1.69333 0,1.5875 0.635,0.35277 0.776111,-1.55223 0.105833,-1.30527 0.423333,-2.29305 0.917222,-2.92805 2.751673,-3.42195 3.245563,-4.72722 3.245563,-8.71361 0,-1.72861 0.17639,-3.03389 0.42333,-3.28084 0.45861,-0.45861 0.49389,-3.56305 0.10584,-10.58333 -0.24695,-4.1275 -0.21167,-4.65667 0.3175,-4.65667 0.59972,0 0.77611,0.56445 1.05833,3.42195 0.24694,2.46944 1.16417,4.1275 3.66889,6.56167 2.18722,2.18722 3.03389,2.2225 1.94028,0.14111 -0.35278,-0.635 -1.02306,-1.905 -1.48167,-2.78695 -0.77611,-1.48166 -0.81139,-1.69333 -0.35278,-2.71639 0.3175,-0.67027 0.74083,-1.09361 1.16417,-1.09361 0.38805,0 1.19944,-0.17639 1.79916,-0.38805 2.01084,-0.74084 10.05417,1.65805 13.22917,3.91583 0.91722,0.635 1.23472,0.70556 2.36361,0.38806 0.74083,-0.21167 1.83444,-0.38806 2.46944,-0.38806 1.5875,0 4.97417,1.12889 6.70278,2.2225 1.34055,0.84667 1.94028,0.98778 5.29167,1.09361 5.78555,0.24695 15.98083,2.25778 19.685,3.91583 0.98777,0.42334 2.8575,0.88195 4.19805,0.98778 1.34056,0.14111 3.10444,0.56445 3.95111,0.9525 1.09361,0.56445 3.73945,1.02306 9.91306,1.76389 9.17222,1.16417 14.9225,1.62278 14.9225,1.30528 0,-0.49389 -3.66889,-2.01084 -10.58334,-4.445 -3.98639,-1.41111 -8.07861,-2.8575 -9.10166,-3.21028 -1.05834,-0.38805 -2.68111,-0.70555 -3.66889,-0.70555 -0.98778,0 -2.68111,-0.35278 -3.91584,-0.84667 -1.23472,-0.45861 -3.35138,-0.91722 -4.83305,-1.05833 -4.55083,-0.35278 -16.05139,-3.59834 -19.93194,-5.60917 -1.12889,-0.59972 -2.08139,-0.74083 -4.93889,-0.77611 -3.73945,0 -6.10306,-0.74084 -7.83167,-2.36361 -0.70556,-0.635 -1.16417,-0.70556 -4.445,-0.67028 -4.65666,0.10583 -11.21833,-1.27 -12.24138,-2.50472 -1.44639,-1.72861 -0.38806,-3.31611 3.31611,-5.00945 1.76389,-0.81139 2.96333,-1.79917 2.61055,-2.18722 -0.10583,-0.0706 -1.55222,0.17639 -3.24555,0.59972 -3.4925,0.88194 -6.49111,2.54 -8.21972,4.51556 -1.37584,1.65805 -2.32834,1.97555 -3.13973,1.05833 -0.49389,-0.56444 -0.52916,-0.84667 -0.21166,-1.5875 0.84666,-1.76389 0.21166,-6.6675 -1.12889,-8.78417 -0.705564,-1.12889 -1.340564,-6.87917 -1.09362,-9.63083 0.246945,-2.2225 0.176389,-2.54 -0.493888,-3.21028 -0.670278,-0.67028 -0.740834,-1.16417 -0.776112,-4.30389 0,-2.46944 -0.246944,-4.23333 -0.705555,-5.67972 C 96.988477,101.5993 96.600422,99.835411 96.45931,98.812356 96.318199,97.7893 95.965422,96.484022 95.683199,95.919578 95.400977,95.319856 94.836533,93.450133 94.483755,91.7568 c -0.599722,-3.033889 -0.599722,-3.139722 0.03528,-3.704166 0.811389,-0.740834 1.622778,-3.316111 1.340555,-4.339167 -0.105833,-0.423333 0.03528,-1.869722 0.282223,-3.210278 0.282222,-1.340555 0.529166,-3.245555 0.529166,-4.233333 0,-1.763889 0,-1.799167 0.705556,-1.164167 0.599722,0.529167 0.811389,0.564445 1.763889,0.176389 1.763896,-0.740833 2.116676,-1.516944 1.587506,-3.4925 -0.49389,-1.905 -1.05834,-3.069166 -1.69334,-3.457222 -1.093611,-0.705555 -1.305278,-2.116666 -0.776111,-4.974166 0.917222,-4.7625 0.599722,-8.149167 -0.846667,-8.748889 -0.3175,-0.105833 -1.904999,-0.3175 -3.563055,-0.458611 l -2.963333,-0.211667 -0.105834,-3.175 c -0.141123,-3.845214 -0.4939,-5.150492 -1.834456,-7.302436 -1.375833,-2.151944 -2.575288,-2.928055 -4.480288,-2.822222 l -1.552222,0.07056 0.07055,-1.340555 c 0.07056,-1.975556 -0.246939,-3.598334 -1.305273,-6.173612 -0.493889,-1.27 -0.987777,-2.610555 -1.058333,-2.963333 -0.282222,-1.375833 -1.058333,-3.175 -1.834444,-4.233333 -0.458611,-0.599722 -0.811389,-1.27 -0.811389,-1.446389 0,-0.388056 -3.139722,-3.351389 -4.092222,-3.845278 -0.811389,-0.458611 -4.550834,-0.881945 -4.833056,-0.564445 z m 26.35251,79.798332 c -0.282222,0.317502 -0.776111,-0.423333 -0.599722,-0.917222 0.211667,-0.529166 0.246944,-0.493889 0.458611,0.105834 0.141111,0.352777 0.211667,0.740833 0.141111,0.811388 z m -20.249454,68.615272 1.5875,0.74084 0.599722,2.99861 c 1.375833,6.73805 1.164166,11.04194 -0.635,12.73528 -0.458611,0.42333 -0.846667,1.02305 -0.846667,1.30527 0,0.28223 -0.3175,0.91723 -0.705555,1.48167 -0.811389,1.16417 -1.023056,4.02167 -0.388056,5.57389 0.246945,0.56444 0.388056,1.79917 0.3175,2.75167 l -0.105833,1.72861 -2.116667,-3.13972 c -1.834444,-2.75167 -5.609166,-6.56167 -6.491111,-6.56167 -0.141111,0 -0.458611,-0.38806 -0.670278,-0.88195 -0.246944,-0.49388 -0.811388,-1.05833 -1.305277,-1.23472 -0.493889,-0.17639 -0.917223,-0.56444 -0.917223,-0.88194 -0.211666,-2.64584 -0.176388,-2.82222 1.128889,-4.23334 2.116667,-2.29305 7.373056,-11.71222 7.373056,-13.22916 0,-0.45861 0.881944,-0.24695 3.175,0.84666 z"\r
       id="path3"\r
       style="fill:currentColor;fill-opacity:1;stroke:none;stroke-width:0.0352778" />\r
  </g>\r
</svg>\r
`,F4=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<svg\r
   width="2342"\r
   height="3750"\r
   viewBox="0 0 2342 3750"\r
   version="1.1"\r
   id="svg1"\r
   sodipodi:docname="mechant.svg"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <defs\r
     id="defs1" />\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#ffffff"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#d1d1d1"\r
     inkscape:zoom="0.21733333"\r
     inkscape:cx="1171.0123"\r
     inkscape:cy="1875"\r
     inkscape:window-width="1920"\r
     inkscape:window-height="1017"\r
     inkscape:window-x="-"\r
     inkscape:window-y="-8"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="svg1" />\r
  <path\r
     fill-rule="nonzero"\r
     fill="#000000"\r
     fill-opacity="1"\r
     d="m 1179.4102,3716.9922 c -17.3907,-74.8555 -35.9414,-120.9844 -69.0313,-171.7774 -30.6094,-46.9726 -82.0898,-92.3789 -115.62499,-102 -9.15235,-2.625 -10.1875,-2.039 -14.46875,8.211 -2.53907,6.0703 -9.29688,27.6328 -15.01954,47.9101 -11.40625,40.4102 -25.3125,77.6563 -29,77.6563 -1.29296,0 -4.19531,-12.1133 -6.44921,-26.918 -6.85938,-45.0625 -25.47266,-111.832 -39.1875,-140.5703 -15.55469,-32.5898 -37.56641,-58.125 -60.26954,-69.918 -13.26171,-6.8906 -21.32421,-8.6875 -39.5039,-8.7929 -26.72266,-0.1563 -41.25781,5.8086 -60.45703,24.8164 -14.30469,14.164 -16.1836,14.9531 -16.28516,6.8594 -0.14062,-11.0079 -12.54687,-33.0313 -25.9375,-46.0235 -52.17578,-50.6328 -129.63672,-52.4961 -178.97266,-4.3008 -10.42578,10.1836 -21.48828,22.1836 -24.58203,26.6719 -5.5625,8.0625 -5.60937,7.9258 -4.17187,-11.4219 0.92187,-12.4336 11.65625,-51.1172 29.42578,-106.0351 62.49609,-193.1406 112.14844,-389.7969 155.69141,-616.6485 18.38671,-95.7812 35.44921,-222.3007 35.53125,-263.4609 l 0.0391,-17.1289 h -13.9961 c -32.30859,0 -86.14843,-21.6016 -135.19531,-54.2305 C 451.2891,2202.9102 384.21879,2073.8789 376.1602,1931.6914 l -2.07813,-36.6133 -92.28125,-185.9687 C 231.04687,1606.8203 167.20703,1474.6797 139.93359,1415.4609 76.816406,1278.4102 44.253906,1214.0586 17.546875,1173.6094 1.621094,1149.4805 -2.457031,1141.1289 1.300781,1140.3281 c 9.125,-1.9375 67.613281,12.9532 128.253909,32.6524 63.97656,20.789 114.91015,41.039 149.80859,59.5781 11.91406,6.3203 22.19141,10.9727 22.83203,10.332 0.64453,-0.6406 -6.85156,-34.75 -16.65625,-75.8008 -39.96484,-167.3398 -42.8164,-188.92964 -42.79297,-324.23043 0.0117,-82.66015 1.15625,-109.98046 5.83985,-139.60937 5.70703,-36.10156 23.48047,-112.28125 28.19531,-120.85156 2.13672,-3.87891 46.05469,69.26172 73.13281,121.80078 4.625,8.97265 11.3086,19.98047 14.85938,24.46094 l 6.44922,8.14843 7.98046,-17.9375 C 383.59375,709.01172 394.86328,683.32031 404.25,661.78125 442.76172,573.42969 496.08984,474 550.375,389.35156 c 9.78125,-15.26172 42.82031,-62.97265 73.42187,-106.04297 92.47657,-130.14843 130.32813,-180.25 132.13282,-174.89843 0.52734,1.57031 -3.46485,20.37109 -8.8711,41.78906 C 721.60937,251 718.21094,332 737.92187,367.83984 c 6.26954,11.39844 9.09766,13.5 19.33985,14.35157 15.53515,1.29687 20.58203,-1.5 82.62109,-45.72266 88.19531,-62.85938 122.33594,-82.6875 262.98829,-152.70703 50.1602,-24.97266 103.6289,-53.5 118.8008,-63.40234 40.8789,-26.64063 78.0976,-63.898442 97.6562,-97.757818 18.8321,-32.570312 19.3516,-32.203124 22.7032,16.007813 4.6406,66.839845 14.1093,105.718745 36.3984,149.460935 39.6289,77.75781 131.8516,149.3711 209.5,162.69141 26.8906,4.60937 41.2109,1.53906 61.5508,-13.20313 14.6797,-10.6289 35.6992,-47.6875 45.5781,-80.34765 10.5898,-35.05078 6.3516,-154.75 -7.5391,-212.890628 -0.9687,-4.039062 -0.3476,-7.339843 1.3711,-7.339843 5.0391,0 37.711,72.480471 57.3477,127.238281 9.9805,27.82031 29.4219,85.8125 43.2031,128.88281 29.3477,91.63672 46.9688,137.10938 72.8789,188.08985 19.2891,37.9375 83.0508,148.6289 89,154.48828 2.2188,2.1914 5.0313,0.57031 8.5195,-4.89844 19.4883,-30.47266 67.8711,-61.78125 106.2383,-68.76172 30.1407,-5.46875 31.6211,-2.66016 10.6211,20.03125 -22.9492,24.77734 -41.9375,63.57813 -49.4179,100.9375 -6.1602,30.76172 -5.543,104.87109 1.8984,228.39063 6.1016,101.17189 1.6406,283.24219 -8.4883,346.44139 l -1.9297,12.0078 35.5469,-20.2773 c 63.1797,-36.0625 178.2109,-81.5899 255.332,-101.082 17.0508,-4.3086 31.5782,-7.3204 32.3008,-6.6875 0.7188,0.6289 -6.7226,11.8085 -16.5312,24.8476 -42.1719,56.0508 -67.0704,92.3399 -95.8086,139.6328 -20.2422,33.3086 -84.3907,159.8594 -122.0118,240.6875 -34.7109,74.5703 -100.9687,208.5625 -127.4492,257.7422 l -23.3711,43.3789 8.5899,35.9297 c 16.332,68.2813 18.1992,120.6406 6.5,181.9883 -25.9492,136.0625 -111.0977,238.8125 -220.3477,265.8828 -25.1523,6.2305 -61.0625,6.8594 -84.3633,1.4805 -9.0976,-2.1016 -17.3789,-2.9805 -18.3984,-1.961 -4.8398,4.8282 8.7109,166.6875 23.0195,275.0703 17.5508,132.9375 27.0586,180.9141 70.461,355.5157 28.9687,116.5781 29.8789,119.8476 68.6992,247.1328 18.5117,60.7148 32.0703,110.7187 31.4101,115.8242 l -1.1796,8.9883 -4.2696,-8.5586 c -7.6523,-15.3281 -27.9804,-24.0664 -55.9804,-24.0664 -21.9102,0 -27.3789,1.3554 -49.5,12.2851 -29.7813,14.7227 -53.0586,38.4688 -58.8204,60.0157 -2.0898,7.7851 -4.5898,14.0351 -5.5585,13.8867 -0.9727,-0.1485 -9.1524,-9.2617 -18.1797,-20.2461 -20.6914,-25.1797 -39.4102,-35.2813 -69.2227,-37.336 -60.5976,-4.1835 -103.5703,40.6055 -123.25,128.4571 -9.0703,40.4883 -17.8281,95.0742 -17.8594,111.2929 -0.01,5.8321 -1.3086,10.6016 -2.8906,10.6016 -4.5898,0 -24.7695,-44.2031 -37.9805,-83.1992 -6.6875,-19.7383 -14.9375,-41.3984 -18.3476,-48.1367 l -6.1992,-12.2461 -11.3125,4.7226 c -43.5196,18.1836 -98.4805,81.2813 -124.461,142.8907 -14.9687,35.4882 -28.9883,82.4218 -37.3086,124.8437 -3.8711,19.7422 -8.1406,37.9609 -9.5,40.4883 -1.4882,2.8008 -5.8398,-9.9649 -11.1093,-32.625 z m 252.4492,-526.6289 c 3.8906,-143.336 6.4297,-182.332 19.8515,-305.0625 18.1993,-166.4805 34.3594,-261.8906 58.8282,-347.4727 14.3515,-50.1875 37.332,-110.7578 52.6015,-138.6679 5.3985,-9.8711 7.5391,-15.7383 4.7696,-13.0508 -6.1797,6.0117 -51.3204,90.9023 -63.0313,118.5195 -56.9883,134.5508 -90.5781,340.2422 -97.3281,596.0117 -3.1602,119.4805 5.8008,284.1328 17.1094,314.8203 1.3281,3.6055 2.7382,-17.6718 3.1289,-47.2812 0.3906,-29.6094 2.2304,-109.625 4.0703,-177.8164 z m -476.23831,206.4961 c 0,-2.168 2.36719,-23.0938 5.25782,-46.4922 4.29687,-34.7774 4.93359,-63.4024 3.49218,-156.7422 -1.72656,-111.3477 -5.07812,-159.8398 -20.32031,-293.6406 -22.0625,-193.7344 -77.27344,-378.336 -148.32812,-495.9727 -9.19532,-15.2304 -17.26172,-27.6914 -17.92188,-27.6914 -0.66016,0 3.71484,10.6485 9.72266,23.6602 36.0039,77.9804 83.30859,259.0898 109.29297,418.4375 28.6875,175.9179 46.22265,350.1601 50.98046,506.5312 1.26563,41.7227 3.54688,75.8594 5.06641,75.8594 1.51563,0 2.75781,-1.7773 2.75781,-3.9492 z m 707.76951,-177.1328 c -3.2617,-23.3282 -9.0117,-67.375 -12.789,-97.8789 -12.5821,-101.6602 -23.0625,-175.3789 -37.543,-264.2774 -7.8984,-48.4531 -16.0703,-100.207 -18.168,-115.0117 -9.4101,-66.6992 -7.3203,-3.0469 3.7891,115.0117 8.3789,88.9766 17.1406,155.0156 30.7617,231.7617 16.3399,92.086 35.4883,177.8164 38.8594,173.9766 0.5586,-0.6406 -1.6406,-20.2539 -4.9102,-43.582 z m -949.50779,-83.1953 c 16.32422,-93.6016 27.94922,-209.0079 31.05078,-308.3243 1.99219,-63.6757 -0.17187,-59.7031 -12.4375,22.836 -11.72656,78.9179 -28.77734,273.2695 -27.84375,317.375 0.34766,16.3008 1.54688,12.1523 9.23047,-31.8867 z m 514.98829,-8.211 c 22.2187,-19.0234 25.4883,-43.332 8.8008,-65.5586 -16.1133,-21.4648 -45.2617,-26.3398 -66.6133,-11.1367 -38.3867,27.3398 -18.0898,88.168 29.4414,88.168 12.3984,0 17.2617,-1.9649 28.3711,-11.4727 z m -13.7617,-365.2578 c 18.5625,-10.875 33.1406,-28.2422 45.1797,-53.793 8.6718,-18.3906 10.0625,-24.9882 9.9922,-47.4609 -0.1016,-30.0078 -6.9805,-48.8867 -26.5196,-72.7383 -42.4531,-51.8008 -123.2617,-33.3008 -142.8711,32.6914 -6.3203,21.2891 -6.3906,61.8086 -0.1523,82.8281 16.9101,56.9336 70.3711,84.2618 114.3711,58.4727 z m 110.8203,-103.7031 c 13.6289,-29.9688 22.25,-69.7578 22.4609,-103.5899 0.1602,-26.8281 -0.9687,-33.4804 -8.3906,-49.5078 -18.2109,-39.3125 -52.2109,-64.4336 -90.9414,-67.2031 -21.3672,-1.5273 -22.9492,-1.0977 -49.7695,13.5195 -34.418,18.7617 -47.1289,19.6836 -67.5703,4.8711 -45.0391,-32.6289 -88.5391,-30.6875 -124.0782,5.5196 -7.82419,7.9726 -15.46873,14.5 -16.98826,14.5 -3.83984,0 -17.79687,-31.668 -20.48047,-46.4688 -2.41796,-13.3203 0.16016,-28.5703 4.82422,-28.5703 1.61328,0 6.10938,9.5391 9.99219,21.1992 3.87891,11.6719 7.77344,21.2109 8.65234,21.2109 0.87891,0 8.46878,-5.789 16.85938,-12.8789 21.6719,-18.2617 43.0195,-26.9296 66.3906,-26.9296 16.3203,0 24.3086,2.3906 51.0313,15.1992 l 31.6875,15.1992 24.4297,-10.4688 c 55.5898,-23.8007 110.25,-13.0898 153.3711,30.0274 16.539,16.543 32.2812,44.8125 35.9101,64.4726 1.8594,10.0704 2.5899,10.8594 4.8516,5.3204 30.8398,-75.6719 66.789,-146.0704 97.039,-190.0313 23.0274,-33.4492 56.0079,-63.6211 79.6172,-72.8398 17.2735,-6.7383 24.9414,-7.4883 81.0625,-7.9297 66.7188,-0.5196 81.5196,-2.8907 114.4492,-18.2696 44.629,-20.8515 80.8985,-57.6914 105.6993,-107.3515 26.0507,-52.1797 34.0898,-90.3711 34,-161.5 -0.078,-57.7891 -3.25,-84.5899 -19.6993,-166.3985 -21.1679,-105.3515 -21.4609,-171.0312 -1.289,-290.3593 19.039,-112.6211 19.1992,-140.1211 1.2578,-213.6133 -25.0586,-102.6367 -62.8984,-173.5195 -126.4375,-236.8399 -57.4922,-57.289 -123.7109,-96.88668 -205.8594,-123.07809 C 1489.1992,921 1462.5703,916.85156 1422.0781,918.5 c -38.1992,1.57031 -54.3086,7.64062 -80.7578,30.46094 -25.0586,21.61718 -48.6406,78.78906 -76.5586,185.61716 l -7.6015,29.0703 -13.4297,-22.5898 c -30.0899,-50.6602 -95.6211,-94.6602 -190.2305,-127.7383 -85.77734,-29.99999 -150.83984,-40.78905 -244.69922,-40.62108 -76.19531,0.15234 -114.875,5.90234 -168.39062,25.01953 C 568,1023.6016 519.32422,1062.7109 494.09375,1115.3008 c -26.625,55.4805 -32.33984,108.2773 -29.84375,275.6875 1.03125,69.0898 1.22656,124.1523 0.43359,122.3515 -1.96875,-4.4609 -23.82422,-162.3203 -27.78125,-200.6484 -4.76953,-46.2617 -4.02734,-122.2812 1.50782,-154.0117 5.64453,-32.3594 24.76562,-89.2305 37.05468,-110.1992 11.125,-18.9805 42.41407,-56.30081 60.10157,-71.67191 56.8164,-49.38672 122.34375,-72.59765 223.70312,-79.23828 48.76953,-3.19922 56.28906,-4.39844 54.91016,-8.80859 -0.87891,-2.82031 -8.45703,-21.89063 -16.84375,-42.39063 -16.83985,-41.16015 -28.78516,-89.58984 -34.03516,-137.97265 -4.05859,-37.38672 -4.15625,-96.07813 -0.17578,-105.33985 2.27344,-5.29687 2.84766,-4.29687 3.03516,5.26172 0.32812,16.98828 18.11718,113.19141 27.84375,150.60938 13.96875,53.71093 46.52343,139.12109 53.20312,139.55078 1.30859,0.0898 17.79688,2.10937 36.63672,4.5 18.84375,2.3789 34.63672,4.00781 35.10156,3.62109 0.46485,-0.39062 -3.46875,-11.17187 -8.73828,-23.96094 -19.42969,-47.10937 -42.05859,-133.53906 -50.56641,-193.12109 -9.62109,-67.39062 -15.23828,-183.39844 -9.0664,-187.21094 1.4375,-0.88672 6.70312,25.8125 11.69922,59.35157 23.42968,157.30859 33.05078,203.39843 59.07422,283.01171 22.79296,69.73829 15.39062,61.48829 71.80859,80.06641 68.50395,22.57031 126.62505,52.65234 179.18355,92.76172 15.2188,11.6211 29,21.1211 30.6094,21.1211 1.6602,0 1.8711,-6.7109 0.4805,-15.5 -1.3399,-8.5195 -4.1289,-42.66016 -6.1992,-75.85157 -4.211,-67.67969 -13.3907,-162.50781 -23.0196,-237.94922 -3.5312,-27.6914 -5.8125,-50.96094 -5.0625,-51.71094 2.6329,-2.6289 21.5235,63.10157 27.9414,97.16016 10.8399,57.55078 13.3516,89.08203 15.2188,190.87109 1.582,86.71098 2.4922,99.51958 8.0195,112.32028 3.5235,8.1485 7.4102,13.1289 8.9102,11.418 1.4726,-1.6601 6.0625,-16.2383 10.1914,-32.3906 8.3789,-32.7578 21.4922,-68.63674 43.7187,-119.67971 23.7618,-54.58984 26.293,-68.78906 26.3008,-147.85937 0,-72.57813 -3.4883,-115.6875 -16.6289,-205.55078 -8.9492,-61.12891 -38.0312,-207.4375 -51.8906,-261.00782 -0.9414,-3.62109 0.7617,-2.21093 3.8008,3.16797 27.3593,48.26172 59,171.13282 77.75,301.89063 16.039,111.92969 17.7187,172.16015 6.4609,231.65234 -2.5508,13.45703 -4.6328,24.53906 -4.6328,24.62891 0,0.0781 10.9297,-5.17969 24.293,-11.69922 28.3984,-13.85156 65.2773,-22.72266 94.457,-22.72266 48,0 110.8711,16.92188 167.3633,45.05078 107.2695,53.40235 184.0195,129.41013 239.457,237.17193 23.1524,45 22.8399,41.4101 -4.0781,-47.3125 -30.4492,-100.32818 -36.75,-134.62896 -36.5625,-199.01958 0.1133,-39.21094 1.5117,-57.82031 5.1211,-68.50781 l 4.9609,-14.67188 2.2305,26.08984 c 6.1992,72.40235 17.6484,138.17969 34.539,198.40233 19.6016,69.8867 42.5704,175.5899 48.879,224.8672 3.621,28.2422 6.9531,74.7422 7.4101,103.3399 0.4609,28.6093 1.8399,50.2304 3.0703,48.0507 3.5391,-6.3007 21.5899,-120.7187 25.5508,-161.9414 5.9102,-61.6679 7.8984,-226.61716 3.4492,-287.11716 -7.3398,-99.88282 -29.6797,-190.25 -63.3789,-256.3711 l -14.832,-29.10937 -0.2188,22.83984 c -0.3007,31.21094 -5.9492,82.60938 -9.8007,89.21094 -2.2774,3.89062 -3.1875,-0.53125 -3.2696,-15.80078 -0.2773,-54.83985 -15.8906,-108.83985 -55.6484,-192.5 -28.582,-60.14063 -49.2813,-109.46875 -60.2617,-143.55078 -3.1797,-9.8711 -6.2383,-18.48828 -6.8086,-19.14844 -0.5703,-0.67188 -7.3516,4.20703 -15.0586,10.83984 -17.2422,14.8086 -53.8321,32.5586 -76.9922,37.34766 -24.9688,5.17187 -69.1797,4.40234 -95.8594,-1.66797 -44.8008,-10.19141 -83.2305,-29.62109 -128.289,-64.87109 -62.4219,-48.83985 -93.2305,-93.89063 -108.1211,-158.08985 -2.7305,-11.73828 -5.4883,-21.89062 -6.1485,-22.55078 -0.6523,-0.64844 -13.3906,5.44141 -28.2929,13.53906 -14.8985,8.10157 -59.3985,28.65235 -98.879,45.66016 -174.10152,75.03125 -254.00386,120.72266 -363.22261,207.74219 -27.48047,21.89844 -55.1836,41.98828 -61.56641,44.66015 -29.54687,12.33985 -66.04687,-8.82031 -87.19531,-50.55078 -8.75391,-17.26953 -18.125,-57.89062 -18.33985,-79.48047 l -0.13671,-14.00781 -7.89063,22.83985 c -17.38281,50.32031 -21.99219,78.25 -21.80859,132.13671 0.35937,104.04297 24.70312,220.21094 67.28906,321.10157 18.46875,43.76172 18.64453,44.32031 13.90625,44.32031 -4.48047,0 -25.25391,-32.60938 -41.46875,-65.08984 -23.32422,-46.73047 -51.96094,-131.92969 -66.39844,-197.55079 -7.16797,-32.58984 -12.86328,-95 -10.41406,-114.17968 l 2.08203,-16.32813 -13.63281,22.83985 c -31.75391,53.17968 -63.24219,126.92968 -97.83594,229.16015 -26.28906,77.66797 -34.85547,96.83985 -50.46484,112.91797 -14.48438,14.91016 -27.87891,15.98047 -41.14063,3.26953 l -9.02344,-8.64844 1.48047,11.09766 c 0.81641,6.10156 3.76953,34.58203 6.5625,63.29297 2.79297,28.71875 9.60938,82.30855 15.14844,119.08985 9.47266,62.8789 10.16406,73.918 11.5625,184.3398 0.82031,64.6094 0.75781,116.7305 -0.13281,115.8282 -1.8711,-1.8789 -9.66016,-66.4805 -17.10938,-141.9297 C 367.98047,1046.4102 353.51953,961.58984 326.375,865.69922 317.48437,834.30078 308.64844,802 306.74219,793.92187 c -5.32813,-22.52343 -1.75,137.27735 4.45703,199.01954 6.73047,66.99999 18.66406,146.99999 30.90625,207.17969 11.53125,56.6875 11.94922,58.207 46.29687,167.8281 58.89063,187.9727 70.33594,263.5508 66.24219,437.4102 -1.89844,80.4492 -1.42969,94.2695 4.52344,133.7617 17.55078,116.418 61.64453,200.2383 134.25781,255.2187 45.15234,34.1915 91.67969,50.8711 151.75391,54.4219 49.69922,2.9297 58.85156,6.5196 89.80078,35.168 21.3789,19.8008 68.35547,80.6797 107.24609,138.9805 35.01563,52.5 72.19534,128.8711 92.39454,189.7812 l 17.25,52.0391 1.9375,-28.1211 c 1.4531,-21.0391 4.1211,-32.5899 10.6406,-45.9102 22.8399,-46.6679 83.3594,-77.1679 134.5508,-67.8086 54.8984,10.0313 93.3086,47.8985 105.3203,103.8399 8.9883,41.8789 10.9414,49.7578 12.3399,49.7578 0.8086,0 4.9804,-7.707 9.2695,-17.1289 z m -159.8594,-285.9375 c -29,-7.5508 -63.1211,-34.8516 -80.9414,-64.7617 -8.3594,-14.0196 -11.707,-17.1016 -16.9375,-15.6094 -3.5898,1.0195 -23.7812,3.5195 -44.8711,5.539 -21.082,2.0313 -38.33202,4.9297 -38.33202,6.4493 0,7.6406 -7.60937,1.1523 -13.01953,-11.0977 -23.05078,-52.1719 2.92187,-130.7226 50.54295,-152.8516 18.8594,-8.7617 33.6602,-7.8398 51.0469,3.1915 24.3633,15.4375 35.1211,39.8789 41.832,95.0078 1.8594,15.25 5.6211,34.3398 8.3477,42.4218 6.3515,18.75 24.8828,44.0586 38.3711,52.3907 17.582,10.8593 24.1211,11.1484 38.332,1.75 25.8477,-17.1016 42.2969,-49.3321 48.6172,-95.2032 4.793,-34.75 11.6328,-54.1992 25.4297,-72.2773 l 11.5508,-15.1211 -8.3985,-7.2187 c -16.9101,-14.543 -1.1601,-14.9415 32.7305,-0.8399 41.1484,17.1367 59.3906,41.7969 68.1992,92.2383 5.211,29.7891 1.8594,69.6601 -7.3594,87.4609 -5.0312,9.7383 -5.6992,10.0782 -8.1914,4.0977 -1.5,-3.5664 -5.6211,-13.4492 -9.1601,-21.9375 l -6.4297,-15.4414 -15.6406,6.9219 c -15.9883,7.0781 -45.8203,9.75 -58.1602,5.1992 -5.75,-2.1094 -7.2187,-0.4492 -11.0703,12.5898 -6.1602,20.8711 -22.0469,40.7305 -39.418,49.2578 -16.5,8.1016 -42.4023,11.6602 -57.0703,7.8438 z m 158.2383,-113.9922 c 23.1133,-16.668 24.582,-48.5195 3.2227,-69.8906 -16.211,-16.1993 -26.4297,-16.2188 -41.6524,-0.09 -19.6992,20.8906 -26.3789,49.5 -15.2578,65.3711 9.8594,14.0899 37.2891,16.4414 53.6875,4.6094 z m -255.8789,1.1797 c 8.5508,-3.5781 13.1406,-8.6094 18.1406,-19.9102 7.4688,-16.8789 6.4805,-30.4375 -3.6601,-50.1992 -17.2813,-33.6992 -45.5586,-37.0781 -64.9688,-7.7812 -17.1211,25.8515 -16.2812,46.3203 2.6484,64.4531 7.1993,6.8984 26.3399,16.6562 35.4688,18.0781 0.5,0.078 6.0703,-2.0117 12.3711,-4.6406 z m -385.56251,-65.1289 c -22.03125,-5 -47.78907,-17.0391 -69.1836,-32.3399 -17.65234,-12.6211 -45.46875,-49.0195 -60.24609,-78.832 -17.97656,-36.2695 -17.69922,-41.1367 0.93359,-16.3086 48.14453,64.1406 95.76953,97.1406 167.28125,115.8906 18.02735,4.7188 27.52735,8.6602 25.58594,10.5977 -5.19141,5.1914 -43.3125,5.7812 -64.37109,0.9922 z m 926.86331,-3.4024 c -37.211,-8.0976 -88.6914,-33.207 -105.9492,-51.6797 -5.2305,-5.5976 -8.9727,-10.707 -8.3204,-11.3593 0.6485,-0.6485 14.1602,3.2226 30.0196,8.6015 66.8593,22.6602 132.289,27.9805 175.6679,14.3086 41.6016,-13.1094 92.711,-47.6289 120.6914,-81.5078 13.4493,-16.2812 15.8204,-12.6211 5.3204,8.1797 -44.0704,87.3086 -130.4805,132.3984 -217.4297,113.457 z m -395.0196,-32.7187 c 5.2696,-20.5313 8.2383,-114.668 4.8399,-153.7305 -3.6719,-42.0898 -2.0195,-105.2695 2.9805,-114.1992 1.8085,-3.2383 6.1484,5.9609 13.5703,28.8086 6,18.4609 13.3398,39.3203 16.3203,46.3633 l 5.4062,12.789 7.3711,-11.9218 c 18.8906,-30.5586 127.1602,-124.4883 232.0313,-201.2969 167.7578,-122.8633 214.2695,-150.0508 256.6797,-150.0508 22.6914,0 33.6992,9.3789 33.6992,28.7187 0,17.2813 -12.3008,33.4102 -44.0508,57.7383 -14.0469,10.7735 -30.8086,24.4922 -37.2383,30.5117 -11.1289,10.3907 -11.1914,10.6016 -1.5,4.1407 24.6914,-16.4297 93.0586,-49.3321 102.5078,-49.3321 15.8516,0 10.9922,9.3829 -11.5781,22.3516 -124.8906,71.7813 -165.8711,100.8984 -235.0508,167.0313 -24.0976,23.039 -53.5586,48.8398 -65.4687,57.3398 l -21.6524,15.4492 14.25,4.1992 c 26.711,7.8907 61.711,11.8789 88.2305,10.0586 67.9727,-4.6562 113.3828,-51.289 135.0117,-138.6562 4.1602,-16.7813 9.3086,-32.6133 11.4414,-35.1914 3.9492,-4.7617 35.1172,-15.5117 56.7188,-19.5586 l 11.8984,-2.2305 -1.9375,35.457 c -4.4805,82.4414 -14.3398,131.7618 -34.8125,174.1329 -45.7305,94.6601 -168.3984,138.3593 -277.6992,98.9296 -42.5,-15.332 -90.9688,-54.0898 -113.1797,-90.5312 -6.9883,-11.4688 -8.1602,-12.1914 -11.2617,-6.8984 -26.3164,44.8281 -66.0664,65.5468 -101.8985,53.1093 l -13.5898,-4.7304 0.4883,42.7617 c 0.5312,46.457 -4.6875,72.5078 -17.4883,87.2265 -6,6.9024 -6.5391,7.0313 -5.0391,1.211 z M 1629.5,2047.7383 c 14.4297,-5.1289 33.1094,-13.3399 41.5,-18.2578 19.5117,-11.4414 51.1602,-40.8086 59.2109,-54.9492 5.2696,-9.2696 4.0977,-8.5625 -7.6992,4.6484 -16.4023,18.3789 -46.2109,40.1406 -73.5703,53.7305 -26.3828,13.1093 -37.6016,16.4609 -73.6719,22.0312 l -30.7304,4.7383 29.3593,-1.3086 c 21.461,-0.9609 36.4297,-3.8203 55.6016,-10.6328 z m -896.38281,28.293 c -45.44141,-11.1719 -85.6875,-31.5196 -118.67969,-60 -33.39453,-28.8399 -64.13672,-85.75 -77.66016,-143.793 -6.39843,-27.457 -18.75781,-103.457 -17.09375,-105.1172 2.60938,-2.6094 49.9961,10 59.69532,15.8789 10.66015,6.4688 11.28515,7.7695 28.79296,59.8711 11.84766,35.2695 24.22657,56.1289 44.92188,75.6992 45.03516,42.5899 113.66797,55.7695 180.57031,34.6797 l 17.51953,-5.5195 -16.6914,-9.1289 c -21.45313,-11.7305 -38.53125,-25.7618 -82.77735,-68.0118 -59.21875,-56.5585 -87.95703,-76.1406 -191.6914,-130.6289 -31.85157,-16.7421 -57.91407,-31.6601 -57.91407,-33.1718 0,-1.5078 3.64454,-4.1289 8.10157,-5.8203 11.37109,-4.3282 33.42968,3.3007 85.69922,29.621 23.77734,11.9688 43.23046,21.25 43.23046,20.6094 0,-0.6406 -20.92187,-14.9297 -46.49218,-31.75 -48.83594,-32.1406 -58.57422,-40.5195 -64.14063,-55.2109 -4.17578,-11.0195 -0.77344,-20.8164 11.04688,-31.8086 7.96093,-7.3984 11.40625,-8.1602 37.05078,-8.1602 27.66797,0 29.08984,0.4024 65.80078,18.211 41.65234,20.2109 87.77734,48.4101 182.71094,111.7109 117.4414,78.3203 193.72261,143.1367 237.75391,202.0391 6.3594,8.5078 12.6484,14.3789 13.9687,13.0508 1.3204,-1.3399 7.4805,-17.5821 13.6915,-36.0899 6.1992,-18.5195 12,-34.3906 12.8789,-35.2695 3.8593,-3.8633 5.5898,45.0976 2.3711,67.2969 -5.6602,39.121 -25.5508,61.9609 -53.961,61.9804 -18.6719,0.02 -33.9609,-9.3906 -48.2305,-29.6679 -6.81636,-9.6915 -13.42183,-17.8516 -14.67964,-18.1329 -1.26172,-0.2773 -9.63282,8.0899 -18.60547,18.6016 -29.4961,34.5313 -90.2461,70.5 -135.14844,80.0195 -29.51172,6.2618 -71.875,5.4297 -102.03906,-1.9882 z m 101.98047,-32.9024 c 23.76562,-5.9805 58.53515,-20.0781 58.53515,-23.75 0,-0.6484 -8.82031,2.3711 -19.60156,6.7305 -10.78125,4.3515 -30.85156,10.789 -44.59766,14.3008 -23.10937,5.9101 -32.80468,9.6406 -25.05859,9.6406 1.75,0 15.57812,-3.1094 30.72266,-6.9219 z M 1060.0313,1744.5508 C 999.94531,1685.6406 863.01172,1611.5586 626.08984,1509.7891 l -17.9414,-7.711 13.50781,-0.078 c 43.24219,-0.25 165.47266,47.5 279.54297,109.1914 76.83984,41.5586 139.81248,86.8477 164.99218,118.668 9.5899,12.1211 21.4492,36.6914 17.3281,35.9101 -1.2578,-0.2382 -11.8281,-9.789 -23.4882,-21.2187 z m 159.9375,-3.2813 c 0.2109,-35.8906 25.6015,-61.6797 92.8007,-94.2382 138.8203,-67.25 229.6524,-108.0704 272.2188,-122.3321 34.3125,-11.5 46.6328,-12.7187 28.0117,-2.789 -7.1406,3.8203 -33.5508,18.7695 -58.6797,33.2187 -65.8789,37.9024 -101.832,57.1094 -182.6992,97.6406 -84.543,42.3516 -116.9023,62.3594 -136.9922,84.6993 l -14.7305,16.3906 z m -37.5899,-133.4297 -9.7891,-4.4804 14.9102,-0.1485 c 32.9805,-0.3203 66.8398,-17.4101 106.6289,-53.8125 23.25,-21.2773 27.6211,-17.4101 9,7.9532 -31.1601,42.4375 -87.168,65.8672 -120.75,50.4882 z M 1124.4219,1479 c -18.8633,-4.75 -60.6602,-27.5703 -57.0821,-31.1484 0.6407,-0.6407 10.629,2.707 22.211,7.4375 29.9609,12.2304 72.0078,12.0625 109.1406,-0.461 14.3594,-4.8281 29.5391,-11.0195 33.7305,-13.7383 10.957,-7.1015 12.9375,-2.5507 4.9297,11.3086 -11.1602,19.293 -30.8399,27.4922 -68.961,28.6914 -17.4297,0.5508 -37.2187,-0.3906 -43.9687,-2.0898 z M 432.74609,1028.1016 c 1.48047,-42.71098 8.55469,-119.91019 14.42578,-157.51176 l 4.07813,-26.10156 2.34766,14.69141 c 4.03906,25.23047 3.04296,77.64843 -2.16407,113.76953 -6.52734,45.28128 -14.57812,86.23048 -17.57812,89.41018 -1.3125,1.3906 -1.8125,-14.0196 -1.11328,-34.2578 z m 22.1211,8.8867 c 19.54687,-57.41018 40.63672,-145.94924 56.73437,-238.16799 7.20703,-41.28125 14.07813,-79.85156 15.27735,-85.71875 4.67578,-22.9414 7.85937,-12.38281 7.85937,26.07813 0,91 -20.74219,193.60937 -52.28906,258.66015 -12.03516,24.80856 -32.67578,54.10936 -27.58203,39.14846 z m 685.09371,-71.77736 c -16.6601,-35.24219 -45.4726,-111.69922 -60.8515,-161.5 -19.3594,-62.65235 -88.47659,-329.74219 -85.9844,-332.23047 2.48828,-2.49219 23.8164,47.35937 39.3047,91.84765 21.5703,61.96094 46.4805,146.8125 74.8789,255.0625 13.6523,52.03907 30.7227,111.9375 37.9297,133.09766 7.2109,21.17188 12.4531,40.26172 11.6406,42.42188 -0.8203,2.16015 -8.4297,-10.75 -16.918,-28.69922 z M 593.96875,876.30859 c -8.24609,-15.77734 -17.69922,-78.3789 -10.6875,-70.80859 2.85156,3.07812 19.97266,65.41016 19.97266,72.69922 0,5.76953 -5.90235,4.57031 -9.28516,-1.89063 z m 394.95312,-11.4375 c -9.93359,-11.96093 -25.72656,-69.1914 -20.0664,-72.6914 2.60937,-1.6211 10.59375,17.80078 20.83594,50.67968 3.07421,9.8711 6.16406,19.78125 6.86718,22.01954 1.64844,5.28125 -3.26172,5.26953 -7.63672,0 z M 701.69922,804.51953 C 687.97656,768.75 684.83203,755.64062 685.04687,735.19141 c 0.14844,-14.28125 0.79688,-16.42188 3.1875,-10.46094 2.51954,6.26953 19.28907,73.1289 24.51563,97.73828 3.04687,14.35156 -1.49219,6.98047 -11.05078,-17.94922 z m 833.41018,10.10156 c -1.0781,-6.90234 -4.9805,-47.05078 -8.668,-89.21093 -7.0117,-80.14063 -14.6914,-136.42969 -27.0312,-198.21875 -4.0391,-20.17969 -6.4805,-36.70313 -5.4297,-36.70313 3.8281,0 26.2812,57.90234 34.1601,88.08984 20.3477,77.92188 28.1992,172.8711 18.4883,223.35157 -4.7187,24.4414 -8.9687,29.1289 -11.5195,12.6914 z m -74.8906,-54.14062 c -1.0274,-7.62891 -2.6485,-25.60938 -3.6094,-39.96875 l -1.75,-26.10156 5.3906,11.41796 c 6.2188,13.19141 10.3594,68.51172 5.1211,68.51172 -1.8125,0 -4.1328,-6.23047 -5.1523,-13.85937 z m 254.5195,-97.87891 c -1.8594,-35.38281 -7.5195,-76.32031 -18.3594,-132.58203 -4.6875,-24.34766 -4.2891,-26.26953 3.1406,-15.05859 7.6211,11.5 20.8516,50.78906 26.1524,77.64843 7.039,35.64063 2.707,109.96094 -6.4024,109.96094 -1.3398,0 -3.3789,-17.99219 -4.5312,-39.96875 z m -38.0586,-36.71094 c 0,-33.67187 0.8086,-41.26953 4.0703,-38.01171 2.75,2.74218 4.0781,15.21093 4.0781,38.01171 0,22.78907 -1.3281,35.26954 -4.0781,38.00782 -3.2617,3.26172 -4.0703,-4.32813 -4.0703,-38.00782 z M 417.36719,1744.5586 c -14.4336,-199.7891 -75.11328,-338.3398 -190.38672,-434.668 -39.04688,-32.6406 -130.617189,-91.7304 -135.132814,-87.2187 -1.113281,1.1172 2.4375,6.7695 7.886719,12.5781 28.312495,30.1602 113.593745,153.4102 160.898435,232.5 49.9375,83.5195 125.22656,236.8789 148.55078,302.6211 4.95313,13.9492 9.60938,24.7695 10.34375,24.0273 0.73828,-0.7265 -0.23437,-23.1601 -2.16015,-49.8398 z m 1481.08201,10.2227 c 24.5899,-73 102.6211,-221.3321 167.3594,-318.1094 46.8203,-69.9922 93.2305,-129.211 136.9805,-174.7735 26.1914,-27.2773 31.7812,-35.8086 16.3125,-24.8984 -4.9414,3.4883 -16.6016,10.1797 -25.9219,14.8711 -29.8399,15.0391 -102.8594,66.0195 -132.3008,92.3789 -77.0976,69.0391 -139.5898,174.3906 -166.0898,280.0195 -5.0703,20.1719 -6.9493,41.3203 -8.2891,92.9922 -1.0586,40.6797 -0.5586,65.6094 1.2617,63.6172 1.6485,-1.7891 6.4571,-13.5391 10.6875,-26.0976 z m 0,0"\r
     id="path1"\r
     inkscape:highlight-color="#aaaaaa"\r
     style="fill:#ffffff;fill-opacity:1" />\r
</svg>\r
`,z4="#87CEFA",B4="#FF0000";function Hp(r){const e=r.match(/viewBox\s*=\s*"([^"]+)"/i),t=r.match(/<path[^>]*\sd="([^"]+)"[^>]*>/i);if(!e||!t)throw new Error("Cannot parse SVG path/viewBox from source.");const s=t[0].match(/transform="([^"]+)"/i);return{d:t[1],transform:s?s[1]:void 0,viewBox:e[1]}}const j4=Hp(L4),D4=Hp(F4);function $4(r){return r==="player"?z4:B4}function O4(r){const e=r==="player"?j4:D4,t=$4(r),s=e.transform?` transform="${e.transform}"`:"";return[`<svg viewBox="${e.viewBox}" xmlns="http://www.w3.org/2000/svg" style="background:none">`,"<g>",`<path d="${e.d}"${s} fill="${t}" />`,"</g>","</svg>"].join("")}function eh(r){const e=O4(r);return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}const Vp="token-player-svg",Yp="token-enemy-svg";let tl=null;async function N4(){if(tl)return tl;const r=[{alias:Vp,src:eh("player")},{alias:Yp,src:eh("enemy")}];return tl=(async()=>{for(const e of r)Ji.add(e);await Ji.load(r.map(e=>e.alias))})(),tl}function W4(r){const e=le.useRef(null),t=le.useRef(null),s=le.useRef(null),o=le.useRef(null),l=le.useRef(null),u=le.useRef(null),c=le.useRef(typeof r.zoom=="number"?r.zoom:1),d=le.useRef({x:typeof r.panX=="number"?r.panX:0,y:typeof r.panY=="number"?r.panY:0});return c.current=typeof r.zoom=="number"?r.zoom:1,d.current={x:typeof r.panX=="number"?r.panX:0,y:typeof r.panY=="number"?r.panY:0},le.useEffect(()=>{var f;(f=u.current)==null||f.call(u)},[r.zoom,r.panX,r.panY]),le.useEffect(()=>{if(!r.enabled||!r.containerRef.current||e.current)return;const f=new yp;e.current=f;let m=!1,y=null,x=null,v=!1;return(async()=>{if(await f.init({width:uo,height:nl,background:Ig,antialias:!0}),v=!0,await N4(),m)return;const b=r.containerRef.current;if(!b)return;b.prepend(f.canvas);const w=new ln;f.stage.addChild(w);const C=new pi;w.addChild(C),(()=>{C.clear();for(let D=0;D<Xn;D++)for(let Y=0;Y<ar;Y++){if(!as(Y,D))continue;const Q=_n(Y,D),q=ct,Z=ct*.5,pe=[Q.x,Q.y-Z/2,Q.x+q/2,Q.y,Q.x,Q.y+Z/2,Q.x-q/2,Q.y],ce=(Y+D)%2===0;C.poly(pe).fill({color:ce?1381666:1908016,alpha:1})}})();const E=new pi;w.addChild(E),s.current=E;const I=new ln;w.addChild(I),t.current=I;const U=new ln;w.addChild(U),o.current=U;const O=()=>{const D=r.containerRef.current;if(!D)return;const Y=Math.max(1,D.clientWidth),Q=Math.max(1,D.clientHeight);f.renderer.resize(Y,Q);const q=Math.min(Y/uo,Q/nl),Z=c.current,pe=q*Z,ce=(Y-uo*pe)/2+d.current.x,Se=(Q-nl*pe)/2+d.current.y;w.scale.set(pe),w.position.set(ce,Se),l.current={scale:pe,offsetX:ce,offsetY:Se};const Qe=f.canvas;Qe.style.width="100%",Qe.style.height="100%",Qe.style.display="block"};y=O,u.current=O,O(),x=new ResizeObserver(()=>O()),x.observe(b),window.addEventListener("resize",O)})(),()=>{m=!0,x&&x.disconnect(),y&&window.removeEventListener("resize",y),v&&e.current&&e.current.destroy(!0),e.current=null,t.current=null,s.current=null,o.current=null,l.current=null,u.current=null}},[r.enabled,r.containerRef]),{appRef:e,tokenLayerRef:t,pathLayerRef:s,speechLayerRef:o,viewportRef:l}}function U4(r){le.useEffect(()=>{const e=r.pathLayerRef.current;if(!e)return;e.clear();const t=r.effectSpecs.map(l=>{switch(l.kind){case"circle":return m0(l.id,r.player.x,r.player.y,l.radius??1);case"rectangle":return Fg(l.id,r.player.x,r.player.y,l.width??1,l.height??1);case"cone":return g0(l.id,r.player.x,r.player.y,l.range??1,l.direction??"right");default:return{id:l.id,type:"circle",cells:[]}}});for(const l of t)for(const u of l.cells){const c=_n(u.x,u.y),d=ct,f=ct*.5,m=[c.x,c.y-f/2,c.x+d/2,c.y,c.x,c.y+f/2,c.x-d/2,c.y],y=l.type==="circle"?3447003:l.type==="rectangle"?3066993:15158332;e.poly(m).fill({color:y,alpha:.45})}if(r.showVisionDebug){const l=[r.player,...r.enemies];for(const u of l){const c=y0(u);for(const d of c.cells){const f=_n(d.x,d.y),m=ct,y=ct*.5,x=[f.x,f.y-y/2,f.x+m/2,f.y,f.x,f.y+y/2,f.x-m/2,f.y],v=u.type==="player"?2719929:12597547;e.poly(x).fill({color:v,alpha:u.type==="player"?.25:.2})}}}const s=[r.player,...r.enemies];for(const l of s){const u=_n(l.x,l.y),c=ct,d=ct*.5,f=[u.x,u.y-d/2,u.x+c/2,u.y,u.x,u.y+d/2,u.x-c/2,u.y],m=l.type==="player"?3066993:15158332;e.poly(f).fill({color:m,alpha:.2})}if(r.selectedTargetId){const l=r.enemies.find(u=>u.id===r.selectedTargetId);if(l){const u=_n(l.x,l.y),c=ct,d=ct*.5,f=[u.x,u.y-d/2,u.x+c/2,u.y,u.x,u.y+d/2,u.x-c/2,u.y];e.poly(f).fill({color:3447003,alpha:.6})}}if(r.selectedPath.length>0){const l=r.selectedPath[r.selectedPath.length-1],u=_n(l.x,l.y),c=ct,d=ct*.5,f=[u.x,u.y-d/2,u.x+c/2,u.y,u.x,u.y+d/2,u.x-c/2,u.y];e.poly(f).fill({color:15844367,alpha:.2})}for(const l of r.enemies){if(!l.plannedPath||l.plannedPath.length===0)continue;const u=l.plannedPath,c=u[0],d=_n(c.x,c.y);e.setStrokeStyle({width:3,color:15158332,alpha:.9}),e.moveTo(d.x,d.y);for(const f of u.slice(1)){const m=_n(f.x,f.y);e.lineTo(m.x,m.y)}e.stroke()}if(r.selectedPath.length===0)return;e.setStrokeStyle({width:6,color:15844367,alpha:1});const o=_n(r.player.x,r.player.y);e.moveTo(o.x,o.y);for(const l of r.selectedPath){const u=_n(l.x,l.y);e.lineTo(u.x,u.y)}e.stroke()},[r.pathLayerRef,r.player,r.enemies,r.selectedPath,r.effectSpecs,r.selectedTargetId,r.showVisionDebug])}function G4(r){le.useEffect(()=>{const e=r.speechLayerRef.current;if(!e)return;e.removeChildren();const t=[r.player,...r.enemies],s=new Map(r.speechBubbles.map(f=>[f.tokenId,f])),o=6,l=140,u=ct*1,c=[];for(const f of t){if(f.type!=="enemy"||$t(f))continue;const m=s.get(f.id);if(!m||!m.text.trim())continue;const y=_n(f.x,f.y),x=new ln,v=new pi;v.beginFill(16777215,.92);const S=new I4(m.text,{fontFamily:"Arial",fontSize:11,fill:0,align:"center",wordWrap:!0,wordWrapWidth:l-10}),b=Math.min(l,S.width+10),w=S.height+8;v.drawRoundedRect(-b/2,-w,b,w,7),v.endFill(),S.x=-S.width/2,S.y=-w+4,x.addChild(v),x.addChild(S);const C=y.x+ct*.05,P=y.y-u;x.x=C,x.y=P,e.addChild(x),c.push({x:C-b/2,y:P-w,width:b,height:w,view:x})}c.sort((f,m)=>f.y-m.y);const d=[];for(const f of c){let m=f.y,y=0;const x=(S,b,w)=>{const C=S.x,P=S.y,E=S.x+S.width,I=S.y+S.height,U=b,O=w,D=b+f.width,Y=w+f.height;return C<D&&E>U&&P<Y&&I>O};for(;y<20;){const S=d.find(b=>x(b,f.x,m));if(!S)break;m=S.y-f.height-o,y+=1}const v=m-f.y;v!==0&&(f.view.y+=v,f.y=m),d.push(f)}},[r.speechLayerRef,r.player,r.enemies,r.speechBubbles])}function H4(r){le.useEffect(()=>{const e=r.tokenLayerRef.current;if(!e)return;e.removeChildren();const t=[r.player,...r.enemies];for(const s of t){const o=new ln;if(!$t(s)){const d=new pi;d.beginFill(0,.4),d.drawEllipse(0,0,ct*.4,ct*.15),d.endFill(),o.addChild(d)}const l=s.type==="player"?Vp:Yp,u=ss.from(l);u.anchor.set(.5,1),u.width=ct*.9,u.height=ct*.9,$t(s)?(u.rotation=Math.PI/2,u.alpha=.7):(u.rotation=0,u.alpha=1),o.addChild(u);const c=_n(s.x,s.y);o.x=c.x+ct*.05,o.y=c.y,e.addChild(o)}},[r.tokenLayerRef,r.player,r.enemies])}function V4(r){return M.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:16,boxSizing:"border-box"},children:[M.jsx("h1",{style:{marginBottom:8},children:"Prparation du combat"}),M.jsx("p",{style:{marginBottom:16,fontSize:13,maxWidth:480,textAlign:"center"},children:"Configurez le combat avant de lancer la grille : nombre d'ennemis, puis dmarrez pour effectuer les jets d'initiative et entrer en mode tour par tour."}),M.jsxs("div",{style:{padding:16,borderRadius:8,background:"#141421",border:"1px solid #333",minWidth:260,display:"flex",flexDirection:"column",gap:12},children:[M.jsxs("label",{style:{fontSize:13},children:["Nombre d'ennemis :",M.jsx("input",{type:"number",min:1,max:8,value:r.configEnemyCount,onChange:e=>r.onChangeEnemyCount(Math.max(1,Math.min(8,Number(e.target.value)||1))),style:{marginLeft:8,width:60,background:"#0f0f19",color:"#f5f5f5",border:"1px solid #333",borderRadius:4,padding:"2px 4px"}})]}),M.jsxs("p",{style:{fontSize:11,color:"#b0b8c4",margin:0},children:["Taille de la carte : actuellement fixe (",r.gridCols," x ",r.gridRows,"). Un redimensionnement dynamique demandera une refonte de boardConfig.ts."]}),M.jsx("button",{type:"button",onClick:()=>{if(r.enemyTypeCount===0){r.onNoEnemyTypes();return}r.onStartCombat()},style:{marginTop:8,padding:"6px 12px",background:"#2ecc71",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontWeight:600,fontSize:13},children:"Lancer le combat"})]})]})}function Y4(r){return M.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333"},children:[M.jsx("h2",{style:{margin:"0 0 8px"},children:"tat du combat"}),M.jsxs("div",{children:[M.jsx("strong",{children:"Round :"})," ",r.round," | ",M.jsx("strong",{children:"Phase :"})," ",r.phase==="player"?"Joueur":"Ennemis"]}),M.jsxs("div",{style:{fontSize:12,marginTop:4},children:[M.jsx("strong",{children:"Initiative PJ :"})," ",r.playerInitiative??"en cours..."]}),M.jsxs("div",{children:[M.jsx("strong",{children:"Nom :"})," ",r.sampleCharacter.nom.nomcomplet]}),M.jsxs("div",{children:[M.jsx("strong",{children:"Niveau :"})," ",r.sampleCharacter.niveauGlobal," |"," ",M.jsx("strong",{children:"Classe :"})," ",r.sampleCharacter.classe[1].classeId]}),M.jsxs("div",{children:[M.jsx("strong",{children:"PV :"})," ",r.player.hp," / ",r.player.maxHp]}),M.jsxs("div",{children:[M.jsx("strong",{children:"CA :"})," ",r.sampleCharacter.CA]}),M.jsxs("div",{style:{marginTop:8},children:[M.jsx("strong",{children:"Caracs :"})," FOR ",r.sampleCharacter.caracs.force.FOR," | DEX"," ",r.sampleCharacter.caracs.dexterite.DEX," | CON"," ",r.sampleCharacter.caracs.constitution.CON]}),M.jsxs("div",{style:{marginTop:8,fontSize:12},children:[M.jsx("strong",{children:"Trajectoire :"})," ",r.selectedPath.length===0?"aucune":`(${r.player.x}, ${r.player.y}) -> `+r.selectedPath.map(e=>`(${e.x}, ${e.y})`).join(" -> ")]}),M.jsxs("div",{style:{marginTop:8,fontSize:11,opacity:.85},children:[M.jsx("strong",{children:"IA ennemis (debug) :"}),M.jsxs("div",{children:["Dernier appel :"," ",r.aiLastState?`round ${r.aiLastState.round}, phase ${r.aiLastState.phase}`:"aucun"]}),M.jsxs("div",{children:["Dcisions reues :"," ",r.aiLastDecisions===null?"n/a":`${r.aiLastDecisions.length} (fallback: ${r.aiUsedFallback?"oui":"non"})`]}),r.aiLastError&&M.jsxs("div",{children:["Erreur : ",r.aiLastError]})]})]})}function X4(r){const{enemies:e,player:t,validatedAction:s}=r;return M.jsxs("section",{style:{padding:"8px 12px",background:"#151524",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[M.jsx("h2",{style:{margin:"0 0 4px"},children:"Ennemis"}),M.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Chaque ennemi est une entit propre. Capacits IA : dplacement, attaque au contact, attente si aucune option."}),M.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:e.map(o=>{var l;return M.jsxs("div",{style:{background:"#0f0f19",border:"1px solid #2a2a3a",borderRadius:8,padding:"8px 10px",display:"flex",flexDirection:"column",gap:6},children:[M.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[M.jsx("strong",{style:{color:"#f5f5f5"},children:o.id}),M.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["(",o.x,",",o.y,") | PV ",o.hp," / ",o.maxHp," ",o.aiRole?`(role: ${o.aiRole})`:""]})]}),M.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:r.capabilities.map(u=>M.jsx("span",{style:{background:u.color,color:"#0b0b12",borderRadius:4,padding:"2px 6px",fontSize:11,fontWeight:700},children:u.action.toUpperCase()},`${o.id}-${u.action}`))}),M.jsxs("div",{style:{fontSize:12,color:"#d0d6e0"},children:["Ce qu'il peut faire : ",r.capabilities.map(u=>u.label).join(" | ")]}),s&&((l=s.targeting)==null?void 0:l.target)==="enemy"&&(()=>{const u=r.validateEnemyTargetForAction(s,o,t,[t,...e]),c=u.ok,d=r.selectedTargetId===o.id;return M.jsx("button",{type:"button",onClick:()=>{if(!c){r.onLog(u.reason||`Cible ${o.id} invalide pour ${s.name}.`);return}r.onSelectTargetId(o.id),r.onSetTargetMode("none"),r.onLog(`Cible selectionnee: ${o.id}.`)},disabled:!c,style:{marginTop:6,alignSelf:"flex-start",padding:"4px 8px",fontSize:11,borderRadius:4,border:"none",cursor:c?"pointer":"default",background:c?"#3498db":"#555",color:"#fff",opacity:d?1:.9},children:d?"Cible actuelle":"Cibler avec l'action valide"})})(),M.jsxs("div",{style:{fontSize:12,color:"#9cb2ff"},children:["Dernire dcision IA : ",r.describeEnemyLastDecision(o.id)]})]},o.id)})})]})}function q4(r){return M.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:M.jsxs("div",{style:{background:"#141421",borderRadius:12,border:"1px solid #f1c40f",padding:"24px 32px",maxWidth:360,textAlign:"center",boxShadow:"0 0 24px rgba(0,0,0,0.6)"},children:[M.jsx("h2",{style:{margin:"0 0 8px"},children:"Game Over"}),M.jsx("p",{style:{fontSize:13,margin:"0 0 16px"},children:"Le hros est tomb et aucun alli n'est en mesure de continuer."}),M.jsx("button",{type:"button",onClick:r.onRestart,style:{padding:"6px 12px",background:"#e67e22",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:600},children:"Recommencer le combat"})]})})}function K4(r){return M.jsxs("div",{style:{marginBottom:8,padding:"6px 10px",background:"#111322",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%"},children:[M.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[M.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["Ordre d'initiative (round ",r.round,")"]}),r.activeEntry&&M.jsxs("span",{style:{fontSize:11,color:"#f1c40f"},children:["Tour actuel :"," ",r.activeEntry.kind==="player"?"Joueur":r.activeEntry.id]})]}),M.jsx("div",{style:{display:"flex",gap:8,alignItems:"center",overflowX:"auto",paddingBottom:2},children:r.timelineEntries.map(e=>{const t=r.activeEntry&&e.id===r.activeEntry.id&&e.kind===r.activeEntry.kind,s=e.kind==="player",o=eh(s?"player":"enemy"),l=e.kind==="player"?r.player:r.enemies.find(d=>d.id===e.id)||null,u=l?$t(l):!1,c=s?{svg:o,label:"PJ"}:{svg:o,label:e.id};return M.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:4,borderRadius:6,border:t?"2px solid #f1c40f":"1px solid #333",background:u?"#111118":t?"#1b1b30":"#101020",minWidth:48},children:[M.jsx("img",{src:c.svg,alt:c.label,style:{width:32,height:32,objectFit:"contain",filter:u?"grayscale(1)":s?"none":"grayscale(0.2)"}}),M.jsx("span",{style:{fontSize:10,marginTop:2,color:u?"#777a8a":"#d0d6e0",whiteSpace:"nowrap",textDecoration:u?"line-through":"none"},children:c.label}),M.jsxs("span",{style:{fontSize:9,color:"#9aa0b5"},children:["Init ",e.initiative]})]},`${e.kind}-${e.id}`)})})]})}function Q4(r){return M.jsxs("div",{style:{padding:"10px 12px",background:"linear-gradient(180deg, rgba(38, 28, 16, 0.92), rgba(16, 12, 8, 0.92))",borderRadius:14,border:"1px solid rgba(255,255,255,0.10)",boxShadow:"0 16px 50px rgba(0,0,0,0.45)",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%",height:170,fontFamily:'"Iowan Old Style", "Palatino Linotype", Palatino, Garamond, "Times New Roman", serif'},children:[M.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[M.jsx("span",{style:{fontSize:13,color:"rgba(255,255,255,0.82)",fontWeight:700},children:"Chronique du tour"}),M.jsxs("span",{style:{fontSize:12,color:"rgba(255,255,255,0.65)"},children:["Round ",r.round]})]}),M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2,flex:"1 1 auto",minHeight:0,overflowY:"auto",paddingRight:4},children:[r.narrativeLog.length===0&&M.jsx("span",{style:{fontSize:12,color:"rgba(255,255,255,0.65)"},children:"En attente d'actions pour raconter le tour..."}),r.narrativeLog.slice(0,20).map((e,t)=>M.jsxs("span",{style:{fontSize:13,color:"rgba(255,255,255,0.88)"},children:[" ",e]},t))]})]})}function Z4(r){var s,o,l,u;const e=r.selectedAction,t=r.selectedAvailability;return M.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[M.jsx("h2",{style:{margin:"0 0 4px"},children:"Actions dtailles"}),M.jsxs("p",{style:{margin:0,fontSize:12,opacity:.85},children:["Source: ",M.jsx("code",{children:"action-game/actions/index.json"}),". Liste charge et vrifie localement (phase, distance)."]}),M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:[r.actions.map(c=>{const d=r.computeActionAvailability(c),f=(e==null?void 0:e.id)===c.id,m=c.actionCost.actionType==="action"?"#8e44ad":c.actionCost.actionType==="bonus"?"#27ae60":c.actionCost.actionType==="reaction"?"#e67e22":"#2980b9",y=f?"#6c5ce7":"#2a2a3a";return M.jsxs("button",{type:"button",onClick:()=>r.onSelectActionId(c.id),style:{textAlign:"left",background:f?"#1e1e2f":"#0f0f19",color:"#f5f5f5",border:`1px solid ${y}`,borderRadius:6,padding:"8px 10px",cursor:"pointer"},children:[M.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,marginBottom:4,alignItems:"center"},children:[M.jsx("span",{style:{fontWeight:600},children:c.name}),M.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:m,color:"#fff"},children:c.actionCost.actionType})]}),M.jsx("div",{style:{fontSize:12,opacity:.9},children:c.summary||c.category}),M.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:4,fontSize:11,alignItems:"center"},children:[M.jsx("span",{style:{color:d.enabled?"#2ecc71":"#e74c3c"},children:d.enabled?"Disponible":d.reasons[0]||"Bloque"}),M.jsx("span",{style:{color:"#9aa0b5"},children:r.describeRange(c.targeting)}),M.jsx("span",{style:{color:"#9aa0b5"},children:r.describeUsage(c.usage)})]})]},c.id)}),r.actions.length===0&&M.jsx("div",{style:{fontSize:12,opacity:.8},children:"Aucune action charge pour le moment."})]}),e&&M.jsxs("div",{style:{borderTop:"1px solid #2a2a3a",paddingTop:8,display:"flex",flexDirection:"column",gap:6},children:[M.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",fontSize:11},children:[M.jsx("span",{style:{background:"#2d2d40",color:"#d0d4f7",padding:"2px 6px",borderRadius:4},children:e.category}),(s=e.tags)==null?void 0:s.slice(0,4).map(c=>M.jsx("span",{style:{background:"#1f2a38",color:"#9bb0d6",padding:"2px 6px",borderRadius:4},children:c},c))]}),M.jsx("div",{style:{fontSize:12},children:e.summary||"Pas de rsum."}),M.jsxs("div",{style:{fontSize:12},children:[M.jsx("strong",{children:"Cot:"})," ",e.actionCost.actionType," | Mouvement"," ",e.actionCost.movementCost]}),M.jsxs("div",{style:{fontSize:12},children:[M.jsx("strong",{children:"Porte:"})," ",r.describeRange(e.targeting)]}),M.jsxs("div",{style:{fontSize:12},children:[M.jsx("strong",{children:"Usage:"})," ",r.describeUsage(e.usage)]}),M.jsxs("div",{style:{fontSize:12},children:[M.jsx("strong",{children:"Conditions:"}),M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:[e.conditions.length===0&&M.jsx("span",{style:{color:"#9aa0b5"},children:"Aucune condition."}),e.conditions.map((c,d)=>M.jsxs("div",{style:{color:"#cfd3ec"},children:[r.conditionLabel(c),c.reason?` - ${c.reason}`:""]},`${c.type}-${d}`)),t&&M.jsxs("div",{style:{color:t.enabled?"#2ecc71":"#e74c3c"},children:["tat:"," ",t.enabled?"OK pour ce tour":t.reasons.join(" | ")||"Bloqu",t.details.length>0&&M.jsx("div",{style:{color:"#9aa0b5",marginTop:2},children:t.details.join(" / ")})]})]})]}),M.jsxs("div",{style:{fontSize:12},children:[M.jsx("strong",{children:"Effets:"}),M.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:e.effects.map((c,d)=>M.jsx("div",{style:{color:"#cfd3ec"},children:r.effectLabel(c)},`${c.type}-${d}`))})]}),M.jsxs("div",{style:{fontSize:12},children:[M.jsx("strong",{children:"Hints IA:"})," ",((o=e.aiHints)==null?void 0:o.priority)||"n/a",M.jsxs("div",{style:{color:"#9aa0b5"},children:["Success: ",((l=e.aiHints)==null?void 0:l.successLog)||"n/a"]}),M.jsxs("div",{style:{color:"#9aa0b5"},children:["Failure: ",((u=e.aiHints)==null?void 0:u.failureLog)||"n/a"]})]}),M.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[M.jsx("button",{type:"button",onClick:()=>r.onPreviewActionArea(e),style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Prvisualiser"}),M.jsx("button",{type:"button",onClick:()=>r.onValidateAction(e),disabled:!(t!=null&&t.enabled),style:{padding:"4px 8px",background:t!=null&&t.enabled?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:t!=null&&t.enabled?"pointer":"default",fontSize:12},children:"Valider l'action"})]})]})]})]})}function J4(r){var e,t,s,o,l,u;return M.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[M.jsx("h2",{style:{margin:"0 0 4px"},children:"Jets de ds"}),M.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Choisir une action, la valider, puis lancer le jet de touche et/ou de dgts. Mode auto: enchane touche + dgts."}),M.jsxs("div",{style:{fontSize:12},children:["Action valide :"," ",r.validatedAction?`${r.validatedAction.name} (${r.validatedAction.id})`:"aucune (valider une action d'abord)"]}),M.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["normal","advantage","disadvantage"].map(c=>M.jsx("button",{type:"button",onClick:()=>r.onSetAdvantageMode(c),style:{padding:"4px 8px",background:r.advantageMode===c?"#8e44ad":"#2c2c3a",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:c},c))}),M.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[M.jsx("button",{type:"button",onClick:r.onRollAttack,disabled:!((e=r.validatedAction)!=null&&e.attack),style:{padding:"4px 8px",background:(t=r.validatedAction)!=null&&t.attack?"#2980b9":"#555",color:"#fff",border:"none",borderRadius:4,cursor:(s=r.validatedAction)!=null&&s.attack?"pointer":"default",fontSize:12},children:"Lancer jet de touche"}),M.jsx("button",{type:"button",onClick:r.onRollDamage,disabled:!((o=r.validatedAction)!=null&&o.damage),style:{padding:"4px 8px",background:(l=r.validatedAction)!=null&&l.damage?"#27ae60":"#555",color:"#fff",border:"none",borderRadius:4,cursor:(u=r.validatedAction)!=null&&u.damage?"pointer":"default",fontSize:12},children:"Lancer dgts"}),M.jsx("button",{type:"button",onClick:r.onAutoResolve,style:{padding:"4px 8px",background:"#9b59b6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Mode auto (touche + dgts)"})]}),M.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[M.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[M.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de touche"}),r.attackRoll?M.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["d20: ",r.attackRoll.d20.rolls.join(" / "),"  ",r.attackRoll.d20.total," | bonus"," ",r.attackRoll.bonus," | total ",r.attackRoll.total," ",r.attackRoll.isCrit?"(critique)":""]}):M.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lanc."})]}),M.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[M.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de dgts"}),r.damageRoll?M.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["Ds:"," ",r.damageRoll.dice.length?r.damageRoll.dice.map(c=>c.rolls.join("+")).join(" | "):"-"," ","| mod ",r.damageRoll.flatModifier," | total ",r.damageRoll.total," ",r.damageRoll.isCrit?"(critique)":""]}):M.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lanc."})]})]}),M.jsxs("div",{style:{fontSize:12},children:[M.jsx("strong",{children:"Logs des jets:"}),M.jsxs("div",{style:{marginTop:4,display:"flex",flexDirection:"column",gap:2},children:[r.diceLogs.map((c,d)=>M.jsxs("div",{style:{color:"#dfe6ff"},children:["- ",c]},d)),r.diceLogs.length===0&&M.jsx("div",{style:{color:"#9aa0b5"},children:"Aucun jet enregistr."})]})]})]})}function e6(r){return M.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[M.jsx("h2",{style:{margin:"0 0 4px"},children:"Zones d'effet (demo)"}),M.jsxs("p",{style:{margin:0,fontSize:12},children:["Ces boutons utilisent les helpers de ",M.jsx("code",{children:"boardEffects.ts"})," pour dessiner des zones en coordonnes de grille autour du joueur."]}),M.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:[M.jsx("button",{type:"button",onClick:r.onShowCircle,style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cercle R=2"}),M.jsx("button",{type:"button",onClick:r.onShowRectangle,style:{padding:"4px 8px",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Rectangle 3x3"}),M.jsx("button",{type:"button",onClick:r.onShowCone,style:{padding:"4px 8px",background:"#c0392b",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cne porte 4"}),M.jsx("button",{type:"button",onClick:r.onToggleVisionDebug,style:{padding:"4px 8px",background:r.showVisionDebug?"#f1c40f":"#555",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:r.showVisionDebug?"Masquer vision":"Afficher vision"}),M.jsx("button",{type:"button",onClick:r.onClear,style:{padding:"4px 8px",background:"#7f8c8d",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Effacer zones"})]})]})}function t6(r){return M.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",flex:"1 1 auto",display:"flex",flexDirection:"column"},children:[M.jsx("h2",{style:{margin:"0 0 8px"},children:"Log"}),M.jsx("div",{style:{flex:"1 1 auto",overflowY:"auto",fontSize:12,lineHeight:1.4},children:r.log.map((e,t)=>M.jsxs("div",{children:["- ",e]},t))})]})}function go(r,e){return{x:Math.cos(e)*r,y:Math.sin(e)*r}}function h0(r,e,t,s,o){const l=go(r,t);return`A ${r} ${r} 0 ${s} ${o} ${l.x} ${l.y}`}function n6(r,e,t,s){const o=Math.abs(s-t)>=Math.PI*2-1e-6,l=s-t,u=o||Math.abs(l)>Math.PI?1:0,c=l>=0?1:0,d=c===1?0:1,f=go(e,t),m=go(r,s),y=go(r,t);return[`M ${f.x} ${f.y}`,h0(e,t,s,u,c),`L ${m.x} ${m.y}`,h0(r,s,t,u,d),`L ${y.x} ${y.y}`,"Z"].join(" ")}function r6(r){if(!r.open)return null;const e=r.size??240,t=e/2,s=t,o=Math.max(44,Math.floor(s*.42)),l=o-6,u=Math.max(1,r.items.length),c=Math.PI*2/u,d=-Math.PI/2;return M.jsx("div",{style:{position:"absolute",left:r.anchorX,top:r.anchorY,width:e,height:e,transform:"translate(-50%, -50%)",zIndex:50,pointerEvents:"auto",userSelect:"none"},onMouseDown:f=>{f.preventDefault(),f.stopPropagation()},onClick:f=>{f.preventDefault(),f.stopPropagation()},children:M.jsxs("svg",{width:e,height:e,viewBox:`${-t} ${-t} ${e} ${e}`,children:[M.jsx("defs",{children:M.jsx("filter",{id:"wheelShadow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:M.jsx("feDropShadow",{dx:"0",dy:"10",stdDeviation:"14",floodOpacity:"0.35"})})}),M.jsxs("g",{filter:"url(#wheelShadow)",children:[r.items.map((f,m)=>{const y=d+m*c,x=d+(m+1)*c,v=(y+x)/2,S=go((o+s)/2,v),b=n6(o,s,y,x),w=!!f.disabled,C=w&&f.disabledReason?f.disabledReason:w?"Indisponible":void 0;return M.jsxs("g",{children:[M.jsx("path",{d:b,fill:w?"rgba(90, 90, 100, 0.75)":f.color,stroke:"rgba(255,255,255,0.22)",strokeWidth:1,style:{cursor:w?"not-allowed":"pointer",transition:"filter 120ms ease, opacity 120ms ease"},opacity:w?.55:.95,onClick:P=>{var E;P.preventDefault(),P.stopPropagation(),!w&&((E=f.onSelect)==null||E.call(f))},children:C?M.jsx("title",{children:C}):null}),M.jsx("text",{x:S.x,y:S.y,textAnchor:"middle",dominantBaseline:"middle",style:{fill:w?"rgba(255,255,255,0.6)":"rgba(255,255,255,0.92)",fontSize:12,fontWeight:700,letterSpacing:.2,pointerEvents:"none"},children:f.label})]},f.id)}),M.jsx("circle",{cx:0,cy:0,r:l,fill:"rgba(10,10,16,0.92)",stroke:"rgba(255,255,255,0.18)",strokeWidth:1,style:{cursor:"pointer"},onClick:f=>{f.preventDefault(),f.stopPropagation(),r.onClose()}}),M.jsx("text",{x:0,y:0,textAnchor:"middle",dominantBaseline:"middle",style:{fill:"rgba(255,255,255,0.9)",fontSize:12,fontWeight:800,pointerEvents:"none"},children:"Annuler"})]})]})})}function i6(r){var y;const e=le.useMemo(()=>r.tabs.filter(x=>!x.hidden),[r.tabs]),t=r.defaultTabId??((y=e[0])==null?void 0:y.id)??"tab",s=r.collapsible??!0,o=r.collapsedByDefault??!0,[l,u]=le.useState(o&&s?null:t);le.useEffect(()=>{l!==null&&(e.some(x=>x.id===l)||u(t))},[l,t,e]);const c=l?e.find(x=>x.id===l):void 0,d=r.expandedHeight??320,f=r.collapsedHeight??52,m=l!==null;return M.jsxs("div",{style:{flex:`0 0 ${m?d:f}px`,display:"flex",flexDirection:"column",minHeight:0,background:"rgba(12, 12, 18, 0.9)",border:"1px solid rgba(255,255,255,0.10)",borderRadius:14,boxShadow:"0 18px 60px rgba(0,0,0,0.45)"},children:[M.jsx("div",{style:{display:"flex",gap:8,padding:"10px 10px 0 10px",flexWrap:"wrap"},children:e.map(x=>{const v=x.id===l;return M.jsx("button",{type:"button",onClick:()=>{if(!s){u(x.id);return}u(S=>S===x.id?null:x.id)},style:{padding:"8px 10px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:v?"rgba(255,255,255,0.10)":"rgba(255,255,255,0.05)",color:v?"#fff":"rgba(255,255,255,0.75)",cursor:"pointer",fontSize:12,fontWeight:700},children:x.label},x.id)})}),m&&M.jsx("div",{style:{padding:10,minHeight:0,flex:"1 1 auto",overflow:"hidden"},children:M.jsx("div",{style:{width:"100%",height:"100%",overflow:"auto",paddingRight:4},children:c==null?void 0:c.content})})]})}const s6={"./melee-strike.json":B2,"./dash.json":X2,"./second-wind.json":oy,"./throw-dagger.json":_y},o6={"./brute.json":Xg,"./archer.json":r2,"./assassin.json":d2,"./ghost.json":w2};function a6(){const r=Array.isArray(Hf.types)?Hf.types:[],e=[];for(const t of r){const s=o6[t];s?e.push(s):console.warn("[enemy-types] Type path missing in bundle:",t)}return e.length===0&&console.warn("[enemy-types] No enemy types loaded from index.json"),e}function l6(r,e,t){const{x:s,y:o}=t,l=e.baseStats;return{id:`enemy-${r+1}`,type:"enemy",enemyTypeId:e.id,enemyTypeLabel:e.label,aiRole:e.aiRole,speechProfile:e.speechProfile??null,moveRange:l.moveRange,attackDamage:l.attackDamage,attackRange:typeof l.attackRange=="number"?l.attackRange:1,maxAttacksPerTurn:typeof l.maxAttacksPerTurn=="number"?l.maxAttacksPerTurn:1,armorClass:l.armorClass,movementProfile:e.movement?e.movement:{type:"ground",speed:e.baseStats.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},facing:"left",visionProfile:e.vision?e.vision:{shape:"cone",range:5},x:s,y:o,hp:l.hp,maxHp:l.hp}}function u6(r){const e=Xn,t=ar,s=Math.floor(r/e),o=r%e;return{x:Math.max(0,t-1-s),y:o}}const c6=[{action:"move",label:"Se deplacer jusqu'a 3 cases (Manhattan)",color:"#2ecc71"},{action:"attack",label:"Attaque le joueur a distance 1 (2 degats)",color:"#e74c3c"},{action:"wait",label:"Attend si aucune action viable",color:"#7f8c8d"}],h6=()=>{const r=le.useRef(null),e=le.useRef(!1),[t,s]=le.useState([]),[o,l]=le.useState([]),[u,c]=le.useState([]),[d,f]=le.useState({id:"player-1",type:"player",x:0,y:Math.floor(Xn/2),facing:"right",visionProfile:{shape:"cone",range:5},hp:ja.pvActuels,maxHp:ja.pvMax}),[m,y]=le.useState([]),[x,v]=le.useState([]),[S,b]=le.useState("player"),[w,C]=le.useState(1),[P,E]=le.useState(!1),[I,U]=le.useState(!1),[O,D]=le.useState(null),[Y,Q]=le.useState([]),[q,Z]=le.useState(0),[pe,ce]=le.useState(!1),[Se,Qe]=le.useState(3),J=.5,te=2.5,ee=.1,[X,ne]=le.useState(1),[L,W]=le.useState({x:0,y:0}),[ve,we]=le.useState(!1),be=le.useRef(null),{tokenLayerRef:Ae,pathLayerRef:$e,speechLayerRef:Fe,viewportRef:Oe}=W4({enabled:pe,containerRef:r,zoom:X,panX:L.x,panY:L.y}),[st,Dn]=le.useState([]),[cn,Nt]=le.useState(null),[Ht,hn]=le.useState(null),[Br,hr]=le.useState("normal"),[en,dr]=le.useState(null),[jr,kn]=le.useState(null),[hs,Co]=le.useState([]),[Ao,mi]=le.useState(!1),[ds,gi]=le.useState({usedAction:!1,usedBonus:!1}),[dt,Dr]=le.useState([]),[gt,$n]=le.useState(null),[fs,fr]=le.useState("none"),[$r,Or]=le.useState("idle"),[Ne,yi]=le.useState(null),[ps,dn]=le.useState([]),[xi,pr]=le.useState(!1),[mr,Po]=le.useState(null),[vi,Nr]=le.useState(null),[To,ms]=le.useState(null),[_i,gr]=le.useState(!1),[kt,gs]=le.useState(!1);H4({tokenLayerRef:Ae,player:d,enemies:x}),G4({speechLayerRef:Fe,player:d,enemies:x,speechBubbles:u}),U4({pathLayerRef:$e,player:d,enemies:x,selectedPath:dt,effectSpecs:ps,selectedTargetId:gt,showVisionDebug:xi});function Et(){yi(A=>A?{...A,open:!1}:null)}le.useEffect(()=>{(S!=="player"||kt)&&(Or("idle"),Et())},[S,kt]),le.useEffect(()=>{const A=z=>{if(z.key==="Escape"){if(Ne!=null&&Ne.open){Et();return}if(fs==="selecting"){fr("none");return}$r==="moving"&&Or("idle")}};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[Ne==null?void 0:Ne.open,$r,fs]);function yl(A){if(_i)return"Fallback local : poursuite/attaque basique du joueur";if(vi===null)return"IA non appele pour l'instant";const z=vi.find($=>$.enemyId===A);if(!z)return"Aucune dcision reue pour cet ennemi";if(z.action==="move"){const $=typeof z.targetX=="number"?z.targetX:"?",N=typeof z.targetY=="number"?z.targetY:"?";return`Dplacement vers (${$}, ${N})`}return z.action==="attack"?"Attaque le joueur (distance 1)":"Attend ce tour"}function Wr(){if(m.length===0){oe("Aucun type d'ennemi charge (enemyTypes). Impossible de generer le combat.");return}const A=[],z=$=>m[$%m.length];for(let $=0;$<Se;$++)A.push(l6($,z($),u6($)));v(A),C(1),U(!1),Q([]),Z(0),ce(!0)}function yr(){if(!I||Y.length===0)return null;const A=q>=0&&q<Y.length?q:0;return Y[A]??null}function wi(){if(!I||Y.length===0)return{entry:null,willWrap:!1};const A=(q+1)%Y.length;return{entry:Y[A]??null,willWrap:A===0}}function Ur(){Y.length!==0&&Z(A=>{const z=(A+1)%Y.length;return z===0&&C($=>$+1),z})}function xl(){if(I)return;const A=ja.caracs.dexterite.modDEX??0,z=()=>Math.floor(Math.random()*20)+1,$=z(),N=$+A,re=[];re.push({id:d.id,kind:"player",initiative:N});const Ce=x.map(ie=>{const Be=z();return re.push({id:ie.id,kind:"enemy",initiative:Be}),{...ie,initiative:Be}});D(N),v(Ce),re.sort((ie,Pe)=>Pe.initiative-ie.initiative),Q(re),Z(0),U(!0);const me=re[0];me&&(me.kind==="player"?oe(`Initiative: Joueur ${N} (d20=${$}, mod=${A})  le joueur commence.`):oe(`Initiative: Joueur ${N} (d20=${$}, mod=${A})  ${me.id} commence (initiative ${me.initiative}).`))}function oe(A){s(z=>[A,...z].slice(0,12))}function Eo(A){l(z=>[A,...z].slice(0,20))}function Cn(A){Co(z=>[A,...z].slice(0,6)),oe(A)}function Mo(A,z){const $=(z??"").trim();$&&c(N=>[...N.filter(Ce=>Ce.tokenId!==A),{tokenId:A,text:$,updatedAtRound:w}])}function Ro(A){c(z=>z.filter($=>$.tokenId!==A))}function Io(A,z,$){const N=[{id:z.id,kind:"player",label:"Heros",aiRole:null,enemyTypeId:null,x:z.x,y:z.y,hp:z.hp,maxHp:z.maxHp},...$.map(re=>({id:re.id,kind:"enemy",label:re.enemyTypeLabel||re.enemyTypeId||re.id,aiRole:re.aiRole??null,enemyTypeId:re.enemyTypeId??null,x:re.x,y:re.y,hp:re.hp,maxHp:re.maxHp}))];return{round:w,phase:A,grid:{cols:ar,rows:Xn},actors:N}}function Lo(A){return Io(A,d,x)}le.useEffect(()=>{const A=a6();y(A)},[]),le.useEffect(()=>{pe&&!I&&x.length>0&&xl()},[pe,I,x.length]),le.useEffect(()=>{c(A=>A.filter(z=>x.some($=>$.id===z.tokenId&&$.hp>0)))},[x]),le.useEffect(()=>{const A=Array.isArray(Vf.actions)?Vf.actions:[],z=[];for(const $ of A){const N=s6[$];N?z.push(N):console.warn("[actions] Action path missing in bundle:",$)}z.length===0&&console.warn("[actions] No actions loaded from index.json"),Dn(z),Nt(z.length?z[0].id:null)},[]),le.useEffect(()=>{if(!pe||!I)return;const A=yr();if(A){if(A.kind==="player"){b("player"),gi({usedAction:!1,usedBonus:!1}),mi(!1),dr(null),kn(null),e.current=!1,Py(w,Lo("player")),on({round:w,phase:"player",kind:"turn_start",actorId:d.id,actorKind:"player",summary:`Debut du tour du heros (round ${w}).`});return}P||(b("enemies"),Gr(A.id))}},[pe,I,Y,q,P]);function Si(){if(x.length===0)return null;let A=null;for(const z of x){const $=Qs(d,z);(A===null||$<A)&&(A=$)}return A}function ys(A,z,$,N){if(z.type!=="enemy")return{ok:!1,reason:"La cible selectionnee n'est pas un ennemi."};if(z.hp<=0)return{ok:!1,reason:"La cible est deja a terre."};const re=A.targeting;if(!re||re.target!=="enemy")return{ok:!1,reason:"Cette action ne cible pas un ennemi."};const Ce=Qs($,z),me=re.range;if(me){if(typeof me.min=="number"&&Ce<me.min)return{ok:!1,reason:`Cible trop proche pour ${A.name} (distance ${Ce}, min ${me.min}).`};if(typeof me.max=="number"&&Ce>me.max)return{ok:!1,reason:`Cible hors portee pour ${A.name} (distance ${Ce}, max ${me.max}).`}}for(const ie of A.conditions||[]){if(ie.type==="distance_max"&&typeof ie.max=="number"&&Ce>ie.max)return{ok:!1,reason:ie.reason||`Distance cible > ${ie.max}.`};if(ie.type==="distance_between"){const Pe=typeof ie.min=="number"?ie.min:typeof(me==null?void 0:me.min)=="number"?me.min:null,Be=typeof ie.max=="number"?ie.max:typeof(me==null?void 0:me.max)=="number"?me.max:null;if(Pe!==null&&Ce<Pe)return{ok:!1,reason:ie.reason||`Distance cible < ${Pe}.`};if(Be!==null&&Ce>Be)return{ok:!1,reason:ie.reason||`Distance cible > ${Be}.`}}if(ie.type==="target_alive"&&z.hp<=0)return{ok:!1,reason:ie.reason||"La cible doit avoir des PV restants."}}return re.requiresLos&&!v0($,z,N)?{ok:!1,reason:"Cible hors du champ de vision ou derriere un obstacle (ligne de vue requise)."}:{ok:!0}}function bi(A){var Ce,me;const z=[],$=[];S!=="player"&&z.push("Action bloquee pendant le tour des ennemis.");const N=(Ce=A.targeting)==null?void 0:Ce.target,re=(me=A.targeting)==null?void 0:me.range;if(N==="enemy"){const ie=Si();ie===null?z.push("Aucune cible ennemie presente."):($.push(`Distance mini ennemie: ${ie}`),typeof(re==null?void 0:re.min)=="number"&&ie<re.min&&z.push(`Trop proche (< ${re.min}).`),typeof(re==null?void 0:re.max)=="number"&&ie>re.max&&z.push(`Hors portee (> ${re.max}).`))}for(const ie of A.conditions||[]){if(ie.type==="phase"&&ie.mustBe&&ie.mustBe!==S&&z.push(ie.reason||"Phase incorrecte."),ie.type==="distance_max"&&N==="enemy"){const Pe=Si();Pe!==null&&typeof ie.max=="number"&&Pe>ie.max&&z.push(ie.reason||`Distance > ${ie.max}.`)}if(ie.type==="distance_between"&&N==="enemy"){const Pe=Si();Pe!==null&&(typeof ie.min=="number"&&Pe<ie.min&&z.push(ie.reason||`Distance < ${ie.min}.`),typeof ie.max=="number"&&Pe>ie.max&&z.push(ie.reason||`Distance > ${ie.max}.`))}}return{enabled:z.length===0,reasons:z,details:$}}function vl(A){var $;const z=[];if(A.perTurn&&z.push(`${A.perTurn}/tour`),A.perEncounter&&z.push(`${A.perEncounter}/rencontre`),($=A.resource)!=null&&$.name){const N=A.resource.pool?` (${A.resource.pool})`:"";z.push(`Ressource: ${A.resource.name}${N}`)}return z.length?z.join(" | "):"Libre"}function _l(A){const{range:z,target:$}=A;return z.shape==="self"?"Portee: soi-meme":z.min===z.max?`Portee: ${z.max} (${$})`:`Portee: ${z.min}-${z.max} (${$})`}function ot(A){switch(A.type){case"phase":return`Phase requise: ${A.mustBe??"?"}`;case"distance_max":return`Distance <= ${A.max??"?"}`;case"distance_between":return`Distance ${A.min??0}-${A.max??"?"}`;case"stat_below_percent":return`Stat ${A.stat} < ${Math.round((A.percentMax??0)*100)}%`;case"target_alive":return"Cible doit etre vivante";case"resource_at_least":return`Ressource ${A.resource??"?"} >= ${A.value??"?"}`;default:return A.reason||A.type}}function wl(A){switch(A.type){case"damage":return`Degats ${A.damageType??""} (${A.formula??"?"})`;case"heal":return`Soin (${A.formula??"?"})`;case"status":return`Etat: ${A.status??"?"} (${A.duration??"?"} tour)`;case"temp_hp":return`PV temporaires: ${A.amount??"?"}`;case"move":return`Deplacement +${A.maxSteps??"?"} (${A.direction??"direction libre"})`;case"resource_spend":return`Consomme ${A.amount??1} ${A.resource??"ressource"}`;case"modify_path_limit":return`+${A.delta??"?"} cases de mouvement ce tour`;default:return A.type}}function xs(A){var N;const z=(N=A.targeting)==null?void 0:N.range;if(!z)return;const $=`preview-${A.id}`;if(z.shape==="rectangle"){dn([{id:$,kind:"rectangle",width:Math.max(1,z.max),height:Math.max(1,z.max)}]),oe(`Previsualisation rectangle pour ${A.name}.`);return}if(z.shape==="cone"){dn([{id:$,kind:"cone",range:Math.max(1,z.max),direction:"right"}]),oe(`Previsualisation cone (direction droite) pour ${A.name}.`);return}dn([{id:$,kind:"circle",radius:Math.max(1,z.max)}]),oe(`Previsualisation de portee pour ${A.name}.`)}function Fo(A){var me,ie,Pe;const z=(me=A.actionCost)==null?void 0:me.actionType,$=z==="action",N=z==="bonus";if($&&ds.usedAction){oe(`Action ${A.name} refusee: action principale deja utilisee ce tour.`);return}if(N&&ds.usedBonus){oe(`Action ${A.name} refusee: action bonus deja utilisee ce tour.`);return}const re=bi(A);if(!re.enabled){oe(`Action ${A.name} bloque: ${re.reasons.join(" | ")}`);return}hn(A.id),dr(null),kn(null),mi(!1),gi(Be=>({usedAction:Be.usedAction||$,usedBonus:Be.usedBonus||N}));const Ce=((ie=A.aiHints)==null?void 0:ie.successLog)||"Action validee. Prets pour les jets.";oe(`${A.name}: ${Ce}`),((Pe=A.targeting)==null?void 0:Pe.target)==="enemy"?(fr("selecting"),$n(null),oe("Selection de cible: cliquez sur un ennemi sur la grille ou dans la liste.")):(fr("none"),$n(null))}function On(){return Ht&&st.find(A=>A.id===Ht)||null}function Sl(A){return A?A.attack||A.damage||A.skillCheck?!0:(A.effects||[]).some($=>typeof $.formula=="string"&&$.formula.trim().length>0):!1}function vs(){var me,ie;if(kt||$t(d))return;const A=On();if(!A){oe("Aucune action validee pour lancer un jet.");return}if(!A.attack){oe("Cette action ne requiert pas de jet de touche.");return}if(Ao){oe("Jet de touche deja effectue pour cette action ce tour. Validez une nouvelle action ou terminez le tour.");return}let z=null;if(((me=A.targeting)==null?void 0:me.target)==="enemy"){if(!gt){oe("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet.");return}const Pe=x.find(Be=>Be.id===gt);if(!Pe){oe("Cible ennemie introuvable ou deja vaincue.");return}z=typeof Pe.armorClass=="number"?Pe.armorClass:null}const $=wy(A.attack.bonus,Br,A.attack.critRange??20);dr($),mi(!0),kn(null);const N=$.mode==="normal"?`${$.d20.total}`:`${$.d20.rolls.join(" / ")} -> ${$.d20.total}`,re=((ie=A.targeting)==null?void 0:ie.target)==="enemy"&&gt?` sur ${gt}`:"",Ce=`Jet de touche (${A.name})${re} : ${N} + ${$.bonus} = ${$.total}`;if(z!==null){const Be=$.total>=z||$.isCrit?`TOUCHE (CA ${z})${$.isCrit?" (critique!)":""}`:`RATE (CA ${z})`;Cn(`${Ce} -> ${Be}`)}else Cn(`${Ce}${$.isCrit?" (critique!)":""}`)}function xr(){var Pe,Be,at;if(kt||$t(d))return;const A=On();if(!A){oe("Aucune action validee pour lancer un jet.");return}if(!A.damage){oe("Cette action ne requiert pas de jet de degats.");return}if(A.attack&&!en){oe("Un jet de touche est requis avant les degats pour cette action.");return}let z=null,$=null;if(((Pe=A.targeting)==null?void 0:Pe.target)==="enemy"){if(!gt){oe("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet de degats.");return}if(z=x.findIndex(Ie=>Ie.id===gt),z===-1){oe("Cible ennemie introuvable ou deja vaincue.");return}const Te=x[z];$=typeof Te.armorClass=="number"?Te.armorClass:null}const N=!!(en!=null&&en.isCrit);if($!==null&&A.attack&&en){const Te=en.total;if(!(Te>=$||en.isCrit)){const Ee=((Be=A.targeting)==null?void 0:Be.target)==="enemy"&&gt?` sur ${gt}`:"";oe(`L'attaque (${A.name})${Ee} a manque la cible (CA ${$}). Pas de degats.`),gt&&on({round:w,phase:S,kind:"player_attack",actorId:d.id,actorKind:"player",targetId:gt,targetKind:"enemy",summary:`Le heros attaque ${gt} (${A.name}) mais manque (CA ${$}).`,data:{actionId:A.id,attackTotal:Te,targetArmorClass:$,hit:!1}});return}}const re=by(A.damage.formula,{isCrit:N,critRule:A.damage.critRule});kn(re);const Ce=re.dice.map(Te=>Te.rolls.join("+")).join(" | "),me=re.total,ie=((at=A.targeting)==null?void 0:at.target)==="enemy"&&gt?` sur ${gt}`:"";Cn(`Degats (${A.name})${ie} : ${Ce||"0"} + ${re.flatModifier} = ${me}${N?" (critique)":""}`),typeof z=="number"&&z>=0&&v(Te=>{if(z===null||z<0||z>=Te.length)return Te;const Ie=[...Te],Ee={...Ie[z]},ke=Ee.hp;return Ee.hp=Math.max(0,Ee.hp-me),Ie[z]=Ee,on({round:w,phase:S,kind:"player_attack",actorId:d.id,actorKind:"player",targetId:Ee.id,targetKind:"enemy",summary:`Le heros frappe ${Ee.id} et inflige ${me} degats (PV ${ke} -> ${Ee.hp}).`,data:{actionId:A.id,damage:me,isCrit:N,targetHpBefore:ke,targetHpAfter:Ee.hp}}),Ee.hp<=0&&ke>0&&on({round:w,phase:S,kind:"death",actorId:Ee.id,actorKind:"enemy",summary:`${Ee.id} s'effondre, hors de combat.`,targetId:Ee.id,targetKind:"enemy",data:{killedBy:d.id}}),Ie})}function fn(){const A=On();if(!A){oe("Aucune action validee pour lancer un jet.");return}if(!A.attack){oe("Mode auto: pas de jet de touche necessaire."),A.damage&&xr();return}vs(),setTimeout(()=>{A.damage&&xr()},50)}function bl(A){if(S!=="player"||kt||$t(d))return;const z=r.current;if(!z)return;const $=z.querySelector("canvas");if(!$)return;const N=$.getBoundingClientRect(),re=A.clientX-N.left,Ce=A.clientY-N.top,me=Oe.current;if(!me)return;const ie=(re-me.offsetX)/me.scale,Pe=(Ce-me.offsetY)/me.scale;if(ie<0||Pe<0||ie>uo||Pe>nl)return;const{x:Be,y:at}=Lg(ie,Pe),Te=Be,Ie=at;if(!as(Te,Ie))return;if(fs==="selecting"){const ke=[d,...x],Ze=Xf({x:Te,y:Ie},ke);if(!Ze||Ze.type!=="enemy"){oe(`Pas d'ennemi sur (${Te}, ${Ie}).`);return}const Ue=On();if(!Ue){oe("Aucune action validee pour selectionner une cible.");return}const yt=ys(Ue,Ze,d,[d,...x]);if(!yt.ok){oe(yt.reason||"Cette cible n'est pas valide pour cette action.");return}$n(Ze.id),fr("none"),oe(`Cible selectionnee: ${Ze.id}.`);return}if($r!=="moving"){const ke=[d,...x],Ze=Xf({x:Te,y:Ie},ke)??null;yi({open:!0,anchorX:re,anchorY:Ce,cell:{x:Te,y:Ie},token:Ze});return}const Ee=(ke,Ze)=>x.some(Ue=>Ue.hp>0&&Ue.x===ke&&Ue.y===Ze);if(Ee(Te,Ie)){oe(`Case (${Te}, ${Ie}) occupee par un ennemi : impossible de s'y deplacer.`);return}Dr(ke=>{const Ue=[...ke];if(Ue.length>=5)return oe("Limite de 5 cases atteinte pour ce tour."),Ue;let yt=Ue.length>0?Ue[Ue.length-1]:{x:d.x,y:d.y};if(yt.x===Te&&yt.y===Ie)return Ue;let Ye=yt.x,Xe=yt.y,vt=5-Ue.length;for(;Ye!==Te&&vt>0;){const Ft=Math.sign(Te-Ye),Kn=Ye+Ft;if(Ee(Kn,Xe)){oe(`Trajectoire bloquee par un ennemi en (${Kn}, ${Xe}).`);break}Ye=Kn,Ue.push({x:Ye,y:Xe}),vt--}for(;Xe!==Ie&&vt>0;){const Ft=Math.sign(Ie-Xe),Kn=Xe+Ft;if(Ee(Ye,Kn)){oe(`Trajectoire bloquee par un ennemi en (${Ye}, ${Kn}).`);break}Xe=Kn,Ue.push({x:Ye,y:Xe}),vt--}return oe(vt===0&&(Ye!==Te||Xe!==Ie)?"Trajectoire tronquee: limite de 5 cases atteinte.":`Trajectoire: ajout de la case (${Te}, ${Ie}).`),Ue})}function Vt(){if(S!=="player"||kt||$t(d)||dt.length===0)return;const A=dt[dt.length-1],z={x:d.x,y:d.y};f($=>({...$,x:A.x,y:A.y})),oe(`Deplacement valide vers (${A.x}, ${A.y}) via ${dt.length} etape(s).`),on({round:w,phase:"player",kind:"move",actorId:d.id,actorKind:"player",summary:`Le heros se deplace de (${z.x}, ${z.y}) vers (${A.x}, ${A.y}).`,data:{from:z,to:{x:A.x,y:A.y},steps:dt.length}}),Dr([]),Or("idle"),Et()}function zo(){S==="player"&&(kt||(Dr([]),oe("Trajectoire reinitialisee.")))}function kl(){const A={x:d.x,y:d.y,hp:d.hp,maxHp:d.maxHp},z=x.map($=>({id:$.id,x:$.x,y:$.y,hp:$.hp,maxHp:$.maxHp,type:$.enemyTypeId,aiRole:$.aiRole??null,moveRange:$.moveRange??null,attackDamage:$.attackDamage??null}));return{round:w,phase:S,grid:{cols:ar,rows:Xn},player:A,enemies:z}}function Cl(A){const z=new Set(x.map(re=>re.id)),$=new Set(["move","attack","wait"]),N=[];for(const re of A){if(!re||typeof re!="object")continue;if(!z.has(re.enemyId)){console.warn("[enemy-ai] Decision ignoree (enemyId inconnu):",re);continue}const Ce=(re.action||"wait").toLowerCase();if(!$.has(Ce)){console.warn("[enemy-ai] Decision ignoree (action invalide):",re);continue}if(Ce==="move"&&(typeof re.targetX!="number"||typeof re.targetY!="number")){console.warn("[enemy-ai] Decision move ignoree (cible manquante):",re);continue}N.push({...re,action:Ce})}return N}async function ki(A){console.log("[enemy-ai] Envoi tat au backend:",A),Po(A),ms(null),gr(!1);try{const z=await fetch("/api/enemy-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!z.ok)throw new Error(`HTTP ${z.status}`);const $=await z.json();if(!$.decisions||!Array.isArray($.decisions))throw new Error("Rponse backend invalide (decisions manquant).");const N=Cl($.decisions);return console.log("[enemy-ai] Dcisions reues (filtres):",N),Nr(N),N.length===0&&gr(!0),N}catch(z){return console.warn("[enemy-ai] Erreur lors de la requete IA:",z),ms(z instanceof Error?z.message:String(z??"unknown")),Nr(null),gr(!0),console.warn("[enemy-ai] Dcisions manquantes, utilisation du fallback local."),[]}}async function Ci(A,z,$){const N=$.find(ke=>ke.id===A);if(!N||$t(N))return;const re=[z,...$],Ce=x0(N,re),me=Ce.filter(ke=>ke.type==="enemy"&&ke.id!==A&&!$t(ke)).map(ke=>ke.id),ie=Ce.filter(ke=>ke.type==="player"&&!$t(ke)).map(ke=>ke.id),Pe=$a(N,z,re),Be=Qs(N,z),at=N.maxHp>0?N.hp/N.maxHp:0,Te={language:"fr",maxLines:2,enemyId:A,enemyTypeId:N.enemyTypeId??null,aiRole:N.aiRole??null,speechProfile:N.speechProfile??null,perception:{canSeePlayer:Pe,distanceToPlayer:Number.isFinite(Be)?Be:null,hpRatio:Number.isFinite(at)?at:0,alliesVisible:me,enemiesVisible:ie,lastKnownPlayerPos:Pe?{x:z.x,y:z.y}:null},priorSpeechesThisRound:Ey(),selfLastSpeech:My(A),recentEvents:Ry(16)},Ee=((await zy(Te)).line??"").trim();if(!Ee){Ro(A);return}Mo(A,Ee),Ty(A,Ee)}async function Gr(A){var Be;E(!0),Dr([]),dn([]);const z=x.map(at=>({...at}));let $={...d};const N=z.find(at=>at.id===A);if(!N||$t(N)){E(!1),Ur();return}const re=kl(),me=(await ki(re)).filter(at=>at.enemyId===A),ie=[$,...z];if(me.length===0)if(gr(!0),Nr([]),!$a(N,$,ie))oe(`${N.id} ne voit pas le joueur et reste en alerte.`);else{const Te=typeof N.moveRange=="number"?N.moveRange:3,Ie=Yf(N,{x:$.x,y:$.y},ie,{maxDistance:Te,allowTargetOccupied:!0});if(N.plannedPath=Ie,Ie.length===0)oe(`${N.id} ne trouve pas de chemin valide vers le joueur (reste en place).`);else{const Ee={x:N.x,y:N.y},ke=Ie[Ie.length-1];N.x=ke.x,N.y=ke.y,N.facing=ac(N,$),oe(`${N.id} suit un chemin vers (${ke.x}, ${ke.y}).`),on({round:w,phase:"enemies",kind:"move",actorId:N.id,actorKind:"enemy",summary:`${N.id} se deplace de (${Ee.x}, ${Ee.y}) vers (${ke.x}, ${ke.y}).`,data:{from:Ee,to:ke,fallback:!0}});const Ze=Qs(N,$),Ue=Uf(N);if(Ze<=Ue){const yt=typeof N.attackDamage=="number"?N.attackDamage:2,Ye=Gf(N),Xe=yt*Ye,vt=$.hp;$={...$,hp:Math.max(0,$.hp-Xe)},oe(Ye>1?`${N.id} attaque ${Ye} fois pour ${Xe} degats.`:`${N.id} attaque le joueur pour ${Xe} degats.`),on({round:w,phase:"enemies",kind:"enemy_attack",actorId:N.id,actorKind:"enemy",targetId:$.id,targetKind:"player",summary:`${N.id} frappe le heros et inflige ${Xe} degats (PV ${vt} -> ${$.hp}).`,data:{damage:Xe,attacks:Ye,playerHpBefore:vt,playerHpAfter:$.hp,fallback:!0}}),$.hp<=0&&vt>0&&on({round:w,phase:"enemies",kind:"death",actorId:$.id,actorKind:"player",summary:"Le heros s'effondre sous les coups ennemis.",targetId:$.id,targetKind:"player",data:{killedBy:N.id}})}}}else{gr(!1),Nr(me);const at=me[0],Te=(at.action||"wait").toLowerCase();if(Te==="wait")oe(`${N.id} attend.`);else if(Te==="move")if(!$a(N,$,ie))oe(`${N.id} ne voit pas le joueur et reste en alerte.`);else{let Ee=at.targetX,ke=at.targetY;const Ze=at;if((typeof Ee!="number"||typeof ke!="number")&&Ze.target&&typeof Ze.target.x=="number"&&typeof Ze.target.y=="number"&&(Ee=Ze.target.x,ke=Ze.target.y),typeof Ee!="number"||typeof ke!="number")oe(`${N.id}: move ignore (cible invalide).`);else{const Ue=typeof N.moveRange=="number"?N.moveRange:3,yt=Da(Ee,0,ar-1),Ye=Da(ke,0,Xn-1),Xe=Yf(N,{x:yt,y:Ye},ie,{maxDistance:Ue,allowTargetOccupied:!0});if(N.plannedPath=Xe,Xe.length===0)oe(`${N.id}: aucun trajet valide vers (${yt}, ${Ye}), reste en place.`);else{const vt={x:N.x,y:N.y},Ft=Xe[Xe.length-1];N.x=Ft.x,N.y=Ft.y,N.facing=ac(N,$),oe(`${N.id} suit un chemin vers (${Ft.x}, ${Ft.y}).`),on({round:w,phase:"enemies",kind:"move",actorId:N.id,actorKind:"enemy",summary:`${N.id} se deplace de (${vt.x}, ${vt.y}) vers (${Ft.x}, ${Ft.y}).`,data:{from:vt,to:Ft}})}}}else if(Te==="attack")if(N.facing=ac(N,$),!$a(N,$,ie))oe(`${N.id} voulait attaquer mais ne voit pas le joueur.`);else{const Ee=Qs(N,$),ke=Uf(N);if(Ee<=ke){const Ze=typeof N.attackDamage=="number"?N.attackDamage:2,Ue=Gf(N),yt=Ze*Ue,Ye=$.hp;$={...$,hp:Math.max(0,$.hp-yt)},oe(Ue>1?`${N.id} effectue ${Ue} attaques et inflige ${yt} degats au joueur.`:`${N.id} attaque le joueur pour ${yt} degats.`),on({round:w,phase:"enemies",kind:"enemy_attack",actorId:N.id,actorKind:"enemy",targetId:$.id,targetKind:"player",summary:`${N.id} attaque le heros et inflige ${yt} degats (PV ${Ye} -> ${$.hp}).`,data:{damage:yt,attacks:Ue,playerHpBefore:Ye,playerHpAfter:$.hp}}),$.hp<=0&&Ye>0&&on({round:w,phase:"enemies",kind:"death",actorId:$.id,actorKind:"player",summary:"Le heros s'effondre sous les coups ennemis.",targetId:$.id,targetKind:"player",data:{killedBy:N.id}})}else oe(`${N.id} voulait attaquer mais est trop loin (ignore).`)}}f($),v(z);try{await Ci(A,$,z)}catch{}const Pe=wi();if(e.current&&((Be=Pe.entry)==null?void 0:Be.kind)==="player")try{const at=Io("player",$,z),Te=Iy({focusActorId:$.id??null,stateEnd:at});if(Te){const Ie=await Fy(Te),Ee=(Ie.error||Ie.summary||"").trim();Ee&&Eo(Ee)}}catch{Eo("IA non fonctionnel.")}finally{Ly(),e.current=!1}E(!1),Ur()}function Ai(){if(kt)return;const A=yr();!A||A.kind!=="player"||(oe(`Fin du tour joueur (round ${w}).`),e.current=!0,on({round:w,phase:"player",kind:"turn_end",actorId:d.id,actorKind:"player",summary:`Fin du tour du heros (round ${w}).`}),Ur())}function Al(){dn([{id:"demo-circle",kind:"circle",radius:2}]),oe("Zone d'effet: cercle (rayon 2) autour du joueur.")}function Pl(){dn([{id:"demo-rect",kind:"rectangle",width:3,height:3}]),oe("Zone d'effet: rectangle 3x3 centre sur le joueur.")}function _s(){dn([{id:"demo-cone",kind:"cone",range:4,direction:"right"}]),oe("Zone d'effet: cone vers la droite (portee 4).")}function Bo(){dn([]),oe("Zones d'effet effacees.")}le.useEffect(()=>{kt||d.hp<=0&&([d,...x].some(z=>z.type==="player"&&!$t(z))||gs(!0))},[d,x,kt]);const Hr=st.find(A=>A.id===cn)||st[0]||null,Vr=Hr?bi(Hr):null,ws=On(),Ss=Sl(ws),We=yr(),jo=Y;if(!pe)return M.jsx(V4,{configEnemyCount:Se,enemyTypeCount:m.length,gridCols:ar,gridRows:Xn,onChangeEnemyCount:Qe,onNoEnemyTypes:()=>oe("Aucun type d'ennemi charge (enemyTypes). Impossible de generer le combat."),onStartCombat:Wr});const Nn=S==="player"&&!kt&&!$t(d),bs=[{id:"move",label:"Deplacer",color:"#2ecc71",disabled:!Nn,disabledReason:"Tour joueur requis",onSelect:()=>{Or("moving"),Et(),oe("Mode deplacement active: cliquez sur des cases pour tracer un trajet (max 5).")}},{id:"attack",label:"Attaquer",color:"#e74c3c",disabled:!Nn,disabledReason:"Tour joueur requis",onSelect:()=>{oe("Attaquer: (a integrer) selection d'action/cible."),Et()}},{id:"validate-move",label:"Valider",color:"#f1c40f",disabled:!Nn||dt.length===0,disabledReason:dt.length===0?"Aucun trajet":"Tour joueur requis",onSelect:()=>{Vt()}},{id:"reset-move",label:"Annuler trajet",color:"#e67e22",disabled:!Nn||dt.length===0,disabledReason:dt.length===0?"Aucun trajet":"Tour joueur requis",onSelect:()=>{zo(),Et()}},{id:"inspect",label:"Inspecter",color:"#3498db",disabled:!(Ne!=null&&Ne.cell),onSelect:()=>{const A=Ne==null?void 0:Ne.cell;if(!A)return;const z=Ne==null?void 0:Ne.token;z?z.type==="player"?oe(`Inspection: joueur (${z.id}) en (${z.x}, ${z.y}), PV ${z.hp}/${z.maxHp}.`):oe(`Inspection: ennemi (${z.id}) en (${z.x}, ${z.y}), PV ${z.hp}/${z.maxHp}.`):oe(`Inspection: case (${A.x}, ${A.y}).`),Et()}},{id:"interact",label:"Interagir",color:"#9b59b6",disabled:!Nn,disabledReason:"Tour joueur requis",onSelect:()=>{const A=Ne==null?void 0:Ne.cell;oe(A?`Interagir: (a integrer) sur (${A.x}, ${A.y}).`:"Interagir: (a integrer)."),Et()}},{id:"hide",label:"Se cacher",color:"#34495e",disabled:!Nn,disabledReason:"Tour joueur requis",onSelect:()=>{oe("Se cacher: (a integrer)."),Et()}},{id:"end-turn",label:"Fin tour",color:"#ff7f50",disabled:!Nn||P,disabledReason:P?"Tour des ennemis en cours":"Tour joueur requis",onSelect:()=>{Ai(),Et()}}],Do=[{id:"combat",label:"Combat",content:M.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"flex-start"},children:[M.jsx("div",{style:{flex:"1 1 340px",minWidth:340},children:M.jsx(Y4,{round:w,phase:S,playerInitiative:O,player:d,selectedPath:dt,sampleCharacter:ja,aiLastState:mr,aiLastDecisions:vi,aiUsedFallback:_i,aiLastError:To})}),M.jsx("div",{style:{flex:"1 1 340px",minWidth:340},children:M.jsx(X4,{enemies:x,player:d,capabilities:c6,validatedAction:ws,selectedTargetId:gt,describeEnemyLastDecision:yl,validateEnemyTargetForAction:ys,onSelectTargetId:$n,onSetTargetMode:fr,onLog:oe})}),M.jsx("div",{style:{flex:"1 1 340px",minWidth:340},children:M.jsx(Z4,{actions:st,selectedAction:Hr,selectedAvailability:Vr,computeActionAvailability:bi,onSelectActionId:Nt,describeRange:_l,describeUsage:vl,conditionLabel:ot,effectLabel:wl,onPreviewActionArea:xs,onValidateAction:Fo})}),Ss&&M.jsx("div",{style:{flex:"1 1 340px",minWidth:340},children:M.jsx(J4,{validatedAction:ws,advantageMode:Br,onSetAdvantageMode:hr,onRollAttack:vs,onRollDamage:xr,onAutoResolve:fn,attackRoll:en,damageRoll:jr,diceLogs:hs})})]})},{id:"effects",label:"Effets",content:M.jsx("div",{style:{maxWidth:520},children:M.jsx(e6,{showVisionDebug:xi,onShowCircle:Al,onShowRectangle:Pl,onShowCone:_s,onToggleVisionDebug:()=>pr(A=>!A),onClear:Bo})})},{id:"logs",label:"Logs",content:M.jsx(t6,{log:t})}];return M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",height:"100vh",overflow:"hidden",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:"16px",boxSizing:"border-box",position:"relative"},children:[kt&&M.jsx(q4,{onRestart:()=>window.location.reload()}),M.jsxs("div",{style:{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",gap:10,minHeight:0,overflow:"hidden"},children:[M.jsx("div",{style:{flex:"0 0 auto",padding:"10px 12px",borderRadius:14,background:"rgba(12,12,18,0.88)",border:"1px solid rgba(255,255,255,0.10)",boxShadow:"0 18px 60px rgba(0,0,0,0.35)"},children:M.jsx(K4,{round:w,timelineEntries:jo,activeEntry:We,player:d,enemies:x})}),M.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",padding:"0 4px"},children:[M.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[M.jsx("span",{style:{fontSize:18,fontWeight:900,letterSpacing:.4},children:"Mini Donjon"}),M.jsx("span",{style:{fontSize:12,color:"rgba(255,255,255,0.70)"},children:"Clic gauche: roue d'actions  Deplacer: clics successifs (max 5)"})]}),M.jsx("span",{style:{fontSize:12,color:"rgba(255,255,255,0.65)"},children:S==="player"?"Tour joueur":"Tour ennemis"})]}),M.jsx("div",{style:{flex:"1 1 auto",minHeight:0,borderRadius:18,padding:10,background:"radial-gradient(1200px 500px at 40% 0%, rgba(120,90,40,0.20), rgba(12,12,18,0.92))",border:"1px solid rgba(255,255,255,0.12)",boxShadow:"0 25px 90px rgba(0,0,0,0.55)",overflow:"visible"},children:M.jsxs("div",{ref:r,onClick:bl,onContextMenu:A=>{A.preventDefault()},onMouseDown:A=>{A.button===2&&(A.preventDefault(),A.stopPropagation(),we(!0),be.current={x:A.clientX,y:A.clientY})},onMouseMove:A=>{if(!ve)return;const z=be.current;if(!z)return;const $=A.clientX-z.x,N=A.clientY-z.y;$===0&&N===0||(be.current={x:A.clientX,y:A.clientY},W(re=>({x:re.x+$,y:re.y+N})))},onMouseUp:A=>{A.button===2&&(we(!1),be.current=null)},onMouseLeave:()=>{we(!1),be.current=null},style:{width:"100%",height:"100%",minHeight:0,borderRadius:14,border:"1px solid rgba(255,255,255,0.10)",background:"#05050a",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible",cursor:ve?"grabbing":"default"},children:[M.jsxs("div",{onMouseDown:A=>A.stopPropagation(),style:{position:"absolute",right:12,top:12,zIndex:45,display:"flex",flexDirection:"column",gap:6,padding:8,borderRadius:12,background:"rgba(10, 10, 16, 0.72)",border:"1px solid rgba(255,255,255,0.14)",backdropFilter:"blur(6px)",boxShadow:"0 14px 40px rgba(0,0,0,0.35)"},children:[M.jsx("button",{type:"button",onClick:()=>ne(A=>Da(Math.round((A+ee)*10)/10,J,te)),disabled:X>=te-1e-6,style:{width:34,height:34,borderRadius:10,border:"1px solid rgba(255,255,255,0.14)",background:X>=te-1e-6?"rgba(80,80,90,0.55)":"rgba(255,255,255,0.08)",color:"#fff",cursor:X>=te-1e-6?"default":"pointer",fontSize:18,fontWeight:800,lineHeight:1},title:"Zoom +",children:"+"}),M.jsxs("div",{style:{textAlign:"center",fontSize:12,color:"rgba(255,255,255,0.75)",fontWeight:700},title:"Niveau de zoom",children:[Math.round(X*100),"%"]}),M.jsx("button",{type:"button",onClick:()=>ne(A=>Da(Math.round((A-ee)*10)/10,J,te)),disabled:X<=J+1e-6,style:{width:34,height:34,borderRadius:10,border:"1px solid rgba(255,255,255,0.14)",background:X<=J+1e-6?"rgba(80,80,90,0.55)":"rgba(255,255,255,0.08)",color:"#fff",cursor:X<=J+1e-6?"default":"pointer",fontSize:22,fontWeight:800,lineHeight:1},title:"Zoom -",children:""}),M.jsx("button",{type:"button",onClick:()=>ne(1),disabled:Math.abs(X-1)<1e-6,style:{marginTop:4,width:34,height:28,borderRadius:10,border:"1px solid rgba(255,255,255,0.14)",background:Math.abs(X-1)<1e-6?"rgba(80,80,90,0.55)":"rgba(255,255,255,0.06)",color:"rgba(255,255,255,0.85)",cursor:Math.abs(X-1)<1e-6?"default":"pointer",fontSize:11,fontWeight:800},title:"Reset zoom",children:"1"})]}),M.jsx(r6,{open:!!(Ne!=null&&Ne.open),anchorX:(Ne==null?void 0:Ne.anchorX)??0,anchorY:(Ne==null?void 0:Ne.anchorY)??0,items:bs,onClose:Et,size:240}),$r==="moving"&&M.jsxs("div",{onMouseDown:A=>A.stopPropagation(),style:{position:"absolute",left:10,bottom:10,zIndex:40,display:"flex",gap:8,padding:"8px 10px",borderRadius:10,background:"rgba(10, 10, 16, 0.75)",border:"1px solid rgba(255,255,255,0.14)",backdropFilter:"blur(6px)",boxShadow:"0 14px 40px rgba(0,0,0,0.35)"},children:[M.jsx("span",{style:{fontSize:12,alignSelf:"center",color:"#cfd3ff"},children:"Mode deplacement"}),M.jsx("button",{type:"button",onClick:()=>Or("idle"),style:{padding:"4px 8px",background:"#34495e",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:12},children:"Quitter"}),M.jsx("button",{type:"button",onClick:zo,disabled:dt.length===0,style:{padding:"4px 8px",background:dt.length?"#e67e22":"#555",color:"#fff",border:"none",borderRadius:6,cursor:dt.length?"pointer":"default",fontSize:12},children:"Annuler"}),M.jsx("button",{type:"button",onClick:Vt,disabled:dt.length===0,style:{padding:"4px 8px",background:dt.length?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:6,cursor:dt.length?"pointer":"default",fontSize:12,fontWeight:600},children:"Valider"})]})]})}),M.jsx(Q4,{round:w,narrativeLog:o})]}),M.jsx(i6,{tabs:Do,defaultTabId:"combat",collapsible:!0,collapsedByDefault:!0,collapsedHeight:52,expandedHeight:320})]})},d6=document.getElementById("root");Rg.createRoot(d6).render(M.jsx(h6,{}));export{T3 as $,fp as A,Jt as B,ln as C,Ke as D,ge as E,D0 as F,fl as G,c1 as H,ss as I,Q3 as J,o5 as K,ko as L,Le as M,mt as N,it as O,Ot as P,k5 as Q,Gc as R,lh as S,Va as T,Oc as U,d1 as V,xc as W,f1 as X,M3 as Y,rs as Z,wt as _,tp as a,F0 as a0,pp as a1,Re as a2,He as a3,E5 as a4,J5 as a5,V5 as a6,xx as a7,_x as a8,Cx as a9,Px as aa,Tx as ab,Ep as ac,T1 as ad,A1 as ae,e0 as af,qn as ag,E8 as ah,tt as ai,pi as aj,Qy as ak,So as al,c0 as am,Ip as an,zn as b,U5 as c,_o as d,Lt as e,P1 as f,O5 as g,il as h,ah as i,cp as j,H0 as k,Bn as l,sp as m,bo as n,yx as o,vx as p,bx as q,h3 as r,Ax as s,ze as t,Ky as u,Ex as v,nt as w,bn as x,R0 as y,Fn as z};
