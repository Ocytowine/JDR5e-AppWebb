const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-DER0nwqI.js","assets/webworkerAll-DAfRxMqu.js","assets/colorToUniform-DhNX1Vuo.js","assets/WebGPURenderer-DgN93LYP.js","assets/SharedSystems-LqK-IcjT.js","assets/WebGLRenderer-CjQbM0ij.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Tc(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Au={exports:{}},Ps={},Pu={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf;function Qy(){if(pf)return Ee;pf=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function _(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function w(R,N,ye){this.props=R,this.context=N,this.refs=k,this.updater=ye||v}w.prototype.isReactComponent={},w.prototype.setState=function(R,N){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,N,"setState")},w.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function P(){}P.prototype=w.prototype;function T(R,N,ye){this.props=R,this.context=N,this.refs=k,this.updater=ye||v}var E=T.prototype=new P;E.constructor=T,S(E,w.prototype),E.isPureReactComponent=!0;var I=Array.isArray,U=Object.prototype.hasOwnProperty,D={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function te(R,N,ye){var _e,be={},Ae=null,De=null;if(N!=null)for(_e in N.ref!==void 0&&(De=N.ref),N.key!==void 0&&(Ae=""+N.key),N)U.call(N,_e)&&!O.hasOwnProperty(_e)&&(be[_e]=N[_e]);var xe=arguments.length-2;if(xe===1)be.children=ye;else if(1<xe){for(var Fe=Array(xe),We=0;We<xe;We++)Fe[We]=arguments[We+2];be.children=Fe}if(R&&R.defaultProps)for(_e in xe=R.defaultProps,xe)be[_e]===void 0&&(be[_e]=xe[_e]);return{$$typeof:i,type:R,key:Ae,ref:De,props:be,_owner:D.current}}function ie(R,N){return{$$typeof:i,type:R.type,key:N,ref:R.ref,props:R.props,_owner:R._owner}}function X(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function ee(R){var N={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ye){return N[ye]})}var Se=/\/+/g;function Ce(R,N){return typeof R=="object"&&R!==null&&R.key!=null?ee(""+R.key):N.toString(36)}function ke(R,N,ye,_e,be){var Ae=typeof R;(Ae==="undefined"||Ae==="boolean")&&(R=null);var De=!1;if(R===null)De=!0;else switch(Ae){case"string":case"number":De=!0;break;case"object":switch(R.$$typeof){case i:case e:De=!0}}if(De)return De=R,be=be(De),R=_e===""?"."+Ce(De,0):_e,I(be)?(ye="",R!=null&&(ye=R.replace(Se,"$&/")+"/"),ke(be,N,ye,"",function(We){return We})):be!=null&&(X(be)&&(be=ie(be,ye+(!be.key||De&&De.key===be.key?"":(""+be.key).replace(Se,"$&/")+"/")+R)),N.push(be)),1;if(De=0,_e=_e===""?".":_e+":",I(R))for(var xe=0;xe<R.length;xe++){Ae=R[xe];var Fe=_e+Ce(Ae,xe);De+=ke(Ae,N,ye,Fe,be)}else if(Fe=_(R),typeof Fe=="function")for(R=Fe.call(R),xe=0;!(Ae=R.next()).done;)Ae=Ae.value,Fe=_e+Ce(Ae,xe++),De+=ke(Ae,N,ye,Fe,be);else if(Ae==="object")throw N=String(R),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return De}function ft(R,N,ye){if(R==null)return R;var _e=[],be=0;return ke(R,_e,"","",function(Ae){return N.call(ye,Ae,be++)}),_e}function Z(R){if(R._status===-1){var N=R._result;N=N(),N.then(function(ye){(R._status===0||R._status===-1)&&(R._status=1,R._result=ye)},function(ye){(R._status===0||R._status===-1)&&(R._status=2,R._result=ye)}),R._status===-1&&(R._status=0,R._result=N)}if(R._status===1)return R._result.default;throw R._result}var ne={current:null},K={transition:null},q={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:K,ReactCurrentOwner:D};function J(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:ft,forEach:function(R,N,ye){ft(R,function(){N.apply(this,arguments)},ye)},count:function(R){var N=0;return ft(R,function(){N++}),N},toArray:function(R){return ft(R,function(N){return N})||[]},only:function(R){if(!X(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ee.Component=w,Ee.Fragment=t,Ee.Profiler=o,Ee.PureComponent=T,Ee.StrictMode=s,Ee.Suspense=f,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Ee.act=J,Ee.cloneElement=function(R,N,ye){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var _e=S({},R.props),be=R.key,Ae=R.ref,De=R._owner;if(N!=null){if(N.ref!==void 0&&(Ae=N.ref,De=D.current),N.key!==void 0&&(be=""+N.key),R.type&&R.type.defaultProps)var xe=R.type.defaultProps;for(Fe in N)U.call(N,Fe)&&!O.hasOwnProperty(Fe)&&(_e[Fe]=N[Fe]===void 0&&xe!==void 0?xe[Fe]:N[Fe])}var Fe=arguments.length-2;if(Fe===1)_e.children=ye;else if(1<Fe){xe=Array(Fe);for(var We=0;We<Fe;We++)xe[We]=arguments[We+2];_e.children=xe}return{$$typeof:i,type:R.type,key:be,ref:Ae,props:_e,_owner:De}},Ee.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},Ee.createElement=te,Ee.createFactory=function(R){var N=te.bind(null,R);return N.type=R,N},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(R){return{$$typeof:h,render:R}},Ee.isValidElement=X,Ee.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:Z}},Ee.memo=function(R,N){return{$$typeof:p,type:R,compare:N===void 0?null:N}},Ee.startTransition=function(R){var N=K.transition;K.transition={};try{R()}finally{K.transition=N}},Ee.unstable_act=J,Ee.useCallback=function(R,N){return ne.current.useCallback(R,N)},Ee.useContext=function(R){return ne.current.useContext(R)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(R){return ne.current.useDeferredValue(R)},Ee.useEffect=function(R,N){return ne.current.useEffect(R,N)},Ee.useId=function(){return ne.current.useId()},Ee.useImperativeHandle=function(R,N,ye){return ne.current.useImperativeHandle(R,N,ye)},Ee.useInsertionEffect=function(R,N){return ne.current.useInsertionEffect(R,N)},Ee.useLayoutEffect=function(R,N){return ne.current.useLayoutEffect(R,N)},Ee.useMemo=function(R,N){return ne.current.useMemo(R,N)},Ee.useReducer=function(R,N,ye){return ne.current.useReducer(R,N,ye)},Ee.useRef=function(R){return ne.current.useRef(R)},Ee.useState=function(R){return ne.current.useState(R)},Ee.useSyncExternalStore=function(R,N,ye){return ne.current.useSyncExternalStore(R,N,ye)},Ee.useTransition=function(){return ne.current.useTransition()},Ee.version="18.3.1",Ee}var mf;function Ec(){return mf||(mf=1,Pu.exports=Qy()),Pu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gf;function Zy(){if(gf)return Ps;gf=1;var i=Ec(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,p){var m,y={},_=null,v=null;p!==void 0&&(_=""+p),f.key!==void 0&&(_=""+f.key),f.ref!==void 0&&(v=f.ref);for(m in f)s.call(f,m)&&!l.hasOwnProperty(m)&&(y[m]=f[m]);if(h&&h.defaultProps)for(m in f=h.defaultProps,f)y[m]===void 0&&(y[m]=f[m]);return{$$typeof:e,type:h,key:_,ref:v,props:y,_owner:o.current}}return Ps.Fragment=t,Ps.jsx=u,Ps.jsxs=u,Ps}var yf;function Jy(){return yf||(yf=1,Au.exports=Zy()),Au.exports}var B=Jy(),ha={},Tu={exports:{}},Wt={},Eu={exports:{}},Mu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf;function ex(){return xf||(xf=1,(function(i){function e(K,q){var J=K.length;K.push(q);e:for(;0<J;){var R=J-1>>>1,N=K[R];if(0<o(N,q))K[R]=q,K[J]=N,J=R;else break e}}function t(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var q=K[0],J=K.pop();if(J!==q){K[0]=J;e:for(var R=0,N=K.length,ye=N>>>1;R<ye;){var _e=2*(R+1)-1,be=K[_e],Ae=_e+1,De=K[Ae];if(0>o(be,J))Ae<N&&0>o(De,be)?(K[R]=De,K[Ae]=J,R=Ae):(K[R]=be,K[_e]=J,R=_e);else if(Ae<N&&0>o(De,J))K[R]=De,K[Ae]=J,R=Ae;else break e}}return q}function o(K,q){var J=K.sortIndex-q.sortIndex;return J!==0?J:K.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var f=[],p=[],m=1,y=null,_=3,v=!1,S=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(K){for(var q=t(p);q!==null;){if(q.callback===null)s(p);else if(q.startTime<=K)s(p),q.sortIndex=q.expirationTime,e(f,q);else break;q=t(p)}}function I(K){if(k=!1,E(K),!S)if(t(f)!==null)S=!0,Z(U);else{var q=t(p);q!==null&&ne(I,q.startTime-K)}}function U(K,q){S=!1,k&&(k=!1,P(te),te=-1),v=!0;var J=_;try{for(E(q),y=t(f);y!==null&&(!(y.expirationTime>q)||K&&!ee());){var R=y.callback;if(typeof R=="function"){y.callback=null,_=y.priorityLevel;var N=R(y.expirationTime<=q);q=i.unstable_now(),typeof N=="function"?y.callback=N:y===t(f)&&s(f),E(q)}else s(f);y=t(f)}if(y!==null)var ye=!0;else{var _e=t(p);_e!==null&&ne(I,_e.startTime-q),ye=!1}return ye}finally{y=null,_=J,v=!1}}var D=!1,O=null,te=-1,ie=5,X=-1;function ee(){return!(i.unstable_now()-X<ie)}function Se(){if(O!==null){var K=i.unstable_now();X=K;var q=!0;try{q=O(!0,K)}finally{q?Ce():(D=!1,O=null)}}else D=!1}var Ce;if(typeof T=="function")Ce=function(){T(Se)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,ft=ke.port2;ke.port1.onmessage=Se,Ce=function(){ft.postMessage(null)}}else Ce=function(){w(Se,0)};function Z(K){O=K,D||(D=!0,Ce())}function ne(K,q){te=w(function(){K(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_continueExecution=function(){S||v||(S=!0,Z(U))},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(K){switch(_){case 1:case 2:case 3:var q=3;break;default:q=_}var J=_;_=q;try{return K()}finally{_=J}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(K,q){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var J=_;_=K;try{return q()}finally{_=J}},i.unstable_scheduleCallback=function(K,q,J){var R=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?R+J:R):J=R,K){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=J+N,K={id:m++,callback:q,priorityLevel:K,startTime:J,expirationTime:N,sortIndex:-1},J>R?(K.sortIndex=J,e(p,K),t(f)===null&&K===t(p)&&(k?(P(te),te=-1):k=!0,ne(I,J-R))):(K.sortIndex=N,e(f,K),S||v||(S=!0,Z(U))),K},i.unstable_shouldYield=ee,i.unstable_wrapCallback=function(K){var q=_;return function(){var J=_;_=q;try{return K.apply(this,arguments)}finally{_=J}}}})(Mu)),Mu}var _f;function tx(){return _f||(_f=1,Eu.exports=ex()),Eu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf;function nx(){if(vf)return Wt;vf=1;var i=Ec(),e=tx();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,r){u(n,r),u(n+"Capture",r)}function u(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function _(n){return f.call(y,n)?!0:f.call(m,n)?!1:p.test(n)?y[n]=!0:(m[n]=!0,!1)}function v(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,r,a,c){if(r===null||typeof r>"u"||v(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function k(n,r,a,c,d,g,x){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=g,this.removeEmptyString=x}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){w[n]=new k(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];w[r]=new k(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){w[n]=new k(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){w[n]=new k(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){w[n]=new k(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){w[n]=new k(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){w[n]=new k(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){w[n]=new k(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){w[n]=new k(n,5,!1,n.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function T(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(P,T);w[r]=new k(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(P,T);w[r]=new k(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(P,T);w[r]=new k(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){w[n]=new k(n,1,!1,n.toLowerCase(),null,!1,!1)}),w.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){w[n]=new k(n,1,!1,n.toLowerCase(),null,!0,!0)});function E(n,r,a,c){var d=w.hasOwnProperty(r)?w[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,a,d,c)&&(a=null),c||d===null?_(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var I=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),D=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),ee=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),K=Symbol.iterator;function q(n){return n===null||typeof n!="object"?null:(n=K&&n[K]||n["@@iterator"],typeof n=="function"?n:null)}var J=Object.assign,R;function N(n){if(R===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);R=r&&r[1]||""}return`
`+R+n}var ye=!1;function _e(n,r){if(!n||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(z){var c=z}Reflect.construct(n,[],r)}else{try{r.call()}catch(z){c=z}n.call(r.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),g=c.stack.split(`
`),x=d.length-1,C=g.length-1;1<=x&&0<=C&&d[x]!==g[C];)C--;for(;1<=x&&0<=C;x--,C--)if(d[x]!==g[C]){if(x!==1||C!==1)do if(x--,C--,0>C||d[x]!==g[C]){var A=`
`+d[x].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=x&&0<=C);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?N(n):""}function be(n){switch(n.tag){case 5:return N(n.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return n=_e(n.type,!1),n;case 11:return n=_e(n.type.render,!1),n;case 1:return n=_e(n.type,!0),n;default:return""}}function Ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case O:return"Fragment";case D:return"Portal";case ie:return"Profiler";case te:return"StrictMode";case Ce:return"Suspense";case ke:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ee:return(n.displayName||"Context")+".Consumer";case X:return(n._context.displayName||"Context")+".Provider";case Se:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ft:return r=n.displayName||null,r!==null?r:Ae(n.type)||"Memo";case Z:r=n._payload,n=n._init;try{return Ae(n(r))}catch{}}return null}function De(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(r);case 8:return r===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function xe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Fe(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function We(n){var r=Fe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(x){c=""+x,g.call(this,x)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Zt(n){n._valueTracker||(n._valueTracker=We(n))}function Jt(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Fe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function At(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function jt(n,r){var a=r.checked;return J({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function pt(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=xe(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Zn(n,r){r=r.checked,r!=null&&E(n,"checked",r,!1)}function Jn(n,r){Zn(n,r);var a=xe(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Ln(n,r.type,a):r.hasOwnProperty("defaultValue")&&Ln(n,r.type,xe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Fn(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ln(n,r,a){(r!=="number"||At(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var er=Array.isArray;function Bn(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+xe(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Zr(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function tr(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(er(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:xe(a)}}function Zs(n,r){var a=xe(r.value),c=xe(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Jr(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function ji(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Di(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?ji(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ge,Oi=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(ge=ge||document.createElement("div"),ge.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ge.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function zn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Js=["Webkit","ms","Moz","O"];Object.keys(jn).forEach(function(n){Js.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),jn[r]=jn[n]})});function Ni(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||jn.hasOwnProperty(n)&&jn[n]?(""+r).trim():r+"px"}function eo(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Ni(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Wa=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $i(n,r){if(r){if(Wa[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Gi(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nr=null;function ei(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Tr=null,rr=null,ir=null;function to(n){if(n=ds(n)){if(typeof Tr!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Ao(r),Tr(n.stateNode,n.type,r))}}function no(n){rr?ir?ir.push(n):ir=[n]:rr=n}function ro(){if(rr){var n=rr,r=ir;if(ir=rr=null,to(n),r)for(n=0;n<r.length;n++)to(r[n])}}function io(n,r){return n(r)}function so(){}var Ui=!1;function oo(n,r,a){if(Ui)return n(r,a);Ui=!0;try{return io(n,r,a)}finally{Ui=!1,(rr!==null||ir!==null)&&(so(),ro())}}function Er(n,r){var a=n.stateNode;if(a===null)return null;var c=Ao(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var Wi=!1;if(h)try{var Mr={};Object.defineProperty(Mr,"passive",{get:function(){Wi=!0}}),window.addEventListener("test",Mr,Mr),window.removeEventListener("test",Mr,Mr)}catch{Wi=!1}function Ha(n,r,a,c,d,g,x,C,A){var z=Array.prototype.slice.call(arguments,3);try{r.apply(a,z)}catch(G){this.onError(G)}}var He=!1,ht=null,Ve=!1,Dt=null,sr={onError:function(n){He=!0,ht=n}};function Va(n,r,a,c,d,g,x,C,A){He=!1,ht=null,Ha.apply(sr,arguments)}function ao(n,r,a,c,d,g,x,C,A){if(Va.apply(this,arguments),He){if(He){var z=ht;He=!1,ht=null}else throw Error(t(198));Ve||(Ve=!0,Dt=z)}}function bn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Hi(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Vi(n){if(bn(n)!==n)throw Error(t(188))}function b(n){var r=n.alternate;if(!r){if(r=bn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Vi(d),n;if(g===c)return Vi(d),r;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=g;else{for(var x=!1,C=d.child;C;){if(C===a){x=!0,a=d,c=g;break}if(C===c){x=!0,c=d,a=g;break}C=C.sibling}if(!x){for(C=g.child;C;){if(C===a){x=!0,a=g,c=d;break}if(C===c){x=!0,c=g,a=d;break}C=C.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function j(n){return n=b(n),n!==null?Q(n):null}function Q(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Q(n);if(r!==null)return r;n=n.sibling}return null}var oe=e.unstable_scheduleCallback,Y=e.unstable_cancelCallback,le=e.unstable_shouldYield,de=e.unstable_requestPaint,W=e.unstable_now,we=e.unstable_getCurrentPriorityLevel,ze=e.unstable_ImmediatePriority,Ie=e.unstable_UserBlockingPriority,Pe=e.unstable_NormalPriority,st=e.unstable_LowPriority,tt=e.unstable_IdlePriority,Ye=null,Oe=null;function hn(n){if(Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Ye,n,void 0,(n.current.flags&128)===128)}catch{}}var $e=Math.clz32?Math.clz32:Yi,xt=Math.log,Rr=Math.LN2;function Yi(n){return n>>>=0,n===0?32:31-(xt(n)/Rr|0)|0}var en=64,lo=4194304;function Xi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function uo(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,g=n.pingedLanes,x=a&268435455;if(x!==0){var C=x&~d;C!==0?c=Xi(C):(g&=x,g!==0&&(c=Xi(g)))}else x=a&~d,x!==0?c=Xi(x):g!==0&&(c=Xi(g));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,g=r&-r,d>=g||d===16&&(g&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-$e(r),d=1<<a,c|=n[a],r&=~d;return c}function gg(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yg(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes;0<g;){var x=31-$e(g),C=1<<x,A=d[x];A===-1?((C&a)===0||(C&c)!==0)&&(d[x]=gg(C,r)):A<=r&&(n.expiredLanes|=C),g&=~C}}function Ya(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Wc(){var n=en;return en<<=1,(en&4194240)===0&&(en=64),n}function Xa(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function qi(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-$e(r),n[r]=a}function xg(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-$e(a),g=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~g}}function qa(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-$e(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Ne=0;function Hc(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Vc,Ka,Yc,Xc,qc,Qa=!1,co=[],or=null,ar=null,lr=null,Ki=new Map,Qi=new Map,ur=[],_g="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kc(n,r){switch(n){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":Ki.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(r.pointerId)}}function Zi(n,r,a,c,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},r!==null&&(r=ds(r),r!==null&&Ka(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function vg(n,r,a,c,d){switch(r){case"focusin":return or=Zi(or,n,r,a,c,d),!0;case"dragenter":return ar=Zi(ar,n,r,a,c,d),!0;case"mouseover":return lr=Zi(lr,n,r,a,c,d),!0;case"pointerover":var g=d.pointerId;return Ki.set(g,Zi(Ki.get(g)||null,n,r,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,Qi.set(g,Zi(Qi.get(g)||null,n,r,a,c,d)),!0}return!1}function Qc(n){var r=Ir(n.target);if(r!==null){var a=bn(r);if(a!==null){if(r=a.tag,r===13){if(r=Hi(a),r!==null){n.blockedOn=r,qc(n.priority,function(){Yc(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ho(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Ja(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);nr=c,a.target.dispatchEvent(c),nr=null}else return r=ds(a),r!==null&&Ka(r),n.blockedOn=a,!1;r.shift()}return!0}function Zc(n,r,a){ho(n)&&a.delete(r)}function wg(){Qa=!1,or!==null&&ho(or)&&(or=null),ar!==null&&ho(ar)&&(ar=null),lr!==null&&ho(lr)&&(lr=null),Ki.forEach(Zc),Qi.forEach(Zc)}function Ji(n,r){n.blockedOn===r&&(n.blockedOn=null,Qa||(Qa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wg)))}function es(n){function r(d){return Ji(d,n)}if(0<co.length){Ji(co[0],n);for(var a=1;a<co.length;a++){var c=co[a];c.blockedOn===n&&(c.blockedOn=null)}}for(or!==null&&Ji(or,n),ar!==null&&Ji(ar,n),lr!==null&&Ji(lr,n),Ki.forEach(r),Qi.forEach(r),a=0;a<ur.length;a++)c=ur[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<ur.length&&(a=ur[0],a.blockedOn===null);)Qc(a),a.blockedOn===null&&ur.shift()}var ti=I.ReactCurrentBatchConfig,fo=!0;function Sg(n,r,a,c){var d=Ne,g=ti.transition;ti.transition=null;try{Ne=1,Za(n,r,a,c)}finally{Ne=d,ti.transition=g}}function Cg(n,r,a,c){var d=Ne,g=ti.transition;ti.transition=null;try{Ne=4,Za(n,r,a,c)}finally{Ne=d,ti.transition=g}}function Za(n,r,a,c){if(fo){var d=Ja(n,r,a,c);if(d===null)gl(n,r,c,po,a),Kc(n,c);else if(vg(d,n,r,a,c))c.stopPropagation();else if(Kc(n,c),r&4&&-1<_g.indexOf(n)){for(;d!==null;){var g=ds(d);if(g!==null&&Vc(g),g=Ja(n,r,a,c),g===null&&gl(n,r,c,po,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else gl(n,r,c,null,a)}}var po=null;function Ja(n,r,a,c){if(po=null,n=ei(c),n=Ir(n),n!==null)if(r=bn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Hi(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return po=n,null}function Jc(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(we()){case ze:return 1;case Ie:return 4;case Pe:case st:return 16;case tt:return 536870912;default:return 16}default:return 16}}var cr=null,el=null,mo=null;function eh(){if(mo)return mo;var n,r=el,a=r.length,c,d="value"in cr?cr.value:cr.textContent,g=d.length;for(n=0;n<a&&r[n]===d[n];n++);var x=a-n;for(c=1;c<=x&&r[a-c]===d[g-c];c++);return mo=d.slice(n,1<c?1-c:void 0)}function go(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function yo(){return!0}function th(){return!1}function Vt(n){function r(a,c,d,g,x){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?yo:th,this.isPropagationStopped=th,this}return J(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),r}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=Vt(ni),ts=J({},ni,{view:0,detail:0}),kg=Vt(ts),nl,rl,ns,xo=J({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ns&&(ns&&n.type==="mousemove"?(nl=n.screenX-ns.screenX,rl=n.screenY-ns.screenY):rl=nl=0,ns=n),nl)},movementY:function(n){return"movementY"in n?n.movementY:rl}}),nh=Vt(xo),bg=J({},xo,{dataTransfer:0}),Ag=Vt(bg),Pg=J({},ts,{relatedTarget:0}),il=Vt(Pg),Tg=J({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Eg=Vt(Tg),Mg=J({},ni,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Rg=Vt(Mg),Ig=J({},ni,{data:0}),rh=Vt(Ig),Fg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zg(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Bg[n])?!!r[n]:!1}function sl(){return zg}var jg=J({},ts,{key:function(n){if(n.key){var r=Fg[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=go(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Lg[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sl,charCode:function(n){return n.type==="keypress"?go(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?go(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Dg=Vt(jg),Og=J({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ih=Vt(Og),Ng=J({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sl}),$g=Vt(Ng),Gg=J({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ug=Vt(Gg),Wg=J({},xo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Hg=Vt(Wg),Vg=[9,13,27,32],ol=h&&"CompositionEvent"in window,rs=null;h&&"documentMode"in document&&(rs=document.documentMode);var Yg=h&&"TextEvent"in window&&!rs,sh=h&&(!ol||rs&&8<rs&&11>=rs),oh=" ",ah=!1;function lh(n,r){switch(n){case"keyup":return Vg.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ri=!1;function Xg(n,r){switch(n){case"compositionend":return uh(r);case"keypress":return r.which!==32?null:(ah=!0,oh);case"textInput":return n=r.data,n===oh&&ah?null:n;default:return null}}function qg(n,r){if(ri)return n==="compositionend"||!ol&&lh(n,r)?(n=eh(),mo=el=cr=null,ri=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return sh&&r.locale!=="ko"?null:r.data;default:return null}}var Kg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ch(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Kg[n.type]:r==="textarea"}function hh(n,r,a,c){no(c),r=Co(r,"onChange"),0<r.length&&(a=new tl("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var is=null,ss=null;function Qg(n){Eh(n,0)}function _o(n){var r=li(n);if(Jt(r))return n}function Zg(n,r){if(n==="change")return r}var dh=!1;if(h){var al;if(h){var ll="oninput"in document;if(!ll){var fh=document.createElement("div");fh.setAttribute("oninput","return;"),ll=typeof fh.oninput=="function"}al=ll}else al=!1;dh=al&&(!document.documentMode||9<document.documentMode)}function ph(){is&&(is.detachEvent("onpropertychange",mh),ss=is=null)}function mh(n){if(n.propertyName==="value"&&_o(ss)){var r=[];hh(r,ss,n,ei(n)),oo(Qg,r)}}function Jg(n,r,a){n==="focusin"?(ph(),is=r,ss=a,is.attachEvent("onpropertychange",mh)):n==="focusout"&&ph()}function ey(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _o(ss)}function ty(n,r){if(n==="click")return _o(r)}function ny(n,r){if(n==="input"||n==="change")return _o(r)}function ry(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var dn=typeof Object.is=="function"?Object.is:ry;function os(n,r){if(dn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!f.call(r,d)||!dn(n[d],r[d]))return!1}return!0}function gh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function yh(n,r){var a=gh(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gh(a)}}function xh(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?xh(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function _h(){for(var n=window,r=At();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=At(n.document)}return r}function ul(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function iy(n){var r=_h(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&xh(a.ownerDocument.documentElement,a)){if(c!==null&&ul(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,g=Math.min(c.start,d);c=c.end===void 0?g:Math.min(c.end,d),!n.extend&&g>c&&(d=c,c=g,g=d),d=yh(a,g);var x=yh(a,c);d&&x&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),g>c?(n.addRange(r),n.extend(x.node,x.offset)):(r.setEnd(x.node,x.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var sy=h&&"documentMode"in document&&11>=document.documentMode,ii=null,cl=null,as=null,hl=!1;function vh(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hl||ii==null||ii!==At(c)||(c=ii,"selectionStart"in c&&ul(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),as&&os(as,c)||(as=c,c=Co(cl,"onSelect"),0<c.length&&(r=new tl("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=ii)))}function vo(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var si={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionend:vo("Transition","TransitionEnd")},dl={},wh={};h&&(wh=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function wo(n){if(dl[n])return dl[n];if(!si[n])return n;var r=si[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in wh)return dl[n]=r[a];return n}var Sh=wo("animationend"),Ch=wo("animationiteration"),kh=wo("animationstart"),bh=wo("transitionend"),Ah=new Map,Ph="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(n,r){Ah.set(n,r),l(r,[n])}for(var fl=0;fl<Ph.length;fl++){var pl=Ph[fl],oy=pl.toLowerCase(),ay=pl[0].toUpperCase()+pl.slice(1);hr(oy,"on"+ay)}hr(Sh,"onAnimationEnd"),hr(Ch,"onAnimationIteration"),hr(kh,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(bh,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ly=new Set("cancel close invalid load scroll toggle".split(" ").concat(ls));function Th(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,ao(c,r,void 0,n),n.currentTarget=null}function Eh(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var g=void 0;if(r)for(var x=c.length-1;0<=x;x--){var C=c[x],A=C.instance,z=C.currentTarget;if(C=C.listener,A!==g&&d.isPropagationStopped())break e;Th(d,C,z),g=A}else for(x=0;x<c.length;x++){if(C=c[x],A=C.instance,z=C.currentTarget,C=C.listener,A!==g&&d.isPropagationStopped())break e;Th(d,C,z),g=A}}}if(Ve)throw n=Dt,Ve=!1,Dt=null,n}function qe(n,r){var a=r[Sl];a===void 0&&(a=r[Sl]=new Set);var c=n+"__bubble";a.has(c)||(Mh(r,n,2,!1),a.add(c))}function ml(n,r,a){var c=0;r&&(c|=4),Mh(a,n,c,r)}var So="_reactListening"+Math.random().toString(36).slice(2);function us(n){if(!n[So]){n[So]=!0,s.forEach(function(a){a!=="selectionchange"&&(ly.has(a)||ml(a,!1,n),ml(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[So]||(r[So]=!0,ml("selectionchange",!1,r))}}function Mh(n,r,a,c){switch(Jc(r)){case 1:var d=Sg;break;case 4:d=Cg;break;default:d=Za}a=d.bind(null,r,a,n),d=void 0,!Wi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function gl(n,r,a,c,d){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(x===4)for(x=c.return;x!==null;){var A=x.tag;if((A===3||A===4)&&(A=x.stateNode.containerInfo,A===d||A.nodeType===8&&A.parentNode===d))return;x=x.return}for(;C!==null;){if(x=Ir(C),x===null)return;if(A=x.tag,A===5||A===6){c=g=x;continue e}C=C.parentNode}}c=c.return}oo(function(){var z=g,G=ei(a),H=[];e:{var $=Ah.get(n);if($!==void 0){var re=tl,ae=n;switch(n){case"keypress":if(go(a)===0)break e;case"keydown":case"keyup":re=Dg;break;case"focusin":ae="focus",re=il;break;case"focusout":ae="blur",re=il;break;case"beforeblur":case"afterblur":re=il;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=nh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=$g;break;case Sh:case Ch:case kh:re=Eg;break;case bh:re=Ug;break;case"scroll":re=kg;break;case"wheel":re=Hg;break;case"copy":case"cut":case"paste":re=Rg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=ih}var ue=(r&4)!==0,ut=!ue&&n==="scroll",F=ue?$!==null?$+"Capture":null:$;ue=[];for(var M=z,L;M!==null;){L=M;var V=L.stateNode;if(L.tag===5&&V!==null&&(L=V,F!==null&&(V=Er(M,F),V!=null&&ue.push(cs(M,V,L)))),ut)break;M=M.return}0<ue.length&&($=new re($,ae,null,a,G),H.push({event:$,listeners:ue}))}}if((r&7)===0){e:{if($=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",$&&a!==nr&&(ae=a.relatedTarget||a.fromElement)&&(Ir(ae)||ae[Dn]))break e;if((re||$)&&($=G.window===G?G:($=G.ownerDocument)?$.defaultView||$.parentWindow:window,re?(ae=a.relatedTarget||a.toElement,re=z,ae=ae?Ir(ae):null,ae!==null&&(ut=bn(ae),ae!==ut||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(re=null,ae=z),re!==ae)){if(ue=nh,V="onMouseLeave",F="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ue=ih,V="onPointerLeave",F="onPointerEnter",M="pointer"),ut=re==null?$:li(re),L=ae==null?$:li(ae),$=new ue(V,M+"leave",re,a,G),$.target=ut,$.relatedTarget=L,V=null,Ir(G)===z&&(ue=new ue(F,M+"enter",ae,a,G),ue.target=L,ue.relatedTarget=ut,V=ue),ut=V,re&&ae)t:{for(ue=re,F=ae,M=0,L=ue;L;L=oi(L))M++;for(L=0,V=F;V;V=oi(V))L++;for(;0<M-L;)ue=oi(ue),M--;for(;0<L-M;)F=oi(F),L--;for(;M--;){if(ue===F||F!==null&&ue===F.alternate)break t;ue=oi(ue),F=oi(F)}ue=null}else ue=null;re!==null&&Rh(H,$,re,ue,!1),ae!==null&&ut!==null&&Rh(H,ut,ae,ue,!0)}}e:{if($=z?li(z):window,re=$.nodeName&&$.nodeName.toLowerCase(),re==="select"||re==="input"&&$.type==="file")var ce=Zg;else if(ch($))if(dh)ce=ny;else{ce=ey;var pe=Jg}else(re=$.nodeName)&&re.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ce=ty);if(ce&&(ce=ce(n,z))){hh(H,ce,a,G);break e}pe&&pe(n,$,z),n==="focusout"&&(pe=$._wrapperState)&&pe.controlled&&$.type==="number"&&Ln($,"number",$.value)}switch(pe=z?li(z):window,n){case"focusin":(ch(pe)||pe.contentEditable==="true")&&(ii=pe,cl=z,as=null);break;case"focusout":as=cl=ii=null;break;case"mousedown":hl=!0;break;case"contextmenu":case"mouseup":case"dragend":hl=!1,vh(H,a,G);break;case"selectionchange":if(sy)break;case"keydown":case"keyup":vh(H,a,G)}var me;if(ol)e:{switch(n){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else ri?lh(n,a)&&(ve="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&(sh&&a.locale!=="ko"&&(ri||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&ri&&(me=eh()):(cr=G,el="value"in cr?cr.value:cr.textContent,ri=!0)),pe=Co(z,ve),0<pe.length&&(ve=new rh(ve,n,null,a,G),H.push({event:ve,listeners:pe}),me?ve.data=me:(me=uh(a),me!==null&&(ve.data=me)))),(me=Yg?Xg(n,a):qg(n,a))&&(z=Co(z,"onBeforeInput"),0<z.length&&(G=new rh("onBeforeInput","beforeinput",null,a,G),H.push({event:G,listeners:z}),G.data=me))}Eh(H,r)})}function cs(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Co(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=Er(n,a),g!=null&&c.unshift(cs(n,g,d)),g=Er(n,r),g!=null&&c.push(cs(n,g,d))),n=n.return}return c}function oi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Rh(n,r,a,c,d){for(var g=r._reactName,x=[];a!==null&&a!==c;){var C=a,A=C.alternate,z=C.stateNode;if(A!==null&&A===c)break;C.tag===5&&z!==null&&(C=z,d?(A=Er(a,g),A!=null&&x.unshift(cs(a,A,C))):d||(A=Er(a,g),A!=null&&x.push(cs(a,A,C)))),a=a.return}x.length!==0&&n.push({event:r,listeners:x})}var uy=/\r\n?/g,cy=/\u0000|\uFFFD/g;function Ih(n){return(typeof n=="string"?n:""+n).replace(uy,`
`).replace(cy,"")}function ko(n,r,a){if(r=Ih(r),Ih(n)!==r&&a)throw Error(t(425))}function bo(){}var yl=null,xl=null;function _l(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var vl=typeof setTimeout=="function"?setTimeout:void 0,hy=typeof clearTimeout=="function"?clearTimeout:void 0,Fh=typeof Promise=="function"?Promise:void 0,dy=typeof queueMicrotask=="function"?queueMicrotask:typeof Fh<"u"?function(n){return Fh.resolve(null).then(n).catch(fy)}:vl;function fy(n){setTimeout(function(){throw n})}function wl(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),es(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);es(r)}function dr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Lh(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var ai=Math.random().toString(36).slice(2),An="__reactFiber$"+ai,hs="__reactProps$"+ai,Dn="__reactContainer$"+ai,Sl="__reactEvents$"+ai,py="__reactListeners$"+ai,my="__reactHandles$"+ai;function Ir(n){var r=n[An];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Dn]||a[An]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Lh(n);n!==null;){if(a=n[An])return a;n=Lh(n)}return r}n=a,a=n.parentNode}return null}function ds(n){return n=n[An]||n[Dn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function li(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ao(n){return n[hs]||null}var Cl=[],ui=-1;function fr(n){return{current:n}}function Ke(n){0>ui||(n.current=Cl[ui],Cl[ui]=null,ui--)}function Xe(n,r){ui++,Cl[ui]=n.current,n.current=r}var pr={},Pt=fr(pr),Ot=fr(!1),Fr=pr;function ci(n,r){var a=n.type.contextTypes;if(!a)return pr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=r[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function Nt(n){return n=n.childContextTypes,n!=null}function Po(){Ke(Ot),Ke(Pt)}function Bh(n,r,a){if(Pt.current!==pr)throw Error(t(168));Xe(Pt,r),Xe(Ot,a)}function zh(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,De(n)||"Unknown",d));return J({},a,c)}function To(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||pr,Fr=Pt.current,Xe(Pt,n),Xe(Ot,Ot.current),!0}function jh(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=zh(n,r,Fr),c.__reactInternalMemoizedMergedChildContext=n,Ke(Ot),Ke(Pt),Xe(Pt,n)):Ke(Ot),Xe(Ot,a)}var On=null,Eo=!1,kl=!1;function Dh(n){On===null?On=[n]:On.push(n)}function gy(n){Eo=!0,Dh(n)}function mr(){if(!kl&&On!==null){kl=!0;var n=0,r=Ne;try{var a=On;for(Ne=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}On=null,Eo=!1}catch(d){throw On!==null&&(On=On.slice(n+1)),oe(ze,mr),d}finally{Ne=r,kl=!1}}return null}var hi=[],di=0,Mo=null,Ro=0,tn=[],nn=0,Lr=null,Nn=1,$n="";function Br(n,r){hi[di++]=Ro,hi[di++]=Mo,Mo=n,Ro=r}function Oh(n,r,a){tn[nn++]=Nn,tn[nn++]=$n,tn[nn++]=Lr,Lr=n;var c=Nn;n=$n;var d=32-$e(c)-1;c&=~(1<<d),a+=1;var g=32-$e(r)+d;if(30<g){var x=d-d%5;g=(c&(1<<x)-1).toString(32),c>>=x,d-=x,Nn=1<<32-$e(r)+d|a<<d|c,$n=g+n}else Nn=1<<g|a<<d|c,$n=n}function bl(n){n.return!==null&&(Br(n,1),Oh(n,1,0))}function Al(n){for(;n===Mo;)Mo=hi[--di],hi[di]=null,Ro=hi[--di],hi[di]=null;for(;n===Lr;)Lr=tn[--nn],tn[nn]=null,$n=tn[--nn],tn[nn]=null,Nn=tn[--nn],tn[nn]=null}var Yt=null,Xt=null,et=!1,fn=null;function Nh(n,r){var a=an(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function $h(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Yt=n,Xt=dr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Yt=n,Xt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Lr!==null?{id:Nn,overflow:$n}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=an(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,Yt=n,Xt=null,!0):!1;default:return!1}}function Pl(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Tl(n){if(et){var r=Xt;if(r){var a=r;if(!$h(n,r)){if(Pl(n))throw Error(t(418));r=dr(a.nextSibling);var c=Yt;r&&$h(n,r)?Nh(c,a):(n.flags=n.flags&-4097|2,et=!1,Yt=n)}}else{if(Pl(n))throw Error(t(418));n.flags=n.flags&-4097|2,et=!1,Yt=n}}}function Gh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Yt=n}function Io(n){if(n!==Yt)return!1;if(!et)return Gh(n),et=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!_l(n.type,n.memoizedProps)),r&&(r=Xt)){if(Pl(n))throw Uh(),Error(t(418));for(;r;)Nh(n,r),r=dr(r.nextSibling)}if(Gh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){Xt=dr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}Xt=null}}else Xt=Yt?dr(n.stateNode.nextSibling):null;return!0}function Uh(){for(var n=Xt;n;)n=dr(n.nextSibling)}function fi(){Xt=Yt=null,et=!1}function El(n){fn===null?fn=[n]:fn.push(n)}var yy=I.ReactCurrentBatchConfig;function fs(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,g=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(x){var C=d.refs;x===null?delete C[g]:C[g]=x},r._stringRef=g,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Fo(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Wh(n){var r=n._init;return r(n._payload)}function Hh(n){function r(F,M){if(n){var L=F.deletions;L===null?(F.deletions=[M],F.flags|=16):L.push(M)}}function a(F,M){if(!n)return null;for(;M!==null;)r(F,M),M=M.sibling;return null}function c(F,M){for(F=new Map;M!==null;)M.key!==null?F.set(M.key,M):F.set(M.index,M),M=M.sibling;return F}function d(F,M){return F=Cr(F,M),F.index=0,F.sibling=null,F}function g(F,M,L){return F.index=L,n?(L=F.alternate,L!==null?(L=L.index,L<M?(F.flags|=2,M):L):(F.flags|=2,M)):(F.flags|=1048576,M)}function x(F){return n&&F.alternate===null&&(F.flags|=2),F}function C(F,M,L,V){return M===null||M.tag!==6?(M=vu(L,F.mode,V),M.return=F,M):(M=d(M,L),M.return=F,M)}function A(F,M,L,V){var ce=L.type;return ce===O?G(F,M,L.props.children,V,L.key):M!==null&&(M.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Z&&Wh(ce)===M.type)?(V=d(M,L.props),V.ref=fs(F,M,L),V.return=F,V):(V=ra(L.type,L.key,L.props,null,F.mode,V),V.ref=fs(F,M,L),V.return=F,V)}function z(F,M,L,V){return M===null||M.tag!==4||M.stateNode.containerInfo!==L.containerInfo||M.stateNode.implementation!==L.implementation?(M=wu(L,F.mode,V),M.return=F,M):(M=d(M,L.children||[]),M.return=F,M)}function G(F,M,L,V,ce){return M===null||M.tag!==7?(M=Ur(L,F.mode,V,ce),M.return=F,M):(M=d(M,L),M.return=F,M)}function H(F,M,L){if(typeof M=="string"&&M!==""||typeof M=="number")return M=vu(""+M,F.mode,L),M.return=F,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case U:return L=ra(M.type,M.key,M.props,null,F.mode,L),L.ref=fs(F,null,M),L.return=F,L;case D:return M=wu(M,F.mode,L),M.return=F,M;case Z:var V=M._init;return H(F,V(M._payload),L)}if(er(M)||q(M))return M=Ur(M,F.mode,L,null),M.return=F,M;Fo(F,M)}return null}function $(F,M,L,V){var ce=M!==null?M.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return ce!==null?null:C(F,M,""+L,V);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case U:return L.key===ce?A(F,M,L,V):null;case D:return L.key===ce?z(F,M,L,V):null;case Z:return ce=L._init,$(F,M,ce(L._payload),V)}if(er(L)||q(L))return ce!==null?null:G(F,M,L,V,null);Fo(F,L)}return null}function re(F,M,L,V,ce){if(typeof V=="string"&&V!==""||typeof V=="number")return F=F.get(L)||null,C(M,F,""+V,ce);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case U:return F=F.get(V.key===null?L:V.key)||null,A(M,F,V,ce);case D:return F=F.get(V.key===null?L:V.key)||null,z(M,F,V,ce);case Z:var pe=V._init;return re(F,M,L,pe(V._payload),ce)}if(er(V)||q(V))return F=F.get(L)||null,G(M,F,V,ce,null);Fo(M,V)}return null}function ae(F,M,L,V){for(var ce=null,pe=null,me=M,ve=M=0,wt=null;me!==null&&ve<L.length;ve++){me.index>ve?(wt=me,me=null):wt=me.sibling;var je=$(F,me,L[ve],V);if(je===null){me===null&&(me=wt);break}n&&me&&je.alternate===null&&r(F,me),M=g(je,M,ve),pe===null?ce=je:pe.sibling=je,pe=je,me=wt}if(ve===L.length)return a(F,me),et&&Br(F,ve),ce;if(me===null){for(;ve<L.length;ve++)me=H(F,L[ve],V),me!==null&&(M=g(me,M,ve),pe===null?ce=me:pe.sibling=me,pe=me);return et&&Br(F,ve),ce}for(me=c(F,me);ve<L.length;ve++)wt=re(me,F,ve,L[ve],V),wt!==null&&(n&&wt.alternate!==null&&me.delete(wt.key===null?ve:wt.key),M=g(wt,M,ve),pe===null?ce=wt:pe.sibling=wt,pe=wt);return n&&me.forEach(function(kr){return r(F,kr)}),et&&Br(F,ve),ce}function ue(F,M,L,V){var ce=q(L);if(typeof ce!="function")throw Error(t(150));if(L=ce.call(L),L==null)throw Error(t(151));for(var pe=ce=null,me=M,ve=M=0,wt=null,je=L.next();me!==null&&!je.done;ve++,je=L.next()){me.index>ve?(wt=me,me=null):wt=me.sibling;var kr=$(F,me,je.value,V);if(kr===null){me===null&&(me=wt);break}n&&me&&kr.alternate===null&&r(F,me),M=g(kr,M,ve),pe===null?ce=kr:pe.sibling=kr,pe=kr,me=wt}if(je.done)return a(F,me),et&&Br(F,ve),ce;if(me===null){for(;!je.done;ve++,je=L.next())je=H(F,je.value,V),je!==null&&(M=g(je,M,ve),pe===null?ce=je:pe.sibling=je,pe=je);return et&&Br(F,ve),ce}for(me=c(F,me);!je.done;ve++,je=L.next())je=re(me,F,ve,je.value,V),je!==null&&(n&&je.alternate!==null&&me.delete(je.key===null?ve:je.key),M=g(je,M,ve),pe===null?ce=je:pe.sibling=je,pe=je);return n&&me.forEach(function(Ky){return r(F,Ky)}),et&&Br(F,ve),ce}function ut(F,M,L,V){if(typeof L=="object"&&L!==null&&L.type===O&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case U:e:{for(var ce=L.key,pe=M;pe!==null;){if(pe.key===ce){if(ce=L.type,ce===O){if(pe.tag===7){a(F,pe.sibling),M=d(pe,L.props.children),M.return=F,F=M;break e}}else if(pe.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Z&&Wh(ce)===pe.type){a(F,pe.sibling),M=d(pe,L.props),M.ref=fs(F,pe,L),M.return=F,F=M;break e}a(F,pe);break}else r(F,pe);pe=pe.sibling}L.type===O?(M=Ur(L.props.children,F.mode,V,L.key),M.return=F,F=M):(V=ra(L.type,L.key,L.props,null,F.mode,V),V.ref=fs(F,M,L),V.return=F,F=V)}return x(F);case D:e:{for(pe=L.key;M!==null;){if(M.key===pe)if(M.tag===4&&M.stateNode.containerInfo===L.containerInfo&&M.stateNode.implementation===L.implementation){a(F,M.sibling),M=d(M,L.children||[]),M.return=F,F=M;break e}else{a(F,M);break}else r(F,M);M=M.sibling}M=wu(L,F.mode,V),M.return=F,F=M}return x(F);case Z:return pe=L._init,ut(F,M,pe(L._payload),V)}if(er(L))return ae(F,M,L,V);if(q(L))return ue(F,M,L,V);Fo(F,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,M!==null&&M.tag===6?(a(F,M.sibling),M=d(M,L),M.return=F,F=M):(a(F,M),M=vu(L,F.mode,V),M.return=F,F=M),x(F)):a(F,M)}return ut}var pi=Hh(!0),Vh=Hh(!1),Lo=fr(null),Bo=null,mi=null,Ml=null;function Rl(){Ml=mi=Bo=null}function Il(n){var r=Lo.current;Ke(Lo),n._currentValue=r}function Fl(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function gi(n,r){Bo=n,Ml=mi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&($t=!0),n.firstContext=null)}function rn(n){var r=n._currentValue;if(Ml!==n)if(n={context:n,memoizedValue:r,next:null},mi===null){if(Bo===null)throw Error(t(308));mi=n,Bo.dependencies={lanes:0,firstContext:n}}else mi=mi.next=n;return r}var zr=null;function Ll(n){zr===null?zr=[n]:zr.push(n)}function Yh(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,Ll(r)):(a.next=d.next,d.next=a),r.interleaved=a,Gn(n,c)}function Gn(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var gr=!1;function Bl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xh(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Un(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function yr(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Be&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,Gn(n,a)}return d=c.interleaved,d===null?(r.next=r,Ll(c)):(r.next=d.next,d.next=r),c.interleaved=r,Gn(n,a)}function zo(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,qa(n,a)}}function qh(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=x:g=g.next=x,a=a.next}while(a!==null);g===null?d=g=r:g=g.next=r}else d=g=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function jo(n,r,a,c){var d=n.updateQueue;gr=!1;var g=d.firstBaseUpdate,x=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var A=C,z=A.next;A.next=null,x===null?g=z:x.next=z,x=A;var G=n.alternate;G!==null&&(G=G.updateQueue,C=G.lastBaseUpdate,C!==x&&(C===null?G.firstBaseUpdate=z:C.next=z,G.lastBaseUpdate=A))}if(g!==null){var H=d.baseState;x=0,G=z=A=null,C=g;do{var $=C.lane,re=C.eventTime;if((c&$)===$){G!==null&&(G=G.next={eventTime:re,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ae=n,ue=C;switch($=r,re=a,ue.tag){case 1:if(ae=ue.payload,typeof ae=="function"){H=ae.call(re,H,$);break e}H=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ue.payload,$=typeof ae=="function"?ae.call(re,H,$):ae,$==null)break e;H=J({},H,$);break e;case 2:gr=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,$=d.effects,$===null?d.effects=[C]:$.push(C))}else re={eventTime:re,lane:$,tag:C.tag,payload:C.payload,callback:C.callback,next:null},G===null?(z=G=re,A=H):G=G.next=re,x|=$;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;$=C,C=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);if(G===null&&(A=H),d.baseState=A,d.firstBaseUpdate=z,d.lastBaseUpdate=G,r=d.shared.interleaved,r!==null){d=r;do x|=d.lane,d=d.next;while(d!==r)}else g===null&&(d.shared.lanes=0);Or|=x,n.lanes=x,n.memoizedState=H}}function Kh(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ps={},Pn=fr(ps),ms=fr(ps),gs=fr(ps);function jr(n){if(n===ps)throw Error(t(174));return n}function zl(n,r){switch(Xe(gs,r),Xe(ms,n),Xe(Pn,ps),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Di(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=Di(r,n)}Ke(Pn),Xe(Pn,r)}function yi(){Ke(Pn),Ke(ms),Ke(gs)}function Qh(n){jr(gs.current);var r=jr(Pn.current),a=Di(r,n.type);r!==a&&(Xe(ms,n),Xe(Pn,a))}function jl(n){ms.current===n&&(Ke(Pn),Ke(ms))}var nt=fr(0);function Do(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Dl=[];function Ol(){for(var n=0;n<Dl.length;n++)Dl[n]._workInProgressVersionPrimary=null;Dl.length=0}var Oo=I.ReactCurrentDispatcher,Nl=I.ReactCurrentBatchConfig,Dr=0,rt=null,mt=null,_t=null,No=!1,ys=!1,xs=0,xy=0;function Tt(){throw Error(t(321))}function $l(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!dn(n[a],r[a]))return!1;return!0}function Gl(n,r,a,c,d,g){if(Dr=g,rt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Oo.current=n===null||n.memoizedState===null?Sy:Cy,n=a(c,d),ys){g=0;do{if(ys=!1,xs=0,25<=g)throw Error(t(301));g+=1,_t=mt=null,r.updateQueue=null,Oo.current=ky,n=a(c,d)}while(ys)}if(Oo.current=Uo,r=mt!==null&&mt.next!==null,Dr=0,_t=mt=rt=null,No=!1,r)throw Error(t(300));return n}function Ul(){var n=xs!==0;return xs=0,n}function Tn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?rt.memoizedState=_t=n:_t=_t.next=n,_t}function sn(){if(mt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=mt.next;var r=_t===null?rt.memoizedState:_t.next;if(r!==null)_t=r,mt=n;else{if(n===null)throw Error(t(310));mt=n,n={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},_t===null?rt.memoizedState=_t=n:_t=_t.next=n}return _t}function _s(n,r){return typeof r=="function"?r(n):r}function Wl(n){var r=sn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=mt,d=c.baseQueue,g=a.pending;if(g!==null){if(d!==null){var x=d.next;d.next=g.next,g.next=x}c.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,c=c.baseState;var C=x=null,A=null,z=g;do{var G=z.lane;if((Dr&G)===G)A!==null&&(A=A.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var H={lane:G,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};A===null?(C=A=H,x=c):A=A.next=H,rt.lanes|=G,Or|=G}z=z.next}while(z!==null&&z!==g);A===null?x=c:A.next=C,dn(c,r.memoizedState)||($t=!0),r.memoizedState=c,r.baseState=x,r.baseQueue=A,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do g=d.lane,rt.lanes|=g,Or|=g,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Hl(n){var r=sn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,g=r.memoizedState;if(d!==null){a.pending=null;var x=d=d.next;do g=n(g,x.action),x=x.next;while(x!==d);dn(g,r.memoizedState)||($t=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),a.lastRenderedState=g}return[g,c]}function Zh(){}function Jh(n,r){var a=rt,c=sn(),d=r(),g=!dn(c.memoizedState,d);if(g&&(c.memoizedState=d,$t=!0),c=c.queue,Vl(nd.bind(null,a,c,n),[n]),c.getSnapshot!==r||g||_t!==null&&_t.memoizedState.tag&1){if(a.flags|=2048,vs(9,td.bind(null,a,c,d,r),void 0,null),vt===null)throw Error(t(349));(Dr&30)!==0||ed(a,r,d)}return d}function ed(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=rt.updateQueue,r===null?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function td(n,r,a,c){r.value=a,r.getSnapshot=c,rd(r)&&id(n)}function nd(n,r,a){return a(function(){rd(r)&&id(n)})}function rd(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!dn(n,a)}catch{return!0}}function id(n){var r=Gn(n,1);r!==null&&yn(r,n,1,-1)}function sd(n){var r=Tn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:n},r.queue=n,n=n.dispatch=wy.bind(null,rt,n),[r.memoizedState,n]}function vs(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=rt.updateQueue,r===null?(r={lastEffect:null,stores:null},rt.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function od(){return sn().memoizedState}function $o(n,r,a,c){var d=Tn();rt.flags|=n,d.memoizedState=vs(1|r,a,void 0,c===void 0?null:c)}function Go(n,r,a,c){var d=sn();c=c===void 0?null:c;var g=void 0;if(mt!==null){var x=mt.memoizedState;if(g=x.destroy,c!==null&&$l(c,x.deps)){d.memoizedState=vs(r,a,g,c);return}}rt.flags|=n,d.memoizedState=vs(1|r,a,g,c)}function ad(n,r){return $o(8390656,8,n,r)}function Vl(n,r){return Go(2048,8,n,r)}function ld(n,r){return Go(4,2,n,r)}function ud(n,r){return Go(4,4,n,r)}function cd(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function hd(n,r,a){return a=a!=null?a.concat([n]):null,Go(4,4,cd.bind(null,r,n),a)}function Yl(){}function dd(n,r){var a=sn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&$l(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function fd(n,r){var a=sn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&$l(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function pd(n,r,a){return(Dr&21)===0?(n.baseState&&(n.baseState=!1,$t=!0),n.memoizedState=a):(dn(a,r)||(a=Wc(),rt.lanes|=a,Or|=a,n.baseState=!0),r)}function _y(n,r){var a=Ne;Ne=a!==0&&4>a?a:4,n(!0);var c=Nl.transition;Nl.transition={};try{n(!1),r()}finally{Ne=a,Nl.transition=c}}function md(){return sn().memoizedState}function vy(n,r,a){var c=wr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},gd(n))yd(r,a);else if(a=Yh(n,r,a,c),a!==null){var d=Bt();yn(a,n,c,d),xd(a,r,c)}}function wy(n,r,a){var c=wr(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(gd(n))yd(r,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var x=r.lastRenderedState,C=g(x,a);if(d.hasEagerState=!0,d.eagerState=C,dn(C,x)){var A=r.interleaved;A===null?(d.next=d,Ll(r)):(d.next=A.next,A.next=d),r.interleaved=d;return}}catch{}finally{}a=Yh(n,r,d,c),a!==null&&(d=Bt(),yn(a,n,c,d),xd(a,r,c))}}function gd(n){var r=n.alternate;return n===rt||r!==null&&r===rt}function yd(n,r){ys=No=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function xd(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,qa(n,a)}}var Uo={readContext:rn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},Sy={readContext:rn,useCallback:function(n,r){return Tn().memoizedState=[n,r===void 0?null:r],n},useContext:rn,useEffect:ad,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,$o(4194308,4,cd.bind(null,r,n),a)},useLayoutEffect:function(n,r){return $o(4194308,4,n,r)},useInsertionEffect:function(n,r){return $o(4,2,n,r)},useMemo:function(n,r){var a=Tn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Tn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=vy.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var r=Tn();return n={current:n},r.memoizedState=n},useState:sd,useDebugValue:Yl,useDeferredValue:function(n){return Tn().memoizedState=n},useTransition:function(){var n=sd(!1),r=n[0];return n=_y.bind(null,n[1]),Tn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=rt,d=Tn();if(et){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),vt===null)throw Error(t(349));(Dr&30)!==0||ed(c,r,a)}d.memoizedState=a;var g={value:a,getSnapshot:r};return d.queue=g,ad(nd.bind(null,c,g,n),[n]),c.flags|=2048,vs(9,td.bind(null,c,g,a,r),void 0,null),a},useId:function(){var n=Tn(),r=vt.identifierPrefix;if(et){var a=$n,c=Nn;a=(c&~(1<<32-$e(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=xs++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=xy++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Cy={readContext:rn,useCallback:dd,useContext:rn,useEffect:Vl,useImperativeHandle:hd,useInsertionEffect:ld,useLayoutEffect:ud,useMemo:fd,useReducer:Wl,useRef:od,useState:function(){return Wl(_s)},useDebugValue:Yl,useDeferredValue:function(n){var r=sn();return pd(r,mt.memoizedState,n)},useTransition:function(){var n=Wl(_s)[0],r=sn().memoizedState;return[n,r]},useMutableSource:Zh,useSyncExternalStore:Jh,useId:md,unstable_isNewReconciler:!1},ky={readContext:rn,useCallback:dd,useContext:rn,useEffect:Vl,useImperativeHandle:hd,useInsertionEffect:ld,useLayoutEffect:ud,useMemo:fd,useReducer:Hl,useRef:od,useState:function(){return Hl(_s)},useDebugValue:Yl,useDeferredValue:function(n){var r=sn();return mt===null?r.memoizedState=n:pd(r,mt.memoizedState,n)},useTransition:function(){var n=Hl(_s)[0],r=sn().memoizedState;return[n,r]},useMutableSource:Zh,useSyncExternalStore:Jh,useId:md,unstable_isNewReconciler:!1};function pn(n,r){if(n&&n.defaultProps){r=J({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function Xl(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:J({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Wo={isMounted:function(n){return(n=n._reactInternals)?bn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Bt(),d=wr(n),g=Un(c,d);g.payload=r,a!=null&&(g.callback=a),r=yr(n,g,d),r!==null&&(yn(r,n,d,c),zo(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Bt(),d=wr(n),g=Un(c,d);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=yr(n,g,d),r!==null&&(yn(r,n,d,c),zo(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Bt(),c=wr(n),d=Un(a,c);d.tag=2,r!=null&&(d.callback=r),r=yr(n,d,c),r!==null&&(yn(r,n,c,a),zo(r,n,c))}};function _d(n,r,a,c,d,g,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,x):r.prototype&&r.prototype.isPureReactComponent?!os(a,c)||!os(d,g):!0}function vd(n,r,a){var c=!1,d=pr,g=r.contextType;return typeof g=="object"&&g!==null?g=rn(g):(d=Nt(r)?Fr:Pt.current,c=r.contextTypes,g=(c=c!=null)?ci(n,d):pr),r=new r(a,g),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Wo,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=g),r}function wd(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Wo.enqueueReplaceState(r,r.state,null)}function ql(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Bl(n);var g=r.contextType;typeof g=="object"&&g!==null?d.context=rn(g):(g=Nt(r)?Fr:Pt.current,d.context=ci(n,g)),d.state=n.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(Xl(n,r,g,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Wo.enqueueReplaceState(d,d.state,null),jo(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function xi(n,r){try{var a="",c=r;do a+=be(c),c=c.return;while(c);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:r,stack:d,digest:null}}function Kl(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function Ql(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var by=typeof WeakMap=="function"?WeakMap:Map;function Sd(n,r,a){a=Un(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){Qo||(Qo=!0,du=c),Ql(n,r)},a}function Cd(n,r,a){a=Un(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){Ql(n,r)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Ql(n,r),typeof c!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var x=r.stack;this.componentDidCatch(r.value,{componentStack:x!==null?x:""})}),a}function kd(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new by;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=Oy.bind(null,n,r,a),r.then(n,n))}function bd(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Ad(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Un(-1,1),r.tag=2,yr(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Ay=I.ReactCurrentOwner,$t=!1;function Lt(n,r,a,c){r.child=n===null?Vh(r,null,a,c):pi(r,n.child,a,c)}function Pd(n,r,a,c,d){a=a.render;var g=r.ref;return gi(r,d),c=Gl(n,r,a,c,g,d),a=Ul(),n!==null&&!$t?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,Wn(n,r,d)):(et&&a&&bl(r),r.flags|=1,Lt(n,r,c,d),r.child)}function Td(n,r,a,c,d){if(n===null){var g=a.type;return typeof g=="function"&&!_u(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=g,Ed(n,r,g,c,d)):(n=ra(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,(n.lanes&d)===0){var x=g.memoizedProps;if(a=a.compare,a=a!==null?a:os,a(x,c)&&n.ref===r.ref)return Wn(n,r,d)}return r.flags|=1,n=Cr(g,c),n.ref=r.ref,n.return=r,r.child=n}function Ed(n,r,a,c,d){if(n!==null){var g=n.memoizedProps;if(os(g,c)&&n.ref===r.ref)if($t=!1,r.pendingProps=c=g,(n.lanes&d)!==0)(n.flags&131072)!==0&&($t=!0);else return r.lanes=n.lanes,Wn(n,r,d)}return Zl(n,r,a,c,d)}function Md(n,r,a){var c=r.pendingProps,d=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(vi,qt),qt|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Xe(vi,qt),qt|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Xe(vi,qt),qt|=c}else g!==null?(c=g.baseLanes|a,r.memoizedState=null):c=a,Xe(vi,qt),qt|=c;return Lt(n,r,d,a),r.child}function Rd(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Zl(n,r,a,c,d){var g=Nt(a)?Fr:Pt.current;return g=ci(r,g),gi(r,d),a=Gl(n,r,a,c,g,d),c=Ul(),n!==null&&!$t?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,Wn(n,r,d)):(et&&c&&bl(r),r.flags|=1,Lt(n,r,a,d),r.child)}function Id(n,r,a,c,d){if(Nt(a)){var g=!0;To(r)}else g=!1;if(gi(r,d),r.stateNode===null)Vo(n,r),vd(r,a,c),ql(r,a,c,d),c=!0;else if(n===null){var x=r.stateNode,C=r.memoizedProps;x.props=C;var A=x.context,z=a.contextType;typeof z=="object"&&z!==null?z=rn(z):(z=Nt(a)?Fr:Pt.current,z=ci(r,z));var G=a.getDerivedStateFromProps,H=typeof G=="function"||typeof x.getSnapshotBeforeUpdate=="function";H||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==c||A!==z)&&wd(r,x,c,z),gr=!1;var $=r.memoizedState;x.state=$,jo(r,c,x,d),A=r.memoizedState,C!==c||$!==A||Ot.current||gr?(typeof G=="function"&&(Xl(r,a,G,c),A=r.memoizedState),(C=gr||_d(r,a,C,c,$,A,z))?(H||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=A),x.props=c,x.state=A,x.context=z,c=C):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{x=r.stateNode,Xh(n,r),C=r.memoizedProps,z=r.type===r.elementType?C:pn(r.type,C),x.props=z,H=r.pendingProps,$=x.context,A=a.contextType,typeof A=="object"&&A!==null?A=rn(A):(A=Nt(a)?Fr:Pt.current,A=ci(r,A));var re=a.getDerivedStateFromProps;(G=typeof re=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==H||$!==A)&&wd(r,x,c,A),gr=!1,$=r.memoizedState,x.state=$,jo(r,c,x,d);var ae=r.memoizedState;C!==H||$!==ae||Ot.current||gr?(typeof re=="function"&&(Xl(r,a,re,c),ae=r.memoizedState),(z=gr||_d(r,a,z,c,$,ae,A)||!1)?(G||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,ae,A),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,ae,A)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ae),x.props=c,x.state=ae,x.context=A,c=z):(typeof x.componentDidUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),c=!1)}return Jl(n,r,a,c,g,d)}function Jl(n,r,a,c,d,g){Rd(n,r);var x=(r.flags&128)!==0;if(!c&&!x)return d&&jh(r,a,!1),Wn(n,r,g);c=r.stateNode,Ay.current=r;var C=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&x?(r.child=pi(r,n.child,null,g),r.child=pi(r,null,C,g)):Lt(n,r,C,g),r.memoizedState=c.state,d&&jh(r,a,!0),r.child}function Fd(n){var r=n.stateNode;r.pendingContext?Bh(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Bh(n,r.context,!1),zl(n,r.containerInfo)}function Ld(n,r,a,c,d){return fi(),El(d),r.flags|=256,Lt(n,r,a,c),r.child}var eu={dehydrated:null,treeContext:null,retryLane:0};function tu(n){return{baseLanes:n,cachePool:null,transitions:null}}function Bd(n,r,a){var c=r.pendingProps,d=nt.current,g=!1,x=(r.flags&128)!==0,C;if((C=x)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(g=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Xe(nt,d&1),n===null)return Tl(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(x=c.children,n=c.fallback,g?(c=r.mode,g=r.child,x={mode:"hidden",children:x},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=x):g=ia(x,c,0,null),n=Ur(n,c,a,null),g.return=r,n.return=r,g.sibling=n,r.child=g,r.child.memoizedState=tu(a),r.memoizedState=eu,n):nu(r,x));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return Py(n,r,x,c,C,d,a);if(g){g=c.fallback,x=r.mode,d=n.child,C=d.sibling;var A={mode:"hidden",children:c.children};return(x&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=A,r.deletions=null):(c=Cr(d,A),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?g=Cr(C,g):(g=Ur(g,x,a,null),g.flags|=2),g.return=r,c.return=r,c.sibling=g,r.child=c,c=g,g=r.child,x=n.child.memoizedState,x=x===null?tu(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},g.memoizedState=x,g.childLanes=n.childLanes&~a,r.memoizedState=eu,c}return g=n.child,n=g.sibling,c=Cr(g,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function nu(n,r){return r=ia({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Ho(n,r,a,c){return c!==null&&El(c),pi(r,n.child,null,a),n=nu(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Py(n,r,a,c,d,g,x){if(a)return r.flags&256?(r.flags&=-257,c=Kl(Error(t(422))),Ho(n,r,x,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(g=c.fallback,d=r.mode,c=ia({mode:"visible",children:c.children},d,0,null),g=Ur(g,d,x,null),g.flags|=2,c.return=r,g.return=r,c.sibling=g,r.child=c,(r.mode&1)!==0&&pi(r,n.child,null,x),r.child.memoizedState=tu(x),r.memoizedState=eu,g);if((r.mode&1)===0)return Ho(n,r,x,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,g=Error(t(419)),c=Kl(g,c,void 0),Ho(n,r,x,c)}if(C=(x&n.childLanes)!==0,$t||C){if(c=vt,c!==null){switch(x&-x){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|x))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Gn(n,d),yn(c,n,d,-1))}return xu(),c=Kl(Error(t(421))),Ho(n,r,x,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=Ny.bind(null,n),d._reactRetry=r,null):(n=g.treeContext,Xt=dr(d.nextSibling),Yt=r,et=!0,fn=null,n!==null&&(tn[nn++]=Nn,tn[nn++]=$n,tn[nn++]=Lr,Nn=n.id,$n=n.overflow,Lr=r),r=nu(r,c.children),r.flags|=4096,r)}function zd(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Fl(n.return,r,a)}function ru(n,r,a,c,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function jd(n,r,a){var c=r.pendingProps,d=c.revealOrder,g=c.tail;if(Lt(n,r,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&zd(n,a,r);else if(n.tag===19)zd(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(nt,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&Do(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),ru(r,!1,d,a,g);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&Do(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ru(r,!0,a,null,g);break;case"together":ru(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Vo(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Wn(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Or|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=Cr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Cr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Ty(n,r,a){switch(r.tag){case 3:Fd(r),fi();break;case 5:Qh(r);break;case 1:Nt(r.type)&&To(r);break;case 4:zl(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Xe(Lo,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Xe(nt,nt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Bd(n,r,a):(Xe(nt,nt.current&1),n=Wn(n,r,a),n!==null?n.sibling:null);Xe(nt,nt.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return jd(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Xe(nt,nt.current),c)break;return null;case 22:case 23:return r.lanes=0,Md(n,r,a)}return Wn(n,r,a)}var Dd,iu,Od,Nd;Dd=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},iu=function(){},Od=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,jr(Pn.current);var g=null;switch(a){case"input":d=jt(n,d),c=jt(n,c),g=[];break;case"select":d=J({},d,{value:void 0}),c=J({},c,{value:void 0}),g=[];break;case"textarea":d=Zr(n,d),c=Zr(n,c),g=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=bo)}$i(a,c);var x;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var C=d[z];for(x in C)C.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?g||(g=[]):(g=g||[]).push(z,null));for(z in c){var A=c[z];if(C=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&A!==C&&(A!=null||C!=null))if(z==="style")if(C){for(x in C)!C.hasOwnProperty(x)||A&&A.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in A)A.hasOwnProperty(x)&&C[x]!==A[x]&&(a||(a={}),a[x]=A[x])}else a||(g||(g=[]),g.push(z,a)),a=A;else z==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,C=C?C.__html:void 0,A!=null&&C!==A&&(g=g||[]).push(z,A)):z==="children"?typeof A!="string"&&typeof A!="number"||(g=g||[]).push(z,""+A):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(A!=null&&z==="onScroll"&&qe("scroll",n),g||C===A||(g=[])):(g=g||[]).push(z,A))}a&&(g=g||[]).push("style",a);var z=g;(r.updateQueue=z)&&(r.flags|=4)}},Nd=function(n,r,a,c){a!==c&&(r.flags|=4)};function ws(n,r){if(!et)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Et(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function Ey(n,r,a){var c=r.pendingProps;switch(Al(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(r),null;case 1:return Nt(r.type)&&Po(),Et(r),null;case 3:return c=r.stateNode,yi(),Ke(Ot),Ke(Pt),Ol(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Io(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,fn!==null&&(mu(fn),fn=null))),iu(n,r),Et(r),null;case 5:jl(r);var d=jr(gs.current);if(a=r.type,n!==null&&r.stateNode!=null)Od(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Et(r),null}if(n=jr(Pn.current),Io(r)){c=r.stateNode,a=r.type;var g=r.memoizedProps;switch(c[An]=r,c[hs]=g,n=(r.mode&1)!==0,a){case"dialog":qe("cancel",c),qe("close",c);break;case"iframe":case"object":case"embed":qe("load",c);break;case"video":case"audio":for(d=0;d<ls.length;d++)qe(ls[d],c);break;case"source":qe("error",c);break;case"img":case"image":case"link":qe("error",c),qe("load",c);break;case"details":qe("toggle",c);break;case"input":pt(c,g),qe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},qe("invalid",c);break;case"textarea":tr(c,g),qe("invalid",c)}$i(a,g),d=null;for(var x in g)if(g.hasOwnProperty(x)){var C=g[x];x==="children"?typeof C=="string"?c.textContent!==C&&(g.suppressHydrationWarning!==!0&&ko(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&ko(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(x)&&C!=null&&x==="onScroll"&&qe("scroll",c)}switch(a){case"input":Zt(c),Fn(c,g,!0);break;case"textarea":Zt(c),Jr(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=bo)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{x=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ji(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=x.createElement(a,{is:c.is}):(n=x.createElement(a),a==="select"&&(x=n,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):n=x.createElementNS(n,a),n[An]=r,n[hs]=c,Dd(n,r,!1,!1),r.stateNode=n;e:{switch(x=Gi(a,c),a){case"dialog":qe("cancel",n),qe("close",n),d=c;break;case"iframe":case"object":case"embed":qe("load",n),d=c;break;case"video":case"audio":for(d=0;d<ls.length;d++)qe(ls[d],n);d=c;break;case"source":qe("error",n),d=c;break;case"img":case"image":case"link":qe("error",n),qe("load",n),d=c;break;case"details":qe("toggle",n),d=c;break;case"input":pt(n,c),d=jt(n,c),qe("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=J({},c,{value:void 0}),qe("invalid",n);break;case"textarea":tr(n,c),d=Zr(n,c),qe("invalid",n);break;default:d=c}$i(a,d),C=d;for(g in C)if(C.hasOwnProperty(g)){var A=C[g];g==="style"?eo(n,A):g==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&Oi(n,A)):g==="children"?typeof A=="string"?(a!=="textarea"||A!=="")&&zn(n,A):typeof A=="number"&&zn(n,""+A):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?A!=null&&g==="onScroll"&&qe("scroll",n):A!=null&&E(n,g,A,x))}switch(a){case"input":Zt(n),Fn(n,c,!1);break;case"textarea":Zt(n),Jr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+xe(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?Bn(n,!!c.multiple,g,!1):c.defaultValue!=null&&Bn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=bo)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Et(r),null;case 6:if(n&&r.stateNode!=null)Nd(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=jr(gs.current),jr(Pn.current),Io(r)){if(c=r.stateNode,a=r.memoizedProps,c[An]=r,(g=c.nodeValue!==a)&&(n=Yt,n!==null))switch(n.tag){case 3:ko(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ko(c.nodeValue,a,(n.mode&1)!==0)}g&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[An]=r,r.stateNode=c}return Et(r),null;case 13:if(Ke(nt),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(et&&Xt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Uh(),fi(),r.flags|=98560,g=!1;else if(g=Io(r),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[An]=r}else fi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),g=!1}else fn!==null&&(mu(fn),fn=null),g=!0;if(!g)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(nt.current&1)!==0?gt===0&&(gt=3):xu())),r.updateQueue!==null&&(r.flags|=4),Et(r),null);case 4:return yi(),iu(n,r),n===null&&us(r.stateNode.containerInfo),Et(r),null;case 10:return Il(r.type._context),Et(r),null;case 17:return Nt(r.type)&&Po(),Et(r),null;case 19:if(Ke(nt),g=r.memoizedState,g===null)return Et(r),null;if(c=(r.flags&128)!==0,x=g.rendering,x===null)if(c)ws(g,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(x=Do(n),x!==null){for(r.flags|=128,ws(g,!1),c=x.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)g=a,n=c,g.flags&=14680066,x=g.alternate,x===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=x.childLanes,g.lanes=x.lanes,g.child=x.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=x.memoizedProps,g.memoizedState=x.memoizedState,g.updateQueue=x.updateQueue,g.type=x.type,n=x.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(nt,nt.current&1|2),r.child}n=n.sibling}g.tail!==null&&W()>wi&&(r.flags|=128,c=!0,ws(g,!1),r.lanes=4194304)}else{if(!c)if(n=Do(x),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ws(g,!0),g.tail===null&&g.tailMode==="hidden"&&!x.alternate&&!et)return Et(r),null}else 2*W()-g.renderingStartTime>wi&&a!==1073741824&&(r.flags|=128,c=!0,ws(g,!1),r.lanes=4194304);g.isBackwards?(x.sibling=r.child,r.child=x):(a=g.last,a!==null?a.sibling=x:r.child=x,g.last=x)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=W(),r.sibling=null,a=nt.current,Xe(nt,c?a&1|2:a&1),r):(Et(r),null);case 22:case 23:return yu(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(qt&1073741824)!==0&&(Et(r),r.subtreeFlags&6&&(r.flags|=8192)):Et(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function My(n,r){switch(Al(r),r.tag){case 1:return Nt(r.type)&&Po(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return yi(),Ke(Ot),Ke(Pt),Ol(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return jl(r),null;case 13:if(Ke(nt),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));fi()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Ke(nt),null;case 4:return yi(),null;case 10:return Il(r.type._context),null;case 22:case 23:return yu(),null;case 24:return null;default:return null}}var Yo=!1,Mt=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,se=null;function _i(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ot(n,r,c)}else a.current=null}function su(n,r,a){try{a()}catch(c){ot(n,r,c)}}var $d=!1;function Iy(n,r){if(yl=fo,n=_h(),ul(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var x=0,C=-1,A=-1,z=0,G=0,H=n,$=null;t:for(;;){for(var re;H!==a||d!==0&&H.nodeType!==3||(C=x+d),H!==g||c!==0&&H.nodeType!==3||(A=x+c),H.nodeType===3&&(x+=H.nodeValue.length),(re=H.firstChild)!==null;)$=H,H=re;for(;;){if(H===n)break t;if($===a&&++z===d&&(C=x),$===g&&++G===c&&(A=x),(re=H.nextSibling)!==null)break;H=$,$=H.parentNode}H=re}a=C===-1||A===-1?null:{start:C,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(xl={focusedElem:n,selectionRange:a},fo=!1,se=r;se!==null;)if(r=se,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,se=n;else for(;se!==null;){r=se;try{var ae=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ue=ae.memoizedProps,ut=ae.memoizedState,F=r.stateNode,M=F.getSnapshotBeforeUpdate(r.elementType===r.type?ue:pn(r.type,ue),ut);F.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var L=r.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(V){ot(r,r.return,V)}if(n=r.sibling,n!==null){n.return=r.return,se=n;break}se=r.return}return ae=$d,$d=!1,ae}function Ss(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var g=d.destroy;d.destroy=void 0,g!==void 0&&su(r,a,g)}d=d.next}while(d!==c)}}function Xo(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function ou(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Gd(n){var r=n.alternate;r!==null&&(n.alternate=null,Gd(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[An],delete r[hs],delete r[Sl],delete r[py],delete r[my])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ud(n){return n.tag===5||n.tag===3||n.tag===4}function Wd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ud(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function au(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=bo));else if(c!==4&&(n=n.child,n!==null))for(au(n,r,a),n=n.sibling;n!==null;)au(n,r,a),n=n.sibling}function lu(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(lu(n,r,a),n=n.sibling;n!==null;)lu(n,r,a),n=n.sibling}var Ct=null,mn=!1;function xr(n,r,a){for(a=a.child;a!==null;)Hd(n,r,a),a=a.sibling}function Hd(n,r,a){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Ye,a)}catch{}switch(a.tag){case 5:Mt||_i(a,r);case 6:var c=Ct,d=mn;Ct=null,xr(n,r,a),Ct=c,mn=d,Ct!==null&&(mn?(n=Ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ct.removeChild(a.stateNode));break;case 18:Ct!==null&&(mn?(n=Ct,a=a.stateNode,n.nodeType===8?wl(n.parentNode,a):n.nodeType===1&&wl(n,a),es(n)):wl(Ct,a.stateNode));break;case 4:c=Ct,d=mn,Ct=a.stateNode.containerInfo,mn=!0,xr(n,r,a),Ct=c,mn=d;break;case 0:case 11:case 14:case 15:if(!Mt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,x=g.destroy;g=g.tag,x!==void 0&&((g&2)!==0||(g&4)!==0)&&su(a,r,x),d=d.next}while(d!==c)}xr(n,r,a);break;case 1:if(!Mt&&(_i(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){ot(a,r,C)}xr(n,r,a);break;case 21:xr(n,r,a);break;case 22:a.mode&1?(Mt=(c=Mt)||a.memoizedState!==null,xr(n,r,a),Mt=c):xr(n,r,a);break;default:xr(n,r,a)}}function Vd(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Ry),r.forEach(function(c){var d=$y.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function gn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var g=n,x=r,C=x;e:for(;C!==null;){switch(C.tag){case 5:Ct=C.stateNode,mn=!1;break e;case 3:Ct=C.stateNode.containerInfo,mn=!0;break e;case 4:Ct=C.stateNode.containerInfo,mn=!0;break e}C=C.return}if(Ct===null)throw Error(t(160));Hd(g,x,d),Ct=null,mn=!1;var A=d.alternate;A!==null&&(A.return=null),d.return=null}catch(z){ot(d,r,z)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Yd(r,n),r=r.sibling}function Yd(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(gn(r,n),En(n),c&4){try{Ss(3,n,n.return),Xo(3,n)}catch(ue){ot(n,n.return,ue)}try{Ss(5,n,n.return)}catch(ue){ot(n,n.return,ue)}}break;case 1:gn(r,n),En(n),c&512&&a!==null&&_i(a,a.return);break;case 5:if(gn(r,n),En(n),c&512&&a!==null&&_i(a,a.return),n.flags&32){var d=n.stateNode;try{zn(d,"")}catch(ue){ot(n,n.return,ue)}}if(c&4&&(d=n.stateNode,d!=null)){var g=n.memoizedProps,x=a!==null?a.memoizedProps:g,C=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&Zn(d,g),Gi(C,x);var z=Gi(C,g);for(x=0;x<A.length;x+=2){var G=A[x],H=A[x+1];G==="style"?eo(d,H):G==="dangerouslySetInnerHTML"?Oi(d,H):G==="children"?zn(d,H):E(d,G,H,z)}switch(C){case"input":Jn(d,g);break;case"textarea":Zs(d,g);break;case"select":var $=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var re=g.value;re!=null?Bn(d,!!g.multiple,re,!1):$!==!!g.multiple&&(g.defaultValue!=null?Bn(d,!!g.multiple,g.defaultValue,!0):Bn(d,!!g.multiple,g.multiple?[]:"",!1))}d[hs]=g}catch(ue){ot(n,n.return,ue)}}break;case 6:if(gn(r,n),En(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,g=n.memoizedProps;try{d.nodeValue=g}catch(ue){ot(n,n.return,ue)}}break;case 3:if(gn(r,n),En(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{es(r.containerInfo)}catch(ue){ot(n,n.return,ue)}break;case 4:gn(r,n),En(n);break;case 13:gn(r,n),En(n),d=n.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(hu=W())),c&4&&Vd(n);break;case 22:if(G=a!==null&&a.memoizedState!==null,n.mode&1?(Mt=(z=Mt)||G,gn(r,n),Mt=z):gn(r,n),En(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!G&&(n.mode&1)!==0)for(se=n,G=n.child;G!==null;){for(H=se=G;se!==null;){switch($=se,re=$.child,$.tag){case 0:case 11:case 14:case 15:Ss(4,$,$.return);break;case 1:_i($,$.return);var ae=$.stateNode;if(typeof ae.componentWillUnmount=="function"){c=$,a=$.return;try{r=c,ae.props=r.memoizedProps,ae.state=r.memoizedState,ae.componentWillUnmount()}catch(ue){ot(c,a,ue)}}break;case 5:_i($,$.return);break;case 22:if($.memoizedState!==null){Kd(H);continue}}re!==null?(re.return=$,se=re):Kd(H)}G=G.sibling}e:for(G=null,H=n;;){if(H.tag===5){if(G===null){G=H;try{d=H.stateNode,z?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=H.stateNode,A=H.memoizedProps.style,x=A!=null&&A.hasOwnProperty("display")?A.display:null,C.style.display=Ni("display",x))}catch(ue){ot(n,n.return,ue)}}}else if(H.tag===6){if(G===null)try{H.stateNode.nodeValue=z?"":H.memoizedProps}catch(ue){ot(n,n.return,ue)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===n)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===n)break e;for(;H.sibling===null;){if(H.return===null||H.return===n)break e;G===H&&(G=null),H=H.return}G===H&&(G=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:gn(r,n),En(n),c&4&&Vd(n);break;case 21:break;default:gn(r,n),En(n)}}function En(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Ud(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(zn(d,""),c.flags&=-33);var g=Wd(n);lu(n,g,d);break;case 3:case 4:var x=c.stateNode.containerInfo,C=Wd(n);au(n,C,x);break;default:throw Error(t(161))}}catch(A){ot(n,n.return,A)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Fy(n,r,a){se=n,Xd(n)}function Xd(n,r,a){for(var c=(n.mode&1)!==0;se!==null;){var d=se,g=d.child;if(d.tag===22&&c){var x=d.memoizedState!==null||Yo;if(!x){var C=d.alternate,A=C!==null&&C.memoizedState!==null||Mt;C=Yo;var z=Mt;if(Yo=x,(Mt=A)&&!z)for(se=d;se!==null;)x=se,A=x.child,x.tag===22&&x.memoizedState!==null?Qd(d):A!==null?(A.return=x,se=A):Qd(d);for(;g!==null;)se=g,Xd(g),g=g.sibling;se=d,Yo=C,Mt=z}qd(n)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,se=g):qd(n)}}function qd(n){for(;se!==null;){var r=se;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Mt||Xo(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Mt)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:pn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&Kh(r,g,c);break;case 3:var x=r.updateQueue;if(x!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Kh(r,x,a)}break;case 5:var C=r.stateNode;if(a===null&&r.flags&4){a=C;var A=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&a.focus();break;case"img":A.src&&(a.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var z=r.alternate;if(z!==null){var G=z.memoizedState;if(G!==null){var H=G.dehydrated;H!==null&&es(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mt||r.flags&512&&ou(r)}catch($){ot(r,r.return,$)}}if(r===n){se=null;break}if(a=r.sibling,a!==null){a.return=r.return,se=a;break}se=r.return}}function Kd(n){for(;se!==null;){var r=se;if(r===n){se=null;break}var a=r.sibling;if(a!==null){a.return=r.return,se=a;break}se=r.return}}function Qd(n){for(;se!==null;){var r=se;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Xo(4,r)}catch(A){ot(r,a,A)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(A){ot(r,d,A)}}var g=r.return;try{ou(r)}catch(A){ot(r,g,A)}break;case 5:var x=r.return;try{ou(r)}catch(A){ot(r,x,A)}}}catch(A){ot(r,r.return,A)}if(r===n){se=null;break}var C=r.sibling;if(C!==null){C.return=r.return,se=C;break}se=r.return}}var Ly=Math.ceil,qo=I.ReactCurrentDispatcher,uu=I.ReactCurrentOwner,on=I.ReactCurrentBatchConfig,Be=0,vt=null,dt=null,kt=0,qt=0,vi=fr(0),gt=0,Cs=null,Or=0,Ko=0,cu=0,ks=null,Gt=null,hu=0,wi=1/0,Hn=null,Qo=!1,du=null,_r=null,Zo=!1,vr=null,Jo=0,bs=0,fu=null,ea=-1,ta=0;function Bt(){return(Be&6)!==0?W():ea!==-1?ea:ea=W()}function wr(n){return(n.mode&1)===0?1:(Be&2)!==0&&kt!==0?kt&-kt:yy.transition!==null?(ta===0&&(ta=Wc()),ta):(n=Ne,n!==0||(n=window.event,n=n===void 0?16:Jc(n.type)),n)}function yn(n,r,a,c){if(50<bs)throw bs=0,fu=null,Error(t(185));qi(n,a,c),((Be&2)===0||n!==vt)&&(n===vt&&((Be&2)===0&&(Ko|=a),gt===4&&Sr(n,kt)),Ut(n,c),a===1&&Be===0&&(r.mode&1)===0&&(wi=W()+500,Eo&&mr()))}function Ut(n,r){var a=n.callbackNode;yg(n,r);var c=uo(n,n===vt?kt:0);if(c===0)a!==null&&Y(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&Y(a),r===1)n.tag===0?gy(Jd.bind(null,n)):Dh(Jd.bind(null,n)),dy(function(){(Be&6)===0&&mr()}),a=null;else{switch(Hc(c)){case 1:a=ze;break;case 4:a=Ie;break;case 16:a=Pe;break;case 536870912:a=tt;break;default:a=Pe}a=lf(a,Zd.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function Zd(n,r){if(ea=-1,ta=0,(Be&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Si()&&n.callbackNode!==a)return null;var c=uo(n,n===vt?kt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=na(n,c);else{r=c;var d=Be;Be|=2;var g=tf();(vt!==n||kt!==r)&&(Hn=null,wi=W()+500,$r(n,r));do try{jy();break}catch(C){ef(n,C)}while(!0);Rl(),qo.current=g,Be=d,dt!==null?r=0:(vt=null,kt=0,r=gt)}if(r!==0){if(r===2&&(d=Ya(n),d!==0&&(c=d,r=pu(n,d))),r===1)throw a=Cs,$r(n,0),Sr(n,c),Ut(n,W()),a;if(r===6)Sr(n,c);else{if(d=n.current.alternate,(c&30)===0&&!By(d)&&(r=na(n,c),r===2&&(g=Ya(n),g!==0&&(c=g,r=pu(n,g))),r===1))throw a=Cs,$r(n,0),Sr(n,c),Ut(n,W()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Gr(n,Gt,Hn);break;case 3:if(Sr(n,c),(c&130023424)===c&&(r=hu+500-W(),10<r)){if(uo(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Bt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=vl(Gr.bind(null,n,Gt,Hn),r);break}Gr(n,Gt,Hn);break;case 4:if(Sr(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var x=31-$e(c);g=1<<x,x=r[x],x>d&&(d=x),c&=~g}if(c=d,c=W()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Ly(c/1960))-c,10<c){n.timeoutHandle=vl(Gr.bind(null,n,Gt,Hn),c);break}Gr(n,Gt,Hn);break;case 5:Gr(n,Gt,Hn);break;default:throw Error(t(329))}}}return Ut(n,W()),n.callbackNode===a?Zd.bind(null,n):null}function pu(n,r){var a=ks;return n.current.memoizedState.isDehydrated&&($r(n,r).flags|=256),n=na(n,r),n!==2&&(r=Gt,Gt=a,r!==null&&mu(r)),n}function mu(n){Gt===null?Gt=n:Gt.push.apply(Gt,n)}function By(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!dn(g(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Sr(n,r){for(r&=~cu,r&=~Ko,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-$e(r),c=1<<a;n[a]=-1,r&=~c}}function Jd(n){if((Be&6)!==0)throw Error(t(327));Si();var r=uo(n,0);if((r&1)===0)return Ut(n,W()),null;var a=na(n,r);if(n.tag!==0&&a===2){var c=Ya(n);c!==0&&(r=c,a=pu(n,c))}if(a===1)throw a=Cs,$r(n,0),Sr(n,r),Ut(n,W()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Gr(n,Gt,Hn),Ut(n,W()),null}function gu(n,r){var a=Be;Be|=1;try{return n(r)}finally{Be=a,Be===0&&(wi=W()+500,Eo&&mr())}}function Nr(n){vr!==null&&vr.tag===0&&(Be&6)===0&&Si();var r=Be;Be|=1;var a=on.transition,c=Ne;try{if(on.transition=null,Ne=1,n)return n()}finally{Ne=c,on.transition=a,Be=r,(Be&6)===0&&mr()}}function yu(){qt=vi.current,Ke(vi)}function $r(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,hy(a)),dt!==null)for(a=dt.return;a!==null;){var c=a;switch(Al(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Po();break;case 3:yi(),Ke(Ot),Ke(Pt),Ol();break;case 5:jl(c);break;case 4:yi();break;case 13:Ke(nt);break;case 19:Ke(nt);break;case 10:Il(c.type._context);break;case 22:case 23:yu()}a=a.return}if(vt=n,dt=n=Cr(n.current,null),kt=qt=r,gt=0,Cs=null,cu=Ko=Or=0,Gt=ks=null,zr!==null){for(r=0;r<zr.length;r++)if(a=zr[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,g=a.pending;if(g!==null){var x=g.next;g.next=d,c.next=x}a.pending=c}zr=null}return n}function ef(n,r){do{var a=dt;try{if(Rl(),Oo.current=Uo,No){for(var c=rt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}No=!1}if(Dr=0,_t=mt=rt=null,ys=!1,xs=0,uu.current=null,a===null||a.return===null){gt=1,Cs=r,dt=null;break}e:{var g=n,x=a.return,C=a,A=r;if(r=kt,C.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var z=A,G=C,H=G.tag;if((G.mode&1)===0&&(H===0||H===11||H===15)){var $=G.alternate;$?(G.updateQueue=$.updateQueue,G.memoizedState=$.memoizedState,G.lanes=$.lanes):(G.updateQueue=null,G.memoizedState=null)}var re=bd(x);if(re!==null){re.flags&=-257,Ad(re,x,C,g,r),re.mode&1&&kd(g,z,r),r=re,A=z;var ae=r.updateQueue;if(ae===null){var ue=new Set;ue.add(A),r.updateQueue=ue}else ae.add(A);break e}else{if((r&1)===0){kd(g,z,r),xu();break e}A=Error(t(426))}}else if(et&&C.mode&1){var ut=bd(x);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Ad(ut,x,C,g,r),El(xi(A,C));break e}}g=A=xi(A,C),gt!==4&&(gt=2),ks===null?ks=[g]:ks.push(g),g=x;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var F=Sd(g,A,r);qh(g,F);break e;case 1:C=A;var M=g.type,L=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(_r===null||!_r.has(L)))){g.flags|=65536,r&=-r,g.lanes|=r;var V=Cd(g,C,r);qh(g,V);break e}}g=g.return}while(g!==null)}rf(a)}catch(ce){r=ce,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function tf(){var n=qo.current;return qo.current=Uo,n===null?Uo:n}function xu(){(gt===0||gt===3||gt===2)&&(gt=4),vt===null||(Or&268435455)===0&&(Ko&268435455)===0||Sr(vt,kt)}function na(n,r){var a=Be;Be|=2;var c=tf();(vt!==n||kt!==r)&&(Hn=null,$r(n,r));do try{zy();break}catch(d){ef(n,d)}while(!0);if(Rl(),Be=a,qo.current=c,dt!==null)throw Error(t(261));return vt=null,kt=0,gt}function zy(){for(;dt!==null;)nf(dt)}function jy(){for(;dt!==null&&!le();)nf(dt)}function nf(n){var r=af(n.alternate,n,qt);n.memoizedProps=n.pendingProps,r===null?rf(n):dt=r,uu.current=null}function rf(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=Ey(a,r,qt),a!==null){dt=a;return}}else{if(a=My(a,r),a!==null){a.flags&=32767,dt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{gt=6,dt=null;return}}if(r=r.sibling,r!==null){dt=r;return}dt=r=n}while(r!==null);gt===0&&(gt=5)}function Gr(n,r,a){var c=Ne,d=on.transition;try{on.transition=null,Ne=1,Dy(n,r,a,c)}finally{on.transition=d,Ne=c}return null}function Dy(n,r,a,c){do Si();while(vr!==null);if((Be&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(xg(n,g),n===vt&&(dt=vt=null,kt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Zo||(Zo=!0,lf(Pe,function(){return Si(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=on.transition,on.transition=null;var x=Ne;Ne=1;var C=Be;Be|=4,uu.current=null,Iy(n,a),Yd(a,n),iy(xl),fo=!!yl,xl=yl=null,n.current=a,Fy(a),de(),Be=C,Ne=x,on.transition=g}else n.current=a;if(Zo&&(Zo=!1,vr=n,Jo=d),g=n.pendingLanes,g===0&&(_r=null),hn(a.stateNode),Ut(n,W()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Qo)throw Qo=!1,n=du,du=null,n;return(Jo&1)!==0&&n.tag!==0&&Si(),g=n.pendingLanes,(g&1)!==0?n===fu?bs++:(bs=0,fu=n):bs=0,mr(),null}function Si(){if(vr!==null){var n=Hc(Jo),r=on.transition,a=Ne;try{if(on.transition=null,Ne=16>n?16:n,vr===null)var c=!1;else{if(n=vr,vr=null,Jo=0,(Be&6)!==0)throw Error(t(331));var d=Be;for(Be|=4,se=n.current;se!==null;){var g=se,x=g.child;if((se.flags&16)!==0){var C=g.deletions;if(C!==null){for(var A=0;A<C.length;A++){var z=C[A];for(se=z;se!==null;){var G=se;switch(G.tag){case 0:case 11:case 15:Ss(8,G,g)}var H=G.child;if(H!==null)H.return=G,se=H;else for(;se!==null;){G=se;var $=G.sibling,re=G.return;if(Gd(G),G===z){se=null;break}if($!==null){$.return=re,se=$;break}se=re}}}var ae=g.alternate;if(ae!==null){var ue=ae.child;if(ue!==null){ae.child=null;do{var ut=ue.sibling;ue.sibling=null,ue=ut}while(ue!==null)}}se=g}}if((g.subtreeFlags&2064)!==0&&x!==null)x.return=g,se=x;else e:for(;se!==null;){if(g=se,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ss(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,se=F;break e}se=g.return}}var M=n.current;for(se=M;se!==null;){x=se;var L=x.child;if((x.subtreeFlags&2064)!==0&&L!==null)L.return=x,se=L;else e:for(x=M;se!==null;){if(C=se,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Xo(9,C)}}catch(ce){ot(C,C.return,ce)}if(C===x){se=null;break e}var V=C.sibling;if(V!==null){V.return=C.return,se=V;break e}se=C.return}}if(Be=d,mr(),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Ye,n)}catch{}c=!0}return c}finally{Ne=a,on.transition=r}}return!1}function sf(n,r,a){r=xi(a,r),r=Sd(n,r,1),n=yr(n,r,1),r=Bt(),n!==null&&(qi(n,1,r),Ut(n,r))}function ot(n,r,a){if(n.tag===3)sf(n,n,a);else for(;r!==null;){if(r.tag===3){sf(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(_r===null||!_r.has(c))){n=xi(a,n),n=Cd(r,n,1),r=yr(r,n,1),n=Bt(),r!==null&&(qi(r,1,n),Ut(r,n));break}}r=r.return}}function Oy(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=Bt(),n.pingedLanes|=n.suspendedLanes&a,vt===n&&(kt&a)===a&&(gt===4||gt===3&&(kt&130023424)===kt&&500>W()-hu?$r(n,0):cu|=a),Ut(n,r)}function of(n,r){r===0&&((n.mode&1)===0?r=1:(r=lo,lo<<=1,(lo&130023424)===0&&(lo=4194304)));var a=Bt();n=Gn(n,r),n!==null&&(qi(n,r,a),Ut(n,a))}function Ny(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),of(n,a)}function $y(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),of(n,a)}var af;af=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Ot.current)$t=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return $t=!1,Ty(n,r,a);$t=(n.flags&131072)!==0}else $t=!1,et&&(r.flags&1048576)!==0&&Oh(r,Ro,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Vo(n,r),n=r.pendingProps;var d=ci(r,Pt.current);gi(r,a),d=Gl(null,r,c,n,d,a);var g=Ul();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Nt(c)?(g=!0,To(r)):g=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Bl(r),d.updater=Wo,r.stateNode=d,d._reactInternals=r,ql(r,c,n,a),r=Jl(null,r,c,!0,g,a)):(r.tag=0,et&&g&&bl(r),Lt(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Vo(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=Uy(c),n=pn(c,n),d){case 0:r=Zl(null,r,c,n,a);break e;case 1:r=Id(null,r,c,n,a);break e;case 11:r=Pd(null,r,c,n,a);break e;case 14:r=Td(null,r,c,pn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:pn(c,d),Zl(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:pn(c,d),Id(n,r,c,d,a);case 3:e:{if(Fd(r),n===null)throw Error(t(387));c=r.pendingProps,g=r.memoizedState,d=g.element,Xh(n,r),jo(r,c,null,a);var x=r.memoizedState;if(c=x.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){d=xi(Error(t(423)),r),r=Ld(n,r,c,a,d);break e}else if(c!==d){d=xi(Error(t(424)),r),r=Ld(n,r,c,a,d);break e}else for(Xt=dr(r.stateNode.containerInfo.firstChild),Yt=r,et=!0,fn=null,a=Vh(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(fi(),c===d){r=Wn(n,r,a);break e}Lt(n,r,c,a)}r=r.child}return r;case 5:return Qh(r),n===null&&Tl(r),c=r.type,d=r.pendingProps,g=n!==null?n.memoizedProps:null,x=d.children,_l(c,d)?x=null:g!==null&&_l(c,g)&&(r.flags|=32),Rd(n,r),Lt(n,r,x,a),r.child;case 6:return n===null&&Tl(r),null;case 13:return Bd(n,r,a);case 4:return zl(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=pi(r,null,c,a):Lt(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:pn(c,d),Pd(n,r,c,d,a);case 7:return Lt(n,r,r.pendingProps,a),r.child;case 8:return Lt(n,r,r.pendingProps.children,a),r.child;case 12:return Lt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,g=r.memoizedProps,x=d.value,Xe(Lo,c._currentValue),c._currentValue=x,g!==null)if(dn(g.value,x)){if(g.children===d.children&&!Ot.current){r=Wn(n,r,a);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var C=g.dependencies;if(C!==null){x=g.child;for(var A=C.firstContext;A!==null;){if(A.context===c){if(g.tag===1){A=Un(-1,a&-a),A.tag=2;var z=g.updateQueue;if(z!==null){z=z.shared;var G=z.pending;G===null?A.next=A:(A.next=G.next,G.next=A),z.pending=A}}g.lanes|=a,A=g.alternate,A!==null&&(A.lanes|=a),Fl(g.return,a,r),C.lanes|=a;break}A=A.next}}else if(g.tag===10)x=g.type===r.type?null:g.child;else if(g.tag===18){if(x=g.return,x===null)throw Error(t(341));x.lanes|=a,C=x.alternate,C!==null&&(C.lanes|=a),Fl(x,a,r),x=g.sibling}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===r){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}Lt(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,gi(r,a),d=rn(d),c=c(d),r.flags|=1,Lt(n,r,c,a),r.child;case 14:return c=r.type,d=pn(c,r.pendingProps),d=pn(c.type,d),Td(n,r,c,d,a);case 15:return Ed(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:pn(c,d),Vo(n,r),r.tag=1,Nt(c)?(n=!0,To(r)):n=!1,gi(r,a),vd(r,c,d),ql(r,c,d,a),Jl(null,r,c,!0,n,a);case 19:return jd(n,r,a);case 22:return Md(n,r,a)}throw Error(t(156,r.tag))};function lf(n,r){return oe(n,r)}function Gy(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(n,r,a,c){return new Gy(n,r,a,c)}function _u(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Uy(n){if(typeof n=="function")return _u(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Se)return 11;if(n===ft)return 14}return 2}function Cr(n,r){var a=n.alternate;return a===null?(a=an(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ra(n,r,a,c,d,g){var x=2;if(c=n,typeof n=="function")_u(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case O:return Ur(a.children,d,g,r);case te:x=8,d|=8;break;case ie:return n=an(12,a,r,d|2),n.elementType=ie,n.lanes=g,n;case Ce:return n=an(13,a,r,d),n.elementType=Ce,n.lanes=g,n;case ke:return n=an(19,a,r,d),n.elementType=ke,n.lanes=g,n;case ne:return ia(a,d,g,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case X:x=10;break e;case ee:x=9;break e;case Se:x=11;break e;case ft:x=14;break e;case Z:x=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=an(x,a,r,d),r.elementType=n,r.type=c,r.lanes=g,r}function Ur(n,r,a,c){return n=an(7,n,c,r),n.lanes=a,n}function ia(n,r,a,c){return n=an(22,n,c,r),n.elementType=ne,n.lanes=a,n.stateNode={isHidden:!1},n}function vu(n,r,a){return n=an(6,n,null,r),n.lanes=a,n}function wu(n,r,a){return r=an(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Wy(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xa(0),this.expirationTimes=Xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xa(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Su(n,r,a,c,d,g,x,C,A){return n=new Wy(n,r,a,C,A),r===1?(r=1,g===!0&&(r|=8)):r=0,g=an(3,null,null,r),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bl(g),n}function Hy(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function uf(n){if(!n)return pr;n=n._reactInternals;e:{if(bn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Nt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Nt(a))return zh(n,a,r)}return r}function cf(n,r,a,c,d,g,x,C,A){return n=Su(a,c,!0,n,d,g,x,C,A),n.context=uf(null),a=n.current,c=Bt(),d=wr(a),g=Un(c,d),g.callback=r??null,yr(a,g,d),n.current.lanes=d,qi(n,d,c),Ut(n,c),n}function sa(n,r,a,c){var d=r.current,g=Bt(),x=wr(d);return a=uf(a),r.context===null?r.context=a:r.pendingContext=a,r=Un(g,x),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=yr(d,r,x),n!==null&&(yn(n,d,x,g),zo(n,d,x)),x}function oa(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function hf(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Cu(n,r){hf(n,r),(n=n.alternate)&&hf(n,r)}function Vy(){return null}var df=typeof reportError=="function"?reportError:function(n){console.error(n)};function ku(n){this._internalRoot=n}aa.prototype.render=ku.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));sa(n,r,null,null)},aa.prototype.unmount=ku.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Nr(function(){sa(null,n,null,null)}),r[Dn]=null}};function aa(n){this._internalRoot=n}aa.prototype.unstable_scheduleHydration=function(n){if(n){var r=Xc();n={blockedOn:null,target:n,priority:r};for(var a=0;a<ur.length&&r!==0&&r<ur[a].priority;a++);ur.splice(a,0,n),a===0&&Qc(n)}};function bu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function la(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ff(){}function Yy(n,r,a,c,d){if(d){if(typeof c=="function"){var g=c;c=function(){var z=oa(x);g.call(z)}}var x=cf(r,c,n,0,null,!1,!1,"",ff);return n._reactRootContainer=x,n[Dn]=x.current,us(n.nodeType===8?n.parentNode:n),Nr(),x}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var z=oa(A);C.call(z)}}var A=Su(n,0,!1,null,null,!1,!1,"",ff);return n._reactRootContainer=A,n[Dn]=A.current,us(n.nodeType===8?n.parentNode:n),Nr(function(){sa(r,A,a,c)}),A}function ua(n,r,a,c,d){var g=a._reactRootContainer;if(g){var x=g;if(typeof d=="function"){var C=d;d=function(){var A=oa(x);C.call(A)}}sa(r,x,n,d)}else x=Yy(a,r,n,d,c);return oa(x)}Vc=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Xi(r.pendingLanes);a!==0&&(qa(r,a|1),Ut(r,W()),(Be&6)===0&&(wi=W()+500,mr()))}break;case 13:Nr(function(){var c=Gn(n,1);if(c!==null){var d=Bt();yn(c,n,1,d)}}),Cu(n,1)}},Ka=function(n){if(n.tag===13){var r=Gn(n,134217728);if(r!==null){var a=Bt();yn(r,n,134217728,a)}Cu(n,134217728)}},Yc=function(n){if(n.tag===13){var r=wr(n),a=Gn(n,r);if(a!==null){var c=Bt();yn(a,n,r,c)}Cu(n,r)}},Xc=function(){return Ne},qc=function(n,r){var a=Ne;try{return Ne=n,r()}finally{Ne=a}},Tr=function(n,r,a){switch(r){case"input":if(Jn(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=Ao(c);if(!d)throw Error(t(90));Jt(c),Jn(c,d)}}}break;case"textarea":Zs(n,a);break;case"select":r=a.value,r!=null&&Bn(n,!!a.multiple,r,!1)}},io=gu,so=Nr;var Xy={usingClientEntryPoint:!1,Events:[ds,li,Ao,no,ro,gu]},As={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qy={bundleType:As.bundleType,version:As.version,rendererPackageName:As.rendererPackageName,rendererConfig:As.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=j(n),n===null?null:n.stateNode},findFiberByHostInstance:As.findFiberByHostInstance||Vy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{Ye=ca.inject(qy),Oe=ca}catch{}}return Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xy,Wt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bu(r))throw Error(t(200));return Hy(n,r,null,a)},Wt.createRoot=function(n,r){if(!bu(n))throw Error(t(299));var a=!1,c="",d=df;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Su(n,1,!1,null,null,a,!1,c,d),n[Dn]=r.current,us(n.nodeType===8?n.parentNode:n),new ku(r)},Wt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=j(r),n=n===null?null:n.stateNode,n},Wt.flushSync=function(n){return Nr(n)},Wt.hydrate=function(n,r,a){if(!la(r))throw Error(t(200));return ua(null,n,r,!0,a)},Wt.hydrateRoot=function(n,r,a){if(!bu(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,g="",x=df;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),r=cf(r,null,n,1,a??null,d,!1,g,x),n[Dn]=r.current,us(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new aa(r)},Wt.render=function(n,r,a){if(!la(r))throw Error(t(200));return ua(null,n,r,!1,a)},Wt.unmountComponentAtNode=function(n){if(!la(n))throw Error(t(40));return n._reactRootContainer?(Nr(function(){ua(null,null,n,!1,function(){n._reactRootContainer=null,n[Dn]=null})}),!0):!1},Wt.unstable_batchedUpdates=gu,Wt.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!la(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return ua(n,r,a,!1,c)},Wt.version="18.3.1-next-f1338f8080-20240426",Wt}var wf;function rx(){if(wf)return Tu.exports;wf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Tu.exports=nx(),Tu.exports}var Sf;function ix(){if(Sf)return ha;Sf=1;var i=rx();return ha.createRoot=i.createRoot,ha.hydrateRoot=i.hydrateRoot,ha}var sx=ix();const ox=Tc(sx);var Te=Ec();const ax="modulepreload",lx=function(i){return"/"+i},Cf={},Ia=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=u(t.map(p=>{if(p=lx(p),p in Cf)return;Cf[p]=!0;const m=p.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":ax,m||(_.as="script"),_.crossOrigin="",_.href=p,f&&_.setAttribute("nonce",f),document.head.appendChild(_),m)return new Promise((v,S)=>{_.addEventListener("load",v),_.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};var fe=(i=>(i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i.ShapeBuilder="shape-builder",i.Batcher="batcher",i))(fe||{});const ac=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},da=(i,e)=>ac(i).priority??e,bt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(ac).forEach(e=>{e.type.forEach(t=>{var s,o;return(o=(s=this._removeHandlers)[t])==null?void 0:o.call(s,e)})}),this},add(...i){return i.map(ac).forEach(e=>{e.type.forEach(t=>{var l,u;const s=this._addHandlers,o=this._queue;s[t]?(u=s[t])==null||u.call(s,e):(o[t]=o[t]||[],(l=o[t])==null||l.push(e))})}),this},handle(i,e,t){var u;const s=this._addHandlers,o=this._removeHandlers;if(s[i]||o[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=e,o[i]=t;const l=this._queue;return l[i]&&((u=l[i])==null||u.forEach(h=>e(h)),delete l[i]),this},handleByMap(i,e){return this.handle(i,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(i,e,t=-1){return this.handle(i,s=>{e.findIndex(l=>l.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((l,u)=>da(u.value,t)-da(l.value,t)))},s=>{const o=e.findIndex(l=>l.name===s.name);o!==-1&&e.splice(o,1)})},handleByList(i,e,t=-1){return this.handle(i,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((o,l)=>da(l,t)-da(o,t)))},s=>{const o=e.indexOf(s.ref);o!==-1&&e.splice(o,1)})},mixin(i,...e){for(const t of e)Object.defineProperties(i.prototype,Object.getOwnPropertyDescriptors(t))}},ux={extension:{type:fe.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Ia(()=>import("./browserAll-DER0nwqI.js"),__vite__mapDeps([0,1,2]))}},cx={extension:{type:fe.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Ia(()=>import("./webworkerAll-DAfRxMqu.js"),__vite__mapDeps([1,2]))}};class It{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new It(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Ru={exports:{}},kf;function hx(){return kf||(kf=1,(function(i){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function o(f,p,m){this.fn=f,this.context=p,this.once=m||!1}function l(f,p,m,y,_){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new o(m,y||f,_),S=t?t+p:p;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],v]:f._events[S].push(v):(f._events[S]=v,f._eventsCount++),f}function u(f,p){--f._eventsCount===0?f._events=new s:delete f._events[p]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],m,y;if(this._eventsCount===0)return p;for(y in m=this._events)e.call(m,y)&&p.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},h.prototype.listeners=function(p){var m=t?t+p:p,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,v=y.length,S=new Array(v);_<v;_++)S[_]=y[_].fn;return S},h.prototype.listenerCount=function(p){var m=t?t+p:p,y=this._events[m];return y?y.fn?1:y.length:0},h.prototype.emit=function(p,m,y,_,v,S){var k=t?t+p:p;if(!this._events[k])return!1;var w=this._events[k],P=arguments.length,T,E;if(w.fn){switch(w.once&&this.removeListener(p,w.fn,void 0,!0),P){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,y),!0;case 4:return w.fn.call(w.context,m,y,_),!0;case 5:return w.fn.call(w.context,m,y,_,v),!0;case 6:return w.fn.call(w.context,m,y,_,v,S),!0}for(E=1,T=new Array(P-1);E<P;E++)T[E-1]=arguments[E];w.fn.apply(w.context,T)}else{var I=w.length,U;for(E=0;E<I;E++)switch(w[E].once&&this.removeListener(p,w[E].fn,void 0,!0),P){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,m);break;case 3:w[E].fn.call(w[E].context,m,y);break;case 4:w[E].fn.call(w[E].context,m,y,_);break;default:if(!T)for(U=1,T=new Array(P-1);U<P;U++)T[U-1]=arguments[U];w[E].fn.apply(w[E].context,T)}}return!0},h.prototype.on=function(p,m,y){return l(this,p,m,y,!1)},h.prototype.once=function(p,m,y){return l(this,p,m,y,!0)},h.prototype.removeListener=function(p,m,y,_){var v=t?t+p:p;if(!this._events[v])return this;if(!m)return u(this,v),this;var S=this._events[v];if(S.fn)S.fn===m&&(!_||S.once)&&(!y||S.context===y)&&u(this,v);else{for(var k=0,w=[],P=S.length;k<P;k++)(S[k].fn!==m||_&&!S[k].once||y&&S[k].context!==y)&&w.push(S[k]);w.length?this._events[v]=w.length===1?w[0]:w:u(this,v)}return this},h.prototype.removeAllListeners=function(p){var m;return p?(m=t?t+p:p,this._events[m]&&u(this,m)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,i.exports=h})(Ru)),Ru.exports}var dx=hx();const Sn=Tc(dx),fx=Math.PI*2,px=180/Math.PI,mx=Math.PI/180;class Ft{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Ft(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Iu.x=0,Iu.y=0,Iu}}const Iu=new Ft;class Re{constructor(e=1,t=0,s=0,o=1,l=0,u=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,o,l,u){return this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new Ft;const s=e.x,o=e.y;return t.x=this.a*s+this.c*o+this.tx,t.y=this.b*s+this.d*o+this.ty,t}applyInverse(e,t){t=t||new Ft;const s=this.a,o=this.b,l=this.c,u=this.d,h=this.tx,f=this.ty,p=1/(s*u+l*-o),m=e.x,y=e.y;return t.x=u*p*m+-l*p*y+(f*l-h*u)*p,t.y=s*p*y+-o*p*m+(-f*s+h*o)*p,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.a,l=this.c,u=this.tx;return this.a=o*t-this.b*s,this.b=o*s+this.b*t,this.c=l*t-this.d*s,this.d=l*s+this.d*t,this.tx=u*t-this.ty*s,this.ty=u*s+this.ty*t,this}append(e){const t=this.a,s=this.b,o=this.c,l=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*s+e.b*l,this.c=e.c*t+e.d*o,this.d=e.c*s+e.d*l,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*s+e.ty*l+this.ty,this}appendFrom(e,t){const s=e.a,o=e.b,l=e.c,u=e.d,h=e.tx,f=e.ty,p=t.a,m=t.b,y=t.c,_=t.d;return this.a=s*p+o*y,this.b=s*m+o*_,this.c=l*p+u*y,this.d=l*m+u*_,this.tx=h*p+f*y+t.tx,this.ty=h*m+f*_+t.ty,this}setTransform(e,t,s,o,l,u,h,f,p){return this.a=Math.cos(h+p)*l,this.b=Math.sin(h+p)*l,this.c=-Math.sin(h-f)*u,this.d=Math.cos(h-f)*u,this.tx=e-(s*this.a+o*this.c),this.ty=t-(s*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,o=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,o=this.c,l=this.d,u=e.pivot,h=-Math.atan2(-o,l),f=Math.atan2(s,t),p=Math.abs(h+f);return p<1e-5||Math.abs(fx-p)<1e-5?(e.rotation=f,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=f),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(o*o+l*l),e.position.x=this.tx+(u.x*t+u.y*o),e.position.y=this.ty+(u.x*s+u.y*l),e}invert(){const e=this.a,t=this.b,s=this.c,o=this.d,l=this.tx,u=e*o-t*s;return this.a=o/u,this.b=-t/u,this.c=-s/u,this.d=e/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(e*this.ty-t*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Re;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return yx.identity()}static get shared(){return gx.identity()}}const gx=new Re,yx=new Re,Hr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Vr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Yr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Xr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],lc=[],Gp=[],fa=Math.sign;function xx(){for(let i=0;i<16;i++){const e=[];lc.push(e);for(let t=0;t<16;t++){const s=fa(Hr[i]*Hr[t]+Yr[i]*Vr[t]),o=fa(Vr[i]*Hr[t]+Xr[i]*Vr[t]),l=fa(Hr[i]*Yr[t]+Yr[i]*Xr[t]),u=fa(Vr[i]*Yr[t]+Xr[i]*Xr[t]);for(let h=0;h<16;h++)if(Hr[h]===s&&Vr[h]===o&&Yr[h]===l&&Xr[h]===u){e.push(h);break}}}for(let i=0;i<16;i++){const e=new Re;e.set(Hr[i],Vr[i],Yr[i],Xr[i],0,0),Gp.push(e)}}xx();const Ge={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>Hr[i],uY:i=>Vr[i],vX:i=>Yr[i],vY:i=>Xr[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>lc[i][e],sub:(i,e)=>lc[i][Ge.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?Ge.S:Ge.N:Math.abs(e)*2<=Math.abs(i)?i>0?Ge.E:Ge.W:e>0?i>0?Ge.SE:Ge.SW:i>0?Ge.NE:Ge.NW,matrixAppendRotationInv:(i,e,t=0,s=0)=>{const o=Gp[Ge.inv(e)];o.tx=t,o.ty=s,i.append(o)},transformRectCoords:(i,e,t,s)=>{const{x:o,y:l,width:u,height:h}=i,{x:f,y:p,width:m,height:y}=e;return t===Ge.E?(s.set(o+f,l+p,u,h),s):t===Ge.S?s.set(m-l-h+f,o+p,h,u):t===Ge.W?s.set(m-o-u+f,y-l-h+p,u,h):t===Ge.N?s.set(l+f,y-o-u+p,h,u):s.set(o+f,l+p,u,h)}},pa=[new Ft,new Ft,new Ft,new Ft];class ct{constructor(e=0,t=0,s=0,o=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new ct(0,0,0,0)}clone(){return new ct(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,f=this.y,p=s*(1-o),m=s-p,y=h-p,_=h+l+p,v=f-p,S=f+u+p,k=h+m,w=h+l-m,P=f+m,T=f+u-m;return e>=y&&e<=_&&t>=v&&t<=S&&!(e>k&&e<w&&t>P&&t<T)}intersects(e,t){if(!t){const te=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=te)return!1;const X=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>X}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const h=pa[0].set(e.left,e.top),f=pa[1].set(e.left,e.bottom),p=pa[2].set(e.right,e.top),m=pa[3].set(e.right,e.bottom);if(p.x<=h.x||f.y<=h.y)return!1;const y=Math.sign(t.a*t.d-t.b*t.c);if(y===0||(t.apply(h,h),t.apply(f,f),t.apply(p,p),t.apply(m,m),Math.max(h.x,f.x,p.x,m.x)<=s||Math.min(h.x,f.x,p.x,m.x)>=o||Math.max(h.y,f.y,p.y,m.y)<=l||Math.min(h.y,f.y,p.y,m.y)>=u))return!1;const _=y*(f.y-h.y),v=y*(h.x-f.x),S=_*s+v*l,k=_*o+v*l,w=_*s+v*u,P=_*o+v*u;if(Math.max(S,k,w,P)<=_*h.x+v*h.y||Math.min(S,k,w,P)>=_*m.x+v*m.y)return!1;const T=y*(h.y-p.y),E=y*(p.x-h.x),I=T*s+E*l,U=T*o+E*l,D=T*s+E*u,O=T*o+E*u;return!(Math.max(I,U,D,O)<=T*h.x+E*h.y||Math.min(I,U,D,O)>=T*m.x+E*m.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),l=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=o-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),l=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=o,this.height=l-o,this}getBounds(e){return e||(e=new ct),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,o=e.x+e.width,l=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(e,t,s,o){return this.x=e,this.y=t,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Fu={default:-1};function lt(i="default"){return Fu[i]===void 0&&(Fu[i]=-1),++Fu[i]}const bf=new Set,Ue="8.0.0",_x="8.3.4",Pi={quiet:!1,noColor:!1},Me=(i,e,t=3)=>{if(Pi.quiet||bf.has(e))return;let s=new Error().stack;const o=`${e}
Deprecated since v${i}`,l=typeof console.groupCollapsed=="function"&&!Pi.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(t).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),bf.add(e)};Object.defineProperties(Me,{quiet:{get:()=>Pi.quiet,set:i=>{Pi.quiet=i},enumerable:!0,configurable:!1},noColor:{get:()=>Pi.noColor,set:i=>{Pi.noColor=i},enumerable:!0,configurable:!1}});const Up=()=>{};function Fa(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Af(i){return!(i&i-1)&&!!i}function Wp(i){const e={};for(const t in i)i[t]!==void 0&&(e[t]=i[t]);return e}const Pf=Object.create(null);function vx(i){const e=Pf[i];return e===void 0&&(Pf[i]=lt("resource")),e}const Hp=class Vp extends Sn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...Vp.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Me(Ue,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=vx(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Hp.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let La=Hp;const Yp=class Xp extends Sn{constructor(e={}){super(),this.options=e,this.uid=lt("textureSource"),this._resourceType="textureSource",this._resourceId=lt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...Xp.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new La(Wp(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=lt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const o=Math.round(e*s),l=Math.round(t*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=lt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Af(this.pixelWidth)&&Af(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};Yp.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Cn=Yp;class Mc extends Cn{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Mc.extension=fe.TextureSource;const Tf=new Re;class wx{constructor(e,t){this.mapCoord=new Re,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let o=0;o<e.length;o+=2){const l=e[o],u=e[o+1];t[o]=l*s.a+u*s.c+s.tx,t[o+1]=l*s.b+u*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,o=e.trim;o&&(Tf.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Tf));const l=e.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,f=this.clampOffset/l._resolution;return u[0]=(e.frame.x+h+f)/l.width,u[1]=(e.frame.y+h+f)/l.height,u[2]=(e.frame.x+e.frame.width-h+f)/l.width,u[3]=(e.frame.y+e.frame.height-h+f)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=e.frame.width===l.width&&e.frame.height===l.height&&e.rotate===0,!0}}class Le extends Sn{constructor({source:e,label:t,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:h,rotate:f,dynamic:p}={}){if(super(),this.uid=lt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new ct,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new Cn,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:m,height:y}=this._source;this.frame.width=m,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=f??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new wx(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:o}=this._source,l=t.x/s,u=t.y/o,h=t.width/s,f=t.height/o;let p=this.rotate;if(p){const m=h/2,y=f/2,_=l+m,v=u+y;p=Ge.add(p,Ge.NW),e.x0=_+m*Ge.uX(p),e.y0=v+y*Ge.uY(p),p=Ge.add(p,2),e.x1=_+m*Ge.uX(p),e.y1=v+y*Ge.uY(p),p=Ge.add(p,2),e.x2=_+m*Ge.uX(p),e.y2=v+y*Ge.uY(p),p=Ge.add(p,2),e.x3=_+m*Ge.uX(p),e.y3=v+y*Ge.uY(p)}else e.x0=l,e.y0=u,e.x1=l+h,e.y1=u,e.x2=l+h,e.y2=u+f,e.x3=l,e.y3=u+f}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Me(Ue,"Texture.baseTexture is now Texture.source"),this._source}}Le.EMPTY=new Le({label:"EMPTY",source:new Cn({label:"EMPTY"})});Le.EMPTY.destroy=Up;Le.WHITE=new Le({source:new Mc({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Le.WHITE.destroy=Up;function Sx(i,e,t){const{width:s,height:o}=t.orig,l=t.trim;if(l){const u=l.width,h=l.height;i.minX=l.x-e._x*s,i.maxX=i.minX+u,i.minY=l.y-e._y*o,i.maxY=i.minY+h}else i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*o,i.maxY=i.minY+o}const Ef=new Re;class wn{constructor(e=1/0,t=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Ef,this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new ct);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Ef,this}set(e,t,s,o){this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}addFrame(e,t,s,o,l){l||(l=this.matrix);const u=l.a,h=l.b,f=l.c,p=l.d,m=l.tx,y=l.ty;let _=this.minX,v=this.minY,S=this.maxX,k=this.maxY,w=u*e+f*t+m,P=h*e+p*t+y;w<_&&(_=w),P<v&&(v=P),w>S&&(S=w),P>k&&(k=P),w=u*s+f*t+m,P=h*s+p*t+y,w<_&&(_=w),P<v&&(v=P),w>S&&(S=w),P>k&&(k=P),w=u*e+f*o+m,P=h*e+p*o+y,w<_&&(_=w),P<v&&(v=P),w>S&&(S=w),P>k&&(k=P),w=u*s+f*o+m,P=h*s+p*o+y,w<_&&(_=w),P<v&&(v=P),w>S&&(S=w),P>k&&(k=P),this.minX=_,this.minY=v,this.maxX=S,this.maxY=k}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:h,c:f,d:p,tx:m,ty:y}=e;let _=u*t+f*s+m,v=h*t+p*s+y;this.minX=_,this.minY=v,this.maxX=_,this.maxY=v,_=u*o+f*s+m,v=h*o+p*s+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY,_=u*t+f*l+m,v=h*t+p*l+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY,_=u*o+f*l+m,v=h*o+p*l+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,o){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new wn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,o){let l=this.minX,u=this.minY,h=this.maxX,f=this.maxY;o||(o=this.matrix);const p=o.a,m=o.b,y=o.c,_=o.d,v=o.tx,S=o.ty;for(let k=t;k<s;k+=2){const w=e[k],P=e[k+1],T=p*w+y*P+v,E=m*w+_*P+S;l=T<l?T:l,u=E<u?E:u,h=T>h?T:h,f=E>f?E:f}this.minX=l,this.minY=u,this.maxX=h,this.maxY=f}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var Cx={grad:.9,turn:360,rad:360/(2*Math.PI)},Vn=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},St=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},un=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},qp=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},Mf=function(i){return{r:un(i.r,0,255),g:un(i.g,0,255),b:un(i.b,0,255),a:un(i.a)}},Lu=function(i){return{r:St(i.r),g:St(i.g),b:St(i.b),a:St(i.a,3)}},kx=/^#([0-9a-f]{3,8})$/i,ma=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},Kp=function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=Math.max(e,t,s),u=l-Math.min(e,t,s),h=u?l===e?(t-s)/u:l===t?2+(s-e)/u:4+(e-t)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a:o}},Qp=function(i){var e=i.h,t=i.s,s=i.v,o=i.a;e=e/360*6,t/=100,s/=100;var l=Math.floor(e),u=s*(1-t),h=s*(1-(e-l)*t),f=s*(1-(1-e+l)*t),p=l%6;return{r:255*[s,h,u,u,f,s][p],g:255*[f,s,s,h,u,u][p],b:255*[u,u,f,s,s,h][p],a:o}},Rf=function(i){return{h:qp(i.h),s:un(i.s,0,100),l:un(i.l,0,100),a:un(i.a)}},If=function(i){return{h:St(i.h),s:St(i.s),l:St(i.l),a:St(i.a,3)}},Ff=function(i){return Qp((t=(e=i).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},Ns=function(i){return{h:(e=Kp(i)).h,s:(o=(200-(t=e.s))*(s=e.v)/100)>0&&o<200?t*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,s,o},bx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ax=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Px=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Tx=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uc={string:[[function(i){var e=kx.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?St(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?St(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=Px.exec(i)||Tx.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:Mf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=bx.exec(i)||Ax.exec(i);if(!e)return null;var t,s,o=Rf({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(Cx[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Ff(o)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=o===void 0?1:o;return Vn(e)&&Vn(t)&&Vn(s)?Mf({r:Number(e),g:Number(t),b:Number(s),a:Number(l)}):null},"rgb"],[function(i){var e=i.h,t=i.s,s=i.l,o=i.a,l=o===void 0?1:o;if(!Vn(e)||!Vn(t)||!Vn(s))return null;var u=Rf({h:Number(e),s:Number(t),l:Number(s),a:Number(l)});return Ff(u)},"hsl"],[function(i){var e=i.h,t=i.s,s=i.v,o=i.a,l=o===void 0?1:o;if(!Vn(e)||!Vn(t)||!Vn(s))return null;var u=(function(h){return{h:qp(h.h),s:un(h.s,0,100),v:un(h.v,0,100),a:un(h.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(l)});return Qp(u)},"hsv"]]},Lf=function(i,e){for(var t=0;t<e.length;t++){var s=e[t][0](i);if(s)return[s,e[t][1]]}return[null,void 0]},Ex=function(i){return typeof i=="string"?Lf(i.trim(),uc.string):typeof i=="object"&&i!==null?Lf(i,uc.object):[null,void 0]},Bu=function(i,e){var t=Ns(i);return{h:t.h,s:un(t.s+100*e,0,100),l:t.l,a:t.a}},zu=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},Bf=function(i,e){var t=Ns(i);return{h:t.h,s:t.s,l:un(t.l+100*e,0,100),a:t.a}},cc=(function(){function i(e){this.parsed=Ex(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return St(zu(this.rgba),2)},i.prototype.isDark=function(){return zu(this.rgba)<.5},i.prototype.isLight=function(){return zu(this.rgba)>=.5},i.prototype.toHex=function(){return e=Lu(this.rgba),t=e.r,s=e.g,o=e.b,u=(l=e.a)<1?ma(St(255*l)):"","#"+ma(t)+ma(s)+ma(o)+u;var e,t,s,o,l,u},i.prototype.toRgb=function(){return Lu(this.rgba)},i.prototype.toRgbString=function(){return e=Lu(this.rgba),t=e.r,s=e.g,o=e.b,(l=e.a)<1?"rgba("+t+", "+s+", "+o+", "+l+")":"rgb("+t+", "+s+", "+o+")";var e,t,s,o,l},i.prototype.toHsl=function(){return If(Ns(this.rgba))},i.prototype.toHslString=function(){return e=If(Ns(this.rgba)),t=e.h,s=e.s,o=e.l,(l=e.a)<1?"hsla("+t+", "+s+"%, "+o+"%, "+l+")":"hsl("+t+", "+s+"%, "+o+"%)";var e,t,s,o,l},i.prototype.toHsv=function(){return e=Kp(this.rgba),{h:St(e.h),s:St(e.s),v:St(e.v),a:St(e.a,3)};var e},i.prototype.invert=function(){return Rn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),Rn(Bu(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),Rn(Bu(this.rgba,-e))},i.prototype.grayscale=function(){return Rn(Bu(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),Rn(Bf(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),Rn(Bf(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?Rn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):St(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=Ns(this.rgba);return typeof e=="number"?Rn({h:e,s:t.s,l:t.l,a:t.a}):St(t.h)},i.prototype.isEqual=function(e){return this.toHex()===Rn(e).toHex()},i})(),Rn=function(i){return i instanceof cc?i:new cc(i)},zf=[],Mx=function(i){i.forEach(function(e){zf.indexOf(e)<0&&(e(cc,uc),zf.push(e))})};function Rx(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in t)s[t[o]]=o;var l={};i.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,f,p=s[this.toHex()];if(p)return p;if(u!=null&&u.closest){var m=this.toRgb(),y=1/0,_="black";if(!l.length)for(var v in t)l[v]=new i(t[v]).toRgb();for(var S in t){var k=(h=m,f=l[S],Math.pow(h.r-f.r,2)+Math.pow(h.g-f.g,2)+Math.pow(h.b-f.b,2));k<y&&(y=k,_=S)}return _}},e.string.push([function(u){var h=u.toLowerCase(),f=h==="transparent"?"#0000":t[h];return f?new i(f).toRgb():null},"name"])}Mx([Rx]);const Mi=class Bs{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Bs)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((l,u)=>l===t[u]);if(e!==null&&t!==null){const l=Object.keys(e),u=Object.keys(t);return l.length!==u.length?!1:l.every(h=>e[h]===t[h])}return e===t}toRgba(){const[e,t,s,o]=this._components;return{r:e,g:t,b:s,a:o}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(o*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,o,l]=this._components;return e[0]=t,e[1]=s,e[2]=o,e[3]=l,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,o]=this._components;return e[0]=t,e[1]=s,e[2]=o,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,o,l]=Bs._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return t&&(s=s*e+.5|0,o=o*e+.5|0,l=l*e+.5|0),(e*255<<24)+(s<<16)+(o<<8)+l}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,o,l;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,o,l=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,o,l=255]=e,t/=255,s/=255,o/=255,l/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const h=Bs.HEX_PATTERN.exec(e);h&&(e=`#${h[2]}`)}const u=Rn(e);u.isValid()&&({r:t,g:s,b:o,a:l}=u.rgba,t/=255,s/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((o,l)=>{e[l]=Math.min(Math.max(o,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Bs||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Mi.shared=new Mi;Mi._temp=new Mi;Mi.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let yt=Mi;const Ix={cullArea:null,cullable:!1,cullableChildren:!0};let ju=0;const jf=500;function Ze(...i){ju!==jf&&(ju++,ju===jf?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}const Qs={_registeredResources:new Set,register(i){this._registeredResources.add(i)},unregister(i){this._registeredResources.delete(i)},release(){this._registeredResources.forEach(i=>i.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(i){return this._registeredResources.has(i)},reset(){this._registeredResources.clear()}};class Fx{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class Lx{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Fx(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const cn=new Lx;Qs.register(cn);const Bx={get isCachedAsTexture(){var i;return!!((i=this.renderGroup)!=null&&i.isCachedAsTexture)},cacheAsTexture(i){typeof i=="boolean"&&i===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(i===!0?{}:i))},updateCacheTexture(){var i;(i=this.renderGroup)==null||i.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(i){Me("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(i)}};function zx(i,e,t){const s=i.length;let o;if(e>=s||t===0)return;t=e+t>s?s-e:t;const l=s-t;for(o=e;o<l;++o)i[o]=i[o+t];i.length=l}const jx={allowChildren:!0,removeChildren(i=0,e){var l;const t=e??this.children.length,s=t-i,o=[];if(s>0&&s<=t){for(let h=t-1;h>=i;h--){const f=this.children[h];f&&(o.push(f),f.parent=null)}zx(this.children,i,t);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(o);for(let h=0;h<o.length;++h){const f=o[h];(l=f.parentRenderLayer)==null||l.detach(f),this.emit("childRemoved",f,this,h),o[h].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){const e=this.getChildAt(i);return this.removeChild(e)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,e)},getChildIndex(i){const e=this.children.indexOf(i);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(i,e){this.allowChildren||Me(Ue,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${i}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(i.parent){const o=i.parent.children.indexOf(i);if(i.parent===this&&o===e)return i;o!==-1&&i.parent.children.splice(o,1)}e===t.length?t.push(i):t.splice(e,0,i),i.parent=this,i.didChange=!0,i._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,e),i.emit("added",this),i},swapChildren(i,e){if(i===e)return;const t=this.getChildIndex(i),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=i;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var i;(i=this.parent)==null||i.removeChild(this)},reparentChild(...i){return i.length===1?this.reparentChildAt(i[0],this.children.length):(i.forEach(e=>this.reparentChildAt(e,this.children.length)),i[0])},reparentChildAt(i,e){if(i.parent===this)return this.setChildIndex(i,e),i;const t=i.worldTransform.clone();i.removeFromParent(),this.addChildAt(i,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),i.setFromMatrix(t),i},replaceChild(i,e){i.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(i)),e.setFromMatrix(i.localTransform),e.updateLocalTransform(),this.removeChild(i)}},Dx={collectRenderables(i,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(i,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,i):this.collectRenderablesWithEffects(i,e,t))},collectRenderablesSimple(i,e,t){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(i,e,t)},collectRenderablesWithEffects(i,e,t){const{renderPipes:s}=e;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,i)}this.collectRenderablesSimple(i,e,t);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,i)}}};class Df{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class Ox{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return cn.get(s.maskClass,e)}return e}returnMaskEffect(e){cn.return(e)}}const hc=new Ox;bt.handleByList(fe.MaskEffect,hc._effectClasses);const Nx={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)},addEffect(i){this.effects.indexOf(i)===-1&&(this.effects.push(i),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(i){const e=this.effects.indexOf(i);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(i){const e=this._maskEffect;(e==null?void 0:e.mask)!==i&&(e&&(this.removeEffect(e),hc.returnMaskEffect(e),this._maskEffect=null),i!=null&&(this._maskEffect=hc.getMaskEffect(i),this.addEffect(this._maskEffect)))},get mask(){var i;return(i=this._maskEffect)==null?void 0:i.mask},setMask(i){this._maskOptions={...this._maskOptions,...i},i.mask&&(this.mask=i.mask),this._markStructureAsChanged()},set filters(i){var l;!Array.isArray(i)&&i&&(i=[i]);const e=this._filterEffect||(this._filterEffect=new Df);i=i;const t=(i==null?void 0:i.length)>0,s=((l=e.filters)==null?void 0:l.length)>0,o=t!==s;i=Array.isArray(i)?i.slice(0):i,e.filters=Object.freeze(i),o&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=i??null))},get filters(){var i;return(i=this._filterEffect)==null?void 0:i.filters},set filterArea(i){this._filterEffect||(this._filterEffect=new Df),this._filterEffect.filterArea=i},get filterArea(){var i;return(i=this._filterEffect)==null?void 0:i.filterArea}},$x={label:null,get name(){return Me(Ue,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){Me(Ue,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,e=!1){return this.getChildByLabel(i,e)},getChildByLabel(i,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const o=t[s];if(o.label===i||i instanceof RegExp&&i.test(o.label))return o}if(e)for(let s=0;s<t.length;s++){const l=t[s].getChildByLabel(i,!0);if(l)return l}return null},getChildrenByLabel(i,e=!1,t=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===i||i instanceof RegExp&&i.test(l.label))&&t.push(l)}if(e)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(i,!0,t);return t}},zt=cn.getPool(Re),qn=cn.getPool(wn),Gx=new Re,Ux={getFastGlobalBounds(i,e){e||(e=new wn),e.clear(),this._getGlobalBoundsRecursive(!!i,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(i,e,t){let s=e;if(i&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=qn.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(i,s,t)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(Gx).invert()),e.addBounds(s),qn.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),qn.return(s))}};function Zp(i,e,t){t.clear();let s,o;return i.parent?e?s=i.parent.worldTransform:(o=zt.get().identity(),s=Rc(i,o)):s=Re.IDENTITY,Jp(i,t,s,e),o&&zt.return(o),t.isValid||t.set(0,0,0,0),t}function Jp(i,e,t,s){var h,f;if(!i.visible||!i.measurable)return;let o;s?o=i.worldTransform:(i.updateLocalTransform(),o=zt.get(),o.appendFrom(i.localTransform,t));const l=e,u=!!i.effects.length;if(u&&(e=qn.get().clear()),i.boundsArea)e.addRect(i.boundsArea,o);else{const p=i.bounds;p&&!p.isEmpty()&&(e.matrix=o,e.addBounds(p));for(let m=0;m<i.children.length;m++)Jp(i.children[m],e,o,s)}if(u){for(let p=0;p<i.effects.length;p++)(f=(h=i.effects[p]).addBounds)==null||f.call(h,e);l.addBounds(e,Re.IDENTITY),qn.return(e)}s||zt.return(o)}function Rc(i,e){const t=i.parent;return t&&(Rc(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function em(i,e){if(i===16777215||!e)return e;if(e===16777215||!i)return i;const t=i>>16&255,s=i>>8&255,o=i&255,l=e>>16&255,u=e>>8&255,h=e&255,f=t*l/255|0,p=s*u/255|0,m=o*h/255|0;return(f<<16)+(p<<8)+m}const Of=16777215;function Nf(i,e){return i===Of?e:e===Of?i:em(i,e)}function Pa(i){return((i&255)<<16)+(i&65280)+(i>>16&255)}const Wx={getGlobalAlpha(i){if(i)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(i=new Re,e){if(e)return i.copyFrom(this.worldTransform);this.updateLocalTransform();const t=Rc(this,zt.get().identity());return i.appendFrom(this.localTransform,t),zt.return(t),i},getGlobalTint(i){if(i)return this.renderGroup?Pa(this.renderGroup.worldColor):this.parentRenderGroup?Pa(Nf(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Nf(e,t.localColor),t=t.parent;return Pa(e)}};function tm(i,e,t){return e.clear(),t||(t=Re.IDENTITY),nm(i,e,t,i,!0),e.isValid||e.set(0,0,0,0),e}function nm(i,e,t,s,o){var f,p;let l;if(o)l=zt.get(),l=t.copyTo(l);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const m=i.localTransform;l=zt.get(),l.appendFrom(m,t)}const u=e,h=!!i.effects.length;if(h&&(e=qn.get().clear()),i.boundsArea)e.addRect(i.boundsArea,l);else{i.renderPipeId&&(e.matrix=l,e.addBounds(i.bounds));const m=i.children;for(let y=0;y<m.length;y++)nm(m[y],e,l,s,!1)}if(h){for(let m=0;m<i.effects.length;m++)(p=(f=i.effects[m]).addLocalBounds)==null||p.call(f,e,s);u.addBounds(e,Re.IDENTITY),qn.return(e)}zt.return(l)}function rm(i,e){const t=i.children;for(let s=0;s<t.length;s++){const o=t[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,h=e.index;(e.data[h]!==l||e.data[h+1]!==u)&&(e.data[e.index]=l,e.data[e.index+1]=u,e.didChange=!0),e.index=h+2,o.children.length&&rm(o,e)}return e.didChange}const Hx=new Re,Vx={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(i,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=i/e*t:this.scale.x=t},_setHeight(i,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=i/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new wn});const i=this._localBoundsCacheData;return i.index=1,i.didChange=!1,i.data[0]!==this._didViewChangeTick&&(i.didChange=!0,i.data[0]=this._didViewChangeTick),rm(this,i),i.didChange&&tm(this,i.localBounds,Hx),i.localBounds},getBounds(i,e){return Zp(this,i,e||new wn)}},Yx={_onRender:null,set onRender(i){const e=this.renderGroup||this.parentRenderGroup;if(!i){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}},Xx={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(qx))}};function qx(i,e){return i._zIndex-e._zIndex}const Kx={getGlobalPosition(i=new Ft,e=!1){return this.parent?this.parent.toGlobal(this._position,i,e):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,e,t=!1){const s=this.getGlobalTransform(zt.get(),t);return e=s.apply(i,e),zt.return(s),e},toLocal(i,e,t,s){e&&(i=e.toGlobal(i,t,s));const o=this.getGlobalTransform(zt.get(),s);return t=o.applyInverse(i,t),zt.return(o),t}};class im{constructor(){this.uid=lt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let Qx=0;class Zx{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new La(this.textureOptions)}createTexture(e,t,s){const o=new Cn({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new Le({source:o,label:`texturePool_${Qx++}`})}getOptimalTexture(e,t,s=1,o){let l=Math.ceil(e*s-1e-6),u=Math.ceil(t*s-1e-6);l=Fa(l),u=Fa(u);const h=(l<<17)+(u<<1)+(o?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let f=this._texturePool[h].pop();return f||(f=this.createTexture(l,u,o)),f.source._resolution=s,f.source.width=l/s,f.source.height=u/s,f.source.pixelWidth=l,f.source.pixelHeight=u,f.frame.x=0,f.frame.y=0,f.frame.width=e,f.frame.height=t,f.updateUvs(),this._poolKeyHash[f.uid]=h,f}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const sm=new Zx;Qs.register(sm);class Jx{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Re,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new im,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(sm.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Re),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Re),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Re),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function e0(i,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(i[s]=e[s])}const Du=new It(null),ga=new It(null),Ou=new It(null,1,1),ya=new It(null),$f=1,t0=2,Nu=4;class vn extends Sn{constructor(e={}){var t,s;super(),this.uid=lt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Re,this.relativeGroupTransform=new Re,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new It(this,0,0),this._scale=Ou,this._pivot=ga,this._origin=ya,this._skew=Du,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],e0(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(o=>this.addChild(o)),(s=e.parent)==null||s.addChild(this)}static mixin(e){Me("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),bt.mixin(vn,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Me(Ue,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let o=0;o<e.length;o++)this.addChild(e[o]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let o=0;o<e.length;o++)this.removeChild(e[o]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=cn.get(Jx,this),this.groupTransform=Re.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),cn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Re),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*px}set angle(e){this.rotation=e*mx}get pivot(){return this._pivot===ga&&(this._pivot=new It(this,0,0)),this._pivot}set pivot(e){this._pivot===ga&&(this._pivot=new It(this,0,0),this._origin!==ya&&Ze("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Du&&(this._skew=new It(this,0,0)),this._skew}set skew(e){this._skew===Du&&(this._skew=new It(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Ou&&(this._scale=new It(this,1,1)),this._scale}set scale(e){this._scale===Ou&&(this._scale=new It(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===ya&&(this._origin=new It(this,0,0)),this._origin}set origin(e){this._origin===ya&&(this._origin=new It(this,0,0),this._pivot!==ga&&Ze("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,h=s._x,f=s._y,p=o._x,m=o._y,y=-l._x,_=-l._y;t.a=this._cx*h,t.b=this._sx*h,t.c=this._cy*f,t.d=this._sy*f,t.tx=u._x-(p*t.a+m*t.c)+(y*t.a+_*t.c)-y,t.ty=u._y-(p*t.b+m*t.d)+(y*t.b+_*t.d)-_}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=$f,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=yt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=$f,this._onUpdate())}get tint(){return Pa(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=t0,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Nu,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Nu,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=Nu,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var o;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let l=0;l<t.length;++l)t[l].destroy(e);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}bt.mixin(vn,jx,Ux,Kx,Yx,Vx,Nx,$x,Xx,Ix,Bx,Wx,Dx);class om extends vn{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new wn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:o}=e;return s>=t.minX&&s<=t.maxX&&o>=t.minY&&o<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var t,s;super.destroy(e),this._bounds=null;for(const o in this._gpuData)(s=(t=this._gpuData[o]).destroy)==null||s.call(t);this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:o}=t;o.blendMode.pushBlendMode(this,this.groupBlendMode,e),o[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let f=0;f<h;f++)u[f].collectRenderables(e,t,s);o.blendMode.popBlendMode(e)}}class Ri extends om{constructor(e=Le.EMPTY){e instanceof Le&&(e={texture:e});const{texture:t=Le.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...h}=e;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new It({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof Le?new Ri(e):new Ri(Le.from(e,t))}set texture(e){e||(e=Le.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Sx(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Me("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:o,height:l}=t.orig;s.minX=-e._x*o,s.maxX=s.minX+o,s.minY=-e._y*l,s.maxY=s.minY+l}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const n0=new wn;function am(i,e,t){const s=n0;i.measurable=!0,Zp(i,t,s),e.addBoundsMask(s),i.measurable=!1}function lm(i,e,t){const s=qn.get();i.measurable=!0;const o=zt.get().identity(),l=um(i,t,o);tm(i,s,l),i.measurable=!1,e.addBoundsMask(s),zt.return(o),qn.return(s)}function um(i,e,t){return i?(i!==e&&(um(i.parent,e,t),i.updateLocalTransform(),t.append(i.localTransform)),t):(Ze("Mask bounds, renderable is not inside the root container"),t)}class cm{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Ri),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||am(this.mask,e,t)}addLocalBounds(e,t){lm(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof Ri}}cm.extension=fe.MaskEffect;class hm{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}hm.extension=fe.MaskEffect;class dm{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){am(this.mask,e,t)}addLocalBounds(e,t){lm(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof vn}}dm.extension=fe.MaskEffect;const r0={createCanvas:(i,e)=>{const t=document.createElement("canvas");return t.width=i,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,e)=>fetch(i,e),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};let Gf=r0;const Je={get(){return Gf},set(i){Gf=i}};class fm extends Cn{constructor(e){e.resource||(e.resource=Je.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const o=super.resize(e,t,s);return o&&this.resizeCanvas(),o}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}fm.extension=fe.TextureSource;class Kr extends Cn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Kr.extension=fe.TextureSource;var dc=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(dc||{});class $u{constructor(e,t=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=o}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const pm=class Kt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new $u(null,null,1/0),this.deltaMS=1/Kt.targetFPMS,this.elapsedMS=1/Kt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=dc.NORMAL){return this._addListener(new $u(e,t,s))}addOnce(e,t,s=dc.NORMAL){return this._addListener(new $u(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const l=e-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=e-l%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Kt.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,Kt.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Kt._shared){const e=Kt._shared=new Kt;e.autoStart=!0,e._protected=!0}return Kt._shared}static get system(){if(!Kt._system){const e=Kt._system=new Kt;e.autoStart=!0,e._protected=!0}return Kt._system}};pm.targetFPMS=.06;let xa=pm,Gu;async function mm(){return Gu??(Gu=(async()=>{var u;const e=Je.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(h=>{const f=document.createElement("video");f.onloadeddata=()=>h(f),f.onerror=()=>h(null),f.autoplay=!1,f.crossOrigin="anonymous",f.preload="auto",f.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",f.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),e.deleteFramebuffer(o),e.deleteTexture(s),(u=e.getExtension("WEBGL_lose_context"))==null||u.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Gu}const Oa=class gm extends Cn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...gm.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=xa.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await mm(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(xa.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(xa.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(xa.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Oa.extension=fe.TextureSource;Oa.defaultOptions={...Cn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Oa.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let $s=Oa;const _n=(i,e,t=!1)=>(Array.isArray(i)||(i=[i]),e?i.map(s=>typeof s=="string"||t?e(s):s):i);class i0{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Ze(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=_n(e);let o;for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];if(p.test(t)){o=p.getCacheableAssets(s,t);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(f=>{l.set(f,t)});const u=[...l.keys()],h={cacheKeys:u,keys:s};s.forEach(f=>{this._cacheMap.set(f,h)}),u.forEach(f=>{const p=o?o[f]:t;this._cache.has(f)&&this._cache.get(f)!==p&&Ze("[Cache] already has key:",f),this._cache.set(f,l.get(f))})}remove(e){if(!this._cacheMap.has(e)){Ze(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(o=>{this._cache.delete(o)}),t.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const Qe=new i0,fc=[];bt.handleByList(fe.TextureSource,fc);function ym(i={}){const e=i&&i.resource,t=e?i.resource:i,s=e?i:{resource:i};for(let o=0;o<fc.length;o++){const l=fc[o];if(l.test(t))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function s0(i={},e=!1){const t=i&&i.resource,s=t?i.resource:i,o=t?i:{resource:i};if(!e&&Qe.has(s))return Qe.get(s);const l=new Le({source:ym(o)});return l.on("destroy",()=>{Qe.has(s)&&Qe.remove(s)}),e||Qe.set(s,l),l}function o0(i,e=!1){return typeof i=="string"?Qe.get(i):i instanceof Cn?new Le({source:i}):s0(i,e)}Le.from=o0;Cn.from=ym;bt.add(cm,hm,dm,$s,Kr,fm,Mc);var Pr=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(Pr||{});function xn(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Ts(i){return i.split("?")[0].split("#")[0]}function a0(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l0(i,e,t){return i.replace(new RegExp(a0(e),"g"),t)}function u0(i,e){let t="",s=0,o=-1,l=0,u=-1;for(let h=0;h<=i.length;++h){if(h<i.length)u=i.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(o===h-1||l===1))if(o!==h-1&&l===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",s=0):(t=t.slice(0,f),s=t.length-1-t.lastIndexOf("/")),o=h,l=0;continue}}else if(t.length===2||t.length===1){t="",s=0,o=h,l=0;continue}}}else t.length>0?t+=`/${i.slice(o+1,h)}`:t=i.slice(o+1,h),s=h-o-1;o=h,l=0}else u===46&&l!==-1?++l:l=-1}return t}const Qt={toPosix(i){return l0(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){xn(i),i=this.toPosix(i);const e=/^file:\/\/\//.exec(i);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(i);return t?t[0]:""},toAbsolute(i,e,t){if(xn(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const s=Ts(this.toPosix(e??Je.get().getBaseUrl())),o=Ts(this.toPosix(t??this.rootname(s)));return i=this.toPosix(i),i.startsWith("/")?Qt.join(o,i.slice(1)):this.isAbsolute(i)?i:this.join(s,i)},normalize(i){if(xn(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let e="";const t=i.startsWith("/");this.hasProtocol(i)&&(e=this.rootname(i),i=i.slice(e.length));const s=i.endsWith("/");return i=u0(i),i.length>0&&s&&(i+="/"),t?`/${i}`:e+i},isAbsolute(i){return xn(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const s=i[t];if(xn(s),s.length>0)if(e===void 0)e=s;else{const o=i[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(i){if(xn(i),i.length===0)return".";i=this.toPosix(i);let e=i.charCodeAt(0);const t=e===47;let s=-1,o=!0;const l=this.getProtocol(i),u=i;i=i.slice(l.length);for(let h=i.length-1;h>=1;--h)if(e=i.charCodeAt(h),e===47){if(!o){s=h;break}}else o=!1;return s===-1?t?"/":this.isUrl(u)?l+i:l:t&&s===1?"//":l+i.slice(0,s)},rootname(i){xn(i),i=this.toPosix(i);let e="";if(i.startsWith("/")?e="/":e=this.getProtocol(i),this.isUrl(i)){const t=i.indexOf("/",e.length);t!==-1?e=i.slice(0,t):e=i,e.endsWith("/")||(e+="/")}return e},basename(i,e){xn(i),e&&xn(e),i=Ts(this.toPosix(i));let t=0,s=-1,o=!0,l;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";let u=e.length-1,h=-1;for(l=i.length-1;l>=0;--l){const f=i.charCodeAt(l);if(f===47){if(!o){t=l+1;break}}else h===-1&&(o=!1,h=l+1),u>=0&&(f===e.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=h))}return t===s?s=h:s===-1&&(s=i.length),i.slice(t,s)}for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!o){t=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":i.slice(t,s)},extname(i){xn(i),i=Ts(this.toPosix(i));let e=-1,t=0,s=-1,o=!0,l=0;for(let u=i.length-1;u>=0;--u){const h=i.charCodeAt(u);if(h===47){if(!o){t=u+1;break}continue}s===-1&&(o=!1,s=u+1),h===46?e===-1?e=u:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||s===-1||l===0||l===1&&e===s-1&&e===t+1?"":i.slice(e,s)},parse(i){xn(i);const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;i=Ts(this.toPosix(i));let t=i.charCodeAt(0);const s=this.isAbsolute(i);let o;e.root=this.rootname(i),s||this.hasProtocol(i)?o=1:o=0;let l=-1,u=0,h=-1,f=!0,p=i.length-1,m=0;for(;p>=o;--p){if(t=i.charCodeAt(p),t===47){if(!f){u=p+1;break}continue}h===-1&&(f=!1,h=p+1),t===46?l===-1?l=p:m!==1&&(m=1):l!==-1&&(m=-1)}return l===-1||h===-1||m===0||m===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&s?e.base=e.name=i.slice(1,h):e.base=e.name=i.slice(u,h)):(u===0&&s?(e.name=i.slice(1,l),e.base=i.slice(1,h)):(e.name=i.slice(u,l),e.base=i.slice(u,h)),e.ext=i.slice(l,h)),e.dir=this.dirname(i),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function xm(i,e,t,s,o){const l=e[t];for(let u=0;u<l.length;u++){const h=l[u];t<e.length-1?xm(i.replace(s[t],h),e,t+1,s,o):o.push(i.replace(s[t],h))}}function c0(i){const e=/\{(.*?)\}/g,t=i.match(e),s=[];if(t){const o=[];t.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),xm(i,o,0,t,s)}else s.push(i);return s}const Ba=i=>!Array.isArray(i);class Li{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return _n(t||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>(u==null?void 0:u.src)??u):l!=null&&l.src?l.src:l,!0)}addManifest(e){this._manifest&&Ze("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let o=t;Array.isArray(t)||(o=Object.entries(t).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,h=l.alias;let f;if(typeof h=="string"){const p=this._createBundleAssetId(e,h);s.push(p),f=[h,p]}else{const p=h.map(m=>this._createBundleAssetId(e,m));s.push(...p),f=[...h,...p]}this.add({...l,alias:f,src:u})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=l=>{this.hasKey(l)&&Ze(`[Resolver] already has key: ${l} overwriting`)},_n(t).forEach(l=>{const{src:u}=l;let{data:h,format:f,loadParser:p,parser:m}=l;const y=_n(u).map(k=>typeof k=="string"?c0(k):Array.isArray(k)?k:[k]),_=this.getAlias(l);Array.isArray(_)?_.forEach(s):s(_);const v=[],S=k=>{const w=this._parsers.find(P=>P.test(k));return{...w==null?void 0:w.parse(k),src:k}};y.forEach(k=>{k.forEach(w=>{let P={};if(typeof w!="object"?P=S(w):(h=w.data??h,f=w.format??f,(w.loadParser||w.parser)&&(p=w.loadParser??p,m=w.parser??m),P={...S(w.src),...w}),!_)throw new Error(`[Resolver] alias is undefined for this asset: ${P.src}`);P=this._buildResolvedAsset(P,{aliases:_,data:h,format:f,loadParser:p,parser:m,progressSize:l.progressSize}),v.push(P)})}),_.forEach(k=>{this._assetMap[k]=v})})}resolveBundle(e){const t=Ba(e);e=_n(e);const s={};return e.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),h={};for(const f in u){const p=u[f];h[this._extractAssetIdFromBundle(o,f)]=p}s[o]=h}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const o in t)s[o]=t[o].src;return s}return t.src}resolve(e){const t=Ba(e);e=_n(e);const s={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u==null||u.priority.forEach(h=>{u.params[h].forEach(f=>{const p=l.filter(m=>m[h]?m[h]===f:!1);p.length&&(l=p)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:o,loadParser:l,parser:u,format:h,progressSize:f}=t;return(this._basePath||this._rootPath)&&(e.src=Qt.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=l??e.loadParser,e.parser=u??e.parser,e.format=h??e.format??h0(e.src),f!==void 0&&(e.progressSize=f),e}}Li.RETINA_PREFIX=/@([0-9\.]+)x/;function h0(i){return i.split(".").pop().split("?").shift().split("#").shift()}const pc=(i,e)=>{const t=e.split("?")[1];return t&&(i+=`?${t}`),i},_m=class zs{constructor(e,t){this.linkedSheets=[];let s=e;(e==null?void 0:e.source)instanceof Cn&&(s={texture:e,data:t});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof Le?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const h=parseFloat(l.meta.scale);h?(this.resolution=h,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=zs.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=zs.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const o=this._frameKeys[t],l=this._frames[o],u=l.frame;if(u){let h=null,f=null;const p=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,m=new ct(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);l.rotated?h=new ct(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new ct(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(f=new ct(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new Le({source:this.textureSource,frame:h,orig:m,trim:f,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const o=e[t][s];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*zs.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*zs.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};_m.BATCH_SIZE=1e3;let Uf=_m;const d0=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function vm(i,e,t){const s={};if(i.forEach(o=>{s[o]=e}),Object.keys(e.textures).forEach(o=>{s[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=Qt.dirname(i[0]);e.linkedSheets.forEach((l,u)=>{const h=vm([`${o}/${e.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,h)})}return s}const f0={extension:fe.Asset,cache:{test:i=>i instanceof Uf,getCacheableAssets:(i,e)=>vm(i,e,!1)},resolver:{extension:{type:fe.ResolveParser,name:"resolveSpritesheet"},test:i=>{const t=i.split("?")[0].split("."),s=t.pop(),o=t.pop();return s==="json"&&d0.includes(o)},parse:i=>{var t;const e=i.split(".");return{resolution:parseFloat(((t=Li.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:e[e.length-2],src:i}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:fe.LoadParser,priority:Pr.Normal,name:"spritesheetLoader"},async testParse(i,e){return Qt.extname(e.src).toLowerCase()===".json"&&!!i.frames},async parse(i,e,t){var y,_;const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=(e==null?void 0:e.data)??{};let h=Qt.dirname(e.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let f;if(s instanceof Le)f=s;else{const v=pc(h+(o??i.meta.image),e.src);f=(await t.load([{src:v,data:l}]))[v]}const p=new Uf({texture:f.source,data:i,cachePrefix:u});await p.parse();const m=(y=i==null?void 0:i.meta)==null?void 0:y.related_multi_packs;if(Array.isArray(m)){const v=[];for(const k of m){if(typeof k!="string")continue;let w=h+k;(_=e.data)!=null&&_.ignoreMultiPack||(w=pc(w,e.src),v.push(t.load({src:w,data:{textureOptions:l,ignoreMultiPack:!0}})))}const S=await Promise.all(v);p.linkedSheets=S,S.forEach(k=>{k.linkedSheets=[p].concat(p.linkedSheets.filter(w=>w!==k))})}return p},async unload(i,e,t){await t.unload(i.textureSource._sourceOrigin),i.destroy(!1)}}};bt.add(f0);const Uu=Object.create(null),Wf=Object.create(null);function Ic(i,e){let t=Wf[i];return t===void 0&&(Uu[e]===void 0&&(Uu[e]=1),Wf[i]=t=Uu[e]++),t}let Ci;function wm(){return(!Ci||Ci!=null&&Ci.isContextLost())&&(Ci=Je.get().createCanvas().getContext("webgl",{})),Ci}let _a;function p0(){if(!_a){_a="mediump";const i=wm();i&&i.getShaderPrecisionFormat&&(_a=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?"highp":"mediump")}return _a}function m0(i,e,t){return e?i:t?(i=i.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${i}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${i}
        `}function g0(i,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(i.substring(0,9)!=="precision"){let o=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${i}`}else if(s!=="highp"&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}function y0(i,e){return e?`#version 300 es
${i}`:i}const x0={},_0={};function v0(i,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?x0:_0;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,i.indexOf("#define SHADER_NAME")!==-1?i:`${`#define SHADER_NAME ${e}`}
${i}`}function w0(i,e){return e?i.replace("#version 300 es",""):i}const Wu={stripVersion:w0,ensurePrecision:g0,addProgramDefines:m0,setProgramName:v0,insertVersion:y0},Es=Object.create(null),Sm=class mc{constructor(e){e={...mc.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:p0()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let o=e.fragment,l=e.vertex;Object.keys(Wu).forEach(u=>{const h=s[u];o=Wu[u](o,h,!0),l=Wu[u](l,h,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Ic(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Es[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return Es[t]||(Es[t]=new mc(e),Es[t]._cacheKey=t),Es[t]}};Sm.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Cm=Sm;const Hf={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function S0(i){return Hf[i]??Hf.float32}const C0={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function k0({source:i,entryPoint:e}){const t={},s=i.indexOf(`fn ${e}`);if(s!==-1){const o=i.indexOf("->",s);if(o!==-1){const l=i.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const f=C0[h[3]]??"float32";t[h[2]]={location:parseInt(h[1],10),format:f,stride:S0(f).stride,offset:0,instance:!1,start:0}}}}return t}function Hu(i){var y,_;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,f=/struct\s+(\w+)/,p=(y=i.match(e))==null?void 0:y.map(v=>({group:parseInt(v.match(t)[1],10),binding:parseInt(v.match(s)[1],10),name:v.match(o)[2],isUniform:v.match(o)[1]==="<uniform>",type:v.match(l)[1]}));if(!p)return{groups:[],structs:[]};const m=((_=i.match(u))==null?void 0:_.map(v=>{const S=v.match(f)[1],k=v.match(h).reduce((w,P)=>{const[T,E]=P.split(":");return w[T.trim()]=E.trim(),w},{});return k?{name:S,members:k}:null}).filter(({name:v})=>p.some(S=>S.type===v)))??[];return{groups:p,structs:m}}var js=(i=>(i[i.VERTEX=1]="VERTEX",i[i.FRAGMENT=2]="FRAGMENT",i[i.COMPUTE=4]="COMPUTE",i))(js||{});function b0({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:js.VERTEX|js.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:js.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:js.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function A0({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function P0(i,e){const t=new Set,s=new Set,o=[...i.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),l=[...i.groups,...e.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:o,groups:l}}const Ms=Object.create(null);class Na{constructor(e){var h,f;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:o,gpuLayout:l,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=s,t.source===s.source){const p=Hu(t.source);this.structsAndGroups=p}else{const p=Hu(s.source),m=Hu(t.source);this.structsAndGroups=P0(p,m)}this.layout=o??A0(this.structsAndGroups),this.gpuLayout=l??b0(this.structsAndGroups),this.autoAssignGlobalUniforms=((h=this.layout[0])==null?void 0:h.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((f=this.layout[1])==null?void 0:f.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Ic(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=k0(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Ms[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Ms[t]||(Ms[t]=new Na(e),Ms[t]._cacheKey=t),Ms[t]}}const km=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],T0=km.reduce((i,e)=>(i[e]=!0,i),{});function E0(i,e){switch(i){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const bm=class Am{constructor(e,t){this._touched=0,this.uid=lt("uniform"),this._resourceType="uniformGroup",this._resourceId=lt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...Am.defaultOptions,...t},this.uniformStructures=e;const s={};for(const o in e){const l=e[o];if(l.name=o,l.size=l.size??1,!T0[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,f]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${h}', size: ${f} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${km.join(", ")}`)}l.value??(l.value=E0(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Ic(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};bm.defaultOptions={ubo:!1,isStatic:!1};let Pm=bm;class Ta{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const o=e[s];this.setResource(o,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){var o,l;const s=this.resources[t];e!==s&&(s&&((o=e.off)==null||o.call(e,"change",this.onResourceChange,this)),(l=e.on)==null||l.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){var t;const e=this.resources;for(const s in e){const o=e[s];(t=o==null?void 0:o.off)==null||t.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var gc=(i=>(i[i.WEBGL=1]="WEBGL",i[i.WEBGPU=2]="WEBGPU",i[i.BOTH=3]="BOTH",i))(gc||{});class Fc extends Sn{constructor(e){super(),this.uid=lt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:h}=e;this.gpuProgram=t,this.glProgram=s,u===void 0&&(u=0,t&&(u|=gc.WEBGPU),s&&(u|=gc.WEBGL)),this.compatibleRenderers=u;const f={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&o&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&o&&h)for(const p in h)for(const m in h[p]){const y=h[p][m];f[y]={group:p,binding:m,name:y}}else if(t&&o&&!h){const p=t.structsAndGroups.groups;h={},p.forEach(m=>{h[m.group]=h[m.group]||{},h[m.group][m.binding]=m.name,f[m.name]=m})}else if(l){o={},h={},t&&t.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,f[y.name]=y});let p=0;for(const m in l)f[m]||(o[99]||(o[99]=new Ta,this._ownedBindGroups.push(o[99])),f[m]={group:99,binding:p,name:m},h[99]=h[99]||{},h[99][p]=m,p++);for(const m in l){const y=m;let _=l[m];!_.source&&!_._resourceType&&(_=new Pm(_));const v=f[y];v&&(o[v.group]||(o[v.group]=new Ta,this._ownedBindGroups.push(o[v.group])),o[v.group].setResource(_,v.binding))}}this.groups=o,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(o,f)}addResource(e,t,s){var o,l;(o=this._uniformBindMap)[t]||(o[t]={}),(l=this._uniformBindMap[t])[s]||(l[s]=e),this.groups[t]||(this.groups[t]=new Ta,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const o in t){const l=t[o];Object.defineProperty(s,l.name,{get(){return e[l.group].getResource(l.binding)},set(u){e[l.group].setResource(u,l.binding)}})}return s}destroy(e=!1){var t,s;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...o}=e;let l,u;return t&&(l=Na.from(t)),s&&(u=Cm.from(s)),new Fc({gpuProgram:l,glProgram:u,...o})}}const yc=[];bt.handleByNamedList(fe.Environment,yc);async function M0(i){if(!i)for(let e=0;e<yc.length;e++){const t=yc[e];if(t.value.test()){await t.value.load();return}}}let Rs;function R0(){if(typeof Rs=="boolean")return Rs;try{Rs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Rs=!1}return Rs}function Vf(i,e,t=2){const s=e&&e.length,o=s?e[0]*t:i.length;let l=Tm(i,0,o,t,!0);const u=[];if(!l||l.next===l.prev)return u;let h,f,p;if(s&&(l=z0(i,e,l,t)),i.length>80*t){h=i[0],f=i[1];let m=h,y=f;for(let _=t;_<o;_+=t){const v=i[_],S=i[_+1];v<h&&(h=v),S<f&&(f=S),v>m&&(m=v),S>y&&(y=S)}p=Math.max(m-h,y-f),p=p!==0?32767/p:0}return Hs(l,u,t,h,f,p,0),u}function Tm(i,e,t,s,o){let l;if(o===Y0(i,e,t,s)>0)for(let u=e;u<t;u+=s)l=Yf(u/s|0,i[u],i[u+1],l);else for(let u=t-s;u>=e;u-=s)l=Yf(u/s|0,i[u],i[u+1],l);return l&&Ii(l,l.next)&&(Ys(l),l=l.next),l}function Qr(i,e){if(!i)return i;e||(e=i);let t=i,s;do if(s=!1,!t.steiner&&(Ii(t,t.next)||it(t.prev,t,t.next)===0)){if(Ys(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function Hs(i,e,t,s,o,l,u){if(!i)return;!u&&l&&$0(i,s,o,l);let h=i;for(;i.prev!==i.next;){const f=i.prev,p=i.next;if(l?F0(i,s,o,l):I0(i)){e.push(f.i,i.i,p.i),Ys(i),i=p.next,h=p.next;continue}if(i=p,i===h){u?u===1?(i=L0(Qr(i),e),Hs(i,e,t,s,o,l,2)):u===2&&B0(i,e,t,s,o,l):Hs(Qr(i),e,t,s,o,l,1);break}}}function I0(i){const e=i.prev,t=i,s=i.next;if(it(e,t,s)>=0)return!1;const o=e.x,l=t.x,u=s.x,h=e.y,f=t.y,p=s.y,m=Math.min(o,l,u),y=Math.min(h,f,p),_=Math.max(o,l,u),v=Math.max(h,f,p);let S=s.next;for(;S!==e;){if(S.x>=m&&S.x<=_&&S.y>=y&&S.y<=v&&Ds(o,h,l,f,u,p,S.x,S.y)&&it(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function F0(i,e,t,s){const o=i.prev,l=i,u=i.next;if(it(o,l,u)>=0)return!1;const h=o.x,f=l.x,p=u.x,m=o.y,y=l.y,_=u.y,v=Math.min(h,f,p),S=Math.min(m,y,_),k=Math.max(h,f,p),w=Math.max(m,y,_),P=xc(v,S,e,t,s),T=xc(k,w,e,t,s);let E=i.prevZ,I=i.nextZ;for(;E&&E.z>=P&&I&&I.z<=T;){if(E.x>=v&&E.x<=k&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&Ds(h,m,f,y,p,_,E.x,E.y)&&it(E.prev,E,E.next)>=0||(E=E.prevZ,I.x>=v&&I.x<=k&&I.y>=S&&I.y<=w&&I!==o&&I!==u&&Ds(h,m,f,y,p,_,I.x,I.y)&&it(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;E&&E.z>=P;){if(E.x>=v&&E.x<=k&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&Ds(h,m,f,y,p,_,E.x,E.y)&&it(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;I&&I.z<=T;){if(I.x>=v&&I.x<=k&&I.y>=S&&I.y<=w&&I!==o&&I!==u&&Ds(h,m,f,y,p,_,I.x,I.y)&&it(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function L0(i,e){let t=i;do{const s=t.prev,o=t.next.next;!Ii(s,o)&&Mm(s,t,t.next,o)&&Vs(s,o)&&Vs(o,s)&&(e.push(s.i,t.i,o.i),Ys(t),Ys(t.next),t=i=o),t=t.next}while(t!==i);return Qr(t)}function B0(i,e,t,s,o,l){let u=i;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&W0(u,h)){let f=Rm(u,h);u=Qr(u,u.next),f=Qr(f,f.next),Hs(u,e,t,s,o,l,0),Hs(f,e,t,s,o,l,0);return}h=h.next}u=u.next}while(u!==i)}function z0(i,e,t,s){const o=[];for(let l=0,u=e.length;l<u;l++){const h=e[l]*s,f=l<u-1?e[l+1]*s:i.length,p=Tm(i,h,f,s,!1);p===p.next&&(p.steiner=!0),o.push(U0(p))}o.sort(j0);for(let l=0;l<o.length;l++)t=D0(o[l],t);return t}function j0(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const s=(i.next.y-i.y)/(i.next.x-i.x),o=(e.next.y-e.y)/(e.next.x-e.x);t=s-o}return t}function D0(i,e){const t=O0(i,e);if(!t)return e;const s=Rm(t,i);return Qr(s,s.next),Qr(t,t.next)}function O0(i,e){let t=e;const s=i.x,o=i.y;let l=-1/0,u;if(Ii(i,t))return t;do{if(Ii(i,t.next))return t.next;if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>l&&(l=y,u=t.x<t.next.x?t:t.next,y===s))return u}t=t.next}while(t!==e);if(!u)return null;const h=u,f=u.x,p=u.y;let m=1/0;t=u;do{if(s>=t.x&&t.x>=f&&s!==t.x&&Em(o<p?s:l,o,f,p,o<p?l:s,o,t.x,t.y)){const y=Math.abs(o-t.y)/(s-t.x);Vs(t,i)&&(y<m||y===m&&(t.x>u.x||t.x===u.x&&N0(u,t)))&&(u=t,m=y)}t=t.next}while(t!==h);return u}function N0(i,e){return it(i.prev,i,e.prev)<0&&it(e.next,i,i.next)<0}function $0(i,e,t,s){let o=i;do o.z===0&&(o.z=xc(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,G0(o)}function G0(i){let e,t=1;do{let s=i,o;i=null;let l=null;for(e=0;s;){e++;let u=s,h=0;for(let p=0;p<t&&(h++,u=u.nextZ,!!u);p++);let f=t;for(;h>0||f>0&&u;)h!==0&&(f===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,h--):(o=u,u=u.nextZ,f--),l?l.nextZ=o:i=o,o.prevZ=l,l=o;s=u}l.nextZ=null,t*=2}while(e>1);return i}function xc(i,e,t,s,o){return i=(i-t)*o|0,e=(e-s)*o|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function U0(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Em(i,e,t,s,o,l,u,h){return(o-u)*(e-h)>=(i-u)*(l-h)&&(i-u)*(s-h)>=(t-u)*(e-h)&&(t-u)*(l-h)>=(o-u)*(s-h)}function Ds(i,e,t,s,o,l,u,h){return!(i===u&&e===h)&&Em(i,e,t,s,o,l,u,h)}function W0(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!H0(i,e)&&(Vs(i,e)&&Vs(e,i)&&V0(i,e)&&(it(i.prev,i,e.prev)||it(i,e.prev,e))||Ii(i,e)&&it(i.prev,i,i.next)>0&&it(e.prev,e,e.next)>0)}function it(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Ii(i,e){return i.x===e.x&&i.y===e.y}function Mm(i,e,t,s){const o=wa(it(i,e,t)),l=wa(it(i,e,s)),u=wa(it(t,s,i)),h=wa(it(t,s,e));return!!(o!==l&&u!==h||o===0&&va(i,t,e)||l===0&&va(i,s,e)||u===0&&va(t,i,s)||h===0&&va(t,e,s))}function va(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function wa(i){return i>0?1:i<0?-1:0}function H0(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&Mm(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Vs(i,e){return it(i.prev,i,i.next)<0?it(i,e,i.next)>=0&&it(i,i.prev,e)>=0:it(i,e,i.prev)<0||it(i,i.next,e)<0}function V0(i,e){let t=i,s=!1;const o=(i.x+e.x)/2,l=(i.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==i);return s}function Rm(i,e){const t=_c(i.i,i.x,i.y),s=_c(e.i,e.x,e.y),o=i.next,l=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,s.next=t,t.prev=s,l.next=s,s.prev=l,s}function Yf(i,e,t,s){const o=_c(i,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function Ys(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function _c(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Y0(i,e,t,s){let o=0;for(let l=e,u=t-s;l<t;l+=s)o+=(i[u]-i[l])*(i[l+1]+i[u+1]),u=l;return o}const X0=Vf.default||Vf;var Im=(i=>(i[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i))(Im||{});class q0{constructor(e){this.items=[],this._name=e}emit(e,t,s,o,l,u,h,f){const{name:p,items:m}=this;for(let y=0,_=m.length;y<_;y++)m[y][p](e,t,s,o,l,u,h,f);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const K0=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Fm=class Lm extends Sn{constructor(e){super(),this.uid=lt("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...K0,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await M0(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...Lm.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof vn&&(s={container:s},t&&(Me(Ue,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:yt.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const o=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Im.ALL);const{clear:s,clearColor:o,target:l}=e;yt.shared.setValue(o??this.background.colorRgba),t.renderTarget.clear(l,s,yt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new q0(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(e,t){const s=t.reduce((o,l)=>(o[l.name]=l.value,o),{});e.forEach(o=>{const l=o.value,u=o.name,h=s[u];this.renderPipes[u]=new l(this,h?new h:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&Qs.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!R0())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Fm.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Bm=Fm,Sa;function Q0(i){return Sa!==void 0||(Sa=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:i??Bm.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Je.get().getWebGLRenderingContext())return!1;let o=Je.get().createCanvas().getContext("webgl",e);const l=!!((t=o==null?void 0:o.getContextAttributes())!=null&&t.stencil);if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,l}catch{return!1}})()),Sa}let Ca;async function Z0(i={}){return Ca!==void 0||(Ca=await(async()=>{const e=Je.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(i)).requestDevice(),!0}catch{return!1}})()),Ca}const Xf=["webgl","webgpu","canvas"];async function J0(i){let e=[];i.preference?(e.push(i.preference),Xf.forEach(l=>{l!==i.preference&&e.push(l)})):e=Xf.slice();let t,s={};for(let l=0;l<e.length;l++){const u=e[l];if(u==="webgpu"&&await Z0()){const{WebGPURenderer:h}=await Ia(async()=>{const{WebGPURenderer:f}=await import("./WebGPURenderer-DgN93LYP.js");return{WebGPURenderer:f}},__vite__mapDeps([3,2,4]));t=h,s={...i,...i.webgpu};break}else if(u==="webgl"&&Q0(i.failIfMajorPerformanceCaveat??Bm.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await Ia(async()=>{const{WebGLRenderer:f}=await import("./WebGLRenderer-CjQbM0ij.js");return{WebGLRenderer:f}},__vite__mapDeps([5,2,4]));t=h,s={...i,...i.webgl};break}else if(u==="canvas")throw s={...i},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const o=new t;return await o.init(s),o}const zm="8.14.3";class jm{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,zm)}static destroy(){}}jm.extension=fe.Application;class e_{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,zm)}destroy(){this._renderer=null}}e_.extension={type:[fe.WebGLSystem,fe.WebGPUSystem],name:"initHook",priority:-10};const Dm=class vc{constructor(...e){this.stage=new vn,e[0]!==void 0&&Me(Ue,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new vn),this.renderer=await J0(e),vc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Me(Ue,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=vc._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Dm._plugins=[];let Om=Dm;bt.handleByList(fe.Application,Om._plugins);bt.add(jm);class Nm extends Sn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Me(Ue,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Me(Ue,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Me(Ue,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Me(Ue,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Me(Ue,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(t=this.chars[s].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class t_{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let o=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(e,t,s=!1,o=this.resetTtl){let l=this.items[e];return s||l!==void 0?(l.value=t,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function $m(i=1e3,e=0,t=!1){if(isNaN(i)||i<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new t_(i,e,t)}const n_=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function wc(i){const e=typeof i.fontSize=="number"?`${i.fontSize}px`:i.fontSize;let t=i.fontFamily;Array.isArray(i.fontFamily)||(t=i.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let o=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!n_.includes(o)&&(o=`"${o}"`),t[s]=o}return`${i.fontStyle} ${i.fontVariant} ${i.fontWeight} ${e} ${t.join(",")}`}const Vu={willReadFrequently:!0},kn=class he{static get experimentalLetterSpacingSupported(){let e=he._experimentalLetterSpacingSupported;if(e===void 0){const t=Je.get().getCanvasRenderingContext2D().prototype;e=he._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,o,l,u,h,f,p){this.text=e,this.style=t,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=f,this.fontProperties=p}static measureText(e=" ",t,s=he._canvas,o=t.wordWrap){var T;const l=`${e}-${t.styleKey}-wordWrap-${o}`;if(he._measurementCache.has(l))return he._measurementCache.get(l);const u=wc(t),h=he.measureFont(u);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);const f=he.__context;f.font=u;const m=(o?he._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),y=new Array(m.length);let _=0;for(let E=0;E<m.length;E++){const I=he._measureText(m[E],t.letterSpacing,f);y[E]=I,_=Math.max(_,I)}const v=((T=t._stroke)==null?void 0:T.width)||0;let S=_+v;t.dropShadow&&(S+=t.dropShadow.distance);const k=t.lineHeight||h.fontSize;let w=Math.max(k,h.fontSize+v)+(m.length-1)*(k+t.leading);t.dropShadow&&(w+=t.dropShadow.distance);const P=new he(e,t,S,w,m,y,k+t.leading,_,h);return he._measurementCache.set(l,P),P}static _measureText(e,t,s){let o=!1;he.experimentalLetterSpacingSupported&&(he.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(e);let u=l.width;const h=-l.actualBoundingBoxLeft;let p=l.actualBoundingBoxRight-h;if(u>0)if(o)u-=t,p-=t;else{const m=(he.graphemeSegmenter(e).length-1)*t;u+=m,p+=m}return Math.max(u,p)}static _wordWrap(e,t,s=he._canvas){const o=s.getContext("2d",Vu);let l=0,u="",h="";const f=Object.create(null),{letterSpacing:p,whiteSpace:m}=t,y=he._collapseSpaces(m),_=he._collapseNewlines(m);let v=!y;const S=t.wordWrapWidth+p,k=he._tokenize(e);for(let w=0;w<k.length;w++){let P=k[w];if(he._isNewline(P)){if(!_){h+=he._addLine(u),v=!y,u="",l=0;continue}P=" "}if(y){const E=he.isBreakingSpace(P),I=he.isBreakingSpace(u[u.length-1]);if(E&&I)continue}const T=he._getFromCache(P,p,f,o);if(T>S)if(u!==""&&(h+=he._addLine(u),u="",l=0),he.canBreakWords(P,t.breakWords)){const E=he.wordWrapSplit(P);for(let I=0;I<E.length;I++){let U=E[I],D=U,O=1;for(;E[I+O];){const ie=E[I+O];if(!he.canBreakChars(D,ie,P,I,t.breakWords))U+=ie;else break;D=ie,O++}I+=O-1;const te=he._getFromCache(U,p,f,o);te+l>S&&(h+=he._addLine(u),v=!1,u="",l=0),u+=U,l+=te}}else{u.length>0&&(h+=he._addLine(u),u="",l=0);const E=w===k.length-1;h+=he._addLine(P,!E),v=!1,u="",l=0}else T+l>S&&(v=!1,h+=he._addLine(u),u="",l=0),(u.length>0||!he.isBreakingSpace(P)||v)&&(u+=P,l+=T)}return h+=he._addLine(u,!1),h}static _addLine(e,t=!0){return e=he._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,o){let l=s[e];return typeof l!="number"&&(l=he._measureText(e,t,o)+t,s[e]=l),l}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!he.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:he._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:he._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1];if(he.isBreakingSpace(l,u)||he._isNewline(l)){s!==""&&(t.push(s),s=""),l==="\r"&&u===`
`?(t.push(`\r
`),o++):t.push(l);continue}s+=l}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,o,l){return!0}static wordWrapSplit(e){return he.graphemeSegmenter(e)}static measureFont(e){if(he._fonts[e])return he._fonts[e];const t=he._context;t.font=e;const s=t.measureText(he.METRICS_STRING+he.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return he._fonts[e]=o,o}static clearMetrics(e=""){e?delete he._fonts[e]:he._fonts={}}static get _canvas(){if(!he.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",Vu);if(s!=null&&s.measureText)return he.__canvas=t,t;e=Je.get().createCanvas()}catch{e=Je.get().createCanvas()}e.width=e.height=10,he.__canvas=e}return he.__canvas}static get _context(){return he.__context||(he.__context=he._canvas.getContext("2d",Vu)),he.__context}};kn.METRICS_STRING="|q";kn.BASELINE_SYMBOL="M";kn.BASELINE_MULTIPLIER=1.4;kn.HEIGHT_MULTIPLIER=2;kn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return e=>{const t=i.segment(e),s=[];let o=0;for(const l of t)s[o++]=l.segment;return s}}return i=>[...i]})();kn.experimentalLetterSpacing=!1;kn._fonts={};kn._newlines=[10,13];kn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];kn._measurementCache=$m(1e3);let Ea=kn;const qf=[{offset:0,color:"white"},{offset:1,color:"black"}],Lc=class Sc{constructor(...e){this.uid=lt("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=r_(e);t={...t.type==="radial"?Sc.defaultRadialOptions:Sc.defaultLinearOptions,...Wp(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:yt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:o}=this.end,l=s-e,u=o-t;const h=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const w=e;e=s,s=w,l*=-1}if(u<0){const w=t;t=o,o=w,u*=-1}}const f=this.colorStops.length?this.colorStops:qf,p=this._textureSize,{canvas:m,context:y}=Qf(p,1),_=h?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);Kf(_,f),y.fillStyle=_,y.fillRect(0,0,p,1),this.texture=new Le({source:new Kr({resource:m,addressMode:this._wrapMode})});const v=Math.sqrt(l*l+u*u),S=Math.atan2(u,l),k=new Re;k.scale(v/p,1),k.rotate(S),k.translate(e,t),this.textureSpace==="local"&&k.scale(p,p),this.transform=k}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:qf,t=this._textureSize,{canvas:s,context:o}=Qf(t,t),{x:l,y:u}=this.center,{x:h,y:f}=this.outerCenter,p=this.innerRadius,m=this.outerRadius,y=h-m,_=f-m,v=t/(m*2),S=(l-y)*v,k=(u-_)*v,w=o.createRadialGradient(S,k,p*v,(h-y)*v,(f-_)*v,m*v);Kf(w,e),o.fillStyle=e[e.length-1].color,o.fillRect(0,0,t,t),o.fillStyle=w,o.translate(S,k),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-S,-k),o.fillRect(0,0,t,t),this.texture=new Le({source:new Kr({resource:s,addressMode:this._wrapMode})});const P=new Re;P.scale(1/v,1/v),P.translate(y,_),this.textureSpace==="local"&&P.scale(t,t),this.transform=P}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Lc.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Lc.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Qn=Lc;function Kf(i,e){for(let t=0;t<e.length;t++){const s=e[t];i.addColorStop(s.offset,s.color)}}function Qf(i,e){const t=Je.get().createCanvas(i,e),s=t.getContext("2d");return{canvas:t,context:s}}function r_(i){let e=i[0]??{};return(typeof e=="number"||i[1])&&(Me("8.5.2","use options object instead"),e={type:"linear",start:{x:i[0],y:i[1]},end:{x:i[2],y:i[3]},textureSpace:i[4],textureSize:i[5]??Qn.defaultLinearOptions.textureSize}),e}const Zf={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class $a{constructor(e,t){this.uid=lt("fillPattern"),this._tick=0,this.transform=new Re,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=Zf[t].addressModeU,e.source.style.addressModeV=Zf[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var Yu,Jf;function i_(){if(Jf)return Yu;Jf=1,Yu=t;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(l){var u=[];return l.replace(e,function(h,f,p){var m=f.toLowerCase();for(p=o(p),m=="m"&&p.length>2&&(u.push([f].concat(p.splice(0,2))),m="l",f=f=="m"?"l":"L");;){if(p.length==i[m])return p.unshift(f),u.push(p);if(p.length<i[m])throw new Error("malformed path data");u.push([f].concat(p.splice(0,i[m])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return Yu}var s_=i_();const o_=Tc(s_);function a_(i,e){const t=o_(i),s=[];let o=null,l=0,u=0;for(let h=0;h<t.length;h++){const f=t[h],p=f[0],m=f;switch(p){case"M":l=m[1],u=m[2],e.moveTo(l,u);break;case"m":l+=m[1],u+=m[2],e.moveTo(l,u);break;case"H":l=m[1],e.lineTo(l,u);break;case"h":l+=m[1],e.lineTo(l,u);break;case"V":u=m[1],e.lineTo(l,u);break;case"v":u+=m[1],e.lineTo(l,u);break;case"L":l=m[1],u=m[2],e.lineTo(l,u);break;case"l":l+=m[1],u+=m[2],e.lineTo(l,u);break;case"C":l=m[5],u=m[6],e.bezierCurveTo(m[1],m[2],m[3],m[4],l,u);break;case"c":e.bezierCurveTo(l+m[1],u+m[2],l+m[3],u+m[4],l+m[5],u+m[6]),l+=m[5],u+=m[6];break;case"S":l=m[3],u=m[4],e.bezierCurveToShort(m[1],m[2],l,u);break;case"s":e.bezierCurveToShort(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"Q":l=m[3],u=m[4],e.quadraticCurveTo(m[1],m[2],l,u);break;case"q":e.quadraticCurveTo(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"T":l=m[1],u=m[2],e.quadraticCurveToShort(l,u);break;case"t":l+=m[1],u+=m[2],e.quadraticCurveToShort(l,u);break;case"A":l=m[6],u=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"a":l+=m[6],u+=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:Ze(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return e}class Bc{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new Bc(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-e,l=this.y-t;return o*=o,l*=l,o+l<=s}strokeContains(e,t,s,o=.5){if(this.radius===0)return!1;const l=this.x-e,u=this.y-t,h=this.radius,f=(1-o)*s,p=Math.sqrt(l*l+u*u);return p<=h+f&&p>h-(s-f)}getBounds(e){return e||(e=new ct),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class zc{constructor(e=0,t=0,s=0,o=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=o}clone(){return new zc(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,o=(t-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(e,t,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=s*(1-o),f=s-h,p=l-f,m=u-f,y=l+h,_=u+h,v=e-this.x,S=t-this.y,k=v*v/(p*p)+S*S/(m*m),w=v*v/(y*y)+S*S/(_*_);return k>1&&w<=1}getBounds(e){return e||(e=new ct),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function l_(i,e,t,s,o,l){const u=i-t,h=e-s,f=o-t,p=l-s,m=u*f+h*p,y=f*f+p*p;let _=-1;y!==0&&(_=m/y);let v,S;_<0?(v=t,S=s):_>1?(v=o,S=l):(v=t+_*f,S=s+_*p);const k=i-v,w=e-S;return k*k+w*w}let u_,c_;class Gs{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let o=0,l=t.length;o<l;o++)s.push(t[o].x,t[o].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let o=0;o<s;o+=2){const l=t[o],u=t[o+1],h=t[(o+2)%s],f=t[(o+3)%s];e+=(h-l)*(f+u)}return e<0}containsPolygon(e){const t=this.getBounds(u_),s=e.getBounds(c_);if(!t.containsRect(s))return!1;const o=e.points;for(let l=0;l<o.length;l+=2){const u=o[l],h=o[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const e=this.points.slice(),t=new Gs(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const h=this.points[l*2],f=this.points[l*2+1],p=this.points[u*2],m=this.points[u*2+1];f>t!=m>t&&e<(p-h)*((t-f)/(m-f))+h&&(s=!s)}return s}strokeContains(e,t,s,o=.5){const l=s*s,u=l*(1-o),h=l-u,{points:f}=this,p=f.length-(this.closePath?0:2);for(let m=0;m<p;m+=2){const y=f[m],_=f[m+1],v=f[(m+2)%f.length],S=f[(m+3)%f.length],k=l_(e,t,y,_,v,S),w=Math.sign((v-y)*(t-_)-(S-_)*(e-y));if(k<=(w<0?h:u))return!0}return!1}getBounds(e){e||(e=new ct);const t=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let h=0,f=t.length;h<f;h+=2){const p=t[h],m=t[h+1];s=p<s?p:s,o=p>o?p:o,l=m<l?m:l,u=m>u?m:u}return e.x=s,e.width=o-s,e.y=l,e.height=u-l,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Me("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Me("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const ka=(i,e,t,s,o,l,u)=>{const h=i-t,f=e-s,p=Math.sqrt(h*h+f*f);return p>=o-l&&p<=o+u};class jc{constructor(e=0,t=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=o,this.radius=l}getBounds(e){return e||(e=new ct),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new jc(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let o=e-(this.x+s),l=t-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=e-(this.x+this.width-s),o*o+l*l<=u)||(l=t-(this.y+this.height-s),o*o+l*l<=u)||(o=e-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(e,t,s,o=.5){const{x:l,y:u,width:h,height:f,radius:p}=this,m=s*(1-o),y=s-m,_=l+p,v=u+p,S=h-p*2,k=f-p*2,w=l+h,P=u+f;return(e>=l-m&&e<=l+y||e>=w-y&&e<=w+m)&&t>=v&&t<=v+k||(t>=u-m&&t<=u+y||t>=P-y&&t<=P+m)&&e>=_&&e<=_+S?!0:e<_&&t<v&&ka(e,t,_,v,p,y,m)||e>w-p&&t<v&&ka(e,t,w-p,v,p,y,m)||e>w-p&&t>P-p&&ka(e,t,w-p,P-p,p,y,m)||e<_&&t>P-p&&ka(e,t,_,P-p,p,y,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const Gm={};function h_(i,e,t){let s=2166136261;for(let o=0;o<e;o++)s^=i[o].uid,s=Math.imul(s,16777619),s>>>=0;return Gm[s]||d_(i,e,s,t)}function d_(i,e,t,s){const o={};let l=0;for(let h=0;h<s;h++){const f=h<e?i[h]:Le.EMPTY.source;o[l++]=f.source,o[l++]=f.style}const u=new Ta(o);return Gm[t]=u,u}class ep{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function tp(i,e){const t=i.byteLength/8|0,s=new Float64Array(i,0,t);new Float64Array(e,0,t).set(s);const l=i.byteLength-t*8;if(l>0){const u=new Uint8Array(i,t*8,l);new Uint8Array(e,t*8,l).set(u)}}const f_={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var p_=(i=>(i[i.DISABLED=0]="DISABLED",i[i.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",i[i.MASK_ACTIVE=2]="MASK_ACTIVE",i[i.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",i[i.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",i[i.NONE=5]="NONE",i))(p_||{});function np(i,e){return e.alphaMode==="no-premultiply-alpha"&&f_[i]||i}const m_=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function g_(i){let e="";for(let t=0;t<i;++t)t>0&&(e+=`
else `),t<i-1&&(e+=`if(test == ${t}.0){}`);return e}function y_(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=m_.replace(/%forloop%/gi,g_(i));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))i=i/2|0;else break}}finally{e.deleteShader(t)}return i}let ki=null;function x_(){var e;if(ki)return ki;const i=wm();return ki=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),ki=y_(ki,i),(e=i.getExtension("WEBGL_lose_context"))==null||e.loseContext(),ki}class __{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class v_{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new __,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Us=[];let za=0;Qs.register({clear:()=>{if(Us.length>0)for(const i of Us)i&&i.destroy();Us.length=0,za=0}});function rp(){return za>0?Us[--za]:new v_}function ip(i){Us[za++]=i}let Is=0;const Um=class Wm{constructor(e){this.uid=lt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...Wm.defaultOptions,...e},e.maxTextures||(Me("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=x_());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new ep(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)ip(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=rp(),o=s.textures;o.clear();const l=t[this.elementStart];let u=np(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const f=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,m=this.indexBuffer;let y=this._batchIndexSize,_=this._batchIndexStart,v="startBatch";const S=this.maxTextures;for(let k=this.elementStart;k<this.elementSize;++k){const w=t[k];t[k]=null;const T=w.texture._source,E=np(w.blendMode,T),I=u!==E||h!==w.topology;if(T._batchTick===Is&&!I){w._textureId=T._textureBindLocation,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,f,p,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,f,p,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}T._batchTick=Is,(o.count>=S||I)&&(this._finishBatch(s,_,y-_,o,u,h,e,v),v="renderBatch",_=y,u=E,h=w.topology,s=rp(),o=s.textures,o.clear(),++Is),w._textureId=T._textureBindLocation=o.count,o.ids[T.uid]=o.count,o.textures[o.count++]=T,w._batch=s,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,f,p,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,f,p,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,_,y-_,o,u,h,e,v),_=y,++Is),this.elementStart=this.elementSize,this._batchIndexStart=_,this._batchIndexSize=y}_finishBatch(e,t,s,o,l,u,h,f){e.gpuBindGroup=null,e.bindGroup=null,e.action=f,e.batcher=this,e.textures=o,e.blendMode=l,e.topology=u,e.start=t,e.size=s,++Is,this.batches[this.batchIndex++]=e,h.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new ep(t);tp(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let l=0;l<t.length;l++)o[l]=t[l];else tp(t.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,o){const l=e.indices,u=e.indexSize,h=e.indexOffset,f=e.attributeOffset;for(let p=0;p<u;p++)t[s++]=o+l[p+h]-f}destroy(e={}){var t;if(this.batches!==null){for(let s=0;s<this.batches.length;s++)ip(this.batches[s]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((t=this.shader)==null||t.destroy(),this.shader=null);for(let s=0;s<this._elements.length;s++)this._elements[s]&&(this._elements[s]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};Um.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let w_=Um;var Ht=(i=>(i[i.MAP_READ=1]="MAP_READ",i[i.MAP_WRITE=2]="MAP_WRITE",i[i.COPY_SRC=4]="COPY_SRC",i[i.COPY_DST=8]="COPY_DST",i[i.INDEX=16]="INDEX",i[i.VERTEX=32]="VERTEX",i[i.UNIFORM=64]="UNIFORM",i[i.STORAGE=128]="STORAGE",i[i.INDIRECT=256]="INDIRECT",i[i.QUERY_RESOLVE=512]="QUERY_RESOLVE",i[i.STATIC=1024]="STATIC",i))(Ht||{});class Xs extends Sn{constructor(e){let{data:t,size:s}=e;const{usage:o,label:l,shrinkToFit:u}=e;super(),this.uid=lt("buffer"),this._resourceType="buffer",this._resourceId=lt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t==null?void 0:t.byteLength);const h=!!t;this.descriptor={size:s,usage:o,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Ht.STATIC)}set static(e){e?this.descriptor.usage|=Ht.STATIC:this.descriptor.usage&=~Ht.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const o=this._data;if(this._data=e,this._dataInt32=null,!o||o.length!==e.length){!this.shrinkToFit&&o&&e.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=lt("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function Hm(i,e){if(!(i instanceof Xs)){let t=e?Ht.INDEX:Ht.VERTEX;i instanceof Array&&(e?(i=new Uint32Array(i),t=Ht.INDEX|Ht.COPY_DST):(i=new Float32Array(i),t=Ht.VERTEX|Ht.COPY_DST)),i=new Xs({data:i,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return i}function S_(i,e,t){const s=i.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const o=s.buffer.data;let l=1/0,u=1/0,h=-1/0,f=-1/0;const p=o.BYTES_PER_ELEMENT,m=(s.offset||0)/p,y=(s.stride||8)/p;for(let _=m;_<o.length;_+=y){const v=o[_],S=o[_+1];v>h&&(h=v),S>f&&(f=S),v<l&&(l=v),S<u&&(u=S)}return t.minX=l,t.minY=u,t.maxX=h,t.maxY=f,t}function C_(i){return(i instanceof Xs||Array.isArray(i)||i.BYTES_PER_ELEMENT)&&(i={buffer:i}),i.buffer=Hm(i.buffer,!1),i}class k_ extends Sn{constructor(e={}){super(),this.uid=lt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new wn,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:o}=e;if(this.buffers=[],this.attributes={},t)for(const l in t)this.addAttribute(l,t[l]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=C_(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=Hm(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,S_(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(s=>s.destroy()),(t=this.indexBuffer)==null||t.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const b_=new Float32Array(1),A_=new Uint32Array(1);class P_ extends k_{constructor(){const t=new Xs({data:b_,label:"attribute-batch-buffer",usage:Ht.VERTEX|Ht.COPY_DST,shrinkToFit:!1}),s=new Xs({data:A_,label:"index-batch-buffer",usage:Ht.INDEX|Ht.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:o,offset:0},aUV:{buffer:t,format:"float32x2",stride:o,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function sp(i,e,t){if(i)for(const s in i){const o=s.toLocaleLowerCase(),l=e[o];if(l){let u=i[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&l.push(`//----${t}----//`),l.push(u)}else Ze(`${s} placement hook does not exist in shader`)}}const T_=/\{\{(.*?)\}\}/g;function op(i){var s;const e={};return(((s=i.match(T_))==null?void 0:s.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{e[o]=[]}),e}function ap(i,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function lp(i,e,t=!1){const s=[];ap(e,s),i.forEach(h=>{h.header&&ap(h.header,s)});const o=s;t&&o.sort();const l=o.map((h,f)=>`       @location(${f}) ${h},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function up(i,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function E_(i){const t=/\b(\w+)\s*:/g.exec(i);return t?t[1]:""}function M_(i){const e=/@.*?\s+/g;return i.replace(e,"")}function R_(i,e){const t=[];up(e,t),i.forEach(f=>{f.header&&up(f.header,t)});let s=0;const o=t.sort().map(f=>f.indexOf("builtin")>-1?f:`@location(${s++}) ${f}`).join(`,
`),l=t.sort().map(f=>`       var ${M_(f)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(f=>` ${E_(f)}`).join(`,
`)});`;let h=e.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${o}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function cp(i,e){let t=i;for(const s in e){const o=e[s];o.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const br=Object.create(null),Xu=new Map;let I_=0;function F_({template:i,bits:e}){const t=Vm(i,e);if(br[t])return br[t];const{vertex:s,fragment:o}=B_(i,e);return br[t]=Ym(s,o,e),br[t]}function L_({template:i,bits:e}){const t=Vm(i,e);return br[t]||(br[t]=Ym(i.vertex,i.fragment,e)),br[t]}function B_(i,e){const t=e.map(u=>u.vertex).filter(u=>!!u),s=e.map(u=>u.fragment).filter(u=>!!u);let o=lp(t,i.vertex,!0);o=R_(t,o);const l=lp(s,i.fragment,!0);return{vertex:o,fragment:l}}function Vm(i,e){return e.map(t=>(Xu.has(t)||Xu.set(t,I_++),Xu.get(t))).sort((t,s)=>t-s).join("-")+i.vertex+i.fragment}function Ym(i,e,t){const s=op(i),o=op(e);return t.forEach(l=>{sp(l.vertex,s,l.name),sp(l.fragment,o,l.name)}),{vertex:cp(i,s),fragment:cp(e,o)}}const z_=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,j_=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,D_=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,O_=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,N_={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},$_={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function G_({bits:i,name:e}){const t=F_({template:{fragment:j_,vertex:z_},bits:[N_,...i]});return Na.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function U_({bits:i,name:e}){return new Cm({name:e,...L_({template:{vertex:D_,fragment:O_},bits:[$_,...i]})})}const W_={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},H_={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},qu={};function V_(i){const e=[];if(i===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<i;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function Y_(i){const e=[];if(i===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<i;t++)t===i-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function X_(i){return qu[i]||(qu[i]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${V_(i)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${Y_(i)}
            `}}),qu[i]}const Ku={};function q_(i){const e=[];for(let t=0;t<i;t++)t>0&&e.push("else"),t<i-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function K_(i){return Ku[i]||(Ku[i]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${i}];

            `,main:`

                ${q_(i)}
            `}}),Ku[i]}const Q_={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Z_={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},hp={};function J_(i){let e=hp[i];if(e)return e;const t=new Int32Array(i);for(let s=0;s<i;s++)t[s]=s;return e=hp[i]=new Pm({uTextures:{value:t,type:"i32",size:i}},{isStatic:!0}),e}class dp extends Fc{constructor(e){const t=U_({name:"batch",bits:[H_,K_(e),Z_]}),s=G_({name:"batch",bits:[W_,X_(e),Q_]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:J_(e)}}),this.maxTextures=e}}let Fs=null;const Xm=class qm extends w_{constructor(e){super(e),this.geometry=new P_,this.name=qm.extension.name,this.vertexSize=6,Fs??(Fs=new dp(e.maxTextures)),this.shader=Fs}packAttributes(e,t,s,o,l){const u=l<<16|e.roundPixels&65535,h=e.transform,f=h.a,p=h.b,m=h.c,y=h.d,_=h.tx,v=h.ty,{positions:S,uvs:k}=e,w=e.color,P=e.attributeOffset,T=P+e.attributeSize;for(let E=P;E<T;E++){const I=E*2,U=S[I],D=S[I+1];t[o++]=f*U+m*D+_,t[o++]=y*D+p*U+v,t[o++]=k[I],t[o++]=k[I+1],s[o++]=w,s[o++]=u}}packQuadAttributes(e,t,s,o,l){const u=e.texture,h=e.transform,f=h.a,p=h.b,m=h.c,y=h.d,_=h.tx,v=h.ty,S=e.bounds,k=S.maxX,w=S.minX,P=S.maxY,T=S.minY,E=u.uvs,I=e.color,U=l<<16|e.roundPixels&65535;t[o+0]=f*w+m*T+_,t[o+1]=y*T+p*w+v,t[o+2]=E.x0,t[o+3]=E.y0,s[o+4]=I,s[o+5]=U,t[o+6]=f*k+m*T+_,t[o+7]=y*T+p*k+v,t[o+8]=E.x1,t[o+9]=E.y1,s[o+10]=I,s[o+11]=U,t[o+12]=f*k+m*P+_,t[o+13]=y*P+p*k+v,t[o+14]=E.x2,t[o+15]=E.y2,s[o+16]=I,s[o+17]=U,t[o+18]=f*w+m*P+_,t[o+19]=y*P+p*w+v,t[o+20]=E.x3,t[o+21]=E.y3,s[o+22]=I,s[o+23]=U}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Fs=new dp(e),this.shader=Fs)}destroy(){this.shader=null,super.destroy()}};Xm.extension={type:[fe.Batcher],name:"default"};let ev=Xm;function tv(i,e,t,s,o,l,u,h=null){let f=0;t*=e,o*=l;const p=h.a,m=h.b,y=h.c,_=h.d,v=h.tx,S=h.ty;for(;f<u;){const k=i[t],w=i[t+1];s[o]=p*k+y*w+v,s[o+1]=m*k+_*w+S,o+=l,t+=e,f++}}function nv(i,e,t,s){let o=0;for(e*=t;o<s;)i[e]=0,i[e+1]=0,e+=t,o++}function Km(i,e,t,s,o){const l=e.a,u=e.b,h=e.c,f=e.d,p=e.tx,m=e.ty;t||(t=0),s||(s=2),o||(o=i.length/s-t);let y=t*s;for(let _=0;_<o;_++){const v=i[y],S=i[y+1];i[y]=l*v+h*S+p,i[y+1]=u*v+f*S+m,y+=s}}const rv=new Re;class Qm{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?em(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||rv}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const qs={extension:{type:fe.ShapeBuilder,name:"circle"},build(i,e){let t,s,o,l,u,h;if(i.type==="circle"){const I=i;if(u=h=I.radius,u<=0)return!1;t=I.x,s=I.y,o=l=0}else if(i.type==="ellipse"){const I=i;if(u=I.halfWidth,h=I.halfHeight,u<=0||h<=0)return!1;t=I.x,s=I.y,o=l=0}else{const I=i,U=I.width/2,D=I.height/2;t=I.x+U,s=I.y+D,u=h=Math.max(0,Math.min(I.radius,Math.min(U,D))),o=U-u,l=D-h}if(o<0||l<0)return!1;const f=Math.ceil(2.3*Math.sqrt(u+h)),p=f*8+(o?4:0)+(l?4:0);if(p===0)return!1;if(f===0)return e[0]=e[6]=t+o,e[1]=e[3]=s+l,e[2]=e[4]=t-o,e[5]=e[7]=s-l,!0;let m=0,y=f*4+(o?2:0)+2,_=y,v=p,S=o+u,k=l,w=t+S,P=t-S,T=s+k;if(e[m++]=w,e[m++]=T,e[--y]=T,e[--y]=P,l){const I=s-k;e[_++]=P,e[_++]=I,e[--v]=I,e[--v]=w}for(let I=1;I<f;I++){const U=Math.PI/2*(I/f),D=o+Math.cos(U)*u,O=l+Math.sin(U)*h,te=t+D,ie=t-D,X=s+O,ee=s-O;e[m++]=te,e[m++]=X,e[--y]=X,e[--y]=ie,e[_++]=ie,e[_++]=ee,e[--v]=ee,e[--v]=te}S=o,k=l+h,w=t+S,P=t-S,T=s+k;const E=s-k;return e[m++]=w,e[m++]=T,e[--v]=E,e[--v]=w,o&&(e[m++]=P,e[m++]=T,e[--v]=E,e[--v]=P),!0},triangulate(i,e,t,s,o,l){if(i.length===0)return;let u=0,h=0;for(let m=0;m<i.length;m+=2)u+=i[m],h+=i[m+1];u/=i.length/2,h/=i.length/2;let f=s;e[f*t]=u,e[f*t+1]=h;const p=f++;for(let m=0;m<i.length;m+=2)e[f*t]=i[m],e[f*t+1]=i[m+1],m>0&&(o[l++]=f,o[l++]=p,o[l++]=f-1),f++;o[l++]=p+1,o[l++]=p,o[l++]=f-1}},iv={...qs,extension:{...qs.extension,name:"ellipse"}},sv={...qs,extension:{...qs.extension,name:"roundedRectangle"}},Zm=1e-4,fp=1e-4;function ov(i){const e=i.length;if(e<6)return 1;let t=0;for(let s=0,o=i[e-2],l=i[e-1];s<e;s+=2){const u=i[s],h=i[s+1];t+=(u-o)*(h+l),o=u,l=h}return t<0?-1:1}function pp(i,e,t,s,o,l,u,h){const f=i-t*o,p=e-s*o,m=i+t*l,y=e+s*l;let _,v;u?(_=s,v=-t):(_=-s,v=t);const S=f+_,k=p+v,w=m+_,P=y+v;return h.push(S,k),h.push(w,P),2}function Wr(i,e,t,s,o,l,u,h){const f=t-i,p=s-e;let m=Math.atan2(f,p),y=Math.atan2(o-i,l-e);h&&m<y?m+=Math.PI*2:!h&&m>y&&(y+=Math.PI*2);let _=m;const v=y-m,S=Math.abs(v),k=Math.sqrt(f*f+p*p),w=(15*S*Math.sqrt(k)/Math.PI>>0)+1,P=v/w;if(_+=P,h){u.push(i,e),u.push(t,s);for(let T=1,E=_;T<w;T++,E+=P)u.push(i,e),u.push(i+Math.sin(E)*k,e+Math.cos(E)*k);u.push(i,e),u.push(o,l)}else{u.push(t,s),u.push(i,e);for(let T=1,E=_;T<w;T++,E+=P)u.push(i+Math.sin(E)*k,e+Math.cos(E)*k),u.push(i,e);u.push(o,l),u.push(i,e)}return w*2}function av(i,e,t,s,o,l){const u=Zm;if(i.length===0)return;const h=e;let f=h.alignment;if(e.alignment!==.5){let q=ov(i);f=(f-.5)*q+.5}const p=new Ft(i[0],i[1]),m=new Ft(i[i.length-2],i[i.length-1]),y=s,_=Math.abs(p.x-m.x)<u&&Math.abs(p.y-m.y)<u;if(y){i=i.slice(),_&&(i.pop(),i.pop(),m.set(i[i.length-2],i[i.length-1]));const q=(p.x+m.x)*.5,J=(m.y+p.y)*.5;i.unshift(q,J),i.push(q,J)}const v=o,S=i.length/2;let k=i.length;const w=v.length/2,P=h.width/2,T=P*P,E=h.miterLimit*h.miterLimit;let I=i[0],U=i[1],D=i[2],O=i[3],te=0,ie=0,X=-(U-O),ee=I-D,Se=0,Ce=0,ke=Math.sqrt(X*X+ee*ee);X/=ke,ee/=ke,X*=P,ee*=P;const ft=f,Z=(1-ft)*2,ne=ft*2;y||(h.cap==="round"?k+=Wr(I-X*(Z-ne)*.5,U-ee*(Z-ne)*.5,I-X*Z,U-ee*Z,I+X*ne,U+ee*ne,v,!0)+2:h.cap==="square"&&(k+=pp(I,U,X,ee,Z,ne,!0,v))),v.push(I-X*Z,U-ee*Z),v.push(I+X*ne,U+ee*ne);for(let q=1;q<S-1;++q){I=i[(q-1)*2],U=i[(q-1)*2+1],D=i[q*2],O=i[q*2+1],te=i[(q+1)*2],ie=i[(q+1)*2+1],X=-(U-O),ee=I-D,ke=Math.sqrt(X*X+ee*ee),X/=ke,ee/=ke,X*=P,ee*=P,Se=-(O-ie),Ce=D-te,ke=Math.sqrt(Se*Se+Ce*Ce),Se/=ke,Ce/=ke,Se*=P,Ce*=P;const J=D-I,R=U-O,N=D-te,ye=ie-O,_e=J*N+R*ye,be=R*N-ye*J,Ae=be<0;if(Math.abs(be)<.001*Math.abs(_e)){v.push(D-X*Z,O-ee*Z),v.push(D+X*ne,O+ee*ne),_e>=0&&(h.join==="round"?k+=Wr(D,O,D-X*Z,O-ee*Z,D-Se*Z,O-Ce*Z,v,!1)+4:k+=2,v.push(D-Se*ne,O-Ce*ne),v.push(D+Se*Z,O+Ce*Z));continue}const De=(-X+I)*(-ee+O)-(-X+D)*(-ee+U),xe=(-Se+te)*(-Ce+O)-(-Se+D)*(-Ce+ie),Fe=(J*xe-N*De)/be,We=(ye*De-R*xe)/be,Zt=(Fe-D)*(Fe-D)+(We-O)*(We-O),Jt=D+(Fe-D)*Z,At=O+(We-O)*Z,jt=D-(Fe-D)*ne,pt=O-(We-O)*ne,Zn=Math.min(J*J+R*R,N*N+ye*ye),Jn=Ae?Z:ne,Fn=Zn+Jn*Jn*T;Zt<=Fn?h.join==="bevel"||Zt/T>E?(Ae?(v.push(Jt,At),v.push(D+X*ne,O+ee*ne),v.push(Jt,At),v.push(D+Se*ne,O+Ce*ne)):(v.push(D-X*Z,O-ee*Z),v.push(jt,pt),v.push(D-Se*Z,O-Ce*Z),v.push(jt,pt)),k+=2):h.join==="round"?Ae?(v.push(Jt,At),v.push(D+X*ne,O+ee*ne),k+=Wr(D,O,D+X*ne,O+ee*ne,D+Se*ne,O+Ce*ne,v,!0)+4,v.push(Jt,At),v.push(D+Se*ne,O+Ce*ne)):(v.push(D-X*Z,O-ee*Z),v.push(jt,pt),k+=Wr(D,O,D-X*Z,O-ee*Z,D-Se*Z,O-Ce*Z,v,!1)+4,v.push(D-Se*Z,O-Ce*Z),v.push(jt,pt)):(v.push(Jt,At),v.push(jt,pt)):(v.push(D-X*Z,O-ee*Z),v.push(D+X*ne,O+ee*ne),h.join==="round"?Ae?k+=Wr(D,O,D+X*ne,O+ee*ne,D+Se*ne,O+Ce*ne,v,!0)+2:k+=Wr(D,O,D-X*Z,O-ee*Z,D-Se*Z,O-Ce*Z,v,!1)+2:h.join==="miter"&&Zt/T<=E&&(Ae?(v.push(jt,pt),v.push(jt,pt)):(v.push(Jt,At),v.push(Jt,At)),k+=2),v.push(D-Se*Z,O-Ce*Z),v.push(D+Se*ne,O+Ce*ne),k+=2)}I=i[(S-2)*2],U=i[(S-2)*2+1],D=i[(S-1)*2],O=i[(S-1)*2+1],X=-(U-O),ee=I-D,ke=Math.sqrt(X*X+ee*ee),X/=ke,ee/=ke,X*=P,ee*=P,v.push(D-X*Z,O-ee*Z),v.push(D+X*ne,O+ee*ne),y||(h.cap==="round"?k+=Wr(D-X*(Z-ne)*.5,O-ee*(Z-ne)*.5,D-X*Z,O-ee*Z,D+X*ne,O+ee*ne,v,!1)+2:h.cap==="square"&&(k+=pp(D,O,X,ee,Z,ne,!1,v)));const K=fp*fp;for(let q=w;q<k+w-2;++q)I=v[q*2],U=v[q*2+1],D=v[(q+1)*2],O=v[(q+1)*2+1],te=v[(q+2)*2],ie=v[(q+2)*2+1],!(Math.abs(I*(O-ie)+D*(ie-U)+te*(U-O))<K)&&l.push(q,q+1,q+2)}function lv(i,e,t,s){const o=Zm;if(i.length===0)return;const l=i[0],u=i[1],h=i[i.length-2],f=i[i.length-1],p=e||Math.abs(l-h)<o&&Math.abs(u-f)<o,m=t,y=i.length/2,_=m.length/2;for(let v=0;v<y;v++)m.push(i[v*2]),m.push(i[v*2+1]);for(let v=0;v<y-1;v++)s.push(_+v,_+v+1);p&&s.push(_+y-1,_)}function Jm(i,e,t,s,o,l,u){const h=X0(i,e,2);if(!h)return;for(let p=0;p<h.length;p+=3)l[u++]=h[p]+o,l[u++]=h[p+1]+o,l[u++]=h[p+2]+o;let f=o*s;for(let p=0;p<i.length;p+=2)t[f]=i[p],t[f+1]=i[p+1],f+=s}const uv=[],cv={extension:{type:fe.ShapeBuilder,name:"polygon"},build(i,e){for(let t=0;t<i.points.length;t++)e[t]=i.points[t];return!0},triangulate(i,e,t,s,o,l){Jm(i,uv,e,t,s,o,l)}},hv={extension:{type:fe.ShapeBuilder,name:"rectangle"},build(i,e){const t=i,s=t.x,o=t.y,l=t.width,u=t.height;return l>0&&u>0?(e[0]=s,e[1]=o,e[2]=s+l,e[3]=o,e[4]=s+l,e[5]=o+u,e[6]=s,e[7]=o+u,!0):!1},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[6],e[s+u+1]=i[7],u+=t,e[s+u]=i[4],e[s+u+1]=i[5],u+=t;const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2,o[l++]=h+1,o[l++]=h+3,o[l++]=h+2}},dv={extension:{type:fe.ShapeBuilder,name:"triangle"},build(i,e){return e[0]=i.x,e[1]=i.y,e[2]=i.x2,e[3]=i.y2,e[4]=i.x3,e[5]=i.y3,!0},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[4],e[s+u+1]=i[5];const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2}},fv=new Re,pv=new ct;function mv(i,e,t,s){const o=e.matrix?i.copyFrom(e.matrix).invert():i.identity();if(e.textureSpace==="local"){const u=t.getBounds(pv);e.width&&u.pad(e.width);const{x:h,y:f}=u,p=1/u.width,m=1/u.height,y=-h*p,_=-f*m,v=o.a,S=o.b,k=o.c,w=o.d;o.a*=p,o.b*=p,o.c*=m,o.d*=m,o.tx=y*v+_*k+o.tx,o.ty=y*S+_*w+o.ty}else o.translate(e.texture.frame.x,e.texture.frame.y),o.scale(1/e.texture.source.width,1/e.texture.source.height);const l=e.texture.source.style;return!(e.fill instanceof Qn)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(fv.copyFrom(s).invert()),o}const Ga={};bt.handleByMap(fe.ShapeBuilder,Ga);bt.add(hv,cv,dv,qs,iv,sv);const gv=new ct,yv=new Re;function xv(i,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let o=0;o<i.instructions.length;o++){const l=i.instructions[o];if(l.action==="texture")_v(l.data,s,t);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,f=l.data.style,p=l.data.hole;u&&p&&mp(p.shapePath,f,!0,s,t),p&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=p.shapePath.shapePrimitives),mp(h,f,u,s,t)}}}function _v(i,e,t){const s=[],o=Ga.rectangle,l=gv;l.x=i.dx,l.y=i.dy,l.width=i.dw,l.height=i.dh;const u=i.transform;if(!o.build(l,s))return;const{vertices:h,uvs:f,indices:p}=t,m=p.length,y=h.length/2;u&&Km(s,u),o.triangulate(s,h,2,y,p,m);const _=i.image,v=_.uvs;f.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const S=cn.get(Qm);S.indexOffset=m,S.indexSize=p.length-m,S.attributeOffset=y,S.attributeSize=h.length/2-y,S.baseColor=i.style,S.alpha=i.alpha,S.texture=_,S.geometryData=t,e.push(S)}function mp(i,e,t,s,o){const{vertices:l,uvs:u,indices:h}=o;i.shapePrimitives.forEach(({shape:f,transform:p,holes:m})=>{const y=[],_=Ga[f.type];if(!_.build(f,y))return;const v=h.length,S=l.length/2;let k="triangle-list";if(p&&Km(y,p),t){const E=f.closePath??!0,I=e;I.pixelLine?(lv(y,E,l,h),k="line-list"):av(y,I,!1,E,l,h)}else if(m){const E=[],I=y.slice();vv(m).forEach(D=>{E.push(I.length/2),I.push(...D)}),Jm(I,E,l,2,S,h,v)}else _.triangulate(y,l,2,S,h,v);const w=u.length/2,P=e.texture;if(P!==Le.WHITE){const E=mv(yv,e,f,p);tv(l,2,S,u,w,2,l.length/2-S,E)}else nv(u,w,2,l.length/2-S);const T=cn.get(Qm);T.indexOffset=v,T.indexSize=h.length-v,T.attributeOffset=S,T.attributeSize=l.length/2-S,T.baseColor=e.color,T.alpha=e.alpha,T.texture=P,T.geometryData=o,T.topology=k,s.push(T)})}function vv(i){const e=[];for(let t=0;t<i.length;t++){const s=i[t].shape,o=[];Ga[s.type].build(s,o)&&e.push(o)}return e}class wv{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class Sv{constructor(){this.instructions=new im}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new ev({maxTextures:t}),this.instructions.reset()}get geometry(){return Me(_x,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Dc=class Cc{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Cc.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??Cc.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),xv(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=cn.get(Sv,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[e.uid],l=o.vertices.length,u=o.indices.length;for(let m=0;m<s.length;m++)s[m].applyTransform=!1;const h=t.batcher;h.ensureAttributeBuffer(l),h.ensureIndexBuffer(u),h.begin();for(let m=0;m<s.length;m++){const y=s[m];h.add(y)}h.finish(t.instructions);const f=h.geometry;f.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),f.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const p=h.batches;for(let m=0;m<p.length;m++){const y=p[m];y.bindGroup=h_(y.textures.textures,y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new wv;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(cn.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{cn.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};Dc.extension={type:[fe.WebGLSystem,fe.WebGPUSystem,fe.CanvasSystem],name:"graphicsContext"};Dc.defaultOptions={bezierSmoothness:.5};let eg=Dc;const Cv=8,ba=11920929e-14,kv=1;function tg(i,e,t,s,o,l,u,h,f,p){const y=Math.min(.99,Math.max(0,p??eg.defaultOptions.bezierSmoothness));let _=(kv-y)/1;return _*=_,bv(e,t,s,o,l,u,h,f,i,_),i}function bv(i,e,t,s,o,l,u,h,f,p){kc(i,e,t,s,o,l,u,h,f,p,0),f.push(u,h)}function kc(i,e,t,s,o,l,u,h,f,p,m){if(m>Cv)return;const y=(i+t)/2,_=(e+s)/2,v=(t+o)/2,S=(s+l)/2,k=(o+u)/2,w=(l+h)/2,P=(y+v)/2,T=(_+S)/2,E=(v+k)/2,I=(S+w)/2,U=(P+E)/2,D=(T+I)/2;if(m>0){let O=u-i,te=h-e;const ie=Math.abs((t-u)*te-(s-h)*O),X=Math.abs((o-u)*te-(l-h)*O);if(ie>ba&&X>ba){if((ie+X)*(ie+X)<=p*(O*O+te*te)){f.push(U,D);return}}else if(ie>ba){if(ie*ie<=p*(O*O+te*te)){f.push(U,D);return}}else if(X>ba){if(X*X<=p*(O*O+te*te)){f.push(U,D);return}}else if(O=U-(i+u)/2,te=D-(e+h)/2,O*O+te*te<=p){f.push(U,D);return}}kc(i,e,y,_,P,T,U,D,f,p,m+1),kc(U,D,E,I,k,w,u,h,f,p,m+1)}const Av=8,Pv=11920929e-14,Tv=1;function Ev(i,e,t,s,o,l,u,h){const p=Math.min(.99,Math.max(0,h??eg.defaultOptions.bezierSmoothness));let m=(Tv-p)/1;return m*=m,Mv(e,t,s,o,l,u,i,m),i}function Mv(i,e,t,s,o,l,u,h){bc(u,i,e,t,s,o,l,h,0),u.push(o,l)}function bc(i,e,t,s,o,l,u,h,f){if(f>Av)return;const p=(e+s)/2,m=(t+o)/2,y=(s+l)/2,_=(o+u)/2,v=(p+y)/2,S=(m+_)/2;let k=l-e,w=u-t;const P=Math.abs((s-l)*w-(o-u)*k);if(P>Pv){if(P*P<=h*(k*k+w*w)){i.push(v,S);return}}else if(k=v-(e+l)/2,w=S-(t+u)/2,k*k+w*w<=h){i.push(v,S);return}bc(i,e,t,p,m,v,S,h,f+1),bc(i,v,S,y,_,l,u,h,f+1)}function ng(i,e,t,s,o,l,u,h){let f=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(f=2*Math.PI-f),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(f/Math.PI)))),h=Math.max(h,3);let p=f/h,m=o;p*=u?-1:1;for(let y=0;y<h+1;y++){const _=Math.cos(m),v=Math.sin(m),S=e+_*s,k=t+v*s;i.push(S,k),m+=p}}function Rv(i,e,t,s,o,l){const u=i[i.length-2],f=i[i.length-1]-t,p=u-e,m=o-t,y=s-e,_=Math.abs(f*y-p*m);if(_<1e-8||l===0){(i[i.length-2]!==e||i[i.length-1]!==t)&&i.push(e,t);return}const v=f*f+p*p,S=m*m+y*y,k=f*m+p*y,w=l*Math.sqrt(v)/_,P=l*Math.sqrt(S)/_,T=w*k/v,E=P*k/S,I=w*y+P*p,U=w*m+P*f,D=p*(P+T),O=f*(P+T),te=y*(w+E),ie=m*(w+E),X=Math.atan2(O-U,D-I),ee=Math.atan2(ie-U,te-I);ng(i,I+e,U+t,l,X,ee,p*m>y*f)}const Ws=Math.PI*2,Qu={centerX:0,centerY:0,ang1:0,ang2:0},Zu=({x:i,y:e},t,s,o,l,u,h,f)=>{i*=t,e*=s;const p=o*i-l*e,m=l*i+o*e;return f.x=p+u,f.y=m+h,f};function Iv(i,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,o=Math.cos(i),l=Math.sin(i),u=Math.cos(i+e),h=Math.sin(i+e);return[{x:o-l*s,y:l+o*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const gp=(i,e,t,s)=>{const o=i*s-e*t<0?-1:1;let l=i*t+e*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},Fv=(i,e,t,s,o,l,u,h,f,p,m,y,_)=>{const v=Math.pow(o,2),S=Math.pow(l,2),k=Math.pow(m,2),w=Math.pow(y,2);let P=v*S-v*w-S*k;P<0&&(P=0),P/=v*w+S*k,P=Math.sqrt(P)*(u===h?-1:1);const T=P*o/l*y,E=P*-l/o*m,I=p*T-f*E+(i+t)/2,U=f*T+p*E+(e+s)/2,D=(m-T)/o,O=(y-E)/l,te=(-m-T)/o,ie=(-y-E)/l,X=gp(1,0,D,O);let ee=gp(D,O,te,ie);h===0&&ee>0&&(ee-=Ws),h===1&&ee<0&&(ee+=Ws),_.centerX=I,_.centerY=U,_.ang1=X,_.ang2=ee};function Lv(i,e,t,s,o,l,u,h=0,f=0,p=0){if(l===0||u===0)return;const m=Math.sin(h*Ws/360),y=Math.cos(h*Ws/360),_=y*(e-s)/2+m*(t-o)/2,v=-m*(e-s)/2+y*(t-o)/2;if(_===0&&v===0)return;l=Math.abs(l),u=Math.abs(u);const S=Math.pow(_,2)/Math.pow(l,2)+Math.pow(v,2)/Math.pow(u,2);S>1&&(l*=Math.sqrt(S),u*=Math.sqrt(S)),Fv(e,t,s,o,l,u,f,p,m,y,_,v,Qu);let{ang1:k,ang2:w}=Qu;const{centerX:P,centerY:T}=Qu;let E=Math.abs(w)/(Ws/4);Math.abs(1-E)<1e-7&&(E=1);const I=Math.max(Math.ceil(E),1);w/=I;let U=i[i.length-2],D=i[i.length-1];const O={x:0,y:0};for(let te=0;te<I;te++){const ie=Iv(k,w),{x:X,y:ee}=Zu(ie[0],l,u,y,m,P,T,O),{x:Se,y:Ce}=Zu(ie[1],l,u,y,m,P,T,O),{x:ke,y:ft}=Zu(ie[2],l,u,y,m,P,T,O);tg(i,U,D,X,ee,Se,Ce,ke,ft),U=ke,D=ft,k+=w}}function Bv(i,e,t){const s=(u,h)=>{const f=h.x-u.x,p=h.y-u.y,m=Math.sqrt(f*f+p*p),y=f/m,_=p/m;return{len:m,nx:y,ny:_}},o=(u,h)=>{u===0?i.moveTo(h.x,h.y):i.lineTo(h.x,h.y)};let l=e[e.length-1];for(let u=0;u<e.length;u++){const h=e[u%e.length],f=h.radius??t;if(f<=0){o(u,h),l=h;continue}const p=e[(u+1)%e.length],m=s(h,l),y=s(h,p);if(m.len<1e-4||y.len<1e-4){o(u,h),l=h;continue}let _=Math.asin(m.nx*y.ny-m.ny*y.nx),v=1,S=!1;m.nx*y.nx-m.ny*-y.ny<0?_<0?_=Math.PI+_:(_=Math.PI-_,v=-1,S=!0):_>0&&(v=-1,S=!0);const k=_/2;let w,P=Math.abs(Math.cos(k)*f/Math.sin(k));P>Math.min(m.len/2,y.len/2)?(P=Math.min(m.len/2,y.len/2),w=Math.abs(P*Math.sin(k)/Math.cos(k))):w=f;const T=h.x+y.nx*P+-y.ny*w*v,E=h.y+y.ny*P+y.nx*w*v,I=Math.atan2(m.ny,m.nx)+Math.PI/2*v,U=Math.atan2(y.ny,y.nx)-Math.PI/2*v;u===0&&i.moveTo(T+Math.cos(I)*w,E+Math.sin(I)*w),i.arc(T,E,w,I,U,S),l=h}}function zv(i,e,t,s){const o=(h,f)=>Math.sqrt((h.x-f.x)**2+(h.y-f.y)**2),l=(h,f,p)=>({x:h.x+(f.x-h.x)*p,y:h.y+(f.y-h.y)*p}),u=e.length;for(let h=0;h<u;h++){const f=e[(h+1)%u],p=f.radius??t;if(p<=0){h===0?i.moveTo(f.x,f.y):i.lineTo(f.x,f.y);continue}const m=e[h],y=e[(h+2)%u],_=o(m,f);let v;if(_<1e-4)v=f;else{const w=Math.min(_/2,p);v=l(f,m,w/_)}const S=o(y,f);let k;if(S<1e-4)k=f;else{const w=Math.min(S/2,p);k=l(f,y,w/S)}h===0?i.moveTo(v.x,v.y):i.lineTo(v.x,v.y),i.quadraticCurveTo(f.x,f.y,k.x,k.y,s)}}const jv=new ct;class Dv{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new wn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==e||l!==t)&&s.push(e,t),this}arc(e,t,s,o,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return ng(h,e,t,s,o,l,u),this}arcTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return Rv(u,e,t,s,o,l),this}arcToSvg(e,t,s,o,l,u,h){const f=this._currentPoly.points;return Lv(f,this._currentPoly.lastX,this._currentPoly.lastY,u,h,e,t,s,o,l),this}bezierCurveTo(e,t,s,o,l,u,h){this._ensurePoly();const f=this._currentPoly;return tg(this._currentPoly.points,f.lastX,f.lastY,e,t,s,o,l,u,h),this}quadraticCurveTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly;return Ev(this._currentPoly.points,u.lastX,u.lastY,e,t,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,o=s.length;for(let l=0;l<e.instructions.length;l++){const u=e.instructions[l];this[u.action](...u.data)}if(e.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const f=h.shape,p=l==null?void 0:l.shape;p&&p.containsPolygon(f)?(l.holes||(l.holes=[]),l.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):l=h}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,o,l){return this.drawShape(new ct(e,t,s,o),l),this}circle(e,t,s,o){return this.drawShape(new Bc(e,t,s),o),this}poly(e,t,s){const o=new Gs(e);return o.closePath=t,this.drawShape(o,s),this}regularPoly(e,t,s,o,l=0,u){o=Math.max(o|0,3);const h=-1*Math.PI/2+l,f=Math.PI*2/o,p=[];for(let m=0;m<o;m++){const y=h-m*f;p.push(e+s*Math.cos(y),t+s*Math.sin(y))}return this.poly(p,!0,u),this}roundPoly(e,t,s,o,l,u=0,h){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(e,t,s,o,u);const f=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,f);const p=-1*Math.PI/2+u,m=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let _=0;_<o;_++){const v=_*m+p,S=e+s*Math.cos(v),k=t+s*Math.sin(v),w=v+Math.PI+y,P=v-Math.PI-y,T=S+l*Math.cos(w),E=k+l*Math.sin(w),I=S+l*Math.cos(P),U=k+l*Math.sin(P);_===0?this.moveTo(T,E):this.lineTo(T,E),this.quadraticCurveTo(S,k,I,U,h)}return this.closePath()}roundShape(e,t,s=!1,o){return e.length<3?this:(s?zv(this,e,t,o):Bv(this,e,t),this.closePath())}filletRect(e,t,s,o,l){if(l===0)return this.rect(e,t,s,o);const u=Math.min(s,o)/2,h=Math.min(u,Math.max(-u,l)),f=e+s,p=t+o,m=h<0?-h:0,y=Math.abs(h);return this.moveTo(e,t+y).arcTo(e+m,t+m,e+y,t,y).lineTo(f-y,t).arcTo(f-m,t+m,f,t+y,y).lineTo(f,p-y).arcTo(f-m,p-m,e+s-y,p,y).lineTo(e+y,p).arcTo(e+m,p-m,e,p-y,y).closePath()}chamferRect(e,t,s,o,l,u){if(l<=0)return this.rect(e,t,s,o);const h=Math.min(l,Math.min(s,o)/2),f=e+s,p=t+o,m=[e+h,t,f-h,t,f,t+h,f,p-h,f-h,p,e+h,p,e,p-h,e,t+h];for(let y=m.length-1;y>=2;y-=2)m[y]===m[y-2]&&m[y-1]===m[y-3]&&m.splice(y-1,2);return this.poly(m,!0,u)}ellipse(e,t,s,o,l){return this.drawShape(new zc(e,t,s,o),l),this}roundRect(e,t,s,o,l,u){return this.drawShape(new jc(e,t,s,o,l),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new Gs,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Gs,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,o=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const l=t.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const o=t[s],l=o.shape.getBounds(jv);o.transform?e.addRect(l,o.transform):e.addRect(l)}return e}}class Kn{constructor(e,t=!1){this.instructions=[],this.uid=lt("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?a_(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new Dv(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,o,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(Ft.shared);let f=0,p=0;if(!u||u.action!=="bezierCurveTo")f=h.x,p=h.y;else{f=u.data[2],p=u.data[3];const m=h.x,y=h.y;f=m+(m-f),p=y+(y-p)}return this.instructions.push({action:"bezierCurveTo",data:[f,p,e,t,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(Ft.shared);let u=0,h=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=o.data[0],h=o.data[1];const f=l.x,p=l.y;u=f+(f-u),h=p+(p-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,e,t,s]}),this._dirty=!0,this}rect(e,t,s,o,l){return this.instructions.push({action:"rect",data:[e,t,s,o,l]}),this._dirty=!0,this}circle(e,t,s,o){return this.instructions.push({action:"circle",data:[e,t,s,o]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,o,l,u,h){l||(l=o/2);const f=-1*Math.PI/2+u,p=s*2,m=Math.PI*2/p,y=[];for(let _=0;_<p;_++){const v=_%2?l:o,S=_*m+f;y.push(e+v*Math.cos(S),t+v*Math.sin(S))}return this.poly(y,!0,h),this}clone(e=!1){const t=new Kn;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];t.instructions.push({action:o.action,data:o.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,o=e.c,l=e.d,u=e.tx,h=e.ty;let f=0,p=0,m=0,y=0,_=0,v=0,S=0,k=0;for(let w=0;w<this.instructions.length;w++){const P=this.instructions[w],T=P.data;switch(P.action){case"moveTo":case"lineTo":f=T[0],p=T[1],T[0]=t*f+o*p+u,T[1]=s*f+l*p+h;break;case"bezierCurveTo":m=T[0],y=T[1],_=T[2],v=T[3],f=T[4],p=T[5],T[0]=t*m+o*y+u,T[1]=s*m+l*y+h,T[2]=t*_+o*v+u,T[3]=s*_+l*v+h,T[4]=t*f+o*p+u,T[5]=s*f+l*p+h;break;case"quadraticCurveTo":m=T[0],y=T[1],f=T[2],p=T[3],T[0]=t*m+o*y+u,T[1]=s*m+l*y+h,T[2]=t*f+o*p+u,T[3]=s*f+l*p+h;break;case"arcToSvg":f=T[5],p=T[6],S=T[0],k=T[1],T[0]=t*S+o*k,T[1]=s*S+l*k,T[5]=t*f+o*p+u,T[6]=s*f+l*p+h;break;case"circle":T[4]=Ls(T[3],e);break;case"rect":T[4]=Ls(T[4],e);break;case"ellipse":T[8]=Ls(T[8],e);break;case"roundRect":T[5]=Ls(T[5],e);break;case"addPath":T[0].transform(e);break;case"poly":T[2]=Ls(T[2],e);break;default:Ze("unknown transform action",P.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function Ls(i,e){return i?i.prepend(e):e.clone()}function at(i,e,t){const s=i.getAttribute(e);return s?Number(s):t}function Ov(i,e){const t=i.querySelectorAll("defs");for(let s=0;s<t.length;s++){const o=t[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=Nv(u);break;case"radialgradient":e.defs[u.id]=$v();break}}}}function Nv(i){const e=at(i,"x1",0),t=at(i,"y1",0),s=at(i,"x2",1),o=at(i,"y2",0),l=i.getAttribute("gradientUnits")||"objectBoundingBox",u=new Qn(e,t,s,o,l==="objectBoundingBox"?"local":"global");for(let h=0;h<i.children.length;h++){const f=i.children[h],p=at(f,"offset",0),m=yt.shared.setValue(f.getAttribute("stop-color")).toNumber();u.addColorStop(p,m)}return u}function $v(i){return Ze("[SVG Parser] Radial gradients are not yet supported"),new Qn(0,0,1,0)}function yp(i){const e=i.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const xp={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function rg(i,e){const t=i.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in xp){const h=i.getAttribute(u);h&&_p(e,l,u,h.trim())}if(t){const u=t.split(";");for(let h=0;h<u.length;h++){const f=u[h].trim(),[p,m]=f.split(":");xp[p]&&_p(e,l,p,m.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function _p(i,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=yp(s);e.strokeStyle.fill=i.defs[o]}else e.strokeStyle.color=yt.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=yp(s);e.fillStyle.fill=i.defs[o]}else e.fillStyle.color=yt.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function Gv(i){if(i.length<=2)return!0;const e=i.map(h=>h.area).sort((h,f)=>f-h),[t,s]=e,o=e[e.length-1],l=t/s,u=s/o;return!(l>3&&u<2)}function Uv(i){return i.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function Wv(i){const e=i.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],o=[];for(let m=0;m<t.length;m+=2)m+1<t.length&&(s.push(t[m]),o.push(t[m+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),h=Math.min(...o),f=Math.max(...o);return(u-l)*(f-h)}function vp(i,e){const t=new Kn(i,!1);for(const s of t.instructions)e.instructions.push(s)}function Hv(i,e){if(typeof i=="string"){const u=document.createElement("div");u.innerHTML=i.trim(),i=u.querySelector("svg")}const t={context:e,defs:{},path:new Kn};Ov(i,t);const s=i.children,{fillStyle:o,strokeStyle:l}=rg(i,t);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&ig(h,t,o,l)}return e}function ig(i,e,t,s){const o=i.children,{fillStyle:l,strokeStyle:u}=rg(i,e);l&&t?t={...t,...l}:l&&(t=l),u&&s?s={...s,...u}:u&&(s=u);const h=!t&&!s;h&&(t={color:0});let f,p,m,y,_,v,S,k,w,P,T,E,I,U,D,O,te;switch(i.nodeName.toLowerCase()){case"path":{U=i.getAttribute("d");const ie=i.getAttribute("fill-rule"),X=Uv(U),ee=ie==="evenodd",Se=X.length>1;if(ee&&Se){const ke=X.map(Z=>({path:Z,area:Wv(Z)}));if(ke.sort((Z,ne)=>ne.area-Z.area),X.length>3||!Gv(ke))for(let Z=0;Z<ke.length;Z++){const ne=ke[Z],K=Z===0;e.context.beginPath();const q=new Kn(void 0,!0);vp(ne.path,q),e.context.path(q),K?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let Z=0;Z<ke.length;Z++){const ne=ke[Z],K=Z%2===1;e.context.beginPath();const q=new Kn(void 0,!0);vp(ne.path,q),e.context.path(q),K?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const ke=ie?ie==="evenodd":!0;D=new Kn(U,ke),e.context.path(D),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":S=at(i,"cx",0),k=at(i,"cy",0),w=at(i,"r",0),e.context.ellipse(S,k,w,w),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":f=at(i,"x",0),p=at(i,"y",0),O=at(i,"width",0),te=at(i,"height",0),P=at(i,"rx",0),T=at(i,"ry",0),P||T?e.context.roundRect(f,p,O,te,P||T):e.context.rect(f,p,O,te),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":S=at(i,"cx",0),k=at(i,"cy",0),P=at(i,"rx",0),T=at(i,"ry",0),e.context.beginPath(),e.context.ellipse(S,k,P,T),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":m=at(i,"x1",0),y=at(i,"y1",0),_=at(i,"x2",0),v=at(i,"y2",0),e.context.beginPath(),e.context.moveTo(m,y),e.context.lineTo(_,v),s&&e.context.stroke(s);break;case"polygon":I=i.getAttribute("points"),E=I.match(/\d+/g).map(ie=>parseInt(ie,10)),e.context.poly(E,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":I=i.getAttribute("points"),E=I.match(/\d+/g).map(ie=>parseInt(ie,10)),e.context.poly(E,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{Ze(`[SVG parser] <${i.nodeName}> elements unsupported`);break}}h&&(t=null);for(let ie=0;ie<o.length;ie++)ig(o[ie],e,t,s)}function Vv(i){return yt.isColorLike(i)}function wp(i){return i instanceof $a}function Sp(i){return i instanceof Qn}function Yv(i){return i instanceof Le}function Xv(i,e,t){const s=yt.shared.setValue(e??0);return i.color=s.toNumber(),i.alpha=s.alpha===1?t.alpha:s.alpha,i.texture=Le.WHITE,{...t,...i}}function qv(i,e,t){return i.texture=e,{...t,...i}}function Cp(i,e,t){return i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,{...t,...i}}function kp(i,e,t){return e.buildGradient(),i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,i.textureSpace=e.textureSpace,{...t,...i}}function Kv(i,e){const t={...e,...i},s=yt.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function qr(i,e){if(i==null)return null;const t={},s=i;return Vv(i)?Xv(t,i,e):Yv(i)?qv(t,i,e):wp(i)?Cp(t,i,e):Sp(i)?kp(t,i,e):s.fill&&wp(s.fill)?Cp(s,s.fill,e):s.fill&&Sp(s.fill)?kp(s,s.fill,e):Kv(s,e)}function ja(i,e){const{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...f}=e,p=qr(i,f);return p?{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...p}:null}const Qv=new Ft,bp=new Re,Oc=class In extends Sn{constructor(){super(...arguments),this.uid=lt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Kn,this._transform=new Re,this._fillStyle={...In.defaultFillStyle},this._strokeStyle={...In.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new wn,this._boundsDirty=!0}clone(){const e=new In;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=qr(e,In.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=ja(e,In.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=qr(e,In.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=qr(e,In.defaultStrokeStyle),this}texture(e,t,s,o,l,u){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:o||0,dw:l||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?yt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Kn,this}fill(e,t){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&(o==null?void 0:o.action)==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(Me(Ue,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=qr(e,In.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Ft.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&(s==null?void 0:s.action)==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=ja(e,In.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,o,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,s,o,l,u),this}arcTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(e,t,s,o,l,u,h){this._tick++;const f=this._transform;return this._activePath.arcToSvg(e,t,s,o,l,f.a*u+f.c*h+f.tx,f.b*u+f.d*h+f.ty),this}bezierCurveTo(e,t,s,o,l,u,h){this._tick++;const f=this._transform;return this._activePath.bezierCurveTo(f.a*e+f.c*t+f.tx,f.b*e+f.d*t+f.ty,f.a*s+f.c*o+f.tx,f.b*s+f.d*o+f.ty,f.a*l+f.c*u+f.tx,f.b*l+f.d*u+f.ty,h),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,s,o){return this._tick++,this._activePath.ellipse(e,t,s,o,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*e+s.c*t+s.tx,u=s.b*e+s.d*t+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(e,t,s,o){return this._tick++,this._activePath.rect(e,t,s,o,this._transform.clone()),this}roundRect(e,t,s,o,l){return this._tick++,this._activePath.roundRect(e,t,s,o,l,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(e,t,s,o,l,u),this}roundPoly(e,t,s,o,l,u){return this._tick++,this._activePath.roundPoly(e,t,s,o,l,u),this}roundShape(e,t,s,o){return this._tick++,this._activePath.roundShape(e,t,s,o),this}filletRect(e,t,s,o,l){return this._tick++,this._activePath.filletRect(e,t,s,o,l),this}chamferRect(e,t,s,o,l,u){return this._tick++,this._activePath.chamferRect(e,t,s,o,l,u),this}star(e,t,s,o,l=0,u=0){return this._tick++,this._activePath.star(e,t,s,o,l,u,this._transform.clone()),this}svg(e){return this._tick++,Hv(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,o,l,u){return e instanceof Re?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,o,l,u),this)}transform(e,t,s,o,l,u){return e instanceof Re?(this._transform.append(e),this):(bp.set(e,t,s,o,l,u),this._transform.append(bp),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],o=s.action;if(o==="fill"){const l=s.data;e.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;e.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,h=l.style.width*(1-u),f=l.path.bounds;e.addFrame(f.minX-h,f.minY-h,f.maxX+h,f.maxY+h)}}return e}containsPoint(e){var o;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let l=0;l<t.length;l++){const u=t[l],h=u.data,f=h.path;if(!u.action||!f)continue;const p=h.style,m=f.shapePath.shapePrimitives;for(let y=0;y<m.length;y++){const _=m[y].shape;if(!p||!_)continue;const v=m[y].transform,S=v?v.applyInverse(e,Qv):e;if(u.action==="fill")s=_.contains(S.x,S.y);else{const w=p;s=_.strokeContains(S.x,S.y,w.width,w.alignment)}const k=h.hole;if(k){const w=(o=k.shapePath)==null?void 0:o.shapePrimitives;if(w)for(let P=0;P<w.length;P++)w[P].shape.contains(S.x,S.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Oc.defaultFillStyle={color:16777215,alpha:1,texture:Le.WHITE,matrix:null,fill:null,textureSpace:"local"};Oc.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Le.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let ln=Oc;const Nc=class bi extends Sn{constructor(e={}){super(),this.uid=lt("textStyle"),this._tick=0,Zv(e);const t={...bi.defaultTextStyle,...e};for(const s in t){const o=s;this[o]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...bi.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...bi.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...ln.defaultFillStyle,...e},()=>{this._fill=qr({...this._originalFill},ln.defaultFillStyle)})),this._fill=qr(e===0?"black":e,ln.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...ln.defaultStrokeStyle,...e},()=>{this._stroke=ja({...this._originalStroke},ln.defaultStrokeStyle)})),this._stroke=ja(e,ln.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=bi.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new bi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){var s,o,l,u;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const h=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(h),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(h),(l=this._stroke)!=null&&l.texture&&this._stroke.texture.destroy(h),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(h)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,o,l)=>(s[o]===l||(s[o]=l,t==null||t(o,l),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(yt.isColorLike(e)||e instanceof Qn||e instanceof $a)}};Nc.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Nc.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Da=Nc;function Zv(i){const e=i;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=Da.defaultDropShadow;i.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Me(Ue,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(yt.isColorLike(t))s.color=t;else if(t instanceof Qn||t instanceof $a)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");i.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Me(Ue,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Ze("The number of fill colors must match the number of fill gradient stops.");const t=new Qn({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),o=e.fill.map(l=>yt.shared.setValue(l).toNumber());s.forEach((l,u)=>{t.addColorStop(l,o[u])}),i.fill={fill:t}}}class Jv{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=Je.get().createCanvas();s.width=e,s.height=t;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=Fa(e),t=Fa(t);const o=(e<<17)+(t<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(e,t)),l}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:o}=t,l=(s<<17)+(o<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,o),this._canvasPool[l].push(e)}clear(){this._canvasPool={}}}const Ac=new Jv;Qs.register(Ac);const Ap=1e5;function Pp(i,e,t,s=0){if(i.texture===Le.WHITE&&!i.fill)return yt.shared.setValue(i.color).setAlpha(i.alpha??1).toHexa();if(i.fill){if(i.fill instanceof $a){const o=i.fill,l=e.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(Re.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(i.fill instanceof Qn){const o=i.fill,l=o.type==="linear",u=o.textureSpace==="local";let h=1,f=1;u&&t&&(h=t.width+s,f=t.height+s);let p,m=!1;if(l){const{start:y,end:_}=o;p=e.createLinearGradient(y.x*h,y.y*f,_.x*h,_.y*f),m=Math.abs(_.x-y.x)<Math.abs((_.y-y.y)*.1)}else{const{center:y,innerRadius:_,outerCenter:v,outerRadius:S}=o;p=e.createRadialGradient(y.x*h,y.y*f,_*h,v.x*h,v.y*f,S*h)}if(m&&u&&t){const y=t.lineHeight/f;for(let _=0;_<t.lines.length;_++){const v=(_*t.lineHeight+s/2)/f;o.colorStops.forEach(S=>{const k=v+S.offset*y;p.addColorStop(Math.floor(k*Ap)/Ap,yt.shared.setValue(S.color).toHex())})}}else o.colorStops.forEach(y=>{p.addColorStop(y.offset,yt.shared.setValue(y.color).toHex())});return p}}else{const o=e.createPattern(i.texture.source.resource,"repeat"),l=i.matrix.copyTo(Re.shared);return l.scale(i.texture.frame.width,i.texture.frame.height),o.setTransform(l),o}return Ze("FillStyle not recognised",i),"red"}const sg=class og extends Nm{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...og.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Le.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=wc(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof La?t.textureStyle:new La(t.textureStyle)),this.fontMetrics=Ea.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){var w,P;const t=Ea.graphemeSegmenter(e).filter(T=>!this._currentChars.includes(T)).filter((T,E,I)=>I.indexOf(T)===E);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const h=this._style;let f=this._currentX,p=this._currentY,m=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,_=this._padding*y;let v=!1;const S=o.width/this.resolution,k=o.height/this.resolution;for(let T=0;T<t.length;T++){const E=t[T],I=Ea.measureText(E,h,o,!1);I.lineHeight=I.height;const U=I.width*y,D=Math.ceil((h.fontStyle==="italic"?2:1)*U),O=I.height*y,te=D+_*2,ie=O+_*2;if(v=!1,E!==`
`&&E!=="\r"&&E!=="	"&&E!==" "&&(v=!0,m=Math.ceil(Math.max(ie,m))),f+te>S&&(p+=m,m=ie,f=0,p+m>k)){u.update();const ee=this._nextPage();o=ee.canvasAndContext.canvas,l=ee.canvasAndContext.context,u=ee.texture.source,f=0,p=0,m=0}const X=U/y-(((w=h.dropShadow)==null?void 0:w.distance)??0)-(((P=h._stroke)==null?void 0:P.width)??0);if(this.chars[E]={id:E.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:X,kerning:{}},v){this._drawGlyph(l,I,f+_,p+_,y,h);const ee=u.width*y,Se=u.height*y,Ce=new ct(f/ee*u.width,p/Se*u.height,te/ee*u.width,ie/Se*u.height);this.chars[E].texture=new Le({source:u,frame:Ce}),f+=Math.ceil(te)}}u.update(),this._currentX=f,this._currentY=p,this._currentMaxCharHeight=m,this._skipKerning&&this._applyKerning(t,l)}get pageTextures(){return Me(Ue,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let o=0;o<e.length;o++){const l=e[o];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let f=s[l];f||(f=s[l]=t.measureText(l).width);let p=s[h];p||(p=s[h]=t.measureText(h).width);let m=t.measureText(l+h).width,y=m-(f+p);y&&(this.chars[l].kerning[h]=y),m=t.measureText(l+h).width,y=m-(f+p),y&&(this.chars[h].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=Ac.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Le({source:new Kr({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:t,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=wc(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const o=t._stroke,l=(o==null?void 0:o.width)??0;if(o&&(e.lineWidth=l,e.lineJoin=o.join,e.miterLimit=o.miterLimit,e.strokeStyle=Pp(o,e)),t._fill&&(e.fillStyle=Pp(t._fill,e)),t.dropShadow){const u=t.dropShadow,h=yt.shared.setValue(u.color).toArray(),f=u.blur*s,p=u.distance*s;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,e.shadowBlur=f,e.shadowOffsetX=Math.cos(u.angle)*p,e.shadowOffsetY=Math.sin(u.angle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,o,l,u){const h=t.text,f=t.fontProperties,p=u._stroke,m=((p==null?void 0:p.width)??0)*l,y=s+m/2,_=o-m/2,v=f.descent*l,S=t.lineHeight*l;let k=!1;u.stroke&&m&&(k=!0,e.strokeText(h,y,_+S-v));const{shadowBlur:w,shadowOffsetX:P,shadowOffsetY:T}=e;u._fill&&(k&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(h,y,_+S-v)),k&&(e.shadowBlur=w,e.shadowOffsetX=P,e.shadowOffsetY=T)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];Ac.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};sg.defaultOptions={textureSize:512,style:new Da,mipmap:!0};let Tp=sg;function e1(i,e,t,s){const o={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=t.baseLineOffset;let l=o.lines[0],u=null,h=!0;const f={width:0,start:0,index:0,positions:[],chars:[]},p=t.baseMeasurementFontSize/e.fontSize,m=e.letterSpacing*p,y=e.wordWrapWidth*p,_=e.lineHeight?e.lineHeight*p:t.lineHeight,v=e.wordWrap&&e.breakWords,S=P=>{const T=l.width;for(let E=0;E<f.index;E++){const I=P.positions[E];l.chars.push(P.chars[E]),l.charPositions.push(I+T)}l.width+=P.width,h=!1,f.width=0,f.index=0,f.chars.length=0},k=()=>{let P=l.chars.length-1;if(s){let T=l.chars[P];for(;T===" ";)l.width-=t.chars[T].xAdvance,T=l.chars[--P]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,o.lines.push(l),o.height+=_},w=P=>P-m>y;for(let P=0;P<i.length+1;P++){let T;const E=P===i.length;E||(T=i[P]);const I=t.chars[T]||t.chars[" "];if(/(?:\s)/.test(T)||T==="\r"||T===`
`||E){if(!h&&e.wordWrap&&w(l.width+f.width)?(k(),S(f),E||l.charPositions.push(0)):(f.start=l.width,S(f),E||l.charPositions.push(0)),T==="\r"||T===`
`)k();else if(!E){const te=I.xAdvance+(I.kerning[u]||0)+m;l.width+=te,l.spaceWidth=te,l.spacesIndex.push(l.charPositions.length),l.chars.push(T)}}else{const O=I.kerning[u]||0,te=I.xAdvance+O+m;v&&w(l.width+f.width+te)&&(S(f),k()),f.positions[f.index++]=f.width+O,f.chars.push(T),f.width+=te}u=T}return k(),e.align==="center"?t1(o):e.align==="right"?n1(o):e.align==="justify"&&r1(o),o}function t1(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width/2-t.width/2;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function n1(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width-t.width;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function r1(i){const e=i.width;for(let t=0;t<i.lines.length;t++){const s=i.lines[t];let o=0,l=s.spacesIndex[o++],u=0;const h=s.spacesIndex.length,p=(e-s.width)/h;for(let m=0;m<s.charPositions.length;m++)m===l&&(l=s.spacesIndex[o++],u+=p),s.charPositions[m]+=u}}function i1(i){if(i==="")return[];typeof i=="string"&&(i=[i]);const e=[];for(let t=0,s=i.length;t<s;t++){const o=i[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let h=l,f=u;h<=f;h++)e.push(String.fromCharCode(h))}else e.push(...Array.from(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let Aa=0;class s1{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=$m(1e3)}getFont(e,t){var u;let s=`${t.fontFamily}-bitmap`,o=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,o=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,o=!1),!Qe.has(s)){const h=Object.create(t);h.lineHeight=0;const f=new Tp({style:h,overrideFill:o,overrideSize:!0,...this.defaultOptions});Aa++,Aa>50&&Ze("BitmapText",`You have dynamically created ${Aa} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),f.once("destroy",()=>{Aa--,Qe.remove(s)}),Qe.set(s,f)}const l=Qe.get(s);return(u=l.ensureCharacters)==null||u.call(l,e),l}getLayout(e,t,s=!0){const o=this.getFont(e,t),l=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=Ea.graphemeSegmenter(e),h=e1(u,t,o,s);return this.measureCache.set(l,h),h}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){var p,m,y,_;let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:(p=e[2])==null?void 0:p.chars,resolution:(m=e[2])==null?void 0:m.resolution,padding:(y=e[2])==null?void 0:y.padding,skipKerning:(_=e[2])==null?void 0:_.skipKerning},Me(Ue,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t==null?void 0:t.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const o=t.style,l=o instanceof Da?o:new Da(o),u=t.dynamicFill??this._canUseTintForStyle(l),h=new Tp({style:l,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),f=i1(t.chars);return h.ensureCharacters(f.join("")),Qe.set(`${s}-bitmap`,h),h.once("destroy",()=>Qe.remove(`${s}-bitmap`)),h}uninstall(e){const t=`${e}-bitmap`,s=Qe.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const Ep=new s1;class ag extends Nm{constructor(e,t){super();const{textures:s,data:o}=e;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:h,source:f,rotate:p}=s[u.page],m=Ge.transformRectCoords(u,h,p,new ct),y=new Le({frame:m,orig:new ct(0,0,u.width,u.height),source:f,rotate:p});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){Ep.install(e)}static uninstall(e){Ep.uninstall(e)}}const Ju={test(i){return typeof i=="string"&&i.startsWith("info face=")},parse(i){const e=i.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in e){const _=e[y].match(/^[a-z]+/gm)[0],v=e[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),S={};for(const k in v){const w=v[k].split("="),P=w[0],T=w[1].replace(/"/gm,""),E=parseFloat(T),I=isNaN(E)?T:E;S[P]=I}t[_].push(S)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=t.info,[l]=t.common,[u]=t.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const h=t.page;for(let y=0;y<h.length;y++)s.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const f={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const p=t.char;for(let y=0;y<p.length;y++){const _=p[y],v=parseInt(_.id,10);let S=_.letter??_.char??String.fromCharCode(v);S==="space"&&(S=" "),f[v]=S,s.chars[S]={id:v,page:parseInt(_.page,10)||0,x:parseInt(_.x,10),y:parseInt(_.y,10),width:parseInt(_.width,10),height:parseInt(_.height,10),xOffset:parseInt(_.xoffset,10),yOffset:parseInt(_.yoffset,10),xAdvance:parseInt(_.xadvance,10),kerning:{}}}const m=t.kerning||[];for(let y=0;y<m.length;y++){const _=parseInt(m[y].first,10),v=parseInt(m[y].second,10),S=parseInt(m[y].amount,10);s.chars[f[v]].kerning[f[_]]=S}return s}},Mp={test(i){const e=i;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(i){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=i.getElementsByTagName("info")[0],s=i.getElementsByTagName("common")[0],o=i.getElementsByTagName("distanceField")[0];o&&(e.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=i.getElementsByTagName("page"),u=i.getElementsByTagName("char"),h=i.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let p=0;p<l.length;p++)e.pages.push({id:parseInt(l[p].getAttribute("id"),10)||0,file:l[p].getAttribute("file")});const f={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let p=0;p<u.length;p++){const m=u[p],y=parseInt(m.getAttribute("id"),10);let _=m.getAttribute("letter")??m.getAttribute("char")??String.fromCharCode(y);_==="space"&&(_=" "),f[y]=_,e.chars[_]={id:y,page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xOffset:parseInt(m.getAttribute("xoffset"),10),yOffset:parseInt(m.getAttribute("yoffset"),10),xAdvance:parseInt(m.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<h.length;p++){const m=parseInt(h[p].getAttribute("first"),10),y=parseInt(h[p].getAttribute("second"),10),_=parseInt(h[p].getAttribute("amount"),10);e.chars[f[y]].kerning[f[m]]=_}return e}},Rp={test(i){return typeof i=="string"&&i.match(/<font(\s|>)/)?Mp.test(Je.get().parseXML(i)):!1},parse(i){return Mp.parse(Je.get().parseXML(i))}},o1=[".xml",".fnt"],a1={extension:{type:fe.CacheParser,name:"cacheBitmapFont"},test:i=>i instanceof ag,getCacheableAssets(i,e){const t={};return i.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},l1={extension:{type:fe.LoadParser,priority:Pr.Normal},name:"loadBitmapFont",id:"bitmap-font",test(i){return o1.includes(Qt.extname(i).toLowerCase())},async testParse(i){return Ju.test(i)||Rp.test(i)},async parse(i,e,t){const s=Ju.test(i)?Ju.parse(i):Rp.parse(i),{src:o}=e,{pages:l}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const _=l[y].file;let v=Qt.join(Qt.dirname(o),_);v=pc(v,o),u.push({src:v,data:h})}const f=await t.load(u),p=u.map(y=>f[y.src]);return new ag({data:s,textures:p},o)},async load(i,e){return await(await Je.get().fetch(i)).text()},async unload(i,e,t){await Promise.all(i.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),i.destroy()}};class u1{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const c1={extension:{type:fe.CacheParser,name:"cacheTextureArray"},test:i=>Array.isArray(i)&&i.every(e=>e instanceof Le),getCacheableAssets:(i,e)=>{const t={};return i.forEach(s=>{e.forEach((o,l)=>{t[s+(l===0?"":l+1)]=o})}),t}};async function lg(i){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(i)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const h1={extension:{type:fe.DetectionParser,priority:1},test:async()=>lg("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(e=>e!=="avif")},Ip=["png","jpg","jpeg"],d1={extension:{type:fe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...Ip],remove:async i=>i.filter(e=>!Ip.includes(e))},f1="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Ua(i){return f1?!1:document.createElement("video").canPlayType(i)!==""}const p1={extension:{type:fe.DetectionParser,priority:0},test:async()=>Ua("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(e=>e!=="mp4"&&e!=="m4v")},m1={extension:{type:fe.DetectionParser,priority:0},test:async()=>Ua("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(e=>e!=="ogv")},g1={extension:{type:fe.DetectionParser,priority:0},test:async()=>Ua("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(e=>e!=="webm")},y1={extension:{type:fe.DetectionParser,priority:0},test:async()=>lg("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(e=>e!=="webp")},ug=class Ma{constructor(){this.loadOptions={...Ma.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{var u,h;let o=null,l=null;if((t.parser||t.loadParser)&&(l=this._parserHash[t.parser||t.loadParser],t.loadParser&&Ze(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),l||Ze(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!l){for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];if(p.load&&((u=p.test)!=null&&u.call(p,e,t,this))){l=p;break}}if(!l)return Ze(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(e,t,this),s.parser=l;for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];p.parse&&p.parse&&await((h=p.testParse)==null?void 0:h.call(p,o,t,this))&&(o=await p.parse(o,t,this)||o,s.parser=p)}return o})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...Ma.defaultOptions,...this.loadOptions,onProgress:t}:{...Ma.defaultOptions,...this.loadOptions,...t||{}},{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:f}=s;let p=0;const m={},y=Ba(e),_=_n(e,k=>({alias:[k],src:k,data:{}})),v=_.reduce((k,w)=>k+(w.progressSize||1),0),S=_.map(async k=>{const w=Qt.toAbsolute(k.src);m[k.src]||(await this._loadAssetWithRetry(w,k,{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:f},m),p+=k.progressSize||1,o&&o(p/v))});return await Promise.all(S),y?m[_[0].src]:m}async unload(e){const s=_n(e,o=>({alias:[o],src:o})).map(async o=>{var h,f;const l=Qt.toAbsolute(o.src),u=this.promiseCache[l];if(u){const p=await u.promise;delete this.promiseCache[l],await((f=(h=u.parser)==null?void 0:h.unload)==null?void 0:f.call(h,p,o,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?Ze("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&Ze(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,o){let l=0;const{onError:u,strategy:h,retryCount:f,retryDelay:p}=s,m=y=>new Promise(_=>setTimeout(_,y));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),o[t.src]=await this.promiseCache[e].promise;return}catch(y){delete this.promiseCache[e],delete o[t.src],l++;const _=h!=="retry"||l>f;if(h==="retry"&&!_){u&&u(y,t),await m(p);continue}if(h==="skip"){u&&u(y,t);return}throw u&&u(y,t),new Error(`[Loader.load] Failed to load ${e}.
${y}`)}}};ug.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let x1=ug;function Bi(i,e){if(Array.isArray(e)){for(const t of e)if(i.startsWith(`data:${t}`))return!0;return!1}return i.startsWith(`data:${e}`)}function zi(i,e){const t=i.split("?")[0],s=Qt.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const _1=".json",v1="application/json",w1={extension:{type:fe.LoadParser,priority:Pr.Low},name:"loadJson",id:"json",test(i){return Bi(i,v1)||zi(i,_1)},async load(i){return await(await Je.get().fetch(i)).json()}},S1=".txt",C1="text/plain",k1={name:"loadTxt",id:"text",extension:{type:fe.LoadParser,priority:Pr.Low,name:"loadTxt"},test(i){return Bi(i,C1)||zi(i,S1)},async load(i){return await(await Je.get().fetch(i)).text()}},b1=["normal","bold","100","200","300","400","500","600","700","800","900"],A1=[".ttf",".otf",".woff",".woff2"],P1=["font/ttf","font/otf","font/woff","font/woff2"],T1=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function E1(i){const e=Qt.extname(i),o=Qt.basename(i,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let l=o.length>0;for(const h of o)if(!h.match(T1)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const M1=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function R1(i){return M1.test(i)?i:encodeURI(i)}const I1={extension:{type:fe.LoadParser,priority:Pr.Low},name:"loadWebFont",id:"web-font",test(i){return Bi(i,P1)||zi(i,A1)},async load(i,e){var s,o,l;const t=Je.get().getFontFaceSet();if(t){const u=[],h=((s=e.data)==null?void 0:s.family)??E1(i),f=((l=(o=e.data)==null?void 0:o.weights)==null?void 0:l.filter(m=>b1.includes(m)))??["normal"],p=e.data??{};for(let m=0;m<f.length;m++){const y=f[m],_=new FontFace(h,`url(${R1(i)})`,{...p,weight:y});await _.load(),t.add(_),u.push(_)}return Qe.has(`${h}-and-url`)?Qe.get(`${h}-and-url`).entries.push({url:i,faces:u}):Qe.set(`${h}-and-url`,{entries:[{url:i,faces:u}]}),u.length===1?u[0]:u}return Ze("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){const e=Array.isArray(i)?i:[i],t=e[0].family,s=Qe.get(`${t}-and-url`),o=s.entries.find(l=>l.faces.some(u=>e.indexOf(u)!==-1));o.faces=o.faces.filter(l=>e.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),e.forEach(l=>{Je.get().getFontFaceSet().delete(l)}),s.entries.length===0&&Qe.remove(`${t}-and-url`)}};function $c(i,e=1){var s;const t=(s=Li.RETINA_PREFIX)==null?void 0:s.exec(i);return t?parseFloat(t[1]):e}function Gc(i,e,t){i.label=t,i._sourceOrigin=t;const s=new Le({source:i,label:t}),o=()=>{delete e.promiseCache[t],Qe.has(t)&&Qe.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(Ze("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{i.destroyed||(Ze("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const F1=".svg",L1="image/svg+xml",B1={extension:{type:fe.LoadParser,priority:Pr.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(i){return Bi(i,L1)||zi(i,F1)},async load(i,e,t){var s;return((s=e.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?j1(i):z1(i,e,t,this.config.crossOrigin)},unload(i){i.destroy(!0)}};async function z1(i,e,t,s){var w,P,T;const o=await Je.get().fetch(i),l=Je.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=((w=e.data)==null?void 0:w.width)??l.width,h=((P=e.data)==null?void 0:P.height)??l.height,f=((T=e.data)==null?void 0:T.resolution)||$c(i),p=Math.ceil(u*f),m=Math.ceil(h*f),y=Je.get().createCanvas(p,m),_=y.getContext("2d");_.imageSmoothingEnabled=!0,_.imageSmoothingQuality="high",_.drawImage(l,0,0,u*f,h*f);const{parseAsGraphicsContext:v,...S}=e.data??{},k=new Kr({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:f,...S});return Gc(k,t,i)}async function j1(i){const t=await(await Je.get().fetch(i)).text(),s=new ln;return s.svg(t),s}const D1=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Ti=null,Pc=class{constructor(){Ti||(Ti=URL.createObjectURL(new Blob([D1],{type:"application/javascript"}))),this.worker=new Worker(Ti)}};Pc.revokeObjectURL=function(){Ti&&(URL.revokeObjectURL(Ti),Ti=null)};const O1=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Ei=null;class cg{constructor(){Ei||(Ei=URL.createObjectURL(new Blob([O1],{type:"application/javascript"}))),this.worker=new Worker(Ei)}}cg.revokeObjectURL=function(){Ei&&(URL.revokeObjectURL(Ei),Ei=null)};let Fp=0,ec;class N1{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Pc;t.addEventListener("message",s=>{t.terminate(),Pc.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){var s;return this._run("loadImageBitmap",[e,(s=t==null?void 0:t.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){ec===void 0&&(ec=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<ec&&(this._createdWorkers++,e=new cg().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:e,arguments:t,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[Fp]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Fp++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const Lp=new N1,$1=[".jpeg",".jpg",".png",".webp",".avif"],G1=["image/jpeg","image/png","image/webp","image/avif"];async function U1(i,e){var o;const t=await Je.get().fetch(i);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${t.status} ${t.statusText}`);const s=await t.blob();return((o=e==null?void 0:e.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const hg={name:"loadTextures",id:"texture",extension:{type:fe.LoadParser,priority:Pr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return Bi(i,G1)||zi(i,$1)},async load(i,e,t){var l;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Lp.isImageBitmapSupported()?s=await Lp.loadImageBitmap(i,e):s=await U1(i,e):s=await new Promise((u,h)=>{s=Je.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=i,s.complete?u(s):(s.onload=()=>{u(s)},s.onerror=h)});const o=new Kr({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((l=e.data)==null?void 0:l.resolution)||$c(i),...e.data});return Gc(o,t,i)},unload(i){i.destroy(!0)}},W1=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let tc,nc;function H1(i,e,t){t===void 0&&!e.startsWith("data:")?i.crossOrigin=Y1(e):t!==!1&&(i.crossOrigin=typeof t=="string"?t:"anonymous")}function V1(i){return new Promise((e,t)=>{i.addEventListener("canplaythrough",s),i.addEventListener("error",o),i.load();function s(){l(),e()}function o(u){l(),t(u)}function l(){i.removeEventListener("canplaythrough",s),i.removeEventListener("error",o)}})}function Y1(i,e=globalThis.location){if(i.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(i,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function X1(){const i=[],e=[];for(const t of W1){const s=$s.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;Ua(s)&&(i.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:i,validVideoMime:e}}const q1={name:"loadVideo",id:"video",extension:{type:fe.LoadParser,name:"loadVideo"},test(i){if(!tc||!nc){const{validVideoExtensions:s,validVideoMime:o}=X1();tc=s,nc=o}const e=Bi(i,nc),t=zi(i,tc);return e||t},async load(i,e,t){var f,p;const s={...$s.defaultOptions,resolution:((f=e.data)==null?void 0:f.resolution)||$c(i),alphaMode:((p=e.data)==null?void 0:p.alphaMode)||await mm(),...e.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(m=>{const y=l[m];y!==void 0&&o.setAttribute(m,y)}),s.muted===!0&&(o.muted=!0),H1(o,i,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(i.startsWith("data:"))h=i.slice(5,i.indexOf(";"));else if(!i.startsWith("blob:")){const m=i.split("?")[0].slice(i.lastIndexOf(".")+1).toLowerCase();h=$s.MIME_TYPES[m]||`video/${m}`}return u.src=i,h&&(u.type=h),new Promise(m=>{const y=async()=>{const _=new $s({...s,resource:o});o.removeEventListener("canplay",y),e.data.preload&&await V1(o),m(Gc(_,t,i))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",y),o.appendChild(u)})},unload(i){i.destroy(!0)}},dg={extension:{type:fe.ResolveParser,name:"resolveTexture"},test:hg.test,parse:i=>{var e;return{resolution:parseFloat(((e=Li.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:i.split(".").pop(),src:i}}},K1={extension:{type:fe.ResolveParser,priority:-2,name:"resolveJson"},test:i=>Li.RETINA_PREFIX.test(i)&&i.endsWith(".json"),parse:dg.parse};class Q1{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Li,this.loader=new x1,this.cache=Qe,this._backgroundLoader=new u1(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var l,u;if(this._initialized){Ze("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let h=e.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}const t=((l=e.texturePreference)==null?void 0:l.resolution)??1,s=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:(u=e.texturePreference)==null?void 0:u.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=Ba(e),o=_n(e).map(h=>{if(typeof h!="string"){const f=this.resolver.getAlias(h);return f.some(p=>!this.resolver.hasKey(p))&&this.add(h),Array.isArray(f)?f[0]:f}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,t);return s?u[o[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const o=this.resolver.resolveBundle(e),l={},u=Object.keys(o);let h=0;const f=[],p=()=>{t==null||t(f.reduce((y,_)=>y+_,0)/h)},m=u.map((y,_)=>{const v=o[y],S=Object.values(v),w=[...new Set(S.flat())].reduce((P,T)=>P+(T.progressSize||1),0);return f.push(0),h+=w,this._mapLoadToResolve(v,P=>{f[_]=P*w,p()}).then(P=>{l[y]=P})});return await Promise.all(m),s?l[e[0]]:l}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Qe.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=Qe.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,t);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const h=o[u.src],f=[u.src];u.alias&&f.push(...u.alias),f.forEach(p=>{l[p]=h}),Qe.set(f,h)}),l}async unload(e){this._initialized||await this.init();const t=_n(e).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=_n(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{Qe.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,o)=>t.indexOf(s)===o),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const Os=new Q1;bt.handleByList(fe.LoadParser,Os.loader.parsers).handleByList(fe.ResolveParser,Os.resolver.parsers).handleByList(fe.CacheParser,Os.cache.parsers).handleByList(fe.DetectionParser,Os.detections);bt.add(c1,d1,h1,y1,p1,m1,g1,w1,k1,I1,B1,hg,q1,l1,a1,dg,K1);const Bp={loader:fe.LoadParser,resolver:fe.ResolveParser,cache:fe.CacheParser,detection:fe.DetectionParser};bt.handle(fe.Asset,i=>{const e=i.ref;Object.entries(Bp).filter(([t])=>!!e[t]).forEach(([t,s])=>bt.add(Object.assign(e[t],{extension:e[t].extension??s})))},i=>{const e=i.ref;Object.keys(Bp).filter(t=>!!e[t]).forEach(t=>bt.remove(e[t]))});class Ks extends om{constructor(e){e instanceof ln&&(e={context:e});const{context:t,roundPixels:s,...o}=e||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new ln,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Ks(this._context.clone()):(this._ownedContext=null,new Ks(this._context))}lineStyle(e,t,s){Me(Ue,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return e&&(o.width=e),t&&(o.color=t),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(e,t){Me(Ue,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){Me(Ue,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==ln.defaultStrokeStyle.width||e.color!==ln.defaultStrokeStyle.color||e.alpha!==ln.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Me(Ue,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Me(Ue,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Me(Ue,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Me(Ue,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Me(Ue,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Me(Ue,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}bt.add(ux,cx);const Mn={nom:{nomcomplet:"Test Hero"},niveauGlobal:1,classe:{1:{classeId:"fighter"}},pvActuels:12,pvMax:12,CA:16,caracs:{force:{FOR:16},dexterite:{DEX:14,modDEX:2},constitution:{CON:14}}},rc="/assets/gentil-BhOEUPEC.svg",ic="/assets/mechant-CDjpH-O6.svg",Z1=["./brute.json","./archer.json","./assassin.json","./ghost.json"],zp={types:Z1},J1="brute",ew="Brute",tw="Frontliner robuste qui avance pour engager le joueur.",nw="brute",rw={hp:10,moveRange:3,attackDamage:2},iw={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},sw={id:J1,label:ew,description:tw,aiRole:nw,baseStats:rw,movement:iw},ow="archer",aw="Archer",lw="Tireur qui prefere garder une distance de securite avant de frapper.",uw="archer",cw={hp:7,moveRange:2,attackDamage:2},hw={type:"ground",speed:2,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},dw={id:ow,label:aw,description:lw,aiRole:uw,baseStats:cw,movement:hw},fw="assassin",pw="Assassin",mw="Frappeur rapide qui cherche a se rapprocher pour porter un coup decisif.",gw="assassin",yw={hp:6,moveRange:3,attackDamage:3},xw={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},_w={id:fw,label:pw,description:mw,aiRole:gw,baseStats:yw,movement:xw},vw="ghost",ww="Fantome",Sw="Esprit intangible capable de traverser les autres creatures.",Cw="ghost",kw={hp:8,moveRange:4,attackDamage:3},bw={type:"ghost",speed:4,canPassThroughWalls:!0,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},Aw={id:vw,label:ww,description:Sw,aiRole:Cw,baseStats:kw,movement:bw},Pw=["./melee-strike.json","./dash.json","./second-wind.json","./throw-dagger.json"],jp={actions:Pw},Tw="melee-strike",Ew="Frappe basique",Mw="Attaque de melee simple contre une cible a 1 case.",Rw="attack",Iw={actionType:"action",movementCost:0},Fw={target:"enemy",range:{min:0,max:1,shape:"single"},maxTargets:1,requiresLos:!0},Lw={perTurn:1,perEncounter:null,resource:null},Bw=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_max",target:"primary",max:1,reason:"Portee de melee uniquement."},{type:"target_alive",target:"primary",reason:"La cible doit avoir des PV restants."}],zw={bonus:5,critRange:20},jw={formula:"1d6+3",critRule:"double-dice",damageType:"slashing"},Dw=[{type:"damage",target:"primary",formula:"1d6 + modFOR",damageType:"slashing"},{type:"log",message:"Frappe basique inflige 1d6+FOR a la cible."}],Ow={priority:"finish_low_hp_target",successLog:"Attaque de melee effectuee.",failureLog:"Cible hors portee ou deja a terre."},Nw=["martial","arme","starter"],$w={id:Tw,name:Ew,summary:Mw,category:Rw,actionCost:Iw,targeting:Fw,usage:Lw,conditions:Bw,attack:zw,damage:jw,effects:Dw,aiHints:Ow,tags:Nw},Gw="dash",Uw="Course",Ww="Transforme l'action en 3 cases de mouvement en plus.",Hw="movement",Vw={actionType:"action",movementCost:0},Yw={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},Xw={perTurn:1,perEncounter:null,resource:null},qw=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."}],Kw=[{type:"modify_path_limit",target:"self",delta:3,duration:"this_turn"},{type:"log",message:"Course: +3 cases de mouvement pour ce tour."}],Qw={priority:"close_gap",successLog:"Course utilisee pour approcher.",failureLog:"Deja a portee, course ignoree."},Zw=["mobilite","deplacement"],Jw={id:Gw,name:Uw,summary:Ww,category:Hw,actionCost:Vw,targeting:Yw,usage:Xw,conditions:qw,effects:Kw,aiHints:Qw,tags:Zw},eS="second-wind",tS="Second souffle",nS="Restaure une partie des PV en bonus action.",rS="support",iS={actionType:"bonus",movementCost:0},sS={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},oS={perTurn:null,perEncounter:1,resource:null},aS=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"stat_below_percent",who:"self",stat:"hp",percentMax:.75,reason:"Economiser tant que les PV sont hauts."}],lS=[{type:"heal",target:"self",formula:"1d10 + niveau",min:1},{type:"temp_hp",target:"self",amount:2,duration:"end_of_turn"},{type:"log",message:"Second souffle: soigne 1d10 + niveau."}],uS={priority:"survive",successLog:"Second souffle declenche.",failureLog:"PV trop hauts ou tour non joueur."},cS=["soin","defense","survie"],hS={id:eS,name:tS,summary:nS,category:rS,actionCost:iS,targeting:sS,usage:oS,conditions:aS,effects:lS,aiHints:uS,tags:cS},dS="throw-dagger",fS="Lancer de dague",pS="Attaque a distance courte avec une dague a lancer.",mS="attack",gS={actionType:"action",movementCost:0},yS={target:"enemy",range:{min:1,max:4,shape:"single"},maxTargets:1,requiresLos:!0},xS={perTurn:1,perEncounter:null,resource:{name:"dagger",pool:"bandolier",min:1}},_S=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_between",target:"primary",min:1,max:4,reason:"Hors de melee mais a portee de lancer."},{type:"resource_at_least",resource:"dagger",pool:"bandolier",value:1,reason:"Besoin d'une dague a lancer."}],vS={bonus:4,critRange:20},wS={formula:"1d4+2",critRule:"double-dice",damageType:"piercing"},SS=[{type:"damage",target:"primary",formula:"1d4 + modDEX",damageType:"piercing"},{type:"resource_spend",resource:"dagger",pool:"bandolier",amount:1},{type:"log",message:"Dague lancee: 1d4+DEX degats perforants."}],CS={priority:"poke_from_range",successLog:"Dague lancee.",failureLog:"Pas de dague ou cible hors portee."},kS=["distance","arme","jet"],bS={id:dS,name:fS,summary:pS,category:mS,actionCost:gS,targeting:yS,usage:xS,conditions:_S,attack:vS,damage:wS,effects:SS,aiHints:CS,tags:kS},Ar=12,Xn=8,Rt=64,Ra=Ar*Rt,sc=Xn*Rt,fg=Rt,Uc=Rt*.5,pg=Ra/2,mg=Uc*2,AS=1841961;function Fi(i,e){return i>=0&&i<Ar&&e>=0&&e<Xn}function Yn(i,e){const t=fg/2,s=Uc/2,o=(i-e)*t+pg,l=(i+e)*s+mg;return{x:o,y:l}}function PS(i,e){const t=fg/2,s=Uc/2,o=i-pg,l=e-mg,u=o/t,h=l/s,f=(u+h)/2,p=(h-u)/2,m=Math.round(f),y=Math.round(p);return{x:m,y}}function TS(i,e,t,s){const o=[];for(let l=-s;l<=s;l++)for(let u=-s;u<=s;u++){const h=e+u,f=t+l;if(!Fi(h,f))continue;Math.sqrt(u*u+l*l)<=s+.01&&o.push({x:h,y:f})}return{id:i,type:"circle",cells:o}}function ES(i,e,t,s,o){const l=[],u=Math.floor(s/2),h=Math.floor(o/2);for(let f=t-h;f<=t+h;f++)for(let p=e-u;p<=e+u;p++)Fi(p,f)&&l.push({x:p,y:f});return{id:i,type:"rectangle",cells:l}}function MS(i,e,t,s,o){const l=[];for(let u=1;u<=s;u++)for(let h=-u;h<=u;h++){let f=e,p=t;switch(o){case"right":f=e+u,p=t+h;break;case"left":f=e-u,p=t+h;break;case"down":f=e+h,p=t+u;break;case"up":f=e+h,p=t-u;break}Fi(f,p)&&l.push({x:f,y:p})}return{id:i,type:"cone",cells:l}}function Ai(i,e=1){const t=[];for(let o=0;o<e;o++)t.push(1+Math.floor(Math.random()*i));const s=t.reduce((o,l)=>o+l,0);return{rolls:t,total:s}}function RS(i,e="normal",t=20){if(e==="advantage"){const o=Ai(20),l=Ai(20),u=Math.max(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:i,total:u+i,mode:e,isCrit:u>=t}}if(e==="disadvantage"){const o=Ai(20),l=Ai(20),u=Math.min(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:i,total:u+i,mode:e,isCrit:u>=t}}const s=Ai(20);return{d20:s,bonus:i,total:s.total+i,mode:e,isCrit:s.total>=t}}function IS(i){const e=[],s=i.replace(/\s+/g,"").split(/(?=[+-])/);for(const o of s){if(!o)continue;const l=o.startsWith("-")?-1:1,u=o.replace(/^[+-]/,""),h=u.match(/^(\d*)d(\d+)$/i);if(h){const p=h[1]?parseInt(h[1],10):1,m=parseInt(h[2],10);e.push({diceCount:l*p,diceSides:m,modifier:0});continue}const f=parseInt(u,10);Number.isNaN(f)||e.push({diceCount:0,diceSides:0,modifier:l*f})}return e}function FS(i,e){const t=!!(e!=null&&e.isCrit),s=(e==null?void 0:e.critRule)??"double-dice",o=IS(i),l=[];let u=0;for(const p of o)if(p.diceCount!==0&&p.diceSides>0){const m=Math.abs(p.diceCount),y=t&&s==="double-dice"?m*2:m,_=Ai(p.diceSides,y);l.push(p.diceCount<0?{rolls:_.rolls,total:-_.total}:_)}else u+=p.modifier;let f=l.reduce((p,m)=>p+m.total,0)+u;return t&&s==="double-total"&&(f*=2),{dice:l,flatModifier:u,total:f,formula:i,isCrit:t}}function oc(i,e){return`${i},${e}`}function LS(i){return i.movementProfile?i.movementProfile:typeof i.moveRange=="number"?{type:"ground",speed:i.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1}:null}function BS(i,e,t,s,o,l,u){if(t<0||s<0||t>=Ar||s>=Xn||!Fi(t,s))return!1;const h=t===u.x&&s===u.y;return!o.some(p=>p.id!==i.id&&p.hp>0&&p.x===t&&p.y===s)||h&&l?!0:e&&e.canPassThroughEntities?!(h&&e.canStopOnOccupiedTile===!1):!1}function Dp(i,e,t,s){const o=LS(i),l=o&&o.speed>0?Math.min(s.maxDistance,o.speed):s.maxDistance,u={x:i.x,y:i.y};if(u.x===e.x&&u.y===e.y)return[];const h=new Set,f=new Map,p=new Map,m=[],y=oc(u.x,u.y);h.add(y),f.set(y,null),p.set(y,0),m.push(u);let _=null;const v=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];for(;m.length>0;){const E=m.shift(),I=oc(E.x,E.y),U=p.get(I)??0;if(!(U>=l))for(const D of v){const O=E.x+D.x,te=E.y+D.y,ie=oc(O,te);if(h.has(ie)||!BS(i,o,O,te,t,s.allowTargetOccupied??!1,e))continue;h.add(ie),f.set(ie,I),p.set(ie,U+1);const X={x:O,y:te};if(m.push(X),O===e.x&&te===e.y){_=ie,m.length=0;break}}}let S=_;if(!S){let E=null,I=Number.POSITIVE_INFINITY;for(const U of h){const[D,O]=U.split(",").map(Number),te=Math.abs(D-e.x)+Math.abs(O-e.y),ie=p.get(U)??0;ie!==0&&(ie>l||te<I&&(I=te,E=U))}if(!E)return[];S=E}const k=[];let w=S;for(;w;){const[E,I]=w.split(",").map(Number);if(k.push({x:E,y:I}),w===y)break;w=f.get(w)??null}const P=k.reverse(),T=l+1;return P.length>T?P.slice(0,T):P}function zS(i,e){return e.find(t=>t.hp>0&&t.x===i.x&&t.y===i.y)??null}const jS={"./melee-strike.json":$w,"./dash.json":Jw,"./second-wind.json":hS,"./throw-dagger.json":bS},DS={"./brute.json":sw,"./archer.json":dw,"./assassin.json":_w,"./ghost.json":Aw};function OS(){const i=Array.isArray(zp.types)?zp.types:[],e=[];for(const t of i){const s=DS[t];s?e.push(s):console.warn("[enemy-types] Type path missing in bundle:",t)}return e.length===0&&console.warn("[enemy-types] No enemy types loaded from index.json"),e}function NS(i,e){const t=Ar-1,s=i;return{id:`enemy-${i}`,type:"enemy",enemyTypeId:e.id,enemyTypeLabel:e.label,aiRole:e.aiRole,moveRange:e.baseStats.moveRange,attackDamage:e.baseStats.attackDamage,movementProfile:e.movement?e.movement:{type:"ground",speed:e.baseStats.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},x:t,y:s,hp:e.baseStats.hp,maxHp:e.baseStats.hp}}function Op(i,e,t){return Math.max(e,Math.min(t,i))}function Np(i,e){return Math.abs(i.x-e.x)+Math.abs(i.y-e.y)}const $p=[{action:"move",label:"Se deplacer jusqu'a 3 cases (Manhattan)",color:"#2ecc71"},{action:"attack",label:"Attaque le joueur a distance 1 (2 degats)",color:"#e74c3c"},{action:"wait",label:"Attend si aucune action viable",color:"#7f8c8d"}],$S=()=>{var ao,bn,Hi,Vi;const i=Te.useRef(null),e=Te.useRef(null),t=Te.useRef(null),s=Te.useRef(null),[o,l]=Te.useState([]),[u,h]=Te.useState({id:"player-1",type:"player",x:0,y:Math.floor(Xn/2),hp:Mn.pvActuels,maxHp:Mn.pvMax}),[f,p]=Te.useState([]),[m,y]=Te.useState([]),[_,v]=Te.useState("player"),[S,k]=Te.useState(1),[w,P]=Te.useState(!1),[T,E]=Te.useState(!1),[I,U]=Te.useState(null),[D,O]=Te.useState([]),[te,ie]=Te.useState(0),[X,ee]=Te.useState(!1),[Se,Ce]=Te.useState(3),[ke,ft]=Te.useState([]),[Z,ne]=Te.useState(null),[K,q]=Te.useState(null),[J,R]=Te.useState("normal"),[N,ye]=Te.useState(null),[_e,be]=Te.useState(null),[Ae,De]=Te.useState([]),[xe,Fe]=Te.useState([]),[We,Zt]=Te.useState(null),[Jt,At]=Te.useState("none"),[jt,pt]=Te.useState([]),[Zn,Jn]=Te.useState(null),[Fn,Ln]=Te.useState(null),[er,Bn]=Te.useState(null),[Zr,tr]=Te.useState(!1);function Zs(b){if(Zr)return"Fallback local : poursuite/attaque basique du joueur";if(Fn===null)return"IA non appele pour l'instant";const j=Fn.find(Q=>Q.enemyId===b);if(!j)return"Aucune dcision reue pour cet ennemi";if(j.action==="move"){const Q=typeof j.targetX=="number"?j.targetX:"?",oe=typeof j.targetY=="number"?j.targetY:"?";return`Dplacement vers (${Q}, ${oe})`}return j.action==="attack"?"Attaque le joueur (distance 1)":"Attend ce tour"}function Jr(){if(!T||D.length===0)return null;const b=te>=0&&te<D.length?te:0;return D[b]??null}function ji(){D.length!==0&&ie(b=>{const j=(b+1)%D.length;return j===0&&k(Q=>Q+1),j})}function Di(){if(T)return;const b=Mn.caracs.dexterite.modDEX,j=()=>Math.floor(Math.random()*20)+1,Q=j(),oe=Q+b,Y=[];Y.push({id:u.id,kind:"player",initiative:oe});const le=m.map(W=>{const ze=j();return Y.push({id:W.id,kind:"enemy",initiative:ze}),{...W,initiative:ze}});U(oe),y(le),Y.sort((W,we)=>we.initiative-W.initiative),O(Y),ie(0),E(!0);const de=Y[0];de&&(de.kind==="player"?ge(`Initiative: Joueur ${oe} (d20=${Q}, mod=${b})  le joueur commence.`):ge(`Initiative: Joueur ${oe} (d20=${Q}, mod=${b})  ${de.id} commence (initiative ${de.initiative}).`))}function ge(b){l(j=>[b,...j].slice(0,12))}function Oi(b){De(j=>[b,...j].slice(0,6)),ge(b)}Te.useEffect(()=>{const b=OS();p(b)},[]),Te.useEffect(()=>{X&&!T&&m.length>0&&Di()},[X,T,m.length]),Te.useEffect(()=>{const b=Array.isArray(jp.actions)?jp.actions:[],j=[];for(const Q of b){const oe=jS[Q];oe?j.push(oe):console.warn("[actions] Action path missing in bundle:",Q)}j.length===0&&console.warn("[actions] No actions loaded from index.json"),ft(j),ne(j.length?j[0].id:null)},[]),Te.useEffect(()=>{if(!X||!T)return;const b=Jr();if(b){if(b.kind==="player"){v("player");return}w||(v("enemies"),Ui(b.id))}},[X,T,D,te,w]);function zn(){if(m.length===0)return null;let b=null;for(const j of m){const Q=Np(u,j);(b===null||Q<b)&&(b=Q)}return b}function jn(b){var le,de;const j=[],Q=[];_!=="player"&&j.push("Action bloquee pendant le tour des ennemis.");const oe=(le=b.targeting)==null?void 0:le.target,Y=(de=b.targeting)==null?void 0:de.range;if(oe==="enemy"){const W=zn();W===null?j.push("Aucune cible ennemie presente."):(Q.push(`Distance mini ennemie: ${W}`),typeof(Y==null?void 0:Y.min)=="number"&&W<Y.min&&j.push(`Trop proche (< ${Y.min}).`),typeof(Y==null?void 0:Y.max)=="number"&&W>Y.max&&j.push(`Hors portee (> ${Y.max}).`))}for(const W of b.conditions||[]){if(W.type==="phase"&&W.mustBe&&W.mustBe!==_&&j.push(W.reason||"Phase incorrecte."),W.type==="distance_max"&&oe==="enemy"){const we=zn();we!==null&&typeof W.max=="number"&&we>W.max&&j.push(W.reason||`Distance > ${W.max}.`)}if(W.type==="distance_between"&&oe==="enemy"){const we=zn();we!==null&&(typeof W.min=="number"&&we<W.min&&j.push(W.reason||`Distance < ${W.min}.`),typeof W.max=="number"&&we>W.max&&j.push(W.reason||`Distance > ${W.max}.`))}}return{enabled:j.length===0,reasons:j,details:Q}}function Js(b){var Q;const j=[];if(b.perTurn&&j.push(`${b.perTurn}/tour`),b.perEncounter&&j.push(`${b.perEncounter}/rencontre`),(Q=b.resource)!=null&&Q.name){const oe=b.resource.pool?` (${b.resource.pool})`:"";j.push(`Ressource: ${b.resource.name}${oe}`)}return j.length?j.join(" | "):"Libre"}function Ni(b){const{range:j,target:Q}=b;return j.shape==="self"?"Portee: soi-meme":j.min===j.max?`Portee: ${j.max} (${Q})`:`Portee: ${j.min}-${j.max} (${Q})`}function eo(b){switch(b.type){case"phase":return`Phase requise: ${b.mustBe??"?"}`;case"distance_max":return`Distance <= ${b.max??"?"}`;case"distance_between":return`Distance ${b.min??0}-${b.max??"?"}`;case"stat_below_percent":return`Stat ${b.stat} < ${Math.round((b.percentMax??0)*100)}%`;case"target_alive":return"Cible doit etre vivante";case"resource_at_least":return`Ressource ${b.resource??"?"} >= ${b.value??"?"}`;default:return b.reason||b.type}}function Wa(b){switch(b.type){case"damage":return`Degats ${b.damageType??""} (${b.formula??"?"})`;case"heal":return`Soin (${b.formula??"?"})`;case"status":return`Etat: ${b.status??"?"} (${b.duration??"?"} tour)`;case"temp_hp":return`PV temporaires: ${b.amount??"?"}`;case"move":return`Deplacement +${b.maxSteps??"?"} (${b.direction??"direction libre"})`;case"resource_spend":return`Consomme ${b.amount??1} ${b.resource??"ressource"}`;case"modify_path_limit":return`+${b.delta??"?"} cases de mouvement ce tour`;default:return b.type}}function $i(b){var oe;const j=(oe=b.targeting)==null?void 0:oe.range;if(!j)return;const Q=`preview-${b.id}`;if(j.shape==="rectangle"){pt([{id:Q,kind:"rectangle",width:Math.max(1,j.max),height:Math.max(1,j.max)}]),ge(`Previsualisation rectangle pour ${b.name}.`);return}if(j.shape==="cone"){pt([{id:Q,kind:"cone",range:Math.max(1,j.max),direction:"right"}]),ge(`Previsualisation cone (direction droite) pour ${b.name}.`);return}pt([{id:Q,kind:"circle",radius:Math.max(1,j.max)}]),ge(`Previsualisation de portee pour ${b.name}.`)}function Gi(b){var oe,Y;const j=jn(b);if(!j.enabled){ge(`Action ${b.name} bloque: ${j.reasons.join(" | ")}`);return}q(b.id),ye(null),be(null);const Q=((oe=b.aiHints)==null?void 0:oe.successLog)||"Action validee. Prets pour les jets.";ge(`${b.name}: ${Q}`),((Y=b.targeting)==null?void 0:Y.target)==="enemy"?(At("selecting"),Zt(null),ge("Selection de cible: cliquez sur un ennemi sur la grille ou dans la liste.")):(At("none"),Zt(null))}function nr(){return K&&ke.find(b=>b.id===K)||null}function ei(){var Y,le;const b=nr();if(!b){ge("Aucune action validee pour lancer un jet.");return}if(!b.attack){ge("Cette action ne requiert pas de jet de touche.");return}if(((Y=b.targeting)==null?void 0:Y.target)==="enemy"){if(!We){ge("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet.");return}if(!m.find(W=>W.id===We)){ge("Cible ennemie introuvable ou deja vaincue.");return}}const j=RS(b.attack.bonus,J,b.attack.critRange??20);ye(j),be(null);const Q=j.mode==="normal"?`${j.d20.total}`:`${j.d20.rolls.join(" / ")} -> ${j.d20.total}`,oe=((le=b.targeting)==null?void 0:le.target)==="enemy"&&We?` sur ${We}`:"";Oi(`Jet de touche (${b.name})${oe} : ${Q} + ${j.bonus} = ${j.total}${j.isCrit?" (critique!)":""}`)}function Tr(){var W,we;const b=nr();if(!b){ge("Aucune action validee pour lancer un jet.");return}if(!b.damage){ge("Cette action ne requiert pas de jet de degats.");return}let j=null;if(((W=b.targeting)==null?void 0:W.target)==="enemy"){if(!We){ge("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet de degats.");return}if(j=m.findIndex(ze=>ze.id===We),j===-1){ge("Cible ennemie introuvable ou deja vaincue.");return}}const Q=!!(N!=null&&N.isCrit),oe=FS(b.damage.formula,{isCrit:Q,critRule:b.damage.critRule});be(oe);const Y=oe.dice.map(ze=>ze.rolls.join("+")).join(" | "),le=oe.total,de=((we=b.targeting)==null?void 0:we.target)==="enemy"&&We?` sur ${We}`:"";Oi(`Degats (${b.name})${de} : ${Y||"0"} + ${oe.flatModifier} = ${le}${Q?" (critique)":""}`),typeof j=="number"&&j>=0&&y(ze=>{if(j===null||j<0||j>=ze.length)return ze;const Ie=[...ze],Pe={...Ie[j]};return Pe.hp=Math.max(0,Pe.hp-le),Ie[j]=Pe,Ie})}function rr(){const b=nr();if(!b){ge("Aucune action validee pour lancer un jet.");return}if(!b.attack){ge("Mode auto: pas de jet de touche necessaire."),b.damage&&Tr();return}ei(),setTimeout(()=>{b.damage&&Tr()},50)}function ir(b){if(_!=="player")return;const j=i.current;if(!j)return;const Q=j.querySelector("canvas");if(!Q)return;const oe=Q.getBoundingClientRect(),Y=b.clientX-oe.left,le=b.clientY-oe.top,de=Y/oe.width*Ra,W=le/oe.height*sc,{x:we,y:ze}=PS(de,W),Ie=we,Pe=ze;if(!Fi(Ie,Pe))return;if(Jt==="selecting"){const tt=[u,...m],Ye=zS({x:Ie,y:Pe},tt);if(!Ye||Ye.type!=="enemy"){ge(`Pas d'ennemi sur (${Ie}, ${Pe}).`);return}Zt(Ye.id),At("none"),ge(`Cible selectionnee: ${Ye.id}.`);return}const st=(tt,Ye)=>m.some(Oe=>Oe.hp>0&&Oe.x===tt&&Oe.y===Ye);if(st(Ie,Pe)){ge(`Case (${Ie}, ${Pe}) occupee par un ennemi : impossible de s'y deplacer.`);return}Fe(tt=>{const Oe=[...tt];if(Oe.length>=5)return ge("Limite de 5 cases atteinte pour ce tour."),Oe;let hn=Oe.length>0?Oe[Oe.length-1]:{x:u.x,y:u.y};if(hn.x===Ie&&hn.y===Pe)return Oe;let $e=hn.x,xt=hn.y,Rr=5-Oe.length;for(;$e!==Ie&&Rr>0;){const Yi=Math.sign(Ie-$e),en=$e+Yi;if(st(en,xt)){ge(`Trajectoire bloquee par un ennemi en (${en}, ${xt}).`);break}$e=en,Oe.push({x:$e,y:xt}),Rr--}for(;xt!==Pe&&Rr>0;){const Yi=Math.sign(Pe-xt),en=xt+Yi;if(st($e,en)){ge(`Trajectoire bloquee par un ennemi en (${$e}, ${en}).`);break}xt=en,Oe.push({x:$e,y:xt}),Rr--}return ge(Rr===0&&($e!==Ie||xt!==Pe)?"Trajectoire tronquee: limite de 5 cases atteinte.":`Trajectoire: ajout de la case (${Ie}, ${Pe}).`),Oe})}function to(){if(_!=="player"||xe.length===0)return;const b=xe[xe.length-1];h(j=>({...j,x:b.x,y:b.y})),ge(`Deplacement valide vers (${b.x}, ${b.y}) via ${xe.length} etape(s).`),Fe([])}function no(){_==="player"&&(Fe([]),ge("Trajectoire reinitialisee."))}function ro(){const b={x:u.x,y:u.y,hp:u.hp,maxHp:u.maxHp},j=m.map(Q=>({id:Q.id,x:Q.x,y:Q.y,hp:Q.hp,maxHp:Q.maxHp,type:Q.enemyTypeId,aiRole:Q.aiRole??null,moveRange:Q.moveRange??null,attackDamage:Q.attackDamage??null}));return{round:S,phase:_,grid:{cols:Ar,rows:Xn},player:b,enemies:j}}function io(b){const j=new Set(m.map(Y=>Y.id)),Q=new Set(["move","attack","wait"]),oe=[];for(const Y of b){if(!Y||typeof Y!="object")continue;if(!j.has(Y.enemyId)){console.warn("[enemy-ai] Decision ignoree (enemyId inconnu):",Y);continue}const le=(Y.action||"wait").toLowerCase();if(!Q.has(le)){console.warn("[enemy-ai] Decision ignoree (action invalide):",Y);continue}if(le==="move"&&(typeof Y.targetX!="number"||typeof Y.targetY!="number")){console.warn("[enemy-ai] Decision move ignoree (cible manquante):",Y);continue}oe.push({...Y,action:le})}return oe}async function so(b){console.log("[enemy-ai] Envoi tat au backend:",b),Jn(b),Bn(null),tr(!1);try{const j=await fetch("/api/enemy-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!j.ok)throw new Error(`HTTP ${j.status}`);const Q=await j.json();if(!Q.decisions||!Array.isArray(Q.decisions))throw new Error("Rponse backend invalide (decisions manquant).");const oe=io(Q.decisions);return console.log("[enemy-ai] Dcisions reues (filtres):",oe),Ln(oe),oe.length===0&&tr(!0),oe}catch(j){return console.warn("[enemy-ai] Erreur lors de la requete IA:",j),Bn(j instanceof Error?j.message:String(j??"unknown")),Ln(null),tr(!0),console.warn("[enemy-ai] Dcisions manquantes, utilisation du fallback local."),[]}}async function Ui(b){P(!0),Fe([]),pt([]);const j=ro(),oe=(await so(j)).filter(Y=>Y.enemyId===b);oe.length===0?(tr(!0),Ln([]),y(Y=>{const le=Y.map(Pe=>({...Pe}));let de={...u};const W=le.find(Pe=>Pe.id===b);if(!W)return Y;const we=typeof W.moveRange=="number"?W.moveRange:3,ze=[de,...le],Ie=Dp(W,{x:de.x,y:de.y},ze,{maxDistance:we,allowTargetOccupied:!0});if(W.plannedPath=Ie,Ie.length===0)ge(`${W.id} ne trouve pas de chemin valide vers le joueur (fallback, reste en place).`);else{const Pe=Ie[Ie.length-1];if(W.x=Pe.x,W.y=Pe.y,Math.abs(W.x-de.x)+Math.abs(W.y-de.y)<=1){const tt=typeof W.attackDamage=="number"?W.attackDamage:2;de={...de,hp:Math.max(0,de.hp-tt)},ge(`${W.id} suit un chemin et attaque le joueur pour ${tt} degats (fallback).`)}else ge(`${W.id} suit un chemin vers (${Pe.x}, ${Pe.y}) (fallback).`)}return h(de),le})):(tr(!1),Ln(oe),y(Y=>{const le=Y.map(W=>({...W}));let de={...u};for(const W of oe){const we=le.find(Ie=>Ie.id===W.enemyId);if(!we)continue;const ze=(W.action||"wait").toLowerCase();if(ze==="wait"){ge(`${we.id} attend.`);continue}if(ze==="move"){let Ie=W.targetX,Pe=W.targetY;const st=W;if((typeof Ie!="number"||typeof Pe!="number")&&st.target&&typeof st.target.x=="number"&&typeof st.target.y=="number"&&(Ie=st.target.x,Pe=st.target.y),typeof Ie!="number"||typeof Pe!="number"){ge(`${we.id}: decision MOVE ignoree (pas de cible valide).`);continue}const tt=typeof we.moveRange=="number"?we.moveRange:3,Ye=Op(Ie,0,Ar-1),Oe=Op(Pe,0,Xn-1),hn=[de,...le],$e=Dp(we,{x:Ye,y:Oe},hn,{maxDistance:tt,allowTargetOccupied:!0});if(we.plannedPath=$e,$e.length===0){ge(`${we.id}: aucun trajet valide vers (${Ye}, ${Oe}), reste en place.`);continue}const xt=$e[$e.length-1];we.x=xt.x,we.y=xt.y,ge(`${we.id} suit un chemin vers (${xt.x}, ${xt.y}).`);continue}if(ze==="attack")if(Np(we,de)<=1){const Pe=typeof we.attackDamage=="number"?we.attackDamage:2;de={...de,hp:Math.max(0,de.hp-Pe)},ge(`${we.id} attaque le joueur pour ${Pe} degats.`)}else ge(`${we.id} voulait attaquer mais est trop loin (ignore).`)}return h(de),le})),P(!1),ji()}function oo(){const b=Jr();!b||b.kind!=="player"||(ge(`Fin du tour joueur (round ${S}).`),ji())}function Er(){pt([{id:"demo-circle",kind:"circle",radius:2}]),ge("Zone d'effet: cercle (rayon 2) autour du joueur.")}function Wi(){pt([{id:"demo-rect",kind:"rectangle",width:3,height:3}]),ge("Zone d'effet: rectangle 3x3 centre sur le joueur.")}function Mr(){pt([{id:"demo-cone",kind:"cone",range:4,direction:"right"}]),ge("Zone d'effet: cone vers la droite (portee 4).")}function Ha(){pt([]),ge("Zones d'effet effacees.")}Te.useEffect(()=>{if(!X||!i.current||e.current)return;const b=new Om;e.current=b;let j=!1,Q=null,oe=!1;return(async()=>{if(await b.init({width:Ra,height:sc,background:AS,antialias:!0}),oe=!0,await Os.load([rc,ic]),j)return;const le=i.current;if(!le)return;le.appendChild(b.canvas);const de=new vn;b.stage.addChild(de);const W=new Ks;de.addChild(W),(()=>{W.clear();for(let st=0;st<Xn;st++)for(let tt=0;tt<Ar;tt++){if(!Fi(tt,st))continue;const Ye=Yn(tt,st),Oe=Rt,hn=Rt*.5,$e=[Ye.x,Ye.y-hn/2,Ye.x+Oe/2,Ye.y,Ye.x,Ye.y+hn/2,Ye.x-Oe/2,Ye.y],xt=(tt+st)%2===0;W.poly($e).fill({color:xt?1381666:1908016,alpha:1})}})();const ze=new Ks;de.addChild(ze),s.current=ze;const Ie=new vn;de.addChild(Ie),t.current=Ie;const Pe=()=>{const st=b.canvas,tt=st.parentElement;if(!tt)return;const Ye=Math.min(tt.clientWidth/Ra,tt.clientHeight/sc);st.style.transformOrigin="top left",st.style.transform=`scale(${Ye})`};Q=Pe,Pe(),window.addEventListener("resize",Pe)})(),()=>{j=!0,Q&&window.removeEventListener("resize",Q),oe&&e.current&&e.current.destroy(!0),e.current=null,t.current=null,s.current=null}},[X]),Te.useEffect(()=>{const b=t.current;if(!b)return;b.removeChildren();const j=[u,...m];for(const Q of j){const oe=Q.type==="player"?rc:ic,Y=new vn,le=Ri.from(oe);le.anchor.set(.5),le.width=Rt*.9,le.height=Rt*.9,le.tint=16777215,Y.addChild(le);const de=Yn(Q.x,Q.y);Y.x=de.x+Rt*.05,Y.y=de.y-Rt*.1,b.addChild(Y)}},[u,m]),Te.useEffect(()=>{const b=s.current;if(!b)return;b.clear();const j=jt.map(Y=>{switch(Y.kind){case"circle":return TS(Y.id,u.x,u.y,Y.radius??1);case"rectangle":return ES(Y.id,u.x,u.y,Y.width??1,Y.height??1);case"cone":return MS(Y.id,u.x,u.y,Y.range??1,Y.direction??"right");default:return{id:Y.id,type:"circle",cells:[]}}});for(const Y of j)for(const le of Y.cells){const de=Yn(le.x,le.y),W=Rt,we=Rt*.5,ze=[de.x,de.y-we/2,de.x+W/2,de.y,de.x,de.y+we/2,de.x-W/2,de.y],Ie=Y.type==="circle"?3447003:Y.type==="rectangle"?3066993:15158332;b.poly(ze).fill({color:Ie,alpha:.45})}const Q=[u,...m];for(const Y of Q){const le=Yn(Y.x,Y.y),de=Rt,W=Rt*.5,we=[le.x,le.y-W/2,le.x+de/2,le.y,le.x,le.y+W/2,le.x-de/2,le.y],ze=Y.type==="player"?3066993:15158332;b.poly(we).fill({color:ze,alpha:.2})}if(xe.length>0){const Y=xe[xe.length-1],le=Yn(Y.x,Y.y),de=Rt,W=Rt*.5,we=[le.x,le.y-W/2,le.x+de/2,le.y,le.x,le.y+W/2,le.x-de/2,le.y];b.poly(we).fill({color:15844367,alpha:.2})}for(const Y of m){if(!Y.plannedPath||Y.plannedPath.length===0)continue;const le=Y.plannedPath,de=le[0],W=Yn(de.x,de.y);b.setStrokeStyle({width:3,color:15158332,alpha:.9}),b.moveTo(W.x,W.y);for(const we of le.slice(1)){const ze=Yn(we.x,we.y);b.lineTo(ze.x,ze.y)}b.stroke()}if(xe.length===0)return;b.setStrokeStyle({width:6,color:15844367,alpha:1});const oe=Yn(u.x,u.y);b.moveTo(oe.x,oe.y);for(const Y of xe){const le=Yn(Y.x,Y.y);b.lineTo(le.x,le.y)}b.stroke()},[u,m,xe,jt]);const He=ke.find(b=>b.id===Z)||ke[0]||null,ht=He?jn(He):null,Ve=nr(),Dt=_==="player",sr=Jr(),Va=D;return X?B.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"16px",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:"16px",boxSizing:"border-box"},children:[B.jsxs("div",{style:{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},children:[B.jsxs("div",{style:{marginBottom:8,padding:"6px 10px",background:"#111322",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%"},children:[B.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[B.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["Ordre d'initiative (round ",S,")"]}),sr&&B.jsxs("span",{style:{fontSize:11,color:"#f1c40f"},children:["Tour actuel :"," ",sr.kind==="player"?"Joueur":sr.id]})]}),B.jsx("div",{style:{display:"flex",gap:8,alignItems:"center",overflowX:"auto",paddingBottom:2},children:Va.map(b=>{const j=sr&&b.id===sr.id&&b.kind===sr.kind,Q=b.kind==="player",oe=Q?{svg:rc,label:"PJ"}:{svg:ic,label:b.id};return B.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:4,borderRadius:6,border:j?"2px solid #f1c40f":"1px solid #333",background:j?"#1b1b30":"#101020",minWidth:48},children:[B.jsx("img",{src:oe.svg,alt:oe.label,style:{width:32,height:32,objectFit:"contain",filter:Q?"none":"grayscale(0.2)"}}),B.jsx("span",{style:{fontSize:10,marginTop:2,color:"#d0d6e0",whiteSpace:"nowrap"},children:oe.label}),B.jsxs("span",{style:{fontSize:9,color:"#9aa0b5"},children:["Init ",b.initiative]})]},`${b.kind}-${b.id}`)})})]}),B.jsx("h1",{style:{marginBottom:8},children:"Mini Donjon (test-GAME)"}),B.jsx("p",{style:{marginBottom:8},children:"Tour par tour simple. Cliquez sur la grille pour definir une trajectoire (max 5 cases), validez le dplacement, puis terminez le tour pour laisser l'IA des ennemis jouer."}),B.jsx("div",{ref:i,onClick:ir,style:{flex:"1 1 auto",border:"1px solid #333",overflow:"hidden",maxHeight:"min(80vh, 640px)",maxWidth:"min(100%, 1024px)"}}),B.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,flexWrap:"wrap"},children:[B.jsx("button",{type:"button",onClick:to,style:{padding:"4px 8px",background:Dt&&xe.length?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Dt&&xe.length?"pointer":"default"},disabled:!Dt||xe.length===0,children:"Valider le deplacement"}),B.jsx("button",{type:"button",onClick:no,style:{padding:"4px 8px",background:Dt?"#e67e22":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Dt?"pointer":"default"},disabled:!Dt,children:"Reinitialiser trajet"}),B.jsx("button",{type:"button",onClick:oo,style:{padding:"4px 8px",background:Dt?"#9b59b6":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Dt?"pointer":"default"},disabled:!Dt||w,children:"Fin du tour joueur"}),!Dt&&B.jsx("span",{style:{fontSize:12,alignSelf:"center"},children:"Tour des ennemis en cours..."})]})]}),B.jsxs("div",{style:{width:"360px",display:"flex",flexDirection:"column",gap:"12px"},children:[B.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333"},children:[B.jsx("h2",{style:{margin:"0 0 8px"},children:"Etat du combat"}),B.jsxs("div",{children:[B.jsx("strong",{children:"Round :"})," ",S," |"," ",B.jsx("strong",{children:"Phase :"})," ",_==="player"?"Joueur":"Ennemis"]}),B.jsxs("div",{style:{fontSize:12,marginTop:4},children:[B.jsx("strong",{children:"Initiative PJ :"})," ",I??"en cours..."," "]}),B.jsxs("div",{children:[B.jsx("strong",{children:"Nom :"})," ",Mn.nom.nomcomplet]}),B.jsxs("div",{children:[B.jsx("strong",{children:"Niveau :"})," ",Mn.niveauGlobal," |"," ",B.jsx("strong",{children:"Classe :"})," ",Mn.classe[1].classeId]}),B.jsxs("div",{children:[B.jsx("strong",{children:"PV :"})," ",u.hp," / ",u.maxHp]}),B.jsxs("div",{children:[B.jsx("strong",{children:"CA :"})," ",Mn.CA]}),B.jsxs("div",{style:{marginTop:8},children:[B.jsx("strong",{children:"Caracs :"})," ","FOR ",Mn.caracs.force.FOR," | DEX"," ",Mn.caracs.dexterite.DEX," | CON"," ",Mn.caracs.constitution.CON]}),B.jsxs("div",{style:{marginTop:8,fontSize:12},children:[B.jsx("strong",{children:"Trajectoire :"})," ",xe.length===0?"aucune":`(${u.x}, ${u.y}) -> `+xe.map(b=>`(${b.x}, ${b.y})`).join(" -> ")]}),B.jsxs("div",{style:{marginTop:8,fontSize:11,opacity:.85},children:[B.jsx("strong",{children:"IA ennemis (debug) :"}),B.jsxs("div",{children:["Dernier appel :"," ",Zn?`round ${Zn.round}, phase ${Zn.phase}`:"aucun"]}),B.jsxs("div",{children:["Dcisions reues :"," ",Fn===null?"n/a":`${Fn.length} (fallback: ${Zr?"oui":"non"})`]}),er&&B.jsxs("div",{children:["Erreur : ",er]})]})]}),B.jsxs("section",{style:{padding:"8px 12px",background:"#151524",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[B.jsx("h2",{style:{margin:"0 0 4px"},children:"Ennemis"}),B.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Chaque ennemi est une entit propre. Capacits IA : dplacement, attaque au contact, attente si aucune option."}),B.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:m.map(b=>B.jsxs("div",{style:{background:"#0f0f19",border:"1px solid #2a2a3a",borderRadius:8,padding:"8px 10px",display:"flex",flexDirection:"column",gap:6},children:[B.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[B.jsx("strong",{style:{color:"#f5f5f5"},children:b.id}),B.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["PV ",b.hp," / ",b.maxHp]})]}),B.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Position : (",b.x,", ",b.y,")"]}),B.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Initiative :"," ",typeof b.initiative=="number"?b.initiative:"non definie"]}),B.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Type : ",b.enemyTypeLabel||b.enemyTypeId||"inconnu"," ",b.aiRole?`(role: ${b.aiRole})`:""]}),B.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:$p.map(j=>B.jsx("span",{style:{background:j.color,color:"#0b0b12",borderRadius:4,padding:"2px 6px",fontSize:11,fontWeight:700},children:j.action.toUpperCase()},`${b.id}-${j.action}`))}),B.jsxs("div",{style:{fontSize:12,color:"#d0d6e0"},children:["Ce qu'il peut faire :"," ",$p.map(j=>j.label).join(" | ")]}),B.jsxs("div",{style:{fontSize:12,color:"#9cb2ff"},children:["Dernire dcision IA : ",Zs(b.id)]})]},b.id))})]}),B.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[B.jsx("h2",{style:{margin:"0 0 4px"},children:"Actions detaillees"}),B.jsxs("p",{style:{margin:0,fontSize:12,opacity:.85},children:["Source: ",B.jsx("code",{children:"action-game/actions/index.json"}),". Liste chargee et verifiee localement (phase, distance)."]}),B.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[B.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:[ke.map(b=>{const j=jn(b),Q=(He==null?void 0:He.id)===b.id,oe=b.actionCost.actionType==="action"?"#8e44ad":b.actionCost.actionType==="bonus"?"#27ae60":b.actionCost.actionType==="reaction"?"#e67e22":"#2980b9",Y=Q?"#6c5ce7":"#2a2a3a";return B.jsxs("button",{type:"button",onClick:()=>ne(b.id),style:{textAlign:"left",background:Q?"#1e1e2f":"#0f0f19",color:"#f5f5f5",border:`1px solid ${Y}`,borderRadius:6,padding:"8px 10px",cursor:"pointer"},children:[B.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,marginBottom:4,alignItems:"center"},children:[B.jsx("span",{style:{fontWeight:600},children:b.name}),B.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:oe,color:"#fff"},children:b.actionCost.actionType})]}),B.jsx("div",{style:{fontSize:12,opacity:.9},children:b.summary||b.category}),B.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:4,fontSize:11,alignItems:"center"},children:[B.jsx("span",{style:{color:j.enabled?"#2ecc71":"#e74c3c"},children:j.enabled?"Disponible":j.reasons[0]||"Bloquee"}),B.jsx("span",{style:{color:"#9aa0b5"},children:Ni(b.targeting)}),B.jsx("span",{style:{color:"#9aa0b5"},children:Js(b.usage)})]})]},b.id)}),ke.length===0&&B.jsx("div",{style:{fontSize:12,opacity:.8},children:"Aucune action chargee pour le moment."})]}),He&&B.jsxs("div",{style:{borderTop:"1px solid #2a2a3a",paddingTop:8,display:"flex",flexDirection:"column",gap:6},children:[B.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",fontSize:11},children:[B.jsx("span",{style:{background:"#2d2d40",color:"#d0d4f7",padding:"2px 6px",borderRadius:4},children:He.category}),(ao=He.tags)==null?void 0:ao.slice(0,4).map(b=>B.jsx("span",{style:{background:"#1f2a38",color:"#9bb0d6",padding:"2px 6px",borderRadius:4},children:b},b))]}),B.jsx("div",{style:{fontSize:12},children:He.summary||"Pas de resume."}),B.jsxs("div",{style:{fontSize:12},children:[B.jsx("strong",{children:"Cout:"})," ",He.actionCost.actionType," ","| Mouvement ",He.actionCost.movementCost]}),B.jsxs("div",{style:{fontSize:12},children:[B.jsx("strong",{children:"Portee:"})," ",Ni(He.targeting)]}),B.jsxs("div",{style:{fontSize:12},children:[B.jsx("strong",{children:"Usage:"})," ",Js(He.usage)]}),B.jsxs("div",{style:{fontSize:12},children:[B.jsx("strong",{children:"Conditions:"}),B.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:[He.conditions.length===0&&B.jsx("span",{style:{color:"#9aa0b5"},children:"Aucune condition."}),He.conditions.map((b,j)=>B.jsxs("div",{style:{color:"#cfd3ec"},children:[eo(b),b.reason?`  ${b.reason}`:""]},`${b.type}-${j}`)),ht&&B.jsxs("div",{style:{color:ht.enabled?"#2ecc71":"#e74c3c"},children:["Etat:"," ",ht.enabled?"OK pour ce tour":ht.reasons.join(" | ")||"Bloque",ht.details.length>0&&B.jsx("div",{style:{color:"#9aa0b5",marginTop:2},children:ht.details.join(" / ")})]})]})]}),B.jsxs("div",{style:{fontSize:12},children:[B.jsx("strong",{children:"Effets:"}),B.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:He.effects.map((b,j)=>B.jsx("div",{style:{color:"#cfd3ec"},children:Wa(b)},`${b.type}-${j}`))})]}),B.jsxs("div",{style:{fontSize:12},children:[B.jsx("strong",{children:"Hints IA:"})," ",((bn=He.aiHints)==null?void 0:bn.priority)||"n/a",B.jsxs("div",{style:{color:"#9aa0b5"},children:["Success: ",((Hi=He.aiHints)==null?void 0:Hi.successLog)||"n/a"]}),B.jsxs("div",{style:{color:"#9aa0b5"},children:["Failure: ",((Vi=He.aiHints)==null?void 0:Vi.failureLog)||"n/a"]})]}),B.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[B.jsx("button",{type:"button",onClick:()=>$i(He),style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Previsualiser"}),B.jsx("button",{type:"button",onClick:()=>Gi(He),disabled:!(ht!=null&&ht.enabled),style:{padding:"4px 8px",background:ht!=null&&ht.enabled?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:ht!=null&&ht.enabled?"pointer":"default",fontSize:12},children:"Valider l'action"})]})]})]})]}),B.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[B.jsx("h2",{style:{margin:"0 0 4px"},children:"Jets de des"}),B.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Choisir une action, la valider, puis lancer le jet de touche et/ou de degats. Mode auto: enchaine touche + degats."}),B.jsxs("div",{style:{fontSize:12},children:["Action validee :"," ",Ve?`${Ve.name} (${Ve.id})`:"aucune (valider une action d'abord)"]}),B.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["normal","advantage","disadvantage"].map(b=>B.jsx("button",{type:"button",onClick:()=>R(b),style:{padding:"4px 8px",background:J===b?"#8e44ad":"#2c2c3a",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:b},b))}),B.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[B.jsx("button",{type:"button",onClick:ei,disabled:!(Ve!=null&&Ve.attack),style:{padding:"4px 8px",background:Ve!=null&&Ve.attack?"#2980b9":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ve!=null&&Ve.attack?"pointer":"default",fontSize:12},children:"Lancer jet de touche"}),B.jsx("button",{type:"button",onClick:Tr,disabled:!(Ve!=null&&Ve.damage),style:{padding:"4px 8px",background:Ve!=null&&Ve.damage?"#27ae60":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ve!=null&&Ve.damage?"pointer":"default",fontSize:12},children:"Lancer degats"}),B.jsx("button",{type:"button",onClick:rr,style:{padding:"4px 8px",background:"#9b59b6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Mode auto (touche + degats)"})]}),B.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[B.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[B.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de touche"}),N?B.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["d20: ",N.d20.rolls.join(" / "),"  ",N.d20.total," ","| bonus ",N.bonus," | total ",N.total," ",N.isCrit?"(critique)":""]}):B.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lance."})]}),B.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[B.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de degats"}),_e?B.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["Des:"," ",_e.dice.length?_e.dice.map(b=>b.rolls.join("+")).join(" | "):""," ","| mod ",_e.flatModifier," | total ",_e.total," ",_e.isCrit?"(critique)":""]}):B.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lance."})]})]}),B.jsxs("div",{style:{fontSize:12},children:[B.jsx("strong",{children:"Logs des jets:"}),B.jsxs("div",{style:{marginTop:4,display:"flex",flexDirection:"column",gap:2},children:[Ae.map((b,j)=>B.jsxs("div",{style:{color:"#dfe6ff"},children:["- ",b]},j)),Ae.length===0&&B.jsx("div",{style:{color:"#9aa0b5"},children:"Aucun jet enregistre."})]})]})]}),B.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[B.jsx("h2",{style:{margin:"0 0 4px"},children:"Zones d'effet (demo)"}),B.jsxs("p",{style:{margin:0,fontSize:12},children:["Ces boutons utilisent les helpers de ",B.jsx("code",{children:"boardEffects.ts"})," ","pour dessiner des zones en coordonnees de grille autour du joueur."]}),B.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:[B.jsx("button",{type:"button",onClick:Er,style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cercle R=2"}),B.jsx("button",{type:"button",onClick:Wi,style:{padding:"4px 8px",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Rectangle 3x3"}),B.jsx("button",{type:"button",onClick:Mr,style:{padding:"4px 8px",background:"#c0392b",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cone portee 4"}),B.jsx("button",{type:"button",onClick:Ha,style:{padding:"4px 8px",background:"#7f8c8d",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Effacer zones"})]})]}),B.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",flex:"1 1 auto",display:"flex",flexDirection:"column"},children:[B.jsx("h2",{style:{margin:"0 0 8px"},children:"Log"}),B.jsx("div",{style:{flex:"1 1 auto",overflowY:"auto",fontSize:12,lineHeight:1.4},children:o.map((b,j)=>B.jsxs("div",{children:["- ",b]},j))})]})]})]}):B.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:16,boxSizing:"border-box"},children:[B.jsx("h1",{style:{marginBottom:8},children:"Prparation du combat"}),B.jsx("p",{style:{marginBottom:16,fontSize:13,maxWidth:480,textAlign:"center"},children:"Configurez le combat avant de lancer la grille : nombre d'ennemis, puis dmarrez pour effectuer les jets d'initiative et entrer en mode tour par tour."}),B.jsxs("div",{style:{padding:16,borderRadius:8,background:"#141421",border:"1px solid #333",minWidth:260,display:"flex",flexDirection:"column",gap:12},children:[B.jsxs("label",{style:{fontSize:13},children:["Nombre d'ennemis :",B.jsx("input",{type:"number",min:1,max:8,value:Se,onChange:b=>Ce(Math.max(1,Math.min(8,Number(b.target.value)||1))),style:{marginLeft:8,width:60,background:"#0f0f19",color:"#f5f5f5",border:"1px solid #333",borderRadius:4,padding:"2px 4px"}})]}),B.jsxs("p",{style:{fontSize:11,color:"#b0b8c4",margin:0},children:["Taille de la carte : actuellement fixe (",Ar," x ",Xn,"). Un redimensionnement dynamique demandera une refonte de boardConfig.ts."]}),B.jsx("button",{type:"button",onClick:()=>{if(f.length===0){ge("Aucun type d'ennemi charge (enemyTypes). Impossible de generer le combat.");return}const b=[],j=Q=>f[Q%f.length];for(let Q=0;Q<Se;Q++){const oe=Math.min(Xn-1,Q*2);b.push(NS(oe,j(Q)))}y(b),k(1),E(!1),O([]),ie(0),ee(!0)},style:{marginTop:8,padding:"6px 12px",background:"#2ecc71",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontWeight:600,fontSize:13},children:"Lancer le combat"})]})]})},GS=document.getElementById("root");ox.createRoot(GS).render(B.jsx($S,{}));export{Jx as $,Bm as A,Ht as B,vn as C,Je as D,fe as E,sm as F,Na as G,Df as H,Ri as I,S0 as J,R0 as K,Qs as L,Re as M,lt as N,ct as O,Ft as P,q0 as Q,gc as R,Fc as S,xa as T,dc as U,Nf as V,Nu as W,$f as X,t0 as Y,La as Z,yt as _,Cm as a,tm as a0,zm as a1,Me as a2,Ue as a3,e_ as a4,k_ as a5,y_ as a6,U_ as a7,H_ as a8,K_ as a9,Z_ as aa,J_ as ab,Fa as ac,Ea as ad,wc as ae,Pp as af,Qm as ag,np as ah,ep as ai,Ep as aj,e1 as ak,Qe as al,Ks as am,Sx as an,Da as ao,eg as ap,Sn as b,p_ as c,Xs as d,bt as e,tp as f,h_ as g,Ta as h,Ic as i,Im as j,fm as k,Cn as l,Pm as m,Ac as n,G_ as o,W_ as p,X_ as q,zx as r,Q_ as s,Le as t,wx as u,ev as v,Ze as w,cn as x,Zp as y,wn as z};
