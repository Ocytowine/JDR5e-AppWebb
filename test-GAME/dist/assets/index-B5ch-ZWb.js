const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-CAphNOsB.js","assets/webworkerAll-CwTFlM4N.js","assets/colorToUniform-C3MTPElX.js","assets/WebGPURenderer-A4s648xb.js","assets/SharedSystems-DAQ5sYv5.js","assets/WebGLRenderer-B_Q3eVeU.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function $u(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var $l={exports:{}},Wi={},Yl={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qd;function $y(){if(Qd)return ve;Qd=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function _(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function w(M,N,ge){this.props=M,this.context=N,this.refs=k,this.updater=ge||v}w.prototype.isReactComponent={},w.prototype.setState=function(M,N){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,N,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function P(){}P.prototype=w.prototype;function b(M,N,ge){this.props=M,this.context=N,this.refs=k,this.updater=ge||v}var E=b.prototype=new P;E.constructor=b,S(E,w.prototype),E.isPureReactComponent=!0;var R=Array.isArray,U=Object.prototype.hasOwnProperty,z={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function ne(M,N,ge){var xe,pe={},H=null,re=null;if(N!=null)for(xe in N.ref!==void 0&&(re=N.ref),N.key!==void 0&&(H=""+N.key),N)U.call(N,xe)&&!B.hasOwnProperty(xe)&&(pe[xe]=N[xe]);var K=arguments.length-2;if(K===1)pe.children=ge;else if(1<K){for(var J=Array(K),de=0;de<K;de++)J[de]=arguments[de+2];pe.children=J}if(M&&M.defaultProps)for(xe in K=M.defaultProps,K)pe[xe]===void 0&&(pe[xe]=K[xe]);return{$$typeof:i,type:M,key:H,ref:re,props:pe,_owner:z.current}}function oe(M,N){return{$$typeof:i,type:M.type,key:N,ref:M.ref,props:M.props,_owner:M._owner}}function $(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function Y(M){var N={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ge){return N[ge]})}var le=/\/+/g;function _e(M,N){return typeof M=="object"&&M!==null&&M.key!=null?Y(""+M.key):N.toString(36)}function we(M,N,ge,xe,pe){var H=typeof M;(H==="undefined"||H==="boolean")&&(M=null);var re=!1;if(M===null)re=!0;else switch(H){case"string":case"number":re=!0;break;case"object":switch(M.$$typeof){case i:case e:re=!0}}if(re)return re=M,pe=pe(re),M=xe===""?"."+_e(re,0):xe,R(pe)?(ge="",M!=null&&(ge=M.replace(le,"$&/")+"/"),we(pe,N,ge,"",function(de){return de})):pe!=null&&($(pe)&&(pe=oe(pe,ge+(!pe.key||re&&re.key===pe.key?"":(""+pe.key).replace(le,"$&/")+"/")+M)),N.push(pe)),1;if(re=0,xe=xe===""?".":xe+":",R(M))for(var K=0;K<M.length;K++){H=M[K];var J=xe+_e(H,K);re+=we(H,N,ge,J,pe)}else if(J=_(M),typeof J=="function")for(M=J.call(M),K=0;!(H=M.next()).done;)H=H.value,J=xe+_e(H,K++),re+=we(H,N,ge,J,pe);else if(H==="object")throw N=String(M),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return re}function et(M,N,ge){if(M==null)return M;var xe=[],pe=0;return we(M,xe,"","",function(H){return N.call(ge,H,pe++)}),xe}function X(M){if(M._status===-1){var N=M._result;N=N(),N.then(function(ge){(M._status===0||M._status===-1)&&(M._status=1,M._result=ge)},function(ge){(M._status===0||M._status===-1)&&(M._status=2,M._result=ge)}),M._status===-1&&(M._status=0,M._result=N)}if(M._status===1)return M._result.default;throw M._result}var Q={current:null},V={transition:null},W={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:V,ReactCurrentOwner:z};function q(){throw Error("act(...) is not supported in production builds of React.")}return ve.Children={map:et,forEach:function(M,N,ge){et(M,function(){N.apply(this,arguments)},ge)},count:function(M){var N=0;return et(M,function(){N++}),N},toArray:function(M){return et(M,function(N){return N})||[]},only:function(M){if(!$(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ve.Component=w,ve.Fragment=t,ve.Profiler=o,ve.PureComponent=b,ve.StrictMode=s,ve.Suspense=f,ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,ve.act=q,ve.cloneElement=function(M,N,ge){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var xe=S({},M.props),pe=M.key,H=M.ref,re=M._owner;if(N!=null){if(N.ref!==void 0&&(H=N.ref,re=z.current),N.key!==void 0&&(pe=""+N.key),M.type&&M.type.defaultProps)var K=M.type.defaultProps;for(J in N)U.call(N,J)&&!B.hasOwnProperty(J)&&(xe[J]=N[J]===void 0&&K!==void 0?K[J]:N[J])}var J=arguments.length-2;if(J===1)xe.children=ge;else if(1<J){K=Array(J);for(var de=0;de<J;de++)K[de]=arguments[de+2];xe.children=K}return{$$typeof:i,type:M.type,key:pe,ref:H,props:xe,_owner:re}},ve.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},ve.createElement=ne,ve.createFactory=function(M){var N=ne.bind(null,M);return N.type=M,N},ve.createRef=function(){return{current:null}},ve.forwardRef=function(M){return{$$typeof:h,render:M}},ve.isValidElement=$,ve.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:X}},ve.memo=function(M,N){return{$$typeof:p,type:M,compare:N===void 0?null:N}},ve.startTransition=function(M){var N=V.transition;V.transition={};try{M()}finally{V.transition=N}},ve.unstable_act=q,ve.useCallback=function(M,N){return Q.current.useCallback(M,N)},ve.useContext=function(M){return Q.current.useContext(M)},ve.useDebugValue=function(){},ve.useDeferredValue=function(M){return Q.current.useDeferredValue(M)},ve.useEffect=function(M,N){return Q.current.useEffect(M,N)},ve.useId=function(){return Q.current.useId()},ve.useImperativeHandle=function(M,N,ge){return Q.current.useImperativeHandle(M,N,ge)},ve.useInsertionEffect=function(M,N){return Q.current.useInsertionEffect(M,N)},ve.useLayoutEffect=function(M,N){return Q.current.useLayoutEffect(M,N)},ve.useMemo=function(M,N){return Q.current.useMemo(M,N)},ve.useReducer=function(M,N,ge){return Q.current.useReducer(M,N,ge)},ve.useRef=function(M){return Q.current.useRef(M)},ve.useState=function(M){return Q.current.useState(M)},ve.useSyncExternalStore=function(M,N,ge){return Q.current.useSyncExternalStore(M,N,ge)},ve.useTransition=function(){return Q.current.useTransition()},ve.version="18.3.1",ve}var Kd;function Yu(){return Kd||(Kd=1,Yl.exports=$y()),Yl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd;function Yy(){if(Zd)return Wi;Zd=1;var i=Yu(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,p){var g,y={},_=null,v=null;p!==void 0&&(_=""+p),f.key!==void 0&&(_=""+f.key),f.ref!==void 0&&(v=f.ref);for(g in f)s.call(f,g)&&!l.hasOwnProperty(g)&&(y[g]=f[g]);if(h&&h.defaultProps)for(g in f=h.defaultProps,f)y[g]===void 0&&(y[g]=f[g]);return{$$typeof:e,type:h,key:_,ref:v,props:y,_owner:o.current}}return Wi.Fragment=t,Wi.jsx=u,Wi.jsxs=u,Wi}var Jd;function Xy(){return Jd||(Jd=1,$l.exports=Yy()),$l.exports}var me=Xy(),ko={},Xl={exports:{}},Et={},ql={exports:{}},Ql={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ef;function qy(){return ef||(ef=1,(function(i){function e(V,W){var q=V.length;V.push(W);e:for(;0<q;){var M=q-1>>>1,N=V[M];if(0<o(N,W))V[M]=W,V[q]=N,q=M;else break e}}function t(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var W=V[0],q=V.pop();if(q!==W){V[0]=q;e:for(var M=0,N=V.length,ge=N>>>1;M<ge;){var xe=2*(M+1)-1,pe=V[xe],H=xe+1,re=V[H];if(0>o(pe,q))H<N&&0>o(re,pe)?(V[M]=re,V[H]=q,M=H):(V[M]=pe,V[xe]=q,M=xe);else if(H<N&&0>o(re,q))V[M]=re,V[H]=q,M=H;else break e}}return W}function o(V,W){var q=V.sortIndex-W.sortIndex;return q!==0?q:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var f=[],p=[],g=1,y=null,_=3,v=!1,S=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(V){for(var W=t(p);W!==null;){if(W.callback===null)s(p);else if(W.startTime<=V)s(p),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(p)}}function R(V){if(k=!1,E(V),!S)if(t(f)!==null)S=!0,X(U);else{var W=t(p);W!==null&&Q(R,W.startTime-V)}}function U(V,W){S=!1,k&&(k=!1,P(ne),ne=-1),v=!0;var q=_;try{for(E(W),y=t(f);y!==null&&(!(y.expirationTime>W)||V&&!Y());){var M=y.callback;if(typeof M=="function"){y.callback=null,_=y.priorityLevel;var N=M(y.expirationTime<=W);W=i.unstable_now(),typeof N=="function"?y.callback=N:y===t(f)&&s(f),E(W)}else s(f);y=t(f)}if(y!==null)var ge=!0;else{var xe=t(p);xe!==null&&Q(R,xe.startTime-W),ge=!1}return ge}finally{y=null,_=q,v=!1}}var z=!1,B=null,ne=-1,oe=5,$=-1;function Y(){return!(i.unstable_now()-$<oe)}function le(){if(B!==null){var V=i.unstable_now();$=V;var W=!0;try{W=B(!0,V)}finally{W?_e():(z=!1,B=null)}}else z=!1}var _e;if(typeof b=="function")_e=function(){b(le)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,et=we.port2;we.port1.onmessage=le,_e=function(){et.postMessage(null)}}else _e=function(){w(le,0)};function X(V){B=V,z||(z=!0,_e())}function Q(V,W){ne=w(function(){V(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(V){V.callback=null},i.unstable_continueExecution=function(){S||v||(S=!0,X(U))},i.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<V?Math.floor(1e3/V):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(V){switch(_){case 1:case 2:case 3:var W=3;break;default:W=_}var q=_;_=W;try{return V()}finally{_=q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var q=_;_=V;try{return W()}finally{_=q}},i.unstable_scheduleCallback=function(V,W,q){var M=i.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?M+q:M):q=M,V){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=q+N,V={id:g++,callback:W,priorityLevel:V,startTime:q,expirationTime:N,sortIndex:-1},q>M?(V.sortIndex=q,e(p,V),t(f)===null&&V===t(p)&&(k?(P(ne),ne=-1):k=!0,Q(R,q-M))):(V.sortIndex=N,e(f,V),S||v||(S=!0,X(U))),V},i.unstable_shouldYield=Y,i.unstable_wrapCallback=function(V){var W=_;return function(){var q=_;_=W;try{return V.apply(this,arguments)}finally{_=q}}}})(Ql)),Ql}var tf;function Qy(){return tf||(tf=1,ql.exports=qy()),ql.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf;function Ky(){if(nf)return Et;nf=1;var i=Yu(),e=Qy();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,r){u(n,r),u(n+"Capture",r)}function u(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function _(n){return f.call(y,n)?!0:f.call(g,n)?!1:p.test(n)?y[n]=!0:(g[n]=!0,!1)}function v(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,r,a,c){if(r===null||typeof r>"u"||v(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function k(n,r,a,c,d,m,x){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=m,this.removeEmptyString=x}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){w[n]=new k(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];w[r]=new k(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){w[n]=new k(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){w[n]=new k(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){w[n]=new k(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){w[n]=new k(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){w[n]=new k(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){w[n]=new k(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){w[n]=new k(n,5,!1,n.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function b(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(P,b);w[r]=new k(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(P,b);w[r]=new k(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(P,b);w[r]=new k(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){w[n]=new k(n,1,!1,n.toLowerCase(),null,!1,!1)}),w.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){w[n]=new k(n,1,!1,n.toLowerCase(),null,!0,!0)});function E(n,r,a,c){var d=w.hasOwnProperty(r)?w[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,a,d,c)&&(a=null),c||d===null?_(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),z=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),Y=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),et=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),V=Symbol.iterator;function W(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var q=Object.assign,M;function N(n){if(M===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);M=r&&r[1]||""}return`
`+M+n}var ge=!1;function xe(n,r){if(!n||ge)return"";ge=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(L){var c=L}Reflect.construct(n,[],r)}else{try{r.call()}catch(L){c=L}n.call(r.prototype)}else{try{throw Error()}catch(L){c=L}n()}}catch(L){if(L&&c&&typeof L.stack=="string"){for(var d=L.stack.split(`
`),m=c.stack.split(`
`),x=d.length-1,C=m.length-1;1<=x&&0<=C&&d[x]!==m[C];)C--;for(;1<=x&&0<=C;x--,C--)if(d[x]!==m[C]){if(x!==1||C!==1)do if(x--,C--,0>C||d[x]!==m[C]){var A=`
`+d[x].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=x&&0<=C);break}}}finally{ge=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?N(n):""}function pe(n){switch(n.tag){case 5:return N(n.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return n=xe(n.type,!1),n;case 11:return n=xe(n.type.render,!1),n;case 1:return n=xe(n.type,!0),n;default:return""}}function H(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case z:return"Portal";case oe:return"Profiler";case ne:return"StrictMode";case _e:return"Suspense";case we:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Y:return(n.displayName||"Context")+".Consumer";case $:return(n._context.displayName||"Context")+".Provider";case le:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case et:return r=n.displayName||null,r!==null?r:H(n.type)||"Memo";case X:r=n._payload,n=n._init;try{return H(n(r))}catch{}}return null}function re(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(r);case 8:return r===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function K(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function J(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function de(n){var r=J(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(x){c=""+x,m.call(this,x)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function fe(n){n._valueTracker||(n._valueTracker=de(n))}function ke(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=J(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Ae(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ve(n,r){var a=r.checked;return q({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ge(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=K(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ze(n,r){r=r.checked,r!=null&&E(n,"checked",r,!1)}function Ue(n,r){Ze(n,r);var a=K(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?st(n,r.type,a):r.hasOwnProperty("defaultValue")&&st(n,r.type,K(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function ct(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function st(n,r,a){(r!=="number"||Ae(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Ee=Array.isArray;function Ct(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+K(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function It(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Xt(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(Ee(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:K(a)}}function cn(n,r){var a=K(r.value),c=K(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function lc(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function uc(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ra(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?uc(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ms,cc=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(ms=ms||document.createElement("div"),ms.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ms.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function si(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qm=["Webkit","ms","Moz","O"];Object.keys(oi).forEach(function(n){Qm.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),oi[r]=oi[n]})});function hc(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||oi.hasOwnProperty(n)&&oi[n]?(""+r).trim():r+"px"}function dc(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=hc(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Km=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ia(n,r){if(r){if(Km[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function sa(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oa=null;function aa(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var la=null,Sr=null,Cr=null;function fc(n){if(n=Ti(n)){if(typeof la!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Os(r),la(n.stateNode,n.type,r))}}function pc(n){Sr?Cr?Cr.push(n):Cr=[n]:Sr=n}function mc(){if(Sr){var n=Sr,r=Cr;if(Cr=Sr=null,fc(n),r)for(n=0;n<r.length;n++)fc(r[n])}}function gc(n,r){return n(r)}function yc(){}var ua=!1;function xc(n,r,a){if(ua)return n(r,a);ua=!0;try{return gc(n,r,a)}finally{ua=!1,(Sr!==null||Cr!==null)&&(yc(),mc())}}function ai(n,r){var a=n.stateNode;if(a===null)return null;var c=Os(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var ca=!1;if(h)try{var li={};Object.defineProperty(li,"passive",{get:function(){ca=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{ca=!1}function Zm(n,r,a,c,d,m,x,C,A){var L=Array.prototype.slice.call(arguments,3);try{r.apply(a,L)}catch(D){this.onError(D)}}var ui=!1,gs=null,ys=!1,ha=null,Jm={onError:function(n){ui=!0,gs=n}};function eg(n,r,a,c,d,m,x,C,A){ui=!1,gs=null,Zm.apply(Jm,arguments)}function tg(n,r,a,c,d,m,x,C,A){if(eg.apply(this,arguments),ui){if(ui){var L=gs;ui=!1,gs=null}else throw Error(t(198));ys||(ys=!0,ha=L)}}function tr(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function _c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function vc(n){if(tr(n)!==n)throw Error(t(188))}function ng(n){var r=n.alternate;if(!r){if(r=tr(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return vc(d),n;if(m===c)return vc(d),r;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var x=!1,C=d.child;C;){if(C===a){x=!0,a=d,c=m;break}if(C===c){x=!0,c=d,a=m;break}C=C.sibling}if(!x){for(C=m.child;C;){if(C===a){x=!0,a=m,c=d;break}if(C===c){x=!0,c=m,a=d;break}C=C.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function wc(n){return n=ng(n),n!==null?Sc(n):null}function Sc(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Sc(n);if(r!==null)return r;n=n.sibling}return null}var Cc=e.unstable_scheduleCallback,kc=e.unstable_cancelCallback,rg=e.unstable_shouldYield,ig=e.unstable_requestPaint,qe=e.unstable_now,sg=e.unstable_getCurrentPriorityLevel,da=e.unstable_ImmediatePriority,Ac=e.unstable_UserBlockingPriority,xs=e.unstable_NormalPriority,og=e.unstable_LowPriority,Pc=e.unstable_IdlePriority,_s=null,hn=null;function ag(n){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(_s,n,void 0,(n.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:cg,lg=Math.log,ug=Math.LN2;function cg(n){return n>>>=0,n===0?32:31-(lg(n)/ug|0)|0}var vs=64,ws=4194304;function ci(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ss(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,x=a&268435455;if(x!==0){var C=x&~d;C!==0?c=ci(C):(m&=x,m!==0&&(c=ci(m)))}else x=a&~d,x!==0?c=ci(x):m!==0&&(c=ci(m));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,m=r&-r,d>=m||d===16&&(m&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-qt(r),d=1<<a,c|=n[a],r&=~d;return c}function hg(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dg(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var x=31-qt(m),C=1<<x,A=d[x];A===-1?((C&a)===0||(C&c)!==0)&&(d[x]=hg(C,r)):A<=r&&(n.expiredLanes|=C),m&=~C}}function fa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function bc(){var n=vs;return vs<<=1,(vs&4194240)===0&&(vs=64),n}function pa(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function hi(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-qt(r),n[r]=a}function fg(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-qt(a),m=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function ma(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-qt(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Me=0;function Tc(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ec,ga,Mc,Rc,Ic,ya=!1,Cs=[],Rn=null,In=null,Fn=null,di=new Map,fi=new Map,Ln=[],pg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fc(n,r){switch(n){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":In=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":di.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":fi.delete(r.pointerId)}}function pi(n,r,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},r!==null&&(r=Ti(r),r!==null&&ga(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function mg(n,r,a,c,d){switch(r){case"focusin":return Rn=pi(Rn,n,r,a,c,d),!0;case"dragenter":return In=pi(In,n,r,a,c,d),!0;case"mouseover":return Fn=pi(Fn,n,r,a,c,d),!0;case"pointerover":var m=d.pointerId;return di.set(m,pi(di.get(m)||null,n,r,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,fi.set(m,pi(fi.get(m)||null,n,r,a,c,d)),!0}return!1}function Lc(n){var r=nr(n.target);if(r!==null){var a=tr(r);if(a!==null){if(r=a.tag,r===13){if(r=_c(a),r!==null){n.blockedOn=r,Ic(n.priority,function(){Mc(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ks(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=_a(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);oa=c,a.target.dispatchEvent(c),oa=null}else return r=Ti(a),r!==null&&ga(r),n.blockedOn=a,!1;r.shift()}return!0}function Bc(n,r,a){ks(n)&&a.delete(r)}function gg(){ya=!1,Rn!==null&&ks(Rn)&&(Rn=null),In!==null&&ks(In)&&(In=null),Fn!==null&&ks(Fn)&&(Fn=null),di.forEach(Bc),fi.forEach(Bc)}function mi(n,r){n.blockedOn===r&&(n.blockedOn=null,ya||(ya=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gg)))}function gi(n){function r(d){return mi(d,n)}if(0<Cs.length){mi(Cs[0],n);for(var a=1;a<Cs.length;a++){var c=Cs[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Rn!==null&&mi(Rn,n),In!==null&&mi(In,n),Fn!==null&&mi(Fn,n),di.forEach(r),fi.forEach(r),a=0;a<Ln.length;a++)c=Ln[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Ln.length&&(a=Ln[0],a.blockedOn===null);)Lc(a),a.blockedOn===null&&Ln.shift()}var kr=R.ReactCurrentBatchConfig,As=!0;function yg(n,r,a,c){var d=Me,m=kr.transition;kr.transition=null;try{Me=1,xa(n,r,a,c)}finally{Me=d,kr.transition=m}}function xg(n,r,a,c){var d=Me,m=kr.transition;kr.transition=null;try{Me=4,xa(n,r,a,c)}finally{Me=d,kr.transition=m}}function xa(n,r,a,c){if(As){var d=_a(n,r,a,c);if(d===null)za(n,r,c,Ps,a),Fc(n,c);else if(mg(d,n,r,a,c))c.stopPropagation();else if(Fc(n,c),r&4&&-1<pg.indexOf(n)){for(;d!==null;){var m=Ti(d);if(m!==null&&Ec(m),m=_a(n,r,a,c),m===null&&za(n,r,c,Ps,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else za(n,r,c,null,a)}}var Ps=null;function _a(n,r,a,c){if(Ps=null,n=aa(c),n=nr(n),n!==null)if(r=tr(n),r===null)n=null;else if(a=r.tag,a===13){if(n=_c(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Ps=n,null}function zc(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sg()){case da:return 1;case Ac:return 4;case xs:case og:return 16;case Pc:return 536870912;default:return 16}default:return 16}}var Bn=null,va=null,bs=null;function Nc(){if(bs)return bs;var n,r=va,a=r.length,c,d="value"in Bn?Bn.value:Bn.textContent,m=d.length;for(n=0;n<a&&r[n]===d[n];n++);var x=a-n;for(c=1;c<=x&&r[a-c]===d[m-c];c++);return bs=d.slice(n,1<c?1-c:void 0)}function Ts(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Es(){return!0}function Oc(){return!1}function Ft(n){function r(a,c,d,m,x){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Es:Oc,this.isPropagationStopped=Oc,this}return q(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),r}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wa=Ft(Ar),yi=q({},Ar,{view:0,detail:0}),_g=Ft(yi),Sa,Ca,xi,Ms=q({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Aa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xi&&(xi&&n.type==="mousemove"?(Sa=n.screenX-xi.screenX,Ca=n.screenY-xi.screenY):Ca=Sa=0,xi=n),Sa)},movementY:function(n){return"movementY"in n?n.movementY:Ca}}),Dc=Ft(Ms),vg=q({},Ms,{dataTransfer:0}),wg=Ft(vg),Sg=q({},yi,{relatedTarget:0}),ka=Ft(Sg),Cg=q({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),kg=Ft(Cg),Ag=q({},Ar,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Pg=Ft(Ag),bg=q({},Ar,{data:0}),Gc=Ft(bg),Tg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rg(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Mg[n])?!!r[n]:!1}function Aa(){return Rg}var Ig=q({},yi,{key:function(n){if(n.key){var r=Tg[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ts(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Eg[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Aa,charCode:function(n){return n.type==="keypress"?Ts(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ts(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fg=Ft(Ig),Lg=q({},Ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=Ft(Lg),Bg=q({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Aa}),zg=Ft(Bg),Ng=q({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),Og=Ft(Ng),Dg=q({},Ms,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Gg=Ft(Dg),Ug=[9,13,27,32],Pa=h&&"CompositionEvent"in window,_i=null;h&&"documentMode"in document&&(_i=document.documentMode);var jg=h&&"TextEvent"in window&&!_i,jc=h&&(!Pa||_i&&8<_i&&11>=_i),Wc=" ",Hc=!1;function Vc(n,r){switch(n){case"keyup":return Ug.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $c(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pr=!1;function Wg(n,r){switch(n){case"compositionend":return $c(r);case"keypress":return r.which!==32?null:(Hc=!0,Wc);case"textInput":return n=r.data,n===Wc&&Hc?null:n;default:return null}}function Hg(n,r){if(Pr)return n==="compositionend"||!Pa&&Vc(n,r)?(n=Nc(),bs=va=Bn=null,Pr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return jc&&r.locale!=="ko"?null:r.data;default:return null}}var Vg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Vg[n.type]:r==="textarea"}function Xc(n,r,a,c){pc(c),r=Bs(r,"onChange"),0<r.length&&(a=new wa("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var vi=null,wi=null;function $g(n){dh(n,0)}function Rs(n){var r=Rr(n);if(ke(r))return n}function Yg(n,r){if(n==="change")return r}var qc=!1;if(h){var ba;if(h){var Ta="oninput"in document;if(!Ta){var Qc=document.createElement("div");Qc.setAttribute("oninput","return;"),Ta=typeof Qc.oninput=="function"}ba=Ta}else ba=!1;qc=ba&&(!document.documentMode||9<document.documentMode)}function Kc(){vi&&(vi.detachEvent("onpropertychange",Zc),wi=vi=null)}function Zc(n){if(n.propertyName==="value"&&Rs(wi)){var r=[];Xc(r,wi,n,aa(n)),xc($g,r)}}function Xg(n,r,a){n==="focusin"?(Kc(),vi=r,wi=a,vi.attachEvent("onpropertychange",Zc)):n==="focusout"&&Kc()}function qg(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Rs(wi)}function Qg(n,r){if(n==="click")return Rs(r)}function Kg(n,r){if(n==="input"||n==="change")return Rs(r)}function Zg(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Qt=typeof Object.is=="function"?Object.is:Zg;function Si(n,r){if(Qt(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!f.call(r,d)||!Qt(n[d],r[d]))return!1}return!0}function Jc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function eh(n,r){var a=Jc(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jc(a)}}function th(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?th(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function nh(){for(var n=window,r=Ae();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Ae(n.document)}return r}function Ea(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function Jg(n){var r=nh(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&th(a.ownerDocument.documentElement,a)){if(c!==null&&Ea(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=eh(a,m);var x=eh(a,c);d&&x&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(r),n.extend(x.node,x.offset)):(r.setEnd(x.node,x.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ey=h&&"documentMode"in document&&11>=document.documentMode,br=null,Ma=null,Ci=null,Ra=!1;function rh(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ra||br==null||br!==Ae(c)||(c=br,"selectionStart"in c&&Ea(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ci&&Si(Ci,c)||(Ci=c,c=Bs(Ma,"onSelect"),0<c.length&&(r=new wa("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=br)))}function Is(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Tr={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionend:Is("Transition","TransitionEnd")},Ia={},ih={};h&&(ih=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);function Fs(n){if(Ia[n])return Ia[n];if(!Tr[n])return n;var r=Tr[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in ih)return Ia[n]=r[a];return n}var sh=Fs("animationend"),oh=Fs("animationiteration"),ah=Fs("animationstart"),lh=Fs("transitionend"),uh=new Map,ch="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(n,r){uh.set(n,r),l(r,[n])}for(var Fa=0;Fa<ch.length;Fa++){var La=ch[Fa],ty=La.toLowerCase(),ny=La[0].toUpperCase()+La.slice(1);zn(ty,"on"+ny)}zn(sh,"onAnimationEnd"),zn(oh,"onAnimationIteration"),zn(ah,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(lh,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ry=new Set("cancel close invalid load scroll toggle".split(" ").concat(ki));function hh(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,tg(c,r,void 0,n),n.currentTarget=null}function dh(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var x=c.length-1;0<=x;x--){var C=c[x],A=C.instance,L=C.currentTarget;if(C=C.listener,A!==m&&d.isPropagationStopped())break e;hh(d,C,L),m=A}else for(x=0;x<c.length;x++){if(C=c[x],A=C.instance,L=C.currentTarget,C=C.listener,A!==m&&d.isPropagationStopped())break e;hh(d,C,L),m=A}}}if(ys)throw n=ha,ys=!1,ha=null,n}function Le(n,r){var a=r[ja];a===void 0&&(a=r[ja]=new Set);var c=n+"__bubble";a.has(c)||(fh(r,n,2,!1),a.add(c))}function Ba(n,r,a){var c=0;r&&(c|=4),fh(a,n,c,r)}var Ls="_reactListening"+Math.random().toString(36).slice(2);function Ai(n){if(!n[Ls]){n[Ls]=!0,s.forEach(function(a){a!=="selectionchange"&&(ry.has(a)||Ba(a,!1,n),Ba(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Ls]||(r[Ls]=!0,Ba("selectionchange",!1,r))}}function fh(n,r,a,c){switch(zc(r)){case 1:var d=yg;break;case 4:d=xg;break;default:d=xa}a=d.bind(null,r,a,n),d=void 0,!ca||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function za(n,r,a,c,d){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(x===4)for(x=c.return;x!==null;){var A=x.tag;if((A===3||A===4)&&(A=x.stateNode.containerInfo,A===d||A.nodeType===8&&A.parentNode===d))return;x=x.return}for(;C!==null;){if(x=nr(C),x===null)return;if(A=x.tag,A===5||A===6){c=m=x;continue e}C=C.parentNode}}c=c.return}xc(function(){var L=m,D=aa(a),G=[];e:{var O=uh.get(n);if(O!==void 0){var Z=wa,te=n;switch(n){case"keypress":if(Ts(a)===0)break e;case"keydown":case"keyup":Z=Fg;break;case"focusin":te="focus",Z=ka;break;case"focusout":te="blur",Z=ka;break;case"beforeblur":case"afterblur":Z=ka;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=zg;break;case sh:case oh:case ah:Z=kg;break;case lh:Z=Og;break;case"scroll":Z=_g;break;case"wheel":Z=Gg;break;case"copy":case"cut":case"paste":Z=Pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Uc}var ie=(r&4)!==0,Qe=!ie&&n==="scroll",I=ie?O!==null?O+"Capture":null:O;ie=[];for(var T=L,F;T!==null;){F=T;var j=F.stateNode;if(F.tag===5&&j!==null&&(F=j,I!==null&&(j=ai(T,I),j!=null&&ie.push(Pi(T,j,F)))),Qe)break;T=T.return}0<ie.length&&(O=new Z(O,te,null,a,D),G.push({event:O,listeners:ie}))}}if((r&7)===0){e:{if(O=n==="mouseover"||n==="pointerover",Z=n==="mouseout"||n==="pointerout",O&&a!==oa&&(te=a.relatedTarget||a.fromElement)&&(nr(te)||te[xn]))break e;if((Z||O)&&(O=D.window===D?D:(O=D.ownerDocument)?O.defaultView||O.parentWindow:window,Z?(te=a.relatedTarget||a.toElement,Z=L,te=te?nr(te):null,te!==null&&(Qe=tr(te),te!==Qe||te.tag!==5&&te.tag!==6)&&(te=null)):(Z=null,te=L),Z!==te)){if(ie=Dc,j="onMouseLeave",I="onMouseEnter",T="mouse",(n==="pointerout"||n==="pointerover")&&(ie=Uc,j="onPointerLeave",I="onPointerEnter",T="pointer"),Qe=Z==null?O:Rr(Z),F=te==null?O:Rr(te),O=new ie(j,T+"leave",Z,a,D),O.target=Qe,O.relatedTarget=F,j=null,nr(D)===L&&(ie=new ie(I,T+"enter",te,a,D),ie.target=F,ie.relatedTarget=Qe,j=ie),Qe=j,Z&&te)t:{for(ie=Z,I=te,T=0,F=ie;F;F=Er(F))T++;for(F=0,j=I;j;j=Er(j))F++;for(;0<T-F;)ie=Er(ie),T--;for(;0<F-T;)I=Er(I),F--;for(;T--;){if(ie===I||I!==null&&ie===I.alternate)break t;ie=Er(ie),I=Er(I)}ie=null}else ie=null;Z!==null&&ph(G,O,Z,ie,!1),te!==null&&Qe!==null&&ph(G,Qe,te,ie,!0)}}e:{if(O=L?Rr(L):window,Z=O.nodeName&&O.nodeName.toLowerCase(),Z==="select"||Z==="input"&&O.type==="file")var se=Yg;else if(Yc(O))if(qc)se=Kg;else{se=qg;var ce=Xg}else(Z=O.nodeName)&&Z.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(se=Qg);if(se&&(se=se(n,L))){Xc(G,se,a,D);break e}ce&&ce(n,O,L),n==="focusout"&&(ce=O._wrapperState)&&ce.controlled&&O.type==="number"&&st(O,"number",O.value)}switch(ce=L?Rr(L):window,n){case"focusin":(Yc(ce)||ce.contentEditable==="true")&&(br=ce,Ma=L,Ci=null);break;case"focusout":Ci=Ma=br=null;break;case"mousedown":Ra=!0;break;case"contextmenu":case"mouseup":case"dragend":Ra=!1,rh(G,a,D);break;case"selectionchange":if(ey)break;case"keydown":case"keyup":rh(G,a,D)}var he;if(Pa)e:{switch(n){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Pr?Vc(n,a)&&(ye="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ye="onCompositionStart");ye&&(jc&&a.locale!=="ko"&&(Pr||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Pr&&(he=Nc()):(Bn=D,va="value"in Bn?Bn.value:Bn.textContent,Pr=!0)),ce=Bs(L,ye),0<ce.length&&(ye=new Gc(ye,n,null,a,D),G.push({event:ye,listeners:ce}),he?ye.data=he:(he=$c(a),he!==null&&(ye.data=he)))),(he=jg?Wg(n,a):Hg(n,a))&&(L=Bs(L,"onBeforeInput"),0<L.length&&(D=new Gc("onBeforeInput","beforeinput",null,a,D),G.push({event:D,listeners:L}),D.data=he))}dh(G,r)})}function Pi(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Bs(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ai(n,a),m!=null&&c.unshift(Pi(n,m,d)),m=ai(n,r),m!=null&&c.push(Pi(n,m,d))),n=n.return}return c}function Er(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ph(n,r,a,c,d){for(var m=r._reactName,x=[];a!==null&&a!==c;){var C=a,A=C.alternate,L=C.stateNode;if(A!==null&&A===c)break;C.tag===5&&L!==null&&(C=L,d?(A=ai(a,m),A!=null&&x.unshift(Pi(a,A,C))):d||(A=ai(a,m),A!=null&&x.push(Pi(a,A,C)))),a=a.return}x.length!==0&&n.push({event:r,listeners:x})}var iy=/\r\n?/g,sy=/\u0000|\uFFFD/g;function mh(n){return(typeof n=="string"?n:""+n).replace(iy,`
`).replace(sy,"")}function zs(n,r,a){if(r=mh(r),mh(n)!==r&&a)throw Error(t(425))}function Ns(){}var Na=null,Oa=null;function Da(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ga=typeof setTimeout=="function"?setTimeout:void 0,oy=typeof clearTimeout=="function"?clearTimeout:void 0,gh=typeof Promise=="function"?Promise:void 0,ay=typeof queueMicrotask=="function"?queueMicrotask:typeof gh<"u"?function(n){return gh.resolve(null).then(n).catch(ly)}:Ga;function ly(n){setTimeout(function(){throw n})}function Ua(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),gi(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);gi(r)}function Nn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function yh(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),dn="__reactFiber$"+Mr,bi="__reactProps$"+Mr,xn="__reactContainer$"+Mr,ja="__reactEvents$"+Mr,uy="__reactListeners$"+Mr,cy="__reactHandles$"+Mr;function nr(n){var r=n[dn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[xn]||a[dn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=yh(n);n!==null;){if(a=n[dn])return a;n=yh(n)}return r}n=a,a=n.parentNode}return null}function Ti(n){return n=n[dn]||n[xn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Rr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Os(n){return n[bi]||null}var Wa=[],Ir=-1;function On(n){return{current:n}}function Be(n){0>Ir||(n.current=Wa[Ir],Wa[Ir]=null,Ir--)}function Fe(n,r){Ir++,Wa[Ir]=n.current,n.current=r}var Dn={},pt=On(Dn),kt=On(!1),rr=Dn;function Fr(n,r){var a=n.type.contextTypes;if(!a)return Dn;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=r[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function At(n){return n=n.childContextTypes,n!=null}function Ds(){Be(kt),Be(pt)}function xh(n,r,a){if(pt.current!==Dn)throw Error(t(168));Fe(pt,r),Fe(kt,a)}function _h(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,re(n)||"Unknown",d));return q({},a,c)}function Gs(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Dn,rr=pt.current,Fe(pt,n),Fe(kt,kt.current),!0}function vh(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=_h(n,r,rr),c.__reactInternalMemoizedMergedChildContext=n,Be(kt),Be(pt),Fe(pt,n)):Be(kt),Fe(kt,a)}var _n=null,Us=!1,Ha=!1;function wh(n){_n===null?_n=[n]:_n.push(n)}function hy(n){Us=!0,wh(n)}function Gn(){if(!Ha&&_n!==null){Ha=!0;var n=0,r=Me;try{var a=_n;for(Me=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}_n=null,Us=!1}catch(d){throw _n!==null&&(_n=_n.slice(n+1)),Cc(da,Gn),d}finally{Me=r,Ha=!1}}return null}var Lr=[],Br=0,js=null,Ws=0,Dt=[],Gt=0,ir=null,vn=1,wn="";function sr(n,r){Lr[Br++]=Ws,Lr[Br++]=js,js=n,Ws=r}function Sh(n,r,a){Dt[Gt++]=vn,Dt[Gt++]=wn,Dt[Gt++]=ir,ir=n;var c=vn;n=wn;var d=32-qt(c)-1;c&=~(1<<d),a+=1;var m=32-qt(r)+d;if(30<m){var x=d-d%5;m=(c&(1<<x)-1).toString(32),c>>=x,d-=x,vn=1<<32-qt(r)+d|a<<d|c,wn=m+n}else vn=1<<m|a<<d|c,wn=n}function Va(n){n.return!==null&&(sr(n,1),Sh(n,1,0))}function $a(n){for(;n===js;)js=Lr[--Br],Lr[Br]=null,Ws=Lr[--Br],Lr[Br]=null;for(;n===ir;)ir=Dt[--Gt],Dt[Gt]=null,wn=Dt[--Gt],Dt[Gt]=null,vn=Dt[--Gt],Dt[Gt]=null}var Lt=null,Bt=null,De=!1,Kt=null;function Ch(n,r){var a=Ht(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function kh(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Lt=n,Bt=Nn(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Lt=n,Bt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=ir!==null?{id:vn,overflow:wn}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Ht(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,Lt=n,Bt=null,!0):!1;default:return!1}}function Ya(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Xa(n){if(De){var r=Bt;if(r){var a=r;if(!kh(n,r)){if(Ya(n))throw Error(t(418));r=Nn(a.nextSibling);var c=Lt;r&&kh(n,r)?Ch(c,a):(n.flags=n.flags&-4097|2,De=!1,Lt=n)}}else{if(Ya(n))throw Error(t(418));n.flags=n.flags&-4097|2,De=!1,Lt=n}}}function Ah(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Lt=n}function Hs(n){if(n!==Lt)return!1;if(!De)return Ah(n),De=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Da(n.type,n.memoizedProps)),r&&(r=Bt)){if(Ya(n))throw Ph(),Error(t(418));for(;r;)Ch(n,r),r=Nn(r.nextSibling)}if(Ah(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){Bt=Nn(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}Bt=null}}else Bt=Lt?Nn(n.stateNode.nextSibling):null;return!0}function Ph(){for(var n=Bt;n;)n=Nn(n.nextSibling)}function zr(){Bt=Lt=null,De=!1}function qa(n){Kt===null?Kt=[n]:Kt.push(n)}var dy=R.ReactCurrentBatchConfig;function Ei(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===m?r.ref:(r=function(x){var C=d.refs;x===null?delete C[m]:C[m]=x},r._stringRef=m,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Vs(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function bh(n){var r=n._init;return r(n._payload)}function Th(n){function r(I,T){if(n){var F=I.deletions;F===null?(I.deletions=[T],I.flags|=16):F.push(T)}}function a(I,T){if(!n)return null;for(;T!==null;)r(I,T),T=T.sibling;return null}function c(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function d(I,T){return I=Xn(I,T),I.index=0,I.sibling=null,I}function m(I,T,F){return I.index=F,n?(F=I.alternate,F!==null?(F=F.index,F<T?(I.flags|=2,T):F):(I.flags|=2,T)):(I.flags|=1048576,T)}function x(I){return n&&I.alternate===null&&(I.flags|=2),I}function C(I,T,F,j){return T===null||T.tag!==6?(T=Gl(F,I.mode,j),T.return=I,T):(T=d(T,F),T.return=I,T)}function A(I,T,F,j){var se=F.type;return se===B?D(I,T,F.props.children,j,F.key):T!==null&&(T.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===X&&bh(se)===T.type)?(j=d(T,F.props),j.ref=Ei(I,T,F),j.return=I,j):(j=go(F.type,F.key,F.props,null,I.mode,j),j.ref=Ei(I,T,F),j.return=I,j)}function L(I,T,F,j){return T===null||T.tag!==4||T.stateNode.containerInfo!==F.containerInfo||T.stateNode.implementation!==F.implementation?(T=Ul(F,I.mode,j),T.return=I,T):(T=d(T,F.children||[]),T.return=I,T)}function D(I,T,F,j,se){return T===null||T.tag!==7?(T=fr(F,I.mode,j,se),T.return=I,T):(T=d(T,F),T.return=I,T)}function G(I,T,F){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Gl(""+T,I.mode,F),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case U:return F=go(T.type,T.key,T.props,null,I.mode,F),F.ref=Ei(I,null,T),F.return=I,F;case z:return T=Ul(T,I.mode,F),T.return=I,T;case X:var j=T._init;return G(I,j(T._payload),F)}if(Ee(T)||W(T))return T=fr(T,I.mode,F,null),T.return=I,T;Vs(I,T)}return null}function O(I,T,F,j){var se=T!==null?T.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return se!==null?null:C(I,T,""+F,j);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case U:return F.key===se?A(I,T,F,j):null;case z:return F.key===se?L(I,T,F,j):null;case X:return se=F._init,O(I,T,se(F._payload),j)}if(Ee(F)||W(F))return se!==null?null:D(I,T,F,j,null);Vs(I,F)}return null}function Z(I,T,F,j,se){if(typeof j=="string"&&j!==""||typeof j=="number")return I=I.get(F)||null,C(T,I,""+j,se);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case U:return I=I.get(j.key===null?F:j.key)||null,A(T,I,j,se);case z:return I=I.get(j.key===null?F:j.key)||null,L(T,I,j,se);case X:var ce=j._init;return Z(I,T,F,ce(j._payload),se)}if(Ee(j)||W(j))return I=I.get(F)||null,D(T,I,j,se,null);Vs(T,j)}return null}function te(I,T,F,j){for(var se=null,ce=null,he=T,ye=T=0,lt=null;he!==null&&ye<F.length;ye++){he.index>ye?(lt=he,he=null):lt=he.sibling;var Te=O(I,he,F[ye],j);if(Te===null){he===null&&(he=lt);break}n&&he&&Te.alternate===null&&r(I,he),T=m(Te,T,ye),ce===null?se=Te:ce.sibling=Te,ce=Te,he=lt}if(ye===F.length)return a(I,he),De&&sr(I,ye),se;if(he===null){for(;ye<F.length;ye++)he=G(I,F[ye],j),he!==null&&(T=m(he,T,ye),ce===null?se=he:ce.sibling=he,ce=he);return De&&sr(I,ye),se}for(he=c(I,he);ye<F.length;ye++)lt=Z(he,I,ye,F[ye],j),lt!==null&&(n&&lt.alternate!==null&&he.delete(lt.key===null?ye:lt.key),T=m(lt,T,ye),ce===null?se=lt:ce.sibling=lt,ce=lt);return n&&he.forEach(function(qn){return r(I,qn)}),De&&sr(I,ye),se}function ie(I,T,F,j){var se=W(F);if(typeof se!="function")throw Error(t(150));if(F=se.call(F),F==null)throw Error(t(151));for(var ce=se=null,he=T,ye=T=0,lt=null,Te=F.next();he!==null&&!Te.done;ye++,Te=F.next()){he.index>ye?(lt=he,he=null):lt=he.sibling;var qn=O(I,he,Te.value,j);if(qn===null){he===null&&(he=lt);break}n&&he&&qn.alternate===null&&r(I,he),T=m(qn,T,ye),ce===null?se=qn:ce.sibling=qn,ce=qn,he=lt}if(Te.done)return a(I,he),De&&sr(I,ye),se;if(he===null){for(;!Te.done;ye++,Te=F.next())Te=G(I,Te.value,j),Te!==null&&(T=m(Te,T,ye),ce===null?se=Te:ce.sibling=Te,ce=Te);return De&&sr(I,ye),se}for(he=c(I,he);!Te.done;ye++,Te=F.next())Te=Z(he,I,ye,Te.value,j),Te!==null&&(n&&Te.alternate!==null&&he.delete(Te.key===null?ye:Te.key),T=m(Te,T,ye),ce===null?se=Te:ce.sibling=Te,ce=Te);return n&&he.forEach(function(Vy){return r(I,Vy)}),De&&sr(I,ye),se}function Qe(I,T,F,j){if(typeof F=="object"&&F!==null&&F.type===B&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case U:e:{for(var se=F.key,ce=T;ce!==null;){if(ce.key===se){if(se=F.type,se===B){if(ce.tag===7){a(I,ce.sibling),T=d(ce,F.props.children),T.return=I,I=T;break e}}else if(ce.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===X&&bh(se)===ce.type){a(I,ce.sibling),T=d(ce,F.props),T.ref=Ei(I,ce,F),T.return=I,I=T;break e}a(I,ce);break}else r(I,ce);ce=ce.sibling}F.type===B?(T=fr(F.props.children,I.mode,j,F.key),T.return=I,I=T):(j=go(F.type,F.key,F.props,null,I.mode,j),j.ref=Ei(I,T,F),j.return=I,I=j)}return x(I);case z:e:{for(ce=F.key;T!==null;){if(T.key===ce)if(T.tag===4&&T.stateNode.containerInfo===F.containerInfo&&T.stateNode.implementation===F.implementation){a(I,T.sibling),T=d(T,F.children||[]),T.return=I,I=T;break e}else{a(I,T);break}else r(I,T);T=T.sibling}T=Ul(F,I.mode,j),T.return=I,I=T}return x(I);case X:return ce=F._init,Qe(I,T,ce(F._payload),j)}if(Ee(F))return te(I,T,F,j);if(W(F))return ie(I,T,F,j);Vs(I,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,T!==null&&T.tag===6?(a(I,T.sibling),T=d(T,F),T.return=I,I=T):(a(I,T),T=Gl(F,I.mode,j),T.return=I,I=T),x(I)):a(I,T)}return Qe}var Nr=Th(!0),Eh=Th(!1),$s=On(null),Ys=null,Or=null,Qa=null;function Ka(){Qa=Or=Ys=null}function Za(n){var r=$s.current;Be($s),n._currentValue=r}function Ja(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Dr(n,r){Ys=n,Qa=Or=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Pt=!0),n.firstContext=null)}function Ut(n){var r=n._currentValue;if(Qa!==n)if(n={context:n,memoizedValue:r,next:null},Or===null){if(Ys===null)throw Error(t(308));Or=n,Ys.dependencies={lanes:0,firstContext:n}}else Or=Or.next=n;return r}var or=null;function el(n){or===null?or=[n]:or.push(n)}function Mh(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,el(r)):(a.next=d.next,d.next=a),r.interleaved=a,Sn(n,c)}function Sn(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Un=!1;function tl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rh(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Cn(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function jn(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(be&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,Sn(n,a)}return d=c.interleaved,d===null?(r.next=r,el(c)):(r.next=d.next,d.next=r),c.interleaved=r,Sn(n,a)}function Xs(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,ma(n,a)}}function Ih(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?d=m=r:m=m.next=r}else d=m=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function qs(n,r,a,c){var d=n.updateQueue;Un=!1;var m=d.firstBaseUpdate,x=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var A=C,L=A.next;A.next=null,x===null?m=L:x.next=L,x=A;var D=n.alternate;D!==null&&(D=D.updateQueue,C=D.lastBaseUpdate,C!==x&&(C===null?D.firstBaseUpdate=L:C.next=L,D.lastBaseUpdate=A))}if(m!==null){var G=d.baseState;x=0,D=L=A=null,C=m;do{var O=C.lane,Z=C.eventTime;if((c&O)===O){D!==null&&(D=D.next={eventTime:Z,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var te=n,ie=C;switch(O=r,Z=a,ie.tag){case 1:if(te=ie.payload,typeof te=="function"){G=te.call(Z,G,O);break e}G=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=ie.payload,O=typeof te=="function"?te.call(Z,G,O):te,O==null)break e;G=q({},G,O);break e;case 2:Un=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,O=d.effects,O===null?d.effects=[C]:O.push(C))}else Z={eventTime:Z,lane:O,tag:C.tag,payload:C.payload,callback:C.callback,next:null},D===null?(L=D=Z,A=G):D=D.next=Z,x|=O;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;O=C,C=O.next,O.next=null,d.lastBaseUpdate=O,d.shared.pending=null}}while(!0);if(D===null&&(A=G),d.baseState=A,d.firstBaseUpdate=L,d.lastBaseUpdate=D,r=d.shared.interleaved,r!==null){d=r;do x|=d.lane,d=d.next;while(d!==r)}else m===null&&(d.shared.lanes=0);ur|=x,n.lanes=x,n.memoizedState=G}}function Fh(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Mi={},fn=On(Mi),Ri=On(Mi),Ii=On(Mi);function ar(n){if(n===Mi)throw Error(t(174));return n}function nl(n,r){switch(Fe(Ii,r),Fe(Ri,n),Fe(fn,Mi),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ra(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=ra(r,n)}Be(fn),Fe(fn,r)}function Gr(){Be(fn),Be(Ri),Be(Ii)}function Lh(n){ar(Ii.current);var r=ar(fn.current),a=ra(r,n.type);r!==a&&(Fe(Ri,n),Fe(fn,a))}function rl(n){Ri.current===n&&(Be(fn),Be(Ri))}var je=On(0);function Qs(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var il=[];function sl(){for(var n=0;n<il.length;n++)il[n]._workInProgressVersionPrimary=null;il.length=0}var Ks=R.ReactCurrentDispatcher,ol=R.ReactCurrentBatchConfig,lr=0,We=null,tt=null,ot=null,Zs=!1,Fi=!1,Li=0,fy=0;function mt(){throw Error(t(321))}function al(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Qt(n[a],r[a]))return!1;return!0}function ll(n,r,a,c,d,m){if(lr=m,We=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ks.current=n===null||n.memoizedState===null?yy:xy,n=a(c,d),Fi){m=0;do{if(Fi=!1,Li=0,25<=m)throw Error(t(301));m+=1,ot=tt=null,r.updateQueue=null,Ks.current=_y,n=a(c,d)}while(Fi)}if(Ks.current=to,r=tt!==null&&tt.next!==null,lr=0,ot=tt=We=null,Zs=!1,r)throw Error(t(300));return n}function ul(){var n=Li!==0;return Li=0,n}function pn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?We.memoizedState=ot=n:ot=ot.next=n,ot}function jt(){if(tt===null){var n=We.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var r=ot===null?We.memoizedState:ot.next;if(r!==null)ot=r,tt=n;else{if(n===null)throw Error(t(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ot===null?We.memoizedState=ot=n:ot=ot.next=n}return ot}function Bi(n,r){return typeof r=="function"?r(n):r}function cl(n){var r=jt(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=tt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var x=d.next;d.next=m.next,m.next=x}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var C=x=null,A=null,L=m;do{var D=L.lane;if((lr&D)===D)A!==null&&(A=A.next={lane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),c=L.hasEagerState?L.eagerState:n(c,L.action);else{var G={lane:D,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null};A===null?(C=A=G,x=c):A=A.next=G,We.lanes|=D,ur|=D}L=L.next}while(L!==null&&L!==m);A===null?x=c:A.next=C,Qt(c,r.memoizedState)||(Pt=!0),r.memoizedState=c,r.baseState=x,r.baseQueue=A,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,We.lanes|=m,ur|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function hl(n){var r=jt(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=r.memoizedState;if(d!==null){a.pending=null;var x=d=d.next;do m=n(m,x.action),x=x.next;while(x!==d);Qt(m,r.memoizedState)||(Pt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,c]}function Bh(){}function zh(n,r){var a=We,c=jt(),d=r(),m=!Qt(c.memoizedState,d);if(m&&(c.memoizedState=d,Pt=!0),c=c.queue,dl(Dh.bind(null,a,c,n),[n]),c.getSnapshot!==r||m||ot!==null&&ot.memoizedState.tag&1){if(a.flags|=2048,zi(9,Oh.bind(null,a,c,d,r),void 0,null),at===null)throw Error(t(349));(lr&30)!==0||Nh(a,r,d)}return d}function Nh(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=We.updateQueue,r===null?(r={lastEffect:null,stores:null},We.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Oh(n,r,a,c){r.value=a,r.getSnapshot=c,Gh(r)&&Uh(n)}function Dh(n,r,a){return a(function(){Gh(r)&&Uh(n)})}function Gh(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Qt(n,a)}catch{return!0}}function Uh(n){var r=Sn(n,1);r!==null&&tn(r,n,1,-1)}function jh(n){var r=pn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:n},r.queue=n,n=n.dispatch=gy.bind(null,We,n),[r.memoizedState,n]}function zi(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=We.updateQueue,r===null?(r={lastEffect:null,stores:null},We.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function Wh(){return jt().memoizedState}function Js(n,r,a,c){var d=pn();We.flags|=n,d.memoizedState=zi(1|r,a,void 0,c===void 0?null:c)}function eo(n,r,a,c){var d=jt();c=c===void 0?null:c;var m=void 0;if(tt!==null){var x=tt.memoizedState;if(m=x.destroy,c!==null&&al(c,x.deps)){d.memoizedState=zi(r,a,m,c);return}}We.flags|=n,d.memoizedState=zi(1|r,a,m,c)}function Hh(n,r){return Js(8390656,8,n,r)}function dl(n,r){return eo(2048,8,n,r)}function Vh(n,r){return eo(4,2,n,r)}function $h(n,r){return eo(4,4,n,r)}function Yh(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Xh(n,r,a){return a=a!=null?a.concat([n]):null,eo(4,4,Yh.bind(null,r,n),a)}function fl(){}function qh(n,r){var a=jt();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&al(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Qh(n,r){var a=jt();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&al(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function Kh(n,r,a){return(lr&21)===0?(n.baseState&&(n.baseState=!1,Pt=!0),n.memoizedState=a):(Qt(a,r)||(a=bc(),We.lanes|=a,ur|=a,n.baseState=!0),r)}function py(n,r){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var c=ol.transition;ol.transition={};try{n(!1),r()}finally{Me=a,ol.transition=c}}function Zh(){return jt().memoizedState}function my(n,r,a){var c=$n(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Jh(n))ed(r,a);else if(a=Mh(n,r,a,c),a!==null){var d=wt();tn(a,n,c,d),td(a,r,c)}}function gy(n,r,a){var c=$n(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Jh(n))ed(r,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,C=m(x,a);if(d.hasEagerState=!0,d.eagerState=C,Qt(C,x)){var A=r.interleaved;A===null?(d.next=d,el(r)):(d.next=A.next,A.next=d),r.interleaved=d;return}}catch{}finally{}a=Mh(n,r,d,c),a!==null&&(d=wt(),tn(a,n,c,d),td(a,r,c))}}function Jh(n){var r=n.alternate;return n===We||r!==null&&r===We}function ed(n,r){Fi=Zs=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function td(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,ma(n,a)}}var to={readContext:Ut,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},yy={readContext:Ut,useCallback:function(n,r){return pn().memoizedState=[n,r===void 0?null:r],n},useContext:Ut,useEffect:Hh,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Js(4194308,4,Yh.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Js(4194308,4,n,r)},useInsertionEffect:function(n,r){return Js(4,2,n,r)},useMemo:function(n,r){var a=pn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=pn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=my.bind(null,We,n),[c.memoizedState,n]},useRef:function(n){var r=pn();return n={current:n},r.memoizedState=n},useState:jh,useDebugValue:fl,useDeferredValue:function(n){return pn().memoizedState=n},useTransition:function(){var n=jh(!1),r=n[0];return n=py.bind(null,n[1]),pn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=We,d=pn();if(De){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),at===null)throw Error(t(349));(lr&30)!==0||Nh(c,r,a)}d.memoizedState=a;var m={value:a,getSnapshot:r};return d.queue=m,Hh(Dh.bind(null,c,m,n),[n]),c.flags|=2048,zi(9,Oh.bind(null,c,m,a,r),void 0,null),a},useId:function(){var n=pn(),r=at.identifierPrefix;if(De){var a=wn,c=vn;a=(c&~(1<<32-qt(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=Li++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=fy++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},xy={readContext:Ut,useCallback:qh,useContext:Ut,useEffect:dl,useImperativeHandle:Xh,useInsertionEffect:Vh,useLayoutEffect:$h,useMemo:Qh,useReducer:cl,useRef:Wh,useState:function(){return cl(Bi)},useDebugValue:fl,useDeferredValue:function(n){var r=jt();return Kh(r,tt.memoizedState,n)},useTransition:function(){var n=cl(Bi)[0],r=jt().memoizedState;return[n,r]},useMutableSource:Bh,useSyncExternalStore:zh,useId:Zh,unstable_isNewReconciler:!1},_y={readContext:Ut,useCallback:qh,useContext:Ut,useEffect:dl,useImperativeHandle:Xh,useInsertionEffect:Vh,useLayoutEffect:$h,useMemo:Qh,useReducer:hl,useRef:Wh,useState:function(){return hl(Bi)},useDebugValue:fl,useDeferredValue:function(n){var r=jt();return tt===null?r.memoizedState=n:Kh(r,tt.memoizedState,n)},useTransition:function(){var n=hl(Bi)[0],r=jt().memoizedState;return[n,r]},useMutableSource:Bh,useSyncExternalStore:zh,useId:Zh,unstable_isNewReconciler:!1};function Zt(n,r){if(n&&n.defaultProps){r=q({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function pl(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:q({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var no={isMounted:function(n){return(n=n._reactInternals)?tr(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=wt(),d=$n(n),m=Cn(c,d);m.payload=r,a!=null&&(m.callback=a),r=jn(n,m,d),r!==null&&(tn(r,n,d,c),Xs(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=wt(),d=$n(n),m=Cn(c,d);m.tag=1,m.payload=r,a!=null&&(m.callback=a),r=jn(n,m,d),r!==null&&(tn(r,n,d,c),Xs(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=wt(),c=$n(n),d=Cn(a,c);d.tag=2,r!=null&&(d.callback=r),r=jn(n,d,c),r!==null&&(tn(r,n,c,a),Xs(r,n,c))}};function nd(n,r,a,c,d,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,x):r.prototype&&r.prototype.isPureReactComponent?!Si(a,c)||!Si(d,m):!0}function rd(n,r,a){var c=!1,d=Dn,m=r.contextType;return typeof m=="object"&&m!==null?m=Ut(m):(d=At(r)?rr:pt.current,c=r.contextTypes,m=(c=c!=null)?Fr(n,d):Dn),r=new r(a,m),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=no,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),r}function id(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&no.enqueueReplaceState(r,r.state,null)}function ml(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},tl(n);var m=r.contextType;typeof m=="object"&&m!==null?d.context=Ut(m):(m=At(r)?rr:pt.current,d.context=Fr(n,m)),d.state=n.memoizedState,m=r.getDerivedStateFromProps,typeof m=="function"&&(pl(n,r,m,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&no.enqueueReplaceState(d,d.state,null),qs(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Ur(n,r){try{var a="",c=r;do a+=pe(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:r,stack:d,digest:null}}function gl(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function yl(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var vy=typeof WeakMap=="function"?WeakMap:Map;function sd(n,r,a){a=Cn(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){uo||(uo=!0,Il=c),yl(n,r)},a}function od(n,r,a){a=Cn(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){yl(n,r)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){yl(n,r),typeof c!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var x=r.stack;this.componentDidCatch(r.value,{componentStack:x!==null?x:""})}),a}function ad(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new vy;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=Ly.bind(null,n,r,a),r.then(n,n))}function ld(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function ud(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Cn(-1,1),r.tag=2,jn(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var wy=R.ReactCurrentOwner,Pt=!1;function vt(n,r,a,c){r.child=n===null?Eh(r,null,a,c):Nr(r,n.child,a,c)}function cd(n,r,a,c,d){a=a.render;var m=r.ref;return Dr(r,d),c=ll(n,r,a,c,m,d),a=ul(),n!==null&&!Pt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,kn(n,r,d)):(De&&a&&Va(r),r.flags|=1,vt(n,r,c,d),r.child)}function hd(n,r,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!Dl(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=m,dd(n,r,m,c,d)):(n=go(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,(n.lanes&d)===0){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:Si,a(x,c)&&n.ref===r.ref)return kn(n,r,d)}return r.flags|=1,n=Xn(m,c),n.ref=r.ref,n.return=r,r.child=n}function dd(n,r,a,c,d){if(n!==null){var m=n.memoizedProps;if(Si(m,c)&&n.ref===r.ref)if(Pt=!1,r.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Pt=!0);else return r.lanes=n.lanes,kn(n,r,d)}return xl(n,r,a,c,d)}function fd(n,r,a){var c=r.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Wr,zt),zt|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Fe(Wr,zt),zt|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Fe(Wr,zt),zt|=c}else m!==null?(c=m.baseLanes|a,r.memoizedState=null):c=a,Fe(Wr,zt),zt|=c;return vt(n,r,d,a),r.child}function pd(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function xl(n,r,a,c,d){var m=At(a)?rr:pt.current;return m=Fr(r,m),Dr(r,d),a=ll(n,r,a,c,m,d),c=ul(),n!==null&&!Pt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,kn(n,r,d)):(De&&c&&Va(r),r.flags|=1,vt(n,r,a,d),r.child)}function md(n,r,a,c,d){if(At(a)){var m=!0;Gs(r)}else m=!1;if(Dr(r,d),r.stateNode===null)io(n,r),rd(r,a,c),ml(r,a,c,d),c=!0;else if(n===null){var x=r.stateNode,C=r.memoizedProps;x.props=C;var A=x.context,L=a.contextType;typeof L=="object"&&L!==null?L=Ut(L):(L=At(a)?rr:pt.current,L=Fr(r,L));var D=a.getDerivedStateFromProps,G=typeof D=="function"||typeof x.getSnapshotBeforeUpdate=="function";G||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==c||A!==L)&&id(r,x,c,L),Un=!1;var O=r.memoizedState;x.state=O,qs(r,c,x,d),A=r.memoizedState,C!==c||O!==A||kt.current||Un?(typeof D=="function"&&(pl(r,a,D,c),A=r.memoizedState),(C=Un||nd(r,a,C,c,O,A,L))?(G||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=A),x.props=c,x.state=A,x.context=L,c=C):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{x=r.stateNode,Rh(n,r),C=r.memoizedProps,L=r.type===r.elementType?C:Zt(r.type,C),x.props=L,G=r.pendingProps,O=x.context,A=a.contextType,typeof A=="object"&&A!==null?A=Ut(A):(A=At(a)?rr:pt.current,A=Fr(r,A));var Z=a.getDerivedStateFromProps;(D=typeof Z=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==G||O!==A)&&id(r,x,c,A),Un=!1,O=r.memoizedState,x.state=O,qs(r,c,x,d);var te=r.memoizedState;C!==G||O!==te||kt.current||Un?(typeof Z=="function"&&(pl(r,a,Z,c),te=r.memoizedState),(L=Un||nd(r,a,L,c,O,te,A)||!1)?(D||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,te,A),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,te,A)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===n.memoizedProps&&O===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&O===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=te),x.props=c,x.state=te,x.context=A,c=L):(typeof x.componentDidUpdate!="function"||C===n.memoizedProps&&O===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&O===n.memoizedState||(r.flags|=1024),c=!1)}return _l(n,r,a,c,m,d)}function _l(n,r,a,c,d,m){pd(n,r);var x=(r.flags&128)!==0;if(!c&&!x)return d&&vh(r,a,!1),kn(n,r,m);c=r.stateNode,wy.current=r;var C=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&x?(r.child=Nr(r,n.child,null,m),r.child=Nr(r,null,C,m)):vt(n,r,C,m),r.memoizedState=c.state,d&&vh(r,a,!0),r.child}function gd(n){var r=n.stateNode;r.pendingContext?xh(n,r.pendingContext,r.pendingContext!==r.context):r.context&&xh(n,r.context,!1),nl(n,r.containerInfo)}function yd(n,r,a,c,d){return zr(),qa(d),r.flags|=256,vt(n,r,a,c),r.child}var vl={dehydrated:null,treeContext:null,retryLane:0};function wl(n){return{baseLanes:n,cachePool:null,transitions:null}}function xd(n,r,a){var c=r.pendingProps,d=je.current,m=!1,x=(r.flags&128)!==0,C;if((C=x)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(m=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Fe(je,d&1),n===null)return Xa(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(x=c.children,n=c.fallback,m?(c=r.mode,m=r.child,x={mode:"hidden",children:x},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=x):m=yo(x,c,0,null),n=fr(n,c,a,null),m.return=r,n.return=r,m.sibling=n,r.child=m,r.child.memoizedState=wl(a),r.memoizedState=vl,n):Sl(r,x));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return Sy(n,r,x,c,C,d,a);if(m){m=c.fallback,x=r.mode,d=n.child,C=d.sibling;var A={mode:"hidden",children:c.children};return(x&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=A,r.deletions=null):(c=Xn(d,A),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?m=Xn(C,m):(m=fr(m,x,a,null),m.flags|=2),m.return=r,c.return=r,c.sibling=m,r.child=c,c=m,m=r.child,x=n.child.memoizedState,x=x===null?wl(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},m.memoizedState=x,m.childLanes=n.childLanes&~a,r.memoizedState=vl,c}return m=n.child,n=m.sibling,c=Xn(m,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function Sl(n,r){return r=yo({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function ro(n,r,a,c){return c!==null&&qa(c),Nr(r,n.child,null,a),n=Sl(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Sy(n,r,a,c,d,m,x){if(a)return r.flags&256?(r.flags&=-257,c=gl(Error(t(422))),ro(n,r,x,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(m=c.fallback,d=r.mode,c=yo({mode:"visible",children:c.children},d,0,null),m=fr(m,d,x,null),m.flags|=2,c.return=r,m.return=r,c.sibling=m,r.child=c,(r.mode&1)!==0&&Nr(r,n.child,null,x),r.child.memoizedState=wl(x),r.memoizedState=vl,m);if((r.mode&1)===0)return ro(n,r,x,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,m=Error(t(419)),c=gl(m,c,void 0),ro(n,r,x,c)}if(C=(x&n.childLanes)!==0,Pt||C){if(c=at,c!==null){switch(x&-x){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|x))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Sn(n,d),tn(c,n,d,-1))}return Ol(),c=gl(Error(t(421))),ro(n,r,x,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=By.bind(null,n),d._reactRetry=r,null):(n=m.treeContext,Bt=Nn(d.nextSibling),Lt=r,De=!0,Kt=null,n!==null&&(Dt[Gt++]=vn,Dt[Gt++]=wn,Dt[Gt++]=ir,vn=n.id,wn=n.overflow,ir=r),r=Sl(r,c.children),r.flags|=4096,r)}function _d(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Ja(n.return,r,a)}function Cl(n,r,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function vd(n,r,a){var c=r.pendingProps,d=c.revealOrder,m=c.tail;if(vt(n,r,c.children,a),c=je.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_d(n,a,r);else if(n.tag===19)_d(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Fe(je,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&Qs(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Cl(r,!1,d,a,m);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&Qs(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Cl(r,!0,a,null,m);break;case"together":Cl(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function io(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function kn(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),ur|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=Xn(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Xn(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Cy(n,r,a){switch(r.tag){case 3:gd(r),zr();break;case 5:Lh(r);break;case 1:At(r.type)&&Gs(r);break;case 4:nl(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Fe($s,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Fe(je,je.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?xd(n,r,a):(Fe(je,je.current&1),n=kn(n,r,a),n!==null?n.sibling:null);Fe(je,je.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return vd(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Fe(je,je.current),c)break;return null;case 22:case 23:return r.lanes=0,fd(n,r,a)}return kn(n,r,a)}var wd,kl,Sd,Cd;wd=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},kl=function(){},Sd=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,ar(fn.current);var m=null;switch(a){case"input":d=Ve(n,d),c=Ve(n,c),m=[];break;case"select":d=q({},d,{value:void 0}),c=q({},c,{value:void 0}),m=[];break;case"textarea":d=It(n,d),c=It(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ns)}ia(a,c);var x;a=null;for(L in d)if(!c.hasOwnProperty(L)&&d.hasOwnProperty(L)&&d[L]!=null)if(L==="style"){var C=d[L];for(x in C)C.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else L!=="dangerouslySetInnerHTML"&&L!=="children"&&L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(o.hasOwnProperty(L)?m||(m=[]):(m=m||[]).push(L,null));for(L in c){var A=c[L];if(C=d!=null?d[L]:void 0,c.hasOwnProperty(L)&&A!==C&&(A!=null||C!=null))if(L==="style")if(C){for(x in C)!C.hasOwnProperty(x)||A&&A.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in A)A.hasOwnProperty(x)&&C[x]!==A[x]&&(a||(a={}),a[x]=A[x])}else a||(m||(m=[]),m.push(L,a)),a=A;else L==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,C=C?C.__html:void 0,A!=null&&C!==A&&(m=m||[]).push(L,A)):L==="children"?typeof A!="string"&&typeof A!="number"||(m=m||[]).push(L,""+A):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&(o.hasOwnProperty(L)?(A!=null&&L==="onScroll"&&Le("scroll",n),m||C===A||(m=[])):(m=m||[]).push(L,A))}a&&(m=m||[]).push("style",a);var L=m;(r.updateQueue=L)&&(r.flags|=4)}},Cd=function(n,r,a,c){a!==c&&(r.flags|=4)};function Ni(n,r){if(!De)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function gt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function ky(n,r,a){var c=r.pendingProps;switch($a(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(r),null;case 1:return At(r.type)&&Ds(),gt(r),null;case 3:return c=r.stateNode,Gr(),Be(kt),Be(pt),sl(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Hs(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Kt!==null&&(Bl(Kt),Kt=null))),kl(n,r),gt(r),null;case 5:rl(r);var d=ar(Ii.current);if(a=r.type,n!==null&&r.stateNode!=null)Sd(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return gt(r),null}if(n=ar(fn.current),Hs(r)){c=r.stateNode,a=r.type;var m=r.memoizedProps;switch(c[dn]=r,c[bi]=m,n=(r.mode&1)!==0,a){case"dialog":Le("cancel",c),Le("close",c);break;case"iframe":case"object":case"embed":Le("load",c);break;case"video":case"audio":for(d=0;d<ki.length;d++)Le(ki[d],c);break;case"source":Le("error",c);break;case"img":case"image":case"link":Le("error",c),Le("load",c);break;case"details":Le("toggle",c);break;case"input":Ge(c,m),Le("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Le("invalid",c);break;case"textarea":Xt(c,m),Le("invalid",c)}ia(a,m),d=null;for(var x in m)if(m.hasOwnProperty(x)){var C=m[x];x==="children"?typeof C=="string"?c.textContent!==C&&(m.suppressHydrationWarning!==!0&&zs(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(m.suppressHydrationWarning!==!0&&zs(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(x)&&C!=null&&x==="onScroll"&&Le("scroll",c)}switch(a){case"input":fe(c),ct(c,m,!0);break;case"textarea":fe(c),lc(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Ns)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{x=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=uc(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=x.createElement(a,{is:c.is}):(n=x.createElement(a),a==="select"&&(x=n,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):n=x.createElementNS(n,a),n[dn]=r,n[bi]=c,wd(n,r,!1,!1),r.stateNode=n;e:{switch(x=sa(a,c),a){case"dialog":Le("cancel",n),Le("close",n),d=c;break;case"iframe":case"object":case"embed":Le("load",n),d=c;break;case"video":case"audio":for(d=0;d<ki.length;d++)Le(ki[d],n);d=c;break;case"source":Le("error",n),d=c;break;case"img":case"image":case"link":Le("error",n),Le("load",n),d=c;break;case"details":Le("toggle",n),d=c;break;case"input":Ge(n,c),d=Ve(n,c),Le("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=q({},c,{value:void 0}),Le("invalid",n);break;case"textarea":Xt(n,c),d=It(n,c),Le("invalid",n);break;default:d=c}ia(a,d),C=d;for(m in C)if(C.hasOwnProperty(m)){var A=C[m];m==="style"?dc(n,A):m==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&cc(n,A)):m==="children"?typeof A=="string"?(a!=="textarea"||A!=="")&&si(n,A):typeof A=="number"&&si(n,""+A):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?A!=null&&m==="onScroll"&&Le("scroll",n):A!=null&&E(n,m,A,x))}switch(a){case"input":fe(n),ct(n,c,!1);break;case"textarea":fe(n),lc(n);break;case"option":c.value!=null&&n.setAttribute("value",""+K(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?Ct(n,!!c.multiple,m,!1):c.defaultValue!=null&&Ct(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Ns)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return gt(r),null;case 6:if(n&&r.stateNode!=null)Cd(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=ar(Ii.current),ar(fn.current),Hs(r)){if(c=r.stateNode,a=r.memoizedProps,c[dn]=r,(m=c.nodeValue!==a)&&(n=Lt,n!==null))switch(n.tag){case 3:zs(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&zs(c.nodeValue,a,(n.mode&1)!==0)}m&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[dn]=r,r.stateNode=c}return gt(r),null;case 13:if(Be(je),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(De&&Bt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Ph(),zr(),r.flags|=98560,m=!1;else if(m=Hs(r),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[dn]=r}else zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),m=!1}else Kt!==null&&(Bl(Kt),Kt=null),m=!0;if(!m)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(je.current&1)!==0?nt===0&&(nt=3):Ol())),r.updateQueue!==null&&(r.flags|=4),gt(r),null);case 4:return Gr(),kl(n,r),n===null&&Ai(r.stateNode.containerInfo),gt(r),null;case 10:return Za(r.type._context),gt(r),null;case 17:return At(r.type)&&Ds(),gt(r),null;case 19:if(Be(je),m=r.memoizedState,m===null)return gt(r),null;if(c=(r.flags&128)!==0,x=m.rendering,x===null)if(c)Ni(m,!1);else{if(nt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(x=Qs(n),x!==null){for(r.flags|=128,Ni(m,!1),c=x.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)m=a,n=c,m.flags&=14680066,x=m.alternate,x===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=x.childLanes,m.lanes=x.lanes,m.child=x.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=x.memoizedProps,m.memoizedState=x.memoizedState,m.updateQueue=x.updateQueue,m.type=x.type,n=x.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Fe(je,je.current&1|2),r.child}n=n.sibling}m.tail!==null&&qe()>Hr&&(r.flags|=128,c=!0,Ni(m,!1),r.lanes=4194304)}else{if(!c)if(n=Qs(x),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Ni(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!De)return gt(r),null}else 2*qe()-m.renderingStartTime>Hr&&a!==1073741824&&(r.flags|=128,c=!0,Ni(m,!1),r.lanes=4194304);m.isBackwards?(x.sibling=r.child,r.child=x):(a=m.last,a!==null?a.sibling=x:r.child=x,m.last=x)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=qe(),r.sibling=null,a=je.current,Fe(je,c?a&1|2:a&1),r):(gt(r),null);case 22:case 23:return Nl(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(zt&1073741824)!==0&&(gt(r),r.subtreeFlags&6&&(r.flags|=8192)):gt(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function Ay(n,r){switch($a(r),r.tag){case 1:return At(r.type)&&Ds(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Gr(),Be(kt),Be(pt),sl(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return rl(r),null;case 13:if(Be(je),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));zr()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Be(je),null;case 4:return Gr(),null;case 10:return Za(r.type._context),null;case 22:case 23:return Nl(),null;case 24:return null;default:return null}}var so=!1,yt=!1,Py=typeof WeakSet=="function"?WeakSet:Set,ee=null;function jr(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){$e(n,r,c)}else a.current=null}function Al(n,r,a){try{a()}catch(c){$e(n,r,c)}}var kd=!1;function by(n,r){if(Na=As,n=nh(),Ea(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,C=-1,A=-1,L=0,D=0,G=n,O=null;t:for(;;){for(var Z;G!==a||d!==0&&G.nodeType!==3||(C=x+d),G!==m||c!==0&&G.nodeType!==3||(A=x+c),G.nodeType===3&&(x+=G.nodeValue.length),(Z=G.firstChild)!==null;)O=G,G=Z;for(;;){if(G===n)break t;if(O===a&&++L===d&&(C=x),O===m&&++D===c&&(A=x),(Z=G.nextSibling)!==null)break;G=O,O=G.parentNode}G=Z}a=C===-1||A===-1?null:{start:C,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(Oa={focusedElem:n,selectionRange:a},As=!1,ee=r;ee!==null;)if(r=ee,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ee=n;else for(;ee!==null;){r=ee;try{var te=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var ie=te.memoizedProps,Qe=te.memoizedState,I=r.stateNode,T=I.getSnapshotBeforeUpdate(r.elementType===r.type?ie:Zt(r.type,ie),Qe);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(j){$e(r,r.return,j)}if(n=r.sibling,n!==null){n.return=r.return,ee=n;break}ee=r.return}return te=kd,kd=!1,te}function Oi(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&Al(r,a,m)}d=d.next}while(d!==c)}}function oo(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function Pl(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Ad(n){var r=n.alternate;r!==null&&(n.alternate=null,Ad(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[dn],delete r[bi],delete r[ja],delete r[uy],delete r[cy])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Pd(n){return n.tag===5||n.tag===3||n.tag===4}function bd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Pd(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function bl(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ns));else if(c!==4&&(n=n.child,n!==null))for(bl(n,r,a),n=n.sibling;n!==null;)bl(n,r,a),n=n.sibling}function Tl(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Tl(n,r,a),n=n.sibling;n!==null;)Tl(n,r,a),n=n.sibling}var ht=null,Jt=!1;function Wn(n,r,a){for(a=a.child;a!==null;)Td(n,r,a),a=a.sibling}function Td(n,r,a){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(_s,a)}catch{}switch(a.tag){case 5:yt||jr(a,r);case 6:var c=ht,d=Jt;ht=null,Wn(n,r,a),ht=c,Jt=d,ht!==null&&(Jt?(n=ht,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):ht.removeChild(a.stateNode));break;case 18:ht!==null&&(Jt?(n=ht,a=a.stateNode,n.nodeType===8?Ua(n.parentNode,a):n.nodeType===1&&Ua(n,a),gi(n)):Ua(ht,a.stateNode));break;case 4:c=ht,d=Jt,ht=a.stateNode.containerInfo,Jt=!0,Wn(n,r,a),ht=c,Jt=d;break;case 0:case 11:case 14:case 15:if(!yt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,x=m.destroy;m=m.tag,x!==void 0&&((m&2)!==0||(m&4)!==0)&&Al(a,r,x),d=d.next}while(d!==c)}Wn(n,r,a);break;case 1:if(!yt&&(jr(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){$e(a,r,C)}Wn(n,r,a);break;case 21:Wn(n,r,a);break;case 22:a.mode&1?(yt=(c=yt)||a.memoizedState!==null,Wn(n,r,a),yt=c):Wn(n,r,a);break;default:Wn(n,r,a)}}function Ed(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Py),r.forEach(function(c){var d=zy.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function en(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,x=r,C=x;e:for(;C!==null;){switch(C.tag){case 5:ht=C.stateNode,Jt=!1;break e;case 3:ht=C.stateNode.containerInfo,Jt=!0;break e;case 4:ht=C.stateNode.containerInfo,Jt=!0;break e}C=C.return}if(ht===null)throw Error(t(160));Td(m,x,d),ht=null,Jt=!1;var A=d.alternate;A!==null&&(A.return=null),d.return=null}catch(L){$e(d,r,L)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Md(r,n),r=r.sibling}function Md(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(en(r,n),mn(n),c&4){try{Oi(3,n,n.return),oo(3,n)}catch(ie){$e(n,n.return,ie)}try{Oi(5,n,n.return)}catch(ie){$e(n,n.return,ie)}}break;case 1:en(r,n),mn(n),c&512&&a!==null&&jr(a,a.return);break;case 5:if(en(r,n),mn(n),c&512&&a!==null&&jr(a,a.return),n.flags&32){var d=n.stateNode;try{si(d,"")}catch(ie){$e(n,n.return,ie)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,x=a!==null?a.memoizedProps:m,C=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{C==="input"&&m.type==="radio"&&m.name!=null&&Ze(d,m),sa(C,x);var L=sa(C,m);for(x=0;x<A.length;x+=2){var D=A[x],G=A[x+1];D==="style"?dc(d,G):D==="dangerouslySetInnerHTML"?cc(d,G):D==="children"?si(d,G):E(d,D,G,L)}switch(C){case"input":Ue(d,m);break;case"textarea":cn(d,m);break;case"select":var O=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var Z=m.value;Z!=null?Ct(d,!!m.multiple,Z,!1):O!==!!m.multiple&&(m.defaultValue!=null?Ct(d,!!m.multiple,m.defaultValue,!0):Ct(d,!!m.multiple,m.multiple?[]:"",!1))}d[bi]=m}catch(ie){$e(n,n.return,ie)}}break;case 6:if(en(r,n),mn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(ie){$e(n,n.return,ie)}}break;case 3:if(en(r,n),mn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{gi(r.containerInfo)}catch(ie){$e(n,n.return,ie)}break;case 4:en(r,n),mn(n);break;case 13:en(r,n),mn(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Rl=qe())),c&4&&Ed(n);break;case 22:if(D=a!==null&&a.memoizedState!==null,n.mode&1?(yt=(L=yt)||D,en(r,n),yt=L):en(r,n),mn(n),c&8192){if(L=n.memoizedState!==null,(n.stateNode.isHidden=L)&&!D&&(n.mode&1)!==0)for(ee=n,D=n.child;D!==null;){for(G=ee=D;ee!==null;){switch(O=ee,Z=O.child,O.tag){case 0:case 11:case 14:case 15:Oi(4,O,O.return);break;case 1:jr(O,O.return);var te=O.stateNode;if(typeof te.componentWillUnmount=="function"){c=O,a=O.return;try{r=c,te.props=r.memoizedProps,te.state=r.memoizedState,te.componentWillUnmount()}catch(ie){$e(c,a,ie)}}break;case 5:jr(O,O.return);break;case 22:if(O.memoizedState!==null){Fd(G);continue}}Z!==null?(Z.return=O,ee=Z):Fd(G)}D=D.sibling}e:for(D=null,G=n;;){if(G.tag===5){if(D===null){D=G;try{d=G.stateNode,L?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(C=G.stateNode,A=G.memoizedProps.style,x=A!=null&&A.hasOwnProperty("display")?A.display:null,C.style.display=hc("display",x))}catch(ie){$e(n,n.return,ie)}}}else if(G.tag===6){if(D===null)try{G.stateNode.nodeValue=L?"":G.memoizedProps}catch(ie){$e(n,n.return,ie)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===n)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===n)break e;for(;G.sibling===null;){if(G.return===null||G.return===n)break e;D===G&&(D=null),G=G.return}D===G&&(D=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:en(r,n),mn(n),c&4&&Ed(n);break;case 21:break;default:en(r,n),mn(n)}}function mn(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Pd(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(si(d,""),c.flags&=-33);var m=bd(n);Tl(n,m,d);break;case 3:case 4:var x=c.stateNode.containerInfo,C=bd(n);bl(n,C,x);break;default:throw Error(t(161))}}catch(A){$e(n,n.return,A)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Ty(n,r,a){ee=n,Rd(n)}function Rd(n,r,a){for(var c=(n.mode&1)!==0;ee!==null;){var d=ee,m=d.child;if(d.tag===22&&c){var x=d.memoizedState!==null||so;if(!x){var C=d.alternate,A=C!==null&&C.memoizedState!==null||yt;C=so;var L=yt;if(so=x,(yt=A)&&!L)for(ee=d;ee!==null;)x=ee,A=x.child,x.tag===22&&x.memoizedState!==null?Ld(d):A!==null?(A.return=x,ee=A):Ld(d);for(;m!==null;)ee=m,Rd(m),m=m.sibling;ee=d,so=C,yt=L}Id(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,ee=m):Id(n)}}function Id(n){for(;ee!==null;){var r=ee;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:yt||oo(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!yt)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:Zt(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=r.updateQueue;m!==null&&Fh(r,m,c);break;case 3:var x=r.updateQueue;if(x!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Fh(r,x,a)}break;case 5:var C=r.stateNode;if(a===null&&r.flags&4){a=C;var A=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&a.focus();break;case"img":A.src&&(a.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var L=r.alternate;if(L!==null){var D=L.memoizedState;if(D!==null){var G=D.dehydrated;G!==null&&gi(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}yt||r.flags&512&&Pl(r)}catch(O){$e(r,r.return,O)}}if(r===n){ee=null;break}if(a=r.sibling,a!==null){a.return=r.return,ee=a;break}ee=r.return}}function Fd(n){for(;ee!==null;){var r=ee;if(r===n){ee=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ee=a;break}ee=r.return}}function Ld(n){for(;ee!==null;){var r=ee;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{oo(4,r)}catch(A){$e(r,a,A)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(A){$e(r,d,A)}}var m=r.return;try{Pl(r)}catch(A){$e(r,m,A)}break;case 5:var x=r.return;try{Pl(r)}catch(A){$e(r,x,A)}}}catch(A){$e(r,r.return,A)}if(r===n){ee=null;break}var C=r.sibling;if(C!==null){C.return=r.return,ee=C;break}ee=r.return}}var Ey=Math.ceil,ao=R.ReactCurrentDispatcher,El=R.ReactCurrentOwner,Wt=R.ReactCurrentBatchConfig,be=0,at=null,Je=null,dt=0,zt=0,Wr=On(0),nt=0,Di=null,ur=0,lo=0,Ml=0,Gi=null,bt=null,Rl=0,Hr=1/0,An=null,uo=!1,Il=null,Hn=null,co=!1,Vn=null,ho=0,Ui=0,Fl=null,fo=-1,po=0;function wt(){return(be&6)!==0?qe():fo!==-1?fo:fo=qe()}function $n(n){return(n.mode&1)===0?1:(be&2)!==0&&dt!==0?dt&-dt:dy.transition!==null?(po===0&&(po=bc()),po):(n=Me,n!==0||(n=window.event,n=n===void 0?16:zc(n.type)),n)}function tn(n,r,a,c){if(50<Ui)throw Ui=0,Fl=null,Error(t(185));hi(n,a,c),((be&2)===0||n!==at)&&(n===at&&((be&2)===0&&(lo|=a),nt===4&&Yn(n,dt)),Tt(n,c),a===1&&be===0&&(r.mode&1)===0&&(Hr=qe()+500,Us&&Gn()))}function Tt(n,r){var a=n.callbackNode;dg(n,r);var c=Ss(n,n===at?dt:0);if(c===0)a!==null&&kc(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&kc(a),r===1)n.tag===0?hy(zd.bind(null,n)):wh(zd.bind(null,n)),ay(function(){(be&6)===0&&Gn()}),a=null;else{switch(Tc(c)){case 1:a=da;break;case 4:a=Ac;break;case 16:a=xs;break;case 536870912:a=Pc;break;default:a=xs}a=Hd(a,Bd.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function Bd(n,r){if(fo=-1,po=0,(be&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Vr()&&n.callbackNode!==a)return null;var c=Ss(n,n===at?dt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=mo(n,c);else{r=c;var d=be;be|=2;var m=Od();(at!==n||dt!==r)&&(An=null,Hr=qe()+500,hr(n,r));do try{Iy();break}catch(C){Nd(n,C)}while(!0);Ka(),ao.current=m,be=d,Je!==null?r=0:(at=null,dt=0,r=nt)}if(r!==0){if(r===2&&(d=fa(n),d!==0&&(c=d,r=Ll(n,d))),r===1)throw a=Di,hr(n,0),Yn(n,c),Tt(n,qe()),a;if(r===6)Yn(n,c);else{if(d=n.current.alternate,(c&30)===0&&!My(d)&&(r=mo(n,c),r===2&&(m=fa(n),m!==0&&(c=m,r=Ll(n,m))),r===1))throw a=Di,hr(n,0),Yn(n,c),Tt(n,qe()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:dr(n,bt,An);break;case 3:if(Yn(n,c),(c&130023424)===c&&(r=Rl+500-qe(),10<r)){if(Ss(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){wt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ga(dr.bind(null,n,bt,An),r);break}dr(n,bt,An);break;case 4:if(Yn(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var x=31-qt(c);m=1<<x,x=r[x],x>d&&(d=x),c&=~m}if(c=d,c=qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Ey(c/1960))-c,10<c){n.timeoutHandle=Ga(dr.bind(null,n,bt,An),c);break}dr(n,bt,An);break;case 5:dr(n,bt,An);break;default:throw Error(t(329))}}}return Tt(n,qe()),n.callbackNode===a?Bd.bind(null,n):null}function Ll(n,r){var a=Gi;return n.current.memoizedState.isDehydrated&&(hr(n,r).flags|=256),n=mo(n,r),n!==2&&(r=bt,bt=a,r!==null&&Bl(r)),n}function Bl(n){bt===null?bt=n:bt.push.apply(bt,n)}function My(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Qt(m(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Yn(n,r){for(r&=~Ml,r&=~lo,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-qt(r),c=1<<a;n[a]=-1,r&=~c}}function zd(n){if((be&6)!==0)throw Error(t(327));Vr();var r=Ss(n,0);if((r&1)===0)return Tt(n,qe()),null;var a=mo(n,r);if(n.tag!==0&&a===2){var c=fa(n);c!==0&&(r=c,a=Ll(n,c))}if(a===1)throw a=Di,hr(n,0),Yn(n,r),Tt(n,qe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,dr(n,bt,An),Tt(n,qe()),null}function zl(n,r){var a=be;be|=1;try{return n(r)}finally{be=a,be===0&&(Hr=qe()+500,Us&&Gn())}}function cr(n){Vn!==null&&Vn.tag===0&&(be&6)===0&&Vr();var r=be;be|=1;var a=Wt.transition,c=Me;try{if(Wt.transition=null,Me=1,n)return n()}finally{Me=c,Wt.transition=a,be=r,(be&6)===0&&Gn()}}function Nl(){zt=Wr.current,Be(Wr)}function hr(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,oy(a)),Je!==null)for(a=Je.return;a!==null;){var c=a;switch($a(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ds();break;case 3:Gr(),Be(kt),Be(pt),sl();break;case 5:rl(c);break;case 4:Gr();break;case 13:Be(je);break;case 19:Be(je);break;case 10:Za(c.type._context);break;case 22:case 23:Nl()}a=a.return}if(at=n,Je=n=Xn(n.current,null),dt=zt=r,nt=0,Di=null,Ml=lo=ur=0,bt=Gi=null,or!==null){for(r=0;r<or.length;r++)if(a=or[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var x=m.next;m.next=d,c.next=x}a.pending=c}or=null}return n}function Nd(n,r){do{var a=Je;try{if(Ka(),Ks.current=to,Zs){for(var c=We.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Zs=!1}if(lr=0,ot=tt=We=null,Fi=!1,Li=0,El.current=null,a===null||a.return===null){nt=1,Di=r,Je=null;break}e:{var m=n,x=a.return,C=a,A=r;if(r=dt,C.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var L=A,D=C,G=D.tag;if((D.mode&1)===0&&(G===0||G===11||G===15)){var O=D.alternate;O?(D.updateQueue=O.updateQueue,D.memoizedState=O.memoizedState,D.lanes=O.lanes):(D.updateQueue=null,D.memoizedState=null)}var Z=ld(x);if(Z!==null){Z.flags&=-257,ud(Z,x,C,m,r),Z.mode&1&&ad(m,L,r),r=Z,A=L;var te=r.updateQueue;if(te===null){var ie=new Set;ie.add(A),r.updateQueue=ie}else te.add(A);break e}else{if((r&1)===0){ad(m,L,r),Ol();break e}A=Error(t(426))}}else if(De&&C.mode&1){var Qe=ld(x);if(Qe!==null){(Qe.flags&65536)===0&&(Qe.flags|=256),ud(Qe,x,C,m,r),qa(Ur(A,C));break e}}m=A=Ur(A,C),nt!==4&&(nt=2),Gi===null?Gi=[m]:Gi.push(m),m=x;do{switch(m.tag){case 3:m.flags|=65536,r&=-r,m.lanes|=r;var I=sd(m,A,r);Ih(m,I);break e;case 1:C=A;var T=m.type,F=m.stateNode;if((m.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Hn===null||!Hn.has(F)))){m.flags|=65536,r&=-r,m.lanes|=r;var j=od(m,C,r);Ih(m,j);break e}}m=m.return}while(m!==null)}Gd(a)}catch(se){r=se,Je===a&&a!==null&&(Je=a=a.return);continue}break}while(!0)}function Od(){var n=ao.current;return ao.current=to,n===null?to:n}function Ol(){(nt===0||nt===3||nt===2)&&(nt=4),at===null||(ur&268435455)===0&&(lo&268435455)===0||Yn(at,dt)}function mo(n,r){var a=be;be|=2;var c=Od();(at!==n||dt!==r)&&(An=null,hr(n,r));do try{Ry();break}catch(d){Nd(n,d)}while(!0);if(Ka(),be=a,ao.current=c,Je!==null)throw Error(t(261));return at=null,dt=0,nt}function Ry(){for(;Je!==null;)Dd(Je)}function Iy(){for(;Je!==null&&!rg();)Dd(Je)}function Dd(n){var r=Wd(n.alternate,n,zt);n.memoizedProps=n.pendingProps,r===null?Gd(n):Je=r,El.current=null}function Gd(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=ky(a,r,zt),a!==null){Je=a;return}}else{if(a=Ay(a,r),a!==null){a.flags&=32767,Je=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{nt=6,Je=null;return}}if(r=r.sibling,r!==null){Je=r;return}Je=r=n}while(r!==null);nt===0&&(nt=5)}function dr(n,r,a){var c=Me,d=Wt.transition;try{Wt.transition=null,Me=1,Fy(n,r,a,c)}finally{Wt.transition=d,Me=c}return null}function Fy(n,r,a,c){do Vr();while(Vn!==null);if((be&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(fg(n,m),n===at&&(Je=at=null,dt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||co||(co=!0,Hd(xs,function(){return Vr(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Wt.transition,Wt.transition=null;var x=Me;Me=1;var C=be;be|=4,El.current=null,by(n,a),Md(a,n),Jg(Oa),As=!!Na,Oa=Na=null,n.current=a,Ty(a),ig(),be=C,Me=x,Wt.transition=m}else n.current=a;if(co&&(co=!1,Vn=n,ho=d),m=n.pendingLanes,m===0&&(Hn=null),ag(a.stateNode),Tt(n,qe()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(uo)throw uo=!1,n=Il,Il=null,n;return(ho&1)!==0&&n.tag!==0&&Vr(),m=n.pendingLanes,(m&1)!==0?n===Fl?Ui++:(Ui=0,Fl=n):Ui=0,Gn(),null}function Vr(){if(Vn!==null){var n=Tc(ho),r=Wt.transition,a=Me;try{if(Wt.transition=null,Me=16>n?16:n,Vn===null)var c=!1;else{if(n=Vn,Vn=null,ho=0,(be&6)!==0)throw Error(t(331));var d=be;for(be|=4,ee=n.current;ee!==null;){var m=ee,x=m.child;if((ee.flags&16)!==0){var C=m.deletions;if(C!==null){for(var A=0;A<C.length;A++){var L=C[A];for(ee=L;ee!==null;){var D=ee;switch(D.tag){case 0:case 11:case 15:Oi(8,D,m)}var G=D.child;if(G!==null)G.return=D,ee=G;else for(;ee!==null;){D=ee;var O=D.sibling,Z=D.return;if(Ad(D),D===L){ee=null;break}if(O!==null){O.return=Z,ee=O;break}ee=Z}}}var te=m.alternate;if(te!==null){var ie=te.child;if(ie!==null){te.child=null;do{var Qe=ie.sibling;ie.sibling=null,ie=Qe}while(ie!==null)}}ee=m}}if((m.subtreeFlags&2064)!==0&&x!==null)x.return=m,ee=x;else e:for(;ee!==null;){if(m=ee,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Oi(9,m,m.return)}var I=m.sibling;if(I!==null){I.return=m.return,ee=I;break e}ee=m.return}}var T=n.current;for(ee=T;ee!==null;){x=ee;var F=x.child;if((x.subtreeFlags&2064)!==0&&F!==null)F.return=x,ee=F;else e:for(x=T;ee!==null;){if(C=ee,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:oo(9,C)}}catch(se){$e(C,C.return,se)}if(C===x){ee=null;break e}var j=C.sibling;if(j!==null){j.return=C.return,ee=j;break e}ee=C.return}}if(be=d,Gn(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(_s,n)}catch{}c=!0}return c}finally{Me=a,Wt.transition=r}}return!1}function Ud(n,r,a){r=Ur(a,r),r=sd(n,r,1),n=jn(n,r,1),r=wt(),n!==null&&(hi(n,1,r),Tt(n,r))}function $e(n,r,a){if(n.tag===3)Ud(n,n,a);else for(;r!==null;){if(r.tag===3){Ud(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hn===null||!Hn.has(c))){n=Ur(a,n),n=od(r,n,1),r=jn(r,n,1),n=wt(),r!==null&&(hi(r,1,n),Tt(r,n));break}}r=r.return}}function Ly(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=wt(),n.pingedLanes|=n.suspendedLanes&a,at===n&&(dt&a)===a&&(nt===4||nt===3&&(dt&130023424)===dt&&500>qe()-Rl?hr(n,0):Ml|=a),Tt(n,r)}function jd(n,r){r===0&&((n.mode&1)===0?r=1:(r=ws,ws<<=1,(ws&130023424)===0&&(ws=4194304)));var a=wt();n=Sn(n,r),n!==null&&(hi(n,r,a),Tt(n,a))}function By(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),jd(n,a)}function zy(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),jd(n,a)}var Wd;Wd=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||kt.current)Pt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Pt=!1,Cy(n,r,a);Pt=(n.flags&131072)!==0}else Pt=!1,De&&(r.flags&1048576)!==0&&Sh(r,Ws,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;io(n,r),n=r.pendingProps;var d=Fr(r,pt.current);Dr(r,a),d=ll(null,r,c,n,d,a);var m=ul();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,At(c)?(m=!0,Gs(r)):m=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,tl(r),d.updater=no,r.stateNode=d,d._reactInternals=r,ml(r,c,n,a),r=_l(null,r,c,!0,m,a)):(r.tag=0,De&&m&&Va(r),vt(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(io(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=Oy(c),n=Zt(c,n),d){case 0:r=xl(null,r,c,n,a);break e;case 1:r=md(null,r,c,n,a);break e;case 11:r=cd(null,r,c,n,a);break e;case 14:r=hd(null,r,c,Zt(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Zt(c,d),xl(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Zt(c,d),md(n,r,c,d,a);case 3:e:{if(gd(r),n===null)throw Error(t(387));c=r.pendingProps,m=r.memoizedState,d=m.element,Rh(n,r),qs(r,c,null,a);var x=r.memoizedState;if(c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){d=Ur(Error(t(423)),r),r=yd(n,r,c,a,d);break e}else if(c!==d){d=Ur(Error(t(424)),r),r=yd(n,r,c,a,d);break e}else for(Bt=Nn(r.stateNode.containerInfo.firstChild),Lt=r,De=!0,Kt=null,a=Eh(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(zr(),c===d){r=kn(n,r,a);break e}vt(n,r,c,a)}r=r.child}return r;case 5:return Lh(r),n===null&&Xa(r),c=r.type,d=r.pendingProps,m=n!==null?n.memoizedProps:null,x=d.children,Da(c,d)?x=null:m!==null&&Da(c,m)&&(r.flags|=32),pd(n,r),vt(n,r,x,a),r.child;case 6:return n===null&&Xa(r),null;case 13:return xd(n,r,a);case 4:return nl(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Nr(r,null,c,a):vt(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Zt(c,d),cd(n,r,c,d,a);case 7:return vt(n,r,r.pendingProps,a),r.child;case 8:return vt(n,r,r.pendingProps.children,a),r.child;case 12:return vt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,m=r.memoizedProps,x=d.value,Fe($s,c._currentValue),c._currentValue=x,m!==null)if(Qt(m.value,x)){if(m.children===d.children&&!kt.current){r=kn(n,r,a);break e}}else for(m=r.child,m!==null&&(m.return=r);m!==null;){var C=m.dependencies;if(C!==null){x=m.child;for(var A=C.firstContext;A!==null;){if(A.context===c){if(m.tag===1){A=Cn(-1,a&-a),A.tag=2;var L=m.updateQueue;if(L!==null){L=L.shared;var D=L.pending;D===null?A.next=A:(A.next=D.next,D.next=A),L.pending=A}}m.lanes|=a,A=m.alternate,A!==null&&(A.lanes|=a),Ja(m.return,a,r),C.lanes|=a;break}A=A.next}}else if(m.tag===10)x=m.type===r.type?null:m.child;else if(m.tag===18){if(x=m.return,x===null)throw Error(t(341));x.lanes|=a,C=x.alternate,C!==null&&(C.lanes|=a),Ja(x,a,r),x=m.sibling}else x=m.child;if(x!==null)x.return=m;else for(x=m;x!==null;){if(x===r){x=null;break}if(m=x.sibling,m!==null){m.return=x.return,x=m;break}x=x.return}m=x}vt(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Dr(r,a),d=Ut(d),c=c(d),r.flags|=1,vt(n,r,c,a),r.child;case 14:return c=r.type,d=Zt(c,r.pendingProps),d=Zt(c.type,d),hd(n,r,c,d,a);case 15:return dd(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Zt(c,d),io(n,r),r.tag=1,At(c)?(n=!0,Gs(r)):n=!1,Dr(r,a),rd(r,c,d),ml(r,c,d,a),_l(null,r,c,!0,n,a);case 19:return vd(n,r,a);case 22:return fd(n,r,a)}throw Error(t(156,r.tag))};function Hd(n,r){return Cc(n,r)}function Ny(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(n,r,a,c){return new Ny(n,r,a,c)}function Dl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Oy(n){if(typeof n=="function")return Dl(n)?1:0;if(n!=null){if(n=n.$$typeof,n===le)return 11;if(n===et)return 14}return 2}function Xn(n,r){var a=n.alternate;return a===null?(a=Ht(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function go(n,r,a,c,d,m){var x=2;if(c=n,typeof n=="function")Dl(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case B:return fr(a.children,d,m,r);case ne:x=8,d|=8;break;case oe:return n=Ht(12,a,r,d|2),n.elementType=oe,n.lanes=m,n;case _e:return n=Ht(13,a,r,d),n.elementType=_e,n.lanes=m,n;case we:return n=Ht(19,a,r,d),n.elementType=we,n.lanes=m,n;case Q:return yo(a,d,m,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $:x=10;break e;case Y:x=9;break e;case le:x=11;break e;case et:x=14;break e;case X:x=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=Ht(x,a,r,d),r.elementType=n,r.type=c,r.lanes=m,r}function fr(n,r,a,c){return n=Ht(7,n,c,r),n.lanes=a,n}function yo(n,r,a,c){return n=Ht(22,n,c,r),n.elementType=Q,n.lanes=a,n.stateNode={isHidden:!1},n}function Gl(n,r,a){return n=Ht(6,n,null,r),n.lanes=a,n}function Ul(n,r,a){return r=Ht(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Dy(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pa(0),this.expirationTimes=pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pa(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function jl(n,r,a,c,d,m,x,C,A){return n=new Dy(n,r,a,C,A),r===1?(r=1,m===!0&&(r|=8)):r=0,m=Ht(3,null,null,r),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},tl(m),n}function Gy(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function Vd(n){if(!n)return Dn;n=n._reactInternals;e:{if(tr(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(At(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(At(a))return _h(n,a,r)}return r}function $d(n,r,a,c,d,m,x,C,A){return n=jl(a,c,!0,n,d,m,x,C,A),n.context=Vd(null),a=n.current,c=wt(),d=$n(a),m=Cn(c,d),m.callback=r??null,jn(a,m,d),n.current.lanes=d,hi(n,d,c),Tt(n,c),n}function xo(n,r,a,c){var d=r.current,m=wt(),x=$n(d);return a=Vd(a),r.context===null?r.context=a:r.pendingContext=a,r=Cn(m,x),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=jn(d,r,x),n!==null&&(tn(n,d,x,m),Xs(n,d,x)),x}function _o(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Yd(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Wl(n,r){Yd(n,r),(n=n.alternate)&&Yd(n,r)}function Uy(){return null}var Xd=typeof reportError=="function"?reportError:function(n){console.error(n)};function Hl(n){this._internalRoot=n}vo.prototype.render=Hl.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));xo(n,r,null,null)},vo.prototype.unmount=Hl.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;cr(function(){xo(null,n,null,null)}),r[xn]=null}};function vo(n){this._internalRoot=n}vo.prototype.unstable_scheduleHydration=function(n){if(n){var r=Rc();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Ln.length&&r!==0&&r<Ln[a].priority;a++);Ln.splice(a,0,n),a===0&&Lc(n)}};function Vl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function wo(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function qd(){}function jy(n,r,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var L=_o(x);m.call(L)}}var x=$d(r,c,n,0,null,!1,!1,"",qd);return n._reactRootContainer=x,n[xn]=x.current,Ai(n.nodeType===8?n.parentNode:n),cr(),x}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var L=_o(A);C.call(L)}}var A=jl(n,0,!1,null,null,!1,!1,"",qd);return n._reactRootContainer=A,n[xn]=A.current,Ai(n.nodeType===8?n.parentNode:n),cr(function(){xo(r,A,a,c)}),A}function So(n,r,a,c,d){var m=a._reactRootContainer;if(m){var x=m;if(typeof d=="function"){var C=d;d=function(){var A=_o(x);C.call(A)}}xo(r,x,n,d)}else x=jy(a,r,n,d,c);return _o(x)}Ec=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=ci(r.pendingLanes);a!==0&&(ma(r,a|1),Tt(r,qe()),(be&6)===0&&(Hr=qe()+500,Gn()))}break;case 13:cr(function(){var c=Sn(n,1);if(c!==null){var d=wt();tn(c,n,1,d)}}),Wl(n,1)}},ga=function(n){if(n.tag===13){var r=Sn(n,134217728);if(r!==null){var a=wt();tn(r,n,134217728,a)}Wl(n,134217728)}},Mc=function(n){if(n.tag===13){var r=$n(n),a=Sn(n,r);if(a!==null){var c=wt();tn(a,n,r,c)}Wl(n,r)}},Rc=function(){return Me},Ic=function(n,r){var a=Me;try{return Me=n,r()}finally{Me=a}},la=function(n,r,a){switch(r){case"input":if(Ue(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=Os(c);if(!d)throw Error(t(90));ke(c),Ue(c,d)}}}break;case"textarea":cn(n,a);break;case"select":r=a.value,r!=null&&Ct(n,!!a.multiple,r,!1)}},gc=zl,yc=cr;var Wy={usingClientEntryPoint:!1,Events:[Ti,Rr,Os,pc,mc,zl]},ji={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hy={bundleType:ji.bundleType,version:ji.version,rendererPackageName:ji.rendererPackageName,rendererConfig:ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=wc(n),n===null?null:n.stateNode},findFiberByHostInstance:ji.findFiberByHostInstance||Uy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Co=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Co.isDisabled&&Co.supportsFiber)try{_s=Co.inject(Hy),hn=Co}catch{}}return Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wy,Et.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vl(r))throw Error(t(200));return Gy(n,r,null,a)},Et.createRoot=function(n,r){if(!Vl(n))throw Error(t(299));var a=!1,c="",d=Xd;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=jl(n,1,!1,null,null,a,!1,c,d),n[xn]=r.current,Ai(n.nodeType===8?n.parentNode:n),new Hl(r)},Et.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=wc(r),n=n===null?null:n.stateNode,n},Et.flushSync=function(n){return cr(n)},Et.hydrate=function(n,r,a){if(!wo(r))throw Error(t(200));return So(null,n,r,!0,a)},Et.hydrateRoot=function(n,r,a){if(!Vl(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",x=Xd;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),r=$d(r,null,n,1,a??null,d,!1,m,x),n[xn]=r.current,Ai(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new vo(r)},Et.render=function(n,r,a){if(!wo(r))throw Error(t(200));return So(null,n,r,!1,a)},Et.unmountComponentAtNode=function(n){if(!wo(n))throw Error(t(40));return n._reactRootContainer?(cr(function(){So(null,null,n,!1,function(){n._reactRootContainer=null,n[xn]=null})}),!0):!1},Et.unstable_batchedUpdates=zl,Et.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!wo(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return So(n,r,a,!1,c)},Et.version="18.3.1-next-f1338f8080-20240426",Et}var rf;function Zy(){if(rf)return Xl.exports;rf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Xl.exports=Ky(),Xl.exports}var sf;function Jy(){if(sf)return ko;sf=1;var i=Zy();return ko.createRoot=i.createRoot,ko.hydrateRoot=i.hydrateRoot,ko}var e0=Jy();const t0=$u(e0);var rt=Yu();const n0="modulepreload",r0=function(i){return"/"+i},of={},Vo=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=u(t.map(p=>{if(p=r0(p),p in of)return;of[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":n0,g||(_.as="script"),_.crossOrigin="",_.href=p,f&&_.setAttribute("nonce",f),document.head.appendChild(_),g)return new Promise((v,S)=>{_.addEventListener("load",v),_.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};var ue=(i=>(i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i.ShapeBuilder="shape-builder",i.Batcher="batcher",i))(ue||{});const Au=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},Ao=(i,e)=>Au(i).priority??e,ft={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(Au).forEach(e=>{e.type.forEach(t=>{var s,o;return(o=(s=this._removeHandlers)[t])==null?void 0:o.call(s,e)})}),this},add(...i){return i.map(Au).forEach(e=>{e.type.forEach(t=>{var l,u;const s=this._addHandlers,o=this._queue;s[t]?(u=s[t])==null||u.call(s,e):(o[t]=o[t]||[],(l=o[t])==null||l.push(e))})}),this},handle(i,e,t){var u;const s=this._addHandlers,o=this._removeHandlers;if(s[i]||o[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=e,o[i]=t;const l=this._queue;return l[i]&&((u=l[i])==null||u.forEach(h=>e(h)),delete l[i]),this},handleByMap(i,e){return this.handle(i,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(i,e,t=-1){return this.handle(i,s=>{e.findIndex(l=>l.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((l,u)=>Ao(u.value,t)-Ao(l.value,t)))},s=>{const o=e.findIndex(l=>l.name===s.name);o!==-1&&e.splice(o,1)})},handleByList(i,e,t=-1){return this.handle(i,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((o,l)=>Ao(l,t)-Ao(o,t)))},s=>{const o=e.indexOf(s.ref);o!==-1&&e.splice(o,1)})},mixin(i,...e){for(const t of e)Object.defineProperties(i.prototype,Object.getOwnPropertyDescriptors(t))}},i0={extension:{type:ue.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Vo(()=>import("./browserAll-CAphNOsB.js"),__vite__mapDeps([0,1,2]))}},s0={extension:{type:ue.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Vo(()=>import("./webworkerAll-CwTFlM4N.js"),__vite__mapDeps([1,2]))}};class xt{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new xt(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Kl={exports:{}},af;function o0(){return af||(af=1,(function(i){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function o(f,p,g){this.fn=f,this.context=p,this.once=g||!1}function l(f,p,g,y,_){if(typeof g!="function")throw new TypeError("The listener must be a function");var v=new o(g,y||f,_),S=t?t+p:p;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],v]:f._events[S].push(v):(f._events[S]=v,f._eventsCount++),f}function u(f,p){--f._eventsCount===0?f._events=new s:delete f._events[p]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],g,y;if(this._eventsCount===0)return p;for(y in g=this._events)e.call(g,y)&&p.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},h.prototype.listeners=function(p){var g=t?t+p:p,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,v=y.length,S=new Array(v);_<v;_++)S[_]=y[_].fn;return S},h.prototype.listenerCount=function(p){var g=t?t+p:p,y=this._events[g];return y?y.fn?1:y.length:0},h.prototype.emit=function(p,g,y,_,v,S){var k=t?t+p:p;if(!this._events[k])return!1;var w=this._events[k],P=arguments.length,b,E;if(w.fn){switch(w.once&&this.removeListener(p,w.fn,void 0,!0),P){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,g),!0;case 3:return w.fn.call(w.context,g,y),!0;case 4:return w.fn.call(w.context,g,y,_),!0;case 5:return w.fn.call(w.context,g,y,_,v),!0;case 6:return w.fn.call(w.context,g,y,_,v,S),!0}for(E=1,b=new Array(P-1);E<P;E++)b[E-1]=arguments[E];w.fn.apply(w.context,b)}else{var R=w.length,U;for(E=0;E<R;E++)switch(w[E].once&&this.removeListener(p,w[E].fn,void 0,!0),P){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,g);break;case 3:w[E].fn.call(w[E].context,g,y);break;case 4:w[E].fn.call(w[E].context,g,y,_);break;default:if(!b)for(U=1,b=new Array(P-1);U<P;U++)b[U-1]=arguments[U];w[E].fn.apply(w[E].context,b)}}return!0},h.prototype.on=function(p,g,y){return l(this,p,g,y,!1)},h.prototype.once=function(p,g,y){return l(this,p,g,y,!0)},h.prototype.removeListener=function(p,g,y,_){var v=t?t+p:p;if(!this._events[v])return this;if(!g)return u(this,v),this;var S=this._events[v];if(S.fn)S.fn===g&&(!_||S.once)&&(!y||S.context===y)&&u(this,v);else{for(var k=0,w=[],P=S.length;k<P;k++)(S[k].fn!==g||_&&!S[k].once||y&&S[k].context!==y)&&w.push(S[k]);w.length?this._events[v]=w.length===1?w[0]:w:u(this,v)}return this},h.prototype.removeAllListeners=function(p){var g;return p?(g=t?t+p:p,this._events[g]&&u(this,g)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,i.exports=h})(Kl)),Kl.exports}var a0=o0();const an=$u(a0),l0=Math.PI*2,u0=180/Math.PI,c0=Math.PI/180;class _t{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new _t(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Zl.x=0,Zl.y=0,Zl}}const Zl=new _t;class Ce{constructor(e=1,t=0,s=0,o=1,l=0,u=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,o,l,u){return this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new _t;const s=e.x,o=e.y;return t.x=this.a*s+this.c*o+this.tx,t.y=this.b*s+this.d*o+this.ty,t}applyInverse(e,t){t=t||new _t;const s=this.a,o=this.b,l=this.c,u=this.d,h=this.tx,f=this.ty,p=1/(s*u+l*-o),g=e.x,y=e.y;return t.x=u*p*g+-l*p*y+(f*l-h*u)*p,t.y=s*p*y+-o*p*g+(-f*s+h*o)*p,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.a,l=this.c,u=this.tx;return this.a=o*t-this.b*s,this.b=o*s+this.b*t,this.c=l*t-this.d*s,this.d=l*s+this.d*t,this.tx=u*t-this.ty*s,this.ty=u*s+this.ty*t,this}append(e){const t=this.a,s=this.b,o=this.c,l=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*s+e.b*l,this.c=e.c*t+e.d*o,this.d=e.c*s+e.d*l,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*s+e.ty*l+this.ty,this}appendFrom(e,t){const s=e.a,o=e.b,l=e.c,u=e.d,h=e.tx,f=e.ty,p=t.a,g=t.b,y=t.c,_=t.d;return this.a=s*p+o*y,this.b=s*g+o*_,this.c=l*p+u*y,this.d=l*g+u*_,this.tx=h*p+f*y+t.tx,this.ty=h*g+f*_+t.ty,this}setTransform(e,t,s,o,l,u,h,f,p){return this.a=Math.cos(h+p)*l,this.b=Math.sin(h+p)*l,this.c=-Math.sin(h-f)*u,this.d=Math.cos(h-f)*u,this.tx=e-(s*this.a+o*this.c),this.ty=t-(s*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,o=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,o=this.c,l=this.d,u=e.pivot,h=-Math.atan2(-o,l),f=Math.atan2(s,t),p=Math.abs(h+f);return p<1e-5||Math.abs(l0-p)<1e-5?(e.rotation=f,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=f),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(o*o+l*l),e.position.x=this.tx+(u.x*t+u.y*o),e.position.y=this.ty+(u.x*s+u.y*l),e}invert(){const e=this.a,t=this.b,s=this.c,o=this.d,l=this.tx,u=e*o-t*s;return this.a=o/u,this.b=-t/u,this.c=-s/u,this.d=e/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(e*this.ty-t*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Ce;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return d0.identity()}static get shared(){return h0.identity()}}const h0=new Ce,d0=new Ce,mr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],gr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],yr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],xr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Pu=[],Sp=[],Po=Math.sign;function f0(){for(let i=0;i<16;i++){const e=[];Pu.push(e);for(let t=0;t<16;t++){const s=Po(mr[i]*mr[t]+yr[i]*gr[t]),o=Po(gr[i]*mr[t]+xr[i]*gr[t]),l=Po(mr[i]*yr[t]+yr[i]*xr[t]),u=Po(gr[i]*yr[t]+xr[i]*xr[t]);for(let h=0;h<16;h++)if(mr[h]===s&&gr[h]===o&&yr[h]===l&&xr[h]===u){e.push(h);break}}}for(let i=0;i<16;i++){const e=new Ce;e.set(mr[i],gr[i],yr[i],xr[i],0,0),Sp.push(e)}}f0();const Re={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>mr[i],uY:i=>gr[i],vX:i=>yr[i],vY:i=>xr[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>Pu[i][e],sub:(i,e)=>Pu[i][Re.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?Re.S:Re.N:Math.abs(e)*2<=Math.abs(i)?i>0?Re.E:Re.W:e>0?i>0?Re.SE:Re.SW:i>0?Re.NE:Re.NW,matrixAppendRotationInv:(i,e,t=0,s=0)=>{const o=Sp[Re.inv(e)];o.tx=t,o.ty=s,i.append(o)},transformRectCoords:(i,e,t,s)=>{const{x:o,y:l,width:u,height:h}=i,{x:f,y:p,width:g,height:y}=e;return t===Re.E?(s.set(o+f,l+p,u,h),s):t===Re.S?s.set(g-l-h+f,o+p,h,u):t===Re.W?s.set(g-o-u+f,y-l-h+p,u,h):t===Re.N?s.set(l+f,y-o-u+p,h,u):s.set(o+f,l+p,u,h)}},bo=[new _t,new _t,new _t,new _t];class Ke{constructor(e=0,t=0,s=0,o=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Ke(0,0,0,0)}clone(){return new Ke(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,f=this.y,p=s*(1-o),g=s-p,y=h-p,_=h+l+p,v=f-p,S=f+u+p,k=h+g,w=h+l-g,P=f+g,b=f+u-g;return e>=y&&e<=_&&t>=v&&t<=S&&!(e>k&&e<w&&t>P&&t<b)}intersects(e,t){if(!t){const ne=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=ne)return!1;const $=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>$}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const h=bo[0].set(e.left,e.top),f=bo[1].set(e.left,e.bottom),p=bo[2].set(e.right,e.top),g=bo[3].set(e.right,e.bottom);if(p.x<=h.x||f.y<=h.y)return!1;const y=Math.sign(t.a*t.d-t.b*t.c);if(y===0||(t.apply(h,h),t.apply(f,f),t.apply(p,p),t.apply(g,g),Math.max(h.x,f.x,p.x,g.x)<=s||Math.min(h.x,f.x,p.x,g.x)>=o||Math.max(h.y,f.y,p.y,g.y)<=l||Math.min(h.y,f.y,p.y,g.y)>=u))return!1;const _=y*(f.y-h.y),v=y*(h.x-f.x),S=_*s+v*l,k=_*o+v*l,w=_*s+v*u,P=_*o+v*u;if(Math.max(S,k,w,P)<=_*h.x+v*h.y||Math.min(S,k,w,P)>=_*g.x+v*g.y)return!1;const b=y*(h.y-p.y),E=y*(p.x-h.x),R=b*s+E*l,U=b*o+E*l,z=b*s+E*u,B=b*o+E*u;return!(Math.max(R,U,z,B)<=b*h.x+E*h.y||Math.min(R,U,z,B)>=b*g.x+E*g.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),l=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=o-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),l=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=o,this.height=l-o,this}getBounds(e){return e||(e=new Ke),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,o=e.x+e.width,l=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(e,t,s,o){return this.x=e,this.y=t,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Jl={default:-1};function Xe(i="default"){return Jl[i]===void 0&&(Jl[i]=-1),++Jl[i]}const lf=new Set,Ie="8.0.0",p0="8.3.4",Qr={quiet:!1,noColor:!1},Se=(i,e,t=3)=>{if(Qr.quiet||lf.has(e))return;let s=new Error().stack;const o=`${e}
Deprecated since v${i}`,l=typeof console.groupCollapsed=="function"&&!Qr.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(t).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),lf.add(e)};Object.defineProperties(Se,{quiet:{get:()=>Qr.quiet,set:i=>{Qr.quiet=i},enumerable:!0,configurable:!1},noColor:{get:()=>Qr.noColor,set:i=>{Qr.noColor=i},enumerable:!0,configurable:!1}});const Cp=()=>{};function $o(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function uf(i){return!(i&i-1)&&!!i}function kp(i){const e={};for(const t in i)i[t]!==void 0&&(e[t]=i[t]);return e}const cf=Object.create(null);function m0(i){const e=cf[i];return e===void 0&&(cf[i]=Xe("resource")),e}const Ap=class Pp extends an{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...Pp.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Se(Ie,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=m0(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Ap.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Yo=Ap;const bp=class Tp extends an{constructor(e={}){super(),this.options=e,this.uid=Xe("textureSource"),this._resourceType="textureSource",this._resourceId=Xe("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...Tp.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new Yo(kp(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Xe("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const o=Math.round(e*s),l=Math.round(t*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=Xe("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=uf(this.pixelWidth)&&uf(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};bp.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let ln=bp;class Xu extends ln{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Xu.extension=ue.TextureSource;const hf=new Ce;class g0{constructor(e,t){this.mapCoord=new Ce,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let o=0;o<e.length;o+=2){const l=e[o],u=e[o+1];t[o]=l*s.a+u*s.c+s.tx,t[o+1]=l*s.b+u*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,o=e.trim;o&&(hf.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(hf));const l=e.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,f=this.clampOffset/l._resolution;return u[0]=(e.frame.x+h+f)/l.width,u[1]=(e.frame.y+h+f)/l.height,u[2]=(e.frame.x+e.frame.width-h+f)/l.width,u[3]=(e.frame.y+e.frame.height-h+f)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=e.frame.width===l.width&&e.frame.height===l.height&&e.rotate===0,!0}}class Pe extends an{constructor({source:e,label:t,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:h,rotate:f,dynamic:p}={}){if(super(),this.uid=Xe("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Ke,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new ln,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:g,height:y}=this._source;this.frame.width=g,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=f??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new g0(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:o}=this._source,l=t.x/s,u=t.y/o,h=t.width/s,f=t.height/o;let p=this.rotate;if(p){const g=h/2,y=f/2,_=l+g,v=u+y;p=Re.add(p,Re.NW),e.x0=_+g*Re.uX(p),e.y0=v+y*Re.uY(p),p=Re.add(p,2),e.x1=_+g*Re.uX(p),e.y1=v+y*Re.uY(p),p=Re.add(p,2),e.x2=_+g*Re.uX(p),e.y2=v+y*Re.uY(p),p=Re.add(p,2),e.x3=_+g*Re.uX(p),e.y3=v+y*Re.uY(p)}else e.x0=l,e.y0=u,e.x1=l+h,e.y1=u,e.x2=l+h,e.y2=u+f,e.x3=l,e.y3=u+f}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Se(Ie,"Texture.baseTexture is now Texture.source"),this._source}}Pe.EMPTY=new Pe({label:"EMPTY",source:new ln({label:"EMPTY"})});Pe.EMPTY.destroy=Cp;Pe.WHITE=new Pe({source:new Xu({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Pe.WHITE.destroy=Cp;function y0(i,e,t){const{width:s,height:o}=t.orig,l=t.trim;if(l){const u=l.width,h=l.height;i.minX=l.x-e._x*s,i.maxX=i.minX+u,i.minY=l.y-e._y*o,i.maxY=i.minY+h}else i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*o,i.maxY=i.minY+o}const df=new Ce;class on{constructor(e=1/0,t=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=df,this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Ke);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=df,this}set(e,t,s,o){this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}addFrame(e,t,s,o,l){l||(l=this.matrix);const u=l.a,h=l.b,f=l.c,p=l.d,g=l.tx,y=l.ty;let _=this.minX,v=this.minY,S=this.maxX,k=this.maxY,w=u*e+f*t+g,P=h*e+p*t+y;w<_&&(_=w),P<v&&(v=P),w>S&&(S=w),P>k&&(k=P),w=u*s+f*t+g,P=h*s+p*t+y,w<_&&(_=w),P<v&&(v=P),w>S&&(S=w),P>k&&(k=P),w=u*e+f*o+g,P=h*e+p*o+y,w<_&&(_=w),P<v&&(v=P),w>S&&(S=w),P>k&&(k=P),w=u*s+f*o+g,P=h*s+p*o+y,w<_&&(_=w),P<v&&(v=P),w>S&&(S=w),P>k&&(k=P),this.minX=_,this.minY=v,this.maxX=S,this.maxY=k}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:h,c:f,d:p,tx:g,ty:y}=e;let _=u*t+f*s+g,v=h*t+p*s+y;this.minX=_,this.minY=v,this.maxX=_,this.maxY=v,_=u*o+f*s+g,v=h*o+p*s+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY,_=u*t+f*l+g,v=h*t+p*l+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY,_=u*o+f*l+g,v=h*o+p*l+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,o){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new on(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,o){let l=this.minX,u=this.minY,h=this.maxX,f=this.maxY;o||(o=this.matrix);const p=o.a,g=o.b,y=o.c,_=o.d,v=o.tx,S=o.ty;for(let k=t;k<s;k+=2){const w=e[k],P=e[k+1],b=p*w+y*P+v,E=g*w+_*P+S;l=b<l?b:l,u=E<u?E:u,h=b>h?b:h,f=E>f?E:f}this.minX=l,this.minY=u,this.maxX=h,this.maxY=f}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var x0={grad:.9,turn:360,rad:360/(2*Math.PI)},Pn=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},ut=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},$t=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},Ep=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},ff=function(i){return{r:$t(i.r,0,255),g:$t(i.g,0,255),b:$t(i.b,0,255),a:$t(i.a)}},eu=function(i){return{r:ut(i.r),g:ut(i.g),b:ut(i.b),a:ut(i.a,3)}},_0=/^#([0-9a-f]{3,8})$/i,To=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},Mp=function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=Math.max(e,t,s),u=l-Math.min(e,t,s),h=u?l===e?(t-s)/u:l===t?2+(s-e)/u:4+(e-t)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a:o}},Rp=function(i){var e=i.h,t=i.s,s=i.v,o=i.a;e=e/360*6,t/=100,s/=100;var l=Math.floor(e),u=s*(1-t),h=s*(1-(e-l)*t),f=s*(1-(1-e+l)*t),p=l%6;return{r:255*[s,h,u,u,f,s][p],g:255*[f,s,s,h,u,u][p],b:255*[u,u,f,s,s,h][p],a:o}},pf=function(i){return{h:Ep(i.h),s:$t(i.s,0,100),l:$t(i.l,0,100),a:$t(i.a)}},mf=function(i){return{h:ut(i.h),s:ut(i.s),l:ut(i.l),a:ut(i.a,3)}},gf=function(i){return Rp((t=(e=i).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},ns=function(i){return{h:(e=Mp(i)).h,s:(o=(200-(t=e.s))*(s=e.v)/100)>0&&o<200?t*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,s,o},v0=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,w0=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,S0=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,C0=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bu={string:[[function(i){var e=_0.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?ut(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?ut(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=S0.exec(i)||C0.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:ff({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=v0.exec(i)||w0.exec(i);if(!e)return null;var t,s,o=pf({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(x0[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return gf(o)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=o===void 0?1:o;return Pn(e)&&Pn(t)&&Pn(s)?ff({r:Number(e),g:Number(t),b:Number(s),a:Number(l)}):null},"rgb"],[function(i){var e=i.h,t=i.s,s=i.l,o=i.a,l=o===void 0?1:o;if(!Pn(e)||!Pn(t)||!Pn(s))return null;var u=pf({h:Number(e),s:Number(t),l:Number(s),a:Number(l)});return gf(u)},"hsl"],[function(i){var e=i.h,t=i.s,s=i.v,o=i.a,l=o===void 0?1:o;if(!Pn(e)||!Pn(t)||!Pn(s))return null;var u=(function(h){return{h:Ep(h.h),s:$t(h.s,0,100),v:$t(h.v,0,100),a:$t(h.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(l)});return Rp(u)},"hsv"]]},yf=function(i,e){for(var t=0;t<e.length;t++){var s=e[t][0](i);if(s)return[s,e[t][1]]}return[null,void 0]},k0=function(i){return typeof i=="string"?yf(i.trim(),bu.string):typeof i=="object"&&i!==null?yf(i,bu.object):[null,void 0]},tu=function(i,e){var t=ns(i);return{h:t.h,s:$t(t.s+100*e,0,100),l:t.l,a:t.a}},nu=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},xf=function(i,e){var t=ns(i);return{h:t.h,s:t.s,l:$t(t.l+100*e,0,100),a:t.a}},Tu=(function(){function i(e){this.parsed=k0(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return ut(nu(this.rgba),2)},i.prototype.isDark=function(){return nu(this.rgba)<.5},i.prototype.isLight=function(){return nu(this.rgba)>=.5},i.prototype.toHex=function(){return e=eu(this.rgba),t=e.r,s=e.g,o=e.b,u=(l=e.a)<1?To(ut(255*l)):"","#"+To(t)+To(s)+To(o)+u;var e,t,s,o,l,u},i.prototype.toRgb=function(){return eu(this.rgba)},i.prototype.toRgbString=function(){return e=eu(this.rgba),t=e.r,s=e.g,o=e.b,(l=e.a)<1?"rgba("+t+", "+s+", "+o+", "+l+")":"rgb("+t+", "+s+", "+o+")";var e,t,s,o,l},i.prototype.toHsl=function(){return mf(ns(this.rgba))},i.prototype.toHslString=function(){return e=mf(ns(this.rgba)),t=e.h,s=e.s,o=e.l,(l=e.a)<1?"hsla("+t+", "+s+"%, "+o+"%, "+l+")":"hsl("+t+", "+s+"%, "+o+"%)";var e,t,s,o,l},i.prototype.toHsv=function(){return e=Mp(this.rgba),{h:ut(e.h),s:ut(e.s),v:ut(e.v),a:ut(e.a,3)};var e},i.prototype.invert=function(){return gn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),gn(tu(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),gn(tu(this.rgba,-e))},i.prototype.grayscale=function(){return gn(tu(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),gn(xf(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),gn(xf(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?gn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ut(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=ns(this.rgba);return typeof e=="number"?gn({h:e,s:t.s,l:t.l,a:t.a}):ut(t.h)},i.prototype.isEqual=function(e){return this.toHex()===gn(e).toHex()},i})(),gn=function(i){return i instanceof Tu?i:new Tu(i)},_f=[],A0=function(i){i.forEach(function(e){_f.indexOf(e)<0&&(e(Tu,bu),_f.push(e))})};function P0(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in t)s[t[o]]=o;var l={};i.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,f,p=s[this.toHex()];if(p)return p;if(u!=null&&u.closest){var g=this.toRgb(),y=1/0,_="black";if(!l.length)for(var v in t)l[v]=new i(t[v]).toRgb();for(var S in t){var k=(h=g,f=l[S],Math.pow(h.r-f.r,2)+Math.pow(h.g-f.g,2)+Math.pow(h.b-f.b,2));k<y&&(y=k,_=S)}return _}},e.string.push([function(u){var h=u.toLowerCase(),f=h==="transparent"?"#0000":t[h];return f?new i(f).toRgb():null},"name"])}A0([P0]);const Jr=class Ki{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ki)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((l,u)=>l===t[u]);if(e!==null&&t!==null){const l=Object.keys(e),u=Object.keys(t);return l.length!==u.length?!1:l.every(h=>e[h]===t[h])}return e===t}toRgba(){const[e,t,s,o]=this._components;return{r:e,g:t,b:s,a:o}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(o*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,o,l]=this._components;return e[0]=t,e[1]=s,e[2]=o,e[3]=l,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,o]=this._components;return e[0]=t,e[1]=s,e[2]=o,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,o,l]=Ki._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return t&&(s=s*e+.5|0,o=o*e+.5|0,l=l*e+.5|0),(e*255<<24)+(s<<16)+(o<<8)+l}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,o,l;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,o,l=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,o,l=255]=e,t/=255,s/=255,o/=255,l/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const h=Ki.HEX_PATTERN.exec(e);h&&(e=`#${h[2]}`)}const u=gn(e);u.isValid()&&({r:t,g:s,b:o,a:l}=u.rgba,t/=255,s/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((o,l)=>{e[l]=Math.min(Math.max(o,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Ki||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Jr.shared=new Jr;Jr._temp=new Jr;Jr.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let it=Jr;const b0={cullArea:null,cullable:!1,cullableChildren:!0};let ru=0;const vf=500;function Ne(...i){ru!==vf&&(ru++,ru===vf?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}const ps={_registeredResources:new Set,register(i){this._registeredResources.add(i)},unregister(i){this._registeredResources.delete(i)},release(){this._registeredResources.forEach(i=>i.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(i){return this._registeredResources.has(i)},reset(){this._registeredResources.clear()}};class T0{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class E0{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new T0(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const Yt=new E0;ps.register(Yt);const M0={get isCachedAsTexture(){var i;return!!((i=this.renderGroup)!=null&&i.isCachedAsTexture)},cacheAsTexture(i){typeof i=="boolean"&&i===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(i===!0?{}:i))},updateCacheTexture(){var i;(i=this.renderGroup)==null||i.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(i){Se("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(i)}};function R0(i,e,t){const s=i.length;let o;if(e>=s||t===0)return;t=e+t>s?s-e:t;const l=s-t;for(o=e;o<l;++o)i[o]=i[o+t];i.length=l}const I0={allowChildren:!0,removeChildren(i=0,e){var l;const t=e??this.children.length,s=t-i,o=[];if(s>0&&s<=t){for(let h=t-1;h>=i;h--){const f=this.children[h];f&&(o.push(f),f.parent=null)}R0(this.children,i,t);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(o);for(let h=0;h<o.length;++h){const f=o[h];(l=f.parentRenderLayer)==null||l.detach(f),this.emit("childRemoved",f,this,h),o[h].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){const e=this.getChildAt(i);return this.removeChild(e)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,e)},getChildIndex(i){const e=this.children.indexOf(i);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(i,e){this.allowChildren||Se(Ie,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${i}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(i.parent){const o=i.parent.children.indexOf(i);if(i.parent===this&&o===e)return i;o!==-1&&i.parent.children.splice(o,1)}e===t.length?t.push(i):t.splice(e,0,i),i.parent=this,i.didChange=!0,i._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,e),i.emit("added",this),i},swapChildren(i,e){if(i===e)return;const t=this.getChildIndex(i),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=i;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var i;(i=this.parent)==null||i.removeChild(this)},reparentChild(...i){return i.length===1?this.reparentChildAt(i[0],this.children.length):(i.forEach(e=>this.reparentChildAt(e,this.children.length)),i[0])},reparentChildAt(i,e){if(i.parent===this)return this.setChildIndex(i,e),i;const t=i.worldTransform.clone();i.removeFromParent(),this.addChildAt(i,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),i.setFromMatrix(t),i},replaceChild(i,e){i.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(i)),e.setFromMatrix(i.localTransform),e.updateLocalTransform(),this.removeChild(i)}},F0={collectRenderables(i,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(i,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,i):this.collectRenderablesWithEffects(i,e,t))},collectRenderablesSimple(i,e,t){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(i,e,t)},collectRenderablesWithEffects(i,e,t){const{renderPipes:s}=e;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,i)}this.collectRenderablesSimple(i,e,t);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,i)}}};class wf{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class L0{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return Yt.get(s.maskClass,e)}return e}returnMaskEffect(e){Yt.return(e)}}const Eu=new L0;ft.handleByList(ue.MaskEffect,Eu._effectClasses);const B0={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)},addEffect(i){this.effects.indexOf(i)===-1&&(this.effects.push(i),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(i){const e=this.effects.indexOf(i);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(i){const e=this._maskEffect;(e==null?void 0:e.mask)!==i&&(e&&(this.removeEffect(e),Eu.returnMaskEffect(e),this._maskEffect=null),i!=null&&(this._maskEffect=Eu.getMaskEffect(i),this.addEffect(this._maskEffect)))},get mask(){var i;return(i=this._maskEffect)==null?void 0:i.mask},setMask(i){this._maskOptions={...this._maskOptions,...i},i.mask&&(this.mask=i.mask),this._markStructureAsChanged()},set filters(i){var l;!Array.isArray(i)&&i&&(i=[i]);const e=this._filterEffect||(this._filterEffect=new wf);i=i;const t=(i==null?void 0:i.length)>0,s=((l=e.filters)==null?void 0:l.length)>0,o=t!==s;i=Array.isArray(i)?i.slice(0):i,e.filters=Object.freeze(i),o&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=i??null))},get filters(){var i;return(i=this._filterEffect)==null?void 0:i.filters},set filterArea(i){this._filterEffect||(this._filterEffect=new wf),this._filterEffect.filterArea=i},get filterArea(){var i;return(i=this._filterEffect)==null?void 0:i.filterArea}},z0={label:null,get name(){return Se(Ie,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){Se(Ie,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,e=!1){return this.getChildByLabel(i,e)},getChildByLabel(i,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const o=t[s];if(o.label===i||i instanceof RegExp&&i.test(o.label))return o}if(e)for(let s=0;s<t.length;s++){const l=t[s].getChildByLabel(i,!0);if(l)return l}return null},getChildrenByLabel(i,e=!1,t=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===i||i instanceof RegExp&&i.test(l.label))&&t.push(l)}if(e)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(i,!0,t);return t}},St=Yt.getPool(Ce),Tn=Yt.getPool(on),N0=new Ce,O0={getFastGlobalBounds(i,e){e||(e=new on),e.clear(),this._getGlobalBoundsRecursive(!!i,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(i,e,t){let s=e;if(i&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=Tn.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(i,s,t)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(N0).invert()),e.addBounds(s),Tn.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),Tn.return(s))}};function Ip(i,e,t){t.clear();let s,o;return i.parent?e?s=i.parent.worldTransform:(o=St.get().identity(),s=qu(i,o)):s=Ce.IDENTITY,Fp(i,t,s,e),o&&St.return(o),t.isValid||t.set(0,0,0,0),t}function Fp(i,e,t,s){var h,f;if(!i.visible||!i.measurable)return;let o;s?o=i.worldTransform:(i.updateLocalTransform(),o=St.get(),o.appendFrom(i.localTransform,t));const l=e,u=!!i.effects.length;if(u&&(e=Tn.get().clear()),i.boundsArea)e.addRect(i.boundsArea,o);else{const p=i.bounds;p&&!p.isEmpty()&&(e.matrix=o,e.addBounds(p));for(let g=0;g<i.children.length;g++)Fp(i.children[g],e,o,s)}if(u){for(let p=0;p<i.effects.length;p++)(f=(h=i.effects[p]).addBounds)==null||f.call(h,e);l.addBounds(e,Ce.IDENTITY),Tn.return(e)}s||St.return(o)}function qu(i,e){const t=i.parent;return t&&(qu(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function Lp(i,e){if(i===16777215||!e)return e;if(e===16777215||!i)return i;const t=i>>16&255,s=i>>8&255,o=i&255,l=e>>16&255,u=e>>8&255,h=e&255,f=t*l/255|0,p=s*u/255|0,g=o*h/255|0;return(f<<16)+(p<<8)+g}const Sf=16777215;function Cf(i,e){return i===Sf?e:e===Sf?i:Lp(i,e)}function Go(i){return((i&255)<<16)+(i&65280)+(i>>16&255)}const D0={getGlobalAlpha(i){if(i)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(i=new Ce,e){if(e)return i.copyFrom(this.worldTransform);this.updateLocalTransform();const t=qu(this,St.get().identity());return i.appendFrom(this.localTransform,t),St.return(t),i},getGlobalTint(i){if(i)return this.renderGroup?Go(this.renderGroup.worldColor):this.parentRenderGroup?Go(Cf(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Cf(e,t.localColor),t=t.parent;return Go(e)}};function Bp(i,e,t){return e.clear(),t||(t=Ce.IDENTITY),zp(i,e,t,i,!0),e.isValid||e.set(0,0,0,0),e}function zp(i,e,t,s,o){var f,p;let l;if(o)l=St.get(),l=t.copyTo(l);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const g=i.localTransform;l=St.get(),l.appendFrom(g,t)}const u=e,h=!!i.effects.length;if(h&&(e=Tn.get().clear()),i.boundsArea)e.addRect(i.boundsArea,l);else{i.renderPipeId&&(e.matrix=l,e.addBounds(i.bounds));const g=i.children;for(let y=0;y<g.length;y++)zp(g[y],e,l,s,!1)}if(h){for(let g=0;g<i.effects.length;g++)(p=(f=i.effects[g]).addLocalBounds)==null||p.call(f,e,s);u.addBounds(e,Ce.IDENTITY),Tn.return(e)}St.return(l)}function Np(i,e){const t=i.children;for(let s=0;s<t.length;s++){const o=t[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,h=e.index;(e.data[h]!==l||e.data[h+1]!==u)&&(e.data[e.index]=l,e.data[e.index+1]=u,e.didChange=!0),e.index=h+2,o.children.length&&Np(o,e)}return e.didChange}const G0=new Ce,U0={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(i,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=i/e*t:this.scale.x=t},_setHeight(i,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=i/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new on});const i=this._localBoundsCacheData;return i.index=1,i.didChange=!1,i.data[0]!==this._didViewChangeTick&&(i.didChange=!0,i.data[0]=this._didViewChangeTick),Np(this,i),i.didChange&&Bp(this,i.localBounds,G0),i.localBounds},getBounds(i,e){return Ip(this,i,e||new on)}},j0={_onRender:null,set onRender(i){const e=this.renderGroup||this.parentRenderGroup;if(!i){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}},W0={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(H0))}};function H0(i,e){return i._zIndex-e._zIndex}const V0={getGlobalPosition(i=new _t,e=!1){return this.parent?this.parent.toGlobal(this._position,i,e):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,e,t=!1){const s=this.getGlobalTransform(St.get(),t);return e=s.apply(i,e),St.return(s),e},toLocal(i,e,t,s){e&&(i=e.toGlobal(i,t,s));const o=this.getGlobalTransform(St.get(),s);return t=o.applyInverse(i,t),St.return(o),t}};class Op{constructor(){this.uid=Xe("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let $0=0;class Y0{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new Yo(this.textureOptions)}createTexture(e,t,s){const o=new ln({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new Pe({source:o,label:`texturePool_${$0++}`})}getOptimalTexture(e,t,s=1,o){let l=Math.ceil(e*s-1e-6),u=Math.ceil(t*s-1e-6);l=$o(l),u=$o(u);const h=(l<<17)+(u<<1)+(o?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let f=this._texturePool[h].pop();return f||(f=this.createTexture(l,u,o)),f.source._resolution=s,f.source.width=l/s,f.source.height=u/s,f.source.pixelWidth=l,f.source.pixelHeight=u,f.frame.x=0,f.frame.y=0,f.frame.width=e,f.frame.height=t,f.updateUvs(),this._poolKeyHash[f.uid]=h,f}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const Dp=new Y0;ps.register(Dp);class X0{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Ce,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Op,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Dp.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Ce),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Ce),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Ce),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function q0(i,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(i[s]=e[s])}const iu=new xt(null),Eo=new xt(null),su=new xt(null,1,1),Mo=new xt(null),kf=1,Q0=2,ou=4;class sn extends an{constructor(e={}){var t,s;super(),this.uid=Xe("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Ce,this.relativeGroupTransform=new Ce,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new xt(this,0,0),this._scale=su,this._pivot=Eo,this._origin=Mo,this._skew=iu,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],q0(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(o=>this.addChild(o)),(s=e.parent)==null||s.addChild(this)}static mixin(e){Se("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),ft.mixin(sn,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Se(Ie,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let o=0;o<e.length;o++)this.addChild(e[o]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let o=0;o<e.length;o++)this.removeChild(e[o]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=Yt.get(X0,this),this.groupTransform=Ce.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),Yt.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Ce),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*u0}set angle(e){this.rotation=e*c0}get pivot(){return this._pivot===Eo&&(this._pivot=new xt(this,0,0)),this._pivot}set pivot(e){this._pivot===Eo&&(this._pivot=new xt(this,0,0),this._origin!==Mo&&Ne("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===iu&&(this._skew=new xt(this,0,0)),this._skew}set skew(e){this._skew===iu&&(this._skew=new xt(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===su&&(this._scale=new xt(this,1,1)),this._scale}set scale(e){this._scale===su&&(this._scale=new xt(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Mo&&(this._origin=new xt(this,0,0)),this._origin}set origin(e){this._origin===Mo&&(this._origin=new xt(this,0,0),this._pivot!==Eo&&Ne("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,h=s._x,f=s._y,p=o._x,g=o._y,y=-l._x,_=-l._y;t.a=this._cx*h,t.b=this._sx*h,t.c=this._cy*f,t.d=this._sy*f,t.tx=u._x-(p*t.a+g*t.c)+(y*t.a+_*t.c)-y,t.ty=u._y-(p*t.b+g*t.d)+(y*t.b+_*t.d)-_}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=kf,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=it.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=kf,this._onUpdate())}get tint(){return Go(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Q0,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ou,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ou,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=ou,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var o;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let l=0;l<t.length;++l)t[l].destroy(e);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}ft.mixin(sn,I0,O0,V0,j0,U0,B0,z0,W0,b0,M0,D0,F0);class Gp extends sn{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new on(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:o}=e;return s>=t.minX&&s<=t.maxX&&o>=t.minY&&o<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var t,s;super.destroy(e),this._bounds=null;for(const o in this._gpuData)(s=(t=this._gpuData[o]).destroy)==null||s.call(t);this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:o}=t;o.blendMode.pushBlendMode(this,this.groupBlendMode,e),o[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let f=0;f<h;f++)u[f].collectRenderables(e,t,s);o.blendMode.popBlendMode(e)}}class ei extends Gp{constructor(e=Pe.EMPTY){e instanceof Pe&&(e={texture:e});const{texture:t=Pe.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...h}=e;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new xt({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof Pe?new ei(e):new ei(Pe.from(e,t))}set texture(e){e||(e=Pe.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return y0(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Se("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:o,height:l}=t.orig;s.minX=-e._x*o,s.maxX=s.minX+o,s.minY=-e._y*l,s.maxY=s.minY+l}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const K0=new on;function Up(i,e,t){const s=K0;i.measurable=!0,Ip(i,t,s),e.addBoundsMask(s),i.measurable=!1}function jp(i,e,t){const s=Tn.get();i.measurable=!0;const o=St.get().identity(),l=Wp(i,t,o);Bp(i,s,l),i.measurable=!1,e.addBoundsMask(s),St.return(o),Tn.return(s)}function Wp(i,e,t){return i?(i!==e&&(Wp(i.parent,e,t),i.updateLocalTransform(),t.append(i.localTransform)),t):(Ne("Mask bounds, renderable is not inside the root container"),t)}class Hp{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof ei),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||Up(this.mask,e,t)}addLocalBounds(e,t){jp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof ei}}Hp.extension=ue.MaskEffect;class Vp{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}Vp.extension=ue.MaskEffect;class $p{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){Up(this.mask,e,t)}addLocalBounds(e,t){jp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof sn}}$p.extension=ue.MaskEffect;const Z0={createCanvas:(i,e)=>{const t=document.createElement("canvas");return t.width=i,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,e)=>fetch(i,e),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};let Af=Z0;const Oe={get(){return Af},set(i){Af=i}};class Yp extends ln{constructor(e){e.resource||(e.resource=Oe.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const o=super.resize(e,t,s);return o&&this.resizeCanvas(),o}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Yp.extension=ue.TextureSource;class vr extends ln{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}vr.extension=ue.TextureSource;var Mu=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(Mu||{});class au{constructor(e,t=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=o}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Xp=class Nt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new au(null,null,1/0),this.deltaMS=1/Nt.targetFPMS,this.elapsedMS=1/Nt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Mu.NORMAL){return this._addListener(new au(e,t,s))}addOnce(e,t,s=Mu.NORMAL){return this._addListener(new au(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const l=e-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=e-l%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Nt.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,Nt.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Nt._shared){const e=Nt._shared=new Nt;e.autoStart=!0,e._protected=!0}return Nt._shared}static get system(){if(!Nt._system){const e=Nt._system=new Nt;e.autoStart=!0,e._protected=!0}return Nt._system}};Xp.targetFPMS=.06;let Ro=Xp,lu;async function qp(){return lu??(lu=(async()=>{var u;const e=Oe.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(h=>{const f=document.createElement("video");f.onloadeddata=()=>h(f),f.onerror=()=>h(null),f.autoplay=!1,f.crossOrigin="anonymous",f.preload="auto",f.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",f.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),e.deleteFramebuffer(o),e.deleteTexture(s),(u=e.getExtension("WEBGL_lose_context"))==null||u.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),lu}const Zo=class Qp extends ln{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...Qp.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=Ro.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await qp(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ro.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ro.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ro.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Zo.extension=ue.TextureSource;Zo.defaultOptions={...ln.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Zo.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let rs=Zo;const rn=(i,e,t=!1)=>(Array.isArray(i)||(i=[i]),e?i.map(s=>typeof s=="string"||t?e(s):s):i);class J0{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Ne(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=rn(e);let o;for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];if(p.test(t)){o=p.getCacheableAssets(s,t);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(f=>{l.set(f,t)});const u=[...l.keys()],h={cacheKeys:u,keys:s};s.forEach(f=>{this._cacheMap.set(f,h)}),u.forEach(f=>{const p=o?o[f]:t;this._cache.has(f)&&this._cache.get(f)!==p&&Ne("[Cache] already has key:",f),this._cache.set(f,l.get(f))})}remove(e){if(!this._cacheMap.has(e)){Ne(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(o=>{this._cache.delete(o)}),t.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const ze=new J0,Ru=[];ft.handleByList(ue.TextureSource,Ru);function Kp(i={}){const e=i&&i.resource,t=e?i.resource:i,s=e?i:{resource:i};for(let o=0;o<Ru.length;o++){const l=Ru[o];if(l.test(t))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function ex(i={},e=!1){const t=i&&i.resource,s=t?i.resource:i,o=t?i:{resource:i};if(!e&&ze.has(s))return ze.get(s);const l=new Pe({source:Kp(o)});return l.on("destroy",()=>{ze.has(s)&&ze.remove(s)}),e||ze.set(s,l),l}function tx(i,e=!1){return typeof i=="string"?ze.get(i):i instanceof ln?new Pe({source:i}):ex(i,e)}Pe.from=tx;ln.from=Kp;ft.add(Hp,Vp,$p,rs,vr,Yp,Xu);var er=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(er||{});function nn(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Hi(i){return i.split("?")[0].split("#")[0]}function nx(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function rx(i,e,t){return i.replace(new RegExp(nx(e),"g"),t)}function ix(i,e){let t="",s=0,o=-1,l=0,u=-1;for(let h=0;h<=i.length;++h){if(h<i.length)u=i.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(o===h-1||l===1))if(o!==h-1&&l===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",s=0):(t=t.slice(0,f),s=t.length-1-t.lastIndexOf("/")),o=h,l=0;continue}}else if(t.length===2||t.length===1){t="",s=0,o=h,l=0;continue}}}else t.length>0?t+=`/${i.slice(o+1,h)}`:t=i.slice(o+1,h),s=h-o-1;o=h,l=0}else u===46&&l!==-1?++l:l=-1}return t}const Ot={toPosix(i){return rx(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){nn(i),i=this.toPosix(i);const e=/^file:\/\/\//.exec(i);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(i);return t?t[0]:""},toAbsolute(i,e,t){if(nn(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const s=Hi(this.toPosix(e??Oe.get().getBaseUrl())),o=Hi(this.toPosix(t??this.rootname(s)));return i=this.toPosix(i),i.startsWith("/")?Ot.join(o,i.slice(1)):this.isAbsolute(i)?i:this.join(s,i)},normalize(i){if(nn(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let e="";const t=i.startsWith("/");this.hasProtocol(i)&&(e=this.rootname(i),i=i.slice(e.length));const s=i.endsWith("/");return i=ix(i),i.length>0&&s&&(i+="/"),t?`/${i}`:e+i},isAbsolute(i){return nn(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const s=i[t];if(nn(s),s.length>0)if(e===void 0)e=s;else{const o=i[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(i){if(nn(i),i.length===0)return".";i=this.toPosix(i);let e=i.charCodeAt(0);const t=e===47;let s=-1,o=!0;const l=this.getProtocol(i),u=i;i=i.slice(l.length);for(let h=i.length-1;h>=1;--h)if(e=i.charCodeAt(h),e===47){if(!o){s=h;break}}else o=!1;return s===-1?t?"/":this.isUrl(u)?l+i:l:t&&s===1?"//":l+i.slice(0,s)},rootname(i){nn(i),i=this.toPosix(i);let e="";if(i.startsWith("/")?e="/":e=this.getProtocol(i),this.isUrl(i)){const t=i.indexOf("/",e.length);t!==-1?e=i.slice(0,t):e=i,e.endsWith("/")||(e+="/")}return e},basename(i,e){nn(i),e&&nn(e),i=Hi(this.toPosix(i));let t=0,s=-1,o=!0,l;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";let u=e.length-1,h=-1;for(l=i.length-1;l>=0;--l){const f=i.charCodeAt(l);if(f===47){if(!o){t=l+1;break}}else h===-1&&(o=!1,h=l+1),u>=0&&(f===e.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=h))}return t===s?s=h:s===-1&&(s=i.length),i.slice(t,s)}for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!o){t=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":i.slice(t,s)},extname(i){nn(i),i=Hi(this.toPosix(i));let e=-1,t=0,s=-1,o=!0,l=0;for(let u=i.length-1;u>=0;--u){const h=i.charCodeAt(u);if(h===47){if(!o){t=u+1;break}continue}s===-1&&(o=!1,s=u+1),h===46?e===-1?e=u:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||s===-1||l===0||l===1&&e===s-1&&e===t+1?"":i.slice(e,s)},parse(i){nn(i);const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;i=Hi(this.toPosix(i));let t=i.charCodeAt(0);const s=this.isAbsolute(i);let o;e.root=this.rootname(i),s||this.hasProtocol(i)?o=1:o=0;let l=-1,u=0,h=-1,f=!0,p=i.length-1,g=0;for(;p>=o;--p){if(t=i.charCodeAt(p),t===47){if(!f){u=p+1;break}continue}h===-1&&(f=!1,h=p+1),t===46?l===-1?l=p:g!==1&&(g=1):l!==-1&&(g=-1)}return l===-1||h===-1||g===0||g===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&s?e.base=e.name=i.slice(1,h):e.base=e.name=i.slice(u,h)):(u===0&&s?(e.name=i.slice(1,l),e.base=i.slice(1,h)):(e.name=i.slice(u,l),e.base=i.slice(u,h)),e.ext=i.slice(l,h)),e.dir=this.dirname(i),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function Zp(i,e,t,s,o){const l=e[t];for(let u=0;u<l.length;u++){const h=l[u];t<e.length-1?Zp(i.replace(s[t],h),e,t+1,s,o):o.push(i.replace(s[t],h))}}function sx(i){const e=/\{(.*?)\}/g,t=i.match(e),s=[];if(t){const o=[];t.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),Zp(i,o,0,t,s)}else s.push(i);return s}const Xo=i=>!Array.isArray(i);class ni{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return rn(t||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>(u==null?void 0:u.src)??u):l!=null&&l.src?l.src:l,!0)}addManifest(e){this._manifest&&Ne("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let o=t;Array.isArray(t)||(o=Object.entries(t).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,h=l.alias;let f;if(typeof h=="string"){const p=this._createBundleAssetId(e,h);s.push(p),f=[h,p]}else{const p=h.map(g=>this._createBundleAssetId(e,g));s.push(...p),f=[...h,...p]}this.add({...l,alias:f,src:u})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=l=>{this.hasKey(l)&&Ne(`[Resolver] already has key: ${l} overwriting`)},rn(t).forEach(l=>{const{src:u}=l;let{data:h,format:f,loadParser:p,parser:g}=l;const y=rn(u).map(k=>typeof k=="string"?sx(k):Array.isArray(k)?k:[k]),_=this.getAlias(l);Array.isArray(_)?_.forEach(s):s(_);const v=[],S=k=>{const w=this._parsers.find(P=>P.test(k));return{...w==null?void 0:w.parse(k),src:k}};y.forEach(k=>{k.forEach(w=>{let P={};if(typeof w!="object"?P=S(w):(h=w.data??h,f=w.format??f,(w.loadParser||w.parser)&&(p=w.loadParser??p,g=w.parser??g),P={...S(w.src),...w}),!_)throw new Error(`[Resolver] alias is undefined for this asset: ${P.src}`);P=this._buildResolvedAsset(P,{aliases:_,data:h,format:f,loadParser:p,parser:g,progressSize:l.progressSize}),v.push(P)})}),_.forEach(k=>{this._assetMap[k]=v})})}resolveBundle(e){const t=Xo(e);e=rn(e);const s={};return e.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),h={};for(const f in u){const p=u[f];h[this._extractAssetIdFromBundle(o,f)]=p}s[o]=h}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const o in t)s[o]=t[o].src;return s}return t.src}resolve(e){const t=Xo(e);e=rn(e);const s={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u==null||u.priority.forEach(h=>{u.params[h].forEach(f=>{const p=l.filter(g=>g[h]?g[h]===f:!1);p.length&&(l=p)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:o,loadParser:l,parser:u,format:h,progressSize:f}=t;return(this._basePath||this._rootPath)&&(e.src=Ot.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=l??e.loadParser,e.parser=u??e.parser,e.format=h??e.format??ox(e.src),f!==void 0&&(e.progressSize=f),e}}ni.RETINA_PREFIX=/@([0-9\.]+)x/;function ox(i){return i.split(".").pop().split("?").shift().split("#").shift()}const Iu=(i,e)=>{const t=e.split("?")[1];return t&&(i+=`?${t}`),i},Jp=class Zi{constructor(e,t){this.linkedSheets=[];let s=e;(e==null?void 0:e.source)instanceof ln&&(s={texture:e,data:t});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof Pe?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const h=parseFloat(l.meta.scale);h?(this.resolution=h,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Zi.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=Zi.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const o=this._frameKeys[t],l=this._frames[o],u=l.frame;if(u){let h=null,f=null;const p=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,g=new Ke(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);l.rotated?h=new Ke(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new Ke(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(f=new Ke(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new Pe({source:this.textureSource,frame:h,orig:g,trim:f,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const o=e[t][s];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Zi.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Zi.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Jp.BATCH_SIZE=1e3;let Pf=Jp;const ax=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function em(i,e,t){const s={};if(i.forEach(o=>{s[o]=e}),Object.keys(e.textures).forEach(o=>{s[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=Ot.dirname(i[0]);e.linkedSheets.forEach((l,u)=>{const h=em([`${o}/${e.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,h)})}return s}const lx={extension:ue.Asset,cache:{test:i=>i instanceof Pf,getCacheableAssets:(i,e)=>em(i,e,!1)},resolver:{extension:{type:ue.ResolveParser,name:"resolveSpritesheet"},test:i=>{const t=i.split("?")[0].split("."),s=t.pop(),o=t.pop();return s==="json"&&ax.includes(o)},parse:i=>{var t;const e=i.split(".");return{resolution:parseFloat(((t=ni.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:e[e.length-2],src:i}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:ue.LoadParser,priority:er.Normal,name:"spritesheetLoader"},async testParse(i,e){return Ot.extname(e.src).toLowerCase()===".json"&&!!i.frames},async parse(i,e,t){var y,_;const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=(e==null?void 0:e.data)??{};let h=Ot.dirname(e.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let f;if(s instanceof Pe)f=s;else{const v=Iu(h+(o??i.meta.image),e.src);f=(await t.load([{src:v,data:l}]))[v]}const p=new Pf({texture:f.source,data:i,cachePrefix:u});await p.parse();const g=(y=i==null?void 0:i.meta)==null?void 0:y.related_multi_packs;if(Array.isArray(g)){const v=[];for(const k of g){if(typeof k!="string")continue;let w=h+k;(_=e.data)!=null&&_.ignoreMultiPack||(w=Iu(w,e.src),v.push(t.load({src:w,data:{textureOptions:l,ignoreMultiPack:!0}})))}const S=await Promise.all(v);p.linkedSheets=S,S.forEach(k=>{k.linkedSheets=[p].concat(p.linkedSheets.filter(w=>w!==k))})}return p},async unload(i,e,t){await t.unload(i.textureSource._sourceOrigin),i.destroy(!1)}}};ft.add(lx);const uu=Object.create(null),bf=Object.create(null);function Qu(i,e){let t=bf[i];return t===void 0&&(uu[e]===void 0&&(uu[e]=1),bf[i]=t=uu[e]++),t}let $r;function tm(){return(!$r||$r!=null&&$r.isContextLost())&&($r=Oe.get().createCanvas().getContext("webgl",{})),$r}let Io;function ux(){if(!Io){Io="mediump";const i=tm();i&&i.getShaderPrecisionFormat&&(Io=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?"highp":"mediump")}return Io}function cx(i,e,t){return e?i:t?(i=i.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${i}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${i}
        `}function hx(i,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(i.substring(0,9)!=="precision"){let o=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${i}`}else if(s!=="highp"&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}function dx(i,e){return e?`#version 300 es
${i}`:i}const fx={},px={};function mx(i,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?fx:px;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,i.indexOf("#define SHADER_NAME")!==-1?i:`${`#define SHADER_NAME ${e}`}
${i}`}function gx(i,e){return e?i.replace("#version 300 es",""):i}const cu={stripVersion:gx,ensurePrecision:hx,addProgramDefines:cx,setProgramName:mx,insertVersion:dx},Vi=Object.create(null),nm=class Fu{constructor(e){e={...Fu.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:ux()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let o=e.fragment,l=e.vertex;Object.keys(cu).forEach(u=>{const h=s[u];o=cu[u](o,h,!0),l=cu[u](l,h,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Qu(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Vi[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return Vi[t]||(Vi[t]=new Fu(e),Vi[t]._cacheKey=t),Vi[t]}};nm.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let rm=nm;const Tf={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function yx(i){return Tf[i]??Tf.float32}const xx={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function _x({source:i,entryPoint:e}){const t={},s=i.indexOf(`fn ${e}`);if(s!==-1){const o=i.indexOf("->",s);if(o!==-1){const l=i.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const f=xx[h[3]]??"float32";t[h[2]]={location:parseInt(h[1],10),format:f,stride:yx(f).stride,offset:0,instance:!1,start:0}}}}return t}function hu(i){var y,_;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,f=/struct\s+(\w+)/,p=(y=i.match(e))==null?void 0:y.map(v=>({group:parseInt(v.match(t)[1],10),binding:parseInt(v.match(s)[1],10),name:v.match(o)[2],isUniform:v.match(o)[1]==="<uniform>",type:v.match(l)[1]}));if(!p)return{groups:[],structs:[]};const g=((_=i.match(u))==null?void 0:_.map(v=>{const S=v.match(f)[1],k=v.match(h).reduce((w,P)=>{const[b,E]=P.split(":");return w[b.trim()]=E.trim(),w},{});return k?{name:S,members:k}:null}).filter(({name:v})=>p.some(S=>S.type===v)))??[];return{groups:p,structs:g}}var Ji=(i=>(i[i.VERTEX=1]="VERTEX",i[i.FRAGMENT=2]="FRAGMENT",i[i.COMPUTE=4]="COMPUTE",i))(Ji||{});function vx({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:Ji.VERTEX|Ji.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:Ji.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:Ji.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function wx({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function Sx(i,e){const t=new Set,s=new Set,o=[...i.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),l=[...i.groups,...e.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:o,groups:l}}const $i=Object.create(null);class Jo{constructor(e){var h,f;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:o,gpuLayout:l,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=s,t.source===s.source){const p=hu(t.source);this.structsAndGroups=p}else{const p=hu(s.source),g=hu(t.source);this.structsAndGroups=Sx(p,g)}this.layout=o??wx(this.structsAndGroups),this.gpuLayout=l??vx(this.structsAndGroups),this.autoAssignGlobalUniforms=((h=this.layout[0])==null?void 0:h.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((f=this.layout[1])==null?void 0:f.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Qu(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=_x(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,$i[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return $i[t]||($i[t]=new Jo(e),$i[t]._cacheKey=t),$i[t]}}const im=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],Cx=im.reduce((i,e)=>(i[e]=!0,i),{});function kx(i,e){switch(i){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const sm=class om{constructor(e,t){this._touched=0,this.uid=Xe("uniform"),this._resourceType="uniformGroup",this._resourceId=Xe("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...om.defaultOptions,...t},this.uniformStructures=e;const s={};for(const o in e){const l=e[o];if(l.name=o,l.size=l.size??1,!Cx[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,f]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${h}', size: ${f} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${im.join(", ")}`)}l.value??(l.value=kx(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Qu(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};sm.defaultOptions={ubo:!1,isStatic:!1};let am=sm;class Uo{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const o=e[s];this.setResource(o,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){var o,l;const s=this.resources[t];e!==s&&(s&&((o=e.off)==null||o.call(e,"change",this.onResourceChange,this)),(l=e.on)==null||l.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){var t;const e=this.resources;for(const s in e){const o=e[s];(t=o==null?void 0:o.off)==null||t.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var Lu=(i=>(i[i.WEBGL=1]="WEBGL",i[i.WEBGPU=2]="WEBGPU",i[i.BOTH=3]="BOTH",i))(Lu||{});class Ku extends an{constructor(e){super(),this.uid=Xe("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:h}=e;this.gpuProgram=t,this.glProgram=s,u===void 0&&(u=0,t&&(u|=Lu.WEBGPU),s&&(u|=Lu.WEBGL)),this.compatibleRenderers=u;const f={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&o&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&o&&h)for(const p in h)for(const g in h[p]){const y=h[p][g];f[y]={group:p,binding:g,name:y}}else if(t&&o&&!h){const p=t.structsAndGroups.groups;h={},p.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,f[g.name]=g})}else if(l){o={},h={},t&&t.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,f[y.name]=y});let p=0;for(const g in l)f[g]||(o[99]||(o[99]=new Uo,this._ownedBindGroups.push(o[99])),f[g]={group:99,binding:p,name:g},h[99]=h[99]||{},h[99][p]=g,p++);for(const g in l){const y=g;let _=l[g];!_.source&&!_._resourceType&&(_=new am(_));const v=f[y];v&&(o[v.group]||(o[v.group]=new Uo,this._ownedBindGroups.push(o[v.group])),o[v.group].setResource(_,v.binding))}}this.groups=o,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(o,f)}addResource(e,t,s){var o,l;(o=this._uniformBindMap)[t]||(o[t]={}),(l=this._uniformBindMap[t])[s]||(l[s]=e),this.groups[t]||(this.groups[t]=new Uo,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const o in t){const l=t[o];Object.defineProperty(s,l.name,{get(){return e[l.group].getResource(l.binding)},set(u){e[l.group].setResource(u,l.binding)}})}return s}destroy(e=!1){var t,s;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...o}=e;let l,u;return t&&(l=Jo.from(t)),s&&(u=rm.from(s)),new Ku({gpuProgram:l,glProgram:u,...o})}}const Bu=[];ft.handleByNamedList(ue.Environment,Bu);async function Ax(i){if(!i)for(let e=0;e<Bu.length;e++){const t=Bu[e];if(t.value.test()){await t.value.load();return}}}let Yi;function Px(){if(typeof Yi=="boolean")return Yi;try{Yi=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Yi=!1}return Yi}function Ef(i,e,t=2){const s=e&&e.length,o=s?e[0]*t:i.length;let l=lm(i,0,o,t,!0);const u=[];if(!l||l.next===l.prev)return u;let h,f,p;if(s&&(l=Rx(i,e,l,t)),i.length>80*t){h=i[0],f=i[1];let g=h,y=f;for(let _=t;_<o;_+=t){const v=i[_],S=i[_+1];v<h&&(h=v),S<f&&(f=S),v>g&&(g=v),S>y&&(y=S)}p=Math.max(g-h,y-f),p=p!==0?32767/p:0}return as(l,u,t,h,f,p,0),u}function lm(i,e,t,s,o){let l;if(o===jx(i,e,t,s)>0)for(let u=e;u<t;u+=s)l=Mf(u/s|0,i[u],i[u+1],l);else for(let u=t-s;u>=e;u-=s)l=Mf(u/s|0,i[u],i[u+1],l);return l&&ti(l,l.next)&&(us(l),l=l.next),l}function wr(i,e){if(!i)return i;e||(e=i);let t=i,s;do if(s=!1,!t.steiner&&(ti(t,t.next)||He(t.prev,t,t.next)===0)){if(us(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function as(i,e,t,s,o,l,u){if(!i)return;!u&&l&&zx(i,s,o,l);let h=i;for(;i.prev!==i.next;){const f=i.prev,p=i.next;if(l?Tx(i,s,o,l):bx(i)){e.push(f.i,i.i,p.i),us(i),i=p.next,h=p.next;continue}if(i=p,i===h){u?u===1?(i=Ex(wr(i),e),as(i,e,t,s,o,l,2)):u===2&&Mx(i,e,t,s,o,l):as(wr(i),e,t,s,o,l,1);break}}}function bx(i){const e=i.prev,t=i,s=i.next;if(He(e,t,s)>=0)return!1;const o=e.x,l=t.x,u=s.x,h=e.y,f=t.y,p=s.y,g=Math.min(o,l,u),y=Math.min(h,f,p),_=Math.max(o,l,u),v=Math.max(h,f,p);let S=s.next;for(;S!==e;){if(S.x>=g&&S.x<=_&&S.y>=y&&S.y<=v&&es(o,h,l,f,u,p,S.x,S.y)&&He(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function Tx(i,e,t,s){const o=i.prev,l=i,u=i.next;if(He(o,l,u)>=0)return!1;const h=o.x,f=l.x,p=u.x,g=o.y,y=l.y,_=u.y,v=Math.min(h,f,p),S=Math.min(g,y,_),k=Math.max(h,f,p),w=Math.max(g,y,_),P=zu(v,S,e,t,s),b=zu(k,w,e,t,s);let E=i.prevZ,R=i.nextZ;for(;E&&E.z>=P&&R&&R.z<=b;){if(E.x>=v&&E.x<=k&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&es(h,g,f,y,p,_,E.x,E.y)&&He(E.prev,E,E.next)>=0||(E=E.prevZ,R.x>=v&&R.x<=k&&R.y>=S&&R.y<=w&&R!==o&&R!==u&&es(h,g,f,y,p,_,R.x,R.y)&&He(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;E&&E.z>=P;){if(E.x>=v&&E.x<=k&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&es(h,g,f,y,p,_,E.x,E.y)&&He(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;R&&R.z<=b;){if(R.x>=v&&R.x<=k&&R.y>=S&&R.y<=w&&R!==o&&R!==u&&es(h,g,f,y,p,_,R.x,R.y)&&He(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function Ex(i,e){let t=i;do{const s=t.prev,o=t.next.next;!ti(s,o)&&cm(s,t,t.next,o)&&ls(s,o)&&ls(o,s)&&(e.push(s.i,t.i,o.i),us(t),us(t.next),t=i=o),t=t.next}while(t!==i);return wr(t)}function Mx(i,e,t,s,o,l){let u=i;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&Dx(u,h)){let f=hm(u,h);u=wr(u,u.next),f=wr(f,f.next),as(u,e,t,s,o,l,0),as(f,e,t,s,o,l,0);return}h=h.next}u=u.next}while(u!==i)}function Rx(i,e,t,s){const o=[];for(let l=0,u=e.length;l<u;l++){const h=e[l]*s,f=l<u-1?e[l+1]*s:i.length,p=lm(i,h,f,s,!1);p===p.next&&(p.steiner=!0),o.push(Ox(p))}o.sort(Ix);for(let l=0;l<o.length;l++)t=Fx(o[l],t);return t}function Ix(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const s=(i.next.y-i.y)/(i.next.x-i.x),o=(e.next.y-e.y)/(e.next.x-e.x);t=s-o}return t}function Fx(i,e){const t=Lx(i,e);if(!t)return e;const s=hm(t,i);return wr(s,s.next),wr(t,t.next)}function Lx(i,e){let t=e;const s=i.x,o=i.y;let l=-1/0,u;if(ti(i,t))return t;do{if(ti(i,t.next))return t.next;if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>l&&(l=y,u=t.x<t.next.x?t:t.next,y===s))return u}t=t.next}while(t!==e);if(!u)return null;const h=u,f=u.x,p=u.y;let g=1/0;t=u;do{if(s>=t.x&&t.x>=f&&s!==t.x&&um(o<p?s:l,o,f,p,o<p?l:s,o,t.x,t.y)){const y=Math.abs(o-t.y)/(s-t.x);ls(t,i)&&(y<g||y===g&&(t.x>u.x||t.x===u.x&&Bx(u,t)))&&(u=t,g=y)}t=t.next}while(t!==h);return u}function Bx(i,e){return He(i.prev,i,e.prev)<0&&He(e.next,i,i.next)<0}function zx(i,e,t,s){let o=i;do o.z===0&&(o.z=zu(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,Nx(o)}function Nx(i){let e,t=1;do{let s=i,o;i=null;let l=null;for(e=0;s;){e++;let u=s,h=0;for(let p=0;p<t&&(h++,u=u.nextZ,!!u);p++);let f=t;for(;h>0||f>0&&u;)h!==0&&(f===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,h--):(o=u,u=u.nextZ,f--),l?l.nextZ=o:i=o,o.prevZ=l,l=o;s=u}l.nextZ=null,t*=2}while(e>1);return i}function zu(i,e,t,s,o){return i=(i-t)*o|0,e=(e-s)*o|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function Ox(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function um(i,e,t,s,o,l,u,h){return(o-u)*(e-h)>=(i-u)*(l-h)&&(i-u)*(s-h)>=(t-u)*(e-h)&&(t-u)*(l-h)>=(o-u)*(s-h)}function es(i,e,t,s,o,l,u,h){return!(i===u&&e===h)&&um(i,e,t,s,o,l,u,h)}function Dx(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!Gx(i,e)&&(ls(i,e)&&ls(e,i)&&Ux(i,e)&&(He(i.prev,i,e.prev)||He(i,e.prev,e))||ti(i,e)&&He(i.prev,i,i.next)>0&&He(e.prev,e,e.next)>0)}function He(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function ti(i,e){return i.x===e.x&&i.y===e.y}function cm(i,e,t,s){const o=Lo(He(i,e,t)),l=Lo(He(i,e,s)),u=Lo(He(t,s,i)),h=Lo(He(t,s,e));return!!(o!==l&&u!==h||o===0&&Fo(i,t,e)||l===0&&Fo(i,s,e)||u===0&&Fo(t,i,s)||h===0&&Fo(t,e,s))}function Fo(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Lo(i){return i>0?1:i<0?-1:0}function Gx(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&cm(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function ls(i,e){return He(i.prev,i,i.next)<0?He(i,e,i.next)>=0&&He(i,i.prev,e)>=0:He(i,e,i.prev)<0||He(i,i.next,e)<0}function Ux(i,e){let t=i,s=!1;const o=(i.x+e.x)/2,l=(i.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==i);return s}function hm(i,e){const t=Nu(i.i,i.x,i.y),s=Nu(e.i,e.x,e.y),o=i.next,l=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,s.next=t,t.prev=s,l.next=s,s.prev=l,s}function Mf(i,e,t,s){const o=Nu(i,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function us(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Nu(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function jx(i,e,t,s){let o=0;for(let l=e,u=t-s;l<t;l+=s)o+=(i[u]-i[l])*(i[l+1]+i[u+1]),u=l;return o}const Wx=Ef.default||Ef;var dm=(i=>(i[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i))(dm||{});class Hx{constructor(e){this.items=[],this._name=e}emit(e,t,s,o,l,u,h,f){const{name:p,items:g}=this;for(let y=0,_=g.length;y<_;y++)g[y][p](e,t,s,o,l,u,h,f);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Vx=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],fm=class pm extends an{constructor(e){super(),this.uid=Xe("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...Vx,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await Ax(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...pm.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof sn&&(s={container:s},t&&(Se(Ie,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:it.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const o=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=dm.ALL);const{clear:s,clearColor:o,target:l}=e;it.shared.setValue(o??this.background.colorRgba),t.renderTarget.clear(l,s,it.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new Hx(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(e,t){const s=t.reduce((o,l)=>(o[l.name]=l.value,o),{});e.forEach(o=>{const l=o.value,u=o.name,h=s[u];this.renderPipes[u]=new l(this,h?new h:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&ps.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Px())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};fm.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let mm=fm,Bo;function $x(i){return Bo!==void 0||(Bo=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:i??mm.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Oe.get().getWebGLRenderingContext())return!1;let o=Oe.get().createCanvas().getContext("webgl",e);const l=!!((t=o==null?void 0:o.getContextAttributes())!=null&&t.stencil);if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,l}catch{return!1}})()),Bo}let zo;async function Yx(i={}){return zo!==void 0||(zo=await(async()=>{const e=Oe.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(i)).requestDevice(),!0}catch{return!1}})()),zo}const Rf=["webgl","webgpu","canvas"];async function Xx(i){let e=[];i.preference?(e.push(i.preference),Rf.forEach(l=>{l!==i.preference&&e.push(l)})):e=Rf.slice();let t,s={};for(let l=0;l<e.length;l++){const u=e[l];if(u==="webgpu"&&await Yx()){const{WebGPURenderer:h}=await Vo(async()=>{const{WebGPURenderer:f}=await import("./WebGPURenderer-A4s648xb.js");return{WebGPURenderer:f}},__vite__mapDeps([3,2,4]));t=h,s={...i,...i.webgpu};break}else if(u==="webgl"&&$x(i.failIfMajorPerformanceCaveat??mm.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await Vo(async()=>{const{WebGLRenderer:f}=await import("./WebGLRenderer-B_Q3eVeU.js");return{WebGLRenderer:f}},__vite__mapDeps([5,2,4]));t=h,s={...i,...i.webgl};break}else if(u==="canvas")throw s={...i},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const o=new t;return await o.init(s),o}const gm="8.14.3";class ym{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,gm)}static destroy(){}}ym.extension=ue.Application;class qx{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,gm)}destroy(){this._renderer=null}}qx.extension={type:[ue.WebGLSystem,ue.WebGPUSystem],name:"initHook",priority:-10};const xm=class Ou{constructor(...e){this.stage=new sn,e[0]!==void 0&&Se(Ie,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new sn),this.renderer=await Xx(e),Ou._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Se(Ie,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=Ou._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};xm._plugins=[];let _m=xm;ft.handleByList(ue.Application,_m._plugins);ft.add(ym);class vm extends an{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Se(Ie,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Se(Ie,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Se(Ie,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Se(Ie,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Se(Ie,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(t=this.chars[s].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class Qx{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let o=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(e,t,s=!1,o=this.resetTtl){let l=this.items[e];return s||l!==void 0?(l.value=t,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function wm(i=1e3,e=0,t=!1){if(isNaN(i)||i<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new Qx(i,e,t)}const Kx=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Du(i){const e=typeof i.fontSize=="number"?`${i.fontSize}px`:i.fontSize;let t=i.fontFamily;Array.isArray(i.fontFamily)||(t=i.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let o=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!Kx.includes(o)&&(o=`"${o}"`),t[s]=o}return`${i.fontStyle} ${i.fontVariant} ${i.fontWeight} ${e} ${t.join(",")}`}const du={willReadFrequently:!0},un=class ae{static get experimentalLetterSpacingSupported(){let e=ae._experimentalLetterSpacingSupported;if(e===void 0){const t=Oe.get().getCanvasRenderingContext2D().prototype;e=ae._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,o,l,u,h,f,p){this.text=e,this.style=t,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=f,this.fontProperties=p}static measureText(e=" ",t,s=ae._canvas,o=t.wordWrap){var b;const l=`${e}-${t.styleKey}-wordWrap-${o}`;if(ae._measurementCache.has(l))return ae._measurementCache.get(l);const u=Du(t),h=ae.measureFont(u);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);const f=ae.__context;f.font=u;const g=(o?ae._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),y=new Array(g.length);let _=0;for(let E=0;E<g.length;E++){const R=ae._measureText(g[E],t.letterSpacing,f);y[E]=R,_=Math.max(_,R)}const v=((b=t._stroke)==null?void 0:b.width)||0;let S=_+v;t.dropShadow&&(S+=t.dropShadow.distance);const k=t.lineHeight||h.fontSize;let w=Math.max(k,h.fontSize+v)+(g.length-1)*(k+t.leading);t.dropShadow&&(w+=t.dropShadow.distance);const P=new ae(e,t,S,w,g,y,k+t.leading,_,h);return ae._measurementCache.set(l,P),P}static _measureText(e,t,s){let o=!1;ae.experimentalLetterSpacingSupported&&(ae.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(e);let u=l.width;const h=-l.actualBoundingBoxLeft;let p=l.actualBoundingBoxRight-h;if(u>0)if(o)u-=t,p-=t;else{const g=(ae.graphemeSegmenter(e).length-1)*t;u+=g,p+=g}return Math.max(u,p)}static _wordWrap(e,t,s=ae._canvas){const o=s.getContext("2d",du);let l=0,u="",h="";const f=Object.create(null),{letterSpacing:p,whiteSpace:g}=t,y=ae._collapseSpaces(g),_=ae._collapseNewlines(g);let v=!y;const S=t.wordWrapWidth+p,k=ae._tokenize(e);for(let w=0;w<k.length;w++){let P=k[w];if(ae._isNewline(P)){if(!_){h+=ae._addLine(u),v=!y,u="",l=0;continue}P=" "}if(y){const E=ae.isBreakingSpace(P),R=ae.isBreakingSpace(u[u.length-1]);if(E&&R)continue}const b=ae._getFromCache(P,p,f,o);if(b>S)if(u!==""&&(h+=ae._addLine(u),u="",l=0),ae.canBreakWords(P,t.breakWords)){const E=ae.wordWrapSplit(P);for(let R=0;R<E.length;R++){let U=E[R],z=U,B=1;for(;E[R+B];){const oe=E[R+B];if(!ae.canBreakChars(z,oe,P,R,t.breakWords))U+=oe;else break;z=oe,B++}R+=B-1;const ne=ae._getFromCache(U,p,f,o);ne+l>S&&(h+=ae._addLine(u),v=!1,u="",l=0),u+=U,l+=ne}}else{u.length>0&&(h+=ae._addLine(u),u="",l=0);const E=w===k.length-1;h+=ae._addLine(P,!E),v=!1,u="",l=0}else b+l>S&&(v=!1,h+=ae._addLine(u),u="",l=0),(u.length>0||!ae.isBreakingSpace(P)||v)&&(u+=P,l+=b)}return h+=ae._addLine(u,!1),h}static _addLine(e,t=!0){return e=ae._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,o){let l=s[e];return typeof l!="number"&&(l=ae._measureText(e,t,o)+t,s[e]=l),l}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!ae.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ae._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ae._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1];if(ae.isBreakingSpace(l,u)||ae._isNewline(l)){s!==""&&(t.push(s),s=""),l==="\r"&&u===`
`?(t.push(`\r
`),o++):t.push(l);continue}s+=l}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,o,l){return!0}static wordWrapSplit(e){return ae.graphemeSegmenter(e)}static measureFont(e){if(ae._fonts[e])return ae._fonts[e];const t=ae._context;t.font=e;const s=t.measureText(ae.METRICS_STRING+ae.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return ae._fonts[e]=o,o}static clearMetrics(e=""){e?delete ae._fonts[e]:ae._fonts={}}static get _canvas(){if(!ae.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",du);if(s!=null&&s.measureText)return ae.__canvas=t,t;e=Oe.get().createCanvas()}catch{e=Oe.get().createCanvas()}e.width=e.height=10,ae.__canvas=e}return ae.__canvas}static get _context(){return ae.__context||(ae.__context=ae._canvas.getContext("2d",du)),ae.__context}};un.METRICS_STRING="|q";un.BASELINE_SYMBOL="M";un.BASELINE_MULTIPLIER=1.4;un.HEIGHT_MULTIPLIER=2;un.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return e=>{const t=i.segment(e),s=[];let o=0;for(const l of t)s[o++]=l.segment;return s}}return i=>[...i]})();un.experimentalLetterSpacing=!1;un._fonts={};un._newlines=[10,13];un._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];un._measurementCache=wm(1e3);let jo=un;const If=[{offset:0,color:"white"},{offset:1,color:"black"}],Zu=class Gu{constructor(...e){this.uid=Xe("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=Zx(e);t={...t.type==="radial"?Gu.defaultRadialOptions:Gu.defaultLinearOptions,...kp(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:it.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:o}=this.end,l=s-e,u=o-t;const h=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const w=e;e=s,s=w,l*=-1}if(u<0){const w=t;t=o,o=w,u*=-1}}const f=this.colorStops.length?this.colorStops:If,p=this._textureSize,{canvas:g,context:y}=Lf(p,1),_=h?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);Ff(_,f),y.fillStyle=_,y.fillRect(0,0,p,1),this.texture=new Pe({source:new vr({resource:g,addressMode:this._wrapMode})});const v=Math.sqrt(l*l+u*u),S=Math.atan2(u,l),k=new Ce;k.scale(v/p,1),k.rotate(S),k.translate(e,t),this.textureSpace==="local"&&k.scale(p,p),this.transform=k}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:If,t=this._textureSize,{canvas:s,context:o}=Lf(t,t),{x:l,y:u}=this.center,{x:h,y:f}=this.outerCenter,p=this.innerRadius,g=this.outerRadius,y=h-g,_=f-g,v=t/(g*2),S=(l-y)*v,k=(u-_)*v,w=o.createRadialGradient(S,k,p*v,(h-y)*v,(f-_)*v,g*v);Ff(w,e),o.fillStyle=e[e.length-1].color,o.fillRect(0,0,t,t),o.fillStyle=w,o.translate(S,k),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-S,-k),o.fillRect(0,0,t,t),this.texture=new Pe({source:new vr({resource:s,addressMode:this._wrapMode})});const P=new Ce;P.scale(1/v,1/v),P.translate(y,_),this.textureSpace==="local"&&P.scale(t,t),this.transform=P}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Zu.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Zu.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Mn=Zu;function Ff(i,e){for(let t=0;t<e.length;t++){const s=e[t];i.addColorStop(s.offset,s.color)}}function Lf(i,e){const t=Oe.get().createCanvas(i,e),s=t.getContext("2d");return{canvas:t,context:s}}function Zx(i){let e=i[0]??{};return(typeof e=="number"||i[1])&&(Se("8.5.2","use options object instead"),e={type:"linear",start:{x:i[0],y:i[1]},end:{x:i[2],y:i[3]},textureSpace:i[4],textureSize:i[5]??Mn.defaultLinearOptions.textureSize}),e}const Bf={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class ea{constructor(e,t){this.uid=Xe("fillPattern"),this._tick=0,this.transform=new Ce,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=Bf[t].addressModeU,e.source.style.addressModeV=Bf[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var fu,zf;function Jx(){if(zf)return fu;zf=1,fu=t;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(l){var u=[];return l.replace(e,function(h,f,p){var g=f.toLowerCase();for(p=o(p),g=="m"&&p.length>2&&(u.push([f].concat(p.splice(0,2))),g="l",f=f=="m"?"l":"L");;){if(p.length==i[g])return p.unshift(f),u.push(p);if(p.length<i[g])throw new Error("malformed path data");u.push([f].concat(p.splice(0,i[g])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return fu}var e_=Jx();const t_=$u(e_);function n_(i,e){const t=t_(i),s=[];let o=null,l=0,u=0;for(let h=0;h<t.length;h++){const f=t[h],p=f[0],g=f;switch(p){case"M":l=g[1],u=g[2],e.moveTo(l,u);break;case"m":l+=g[1],u+=g[2],e.moveTo(l,u);break;case"H":l=g[1],e.lineTo(l,u);break;case"h":l+=g[1],e.lineTo(l,u);break;case"V":u=g[1],e.lineTo(l,u);break;case"v":u+=g[1],e.lineTo(l,u);break;case"L":l=g[1],u=g[2],e.lineTo(l,u);break;case"l":l+=g[1],u+=g[2],e.lineTo(l,u);break;case"C":l=g[5],u=g[6],e.bezierCurveTo(g[1],g[2],g[3],g[4],l,u);break;case"c":e.bezierCurveTo(l+g[1],u+g[2],l+g[3],u+g[4],l+g[5],u+g[6]),l+=g[5],u+=g[6];break;case"S":l=g[3],u=g[4],e.bezierCurveToShort(g[1],g[2],l,u);break;case"s":e.bezierCurveToShort(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"Q":l=g[3],u=g[4],e.quadraticCurveTo(g[1],g[2],l,u);break;case"q":e.quadraticCurveTo(l+g[1],u+g[2],l+g[3],u+g[4]),l+=g[3],u+=g[4];break;case"T":l=g[1],u=g[2],e.quadraticCurveToShort(l,u);break;case"t":l+=g[1],u+=g[2],e.quadraticCurveToShort(l,u);break;case"A":l=g[6],u=g[7],e.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"a":l+=g[6],u+=g[7],e.arcToSvg(g[1],g[2],g[3],g[4],g[5],l,u);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:Ne(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return e}class Ju{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new Ju(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-e,l=this.y-t;return o*=o,l*=l,o+l<=s}strokeContains(e,t,s,o=.5){if(this.radius===0)return!1;const l=this.x-e,u=this.y-t,h=this.radius,f=(1-o)*s,p=Math.sqrt(l*l+u*u);return p<=h+f&&p>h-(s-f)}getBounds(e){return e||(e=new Ke),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class ec{constructor(e=0,t=0,s=0,o=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=o}clone(){return new ec(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,o=(t-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(e,t,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=s*(1-o),f=s-h,p=l-f,g=u-f,y=l+h,_=u+h,v=e-this.x,S=t-this.y,k=v*v/(p*p)+S*S/(g*g),w=v*v/(y*y)+S*S/(_*_);return k>1&&w<=1}getBounds(e){return e||(e=new Ke),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function r_(i,e,t,s,o,l){const u=i-t,h=e-s,f=o-t,p=l-s,g=u*f+h*p,y=f*f+p*p;let _=-1;y!==0&&(_=g/y);let v,S;_<0?(v=t,S=s):_>1?(v=o,S=l):(v=t+_*f,S=s+_*p);const k=i-v,w=e-S;return k*k+w*w}let i_,s_;class is{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let o=0,l=t.length;o<l;o++)s.push(t[o].x,t[o].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let o=0;o<s;o+=2){const l=t[o],u=t[o+1],h=t[(o+2)%s],f=t[(o+3)%s];e+=(h-l)*(f+u)}return e<0}containsPolygon(e){const t=this.getBounds(i_),s=e.getBounds(s_);if(!t.containsRect(s))return!1;const o=e.points;for(let l=0;l<o.length;l+=2){const u=o[l],h=o[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const e=this.points.slice(),t=new is(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const h=this.points[l*2],f=this.points[l*2+1],p=this.points[u*2],g=this.points[u*2+1];f>t!=g>t&&e<(p-h)*((t-f)/(g-f))+h&&(s=!s)}return s}strokeContains(e,t,s,o=.5){const l=s*s,u=l*(1-o),h=l-u,{points:f}=this,p=f.length-(this.closePath?0:2);for(let g=0;g<p;g+=2){const y=f[g],_=f[g+1],v=f[(g+2)%f.length],S=f[(g+3)%f.length],k=r_(e,t,y,_,v,S),w=Math.sign((v-y)*(t-_)-(S-_)*(e-y));if(k<=(w<0?h:u))return!0}return!1}getBounds(e){e||(e=new Ke);const t=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let h=0,f=t.length;h<f;h+=2){const p=t[h],g=t[h+1];s=p<s?p:s,o=p>o?p:o,l=g<l?g:l,u=g>u?g:u}return e.x=s,e.width=o-s,e.y=l,e.height=u-l,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Se("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Se("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const No=(i,e,t,s,o,l,u)=>{const h=i-t,f=e-s,p=Math.sqrt(h*h+f*f);return p>=o-l&&p<=o+u};class tc{constructor(e=0,t=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=o,this.radius=l}getBounds(e){return e||(e=new Ke),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new tc(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let o=e-(this.x+s),l=t-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=e-(this.x+this.width-s),o*o+l*l<=u)||(l=t-(this.y+this.height-s),o*o+l*l<=u)||(o=e-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(e,t,s,o=.5){const{x:l,y:u,width:h,height:f,radius:p}=this,g=s*(1-o),y=s-g,_=l+p,v=u+p,S=h-p*2,k=f-p*2,w=l+h,P=u+f;return(e>=l-g&&e<=l+y||e>=w-y&&e<=w+g)&&t>=v&&t<=v+k||(t>=u-g&&t<=u+y||t>=P-y&&t<=P+g)&&e>=_&&e<=_+S?!0:e<_&&t<v&&No(e,t,_,v,p,y,g)||e>w-p&&t<v&&No(e,t,w-p,v,p,y,g)||e>w-p&&t>P-p&&No(e,t,w-p,P-p,p,y,g)||e<_&&t>P-p&&No(e,t,_,P-p,p,y,g)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const Sm={};function o_(i,e,t){let s=2166136261;for(let o=0;o<e;o++)s^=i[o].uid,s=Math.imul(s,16777619),s>>>=0;return Sm[s]||a_(i,e,s,t)}function a_(i,e,t,s){const o={};let l=0;for(let h=0;h<s;h++){const f=h<e?i[h]:Pe.EMPTY.source;o[l++]=f.source,o[l++]=f.style}const u=new Uo(o);return Sm[t]=u,u}class Nf{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function Of(i,e){const t=i.byteLength/8|0,s=new Float64Array(i,0,t);new Float64Array(e,0,t).set(s);const l=i.byteLength-t*8;if(l>0){const u=new Uint8Array(i,t*8,l);new Uint8Array(e,t*8,l).set(u)}}const l_={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var u_=(i=>(i[i.DISABLED=0]="DISABLED",i[i.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",i[i.MASK_ACTIVE=2]="MASK_ACTIVE",i[i.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",i[i.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",i[i.NONE=5]="NONE",i))(u_||{});function Df(i,e){return e.alphaMode==="no-premultiply-alpha"&&l_[i]||i}const c_=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function h_(i){let e="";for(let t=0;t<i;++t)t>0&&(e+=`
else `),t<i-1&&(e+=`if(test == ${t}.0){}`);return e}function d_(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=c_.replace(/%forloop%/gi,h_(i));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))i=i/2|0;else break}}finally{e.deleteShader(t)}return i}let Yr=null;function f_(){var e;if(Yr)return Yr;const i=tm();return Yr=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),Yr=d_(Yr,i),(e=i.getExtension("WEBGL_lose_context"))==null||e.loseContext(),Yr}class p_{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class m_{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new p_,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const ss=[];let qo=0;ps.register({clear:()=>{if(ss.length>0)for(const i of ss)i&&i.destroy();ss.length=0,qo=0}});function Gf(){return qo>0?ss[--qo]:new m_}function Uf(i){ss[qo++]=i}let Xi=0;const Cm=class km{constructor(e){this.uid=Xe("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...km.defaultOptions,...e},e.maxTextures||(Se("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=f_());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new Nf(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)Uf(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=Gf(),o=s.textures;o.clear();const l=t[this.elementStart];let u=Df(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const f=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,g=this.indexBuffer;let y=this._batchIndexSize,_=this._batchIndexStart,v="startBatch";const S=this.maxTextures;for(let k=this.elementStart;k<this.elementSize;++k){const w=t[k];t[k]=null;const b=w.texture._source,E=Df(w.blendMode,b),R=u!==E||h!==w.topology;if(b._batchTick===Xi&&!R){w._textureId=b._textureBindLocation,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,f,p,w._attributeStart,w._textureId),this.packQuadIndex(g,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,f,p,w._attributeStart,w._textureId),this.packIndex(w,g,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}b._batchTick=Xi,(o.count>=S||R)&&(this._finishBatch(s,_,y-_,o,u,h,e,v),v="renderBatch",_=y,u=E,h=w.topology,s=Gf(),o=s.textures,o.clear(),++Xi),w._textureId=b._textureBindLocation=o.count,o.ids[b.uid]=o.count,o.textures[o.count++]=b,w._batch=s,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,f,p,w._attributeStart,w._textureId),this.packQuadIndex(g,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,f,p,w._attributeStart,w._textureId),this.packIndex(w,g,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,_,y-_,o,u,h,e,v),_=y,++Xi),this.elementStart=this.elementSize,this._batchIndexStart=_,this._batchIndexSize=y}_finishBatch(e,t,s,o,l,u,h,f){e.gpuBindGroup=null,e.bindGroup=null,e.action=f,e.batcher=this,e.textures=o,e.blendMode=l,e.topology=u,e.start=t,e.size=s,++Xi,this.batches[this.batchIndex++]=e,h.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new Nf(t);Of(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let l=0;l<t.length;l++)o[l]=t[l];else Of(t.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,o){const l=e.indices,u=e.indexSize,h=e.indexOffset,f=e.attributeOffset;for(let p=0;p<u;p++)t[s++]=o+l[p+h]-f}destroy(e={}){var t;if(this.batches!==null){for(let s=0;s<this.batches.length;s++)Uf(this.batches[s]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((t=this.shader)==null||t.destroy(),this.shader=null);for(let s=0;s<this._elements.length;s++)this._elements[s]&&(this._elements[s]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};Cm.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let g_=Cm;var Rt=(i=>(i[i.MAP_READ=1]="MAP_READ",i[i.MAP_WRITE=2]="MAP_WRITE",i[i.COPY_SRC=4]="COPY_SRC",i[i.COPY_DST=8]="COPY_DST",i[i.INDEX=16]="INDEX",i[i.VERTEX=32]="VERTEX",i[i.UNIFORM=64]="UNIFORM",i[i.STORAGE=128]="STORAGE",i[i.INDIRECT=256]="INDIRECT",i[i.QUERY_RESOLVE=512]="QUERY_RESOLVE",i[i.STATIC=1024]="STATIC",i))(Rt||{});class cs extends an{constructor(e){let{data:t,size:s}=e;const{usage:o,label:l,shrinkToFit:u}=e;super(),this.uid=Xe("buffer"),this._resourceType="buffer",this._resourceId=Xe("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t==null?void 0:t.byteLength);const h=!!t;this.descriptor={size:s,usage:o,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Rt.STATIC)}set static(e){e?this.descriptor.usage|=Rt.STATIC:this.descriptor.usage&=~Rt.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const o=this._data;if(this._data=e,this._dataInt32=null,!o||o.length!==e.length){!this.shrinkToFit&&o&&e.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Xe("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function Am(i,e){if(!(i instanceof cs)){let t=e?Rt.INDEX:Rt.VERTEX;i instanceof Array&&(e?(i=new Uint32Array(i),t=Rt.INDEX|Rt.COPY_DST):(i=new Float32Array(i),t=Rt.VERTEX|Rt.COPY_DST)),i=new cs({data:i,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return i}function y_(i,e,t){const s=i.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const o=s.buffer.data;let l=1/0,u=1/0,h=-1/0,f=-1/0;const p=o.BYTES_PER_ELEMENT,g=(s.offset||0)/p,y=(s.stride||8)/p;for(let _=g;_<o.length;_+=y){const v=o[_],S=o[_+1];v>h&&(h=v),S>f&&(f=S),v<l&&(l=v),S<u&&(u=S)}return t.minX=l,t.minY=u,t.maxX=h,t.maxY=f,t}function x_(i){return(i instanceof cs||Array.isArray(i)||i.BYTES_PER_ELEMENT)&&(i={buffer:i}),i.buffer=Am(i.buffer,!1),i}class __ extends an{constructor(e={}){super(),this.uid=Xe("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new on,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:o}=e;if(this.buffers=[],this.attributes={},t)for(const l in t)this.addAttribute(l,t[l]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=x_(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=Am(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,y_(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(s=>s.destroy()),(t=this.indexBuffer)==null||t.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const v_=new Float32Array(1),w_=new Uint32Array(1);class S_ extends __{constructor(){const t=new cs({data:v_,label:"attribute-batch-buffer",usage:Rt.VERTEX|Rt.COPY_DST,shrinkToFit:!1}),s=new cs({data:w_,label:"index-batch-buffer",usage:Rt.INDEX|Rt.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:o,offset:0},aUV:{buffer:t,format:"float32x2",stride:o,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function jf(i,e,t){if(i)for(const s in i){const o=s.toLocaleLowerCase(),l=e[o];if(l){let u=i[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&l.push(`//----${t}----//`),l.push(u)}else Ne(`${s} placement hook does not exist in shader`)}}const C_=/\{\{(.*?)\}\}/g;function Wf(i){var s;const e={};return(((s=i.match(C_))==null?void 0:s.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{e[o]=[]}),e}function Hf(i,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function Vf(i,e,t=!1){const s=[];Hf(e,s),i.forEach(h=>{h.header&&Hf(h.header,s)});const o=s;t&&o.sort();const l=o.map((h,f)=>`       @location(${f}) ${h},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function $f(i,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function k_(i){const t=/\b(\w+)\s*:/g.exec(i);return t?t[1]:""}function A_(i){const e=/@.*?\s+/g;return i.replace(e,"")}function P_(i,e){const t=[];$f(e,t),i.forEach(f=>{f.header&&$f(f.header,t)});let s=0;const o=t.sort().map(f=>f.indexOf("builtin")>-1?f:`@location(${s++}) ${f}`).join(`,
`),l=t.sort().map(f=>`       var ${A_(f)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(f=>` ${k_(f)}`).join(`,
`)});`;let h=e.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${o}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function Yf(i,e){let t=i;for(const s in e){const o=e[s];o.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const Jn=Object.create(null),pu=new Map;let b_=0;function T_({template:i,bits:e}){const t=Pm(i,e);if(Jn[t])return Jn[t];const{vertex:s,fragment:o}=M_(i,e);return Jn[t]=bm(s,o,e),Jn[t]}function E_({template:i,bits:e}){const t=Pm(i,e);return Jn[t]||(Jn[t]=bm(i.vertex,i.fragment,e)),Jn[t]}function M_(i,e){const t=e.map(u=>u.vertex).filter(u=>!!u),s=e.map(u=>u.fragment).filter(u=>!!u);let o=Vf(t,i.vertex,!0);o=P_(t,o);const l=Vf(s,i.fragment,!0);return{vertex:o,fragment:l}}function Pm(i,e){return e.map(t=>(pu.has(t)||pu.set(t,b_++),pu.get(t))).sort((t,s)=>t-s).join("-")+i.vertex+i.fragment}function bm(i,e,t){const s=Wf(i),o=Wf(e);return t.forEach(l=>{jf(l.vertex,s,l.name),jf(l.fragment,o,l.name)}),{vertex:Yf(i,s),fragment:Yf(e,o)}}const R_=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,I_=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,F_=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,L_=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,B_={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},z_={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function N_({bits:i,name:e}){const t=T_({template:{fragment:I_,vertex:R_},bits:[B_,...i]});return Jo.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function O_({bits:i,name:e}){return new rm({name:e,...E_({template:{vertex:F_,fragment:L_},bits:[z_,...i]})})}const D_={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},G_={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},mu={};function U_(i){const e=[];if(i===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<i;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function j_(i){const e=[];if(i===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<i;t++)t===i-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function W_(i){return mu[i]||(mu[i]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${U_(i)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${j_(i)}
            `}}),mu[i]}const gu={};function H_(i){const e=[];for(let t=0;t<i;t++)t>0&&e.push("else"),t<i-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function V_(i){return gu[i]||(gu[i]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${i}];

            `,main:`

                ${H_(i)}
            `}}),gu[i]}const $_={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Y_={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Xf={};function X_(i){let e=Xf[i];if(e)return e;const t=new Int32Array(i);for(let s=0;s<i;s++)t[s]=s;return e=Xf[i]=new am({uTextures:{value:t,type:"i32",size:i}},{isStatic:!0}),e}class qf extends Ku{constructor(e){const t=O_({name:"batch",bits:[G_,V_(e),Y_]}),s=N_({name:"batch",bits:[D_,W_(e),$_]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:X_(e)}}),this.maxTextures=e}}let qi=null;const Tm=class Em extends g_{constructor(e){super(e),this.geometry=new S_,this.name=Em.extension.name,this.vertexSize=6,qi??(qi=new qf(e.maxTextures)),this.shader=qi}packAttributes(e,t,s,o,l){const u=l<<16|e.roundPixels&65535,h=e.transform,f=h.a,p=h.b,g=h.c,y=h.d,_=h.tx,v=h.ty,{positions:S,uvs:k}=e,w=e.color,P=e.attributeOffset,b=P+e.attributeSize;for(let E=P;E<b;E++){const R=E*2,U=S[R],z=S[R+1];t[o++]=f*U+g*z+_,t[o++]=y*z+p*U+v,t[o++]=k[R],t[o++]=k[R+1],s[o++]=w,s[o++]=u}}packQuadAttributes(e,t,s,o,l){const u=e.texture,h=e.transform,f=h.a,p=h.b,g=h.c,y=h.d,_=h.tx,v=h.ty,S=e.bounds,k=S.maxX,w=S.minX,P=S.maxY,b=S.minY,E=u.uvs,R=e.color,U=l<<16|e.roundPixels&65535;t[o+0]=f*w+g*b+_,t[o+1]=y*b+p*w+v,t[o+2]=E.x0,t[o+3]=E.y0,s[o+4]=R,s[o+5]=U,t[o+6]=f*k+g*b+_,t[o+7]=y*b+p*k+v,t[o+8]=E.x1,t[o+9]=E.y1,s[o+10]=R,s[o+11]=U,t[o+12]=f*k+g*P+_,t[o+13]=y*P+p*k+v,t[o+14]=E.x2,t[o+15]=E.y2,s[o+16]=R,s[o+17]=U,t[o+18]=f*w+g*P+_,t[o+19]=y*P+p*w+v,t[o+20]=E.x3,t[o+21]=E.y3,s[o+22]=R,s[o+23]=U}_updateMaxTextures(e){this.shader.maxTextures!==e&&(qi=new qf(e),this.shader=qi)}destroy(){this.shader=null,super.destroy()}};Tm.extension={type:[ue.Batcher],name:"default"};let q_=Tm;function Q_(i,e,t,s,o,l,u,h=null){let f=0;t*=e,o*=l;const p=h.a,g=h.b,y=h.c,_=h.d,v=h.tx,S=h.ty;for(;f<u;){const k=i[t],w=i[t+1];s[o]=p*k+y*w+v,s[o+1]=g*k+_*w+S,o+=l,t+=e,f++}}function K_(i,e,t,s){let o=0;for(e*=t;o<s;)i[e]=0,i[e+1]=0,e+=t,o++}function Mm(i,e,t,s,o){const l=e.a,u=e.b,h=e.c,f=e.d,p=e.tx,g=e.ty;t||(t=0),s||(s=2),o||(o=i.length/s-t);let y=t*s;for(let _=0;_<o;_++){const v=i[y],S=i[y+1];i[y]=l*v+h*S+p,i[y+1]=u*v+f*S+g,y+=s}}const Z_=new Ce;class Rm{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?Lp(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||Z_}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const hs={extension:{type:ue.ShapeBuilder,name:"circle"},build(i,e){let t,s,o,l,u,h;if(i.type==="circle"){const R=i;if(u=h=R.radius,u<=0)return!1;t=R.x,s=R.y,o=l=0}else if(i.type==="ellipse"){const R=i;if(u=R.halfWidth,h=R.halfHeight,u<=0||h<=0)return!1;t=R.x,s=R.y,o=l=0}else{const R=i,U=R.width/2,z=R.height/2;t=R.x+U,s=R.y+z,u=h=Math.max(0,Math.min(R.radius,Math.min(U,z))),o=U-u,l=z-h}if(o<0||l<0)return!1;const f=Math.ceil(2.3*Math.sqrt(u+h)),p=f*8+(o?4:0)+(l?4:0);if(p===0)return!1;if(f===0)return e[0]=e[6]=t+o,e[1]=e[3]=s+l,e[2]=e[4]=t-o,e[5]=e[7]=s-l,!0;let g=0,y=f*4+(o?2:0)+2,_=y,v=p,S=o+u,k=l,w=t+S,P=t-S,b=s+k;if(e[g++]=w,e[g++]=b,e[--y]=b,e[--y]=P,l){const R=s-k;e[_++]=P,e[_++]=R,e[--v]=R,e[--v]=w}for(let R=1;R<f;R++){const U=Math.PI/2*(R/f),z=o+Math.cos(U)*u,B=l+Math.sin(U)*h,ne=t+z,oe=t-z,$=s+B,Y=s-B;e[g++]=ne,e[g++]=$,e[--y]=$,e[--y]=oe,e[_++]=oe,e[_++]=Y,e[--v]=Y,e[--v]=ne}S=o,k=l+h,w=t+S,P=t-S,b=s+k;const E=s-k;return e[g++]=w,e[g++]=b,e[--v]=E,e[--v]=w,o&&(e[g++]=P,e[g++]=b,e[--v]=E,e[--v]=P),!0},triangulate(i,e,t,s,o,l){if(i.length===0)return;let u=0,h=0;for(let g=0;g<i.length;g+=2)u+=i[g],h+=i[g+1];u/=i.length/2,h/=i.length/2;let f=s;e[f*t]=u,e[f*t+1]=h;const p=f++;for(let g=0;g<i.length;g+=2)e[f*t]=i[g],e[f*t+1]=i[g+1],g>0&&(o[l++]=f,o[l++]=p,o[l++]=f-1),f++;o[l++]=p+1,o[l++]=p,o[l++]=f-1}},J_={...hs,extension:{...hs.extension,name:"ellipse"}},ev={...hs,extension:{...hs.extension,name:"roundedRectangle"}},Im=1e-4,Qf=1e-4;function tv(i){const e=i.length;if(e<6)return 1;let t=0;for(let s=0,o=i[e-2],l=i[e-1];s<e;s+=2){const u=i[s],h=i[s+1];t+=(u-o)*(h+l),o=u,l=h}return t<0?-1:1}function Kf(i,e,t,s,o,l,u,h){const f=i-t*o,p=e-s*o,g=i+t*l,y=e+s*l;let _,v;u?(_=s,v=-t):(_=-s,v=t);const S=f+_,k=p+v,w=g+_,P=y+v;return h.push(S,k),h.push(w,P),2}function pr(i,e,t,s,o,l,u,h){const f=t-i,p=s-e;let g=Math.atan2(f,p),y=Math.atan2(o-i,l-e);h&&g<y?g+=Math.PI*2:!h&&g>y&&(y+=Math.PI*2);let _=g;const v=y-g,S=Math.abs(v),k=Math.sqrt(f*f+p*p),w=(15*S*Math.sqrt(k)/Math.PI>>0)+1,P=v/w;if(_+=P,h){u.push(i,e),u.push(t,s);for(let b=1,E=_;b<w;b++,E+=P)u.push(i,e),u.push(i+Math.sin(E)*k,e+Math.cos(E)*k);u.push(i,e),u.push(o,l)}else{u.push(t,s),u.push(i,e);for(let b=1,E=_;b<w;b++,E+=P)u.push(i+Math.sin(E)*k,e+Math.cos(E)*k),u.push(i,e);u.push(o,l),u.push(i,e)}return w*2}function nv(i,e,t,s,o,l){const u=Im;if(i.length===0)return;const h=e;let f=h.alignment;if(e.alignment!==.5){let W=tv(i);f=(f-.5)*W+.5}const p=new _t(i[0],i[1]),g=new _t(i[i.length-2],i[i.length-1]),y=s,_=Math.abs(p.x-g.x)<u&&Math.abs(p.y-g.y)<u;if(y){i=i.slice(),_&&(i.pop(),i.pop(),g.set(i[i.length-2],i[i.length-1]));const W=(p.x+g.x)*.5,q=(g.y+p.y)*.5;i.unshift(W,q),i.push(W,q)}const v=o,S=i.length/2;let k=i.length;const w=v.length/2,P=h.width/2,b=P*P,E=h.miterLimit*h.miterLimit;let R=i[0],U=i[1],z=i[2],B=i[3],ne=0,oe=0,$=-(U-B),Y=R-z,le=0,_e=0,we=Math.sqrt($*$+Y*Y);$/=we,Y/=we,$*=P,Y*=P;const et=f,X=(1-et)*2,Q=et*2;y||(h.cap==="round"?k+=pr(R-$*(X-Q)*.5,U-Y*(X-Q)*.5,R-$*X,U-Y*X,R+$*Q,U+Y*Q,v,!0)+2:h.cap==="square"&&(k+=Kf(R,U,$,Y,X,Q,!0,v))),v.push(R-$*X,U-Y*X),v.push(R+$*Q,U+Y*Q);for(let W=1;W<S-1;++W){R=i[(W-1)*2],U=i[(W-1)*2+1],z=i[W*2],B=i[W*2+1],ne=i[(W+1)*2],oe=i[(W+1)*2+1],$=-(U-B),Y=R-z,we=Math.sqrt($*$+Y*Y),$/=we,Y/=we,$*=P,Y*=P,le=-(B-oe),_e=z-ne,we=Math.sqrt(le*le+_e*_e),le/=we,_e/=we,le*=P,_e*=P;const q=z-R,M=U-B,N=z-ne,ge=oe-B,xe=q*N+M*ge,pe=M*N-ge*q,H=pe<0;if(Math.abs(pe)<.001*Math.abs(xe)){v.push(z-$*X,B-Y*X),v.push(z+$*Q,B+Y*Q),xe>=0&&(h.join==="round"?k+=pr(z,B,z-$*X,B-Y*X,z-le*X,B-_e*X,v,!1)+4:k+=2,v.push(z-le*Q,B-_e*Q),v.push(z+le*X,B+_e*X));continue}const re=(-$+R)*(-Y+B)-(-$+z)*(-Y+U),K=(-le+ne)*(-_e+B)-(-le+z)*(-_e+oe),J=(q*K-N*re)/pe,de=(ge*re-M*K)/pe,fe=(J-z)*(J-z)+(de-B)*(de-B),ke=z+(J-z)*X,Ae=B+(de-B)*X,Ve=z-(J-z)*Q,Ge=B-(de-B)*Q,Ze=Math.min(q*q+M*M,N*N+ge*ge),Ue=H?X:Q,ct=Ze+Ue*Ue*b;fe<=ct?h.join==="bevel"||fe/b>E?(H?(v.push(ke,Ae),v.push(z+$*Q,B+Y*Q),v.push(ke,Ae),v.push(z+le*Q,B+_e*Q)):(v.push(z-$*X,B-Y*X),v.push(Ve,Ge),v.push(z-le*X,B-_e*X),v.push(Ve,Ge)),k+=2):h.join==="round"?H?(v.push(ke,Ae),v.push(z+$*Q,B+Y*Q),k+=pr(z,B,z+$*Q,B+Y*Q,z+le*Q,B+_e*Q,v,!0)+4,v.push(ke,Ae),v.push(z+le*Q,B+_e*Q)):(v.push(z-$*X,B-Y*X),v.push(Ve,Ge),k+=pr(z,B,z-$*X,B-Y*X,z-le*X,B-_e*X,v,!1)+4,v.push(z-le*X,B-_e*X),v.push(Ve,Ge)):(v.push(ke,Ae),v.push(Ve,Ge)):(v.push(z-$*X,B-Y*X),v.push(z+$*Q,B+Y*Q),h.join==="round"?H?k+=pr(z,B,z+$*Q,B+Y*Q,z+le*Q,B+_e*Q,v,!0)+2:k+=pr(z,B,z-$*X,B-Y*X,z-le*X,B-_e*X,v,!1)+2:h.join==="miter"&&fe/b<=E&&(H?(v.push(Ve,Ge),v.push(Ve,Ge)):(v.push(ke,Ae),v.push(ke,Ae)),k+=2),v.push(z-le*X,B-_e*X),v.push(z+le*Q,B+_e*Q),k+=2)}R=i[(S-2)*2],U=i[(S-2)*2+1],z=i[(S-1)*2],B=i[(S-1)*2+1],$=-(U-B),Y=R-z,we=Math.sqrt($*$+Y*Y),$/=we,Y/=we,$*=P,Y*=P,v.push(z-$*X,B-Y*X),v.push(z+$*Q,B+Y*Q),y||(h.cap==="round"?k+=pr(z-$*(X-Q)*.5,B-Y*(X-Q)*.5,z-$*X,B-Y*X,z+$*Q,B+Y*Q,v,!1)+2:h.cap==="square"&&(k+=Kf(z,B,$,Y,X,Q,!1,v)));const V=Qf*Qf;for(let W=w;W<k+w-2;++W)R=v[W*2],U=v[W*2+1],z=v[(W+1)*2],B=v[(W+1)*2+1],ne=v[(W+2)*2],oe=v[(W+2)*2+1],!(Math.abs(R*(B-oe)+z*(oe-U)+ne*(U-B))<V)&&l.push(W,W+1,W+2)}function rv(i,e,t,s){const o=Im;if(i.length===0)return;const l=i[0],u=i[1],h=i[i.length-2],f=i[i.length-1],p=e||Math.abs(l-h)<o&&Math.abs(u-f)<o,g=t,y=i.length/2,_=g.length/2;for(let v=0;v<y;v++)g.push(i[v*2]),g.push(i[v*2+1]);for(let v=0;v<y-1;v++)s.push(_+v,_+v+1);p&&s.push(_+y-1,_)}function Fm(i,e,t,s,o,l,u){const h=Wx(i,e,2);if(!h)return;for(let p=0;p<h.length;p+=3)l[u++]=h[p]+o,l[u++]=h[p+1]+o,l[u++]=h[p+2]+o;let f=o*s;for(let p=0;p<i.length;p+=2)t[f]=i[p],t[f+1]=i[p+1],f+=s}const iv=[],sv={extension:{type:ue.ShapeBuilder,name:"polygon"},build(i,e){for(let t=0;t<i.points.length;t++)e[t]=i.points[t];return!0},triangulate(i,e,t,s,o,l){Fm(i,iv,e,t,s,o,l)}},ov={extension:{type:ue.ShapeBuilder,name:"rectangle"},build(i,e){const t=i,s=t.x,o=t.y,l=t.width,u=t.height;return l>0&&u>0?(e[0]=s,e[1]=o,e[2]=s+l,e[3]=o,e[4]=s+l,e[5]=o+u,e[6]=s,e[7]=o+u,!0):!1},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[6],e[s+u+1]=i[7],u+=t,e[s+u]=i[4],e[s+u+1]=i[5],u+=t;const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2,o[l++]=h+1,o[l++]=h+3,o[l++]=h+2}},av={extension:{type:ue.ShapeBuilder,name:"triangle"},build(i,e){return e[0]=i.x,e[1]=i.y,e[2]=i.x2,e[3]=i.y2,e[4]=i.x3,e[5]=i.y3,!0},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[4],e[s+u+1]=i[5];const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2}},lv=new Ce,uv=new Ke;function cv(i,e,t,s){const o=e.matrix?i.copyFrom(e.matrix).invert():i.identity();if(e.textureSpace==="local"){const u=t.getBounds(uv);e.width&&u.pad(e.width);const{x:h,y:f}=u,p=1/u.width,g=1/u.height,y=-h*p,_=-f*g,v=o.a,S=o.b,k=o.c,w=o.d;o.a*=p,o.b*=p,o.c*=g,o.d*=g,o.tx=y*v+_*k+o.tx,o.ty=y*S+_*w+o.ty}else o.translate(e.texture.frame.x,e.texture.frame.y),o.scale(1/e.texture.source.width,1/e.texture.source.height);const l=e.texture.source.style;return!(e.fill instanceof Mn)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(lv.copyFrom(s).invert()),o}const ta={};ft.handleByMap(ue.ShapeBuilder,ta);ft.add(ov,sv,av,hs,J_,ev);const hv=new Ke,dv=new Ce;function fv(i,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let o=0;o<i.instructions.length;o++){const l=i.instructions[o];if(l.action==="texture")pv(l.data,s,t);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,f=l.data.style,p=l.data.hole;u&&p&&Zf(p.shapePath,f,!0,s,t),p&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=p.shapePath.shapePrimitives),Zf(h,f,u,s,t)}}}function pv(i,e,t){const s=[],o=ta.rectangle,l=hv;l.x=i.dx,l.y=i.dy,l.width=i.dw,l.height=i.dh;const u=i.transform;if(!o.build(l,s))return;const{vertices:h,uvs:f,indices:p}=t,g=p.length,y=h.length/2;u&&Mm(s,u),o.triangulate(s,h,2,y,p,g);const _=i.image,v=_.uvs;f.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const S=Yt.get(Rm);S.indexOffset=g,S.indexSize=p.length-g,S.attributeOffset=y,S.attributeSize=h.length/2-y,S.baseColor=i.style,S.alpha=i.alpha,S.texture=_,S.geometryData=t,e.push(S)}function Zf(i,e,t,s,o){const{vertices:l,uvs:u,indices:h}=o;i.shapePrimitives.forEach(({shape:f,transform:p,holes:g})=>{const y=[],_=ta[f.type];if(!_.build(f,y))return;const v=h.length,S=l.length/2;let k="triangle-list";if(p&&Mm(y,p),t){const E=f.closePath??!0,R=e;R.pixelLine?(rv(y,E,l,h),k="line-list"):nv(y,R,!1,E,l,h)}else if(g){const E=[],R=y.slice();mv(g).forEach(z=>{E.push(R.length/2),R.push(...z)}),Fm(R,E,l,2,S,h,v)}else _.triangulate(y,l,2,S,h,v);const w=u.length/2,P=e.texture;if(P!==Pe.WHITE){const E=cv(dv,e,f,p);Q_(l,2,S,u,w,2,l.length/2-S,E)}else K_(u,w,2,l.length/2-S);const b=Yt.get(Rm);b.indexOffset=v,b.indexSize=h.length-v,b.attributeOffset=S,b.attributeSize=l.length/2-S,b.baseColor=e.color,b.alpha=e.alpha,b.texture=P,b.geometryData=o,b.topology=k,s.push(b)})}function mv(i){const e=[];for(let t=0;t<i.length;t++){const s=i[t].shape,o=[];ta[s.type].build(s,o)&&e.push(o)}return e}class gv{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class yv{constructor(){this.instructions=new Op}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new q_({maxTextures:t}),this.instructions.reset()}get geometry(){return Se(p0,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const nc=class Uu{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Uu.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??Uu.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),fv(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=Yt.get(yv,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[e.uid],l=o.vertices.length,u=o.indices.length;for(let g=0;g<s.length;g++)s[g].applyTransform=!1;const h=t.batcher;h.ensureAttributeBuffer(l),h.ensureIndexBuffer(u),h.begin();for(let g=0;g<s.length;g++){const y=s[g];h.add(y)}h.finish(t.instructions);const f=h.geometry;f.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),f.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const p=h.batches;for(let g=0;g<p.length;g++){const y=p[g];y.bindGroup=o_(y.textures.textures,y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new gv;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(Yt.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{Yt.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};nc.extension={type:[ue.WebGLSystem,ue.WebGPUSystem,ue.CanvasSystem],name:"graphicsContext"};nc.defaultOptions={bezierSmoothness:.5};let Lm=nc;const xv=8,Oo=11920929e-14,_v=1;function Bm(i,e,t,s,o,l,u,h,f,p){const y=Math.min(.99,Math.max(0,p??Lm.defaultOptions.bezierSmoothness));let _=(_v-y)/1;return _*=_,vv(e,t,s,o,l,u,h,f,i,_),i}function vv(i,e,t,s,o,l,u,h,f,p){ju(i,e,t,s,o,l,u,h,f,p,0),f.push(u,h)}function ju(i,e,t,s,o,l,u,h,f,p,g){if(g>xv)return;const y=(i+t)/2,_=(e+s)/2,v=(t+o)/2,S=(s+l)/2,k=(o+u)/2,w=(l+h)/2,P=(y+v)/2,b=(_+S)/2,E=(v+k)/2,R=(S+w)/2,U=(P+E)/2,z=(b+R)/2;if(g>0){let B=u-i,ne=h-e;const oe=Math.abs((t-u)*ne-(s-h)*B),$=Math.abs((o-u)*ne-(l-h)*B);if(oe>Oo&&$>Oo){if((oe+$)*(oe+$)<=p*(B*B+ne*ne)){f.push(U,z);return}}else if(oe>Oo){if(oe*oe<=p*(B*B+ne*ne)){f.push(U,z);return}}else if($>Oo){if($*$<=p*(B*B+ne*ne)){f.push(U,z);return}}else if(B=U-(i+u)/2,ne=z-(e+h)/2,B*B+ne*ne<=p){f.push(U,z);return}}ju(i,e,y,_,P,b,U,z,f,p,g+1),ju(U,z,E,R,k,w,u,h,f,p,g+1)}const wv=8,Sv=11920929e-14,Cv=1;function kv(i,e,t,s,o,l,u,h){const p=Math.min(.99,Math.max(0,h??Lm.defaultOptions.bezierSmoothness));let g=(Cv-p)/1;return g*=g,Av(e,t,s,o,l,u,i,g),i}function Av(i,e,t,s,o,l,u,h){Wu(u,i,e,t,s,o,l,h,0),u.push(o,l)}function Wu(i,e,t,s,o,l,u,h,f){if(f>wv)return;const p=(e+s)/2,g=(t+o)/2,y=(s+l)/2,_=(o+u)/2,v=(p+y)/2,S=(g+_)/2;let k=l-e,w=u-t;const P=Math.abs((s-l)*w-(o-u)*k);if(P>Sv){if(P*P<=h*(k*k+w*w)){i.push(v,S);return}}else if(k=v-(e+l)/2,w=S-(t+u)/2,k*k+w*w<=h){i.push(v,S);return}Wu(i,e,t,p,g,v,S,h,f+1),Wu(i,v,S,y,_,l,u,h,f+1)}function zm(i,e,t,s,o,l,u,h){let f=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(f=2*Math.PI-f),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(f/Math.PI)))),h=Math.max(h,3);let p=f/h,g=o;p*=u?-1:1;for(let y=0;y<h+1;y++){const _=Math.cos(g),v=Math.sin(g),S=e+_*s,k=t+v*s;i.push(S,k),g+=p}}function Pv(i,e,t,s,o,l){const u=i[i.length-2],f=i[i.length-1]-t,p=u-e,g=o-t,y=s-e,_=Math.abs(f*y-p*g);if(_<1e-8||l===0){(i[i.length-2]!==e||i[i.length-1]!==t)&&i.push(e,t);return}const v=f*f+p*p,S=g*g+y*y,k=f*g+p*y,w=l*Math.sqrt(v)/_,P=l*Math.sqrt(S)/_,b=w*k/v,E=P*k/S,R=w*y+P*p,U=w*g+P*f,z=p*(P+b),B=f*(P+b),ne=y*(w+E),oe=g*(w+E),$=Math.atan2(B-U,z-R),Y=Math.atan2(oe-U,ne-R);zm(i,R+e,U+t,l,$,Y,p*g>y*f)}const os=Math.PI*2,yu={centerX:0,centerY:0,ang1:0,ang2:0},xu=({x:i,y:e},t,s,o,l,u,h,f)=>{i*=t,e*=s;const p=o*i-l*e,g=l*i+o*e;return f.x=p+u,f.y=g+h,f};function bv(i,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,o=Math.cos(i),l=Math.sin(i),u=Math.cos(i+e),h=Math.sin(i+e);return[{x:o-l*s,y:l+o*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const Jf=(i,e,t,s)=>{const o=i*s-e*t<0?-1:1;let l=i*t+e*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},Tv=(i,e,t,s,o,l,u,h,f,p,g,y,_)=>{const v=Math.pow(o,2),S=Math.pow(l,2),k=Math.pow(g,2),w=Math.pow(y,2);let P=v*S-v*w-S*k;P<0&&(P=0),P/=v*w+S*k,P=Math.sqrt(P)*(u===h?-1:1);const b=P*o/l*y,E=P*-l/o*g,R=p*b-f*E+(i+t)/2,U=f*b+p*E+(e+s)/2,z=(g-b)/o,B=(y-E)/l,ne=(-g-b)/o,oe=(-y-E)/l,$=Jf(1,0,z,B);let Y=Jf(z,B,ne,oe);h===0&&Y>0&&(Y-=os),h===1&&Y<0&&(Y+=os),_.centerX=R,_.centerY=U,_.ang1=$,_.ang2=Y};function Ev(i,e,t,s,o,l,u,h=0,f=0,p=0){if(l===0||u===0)return;const g=Math.sin(h*os/360),y=Math.cos(h*os/360),_=y*(e-s)/2+g*(t-o)/2,v=-g*(e-s)/2+y*(t-o)/2;if(_===0&&v===0)return;l=Math.abs(l),u=Math.abs(u);const S=Math.pow(_,2)/Math.pow(l,2)+Math.pow(v,2)/Math.pow(u,2);S>1&&(l*=Math.sqrt(S),u*=Math.sqrt(S)),Tv(e,t,s,o,l,u,f,p,g,y,_,v,yu);let{ang1:k,ang2:w}=yu;const{centerX:P,centerY:b}=yu;let E=Math.abs(w)/(os/4);Math.abs(1-E)<1e-7&&(E=1);const R=Math.max(Math.ceil(E),1);w/=R;let U=i[i.length-2],z=i[i.length-1];const B={x:0,y:0};for(let ne=0;ne<R;ne++){const oe=bv(k,w),{x:$,y:Y}=xu(oe[0],l,u,y,g,P,b,B),{x:le,y:_e}=xu(oe[1],l,u,y,g,P,b,B),{x:we,y:et}=xu(oe[2],l,u,y,g,P,b,B);Bm(i,U,z,$,Y,le,_e,we,et),U=we,z=et,k+=w}}function Mv(i,e,t){const s=(u,h)=>{const f=h.x-u.x,p=h.y-u.y,g=Math.sqrt(f*f+p*p),y=f/g,_=p/g;return{len:g,nx:y,ny:_}},o=(u,h)=>{u===0?i.moveTo(h.x,h.y):i.lineTo(h.x,h.y)};let l=e[e.length-1];for(let u=0;u<e.length;u++){const h=e[u%e.length],f=h.radius??t;if(f<=0){o(u,h),l=h;continue}const p=e[(u+1)%e.length],g=s(h,l),y=s(h,p);if(g.len<1e-4||y.len<1e-4){o(u,h),l=h;continue}let _=Math.asin(g.nx*y.ny-g.ny*y.nx),v=1,S=!1;g.nx*y.nx-g.ny*-y.ny<0?_<0?_=Math.PI+_:(_=Math.PI-_,v=-1,S=!0):_>0&&(v=-1,S=!0);const k=_/2;let w,P=Math.abs(Math.cos(k)*f/Math.sin(k));P>Math.min(g.len/2,y.len/2)?(P=Math.min(g.len/2,y.len/2),w=Math.abs(P*Math.sin(k)/Math.cos(k))):w=f;const b=h.x+y.nx*P+-y.ny*w*v,E=h.y+y.ny*P+y.nx*w*v,R=Math.atan2(g.ny,g.nx)+Math.PI/2*v,U=Math.atan2(y.ny,y.nx)-Math.PI/2*v;u===0&&i.moveTo(b+Math.cos(R)*w,E+Math.sin(R)*w),i.arc(b,E,w,R,U,S),l=h}}function Rv(i,e,t,s){const o=(h,f)=>Math.sqrt((h.x-f.x)**2+(h.y-f.y)**2),l=(h,f,p)=>({x:h.x+(f.x-h.x)*p,y:h.y+(f.y-h.y)*p}),u=e.length;for(let h=0;h<u;h++){const f=e[(h+1)%u],p=f.radius??t;if(p<=0){h===0?i.moveTo(f.x,f.y):i.lineTo(f.x,f.y);continue}const g=e[h],y=e[(h+2)%u],_=o(g,f);let v;if(_<1e-4)v=f;else{const w=Math.min(_/2,p);v=l(f,g,w/_)}const S=o(y,f);let k;if(S<1e-4)k=f;else{const w=Math.min(S/2,p);k=l(f,y,w/S)}h===0?i.moveTo(v.x,v.y):i.lineTo(v.x,v.y),i.quadraticCurveTo(f.x,f.y,k.x,k.y,s)}}const Iv=new Ke;class Fv{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new on,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==e||l!==t)&&s.push(e,t),this}arc(e,t,s,o,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return zm(h,e,t,s,o,l,u),this}arcTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return Pv(u,e,t,s,o,l),this}arcToSvg(e,t,s,o,l,u,h){const f=this._currentPoly.points;return Ev(f,this._currentPoly.lastX,this._currentPoly.lastY,u,h,e,t,s,o,l),this}bezierCurveTo(e,t,s,o,l,u,h){this._ensurePoly();const f=this._currentPoly;return Bm(this._currentPoly.points,f.lastX,f.lastY,e,t,s,o,l,u,h),this}quadraticCurveTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly;return kv(this._currentPoly.points,u.lastX,u.lastY,e,t,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,o=s.length;for(let l=0;l<e.instructions.length;l++){const u=e.instructions[l];this[u.action](...u.data)}if(e.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const f=h.shape,p=l==null?void 0:l.shape;p&&p.containsPolygon(f)?(l.holes||(l.holes=[]),l.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):l=h}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,o,l){return this.drawShape(new Ke(e,t,s,o),l),this}circle(e,t,s,o){return this.drawShape(new Ju(e,t,s),o),this}poly(e,t,s){const o=new is(e);return o.closePath=t,this.drawShape(o,s),this}regularPoly(e,t,s,o,l=0,u){o=Math.max(o|0,3);const h=-1*Math.PI/2+l,f=Math.PI*2/o,p=[];for(let g=0;g<o;g++){const y=h-g*f;p.push(e+s*Math.cos(y),t+s*Math.sin(y))}return this.poly(p,!0,u),this}roundPoly(e,t,s,o,l,u=0,h){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(e,t,s,o,u);const f=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,f);const p=-1*Math.PI/2+u,g=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let _=0;_<o;_++){const v=_*g+p,S=e+s*Math.cos(v),k=t+s*Math.sin(v),w=v+Math.PI+y,P=v-Math.PI-y,b=S+l*Math.cos(w),E=k+l*Math.sin(w),R=S+l*Math.cos(P),U=k+l*Math.sin(P);_===0?this.moveTo(b,E):this.lineTo(b,E),this.quadraticCurveTo(S,k,R,U,h)}return this.closePath()}roundShape(e,t,s=!1,o){return e.length<3?this:(s?Rv(this,e,t,o):Mv(this,e,t),this.closePath())}filletRect(e,t,s,o,l){if(l===0)return this.rect(e,t,s,o);const u=Math.min(s,o)/2,h=Math.min(u,Math.max(-u,l)),f=e+s,p=t+o,g=h<0?-h:0,y=Math.abs(h);return this.moveTo(e,t+y).arcTo(e+g,t+g,e+y,t,y).lineTo(f-y,t).arcTo(f-g,t+g,f,t+y,y).lineTo(f,p-y).arcTo(f-g,p-g,e+s-y,p,y).lineTo(e+y,p).arcTo(e+g,p-g,e,p-y,y).closePath()}chamferRect(e,t,s,o,l,u){if(l<=0)return this.rect(e,t,s,o);const h=Math.min(l,Math.min(s,o)/2),f=e+s,p=t+o,g=[e+h,t,f-h,t,f,t+h,f,p-h,f-h,p,e+h,p,e,p-h,e,t+h];for(let y=g.length-1;y>=2;y-=2)g[y]===g[y-2]&&g[y-1]===g[y-3]&&g.splice(y-1,2);return this.poly(g,!0,u)}ellipse(e,t,s,o,l){return this.drawShape(new ec(e,t,s,o),l),this}roundRect(e,t,s,o,l,u){return this.drawShape(new tc(e,t,s,o,l),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new is,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new is,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,o=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const l=t.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const o=t[s],l=o.shape.getBounds(Iv);o.transform?e.addRect(l,o.transform):e.addRect(l)}return e}}class En{constructor(e,t=!1){this.instructions=[],this.uid=Xe("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?n_(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new Fv(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,o,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(_t.shared);let f=0,p=0;if(!u||u.action!=="bezierCurveTo")f=h.x,p=h.y;else{f=u.data[2],p=u.data[3];const g=h.x,y=h.y;f=g+(g-f),p=y+(y-p)}return this.instructions.push({action:"bezierCurveTo",data:[f,p,e,t,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(_t.shared);let u=0,h=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=o.data[0],h=o.data[1];const f=l.x,p=l.y;u=f+(f-u),h=p+(p-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,e,t,s]}),this._dirty=!0,this}rect(e,t,s,o,l){return this.instructions.push({action:"rect",data:[e,t,s,o,l]}),this._dirty=!0,this}circle(e,t,s,o){return this.instructions.push({action:"circle",data:[e,t,s,o]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,o,l,u,h){l||(l=o/2);const f=-1*Math.PI/2+u,p=s*2,g=Math.PI*2/p,y=[];for(let _=0;_<p;_++){const v=_%2?l:o,S=_*g+f;y.push(e+v*Math.cos(S),t+v*Math.sin(S))}return this.poly(y,!0,h),this}clone(e=!1){const t=new En;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];t.instructions.push({action:o.action,data:o.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,o=e.c,l=e.d,u=e.tx,h=e.ty;let f=0,p=0,g=0,y=0,_=0,v=0,S=0,k=0;for(let w=0;w<this.instructions.length;w++){const P=this.instructions[w],b=P.data;switch(P.action){case"moveTo":case"lineTo":f=b[0],p=b[1],b[0]=t*f+o*p+u,b[1]=s*f+l*p+h;break;case"bezierCurveTo":g=b[0],y=b[1],_=b[2],v=b[3],f=b[4],p=b[5],b[0]=t*g+o*y+u,b[1]=s*g+l*y+h,b[2]=t*_+o*v+u,b[3]=s*_+l*v+h,b[4]=t*f+o*p+u,b[5]=s*f+l*p+h;break;case"quadraticCurveTo":g=b[0],y=b[1],f=b[2],p=b[3],b[0]=t*g+o*y+u,b[1]=s*g+l*y+h,b[2]=t*f+o*p+u,b[3]=s*f+l*p+h;break;case"arcToSvg":f=b[5],p=b[6],S=b[0],k=b[1],b[0]=t*S+o*k,b[1]=s*S+l*k,b[5]=t*f+o*p+u,b[6]=s*f+l*p+h;break;case"circle":b[4]=Qi(b[3],e);break;case"rect":b[4]=Qi(b[4],e);break;case"ellipse":b[8]=Qi(b[8],e);break;case"roundRect":b[5]=Qi(b[5],e);break;case"addPath":b[0].transform(e);break;case"poly":b[2]=Qi(b[2],e);break;default:Ne("unknown transform action",P.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function Qi(i,e){return i?i.prepend(e):e.clone()}function Ye(i,e,t){const s=i.getAttribute(e);return s?Number(s):t}function Lv(i,e){const t=i.querySelectorAll("defs");for(let s=0;s<t.length;s++){const o=t[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=Bv(u);break;case"radialgradient":e.defs[u.id]=zv();break}}}}function Bv(i){const e=Ye(i,"x1",0),t=Ye(i,"y1",0),s=Ye(i,"x2",1),o=Ye(i,"y2",0),l=i.getAttribute("gradientUnits")||"objectBoundingBox",u=new Mn(e,t,s,o,l==="objectBoundingBox"?"local":"global");for(let h=0;h<i.children.length;h++){const f=i.children[h],p=Ye(f,"offset",0),g=it.shared.setValue(f.getAttribute("stop-color")).toNumber();u.addColorStop(p,g)}return u}function zv(i){return Ne("[SVG Parser] Radial gradients are not yet supported"),new Mn(0,0,1,0)}function ep(i){const e=i.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const tp={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Nm(i,e){const t=i.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in tp){const h=i.getAttribute(u);h&&np(e,l,u,h.trim())}if(t){const u=t.split(";");for(let h=0;h<u.length;h++){const f=u[h].trim(),[p,g]=f.split(":");tp[p]&&np(e,l,p,g.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function np(i,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=ep(s);e.strokeStyle.fill=i.defs[o]}else e.strokeStyle.color=it.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=ep(s);e.fillStyle.fill=i.defs[o]}else e.fillStyle.color=it.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function Nv(i){if(i.length<=2)return!0;const e=i.map(h=>h.area).sort((h,f)=>f-h),[t,s]=e,o=e[e.length-1],l=t/s,u=s/o;return!(l>3&&u<2)}function Ov(i){return i.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function Dv(i){const e=i.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],o=[];for(let g=0;g<t.length;g+=2)g+1<t.length&&(s.push(t[g]),o.push(t[g+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),h=Math.min(...o),f=Math.max(...o);return(u-l)*(f-h)}function rp(i,e){const t=new En(i,!1);for(const s of t.instructions)e.instructions.push(s)}function Gv(i,e){if(typeof i=="string"){const u=document.createElement("div");u.innerHTML=i.trim(),i=u.querySelector("svg")}const t={context:e,defs:{},path:new En};Lv(i,t);const s=i.children,{fillStyle:o,strokeStyle:l}=Nm(i,t);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&Om(h,t,o,l)}return e}function Om(i,e,t,s){const o=i.children,{fillStyle:l,strokeStyle:u}=Nm(i,e);l&&t?t={...t,...l}:l&&(t=l),u&&s?s={...s,...u}:u&&(s=u);const h=!t&&!s;h&&(t={color:0});let f,p,g,y,_,v,S,k,w,P,b,E,R,U,z,B,ne;switch(i.nodeName.toLowerCase()){case"path":{U=i.getAttribute("d");const oe=i.getAttribute("fill-rule"),$=Ov(U),Y=oe==="evenodd",le=$.length>1;if(Y&&le){const we=$.map(X=>({path:X,area:Dv(X)}));if(we.sort((X,Q)=>Q.area-X.area),$.length>3||!Nv(we))for(let X=0;X<we.length;X++){const Q=we[X],V=X===0;e.context.beginPath();const W=new En(void 0,!0);rp(Q.path,W),e.context.path(W),V?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let X=0;X<we.length;X++){const Q=we[X],V=X%2===1;e.context.beginPath();const W=new En(void 0,!0);rp(Q.path,W),e.context.path(W),V?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const we=oe?oe==="evenodd":!0;z=new En(U,we),e.context.path(z),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":S=Ye(i,"cx",0),k=Ye(i,"cy",0),w=Ye(i,"r",0),e.context.ellipse(S,k,w,w),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":f=Ye(i,"x",0),p=Ye(i,"y",0),B=Ye(i,"width",0),ne=Ye(i,"height",0),P=Ye(i,"rx",0),b=Ye(i,"ry",0),P||b?e.context.roundRect(f,p,B,ne,P||b):e.context.rect(f,p,B,ne),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":S=Ye(i,"cx",0),k=Ye(i,"cy",0),P=Ye(i,"rx",0),b=Ye(i,"ry",0),e.context.beginPath(),e.context.ellipse(S,k,P,b),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":g=Ye(i,"x1",0),y=Ye(i,"y1",0),_=Ye(i,"x2",0),v=Ye(i,"y2",0),e.context.beginPath(),e.context.moveTo(g,y),e.context.lineTo(_,v),s&&e.context.stroke(s);break;case"polygon":R=i.getAttribute("points"),E=R.match(/\d+/g).map(oe=>parseInt(oe,10)),e.context.poly(E,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":R=i.getAttribute("points"),E=R.match(/\d+/g).map(oe=>parseInt(oe,10)),e.context.poly(E,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{Ne(`[SVG parser] <${i.nodeName}> elements unsupported`);break}}h&&(t=null);for(let oe=0;oe<o.length;oe++)Om(o[oe],e,t,s)}function Uv(i){return it.isColorLike(i)}function ip(i){return i instanceof ea}function sp(i){return i instanceof Mn}function jv(i){return i instanceof Pe}function Wv(i,e,t){const s=it.shared.setValue(e??0);return i.color=s.toNumber(),i.alpha=s.alpha===1?t.alpha:s.alpha,i.texture=Pe.WHITE,{...t,...i}}function Hv(i,e,t){return i.texture=e,{...t,...i}}function op(i,e,t){return i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,{...t,...i}}function ap(i,e,t){return e.buildGradient(),i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,i.textureSpace=e.textureSpace,{...t,...i}}function Vv(i,e){const t={...e,...i},s=it.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function _r(i,e){if(i==null)return null;const t={},s=i;return Uv(i)?Wv(t,i,e):jv(i)?Hv(t,i,e):ip(i)?op(t,i,e):sp(i)?ap(t,i,e):s.fill&&ip(s.fill)?op(s,s.fill,e):s.fill&&sp(s.fill)?ap(s,s.fill,e):Vv(s,e)}function Qo(i,e){const{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...f}=e,p=_r(i,f);return p?{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...p}:null}const $v=new _t,lp=new Ce,rc=class yn extends an{constructor(){super(...arguments),this.uid=Xe("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new En,this._transform=new Ce,this._fillStyle={...yn.defaultFillStyle},this._strokeStyle={...yn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new on,this._boundsDirty=!0}clone(){const e=new yn;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=_r(e,yn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Qo(e,yn.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=_r(e,yn.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=_r(e,yn.defaultStrokeStyle),this}texture(e,t,s,o,l,u){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:o||0,dw:l||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?it.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new En,this}fill(e,t){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&(o==null?void 0:o.action)==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(Se(Ie,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=_r(e,yn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(_t.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&(s==null?void 0:s.action)==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=Qo(e,yn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,o,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,s,o,l,u),this}arcTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(e,t,s,o,l,u,h){this._tick++;const f=this._transform;return this._activePath.arcToSvg(e,t,s,o,l,f.a*u+f.c*h+f.tx,f.b*u+f.d*h+f.ty),this}bezierCurveTo(e,t,s,o,l,u,h){this._tick++;const f=this._transform;return this._activePath.bezierCurveTo(f.a*e+f.c*t+f.tx,f.b*e+f.d*t+f.ty,f.a*s+f.c*o+f.tx,f.b*s+f.d*o+f.ty,f.a*l+f.c*u+f.tx,f.b*l+f.d*u+f.ty,h),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,s,o){return this._tick++,this._activePath.ellipse(e,t,s,o,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*e+s.c*t+s.tx,u=s.b*e+s.d*t+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(e,t,s,o){return this._tick++,this._activePath.rect(e,t,s,o,this._transform.clone()),this}roundRect(e,t,s,o,l){return this._tick++,this._activePath.roundRect(e,t,s,o,l,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(e,t,s,o,l,u),this}roundPoly(e,t,s,o,l,u){return this._tick++,this._activePath.roundPoly(e,t,s,o,l,u),this}roundShape(e,t,s,o){return this._tick++,this._activePath.roundShape(e,t,s,o),this}filletRect(e,t,s,o,l){return this._tick++,this._activePath.filletRect(e,t,s,o,l),this}chamferRect(e,t,s,o,l,u){return this._tick++,this._activePath.chamferRect(e,t,s,o,l,u),this}star(e,t,s,o,l=0,u=0){return this._tick++,this._activePath.star(e,t,s,o,l,u,this._transform.clone()),this}svg(e){return this._tick++,Gv(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,o,l,u){return e instanceof Ce?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,o,l,u),this)}transform(e,t,s,o,l,u){return e instanceof Ce?(this._transform.append(e),this):(lp.set(e,t,s,o,l,u),this._transform.append(lp),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],o=s.action;if(o==="fill"){const l=s.data;e.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;e.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,h=l.style.width*(1-u),f=l.path.bounds;e.addFrame(f.minX-h,f.minY-h,f.maxX+h,f.maxY+h)}}return e}containsPoint(e){var o;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let l=0;l<t.length;l++){const u=t[l],h=u.data,f=h.path;if(!u.action||!f)continue;const p=h.style,g=f.shapePath.shapePrimitives;for(let y=0;y<g.length;y++){const _=g[y].shape;if(!p||!_)continue;const v=g[y].transform,S=v?v.applyInverse(e,$v):e;if(u.action==="fill")s=_.contains(S.x,S.y);else{const w=p;s=_.strokeContains(S.x,S.y,w.width,w.alignment)}const k=h.hole;if(k){const w=(o=k.shapePath)==null?void 0:o.shapePrimitives;if(w)for(let P=0;P<w.length;P++)w[P].shape.contains(S.x,S.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};rc.defaultFillStyle={color:16777215,alpha:1,texture:Pe.WHITE,matrix:null,fill:null,textureSpace:"local"};rc.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Pe.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Vt=rc;const ic=class qr extends an{constructor(e={}){super(),this.uid=Xe("textStyle"),this._tick=0,Yv(e);const t={...qr.defaultTextStyle,...e};for(const s in t){const o=s;this[o]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...qr.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...qr.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Vt.defaultFillStyle,...e},()=>{this._fill=_r({...this._originalFill},Vt.defaultFillStyle)})),this._fill=_r(e===0?"black":e,Vt.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Vt.defaultStrokeStyle,...e},()=>{this._stroke=Qo({...this._originalStroke},Vt.defaultStrokeStyle)})),this._stroke=Qo(e,Vt.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=qr.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new qr({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){var s,o,l,u;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const h=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(h),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(h),(l=this._stroke)!=null&&l.texture&&this._stroke.texture.destroy(h),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(h)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,o,l)=>(s[o]===l||(s[o]=l,t==null||t(o,l),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(it.isColorLike(e)||e instanceof Mn||e instanceof ea)}};ic.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};ic.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ko=ic;function Yv(i){const e=i;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=Ko.defaultDropShadow;i.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Se(Ie,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(it.isColorLike(t))s.color=t;else if(t instanceof Mn||t instanceof ea)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");i.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Se(Ie,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Ne("The number of fill colors must match the number of fill gradient stops.");const t=new Mn({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),o=e.fill.map(l=>it.shared.setValue(l).toNumber());s.forEach((l,u)=>{t.addColorStop(l,o[u])}),i.fill={fill:t}}}class Xv{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=Oe.get().createCanvas();s.width=e,s.height=t;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=$o(e),t=$o(t);const o=(e<<17)+(t<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(e,t)),l}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:o}=t,l=(s<<17)+(o<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,o),this._canvasPool[l].push(e)}clear(){this._canvasPool={}}}const Hu=new Xv;ps.register(Hu);const up=1e5;function cp(i,e,t,s=0){if(i.texture===Pe.WHITE&&!i.fill)return it.shared.setValue(i.color).setAlpha(i.alpha??1).toHexa();if(i.fill){if(i.fill instanceof ea){const o=i.fill,l=e.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(Ce.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(i.fill instanceof Mn){const o=i.fill,l=o.type==="linear",u=o.textureSpace==="local";let h=1,f=1;u&&t&&(h=t.width+s,f=t.height+s);let p,g=!1;if(l){const{start:y,end:_}=o;p=e.createLinearGradient(y.x*h,y.y*f,_.x*h,_.y*f),g=Math.abs(_.x-y.x)<Math.abs((_.y-y.y)*.1)}else{const{center:y,innerRadius:_,outerCenter:v,outerRadius:S}=o;p=e.createRadialGradient(y.x*h,y.y*f,_*h,v.x*h,v.y*f,S*h)}if(g&&u&&t){const y=t.lineHeight/f;for(let _=0;_<t.lines.length;_++){const v=(_*t.lineHeight+s/2)/f;o.colorStops.forEach(S=>{const k=v+S.offset*y;p.addColorStop(Math.floor(k*up)/up,it.shared.setValue(S.color).toHex())})}}else o.colorStops.forEach(y=>{p.addColorStop(y.offset,it.shared.setValue(y.color).toHex())});return p}}else{const o=e.createPattern(i.texture.source.resource,"repeat"),l=i.matrix.copyTo(Ce.shared);return l.scale(i.texture.frame.width,i.texture.frame.height),o.setTransform(l),o}return Ne("FillStyle not recognised",i),"red"}const Dm=class Gm extends vm{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...Gm.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Pe.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=Du(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof Yo?t.textureStyle:new Yo(t.textureStyle)),this.fontMetrics=jo.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){var w,P;const t=jo.graphemeSegmenter(e).filter(b=>!this._currentChars.includes(b)).filter((b,E,R)=>R.indexOf(b)===E);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const h=this._style;let f=this._currentX,p=this._currentY,g=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,_=this._padding*y;let v=!1;const S=o.width/this.resolution,k=o.height/this.resolution;for(let b=0;b<t.length;b++){const E=t[b],R=jo.measureText(E,h,o,!1);R.lineHeight=R.height;const U=R.width*y,z=Math.ceil((h.fontStyle==="italic"?2:1)*U),B=R.height*y,ne=z+_*2,oe=B+_*2;if(v=!1,E!==`
`&&E!=="\r"&&E!=="	"&&E!==" "&&(v=!0,g=Math.ceil(Math.max(oe,g))),f+ne>S&&(p+=g,g=oe,f=0,p+g>k)){u.update();const Y=this._nextPage();o=Y.canvasAndContext.canvas,l=Y.canvasAndContext.context,u=Y.texture.source,f=0,p=0,g=0}const $=U/y-(((w=h.dropShadow)==null?void 0:w.distance)??0)-(((P=h._stroke)==null?void 0:P.width)??0);if(this.chars[E]={id:E.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:$,kerning:{}},v){this._drawGlyph(l,R,f+_,p+_,y,h);const Y=u.width*y,le=u.height*y,_e=new Ke(f/Y*u.width,p/le*u.height,ne/Y*u.width,oe/le*u.height);this.chars[E].texture=new Pe({source:u,frame:_e}),f+=Math.ceil(ne)}}u.update(),this._currentX=f,this._currentY=p,this._currentMaxCharHeight=g,this._skipKerning&&this._applyKerning(t,l)}get pageTextures(){return Se(Ie,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let o=0;o<e.length;o++){const l=e[o];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let f=s[l];f||(f=s[l]=t.measureText(l).width);let p=s[h];p||(p=s[h]=t.measureText(h).width);let g=t.measureText(l+h).width,y=g-(f+p);y&&(this.chars[l].kerning[h]=y),g=t.measureText(l+h).width,y=g-(f+p),y&&(this.chars[h].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=Hu.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Pe({source:new vr({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:t,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=Du(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const o=t._stroke,l=(o==null?void 0:o.width)??0;if(o&&(e.lineWidth=l,e.lineJoin=o.join,e.miterLimit=o.miterLimit,e.strokeStyle=cp(o,e)),t._fill&&(e.fillStyle=cp(t._fill,e)),t.dropShadow){const u=t.dropShadow,h=it.shared.setValue(u.color).toArray(),f=u.blur*s,p=u.distance*s;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,e.shadowBlur=f,e.shadowOffsetX=Math.cos(u.angle)*p,e.shadowOffsetY=Math.sin(u.angle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,o,l,u){const h=t.text,f=t.fontProperties,p=u._stroke,g=((p==null?void 0:p.width)??0)*l,y=s+g/2,_=o-g/2,v=f.descent*l,S=t.lineHeight*l;let k=!1;u.stroke&&g&&(k=!0,e.strokeText(h,y,_+S-v));const{shadowBlur:w,shadowOffsetX:P,shadowOffsetY:b}=e;u._fill&&(k&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(h,y,_+S-v)),k&&(e.shadowBlur=w,e.shadowOffsetX=P,e.shadowOffsetY=b)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];Hu.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};Dm.defaultOptions={textureSize:512,style:new Ko,mipmap:!0};let hp=Dm;function qv(i,e,t,s){const o={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=t.baseLineOffset;let l=o.lines[0],u=null,h=!0;const f={width:0,start:0,index:0,positions:[],chars:[]},p=t.baseMeasurementFontSize/e.fontSize,g=e.letterSpacing*p,y=e.wordWrapWidth*p,_=e.lineHeight?e.lineHeight*p:t.lineHeight,v=e.wordWrap&&e.breakWords,S=P=>{const b=l.width;for(let E=0;E<f.index;E++){const R=P.positions[E];l.chars.push(P.chars[E]),l.charPositions.push(R+b)}l.width+=P.width,h=!1,f.width=0,f.index=0,f.chars.length=0},k=()=>{let P=l.chars.length-1;if(s){let b=l.chars[P];for(;b===" ";)l.width-=t.chars[b].xAdvance,b=l.chars[--P]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,o.lines.push(l),o.height+=_},w=P=>P-g>y;for(let P=0;P<i.length+1;P++){let b;const E=P===i.length;E||(b=i[P]);const R=t.chars[b]||t.chars[" "];if(/(?:\s)/.test(b)||b==="\r"||b===`
`||E){if(!h&&e.wordWrap&&w(l.width+f.width)?(k(),S(f),E||l.charPositions.push(0)):(f.start=l.width,S(f),E||l.charPositions.push(0)),b==="\r"||b===`
`)k();else if(!E){const ne=R.xAdvance+(R.kerning[u]||0)+g;l.width+=ne,l.spaceWidth=ne,l.spacesIndex.push(l.charPositions.length),l.chars.push(b)}}else{const B=R.kerning[u]||0,ne=R.xAdvance+B+g;v&&w(l.width+f.width+ne)&&(S(f),k()),f.positions[f.index++]=f.width+B,f.chars.push(b),f.width+=ne}u=b}return k(),e.align==="center"?Qv(o):e.align==="right"?Kv(o):e.align==="justify"&&Zv(o),o}function Qv(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width/2-t.width/2;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function Kv(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width-t.width;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function Zv(i){const e=i.width;for(let t=0;t<i.lines.length;t++){const s=i.lines[t];let o=0,l=s.spacesIndex[o++],u=0;const h=s.spacesIndex.length,p=(e-s.width)/h;for(let g=0;g<s.charPositions.length;g++)g===l&&(l=s.spacesIndex[o++],u+=p),s.charPositions[g]+=u}}function Jv(i){if(i==="")return[];typeof i=="string"&&(i=[i]);const e=[];for(let t=0,s=i.length;t<s;t++){const o=i[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let h=l,f=u;h<=f;h++)e.push(String.fromCharCode(h))}else e.push(...Array.from(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let Do=0;class e1{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=wm(1e3)}getFont(e,t){var u;let s=`${t.fontFamily}-bitmap`,o=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,o=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,o=!1),!ze.has(s)){const h=Object.create(t);h.lineHeight=0;const f=new hp({style:h,overrideFill:o,overrideSize:!0,...this.defaultOptions});Do++,Do>50&&Ne("BitmapText",`You have dynamically created ${Do} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),f.once("destroy",()=>{Do--,ze.remove(s)}),ze.set(s,f)}const l=ze.get(s);return(u=l.ensureCharacters)==null||u.call(l,e),l}getLayout(e,t,s=!0){const o=this.getFont(e,t),l=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=jo.graphemeSegmenter(e),h=qv(u,t,o,s);return this.measureCache.set(l,h),h}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){var p,g,y,_;let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:(p=e[2])==null?void 0:p.chars,resolution:(g=e[2])==null?void 0:g.resolution,padding:(y=e[2])==null?void 0:y.padding,skipKerning:(_=e[2])==null?void 0:_.skipKerning},Se(Ie,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t==null?void 0:t.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const o=t.style,l=o instanceof Ko?o:new Ko(o),u=t.dynamicFill??this._canUseTintForStyle(l),h=new hp({style:l,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),f=Jv(t.chars);return h.ensureCharacters(f.join("")),ze.set(`${s}-bitmap`,h),h.once("destroy",()=>ze.remove(`${s}-bitmap`)),h}uninstall(e){const t=`${e}-bitmap`,s=ze.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const dp=new e1;class Um extends vm{constructor(e,t){super();const{textures:s,data:o}=e;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:h,source:f,rotate:p}=s[u.page],g=Re.transformRectCoords(u,h,p,new Ke),y=new Pe({frame:g,orig:new Ke(0,0,u.width,u.height),source:f,rotate:p});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){dp.install(e)}static uninstall(e){dp.uninstall(e)}}const _u={test(i){return typeof i=="string"&&i.startsWith("info face=")},parse(i){const e=i.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in e){const _=e[y].match(/^[a-z]+/gm)[0],v=e[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),S={};for(const k in v){const w=v[k].split("="),P=w[0],b=w[1].replace(/"/gm,""),E=parseFloat(b),R=isNaN(E)?b:E;S[P]=R}t[_].push(S)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=t.info,[l]=t.common,[u]=t.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const h=t.page;for(let y=0;y<h.length;y++)s.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const f={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const p=t.char;for(let y=0;y<p.length;y++){const _=p[y],v=parseInt(_.id,10);let S=_.letter??_.char??String.fromCharCode(v);S==="space"&&(S=" "),f[v]=S,s.chars[S]={id:v,page:parseInt(_.page,10)||0,x:parseInt(_.x,10),y:parseInt(_.y,10),width:parseInt(_.width,10),height:parseInt(_.height,10),xOffset:parseInt(_.xoffset,10),yOffset:parseInt(_.yoffset,10),xAdvance:parseInt(_.xadvance,10),kerning:{}}}const g=t.kerning||[];for(let y=0;y<g.length;y++){const _=parseInt(g[y].first,10),v=parseInt(g[y].second,10),S=parseInt(g[y].amount,10);s.chars[f[v]].kerning[f[_]]=S}return s}},fp={test(i){const e=i;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(i){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=i.getElementsByTagName("info")[0],s=i.getElementsByTagName("common")[0],o=i.getElementsByTagName("distanceField")[0];o&&(e.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=i.getElementsByTagName("page"),u=i.getElementsByTagName("char"),h=i.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let p=0;p<l.length;p++)e.pages.push({id:parseInt(l[p].getAttribute("id"),10)||0,file:l[p].getAttribute("file")});const f={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let p=0;p<u.length;p++){const g=u[p],y=parseInt(g.getAttribute("id"),10);let _=g.getAttribute("letter")??g.getAttribute("char")??String.fromCharCode(y);_==="space"&&(_=" "),f[y]=_,e.chars[_]={id:y,page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xOffset:parseInt(g.getAttribute("xoffset"),10),yOffset:parseInt(g.getAttribute("yoffset"),10),xAdvance:parseInt(g.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<h.length;p++){const g=parseInt(h[p].getAttribute("first"),10),y=parseInt(h[p].getAttribute("second"),10),_=parseInt(h[p].getAttribute("amount"),10);e.chars[f[y]].kerning[f[g]]=_}return e}},pp={test(i){return typeof i=="string"&&i.match(/<font(\s|>)/)?fp.test(Oe.get().parseXML(i)):!1},parse(i){return fp.parse(Oe.get().parseXML(i))}},t1=[".xml",".fnt"],n1={extension:{type:ue.CacheParser,name:"cacheBitmapFont"},test:i=>i instanceof Um,getCacheableAssets(i,e){const t={};return i.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},r1={extension:{type:ue.LoadParser,priority:er.Normal},name:"loadBitmapFont",id:"bitmap-font",test(i){return t1.includes(Ot.extname(i).toLowerCase())},async testParse(i){return _u.test(i)||pp.test(i)},async parse(i,e,t){const s=_u.test(i)?_u.parse(i):pp.parse(i),{src:o}=e,{pages:l}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const _=l[y].file;let v=Ot.join(Ot.dirname(o),_);v=Iu(v,o),u.push({src:v,data:h})}const f=await t.load(u),p=u.map(y=>f[y.src]);return new Um({data:s,textures:p},o)},async load(i,e){return await(await Oe.get().fetch(i)).text()},async unload(i,e,t){await Promise.all(i.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),i.destroy()}};class i1{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const s1={extension:{type:ue.CacheParser,name:"cacheTextureArray"},test:i=>Array.isArray(i)&&i.every(e=>e instanceof Pe),getCacheableAssets:(i,e)=>{const t={};return i.forEach(s=>{e.forEach((o,l)=>{t[s+(l===0?"":l+1)]=o})}),t}};async function jm(i){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(i)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const o1={extension:{type:ue.DetectionParser,priority:1},test:async()=>jm("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(e=>e!=="avif")},mp=["png","jpg","jpeg"],a1={extension:{type:ue.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...mp],remove:async i=>i.filter(e=>!mp.includes(e))},l1="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function na(i){return l1?!1:document.createElement("video").canPlayType(i)!==""}const u1={extension:{type:ue.DetectionParser,priority:0},test:async()=>na("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(e=>e!=="mp4"&&e!=="m4v")},c1={extension:{type:ue.DetectionParser,priority:0},test:async()=>na("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(e=>e!=="ogv")},h1={extension:{type:ue.DetectionParser,priority:0},test:async()=>na("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(e=>e!=="webm")},d1={extension:{type:ue.DetectionParser,priority:0},test:async()=>jm("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(e=>e!=="webp")},Wm=class Wo{constructor(){this.loadOptions={...Wo.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{var u,h;let o=null,l=null;if((t.parser||t.loadParser)&&(l=this._parserHash[t.parser||t.loadParser],t.loadParser&&Ne(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),l||Ne(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!l){for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];if(p.load&&((u=p.test)!=null&&u.call(p,e,t,this))){l=p;break}}if(!l)return Ne(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(e,t,this),s.parser=l;for(let f=0;f<this.parsers.length;f++){const p=this.parsers[f];p.parse&&p.parse&&await((h=p.testParse)==null?void 0:h.call(p,o,t,this))&&(o=await p.parse(o,t,this)||o,s.parser=p)}return o})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...Wo.defaultOptions,...this.loadOptions,onProgress:t}:{...Wo.defaultOptions,...this.loadOptions,...t||{}},{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:f}=s;let p=0;const g={},y=Xo(e),_=rn(e,k=>({alias:[k],src:k,data:{}})),v=_.reduce((k,w)=>k+(w.progressSize||1),0),S=_.map(async k=>{const w=Ot.toAbsolute(k.src);g[k.src]||(await this._loadAssetWithRetry(w,k,{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:f},g),p+=k.progressSize||1,o&&o(p/v))});return await Promise.all(S),y?g[_[0].src]:g}async unload(e){const s=rn(e,o=>({alias:[o],src:o})).map(async o=>{var h,f;const l=Ot.toAbsolute(o.src),u=this.promiseCache[l];if(u){const p=await u.promise;delete this.promiseCache[l],await((f=(h=u.parser)==null?void 0:h.unload)==null?void 0:f.call(h,p,o,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?Ne("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&Ne(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,o){let l=0;const{onError:u,strategy:h,retryCount:f,retryDelay:p}=s,g=y=>new Promise(_=>setTimeout(_,y));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),o[t.src]=await this.promiseCache[e].promise;return}catch(y){delete this.promiseCache[e],delete o[t.src],l++;const _=h!=="retry"||l>f;if(h==="retry"&&!_){u&&u(y,t),await g(p);continue}if(h==="skip"){u&&u(y,t);return}throw u&&u(y,t),new Error(`[Loader.load] Failed to load ${e}.
${y}`)}}};Wm.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let f1=Wm;function ri(i,e){if(Array.isArray(e)){for(const t of e)if(i.startsWith(`data:${t}`))return!0;return!1}return i.startsWith(`data:${e}`)}function ii(i,e){const t=i.split("?")[0],s=Ot.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const p1=".json",m1="application/json",g1={extension:{type:ue.LoadParser,priority:er.Low},name:"loadJson",id:"json",test(i){return ri(i,m1)||ii(i,p1)},async load(i){return await(await Oe.get().fetch(i)).json()}},y1=".txt",x1="text/plain",_1={name:"loadTxt",id:"text",extension:{type:ue.LoadParser,priority:er.Low,name:"loadTxt"},test(i){return ri(i,x1)||ii(i,y1)},async load(i){return await(await Oe.get().fetch(i)).text()}},v1=["normal","bold","100","200","300","400","500","600","700","800","900"],w1=[".ttf",".otf",".woff",".woff2"],S1=["font/ttf","font/otf","font/woff","font/woff2"],C1=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function k1(i){const e=Ot.extname(i),o=Ot.basename(i,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let l=o.length>0;for(const h of o)if(!h.match(C1)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const A1=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function P1(i){return A1.test(i)?i:encodeURI(i)}const b1={extension:{type:ue.LoadParser,priority:er.Low},name:"loadWebFont",id:"web-font",test(i){return ri(i,S1)||ii(i,w1)},async load(i,e){var s,o,l;const t=Oe.get().getFontFaceSet();if(t){const u=[],h=((s=e.data)==null?void 0:s.family)??k1(i),f=((l=(o=e.data)==null?void 0:o.weights)==null?void 0:l.filter(g=>v1.includes(g)))??["normal"],p=e.data??{};for(let g=0;g<f.length;g++){const y=f[g],_=new FontFace(h,`url(${P1(i)})`,{...p,weight:y});await _.load(),t.add(_),u.push(_)}return ze.has(`${h}-and-url`)?ze.get(`${h}-and-url`).entries.push({url:i,faces:u}):ze.set(`${h}-and-url`,{entries:[{url:i,faces:u}]}),u.length===1?u[0]:u}return Ne("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){const e=Array.isArray(i)?i:[i],t=e[0].family,s=ze.get(`${t}-and-url`),o=s.entries.find(l=>l.faces.some(u=>e.indexOf(u)!==-1));o.faces=o.faces.filter(l=>e.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),e.forEach(l=>{Oe.get().getFontFaceSet().delete(l)}),s.entries.length===0&&ze.remove(`${t}-and-url`)}};function sc(i,e=1){var s;const t=(s=ni.RETINA_PREFIX)==null?void 0:s.exec(i);return t?parseFloat(t[1]):e}function oc(i,e,t){i.label=t,i._sourceOrigin=t;const s=new Pe({source:i,label:t}),o=()=>{delete e.promiseCache[t],ze.has(t)&&ze.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(Ne("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{i.destroyed||(Ne("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const T1=".svg",E1="image/svg+xml",M1={extension:{type:ue.LoadParser,priority:er.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(i){return ri(i,E1)||ii(i,T1)},async load(i,e,t){var s;return((s=e.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?I1(i):R1(i,e,t,this.config.crossOrigin)},unload(i){i.destroy(!0)}};async function R1(i,e,t,s){var w,P,b;const o=await Oe.get().fetch(i),l=Oe.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=((w=e.data)==null?void 0:w.width)??l.width,h=((P=e.data)==null?void 0:P.height)??l.height,f=((b=e.data)==null?void 0:b.resolution)||sc(i),p=Math.ceil(u*f),g=Math.ceil(h*f),y=Oe.get().createCanvas(p,g),_=y.getContext("2d");_.imageSmoothingEnabled=!0,_.imageSmoothingQuality="high",_.drawImage(l,0,0,u*f,h*f);const{parseAsGraphicsContext:v,...S}=e.data??{},k=new vr({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:f,...S});return oc(k,t,i)}async function I1(i){const t=await(await Oe.get().fetch(i)).text(),s=new Vt;return s.svg(t),s}const F1=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Kr=null,Vu=class{constructor(){Kr||(Kr=URL.createObjectURL(new Blob([F1],{type:"application/javascript"}))),this.worker=new Worker(Kr)}};Vu.revokeObjectURL=function(){Kr&&(URL.revokeObjectURL(Kr),Kr=null)};const L1=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Zr=null;class Hm{constructor(){Zr||(Zr=URL.createObjectURL(new Blob([L1],{type:"application/javascript"}))),this.worker=new Worker(Zr)}}Hm.revokeObjectURL=function(){Zr&&(URL.revokeObjectURL(Zr),Zr=null)};let gp=0,vu;class B1{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Vu;t.addEventListener("message",s=>{t.terminate(),Vu.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){var s;return this._run("loadImageBitmap",[e,(s=t==null?void 0:t.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){vu===void 0&&(vu=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<vu&&(this._createdWorkers++,e=new Hm().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:e,arguments:t,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[gp]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:gp++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const yp=new B1,z1=[".jpeg",".jpg",".png",".webp",".avif"],N1=["image/jpeg","image/png","image/webp","image/avif"];async function O1(i,e){var o;const t=await Oe.get().fetch(i);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${t.status} ${t.statusText}`);const s=await t.blob();return((o=e==null?void 0:e.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const Vm={name:"loadTextures",id:"texture",extension:{type:ue.LoadParser,priority:er.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return ri(i,N1)||ii(i,z1)},async load(i,e,t){var l;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await yp.isImageBitmapSupported()?s=await yp.loadImageBitmap(i,e):s=await O1(i,e):s=await new Promise((u,h)=>{s=Oe.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=i,s.complete?u(s):(s.onload=()=>{u(s)},s.onerror=h)});const o=new vr({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((l=e.data)==null?void 0:l.resolution)||sc(i),...e.data});return oc(o,t,i)},unload(i){i.destroy(!0)}},D1=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let wu,Su;function G1(i,e,t){t===void 0&&!e.startsWith("data:")?i.crossOrigin=j1(e):t!==!1&&(i.crossOrigin=typeof t=="string"?t:"anonymous")}function U1(i){return new Promise((e,t)=>{i.addEventListener("canplaythrough",s),i.addEventListener("error",o),i.load();function s(){l(),e()}function o(u){l(),t(u)}function l(){i.removeEventListener("canplaythrough",s),i.removeEventListener("error",o)}})}function j1(i,e=globalThis.location){if(i.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(i,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function W1(){const i=[],e=[];for(const t of D1){const s=rs.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;na(s)&&(i.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:i,validVideoMime:e}}const H1={name:"loadVideo",id:"video",extension:{type:ue.LoadParser,name:"loadVideo"},test(i){if(!wu||!Su){const{validVideoExtensions:s,validVideoMime:o}=W1();wu=s,Su=o}const e=ri(i,Su),t=ii(i,wu);return e||t},async load(i,e,t){var f,p;const s={...rs.defaultOptions,resolution:((f=e.data)==null?void 0:f.resolution)||sc(i),alphaMode:((p=e.data)==null?void 0:p.alphaMode)||await qp(),...e.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(g=>{const y=l[g];y!==void 0&&o.setAttribute(g,y)}),s.muted===!0&&(o.muted=!0),G1(o,i,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(i.startsWith("data:"))h=i.slice(5,i.indexOf(";"));else if(!i.startsWith("blob:")){const g=i.split("?")[0].slice(i.lastIndexOf(".")+1).toLowerCase();h=rs.MIME_TYPES[g]||`video/${g}`}return u.src=i,h&&(u.type=h),new Promise(g=>{const y=async()=>{const _=new rs({...s,resource:o});o.removeEventListener("canplay",y),e.data.preload&&await U1(o),g(oc(_,t,i))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",y),o.appendChild(u)})},unload(i){i.destroy(!0)}},$m={extension:{type:ue.ResolveParser,name:"resolveTexture"},test:Vm.test,parse:i=>{var e;return{resolution:parseFloat(((e=ni.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:i.split(".").pop(),src:i}}},V1={extension:{type:ue.ResolveParser,priority:-2,name:"resolveJson"},test:i=>ni.RETINA_PREFIX.test(i)&&i.endsWith(".json"),parse:$m.parse};class $1{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ni,this.loader=new f1,this.cache=ze,this._backgroundLoader=new i1(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var l,u;if(this._initialized){Ne("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let h=e.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}const t=((l=e.texturePreference)==null?void 0:l.resolution)??1,s=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:(u=e.texturePreference)==null?void 0:u.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=Xo(e),o=rn(e).map(h=>{if(typeof h!="string"){const f=this.resolver.getAlias(h);return f.some(p=>!this.resolver.hasKey(p))&&this.add(h),Array.isArray(f)?f[0]:f}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,t);return s?u[o[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const o=this.resolver.resolveBundle(e),l={},u=Object.keys(o);let h=0;const f=[],p=()=>{t==null||t(f.reduce((y,_)=>y+_,0)/h)},g=u.map((y,_)=>{const v=o[y],S=Object.values(v),w=[...new Set(S.flat())].reduce((P,b)=>P+(b.progressSize||1),0);return f.push(0),h+=w,this._mapLoadToResolve(v,P=>{f[_]=P*w,p()}).then(P=>{l[y]=P})});return await Promise.all(g),s?l[e[0]]:l}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return ze.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=ze.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,t);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const h=o[u.src],f=[u.src];u.alias&&f.push(...u.alias),f.forEach(p=>{l[p]=h}),ze.set(f,h)}),l}async unload(e){this._initialized||await this.init();const t=rn(e).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=rn(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{ze.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,o)=>t.indexOf(s)===o),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const ts=new $1;ft.handleByList(ue.LoadParser,ts.loader.parsers).handleByList(ue.ResolveParser,ts.resolver.parsers).handleByList(ue.CacheParser,ts.cache.parsers).handleByList(ue.DetectionParser,ts.detections);ft.add(s1,a1,o1,d1,u1,c1,h1,g1,_1,b1,M1,Vm,H1,r1,n1,$m,V1);const xp={loader:ue.LoadParser,resolver:ue.ResolveParser,cache:ue.CacheParser,detection:ue.DetectionParser};ft.handle(ue.Asset,i=>{const e=i.ref;Object.entries(xp).filter(([t])=>!!e[t]).forEach(([t,s])=>ft.add(Object.assign(e[t],{extension:e[t].extension??s})))},i=>{const e=i.ref;Object.keys(xp).filter(t=>!!e[t]).forEach(t=>ft.remove(e[t]))});class ds extends Gp{constructor(e){e instanceof Vt&&(e={context:e});const{context:t,roundPixels:s,...o}=e||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new Vt,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new ds(this._context.clone()):(this._ownedContext=null,new ds(this._context))}lineStyle(e,t,s){Se(Ie,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return e&&(o.width=e),t&&(o.color=t),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(e,t){Se(Ie,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){Se(Ie,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==Vt.defaultStrokeStyle.width||e.color!==Vt.defaultStrokeStyle.color||e.alpha!==Vt.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Se(Ie,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Se(Ie,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Se(Ie,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Se(Ie,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Se(Ie,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Se(Ie,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}ft.add(i0,s0);const bn={nom:{nomcomplet:"Test Hero"},niveauGlobal:1,classe:{1:{classeId:"fighter"}},pvActuels:12,pvMax:12,CA:16,caracs:{force:{FOR:16},dexterite:{DEX:14},constitution:{CON:14}}},_p="/assets/gentil-BhOEUPEC.svg",vp="/assets/mechant-BfeeQgUg.svg",Zn=12,Kn=8,Mt=64,Ho=Zn*Mt,Cu=Kn*Mt,Ym=Mt,ac=Mt*.5,Xm=Ho/2,qm=ac*2,Y1=1841961;function fs(i,e){return i>=0&&i<Zn&&e>=0&&e<Kn}function Xr(i,e){const t=Ym/2,s=ac/2,o=(i-e)*t+Xm,l=(i+e)*s+qm;return{x:o,y:l}}function X1(i,e){const t=Ym/2,s=ac/2,o=i-Xm,l=e-qm,u=o/t,h=l/s,f=(u+h)/2,p=(h-u)/2,g=Math.round(f),y=Math.round(p);return{x:g,y}}function q1(i,e,t,s){const o=[];for(let l=-s;l<=s;l++)for(let u=-s;u<=s;u++){const h=e+u,f=t+l;if(!fs(h,f))continue;Math.sqrt(u*u+l*l)<=s+.01&&o.push({x:h,y:f})}return{id:i,type:"circle",cells:o}}function Q1(i,e,t,s,o){const l=[],u=Math.floor(s/2),h=Math.floor(o/2);for(let f=t-h;f<=t+h;f++)for(let p=e-u;p<=e+u;p++)fs(p,f)&&l.push({x:p,y:f});return{id:i,type:"rectangle",cells:l}}function K1(i,e,t,s,o){const l=[];for(let u=1;u<=s;u++)for(let h=-u;h<=u;h++){let f=e,p=t;switch(o){case"right":f=e+u,p=t+h;break;case"left":f=e-u,p=t+h;break;case"down":f=e+h,p=t+u;break;case"up":f=e+h,p=t-u;break}fs(f,p)&&l.push({x:f,y:p})}return{id:i,type:"cone",cells:l}}function ku(i){const e=Zn-1,t=i;return{id:`enemy-${i}`,type:"enemy",x:e,y:t,hp:6,maxHp:6}}function Qn(i,e,t){return Math.max(e,Math.min(t,i))}function wp(i,e){return Math.abs(i.x-e.x)+Math.abs(i.y-e.y)}const Z1=()=>{const i=rt.useRef(null),e=rt.useRef(null),t=rt.useRef(null),s=rt.useRef(null),[o,l]=rt.useState([]),[u,h]=rt.useState({id:"player-1",type:"player",x:0,y:Math.floor(Kn/2),hp:bn.pvActuels,maxHp:bn.pvMax}),[f,p]=rt.useState([ku(1),ku(3),ku(5)]),[g,y]=rt.useState("player"),[_,v]=rt.useState(1),[S,k]=rt.useState(!1),[w,P]=rt.useState([]),[b,E]=rt.useState([]),[R,U]=rt.useState(null),[z,B]=rt.useState(null),[ne,oe]=rt.useState(null),[$,Y]=rt.useState(!1);function le(H){l(re=>[H,...re].slice(0,12))}function _e(H){if(g!=="player")return;const re=i.current;if(!re)return;const K=re.querySelector("canvas");if(!K)return;const J=K.getBoundingClientRect(),de=H.clientX-J.left,fe=H.clientY-J.top,ke=de/J.width*Ho,Ae=fe/J.height*Cu,{x:Ve,y:Ge}=X1(ke,Ae),Ze=Ve,Ue=Ge;fs(Ze,Ue)&&P(ct=>{const Ee=[...ct];if(Ee.length>=5)return le("Limite de 5 cases atteinte pour ce tour."),Ee;let Ct=Ee.length>0?Ee[Ee.length-1]:{x:u.x,y:u.y};if(Ct.x===Ze&&Ct.y===Ue)return Ee;let It=Ct.x,Xt=Ct.y,cn=5-Ee.length;for(;It!==Ze&&cn>0;)It+=Math.sign(Ze-It),Ee.push({x:It,y:Xt}),cn--;for(;Xt!==Ue&&cn>0;)Xt+=Math.sign(Ue-Xt),Ee.push({x:It,y:Xt}),cn--;return le(cn===0&&(It!==Ze||Xt!==Ue)?"Trajectoire tronquee: limite de 5 cases atteinte.":`Trajectoire: ajout de la case (${Ze}, ${Ue}).`),Ee})}function we(){if(g!=="player"||w.length===0)return;const H=w[w.length-1];h(re=>({...re,x:H.x,y:H.y})),le(`Deplacement valide vers (${H.x}, ${H.y}) via ${w.length} etape(s).`),P([])}function et(){g==="player"&&(P([]),le("Trajectoire reinitialisee."))}function X(){const H={x:u.x,y:u.y,hp:u.hp,maxHp:u.maxHp},re=f.map(K=>({id:K.id,x:K.x,y:K.y,hp:K.hp,maxHp:K.maxHp}));return{round:_,phase:g,grid:{cols:Zn,rows:Kn},player:H,enemies:re}}async function Q(H){U(H),oe(null),Y(!1);try{const re=await fetch("/api/enemy-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)});if(!re.ok)throw new Error(`HTTP ${re.status}`);const K=await re.json();if(!K.decisions||!Array.isArray(K.decisions))throw new Error("Rponse backend invalide (decisions manquant).");return B(K.decisions),K.decisions}catch(re){return console.warn("[enemy-ai] Erreur lors de la requete IA:",re),oe(re instanceof Error?re.message:String(re??"unknown")),B(null),Y(!0),[]}}function V(H){if(!H.length){Y(!0),B([]),p(re=>re.map(K=>{const J=u.x>K.x?1:u.x<K.x?-1:0,de=u.y>K.y?1:u.y<K.y?-1:0,fe=Qn(K.x+J,0,Zn-1),ke=Qn(K.y+de,0,Kn-1);return fe===u.x&&ke===u.y?(h(Ae=>({...Ae,hp:Math.max(0,Ae.hp-2)})),le(`${K.id} attaque le joueur pour 2 degats (fallback).`)):le(`${K.id} avance vers (${fe}, ${ke}).`),{...K,x:fe,y:ke}}));return}Y(!1),p(re=>{const K=re.map(de=>({...de}));let J={...u};for(const de of H){const fe=K.find(Ae=>Ae.id===de.enemyId);if(!fe)continue;const ke=(de.action||"wait").toLowerCase();if(ke==="wait"){le(`${fe.id} attend.`);continue}if(ke==="move"){let Ae=de.targetX,Ve=de.targetY;const Ge=de;if((typeof Ae!="number"||typeof Ve!="number")&&Ge.target&&typeof Ge.target.x=="number"&&typeof Ge.target.y=="number"&&(Ae=Ge.target.x,Ve=Ge.target.y),typeof Ae!="number"||typeof Ve!="number"){le(`${fe.id}: decision MOVE ignoree (pas de cible valide).`);continue}let Ze=Qn(Ae,0,Zn-1),Ue=Qn(Ve,0,Kn-1);if(wp(fe,{x:Ze,y:Ue})>3){const st=Qn(Ze-fe.x,-3,3),Ee=Qn(Ue-fe.y,-3,3);Ze=Qn(fe.x+Math.sign(st)*Math.min(Math.abs(st),3),0,Zn-1),Ue=Qn(fe.y+Math.sign(Ee)*Math.min(Math.abs(Ee),3),0,Kn-1)}fe.x=Ze,fe.y=Ue,le(`${fe.id} se deplace vers (${Ze}, ${Ue}).`);continue}ke==="attack"&&(wp(fe,J)<=1?(J={...J,hp:Math.max(0,J.hp-2)},le(`${fe.id} attaque le joueur pour 2 degats.`)):le(`${fe.id} voulait attaquer mais est trop loin (ignore).`))}return h(J),K})}async function W(){k(!0),P([]),E([]);const H=X(),re=await Q(H);V(re),k(!1),y("player"),v(K=>K+1)}function q(){g==="player"&&(y("enemies"),le(`Fin du tour joueur (round ${_}). Tour des ennemis...`),W())}function M(){E([{id:"demo-circle",kind:"circle",radius:2}]),le("Zone d'effet: cercle (rayon 2) autour du joueur.")}function N(){E([{id:"demo-rect",kind:"rectangle",width:3,height:3}]),le("Zone d'effet: rectangle 3x3 centre sur le joueur.")}function ge(){E([{id:"demo-cone",kind:"cone",range:4,direction:"right"}]),le("Zone d'effet: cone vers la droite (portee 4).")}function xe(){E([]),le("Zones d'effet effacees.")}rt.useEffect(()=>{if(!i.current||e.current)return;const H=new _m;e.current=H;let re=!1,K=null,J=!1;return(async()=>{if(await H.init({width:Ho,height:Cu,background:Y1,antialias:!0}),J=!0,await ts.load([_p,vp]),re)return;const fe=i.current;if(!fe)return;fe.appendChild(H.canvas);const ke=new sn;H.stage.addChild(ke);const Ae=new ds;ke.addChild(Ae),(()=>{Ae.clear();for(let ct=0;ct<Kn;ct++)for(let st=0;st<Zn;st++){if(!fs(st,ct))continue;const Ee=Xr(st,ct),Ct=Mt,It=Mt*.5,Xt=[Ee.x,Ee.y-It/2,Ee.x+Ct/2,Ee.y,Ee.x,Ee.y+It/2,Ee.x-Ct/2,Ee.y],cn=(st+ct)%2===0;Ae.poly(Xt).fill({color:cn?1381666:1908016,alpha:1})}})();const Ge=new ds;ke.addChild(Ge),s.current=Ge;const Ze=new sn;ke.addChild(Ze),t.current=Ze;const Ue=()=>{const ct=H.canvas,st=ct.parentElement;if(!st)return;const Ee=Math.min(st.clientWidth/Ho,st.clientHeight/Cu);ct.style.transformOrigin="top left",ct.style.transform=`scale(${Ee})`};K=Ue,Ue(),window.addEventListener("resize",Ue)})(),()=>{re=!0,K&&window.removeEventListener("resize",K),J&&e.current&&e.current.destroy(!0),e.current=null,t.current=null,s.current=null}},[]),rt.useEffect(()=>{const H=t.current;if(!H)return;H.removeChildren();const re=[u,...f];for(const K of re){const J=K.type==="player"?_p:vp,de=new sn,fe=ei.from(J);fe.anchor.set(.5),fe.width=Mt*.9,fe.height=Mt*.9,fe.tint=16777215,de.addChild(fe);const ke=Xr(K.x,K.y);de.x=ke.x+Mt*.05,de.y=ke.y-Mt*.1,H.addChild(de)}},[u,f]),rt.useEffect(()=>{const H=s.current;if(!H)return;H.clear();const re=b.map(J=>{switch(J.kind){case"circle":return q1(J.id,u.x,u.y,J.radius??1);case"rectangle":return Q1(J.id,u.x,u.y,J.width??1,J.height??1);case"cone":return K1(J.id,u.x,u.y,J.range??1,J.direction??"right");default:return{id:J.id,type:"circle",cells:[]}}});for(const J of re)for(const de of J.cells){const fe=Xr(de.x,de.y),ke=Mt,Ae=Mt*.5,Ve=[fe.x,fe.y-Ae/2,fe.x+ke/2,fe.y,fe.x,fe.y+Ae/2,fe.x-ke/2,fe.y],Ge=J.type==="circle"?3447003:J.type==="rectangle"?3066993:15158332;H.poly(Ve).fill({color:Ge,alpha:.45})}if(w.length>0){const J=w[w.length-1],de=Xr(J.x,J.y),fe=Mt,ke=Mt*.5,Ae=[de.x,de.y-ke/2,de.x+fe/2,de.y,de.x,de.y+ke/2,de.x-fe/2,de.y];H.poly(Ae).fill({color:15844367,alpha:.2})}if(w.length===0)return;H.setStrokeStyle({width:6,color:15844367,alpha:1});const K=Xr(u.x,u.y);H.moveTo(K.x,K.y);for(const J of w){const de=Xr(J.x,J.y);H.lineTo(de.x,de.y)}H.stroke()},[u,w,b]);const pe=g==="player";return me.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"16px",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:"16px",boxSizing:"border-box"},children:[me.jsxs("div",{style:{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},children:[me.jsx("h1",{style:{marginBottom:8},children:"Mini Donjon (test-GAME)"}),me.jsx("p",{style:{marginBottom:8},children:"Tour par tour simple. Cliquez sur la grille pour definir une trajectoire (max 5 cases), validez le dplacement, puis terminez le tour pour laisser l'IA des ennemis jouer."}),me.jsx("div",{ref:i,onClick:_e,style:{flex:"1 1 auto",border:"1px solid #333",overflow:"hidden",maxHeight:"min(80vh, 640px)",maxWidth:"min(100%, 1024px)"}}),me.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,flexWrap:"wrap"},children:[me.jsx("button",{type:"button",onClick:we,style:{padding:"4px 8px",background:pe&&w.length?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:pe&&w.length?"pointer":"default"},disabled:!pe||w.length===0,children:"Valider le deplacement"}),me.jsx("button",{type:"button",onClick:et,style:{padding:"4px 8px",background:pe?"#e67e22":"#555",color:"#fff",border:"none",borderRadius:4,cursor:pe?"pointer":"default"},disabled:!pe,children:"Reinitialiser trajet"}),me.jsx("button",{type:"button",onClick:q,style:{padding:"4px 8px",background:pe?"#9b59b6":"#555",color:"#fff",border:"none",borderRadius:4,cursor:pe?"pointer":"default"},disabled:!pe||S,children:"Fin du tour joueur"}),!pe&&me.jsx("span",{style:{fontSize:12,alignSelf:"center"},children:"Tour des ennemis en cours..."})]})]}),me.jsxs("div",{style:{width:"360px",display:"flex",flexDirection:"column",gap:"12px"},children:[me.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333"},children:[me.jsx("h2",{style:{margin:"0 0 8px"},children:"Etat du combat"}),me.jsxs("div",{children:[me.jsx("strong",{children:"Round :"})," ",_," |"," ",me.jsx("strong",{children:"Phase :"})," ",g==="player"?"Joueur":"Ennemis"]}),me.jsxs("div",{children:[me.jsx("strong",{children:"Nom :"})," ",bn.nom.nomcomplet]}),me.jsxs("div",{children:[me.jsx("strong",{children:"Niveau :"})," ",bn.niveauGlobal," |"," ",me.jsx("strong",{children:"Classe :"})," ",bn.classe[1].classeId]}),me.jsxs("div",{children:[me.jsx("strong",{children:"PV :"})," ",u.hp," / ",u.maxHp]}),me.jsxs("div",{children:[me.jsx("strong",{children:"CA :"})," ",bn.CA]}),me.jsxs("div",{style:{marginTop:8},children:[me.jsx("strong",{children:"Caracs :"})," ","FOR ",bn.caracs.force.FOR," | DEX"," ",bn.caracs.dexterite.DEX," | CON"," ",bn.caracs.constitution.CON]}),me.jsxs("div",{style:{marginTop:8,fontSize:12},children:[me.jsx("strong",{children:"Trajectoire :"})," ",w.length===0?"aucune":`(${u.x}, ${u.y}) -> `+w.map(H=>`(${H.x}, ${H.y})`).join(" -> ")]}),me.jsxs("div",{style:{marginTop:8,fontSize:11,opacity:.85},children:[me.jsx("strong",{children:"IA ennemis (debug) :"}),me.jsxs("div",{children:["Dernier appel :"," ",R?`round ${R.round}, phase ${R.phase}`:"aucun"]}),me.jsxs("div",{children:["Dcisions reues :"," ",z===null?"n/a":`${z.length} (fallback: ${$?"oui":"non"})`]}),ne&&me.jsxs("div",{children:["Erreur : ",ne]})]})]}),me.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[me.jsx("h2",{style:{margin:"0 0 4px"},children:"Zones d'effet (demo)"}),me.jsxs("p",{style:{margin:0,fontSize:12},children:["Ces boutons utilisent les helpers de ",me.jsx("code",{children:"boardEffects.ts"})," ","pour dessiner des zones en coordonnees de grille autour du joueur."]}),me.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:[me.jsx("button",{type:"button",onClick:M,style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cercle R=2"}),me.jsx("button",{type:"button",onClick:N,style:{padding:"4px 8px",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Rectangle 3x3"}),me.jsx("button",{type:"button",onClick:ge,style:{padding:"4px 8px",background:"#c0392b",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cone portee 4"}),me.jsx("button",{type:"button",onClick:xe,style:{padding:"4px 8px",background:"#7f8c8d",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Effacer zones"})]})]}),me.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",flex:"1 1 auto",display:"flex",flexDirection:"column"},children:[me.jsx("h2",{style:{margin:"0 0 8px"},children:"Log"}),me.jsx("div",{style:{flex:"1 1 auto",overflowY:"auto",fontSize:12,lineHeight:1.4},children:o.map((H,re)=>me.jsxs("div",{children:["- ",H]},re))})]})]})]})},J1=document.getElementById("root");t0.createRoot(J1).render(me.jsx(Z1,{}));export{X0 as $,mm as A,Rt as B,sn as C,Oe as D,ue as E,Dp as F,Jo as G,wf as H,ei as I,yx as J,Px as K,ps as L,Ce as M,Xe as N,Ke as O,_t as P,Hx as Q,Lu as R,Ku as S,Ro as T,Mu as U,Cf as V,ou as W,kf as X,Q0 as Y,Yo as Z,it as _,rm as a,Bp as a0,gm as a1,Se as a2,Ie as a3,qx as a4,__ as a5,d_ as a6,O_ as a7,G_ as a8,V_ as a9,Y_ as aa,X_ as ab,$o as ac,jo as ad,Du as ae,cp as af,Rm as ag,Df as ah,Nf as ai,dp as aj,qv as ak,ze as al,ds as am,y0 as an,Ko as ao,Lm as ap,an as b,u_ as c,cs as d,ft as e,Of as f,o_ as g,Uo as h,Qu as i,dm as j,Yp as k,ln as l,am as m,Hu as n,N_ as o,D_ as p,W_ as q,R0 as r,$_ as s,Pe as t,g0 as u,q_ as v,Ne as w,Yt as x,Ip as y,on as z};
