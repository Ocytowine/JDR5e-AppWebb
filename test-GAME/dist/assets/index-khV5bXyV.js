const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-B4gs33KU.js","assets/webworkerAll-CZKnrQTY.js","assets/colorToUniform-Bmr3rSII.js","assets/WebGPURenderer-KoiO6yoD.js","assets/SharedSystems-Av1sGCKo.js","assets/WebGLRenderer-BgasUmVM.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function bh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wc={exports:{}},Co={},bc={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function Sg(){if(Kf)return ze;Kf=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function x(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function _(z,H,Se){this.props=z,this.context=H,this.refs=S,this.updater=Se||v}_.prototype.isReactComponent={},_.prototype.setState=function(z,H){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,H,"setState")},_.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function T(){}T.prototype=_.prototype;function M(z,H,Se){this.props=z,this.context=H,this.refs=S,this.updater=Se||v}var E=M.prototype=new T;E.constructor=M,b(E,_.prototype),E.isPureReactComponent=!0;var P=Array.isArray,N=Object.prototype.hasOwnProperty,D={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function U(z,H,Se){var Te,Pe={},Re=null,Ye=null;if(H!=null)for(Te in H.ref!==void 0&&(Ye=H.ref),H.key!==void 0&&(Re=""+H.key),H)N.call(H,Te)&&!F.hasOwnProperty(Te)&&(Pe[Te]=H[Te]);var We=arguments.length-2;if(We===1)Pe.children=Se;else if(1<We){for(var Xe=Array(We),xt=0;xt<We;xt++)Xe[xt]=arguments[xt+2];Pe.children=Xe}if(z&&z.defaultProps)for(Te in We=z.defaultProps,We)Pe[Te]===void 0&&(Pe[Te]=We[Te]);return{$$typeof:r,type:z,key:Re,ref:Ye,props:Pe,_owner:D.current}}function G(z,H){return{$$typeof:r,type:z.type,key:H,ref:z.ref,props:z.props,_owner:z._owner}}function Y(z){return typeof z=="object"&&z!==null&&z.$$typeof===r}function q(z){var H={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Se){return H[Se]})}var me=/\/+/g;function te(z,H){return typeof z=="object"&&z!==null&&z.key!=null?q(""+z.key):H.toString(36)}function we(z,H,Se,Te,Pe){var Re=typeof z;(Re==="undefined"||Re==="boolean")&&(z=null);var Ye=!1;if(z===null)Ye=!0;else switch(Re){case"string":case"number":Ye=!0;break;case"object":switch(z.$$typeof){case r:case e:Ye=!0}}if(Ye)return Ye=z,Pe=Pe(Ye),z=Te===""?"."+te(Ye,0):Te,P(Pe)?(Se="",z!=null&&(Se=z.replace(me,"$&/")+"/"),we(Pe,H,Se,"",function(xt){return xt})):Pe!=null&&(Y(Pe)&&(Pe=G(Pe,Se+(!Pe.key||Ye&&Ye.key===Pe.key?"":(""+Pe.key).replace(me,"$&/")+"/")+z)),H.push(Pe)),1;if(Ye=0,Te=Te===""?".":Te+":",P(z))for(var We=0;We<z.length;We++){Re=z[We];var Xe=Te+te(Re,We);Ye+=we(Re,H,Se,Xe,Pe)}else if(Xe=x(z),typeof Xe=="function")for(z=Xe.call(z),We=0;!(Re=z.next()).done;)Re=Re.value,Xe=Te+te(Re,We++),Ye+=we(Re,H,Se,Xe,Pe);else if(Re==="object")throw H=String(z),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Ye}function Ze(z,H,Se){if(z==null)return z;var Te=[],Pe=0;return we(z,Te,"","",function(Re){return H.call(Se,Re,Pe++)}),Te}function ee(z){if(z._status===-1){var H=z._result;H=H(),H.then(function(Se){(z._status===0||z._status===-1)&&(z._status=1,z._result=Se)},function(Se){(z._status===0||z._status===-1)&&(z._status=2,z._result=Se)}),z._status===-1&&(z._status=0,z._result=H)}if(z._status===1)return z._result.default;throw z._result}var ne={current:null},re={transition:null},Q={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:re,ReactCurrentOwner:D};function ie(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:Ze,forEach:function(z,H,Se){Ze(z,function(){H.apply(this,arguments)},Se)},count:function(z){var H=0;return Ze(z,function(){H++}),H},toArray:function(z){return Ze(z,function(H){return H})||[]},only:function(z){if(!Y(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},ze.Component=_,ze.Fragment=t,ze.Profiler=o,ze.PureComponent=M,ze.StrictMode=s,ze.Suspense=d,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,ze.act=ie,ze.cloneElement=function(z,H,Se){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Te=b({},z.props),Pe=z.key,Re=z.ref,Ye=z._owner;if(H!=null){if(H.ref!==void 0&&(Re=H.ref,Ye=D.current),H.key!==void 0&&(Pe=""+H.key),z.type&&z.type.defaultProps)var We=z.type.defaultProps;for(Xe in H)N.call(H,Xe)&&!F.hasOwnProperty(Xe)&&(Te[Xe]=H[Xe]===void 0&&We!==void 0?We[Xe]:H[Xe])}var Xe=arguments.length-2;if(Xe===1)Te.children=Se;else if(1<Xe){We=Array(Xe);for(var xt=0;xt<Xe;xt++)We[xt]=arguments[xt+2];Te.children=We}return{$$typeof:r,type:z.type,key:Pe,ref:Re,props:Te,_owner:Ye}},ze.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:a,_context:z},z.Consumer=z},ze.createElement=U,ze.createFactory=function(z){var H=U.bind(null,z);return H.type=z,H},ze.createRef=function(){return{current:null}},ze.forwardRef=function(z){return{$$typeof:c,render:z}},ze.isValidElement=Y,ze.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:ee}},ze.memo=function(z,H){return{$$typeof:f,type:z,compare:H===void 0?null:H}},ze.startTransition=function(z){var H=re.transition;re.transition={};try{z()}finally{re.transition=H}},ze.unstable_act=ie,ze.useCallback=function(z,H){return ne.current.useCallback(z,H)},ze.useContext=function(z){return ne.current.useContext(z)},ze.useDebugValue=function(){},ze.useDeferredValue=function(z){return ne.current.useDeferredValue(z)},ze.useEffect=function(z,H){return ne.current.useEffect(z,H)},ze.useId=function(){return ne.current.useId()},ze.useImperativeHandle=function(z,H,Se){return ne.current.useImperativeHandle(z,H,Se)},ze.useInsertionEffect=function(z,H){return ne.current.useInsertionEffect(z,H)},ze.useLayoutEffect=function(z,H){return ne.current.useLayoutEffect(z,H)},ze.useMemo=function(z,H){return ne.current.useMemo(z,H)},ze.useReducer=function(z,H,Se){return ne.current.useReducer(z,H,Se)},ze.useRef=function(z){return ne.current.useRef(z)},ze.useState=function(z){return ne.current.useState(z)},ze.useSyncExternalStore=function(z,H,Se){return ne.current.useSyncExternalStore(z,H,Se)},ze.useTransition=function(){return ne.current.useTransition()},ze.version="18.3.1",ze}var Qf;function Sh(){return Qf||(Qf=1,bc.exports=Sg()),bc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf;function kg(){if(Zf)return Co;Zf=1;var r=Sh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,f){var m,y={},x=null,v=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(m in d)s.call(d,m)&&!a.hasOwnProperty(m)&&(y[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:c,key:x,ref:v,props:y,_owner:o.current}}return Co.Fragment=t,Co.jsx=u,Co.jsxs=u,Co}var Jf;function Cg(){return Jf||(Jf=1,wc.exports=kg()),wc.exports}var C=Cg(),ul={},Sc={exports:{}},an={},kc={exports:{}},Cc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function Ag(){return e1||(e1=1,(function(r){function e(re,Q){var ie=re.length;re.push(Q);e:for(;0<ie;){var z=ie-1>>>1,H=re[z];if(0<o(H,Q))re[z]=Q,re[ie]=H,ie=z;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var Q=re[0],ie=re.pop();if(ie!==Q){re[0]=ie;e:for(var z=0,H=re.length,Se=H>>>1;z<Se;){var Te=2*(z+1)-1,Pe=re[Te],Re=Te+1,Ye=re[Re];if(0>o(Pe,ie))Re<H&&0>o(Ye,Pe)?(re[z]=Ye,re[Re]=ie,z=Re):(re[z]=Pe,re[Te]=ie,z=Te);else if(Re<H&&0>o(Ye,ie))re[z]=Ye,re[Re]=ie,z=Re;else break e}}return Q}function o(re,Q){var ie=re.sortIndex-Q.sortIndex;return ie!==0?ie:re.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],f=[],m=1,y=null,x=3,v=!1,b=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(re){for(var Q=t(f);Q!==null;){if(Q.callback===null)s(f);else if(Q.startTime<=re)s(f),Q.sortIndex=Q.expirationTime,e(d,Q);else break;Q=t(f)}}function P(re){if(S=!1,E(re),!b)if(t(d)!==null)b=!0,ee(N);else{var Q=t(f);Q!==null&&ne(P,Q.startTime-re)}}function N(re,Q){b=!1,S&&(S=!1,T(U),U=-1),v=!0;var ie=x;try{for(E(Q),y=t(d);y!==null&&(!(y.expirationTime>Q)||re&&!q());){var z=y.callback;if(typeof z=="function"){y.callback=null,x=y.priorityLevel;var H=z(y.expirationTime<=Q);Q=r.unstable_now(),typeof H=="function"?y.callback=H:y===t(d)&&s(d),E(Q)}else s(d);y=t(d)}if(y!==null)var Se=!0;else{var Te=t(f);Te!==null&&ne(P,Te.startTime-Q),Se=!1}return Se}finally{y=null,x=ie,v=!1}}var D=!1,F=null,U=-1,G=5,Y=-1;function q(){return!(r.unstable_now()-Y<G)}function me(){if(F!==null){var re=r.unstable_now();Y=re;var Q=!0;try{Q=F(!0,re)}finally{Q?te():(D=!1,F=null)}}else D=!1}var te;if(typeof M=="function")te=function(){M(me)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ze=we.port2;we.port1.onmessage=me,te=function(){Ze.postMessage(null)}}else te=function(){_(me,0)};function ee(re){F=re,D||(D=!0,te())}function ne(re,Q){U=_(function(){re(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){b||v||(b=!0,ee(N))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(re){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var ie=x;x=Q;try{return re()}finally{x=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,Q){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ie=x;x=re;try{return Q()}finally{x=ie}},r.unstable_scheduleCallback=function(re,Q,ie){var z=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?z+ie:z):ie=z,re){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ie+H,re={id:m++,callback:Q,priorityLevel:re,startTime:ie,expirationTime:H,sortIndex:-1},ie>z?(re.sortIndex=ie,e(f,re),t(d)===null&&re===t(f)&&(S?(T(U),U=-1):S=!0,ne(P,ie-z))):(re.sortIndex=H,e(d,re),b||v||(b=!0,ee(N))),re},r.unstable_shouldYield=q,r.unstable_wrapCallback=function(re){var Q=x;return function(){var ie=x;x=Q;try{return re.apply(this,arguments)}finally{x=ie}}}})(Cc)),Cc}var t1;function Tg(){return t1||(t1=1,kc.exports=Ag()),kc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1;function Pg(){if(n1)return an;n1=1;var r=Sh(),e=Tg();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(n,i){u(n,i),u(n+"Capture",i)}function u(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function x(n){return d.call(y,n)?!0:d.call(m,n)?!1:f.test(n)?y[n]=!0:(m[n]=!0,!1)}function v(n,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function b(n,i,l,h){if(i===null||typeof i>"u"||v(n,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function S(n,i,l,h,p,g,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=w}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_[n]=new S(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];_[i]=new S(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){_[n]=new S(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_[n]=new S(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_[n]=new S(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){_[n]=new S(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){_[n]=new S(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){_[n]=new S(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){_[n]=new S(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(T,M);_[i]=new S(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(T,M);_[i]=new S(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(T,M);_[i]=new S(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){_[n]=new S(n,1,!1,n.toLowerCase(),null,!1,!1)}),_.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){_[n]=new S(n,1,!1,n.toLowerCase(),null,!0,!0)});function E(n,i,l,h){var p=_.hasOwnProperty(i)?_[i]:null;(p!==null?p.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(b(i,l,p,h)&&(l=null),h||p===null?x(i)&&(l===null?n.removeAttribute(i):n.setAttribute(i,""+l)):p.mustUseProperty?n[p.propertyName]=l===null?p.type===3?!1:"":l:(i=p.attributeName,h=p.attributeNamespace,l===null?n.removeAttribute(i):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?n.setAttributeNS(h,i,l):n.setAttribute(i,l))))}var P=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),D=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),q=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),Ze=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),re=Symbol.iterator;function Q(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,z;function H(n){if(z===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);z=i&&i[1]||""}return`
`+z+n}var Se=!1;function Te(n,i){if(!n||Se)return"";Se=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(O){var h=O}Reflect.construct(n,[],i)}else{try{i.call()}catch(O){h=O}n.call(i.prototype)}else{try{throw Error()}catch(O){h=O}n()}}catch(O){if(O&&h&&typeof O.stack=="string"){for(var p=O.stack.split(`
`),g=h.stack.split(`
`),w=p.length-1,A=g.length-1;1<=w&&0<=A&&p[w]!==g[A];)A--;for(;1<=w&&0<=A;w--,A--)if(p[w]!==g[A]){if(w!==1||A!==1)do if(w--,A--,0>A||p[w]!==g[A]){var R=`
`+p[w].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=w&&0<=A);break}}}finally{Se=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?H(n):""}function Pe(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=Te(n.type,!1),n;case 11:return n=Te(n.type.render,!1),n;case 1:return n=Te(n.type,!0),n;default:return""}}function Re(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case D:return"Portal";case G:return"Profiler";case U:return"StrictMode";case te:return"Suspense";case we:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case q:return(n.displayName||"Context")+".Consumer";case Y:return(n._context.displayName||"Context")+".Provider";case me:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ze:return i=n.displayName||null,i!==null?i:Re(n.type)||"Memo";case ee:i=n._payload,n=n._init;try{return Re(n(i))}catch{}}return null}function Ye(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(i);case 8:return i===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function We(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Xe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function xt(n){var i=Xe(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),h=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,g=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return p.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Vn(n){n._valueTracker||(n._valueTracker=xt(n))}function zt(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return n&&(h=Xe(n)?n.checked?"true":"false":n.value),n=h,n!==l?(i.setValue(n),!0):!1}function Qt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function un(n,i){var l=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Zt(n,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=We(i.value!=null?i.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Mr(n,i){i=i.checked,i!=null&&E(n,"checked",i,!1)}function Er(n,i){Mr(n,i);var l=We(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?ni(n,i.type,l):i.hasOwnProperty("defaultValue")&&ni(n,i.type,We(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Rr(n,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,l||i===n.value||(n.value=i),n.defaultValue=i}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function ni(n,i,l){(i!=="number"||Qt(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Gt=Array.isArray;function Yn(n,i,l,h){if(n=n.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<n.length;l++)p=i.hasOwnProperty("$"+n[l].value),n[l].selected!==p&&(n[l].selected=p),p&&h&&(n[l].defaultSelected=!0)}else{for(l=""+We(l),i=null,p=0;p<n.length;p++){if(n[p].value===l){n[p].selected=!0,h&&(n[p].defaultSelected=!0);return}i!==null||n[p].disabled||(i=n[p])}i!==null&&(i.selected=!0)}}function $i(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ri(n,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Gt(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}n._wrapperState={initialValue:We(l)}}function Bs(n,i){var l=We(i.value),h=We(i.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),i.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function Zo(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Jo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ii(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Jo(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var lr,Di=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,p){MSApp.execUnsafeLocalFunction(function(){return n(i,l,h,p)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(lr=lr||document.createElement("div"),lr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=lr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Xn(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ea=["Webkit","ms","Moz","O"];Object.keys(ur).forEach(function(n){ea.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),ur[i]=ur[n]})});function $s(n,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||ur.hasOwnProperty(n)&&ur[n]?(""+i).trim():i+"px"}function Ds(n,i){n=n.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=$s(l,i[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,p):n[l]=p}}var Os=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pt(n,i){if(i){if(Os[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ir(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function cr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Lr=null,Jt=null,In=null;function zr(n){if(n=uo(n)){if(typeof Lr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=ka(i),Lr(n.stateNode,n.type,i))}}function Be(n){Jt?In?In.push(n):In=[n]:Jt=n}function Ns(){if(Jt){var n=Jt,i=In;if(In=Jt=null,zr(n),i)for(n=0;n<i.length;n++)zr(i[n])}}function Mt(n,i){return n(i)}function Oi(){}var Ws=!1;function Ln(n,i,l){if(Ws)return n(i,l);Ws=!0;try{return Mt(n,i,l)}finally{Ws=!1,(Jt!==null||In!==null)&&(Oi(),Ns())}}function Fr(n,i){var l=n.stateNode;if(l===null)return null;var h=ka(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var Us=!1;if(c)try{var si={};Object.defineProperty(si,"passive",{get:function(){Us=!0}}),window.addEventListener("test",si,si),window.removeEventListener("test",si,si)}catch{Us=!1}function Ul(n,i,l,h,p,g,w,A,R){var O=Array.prototype.slice.call(arguments,3);try{i.apply(l,O)}catch(X){this.onError(X)}}var Ni=!1,Hs=null,jr=!1,Wi=null,Hl={onError:function(n){Ni=!0,Hs=n}};function ta(n,i,l,h,p,g,w,A,R){Ni=!1,Hs=null,Ul.apply(Hl,arguments)}function na(n,i,l,h,p,g,w,A,R){if(ta.apply(this,arguments),Ni){if(Ni){var O=Hs;Ni=!1,Hs=null}else throw Error(t(198));jr||(jr=!0,Wi=O)}}function cn(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function Vt(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function ra(n){if(cn(n)!==n)throw Error(t(188))}function hn(n){var i=n.alternate;if(!i){if(i=cn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var l=n,h=i;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return ra(p),n;if(g===h)return ra(p),i;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=g;else{for(var w=!1,A=p.child;A;){if(A===l){w=!0,l=p,h=g;break}if(A===h){w=!0,h=p,l=g;break}A=A.sibling}if(!w){for(A=g.child;A;){if(A===l){w=!0,l=g,h=p;break}if(A===h){w=!0,h=g,l=p;break}A=A.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:i}function Gs(n){return n=hn(n),n!==null?Vs(n):null}function Vs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Vs(n);if(i!==null)return i;n=n.sibling}return null}var ia=e.unstable_scheduleCallback,sa=e.unstable_cancelCallback,Ys=e.unstable_shouldYield,Gl=e.unstable_requestPaint,tt=e.unstable_now,Vl=e.unstable_getCurrentPriorityLevel,fe=e.unstable_ImmediatePriority,Xs=e.unstable_UserBlockingPriority,hr=e.unstable_NormalPriority,Yl=e.unstable_LowPriority,oa=e.unstable_IdlePriority,oi=null,vn=null;function qs(n){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(oi,n,void 0,(n.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:ql,ai=Math.log,Xl=Math.LN2;function ql(n){return n>>>=0,n===0?32:31-(ai(n)/Xl|0)|0}var Ui=64,Hi=4194304;function li(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Gi(n,i){var l=n.pendingLanes;if(l===0)return 0;var h=0,p=n.suspendedLanes,g=n.pingedLanes,w=l&268435455;if(w!==0){var A=w&~p;A!==0?h=li(A):(g&=w,g!==0&&(h=li(g)))}else w=l&~p,w!==0?h=li(w):g!==0&&(h=li(g));if(h===0)return 0;if(i!==0&&i!==h&&(i&p)===0&&(p=h&-h,g=i&-i,p>=g||p===16&&(g&4194240)!==0))return i;if((h&4)!==0&&(h|=l&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=h;0<i;)l=31-en(i),p=1<<l,h|=n[l],i&=~p;return h}function aa(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ui(n,i){for(var l=n.suspendedLanes,h=n.pingedLanes,p=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-en(g),A=1<<w,R=p[w];R===-1?((A&l)===0||(A&h)!==0)&&(p[w]=aa(A,i)):R<=i&&(n.expiredLanes|=A),g&=~A}}function Ks(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Vi(){var n=Ui;return Ui<<=1,(Ui&4194240)===0&&(Ui=64),n}function Br(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function $r(n,i,l){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-en(i),n[i]=l}function Kl(n,i){var l=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var p=31-en(l),g=1<<p;i[p]=0,h[p]=-1,n[p]=-1,l&=~g}}function Yi(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var h=31-en(l),p=1<<h;p&i|n[h]&i&&(n[h]|=i),l&=~p}}var Ge=0;function la(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ua,Qs,ca,ha,da,Zs=!1,Xi=[],qn=null,Kn=null,_n=null,ci=new Map,Qn=new Map,Zn=[],hi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function di(n,i){switch(n){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":ci.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qn.delete(i.pointerId)}}function fi(n,i,l,h,p,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[p]},i!==null&&(i=uo(i),i!==null&&Qs(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),n)}function Ql(n,i,l,h,p){switch(i){case"focusin":return qn=fi(qn,n,i,l,h,p),!0;case"dragenter":return Kn=fi(Kn,n,i,l,h,p),!0;case"mouseover":return _n=fi(_n,n,i,l,h,p),!0;case"pointerover":var g=p.pointerId;return ci.set(g,fi(ci.get(g)||null,n,i,l,h,p)),!0;case"gotpointercapture":return g=p.pointerId,Qn.set(g,fi(Qn.get(g)||null,n,i,l,h,p)),!0}return!1}function fa(n){var i=gi(n.target);if(i!==null){var l=cn(i);if(l!==null){if(i=l.tag,i===13){if(i=Vt(l),i!==null){n.blockedOn=i,da(n.priority,function(){ca(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qi(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=W(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);wt=h,l.target.dispatchEvent(h),wt=null}else return i=uo(l),i!==null&&Qs(i),n.blockedOn=l,!1;i.shift()}return!0}function pa(n,i,l){qi(n)&&l.delete(i)}function Zl(){Zs=!1,qn!==null&&qi(qn)&&(qn=null),Kn!==null&&qi(Kn)&&(Kn=null),_n!==null&&qi(_n)&&(_n=null),ci.forEach(pa),Qn.forEach(pa)}function pi(n,i){n.blockedOn===i&&(n.blockedOn=null,Zs||(Zs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zl)))}function mi(n){function i(p){return pi(p,n)}if(0<Xi.length){pi(Xi[0],n);for(var l=1;l<Xi.length;l++){var h=Xi[l];h.blockedOn===n&&(h.blockedOn=null)}}for(qn!==null&&pi(qn,n),Kn!==null&&pi(Kn,n),_n!==null&&pi(_n,n),ci.forEach(i),Qn.forEach(i),l=0;l<Zn.length;l++)h=Zn[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<Zn.length&&(l=Zn[0],l.blockedOn===null);)fa(l),l.blockedOn===null&&Zn.shift()}var Dr=P.ReactCurrentBatchConfig,Ki=!0;function Jl(n,i,l,h){var p=Ge,g=Dr.transition;Dr.transition=null;try{Ge=1,L(n,i,l,h)}finally{Ge=p,Dr.transition=g}}function k(n,i,l,h){var p=Ge,g=Dr.transition;Dr.transition=null;try{Ge=4,L(n,i,l,h)}finally{Ge=p,Dr.transition=g}}function L(n,i,l,h){if(Ki){var p=W(n,i,l,h);if(p===null)hu(n,i,h,$,l),di(n,h);else if(Ql(p,n,i,l,h))h.stopPropagation();else if(di(n,h),i&4&&-1<hi.indexOf(n)){for(;p!==null;){var g=uo(p);if(g!==null&&ua(g),g=W(n,i,l,h),g===null&&hu(n,i,h,$,l),g===p)break;p=g}p!==null&&h.stopPropagation()}else hu(n,i,h,null,l)}}var $=null;function W(n,i,l,h){if($=null,n=cr(h),n=gi(n),n!==null)if(i=cn(n),i===null)n=null;else if(l=i.tag,l===13){if(n=Vt(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return $=n,null}function se(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vl()){case fe:return 1;case Xs:return 4;case hr:case Yl:return 16;case oa:return 536870912;default:return 16}default:return 16}}var ke=null,ae=null,ye=null;function be(){if(ye)return ye;var n,i=ae,l=i.length,h,p="value"in ke?ke.value:ke.textContent,g=p.length;for(n=0;n<l&&i[n]===p[n];n++);var w=l-n;for(h=1;h<=w&&i[l-h]===p[g-h];h++);return ye=p.slice(n,1<h?1-h:void 0)}function ue(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ne(){return!0}function Me(){return!1}function Ae(n){function i(l,h,p,g,w){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(l=n[A],this[A]=l?l(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ne:Me,this.isPropagationStopped=Me,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ne)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ne)},persist:function(){},isPersistent:Ne}),i}var Ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ie=Ae(Ee),ce=ie({},Ee,{view:0,detail:0}),Le=Ae(ce),bt,$e,je,vt=ie({},ce,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ji,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==je&&(je&&n.type==="mousemove"?(bt=n.screenX-je.screenX,$e=n.screenY-je.screenY):$e=bt=0,je=n),bt)},movementY:function(n){return"movementY"in n?n.movementY:$e}}),Ct=Ae(vt),ft=ie({},vt,{dataTransfer:0}),nt=Ae(ft),dr=ie({},ce,{relatedTarget:0}),Js=Ae(dr),eu=ie({},Ee,{animationName:0,elapsedTime:0,pseudoElement:0}),wn=Ae(eu),ma=ie({},Ee,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),De=Ae(ma),pt=ie({},Ee,{data:0}),Yt=Ae(pt),Jn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ga={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zi(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Qi[n])?!!i[n]:!1}function Ji(){return Zi}var um=ie({},ce,{key:function(n){if(n.key){var i=Jn[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ue(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ga[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ji,charCode:function(n){return n.type==="keypress"?ue(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ue(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),cm=Ae(um),hm=ie({},vt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oh=Ae(hm),dm=ie({},ce,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ji}),fm=Ae(dm),pm=ie({},Ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),mm=Ae(pm),gm=ie({},vt,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ym=Ae(gm),xm=[9,13,27,32],tu=c&&"CompositionEvent"in window,eo=null;c&&"documentMode"in document&&(eo=document.documentMode);var vm=c&&"TextEvent"in window&&!eo,Nh=c&&(!tu||eo&&8<eo&&11>=eo),Wh=" ",Uh=!1;function Hh(n,i){switch(n){case"keyup":return xm.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var es=!1;function _m(n,i){switch(n){case"compositionend":return Gh(i);case"keypress":return i.which!==32?null:(Uh=!0,Wh);case"textInput":return n=i.data,n===Wh&&Uh?null:n;default:return null}}function wm(n,i){if(es)return n==="compositionend"||!tu&&Hh(n,i)?(n=be(),ye=ae=ke=null,es=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Nh&&i.locale!=="ko"?null:i.data;default:return null}}var bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!bm[n.type]:i==="textarea"}function Yh(n,i,l,h){Be(h),i=wa(i,"onChange"),0<i.length&&(l=new Ie("onChange","change",null,l,h),n.push({event:l,listeners:i}))}var to=null,no=null;function Sm(n){hd(n,0)}function ya(n){var i=ss(n);if(zt(i))return n}function km(n,i){if(n==="change")return i}var Xh=!1;if(c){var nu;if(c){var ru="oninput"in document;if(!ru){var qh=document.createElement("div");qh.setAttribute("oninput","return;"),ru=typeof qh.oninput=="function"}nu=ru}else nu=!1;Xh=nu&&(!document.documentMode||9<document.documentMode)}function Kh(){to&&(to.detachEvent("onpropertychange",Qh),no=to=null)}function Qh(n){if(n.propertyName==="value"&&ya(no)){var i=[];Yh(i,no,n,cr(n)),Ln(Sm,i)}}function Cm(n,i,l){n==="focusin"?(Kh(),to=i,no=l,to.attachEvent("onpropertychange",Qh)):n==="focusout"&&Kh()}function Am(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ya(no)}function Tm(n,i){if(n==="click")return ya(i)}function Pm(n,i){if(n==="input"||n==="change")return ya(i)}function Mm(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var zn=typeof Object.is=="function"?Object.is:Mm;function ro(n,i){if(zn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!d.call(i,p)||!zn(n[p],i[p]))return!1}return!0}function Zh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Jh(n,i){var l=Zh(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=i&&h>=i)return{node:l,offset:i-n};n=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zh(l)}}function ed(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?ed(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function td(){for(var n=window,i=Qt();i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=Qt(n.document)}return i}function iu(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Em(n){var i=td(),l=n.focusedElem,h=n.selectionRange;if(i!==l&&l&&l.ownerDocument&&ed(l.ownerDocument.documentElement,l)){if(h!==null&&iu(l)){if(i=h.start,n=h.end,n===void 0&&(n=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(n,l.value.length);else if(n=(i=l.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var p=l.textContent.length,g=Math.min(h.start,p);h=h.end===void 0?g:Math.min(h.end,p),!n.extend&&g>h&&(p=h,h=g,g=p),p=Jh(l,g);var w=Jh(l,h);p&&w&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),n.removeAllRanges(),g>h?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=l;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)n=i[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Rm=c&&"documentMode"in document&&11>=document.documentMode,ts=null,su=null,io=null,ou=!1;function nd(n,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ou||ts==null||ts!==Qt(h)||(h=ts,"selectionStart"in h&&iu(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),io&&ro(io,h)||(io=h,h=wa(su,"onSelect"),0<h.length&&(i=new Ie("onSelect","select",null,i,l),n.push({event:i,listeners:h}),i.target=ts)))}function xa(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var ns={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionend:xa("Transition","TransitionEnd")},au={},rd={};c&&(rd=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function va(n){if(au[n])return au[n];if(!ns[n])return n;var i=ns[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in rd)return au[n]=i[l];return n}var id=va("animationend"),sd=va("animationiteration"),od=va("animationstart"),ad=va("transitionend"),ld=new Map,ud="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(n,i){ld.set(n,i),a(i,[n])}for(var lu=0;lu<ud.length;lu++){var uu=ud[lu],Im=uu.toLowerCase(),Lm=uu[0].toUpperCase()+uu.slice(1);Or(Im,"on"+Lm)}Or(id,"onAnimationEnd"),Or(sd,"onAnimationIteration"),Or(od,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(ad,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var so="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zm=new Set("cancel close invalid load scroll toggle".split(" ").concat(so));function cd(n,i,l){var h=n.type||"unknown-event";n.currentTarget=l,na(h,i,void 0,n),n.currentTarget=null}function hd(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],p=h.event;h=h.listeners;e:{var g=void 0;if(i)for(var w=h.length-1;0<=w;w--){var A=h[w],R=A.instance,O=A.currentTarget;if(A=A.listener,R!==g&&p.isPropagationStopped())break e;cd(p,A,O),g=R}else for(w=0;w<h.length;w++){if(A=h[w],R=A.instance,O=A.currentTarget,A=A.listener,R!==g&&p.isPropagationStopped())break e;cd(p,A,O),g=R}}}if(jr)throw n=Wi,jr=!1,Wi=null,n}function rt(n,i){var l=i[yu];l===void 0&&(l=i[yu]=new Set);var h=n+"__bubble";l.has(h)||(dd(i,n,2,!1),l.add(h))}function cu(n,i,l){var h=0;i&&(h|=4),dd(l,n,h,i)}var _a="_reactListening"+Math.random().toString(36).slice(2);function oo(n){if(!n[_a]){n[_a]=!0,s.forEach(function(l){l!=="selectionchange"&&(zm.has(l)||cu(l,!1,n),cu(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[_a]||(i[_a]=!0,cu("selectionchange",!1,i))}}function dd(n,i,l,h){switch(se(i)){case 1:var p=Jl;break;case 4:p=k;break;default:p=L}l=p.bind(null,i,l,n),p=void 0,!Us||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?n.addEventListener(i,l,{capture:!0,passive:p}):n.addEventListener(i,l,!0):p!==void 0?n.addEventListener(i,l,{passive:p}):n.addEventListener(i,l,!1)}function hu(n,i,l,h,p){var g=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var A=h.stateNode.containerInfo;if(A===p||A.nodeType===8&&A.parentNode===p)break;if(w===4)for(w=h.return;w!==null;){var R=w.tag;if((R===3||R===4)&&(R=w.stateNode.containerInfo,R===p||R.nodeType===8&&R.parentNode===p))return;w=w.return}for(;A!==null;){if(w=gi(A),w===null)return;if(R=w.tag,R===5||R===6){h=g=w;continue e}A=A.parentNode}}h=h.return}Ln(function(){var O=g,X=cr(l),K=[];e:{var V=ld.get(n);if(V!==void 0){var oe=Ie,he=n;switch(n){case"keypress":if(ue(l)===0)break e;case"keydown":case"keyup":oe=cm;break;case"focusin":he="focus",oe=Js;break;case"focusout":he="blur",oe=Js;break;case"beforeblur":case"afterblur":oe=Js;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Ct;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=nt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=fm;break;case id:case sd:case od:oe=wn;break;case ad:oe=mm;break;case"scroll":oe=Le;break;case"wheel":oe=ym;break;case"copy":case"cut":case"paste":oe=De;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Oh}var de=(i&4)!==0,_t=!de&&n==="scroll",j=de?V!==null?V+"Capture":null:V;de=[];for(var I=O,B;I!==null;){B=I;var Z=B.stateNode;if(B.tag===5&&Z!==null&&(B=Z,j!==null&&(Z=Fr(I,j),Z!=null&&de.push(ao(I,Z,B)))),_t)break;I=I.return}0<de.length&&(V=new oe(V,he,null,l,X),K.push({event:V,listeners:de}))}}if((i&7)===0){e:{if(V=n==="mouseover"||n==="pointerover",oe=n==="mouseout"||n==="pointerout",V&&l!==wt&&(he=l.relatedTarget||l.fromElement)&&(gi(he)||he[fr]))break e;if((oe||V)&&(V=X.window===X?X:(V=X.ownerDocument)?V.defaultView||V.parentWindow:window,oe?(he=l.relatedTarget||l.toElement,oe=O,he=he?gi(he):null,he!==null&&(_t=cn(he),he!==_t||he.tag!==5&&he.tag!==6)&&(he=null)):(oe=null,he=O),oe!==he)){if(de=Ct,Z="onMouseLeave",j="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(de=Oh,Z="onPointerLeave",j="onPointerEnter",I="pointer"),_t=oe==null?V:ss(oe),B=he==null?V:ss(he),V=new de(Z,I+"leave",oe,l,X),V.target=_t,V.relatedTarget=B,Z=null,gi(X)===O&&(de=new de(j,I+"enter",he,l,X),de.target=B,de.relatedTarget=_t,Z=de),_t=Z,oe&&he)t:{for(de=oe,j=he,I=0,B=de;B;B=rs(B))I++;for(B=0,Z=j;Z;Z=rs(Z))B++;for(;0<I-B;)de=rs(de),I--;for(;0<B-I;)j=rs(j),B--;for(;I--;){if(de===j||j!==null&&de===j.alternate)break t;de=rs(de),j=rs(j)}de=null}else de=null;oe!==null&&fd(K,V,oe,de,!1),he!==null&&_t!==null&&fd(K,_t,he,de,!0)}}e:{if(V=O?ss(O):window,oe=V.nodeName&&V.nodeName.toLowerCase(),oe==="select"||oe==="input"&&V.type==="file")var pe=km;else if(Vh(V))if(Xh)pe=Pm;else{pe=Am;var ve=Cm}else(oe=V.nodeName)&&oe.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(pe=Tm);if(pe&&(pe=pe(n,O))){Yh(K,pe,l,X);break e}ve&&ve(n,V,O),n==="focusout"&&(ve=V._wrapperState)&&ve.controlled&&V.type==="number"&&ni(V,"number",V.value)}switch(ve=O?ss(O):window,n){case"focusin":(Vh(ve)||ve.contentEditable==="true")&&(ts=ve,su=O,io=null);break;case"focusout":io=su=ts=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,nd(K,l,X);break;case"selectionchange":if(Rm)break;case"keydown":case"keyup":nd(K,l,X)}var _e;if(tu)e:{switch(n){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else es?Hh(n,l)&&(Ce="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Ce="onCompositionStart");Ce&&(Nh&&l.locale!=="ko"&&(es||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&es&&(_e=be()):(ke=X,ae="value"in ke?ke.value:ke.textContent,es=!0)),ve=wa(O,Ce),0<ve.length&&(Ce=new Yt(Ce,n,null,l,X),K.push({event:Ce,listeners:ve}),_e?Ce.data=_e:(_e=Gh(l),_e!==null&&(Ce.data=_e)))),(_e=vm?_m(n,l):wm(n,l))&&(O=wa(O,"onBeforeInput"),0<O.length&&(X=new Yt("onBeforeInput","beforeinput",null,l,X),K.push({event:X,listeners:O}),X.data=_e))}hd(K,i)})}function ao(n,i,l){return{instance:n,listener:i,currentTarget:l}}function wa(n,i){for(var l=i+"Capture",h=[];n!==null;){var p=n,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=Fr(n,l),g!=null&&h.unshift(ao(n,g,p)),g=Fr(n,i),g!=null&&h.push(ao(n,g,p))),n=n.return}return h}function rs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function fd(n,i,l,h,p){for(var g=i._reactName,w=[];l!==null&&l!==h;){var A=l,R=A.alternate,O=A.stateNode;if(R!==null&&R===h)break;A.tag===5&&O!==null&&(A=O,p?(R=Fr(l,g),R!=null&&w.unshift(ao(l,R,A))):p||(R=Fr(l,g),R!=null&&w.push(ao(l,R,A)))),l=l.return}w.length!==0&&n.push({event:i,listeners:w})}var Fm=/\r\n?/g,jm=/\u0000|\uFFFD/g;function pd(n){return(typeof n=="string"?n:""+n).replace(Fm,`
`).replace(jm,"")}function ba(n,i,l){if(i=pd(i),pd(n)!==i&&l)throw Error(t(425))}function Sa(){}var du=null,fu=null;function pu(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var mu=typeof setTimeout=="function"?setTimeout:void 0,Bm=typeof clearTimeout=="function"?clearTimeout:void 0,md=typeof Promise=="function"?Promise:void 0,$m=typeof queueMicrotask=="function"?queueMicrotask:typeof md<"u"?function(n){return md.resolve(null).then(n).catch(Dm)}:mu;function Dm(n){setTimeout(function(){throw n})}function gu(n,i){var l=i,h=0;do{var p=l.nextSibling;if(n.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){n.removeChild(p),mi(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);mi(i)}function Nr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function gd(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}var is=Math.random().toString(36).slice(2),er="__reactFiber$"+is,lo="__reactProps$"+is,fr="__reactContainer$"+is,yu="__reactEvents$"+is,Om="__reactListeners$"+is,Nm="__reactHandles$"+is;function gi(n){var i=n[er];if(i)return i;for(var l=n.parentNode;l;){if(i=l[fr]||l[er]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=gd(n);n!==null;){if(l=n[er])return l;n=gd(n)}return i}n=l,l=n.parentNode}return null}function uo(n){return n=n[er]||n[fr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ss(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ka(n){return n[lo]||null}var xu=[],os=-1;function Wr(n){return{current:n}}function it(n){0>os||(n.current=xu[os],xu[os]=null,os--)}function Je(n,i){os++,xu[os]=n.current,n.current=i}var Ur={},Dt=Wr(Ur),tn=Wr(!1),yi=Ur;function as(n,i){var l=n.type.contextTypes;if(!l)return Ur;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in l)p[g]=i[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=p),p}function nn(n){return n=n.childContextTypes,n!=null}function Ca(){it(tn),it(Dt)}function yd(n,i,l){if(Dt.current!==Ur)throw Error(t(168));Je(Dt,i),Je(tn,l)}function xd(n,i,l){var h=n.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in i))throw Error(t(108,Ye(n)||"Unknown",p));return ie({},l,h)}function Aa(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ur,yi=Dt.current,Je(Dt,n),Je(tn,tn.current),!0}function vd(n,i,l){var h=n.stateNode;if(!h)throw Error(t(169));l?(n=xd(n,i,yi),h.__reactInternalMemoizedMergedChildContext=n,it(tn),it(Dt),Je(Dt,n)):it(tn),Je(tn,l)}var pr=null,Ta=!1,vu=!1;function _d(n){pr===null?pr=[n]:pr.push(n)}function Wm(n){Ta=!0,_d(n)}function Hr(){if(!vu&&pr!==null){vu=!0;var n=0,i=Ge;try{var l=pr;for(Ge=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}pr=null,Ta=!1}catch(p){throw pr!==null&&(pr=pr.slice(n+1)),ia(fe,Hr),p}finally{Ge=i,vu=!1}}return null}var ls=[],us=0,Pa=null,Ma=0,bn=[],Sn=0,xi=null,mr=1,gr="";function vi(n,i){ls[us++]=Ma,ls[us++]=Pa,Pa=n,Ma=i}function wd(n,i,l){bn[Sn++]=mr,bn[Sn++]=gr,bn[Sn++]=xi,xi=n;var h=mr;n=gr;var p=32-en(h)-1;h&=~(1<<p),l+=1;var g=32-en(i)+p;if(30<g){var w=p-p%5;g=(h&(1<<w)-1).toString(32),h>>=w,p-=w,mr=1<<32-en(i)+p|l<<p|h,gr=g+n}else mr=1<<g|l<<p|h,gr=n}function _u(n){n.return!==null&&(vi(n,1),wd(n,1,0))}function wu(n){for(;n===Pa;)Pa=ls[--us],ls[us]=null,Ma=ls[--us],ls[us]=null;for(;n===xi;)xi=bn[--Sn],bn[Sn]=null,gr=bn[--Sn],bn[Sn]=null,mr=bn[--Sn],bn[Sn]=null}var dn=null,fn=null,at=!1,Fn=null;function bd(n,i){var l=Tn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=n,i=n.deletions,i===null?(n.deletions=[l],n.flags|=16):i.push(l)}function Sd(n,i){switch(n.tag){case 5:var l=n.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,dn=n,fn=Nr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,dn=n,fn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=xi!==null?{id:mr,overflow:gr}:null,n.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Tn(18,null,null,0),l.stateNode=i,l.return=n,n.child=l,dn=n,fn=null,!0):!1;default:return!1}}function bu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Su(n){if(at){var i=fn;if(i){var l=i;if(!Sd(n,i)){if(bu(n))throw Error(t(418));i=Nr(l.nextSibling);var h=dn;i&&Sd(n,i)?bd(h,l):(n.flags=n.flags&-4097|2,at=!1,dn=n)}}else{if(bu(n))throw Error(t(418));n.flags=n.flags&-4097|2,at=!1,dn=n}}}function kd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;dn=n}function Ea(n){if(n!==dn)return!1;if(!at)return kd(n),at=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!pu(n.type,n.memoizedProps)),i&&(i=fn)){if(bu(n))throw Cd(),Error(t(418));for(;i;)bd(n,i),i=Nr(i.nextSibling)}if(kd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(i===0){fn=Nr(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}n=n.nextSibling}fn=null}}else fn=dn?Nr(n.stateNode.nextSibling):null;return!0}function Cd(){for(var n=fn;n;)n=Nr(n.nextSibling)}function cs(){fn=dn=null,at=!1}function ku(n){Fn===null?Fn=[n]:Fn.push(n)}var Um=P.ReactCurrentBatchConfig;function co(n,i,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,n));var p=h,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(w){var A=p.refs;w===null?delete A[g]:A[g]=w},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function Ra(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Ad(n){var i=n._init;return i(n._payload)}function Td(n){function i(j,I){if(n){var B=j.deletions;B===null?(j.deletions=[I],j.flags|=16):B.push(I)}}function l(j,I){if(!n)return null;for(;I!==null;)i(j,I),I=I.sibling;return null}function h(j,I){for(j=new Map;I!==null;)I.key!==null?j.set(I.key,I):j.set(I.index,I),I=I.sibling;return j}function p(j,I){return j=Zr(j,I),j.index=0,j.sibling=null,j}function g(j,I,B){return j.index=B,n?(B=j.alternate,B!==null?(B=B.index,B<I?(j.flags|=2,I):B):(j.flags|=2,I)):(j.flags|=1048576,I)}function w(j){return n&&j.alternate===null&&(j.flags|=2),j}function A(j,I,B,Z){return I===null||I.tag!==6?(I=mc(B,j.mode,Z),I.return=j,I):(I=p(I,B),I.return=j,I)}function R(j,I,B,Z){var pe=B.type;return pe===F?X(j,I,B.props.children,Z,B.key):I!==null&&(I.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===ee&&Ad(pe)===I.type)?(Z=p(I,B.props),Z.ref=co(j,I,B),Z.return=j,Z):(Z=tl(B.type,B.key,B.props,null,j.mode,Z),Z.ref=co(j,I,B),Z.return=j,Z)}function O(j,I,B,Z){return I===null||I.tag!==4||I.stateNode.containerInfo!==B.containerInfo||I.stateNode.implementation!==B.implementation?(I=gc(B,j.mode,Z),I.return=j,I):(I=p(I,B.children||[]),I.return=j,I)}function X(j,I,B,Z,pe){return I===null||I.tag!==7?(I=Ti(B,j.mode,Z,pe),I.return=j,I):(I=p(I,B),I.return=j,I)}function K(j,I,B){if(typeof I=="string"&&I!==""||typeof I=="number")return I=mc(""+I,j.mode,B),I.return=j,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case N:return B=tl(I.type,I.key,I.props,null,j.mode,B),B.ref=co(j,null,I),B.return=j,B;case D:return I=gc(I,j.mode,B),I.return=j,I;case ee:var Z=I._init;return K(j,Z(I._payload),B)}if(Gt(I)||Q(I))return I=Ti(I,j.mode,B,null),I.return=j,I;Ra(j,I)}return null}function V(j,I,B,Z){var pe=I!==null?I.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return pe!==null?null:A(j,I,""+B,Z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case N:return B.key===pe?R(j,I,B,Z):null;case D:return B.key===pe?O(j,I,B,Z):null;case ee:return pe=B._init,V(j,I,pe(B._payload),Z)}if(Gt(B)||Q(B))return pe!==null?null:X(j,I,B,Z,null);Ra(j,B)}return null}function oe(j,I,B,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return j=j.get(B)||null,A(I,j,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:return j=j.get(Z.key===null?B:Z.key)||null,R(I,j,Z,pe);case D:return j=j.get(Z.key===null?B:Z.key)||null,O(I,j,Z,pe);case ee:var ve=Z._init;return oe(j,I,B,ve(Z._payload),pe)}if(Gt(Z)||Q(Z))return j=j.get(B)||null,X(I,j,Z,pe,null);Ra(I,Z)}return null}function he(j,I,B,Z){for(var pe=null,ve=null,_e=I,Ce=I=0,It=null;_e!==null&&Ce<B.length;Ce++){_e.index>Ce?(It=_e,_e=null):It=_e.sibling;var Ve=V(j,_e,B[Ce],Z);if(Ve===null){_e===null&&(_e=It);break}n&&_e&&Ve.alternate===null&&i(j,_e),I=g(Ve,I,Ce),ve===null?pe=Ve:ve.sibling=Ve,ve=Ve,_e=It}if(Ce===B.length)return l(j,_e),at&&vi(j,Ce),pe;if(_e===null){for(;Ce<B.length;Ce++)_e=K(j,B[Ce],Z),_e!==null&&(I=g(_e,I,Ce),ve===null?pe=_e:ve.sibling=_e,ve=_e);return at&&vi(j,Ce),pe}for(_e=h(j,_e);Ce<B.length;Ce++)It=oe(_e,j,Ce,B[Ce],Z),It!==null&&(n&&It.alternate!==null&&_e.delete(It.key===null?Ce:It.key),I=g(It,I,Ce),ve===null?pe=It:ve.sibling=It,ve=It);return n&&_e.forEach(function(Jr){return i(j,Jr)}),at&&vi(j,Ce),pe}function de(j,I,B,Z){var pe=Q(B);if(typeof pe!="function")throw Error(t(150));if(B=pe.call(B),B==null)throw Error(t(151));for(var ve=pe=null,_e=I,Ce=I=0,It=null,Ve=B.next();_e!==null&&!Ve.done;Ce++,Ve=B.next()){_e.index>Ce?(It=_e,_e=null):It=_e.sibling;var Jr=V(j,_e,Ve.value,Z);if(Jr===null){_e===null&&(_e=It);break}n&&_e&&Jr.alternate===null&&i(j,_e),I=g(Jr,I,Ce),ve===null?pe=Jr:ve.sibling=Jr,ve=Jr,_e=It}if(Ve.done)return l(j,_e),at&&vi(j,Ce),pe;if(_e===null){for(;!Ve.done;Ce++,Ve=B.next())Ve=K(j,Ve.value,Z),Ve!==null&&(I=g(Ve,I,Ce),ve===null?pe=Ve:ve.sibling=Ve,ve=Ve);return at&&vi(j,Ce),pe}for(_e=h(j,_e);!Ve.done;Ce++,Ve=B.next())Ve=oe(_e,j,Ce,Ve.value,Z),Ve!==null&&(n&&Ve.alternate!==null&&_e.delete(Ve.key===null?Ce:Ve.key),I=g(Ve,I,Ce),ve===null?pe=Ve:ve.sibling=Ve,ve=Ve);return n&&_e.forEach(function(bg){return i(j,bg)}),at&&vi(j,Ce),pe}function _t(j,I,B,Z){if(typeof B=="object"&&B!==null&&B.type===F&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case N:e:{for(var pe=B.key,ve=I;ve!==null;){if(ve.key===pe){if(pe=B.type,pe===F){if(ve.tag===7){l(j,ve.sibling),I=p(ve,B.props.children),I.return=j,j=I;break e}}else if(ve.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===ee&&Ad(pe)===ve.type){l(j,ve.sibling),I=p(ve,B.props),I.ref=co(j,ve,B),I.return=j,j=I;break e}l(j,ve);break}else i(j,ve);ve=ve.sibling}B.type===F?(I=Ti(B.props.children,j.mode,Z,B.key),I.return=j,j=I):(Z=tl(B.type,B.key,B.props,null,j.mode,Z),Z.ref=co(j,I,B),Z.return=j,j=Z)}return w(j);case D:e:{for(ve=B.key;I!==null;){if(I.key===ve)if(I.tag===4&&I.stateNode.containerInfo===B.containerInfo&&I.stateNode.implementation===B.implementation){l(j,I.sibling),I=p(I,B.children||[]),I.return=j,j=I;break e}else{l(j,I);break}else i(j,I);I=I.sibling}I=gc(B,j.mode,Z),I.return=j,j=I}return w(j);case ee:return ve=B._init,_t(j,I,ve(B._payload),Z)}if(Gt(B))return he(j,I,B,Z);if(Q(B))return de(j,I,B,Z);Ra(j,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,I!==null&&I.tag===6?(l(j,I.sibling),I=p(I,B),I.return=j,j=I):(l(j,I),I=mc(B,j.mode,Z),I.return=j,j=I),w(j)):l(j,I)}return _t}var hs=Td(!0),Pd=Td(!1),Ia=Wr(null),La=null,ds=null,Cu=null;function Au(){Cu=ds=La=null}function Tu(n){var i=Ia.current;it(Ia),n._currentValue=i}function Pu(n,i,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===l)break;n=n.return}}function fs(n,i){La=n,Cu=ds=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(rn=!0),n.firstContext=null)}function kn(n){var i=n._currentValue;if(Cu!==n)if(n={context:n,memoizedValue:i,next:null},ds===null){if(La===null)throw Error(t(308));ds=n,La.dependencies={lanes:0,firstContext:n}}else ds=ds.next=n;return i}var _i=null;function Mu(n){_i===null?_i=[n]:_i.push(n)}function Md(n,i,l,h){var p=i.interleaved;return p===null?(l.next=l,Mu(i)):(l.next=p.next,p.next=l),i.interleaved=l,yr(n,h)}function yr(n,i){n.lanes|=i;var l=n.alternate;for(l!==null&&(l.lanes|=i),l=n,n=n.return;n!==null;)n.childLanes|=i,l=n.alternate,l!==null&&(l.childLanes|=i),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Gr=!1;function Eu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ed(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function xr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Vr(n,i,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(He&2)!==0){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,yr(n,l)}return p=h.interleaved,p===null?(i.next=i,Mu(h)):(i.next=p.next,p.next=i),h.interleaved=i,yr(n,l)}function za(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,Yi(n,l)}}function Rd(n,i){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?p=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?p=g=i:g=g.next=i}else p=g=i;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function Fa(n,i,l,h){var p=n.updateQueue;Gr=!1;var g=p.firstBaseUpdate,w=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var R=A,O=R.next;R.next=null,w===null?g=O:w.next=O,w=R;var X=n.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==w&&(A===null?X.firstBaseUpdate=O:A.next=O,X.lastBaseUpdate=R))}if(g!==null){var K=p.baseState;w=0,X=O=R=null,A=g;do{var V=A.lane,oe=A.eventTime;if((h&V)===V){X!==null&&(X=X.next={eventTime:oe,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var he=n,de=A;switch(V=i,oe=l,de.tag){case 1:if(he=de.payload,typeof he=="function"){K=he.call(oe,K,V);break e}K=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,V=typeof he=="function"?he.call(oe,K,V):he,V==null)break e;K=ie({},K,V);break e;case 2:Gr=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,V=p.effects,V===null?p.effects=[A]:V.push(A))}else oe={eventTime:oe,lane:V,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?(O=X=oe,R=K):X=X.next=oe,w|=V;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;V=A,A=V.next,V.next=null,p.lastBaseUpdate=V,p.shared.pending=null}}while(!0);if(X===null&&(R=K),p.baseState=R,p.firstBaseUpdate=O,p.lastBaseUpdate=X,i=p.shared.interleaved,i!==null){p=i;do w|=p.lane,p=p.next;while(p!==i)}else g===null&&(p.shared.lanes=0);Si|=w,n.lanes=w,n.memoizedState=K}}function Id(n,i,l){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var h=n[i],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var ho={},tr=Wr(ho),fo=Wr(ho),po=Wr(ho);function wi(n){if(n===ho)throw Error(t(174));return n}function Ru(n,i){switch(Je(po,i),Je(fo,n),Je(tr,ho),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ii(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ii(i,n)}it(tr),Je(tr,i)}function ps(){it(tr),it(fo),it(po)}function Ld(n){wi(po.current);var i=wi(tr.current),l=ii(i,n.type);i!==l&&(Je(fo,n),Je(tr,l))}function Iu(n){fo.current===n&&(it(tr),it(fo))}var ut=Wr(0);function ja(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Lu=[];function zu(){for(var n=0;n<Lu.length;n++)Lu[n]._workInProgressVersionPrimary=null;Lu.length=0}var Ba=P.ReactCurrentDispatcher,Fu=P.ReactCurrentBatchConfig,bi=0,ct=null,At=null,Et=null,$a=!1,mo=!1,go=0,Hm=0;function Ot(){throw Error(t(321))}function ju(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!zn(n[l],i[l]))return!1;return!0}function Bu(n,i,l,h,p,g){if(bi=g,ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ba.current=n===null||n.memoizedState===null?Xm:qm,n=l(h,p),mo){g=0;do{if(mo=!1,go=0,25<=g)throw Error(t(301));g+=1,Et=At=null,i.updateQueue=null,Ba.current=Km,n=l(h,p)}while(mo)}if(Ba.current=Na,i=At!==null&&At.next!==null,bi=0,Et=At=ct=null,$a=!1,i)throw Error(t(300));return n}function $u(){var n=go!==0;return go=0,n}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?ct.memoizedState=Et=n:Et=Et.next=n,Et}function Cn(){if(At===null){var n=ct.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var i=Et===null?ct.memoizedState:Et.next;if(i!==null)Et=i,At=n;else{if(n===null)throw Error(t(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Et===null?ct.memoizedState=Et=n:Et=Et.next=n}return Et}function yo(n,i){return typeof i=="function"?i(n):i}function Du(n){var i=Cn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=At,p=h.baseQueue,g=l.pending;if(g!==null){if(p!==null){var w=p.next;p.next=g.next,g.next=w}h.baseQueue=p=g,l.pending=null}if(p!==null){g=p.next,h=h.baseState;var A=w=null,R=null,O=g;do{var X=O.lane;if((bi&X)===X)R!==null&&(R=R.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),h=O.hasEagerState?O.eagerState:n(h,O.action);else{var K={lane:X,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};R===null?(A=R=K,w=h):R=R.next=K,ct.lanes|=X,Si|=X}O=O.next}while(O!==null&&O!==g);R===null?w=h:R.next=A,zn(h,i.memoizedState)||(rn=!0),i.memoizedState=h,i.baseState=w,i.baseQueue=R,l.lastRenderedState=h}if(n=l.interleaved,n!==null){p=n;do g=p.lane,ct.lanes|=g,Si|=g,p=p.next;while(p!==n)}else p===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Ou(n){var i=Cn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=l.dispatch,p=l.pending,g=i.memoizedState;if(p!==null){l.pending=null;var w=p=p.next;do g=n(g,w.action),w=w.next;while(w!==p);zn(g,i.memoizedState)||(rn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,h]}function zd(){}function Fd(n,i){var l=ct,h=Cn(),p=i(),g=!zn(h.memoizedState,p);if(g&&(h.memoizedState=p,rn=!0),h=h.queue,Nu($d.bind(null,l,h,n),[n]),h.getSnapshot!==i||g||Et!==null&&Et.memoizedState.tag&1){if(l.flags|=2048,xo(9,Bd.bind(null,l,h,p,i),void 0,null),Rt===null)throw Error(t(349));(bi&30)!==0||jd(l,i,p)}return p}function jd(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=ct.updateQueue,i===null?(i={lastEffect:null,stores:null},ct.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function Bd(n,i,l,h){i.value=l,i.getSnapshot=h,Dd(i)&&Od(n)}function $d(n,i,l){return l(function(){Dd(i)&&Od(n)})}function Dd(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!zn(n,l)}catch{return!0}}function Od(n){var i=yr(n,1);i!==null&&Dn(i,n,1,-1)}function Nd(n){var i=nr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:n},i.queue=n,n=n.dispatch=Ym.bind(null,ct,n),[i.memoizedState,n]}function xo(n,i,l,h){return n={tag:n,create:i,destroy:l,deps:h,next:null},i=ct.updateQueue,i===null?(i={lastEffect:null,stores:null},ct.updateQueue=i,i.lastEffect=n.next=n):(l=i.lastEffect,l===null?i.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,i.lastEffect=n)),n}function Wd(){return Cn().memoizedState}function Da(n,i,l,h){var p=nr();ct.flags|=n,p.memoizedState=xo(1|i,l,void 0,h===void 0?null:h)}function Oa(n,i,l,h){var p=Cn();h=h===void 0?null:h;var g=void 0;if(At!==null){var w=At.memoizedState;if(g=w.destroy,h!==null&&ju(h,w.deps)){p.memoizedState=xo(i,l,g,h);return}}ct.flags|=n,p.memoizedState=xo(1|i,l,g,h)}function Ud(n,i){return Da(8390656,8,n,i)}function Nu(n,i){return Oa(2048,8,n,i)}function Hd(n,i){return Oa(4,2,n,i)}function Gd(n,i){return Oa(4,4,n,i)}function Vd(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Yd(n,i,l){return l=l!=null?l.concat([n]):null,Oa(4,4,Vd.bind(null,i,n),l)}function Wu(){}function Xd(n,i){var l=Cn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&ju(i,h[1])?h[0]:(l.memoizedState=[n,i],n)}function qd(n,i){var l=Cn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&ju(i,h[1])?h[0]:(n=n(),l.memoizedState=[n,i],n)}function Kd(n,i,l){return(bi&21)===0?(n.baseState&&(n.baseState=!1,rn=!0),n.memoizedState=l):(zn(l,i)||(l=Vi(),ct.lanes|=l,Si|=l,n.baseState=!0),i)}function Gm(n,i){var l=Ge;Ge=l!==0&&4>l?l:4,n(!0);var h=Fu.transition;Fu.transition={};try{n(!1),i()}finally{Ge=l,Fu.transition=h}}function Qd(){return Cn().memoizedState}function Vm(n,i,l){var h=Kr(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Zd(n))Jd(i,l);else if(l=Md(n,i,l,h),l!==null){var p=qt();Dn(l,n,h,p),ef(l,i,h)}}function Ym(n,i,l){var h=Kr(n),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Zd(n))Jd(i,p);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var w=i.lastRenderedState,A=g(w,l);if(p.hasEagerState=!0,p.eagerState=A,zn(A,w)){var R=i.interleaved;R===null?(p.next=p,Mu(i)):(p.next=R.next,R.next=p),i.interleaved=p;return}}catch{}finally{}l=Md(n,i,p,h),l!==null&&(p=qt(),Dn(l,n,h,p),ef(l,i,h))}}function Zd(n){var i=n.alternate;return n===ct||i!==null&&i===ct}function Jd(n,i){mo=$a=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function ef(n,i,l){if((l&4194240)!==0){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,Yi(n,l)}}var Na={readContext:kn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},Xm={readContext:kn,useCallback:function(n,i){return nr().memoizedState=[n,i===void 0?null:i],n},useContext:kn,useEffect:Ud,useImperativeHandle:function(n,i,l){return l=l!=null?l.concat([n]):null,Da(4194308,4,Vd.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Da(4194308,4,n,i)},useInsertionEffect:function(n,i){return Da(4,2,n,i)},useMemo:function(n,i){var l=nr();return i=i===void 0?null:i,n=n(),l.memoizedState=[n,i],n},useReducer:function(n,i,l){var h=nr();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},h.queue=n,n=n.dispatch=Vm.bind(null,ct,n),[h.memoizedState,n]},useRef:function(n){var i=nr();return n={current:n},i.memoizedState=n},useState:Nd,useDebugValue:Wu,useDeferredValue:function(n){return nr().memoizedState=n},useTransition:function(){var n=Nd(!1),i=n[0];return n=Gm.bind(null,n[1]),nr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,l){var h=ct,p=nr();if(at){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),Rt===null)throw Error(t(349));(bi&30)!==0||jd(h,i,l)}p.memoizedState=l;var g={value:l,getSnapshot:i};return p.queue=g,Ud($d.bind(null,h,g,n),[n]),h.flags|=2048,xo(9,Bd.bind(null,h,g,l,i),void 0,null),l},useId:function(){var n=nr(),i=Rt.identifierPrefix;if(at){var l=gr,h=mr;l=(h&~(1<<32-en(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=go++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=Hm++,i=":"+i+"r"+l.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},qm={readContext:kn,useCallback:Xd,useContext:kn,useEffect:Nu,useImperativeHandle:Yd,useInsertionEffect:Hd,useLayoutEffect:Gd,useMemo:qd,useReducer:Du,useRef:Wd,useState:function(){return Du(yo)},useDebugValue:Wu,useDeferredValue:function(n){var i=Cn();return Kd(i,At.memoizedState,n)},useTransition:function(){var n=Du(yo)[0],i=Cn().memoizedState;return[n,i]},useMutableSource:zd,useSyncExternalStore:Fd,useId:Qd,unstable_isNewReconciler:!1},Km={readContext:kn,useCallback:Xd,useContext:kn,useEffect:Nu,useImperativeHandle:Yd,useInsertionEffect:Hd,useLayoutEffect:Gd,useMemo:qd,useReducer:Ou,useRef:Wd,useState:function(){return Ou(yo)},useDebugValue:Wu,useDeferredValue:function(n){var i=Cn();return At===null?i.memoizedState=n:Kd(i,At.memoizedState,n)},useTransition:function(){var n=Ou(yo)[0],i=Cn().memoizedState;return[n,i]},useMutableSource:zd,useSyncExternalStore:Fd,useId:Qd,unstable_isNewReconciler:!1};function jn(n,i){if(n&&n.defaultProps){i=ie({},i),n=n.defaultProps;for(var l in n)i[l]===void 0&&(i[l]=n[l]);return i}return i}function Uu(n,i,l,h){i=n.memoizedState,l=l(h,i),l=l==null?i:ie({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Wa={isMounted:function(n){return(n=n._reactInternals)?cn(n)===n:!1},enqueueSetState:function(n,i,l){n=n._reactInternals;var h=qt(),p=Kr(n),g=xr(h,p);g.payload=i,l!=null&&(g.callback=l),i=Vr(n,g,p),i!==null&&(Dn(i,n,p,h),za(i,n,p))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var h=qt(),p=Kr(n),g=xr(h,p);g.tag=1,g.payload=i,l!=null&&(g.callback=l),i=Vr(n,g,p),i!==null&&(Dn(i,n,p,h),za(i,n,p))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=qt(),h=Kr(n),p=xr(l,h);p.tag=2,i!=null&&(p.callback=i),i=Vr(n,p,h),i!==null&&(Dn(i,n,h,l),za(i,n,h))}};function tf(n,i,l,h,p,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,w):i.prototype&&i.prototype.isPureReactComponent?!ro(l,h)||!ro(p,g):!0}function nf(n,i,l){var h=!1,p=Ur,g=i.contextType;return typeof g=="object"&&g!==null?g=kn(g):(p=nn(i)?yi:Dt.current,h=i.contextTypes,g=(h=h!=null)?as(n,p):Ur),i=new i(l,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Wa,n.stateNode=i,i._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=g),i}function rf(n,i,l,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==n&&Wa.enqueueReplaceState(i,i.state,null)}function Hu(n,i,l,h){var p=n.stateNode;p.props=l,p.state=n.memoizedState,p.refs={},Eu(n);var g=i.contextType;typeof g=="object"&&g!==null?p.context=kn(g):(g=nn(i)?yi:Dt.current,p.context=as(n,g)),p.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Uu(n,i,g,l),p.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&Wa.enqueueReplaceState(p,p.state,null),Fa(n,l,p,h),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function ms(n,i){try{var l="",h=i;do l+=Pe(h),h=h.return;while(h);var p=l}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:p,digest:null}}function Gu(n,i,l){return{value:n,source:null,stack:l??null,digest:i??null}}function Vu(n,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var Qm=typeof WeakMap=="function"?WeakMap:Map;function sf(n,i,l){l=xr(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){qa||(qa=!0,ac=h),Vu(n,i)},l}function of(n,i,l){l=xr(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var p=i.value;l.payload=function(){return h(p)},l.callback=function(){Vu(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Vu(n,i),typeof h!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),l}function af(n,i,l){var h=n.pingCache;if(h===null){h=n.pingCache=new Qm;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(l)||(p.add(l),n=hg.bind(null,n,i,l),i.then(n,n))}function lf(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function uf(n,i,l,h,p){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=xr(-1,1),i.tag=2,Vr(l,i,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var Zm=P.ReactCurrentOwner,rn=!1;function Xt(n,i,l,h){i.child=n===null?Pd(i,null,l,h):hs(i,n.child,l,h)}function cf(n,i,l,h,p){l=l.render;var g=i.ref;return fs(i,p),h=Bu(n,i,l,h,g,p),l=$u(),n!==null&&!rn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,vr(n,i,p)):(at&&l&&_u(i),i.flags|=1,Xt(n,i,h,p),i.child)}function hf(n,i,l,h,p){if(n===null){var g=l.type;return typeof g=="function"&&!pc(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=g,df(n,i,g,h,p)):(n=tl(l.type,null,h,i,i.mode,p),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&p)===0){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:ro,l(w,h)&&n.ref===i.ref)return vr(n,i,p)}return i.flags|=1,n=Zr(g,h),n.ref=i.ref,n.return=i,i.child=n}function df(n,i,l,h,p){if(n!==null){var g=n.memoizedProps;if(ro(g,h)&&n.ref===i.ref)if(rn=!1,i.pendingProps=h=g,(n.lanes&p)!==0)(n.flags&131072)!==0&&(rn=!0);else return i.lanes=n.lanes,vr(n,i,p)}return Yu(n,i,l,h,p)}function ff(n,i,l){var h=i.pendingProps,p=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(ys,pn),pn|=l;else{if((l&1073741824)===0)return n=g!==null?g.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Je(ys,pn),pn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,Je(ys,pn),pn|=h}else g!==null?(h=g.baseLanes|l,i.memoizedState=null):h=l,Je(ys,pn),pn|=h;return Xt(n,i,p,l),i.child}function pf(n,i){var l=i.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Yu(n,i,l,h,p){var g=nn(l)?yi:Dt.current;return g=as(i,g),fs(i,p),l=Bu(n,i,l,h,g,p),h=$u(),n!==null&&!rn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,vr(n,i,p)):(at&&h&&_u(i),i.flags|=1,Xt(n,i,l,p),i.child)}function mf(n,i,l,h,p){if(nn(l)){var g=!0;Aa(i)}else g=!1;if(fs(i,p),i.stateNode===null)Ha(n,i),nf(i,l,h),Hu(i,l,h,p),h=!0;else if(n===null){var w=i.stateNode,A=i.memoizedProps;w.props=A;var R=w.context,O=l.contextType;typeof O=="object"&&O!==null?O=kn(O):(O=nn(l)?yi:Dt.current,O=as(i,O));var X=l.getDerivedStateFromProps,K=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";K||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==h||R!==O)&&rf(i,w,h,O),Gr=!1;var V=i.memoizedState;w.state=V,Fa(i,h,w,p),R=i.memoizedState,A!==h||V!==R||tn.current||Gr?(typeof X=="function"&&(Uu(i,l,X,h),R=i.memoizedState),(A=Gr||tf(i,l,A,h,V,R,O))?(K||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=R),w.props=h,w.state=R,w.context=O,h=A):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,Ed(n,i),A=i.memoizedProps,O=i.type===i.elementType?A:jn(i.type,A),w.props=O,K=i.pendingProps,V=w.context,R=l.contextType,typeof R=="object"&&R!==null?R=kn(R):(R=nn(l)?yi:Dt.current,R=as(i,R));var oe=l.getDerivedStateFromProps;(X=typeof oe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==K||V!==R)&&rf(i,w,h,R),Gr=!1,V=i.memoizedState,w.state=V,Fa(i,h,w,p);var he=i.memoizedState;A!==K||V!==he||tn.current||Gr?(typeof oe=="function"&&(Uu(i,l,oe,h),he=i.memoizedState),(O=Gr||tf(i,l,O,h,V,he,R)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,he,R),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,he,R)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&V===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&V===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=he),w.props=h,w.state=he,w.context=R,h=O):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&V===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&V===n.memoizedState||(i.flags|=1024),h=!1)}return Xu(n,i,l,h,g,p)}function Xu(n,i,l,h,p,g){pf(n,i);var w=(i.flags&128)!==0;if(!h&&!w)return p&&vd(i,l,!1),vr(n,i,g);h=i.stateNode,Zm.current=i;var A=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,n!==null&&w?(i.child=hs(i,n.child,null,g),i.child=hs(i,null,A,g)):Xt(n,i,A,g),i.memoizedState=h.state,p&&vd(i,l,!0),i.child}function gf(n){var i=n.stateNode;i.pendingContext?yd(n,i.pendingContext,i.pendingContext!==i.context):i.context&&yd(n,i.context,!1),Ru(n,i.containerInfo)}function yf(n,i,l,h,p){return cs(),ku(p),i.flags|=256,Xt(n,i,l,h),i.child}var qu={dehydrated:null,treeContext:null,retryLane:0};function Ku(n){return{baseLanes:n,cachePool:null,transitions:null}}function xf(n,i,l){var h=i.pendingProps,p=ut.current,g=!1,w=(i.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(p&2)!==0),A?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Je(ut,p&1),n===null)return Su(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=h.children,n=h.fallback,g?(h=i.mode,g=i.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=nl(w,h,0,null),n=Ti(n,h,l,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=Ku(l),i.memoizedState=qu,n):Qu(i,w));if(p=n.memoizedState,p!==null&&(A=p.dehydrated,A!==null))return Jm(n,i,w,h,A,p,l);if(g){g=h.fallback,w=i.mode,p=n.child,A=p.sibling;var R={mode:"hidden",children:h.children};return(w&1)===0&&i.child!==p?(h=i.child,h.childLanes=0,h.pendingProps=R,i.deletions=null):(h=Zr(p,R),h.subtreeFlags=p.subtreeFlags&14680064),A!==null?g=Zr(A,g):(g=Ti(g,w,l,null),g.flags|=2),g.return=i,h.return=i,h.sibling=g,i.child=h,h=g,g=i.child,w=n.child.memoizedState,w=w===null?Ku(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~l,i.memoizedState=qu,h}return g=n.child,n=g.sibling,h=Zr(g,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=l),h.return=i,h.sibling=null,n!==null&&(l=i.deletions,l===null?(i.deletions=[n],i.flags|=16):l.push(n)),i.child=h,i.memoizedState=null,h}function Qu(n,i){return i=nl({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Ua(n,i,l,h){return h!==null&&ku(h),hs(i,n.child,null,l),n=Qu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Jm(n,i,l,h,p,g,w){if(l)return i.flags&256?(i.flags&=-257,h=Gu(Error(t(422))),Ua(n,i,w,h)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=h.fallback,p=i.mode,h=nl({mode:"visible",children:h.children},p,0,null),g=Ti(g,p,w,null),g.flags|=2,h.return=i,g.return=i,h.sibling=g,i.child=h,(i.mode&1)!==0&&hs(i,n.child,null,w),i.child.memoizedState=Ku(w),i.memoizedState=qu,g);if((i.mode&1)===0)return Ua(n,i,w,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var A=h.dgst;return h=A,g=Error(t(419)),h=Gu(g,h,void 0),Ua(n,i,w,h)}if(A=(w&n.childLanes)!==0,rn||A){if(h=Rt,h!==null){switch(w&-w){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|w))!==0?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,yr(n,p),Dn(h,n,p,-1))}return fc(),h=Gu(Error(t(421))),Ua(n,i,w,h)}return p.data==="$?"?(i.flags|=128,i.child=n.child,i=dg.bind(null,n),p._reactRetry=i,null):(n=g.treeContext,fn=Nr(p.nextSibling),dn=i,at=!0,Fn=null,n!==null&&(bn[Sn++]=mr,bn[Sn++]=gr,bn[Sn++]=xi,mr=n.id,gr=n.overflow,xi=i),i=Qu(i,h.children),i.flags|=4096,i)}function vf(n,i,l){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),Pu(n.return,i,l)}function Zu(n,i,l,h,p){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=p)}function _f(n,i,l){var h=i.pendingProps,p=h.revealOrder,g=h.tail;if(Xt(n,i,h.children,l),h=ut.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vf(n,l,i);else if(n.tag===19)vf(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Je(ut,h),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(l=i.child,p=null;l!==null;)n=l.alternate,n!==null&&ja(n)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),Zu(i,!1,p,l,g);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(n=p.alternate,n!==null&&ja(n)===null){i.child=p;break}n=p.sibling,p.sibling=l,l=p,p=n}Zu(i,!0,l,null,g);break;case"together":Zu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ha(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function vr(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),Si|=i.lanes,(l&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,l=Zr(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Zr(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function eg(n,i,l){switch(i.tag){case 3:gf(i),cs();break;case 5:Ld(i);break;case 1:nn(i.type)&&Aa(i);break;case 4:Ru(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,p=i.memoizedProps.value;Je(Ia,h._currentValue),h._currentValue=p;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Je(ut,ut.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?xf(n,i,l):(Je(ut,ut.current&1),n=vr(n,i,l),n!==null?n.sibling:null);Je(ut,ut.current&1);break;case 19:if(h=(l&i.childLanes)!==0,(n.flags&128)!==0){if(h)return _f(n,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Je(ut,ut.current),h)break;return null;case 22:case 23:return i.lanes=0,ff(n,i,l)}return vr(n,i,l)}var wf,Ju,bf,Sf;wf=function(n,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Ju=function(){},bf=function(n,i,l,h){var p=n.memoizedProps;if(p!==h){n=i.stateNode,wi(tr.current);var g=null;switch(l){case"input":p=un(n,p),h=un(n,h),g=[];break;case"select":p=ie({},p,{value:void 0}),h=ie({},h,{value:void 0}),g=[];break;case"textarea":p=$i(n,p),h=$i(n,h),g=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Sa)}Pt(l,h);var w;l=null;for(O in p)if(!h.hasOwnProperty(O)&&p.hasOwnProperty(O)&&p[O]!=null)if(O==="style"){var A=p[O];for(w in A)A.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(o.hasOwnProperty(O)?g||(g=[]):(g=g||[]).push(O,null));for(O in h){var R=h[O];if(A=p!=null?p[O]:void 0,h.hasOwnProperty(O)&&R!==A&&(R!=null||A!=null))if(O==="style")if(A){for(w in A)!A.hasOwnProperty(w)||R&&R.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in R)R.hasOwnProperty(w)&&A[w]!==R[w]&&(l||(l={}),l[w]=R[w])}else l||(g||(g=[]),g.push(O,l)),l=R;else O==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,A=A?A.__html:void 0,R!=null&&A!==R&&(g=g||[]).push(O,R)):O==="children"?typeof R!="string"&&typeof R!="number"||(g=g||[]).push(O,""+R):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(o.hasOwnProperty(O)?(R!=null&&O==="onScroll"&&rt("scroll",n),g||A===R||(g=[])):(g=g||[]).push(O,R))}l&&(g=g||[]).push("style",l);var O=g;(i.updateQueue=O)&&(i.flags|=4)}},Sf=function(n,i,l,h){l!==h&&(i.flags|=4)};function vo(n,i){if(!at)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Nt(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(i)for(var p=n.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=h,n.childLanes=l,i}function tg(n,i,l){var h=i.pendingProps;switch(wu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(i),null;case 1:return nn(i.type)&&Ca(),Nt(i),null;case 3:return h=i.stateNode,ps(),it(tn),it(Dt),zu(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Ea(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Fn!==null&&(cc(Fn),Fn=null))),Ju(n,i),Nt(i),null;case 5:Iu(i);var p=wi(po.current);if(l=i.type,n!==null&&i.stateNode!=null)bf(n,i,l,h,p),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Nt(i),null}if(n=wi(tr.current),Ea(i)){h=i.stateNode,l=i.type;var g=i.memoizedProps;switch(h[er]=i,h[lo]=g,n=(i.mode&1)!==0,l){case"dialog":rt("cancel",h),rt("close",h);break;case"iframe":case"object":case"embed":rt("load",h);break;case"video":case"audio":for(p=0;p<so.length;p++)rt(so[p],h);break;case"source":rt("error",h);break;case"img":case"image":case"link":rt("error",h),rt("load",h);break;case"details":rt("toggle",h);break;case"input":Zt(h,g),rt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},rt("invalid",h);break;case"textarea":ri(h,g),rt("invalid",h)}Pt(l,g),p=null;for(var w in g)if(g.hasOwnProperty(w)){var A=g[w];w==="children"?typeof A=="string"?h.textContent!==A&&(g.suppressHydrationWarning!==!0&&ba(h.textContent,A,n),p=["children",A]):typeof A=="number"&&h.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&ba(h.textContent,A,n),p=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&rt("scroll",h)}switch(l){case"input":Vn(h),Rr(h,g,!0);break;case"textarea":Vn(h),Zo(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Sa)}h=p,i.updateQueue=h,h!==null&&(i.flags|=4)}else{w=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Jo(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=w.createElement(l,{is:h.is}):(n=w.createElement(l),l==="select"&&(w=n,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):n=w.createElementNS(n,l),n[er]=i,n[lo]=h,wf(n,i,!1,!1),i.stateNode=n;e:{switch(w=Ir(l,h),l){case"dialog":rt("cancel",n),rt("close",n),p=h;break;case"iframe":case"object":case"embed":rt("load",n),p=h;break;case"video":case"audio":for(p=0;p<so.length;p++)rt(so[p],n);p=h;break;case"source":rt("error",n),p=h;break;case"img":case"image":case"link":rt("error",n),rt("load",n),p=h;break;case"details":rt("toggle",n),p=h;break;case"input":Zt(n,h),p=un(n,h),rt("invalid",n);break;case"option":p=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},p=ie({},h,{value:void 0}),rt("invalid",n);break;case"textarea":ri(n,h),p=$i(n,h),rt("invalid",n);break;default:p=h}Pt(l,p),A=p;for(g in A)if(A.hasOwnProperty(g)){var R=A[g];g==="style"?Ds(n,R):g==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Di(n,R)):g==="children"?typeof R=="string"?(l!=="textarea"||R!=="")&&Xn(n,R):typeof R=="number"&&Xn(n,""+R):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?R!=null&&g==="onScroll"&&rt("scroll",n):R!=null&&E(n,g,R,w))}switch(l){case"input":Vn(n),Rr(n,h,!1);break;case"textarea":Vn(n),Zo(n);break;case"option":h.value!=null&&n.setAttribute("value",""+We(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?Yn(n,!!h.multiple,g,!1):h.defaultValue!=null&&Yn(n,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=Sa)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Nt(i),null;case 6:if(n&&i.stateNode!=null)Sf(n,i,n.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=wi(po.current),wi(tr.current),Ea(i)){if(h=i.stateNode,l=i.memoizedProps,h[er]=i,(g=h.nodeValue!==l)&&(n=dn,n!==null))switch(n.tag){case 3:ba(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ba(h.nodeValue,l,(n.mode&1)!==0)}g&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[er]=i,i.stateNode=h}return Nt(i),null;case 13:if(it(ut),h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(at&&fn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Cd(),cs(),i.flags|=98560,g=!1;else if(g=Ea(i),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[er]=i}else cs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nt(i),g=!1}else Fn!==null&&(cc(Fn),Fn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(ut.current&1)!==0?Tt===0&&(Tt=3):fc())),i.updateQueue!==null&&(i.flags|=4),Nt(i),null);case 4:return ps(),Ju(n,i),n===null&&oo(i.stateNode.containerInfo),Nt(i),null;case 10:return Tu(i.type._context),Nt(i),null;case 17:return nn(i.type)&&Ca(),Nt(i),null;case 19:if(it(ut),g=i.memoizedState,g===null)return Nt(i),null;if(h=(i.flags&128)!==0,w=g.rendering,w===null)if(h)vo(g,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=ja(n),w!==null){for(i.flags|=128,vo(g,!1),h=w.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)g=l,n=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Je(ut,ut.current&1|2),i.child}n=n.sibling}g.tail!==null&&tt()>xs&&(i.flags|=128,h=!0,vo(g,!1),i.lanes=4194304)}else{if(!h)if(n=ja(w),n!==null){if(i.flags|=128,h=!0,l=n.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),vo(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!at)return Nt(i),null}else 2*tt()-g.renderingStartTime>xs&&l!==1073741824&&(i.flags|=128,h=!0,vo(g,!1),i.lanes=4194304);g.isBackwards?(w.sibling=i.child,i.child=w):(l=g.last,l!==null?l.sibling=w:i.child=w,g.last=w)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=tt(),i.sibling=null,l=ut.current,Je(ut,h?l&1|2:l&1),i):(Nt(i),null);case 22:case 23:return dc(),h=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(pn&1073741824)!==0&&(Nt(i),i.subtreeFlags&6&&(i.flags|=8192)):Nt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function ng(n,i){switch(wu(i),i.tag){case 1:return nn(i.type)&&Ca(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ps(),it(tn),it(Dt),zu(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Iu(i),null;case 13:if(it(ut),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));cs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return it(ut),null;case 4:return ps(),null;case 10:return Tu(i.type._context),null;case 22:case 23:return dc(),null;case 24:return null;default:return null}}var Ga=!1,Wt=!1,rg=typeof WeakSet=="function"?WeakSet:Set,le=null;function gs(n,i){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){mt(n,i,h)}else l.current=null}function ec(n,i,l){try{l()}catch(h){mt(n,i,h)}}var kf=!1;function ig(n,i){if(du=Ki,n=td(),iu(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,A=-1,R=-1,O=0,X=0,K=n,V=null;t:for(;;){for(var oe;K!==l||p!==0&&K.nodeType!==3||(A=w+p),K!==g||h!==0&&K.nodeType!==3||(R=w+h),K.nodeType===3&&(w+=K.nodeValue.length),(oe=K.firstChild)!==null;)V=K,K=oe;for(;;){if(K===n)break t;if(V===l&&++O===p&&(A=w),V===g&&++X===h&&(R=w),(oe=K.nextSibling)!==null)break;K=V,V=K.parentNode}K=oe}l=A===-1||R===-1?null:{start:A,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(fu={focusedElem:n,selectionRange:l},Ki=!1,le=i;le!==null;)if(i=le,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,le=n;else for(;le!==null;){i=le;try{var he=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var de=he.memoizedProps,_t=he.memoizedState,j=i.stateNode,I=j.getSnapshotBeforeUpdate(i.elementType===i.type?de:jn(i.type,de),_t);j.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var B=i.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){mt(i,i.return,Z)}if(n=i.sibling,n!==null){n.return=i.return,le=n;break}le=i.return}return he=kf,kf=!1,he}function _o(n,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&n)===n){var g=p.destroy;p.destroy=void 0,g!==void 0&&ec(i,l,g)}p=p.next}while(p!==h)}}function Va(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function tc(n){var i=n.ref;if(i!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof i=="function"?i(n):i.current=n}}function Cf(n){var i=n.alternate;i!==null&&(n.alternate=null,Cf(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[er],delete i[lo],delete i[yu],delete i[Om],delete i[Nm])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Af(n){return n.tag===5||n.tag===3||n.tag===4}function Tf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Af(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nc(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(n,i):l.insertBefore(n,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(n,l)):(i=l,i.appendChild(n)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Sa));else if(h!==4&&(n=n.child,n!==null))for(nc(n,i,l),n=n.sibling;n!==null;)nc(n,i,l),n=n.sibling}function rc(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(rc(n,i,l),n=n.sibling;n!==null;)rc(n,i,l),n=n.sibling}var Ft=null,Bn=!1;function Yr(n,i,l){for(l=l.child;l!==null;)Pf(n,i,l),l=l.sibling}function Pf(n,i,l){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(oi,l)}catch{}switch(l.tag){case 5:Wt||gs(l,i);case 6:var h=Ft,p=Bn;Ft=null,Yr(n,i,l),Ft=h,Bn=p,Ft!==null&&(Bn?(n=Ft,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Ft.removeChild(l.stateNode));break;case 18:Ft!==null&&(Bn?(n=Ft,l=l.stateNode,n.nodeType===8?gu(n.parentNode,l):n.nodeType===1&&gu(n,l),mi(n)):gu(Ft,l.stateNode));break;case 4:h=Ft,p=Bn,Ft=l.stateNode.containerInfo,Bn=!0,Yr(n,i,l),Ft=h,Bn=p;break;case 0:case 11:case 14:case 15:if(!Wt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var g=p,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&ec(l,i,w),p=p.next}while(p!==h)}Yr(n,i,l);break;case 1:if(!Wt&&(gs(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(A){mt(l,i,A)}Yr(n,i,l);break;case 21:Yr(n,i,l);break;case 22:l.mode&1?(Wt=(h=Wt)||l.memoizedState!==null,Yr(n,i,l),Wt=h):Yr(n,i,l);break;default:Yr(n,i,l)}}function Mf(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new rg),i.forEach(function(h){var p=fg.bind(null,n,h);l.has(h)||(l.add(h),h.then(p,p))})}}function $n(n,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var g=n,w=i,A=w;e:for(;A!==null;){switch(A.tag){case 5:Ft=A.stateNode,Bn=!1;break e;case 3:Ft=A.stateNode.containerInfo,Bn=!0;break e;case 4:Ft=A.stateNode.containerInfo,Bn=!0;break e}A=A.return}if(Ft===null)throw Error(t(160));Pf(g,w,p),Ft=null,Bn=!1;var R=p.alternate;R!==null&&(R.return=null),p.return=null}catch(O){mt(p,i,O)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Ef(i,n),i=i.sibling}function Ef(n,i){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if($n(i,n),rr(n),h&4){try{_o(3,n,n.return),Va(3,n)}catch(de){mt(n,n.return,de)}try{_o(5,n,n.return)}catch(de){mt(n,n.return,de)}}break;case 1:$n(i,n),rr(n),h&512&&l!==null&&gs(l,l.return);break;case 5:if($n(i,n),rr(n),h&512&&l!==null&&gs(l,l.return),n.flags&32){var p=n.stateNode;try{Xn(p,"")}catch(de){mt(n,n.return,de)}}if(h&4&&(p=n.stateNode,p!=null)){var g=n.memoizedProps,w=l!==null?l.memoizedProps:g,A=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Mr(p,g),Ir(A,w);var O=Ir(A,g);for(w=0;w<R.length;w+=2){var X=R[w],K=R[w+1];X==="style"?Ds(p,K):X==="dangerouslySetInnerHTML"?Di(p,K):X==="children"?Xn(p,K):E(p,X,K,O)}switch(A){case"input":Er(p,g);break;case"textarea":Bs(p,g);break;case"select":var V=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var oe=g.value;oe!=null?Yn(p,!!g.multiple,oe,!1):V!==!!g.multiple&&(g.defaultValue!=null?Yn(p,!!g.multiple,g.defaultValue,!0):Yn(p,!!g.multiple,g.multiple?[]:"",!1))}p[lo]=g}catch(de){mt(n,n.return,de)}}break;case 6:if($n(i,n),rr(n),h&4){if(n.stateNode===null)throw Error(t(162));p=n.stateNode,g=n.memoizedProps;try{p.nodeValue=g}catch(de){mt(n,n.return,de)}}break;case 3:if($n(i,n),rr(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{mi(i.containerInfo)}catch(de){mt(n,n.return,de)}break;case 4:$n(i,n),rr(n);break;case 13:$n(i,n),rr(n),p=n.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||(oc=tt())),h&4&&Mf(n);break;case 22:if(X=l!==null&&l.memoizedState!==null,n.mode&1?(Wt=(O=Wt)||X,$n(i,n),Wt=O):$n(i,n),rr(n),h&8192){if(O=n.memoizedState!==null,(n.stateNode.isHidden=O)&&!X&&(n.mode&1)!==0)for(le=n,X=n.child;X!==null;){for(K=le=X;le!==null;){switch(V=le,oe=V.child,V.tag){case 0:case 11:case 14:case 15:_o(4,V,V.return);break;case 1:gs(V,V.return);var he=V.stateNode;if(typeof he.componentWillUnmount=="function"){h=V,l=V.return;try{i=h,he.props=i.memoizedProps,he.state=i.memoizedState,he.componentWillUnmount()}catch(de){mt(h,l,de)}}break;case 5:gs(V,V.return);break;case 22:if(V.memoizedState!==null){Lf(K);continue}}oe!==null?(oe.return=V,le=oe):Lf(K)}X=X.sibling}e:for(X=null,K=n;;){if(K.tag===5){if(X===null){X=K;try{p=K.stateNode,O?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=K.stateNode,R=K.memoizedProps.style,w=R!=null&&R.hasOwnProperty("display")?R.display:null,A.style.display=$s("display",w))}catch(de){mt(n,n.return,de)}}}else if(K.tag===6){if(X===null)try{K.stateNode.nodeValue=O?"":K.memoizedProps}catch(de){mt(n,n.return,de)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===n)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===n)break e;for(;K.sibling===null;){if(K.return===null||K.return===n)break e;X===K&&(X=null),K=K.return}X===K&&(X=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:$n(i,n),rr(n),h&4&&Mf(n);break;case 21:break;default:$n(i,n),rr(n)}}function rr(n){var i=n.flags;if(i&2){try{e:{for(var l=n.return;l!==null;){if(Af(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Xn(p,""),h.flags&=-33);var g=Tf(n);rc(n,g,p);break;case 3:case 4:var w=h.stateNode.containerInfo,A=Tf(n);nc(n,A,w);break;default:throw Error(t(161))}}catch(R){mt(n,n.return,R)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function sg(n,i,l){le=n,Rf(n)}function Rf(n,i,l){for(var h=(n.mode&1)!==0;le!==null;){var p=le,g=p.child;if(p.tag===22&&h){var w=p.memoizedState!==null||Ga;if(!w){var A=p.alternate,R=A!==null&&A.memoizedState!==null||Wt;A=Ga;var O=Wt;if(Ga=w,(Wt=R)&&!O)for(le=p;le!==null;)w=le,R=w.child,w.tag===22&&w.memoizedState!==null?zf(p):R!==null?(R.return=w,le=R):zf(p);for(;g!==null;)le=g,Rf(g),g=g.sibling;le=p,Ga=A,Wt=O}If(n)}else(p.subtreeFlags&8772)!==0&&g!==null?(g.return=p,le=g):If(n)}}function If(n){for(;le!==null;){var i=le;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Wt||Va(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Wt)if(l===null)h.componentDidMount();else{var p=i.elementType===i.type?l.memoizedProps:jn(i.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&Id(i,g,h);break;case 3:var w=i.updateQueue;if(w!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Id(i,w,l)}break;case 5:var A=i.stateNode;if(l===null&&i.flags&4){l=A;var R=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&l.focus();break;case"img":R.src&&(l.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var O=i.alternate;if(O!==null){var X=O.memoizedState;if(X!==null){var K=X.dehydrated;K!==null&&mi(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Wt||i.flags&512&&tc(i)}catch(V){mt(i,i.return,V)}}if(i===n){le=null;break}if(l=i.sibling,l!==null){l.return=i.return,le=l;break}le=i.return}}function Lf(n){for(;le!==null;){var i=le;if(i===n){le=null;break}var l=i.sibling;if(l!==null){l.return=i.return,le=l;break}le=i.return}}function zf(n){for(;le!==null;){var i=le;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Va(4,i)}catch(R){mt(i,l,R)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var p=i.return;try{h.componentDidMount()}catch(R){mt(i,p,R)}}var g=i.return;try{tc(i)}catch(R){mt(i,g,R)}break;case 5:var w=i.return;try{tc(i)}catch(R){mt(i,w,R)}}}catch(R){mt(i,i.return,R)}if(i===n){le=null;break}var A=i.sibling;if(A!==null){A.return=i.return,le=A;break}le=i.return}}var og=Math.ceil,Ya=P.ReactCurrentDispatcher,ic=P.ReactCurrentOwner,An=P.ReactCurrentBatchConfig,He=0,Rt=null,St=null,jt=0,pn=0,ys=Wr(0),Tt=0,wo=null,Si=0,Xa=0,sc=0,bo=null,sn=null,oc=0,xs=1/0,_r=null,qa=!1,ac=null,Xr=null,Ka=!1,qr=null,Qa=0,So=0,lc=null,Za=-1,Ja=0;function qt(){return(He&6)!==0?tt():Za!==-1?Za:Za=tt()}function Kr(n){return(n.mode&1)===0?1:(He&2)!==0&&jt!==0?jt&-jt:Um.transition!==null?(Ja===0&&(Ja=Vi()),Ja):(n=Ge,n!==0||(n=window.event,n=n===void 0?16:se(n.type)),n)}function Dn(n,i,l,h){if(50<So)throw So=0,lc=null,Error(t(185));$r(n,l,h),((He&2)===0||n!==Rt)&&(n===Rt&&((He&2)===0&&(Xa|=l),Tt===4&&Qr(n,jt)),on(n,h),l===1&&He===0&&(i.mode&1)===0&&(xs=tt()+500,Ta&&Hr()))}function on(n,i){var l=n.callbackNode;ui(n,i);var h=Gi(n,n===Rt?jt:0);if(h===0)l!==null&&sa(l),n.callbackNode=null,n.callbackPriority=0;else if(i=h&-h,n.callbackPriority!==i){if(l!=null&&sa(l),i===1)n.tag===0?Wm(jf.bind(null,n)):_d(jf.bind(null,n)),$m(function(){(He&6)===0&&Hr()}),l=null;else{switch(la(h)){case 1:l=fe;break;case 4:l=Xs;break;case 16:l=hr;break;case 536870912:l=oa;break;default:l=hr}l=Hf(l,Ff.bind(null,n))}n.callbackPriority=i,n.callbackNode=l}}function Ff(n,i){if(Za=-1,Ja=0,(He&6)!==0)throw Error(t(327));var l=n.callbackNode;if(vs()&&n.callbackNode!==l)return null;var h=Gi(n,n===Rt?jt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||i)i=el(n,h);else{i=h;var p=He;He|=2;var g=$f();(Rt!==n||jt!==i)&&(_r=null,xs=tt()+500,Ci(n,i));do try{ug();break}catch(A){Bf(n,A)}while(!0);Au(),Ya.current=g,He=p,St!==null?i=0:(Rt=null,jt=0,i=Tt)}if(i!==0){if(i===2&&(p=Ks(n),p!==0&&(h=p,i=uc(n,p))),i===1)throw l=wo,Ci(n,0),Qr(n,h),on(n,tt()),l;if(i===6)Qr(n,h);else{if(p=n.current.alternate,(h&30)===0&&!ag(p)&&(i=el(n,h),i===2&&(g=Ks(n),g!==0&&(h=g,i=uc(n,g))),i===1))throw l=wo,Ci(n,0),Qr(n,h),on(n,tt()),l;switch(n.finishedWork=p,n.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Ai(n,sn,_r);break;case 3:if(Qr(n,h),(h&130023424)===h&&(i=oc+500-tt(),10<i)){if(Gi(n,0)!==0)break;if(p=n.suspendedLanes,(p&h)!==h){qt(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=mu(Ai.bind(null,n,sn,_r),i);break}Ai(n,sn,_r);break;case 4:if(Qr(n,h),(h&4194240)===h)break;for(i=n.eventTimes,p=-1;0<h;){var w=31-en(h);g=1<<w,w=i[w],w>p&&(p=w),h&=~g}if(h=p,h=tt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*og(h/1960))-h,10<h){n.timeoutHandle=mu(Ai.bind(null,n,sn,_r),h);break}Ai(n,sn,_r);break;case 5:Ai(n,sn,_r);break;default:throw Error(t(329))}}}return on(n,tt()),n.callbackNode===l?Ff.bind(null,n):null}function uc(n,i){var l=bo;return n.current.memoizedState.isDehydrated&&(Ci(n,i).flags|=256),n=el(n,i),n!==2&&(i=sn,sn=l,i!==null&&cc(i)),n}function cc(n){sn===null?sn=n:sn.push.apply(sn,n)}function ag(n){for(var i=n;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],g=p.getSnapshot;p=p.value;try{if(!zn(g(),p))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qr(n,i){for(i&=~sc,i&=~Xa,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var l=31-en(i),h=1<<l;n[l]=-1,i&=~h}}function jf(n){if((He&6)!==0)throw Error(t(327));vs();var i=Gi(n,0);if((i&1)===0)return on(n,tt()),null;var l=el(n,i);if(n.tag!==0&&l===2){var h=Ks(n);h!==0&&(i=h,l=uc(n,h))}if(l===1)throw l=wo,Ci(n,0),Qr(n,i),on(n,tt()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Ai(n,sn,_r),on(n,tt()),null}function hc(n,i){var l=He;He|=1;try{return n(i)}finally{He=l,He===0&&(xs=tt()+500,Ta&&Hr())}}function ki(n){qr!==null&&qr.tag===0&&(He&6)===0&&vs();var i=He;He|=1;var l=An.transition,h=Ge;try{if(An.transition=null,Ge=1,n)return n()}finally{Ge=h,An.transition=l,He=i,(He&6)===0&&Hr()}}function dc(){pn=ys.current,it(ys)}function Ci(n,i){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,Bm(l)),St!==null)for(l=St.return;l!==null;){var h=l;switch(wu(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ca();break;case 3:ps(),it(tn),it(Dt),zu();break;case 5:Iu(h);break;case 4:ps();break;case 13:it(ut);break;case 19:it(ut);break;case 10:Tu(h.type._context);break;case 22:case 23:dc()}l=l.return}if(Rt=n,St=n=Zr(n.current,null),jt=pn=i,Tt=0,wo=null,sc=Xa=Si=0,sn=bo=null,_i!==null){for(i=0;i<_i.length;i++)if(l=_i[i],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,g=l.pending;if(g!==null){var w=g.next;g.next=p,h.next=w}l.pending=h}_i=null}return n}function Bf(n,i){do{var l=St;try{if(Au(),Ba.current=Na,$a){for(var h=ct.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}$a=!1}if(bi=0,Et=At=ct=null,mo=!1,go=0,ic.current=null,l===null||l.return===null){Tt=1,wo=i,St=null;break}e:{var g=n,w=l.return,A=l,R=i;if(i=jt,A.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var O=R,X=A,K=X.tag;if((X.mode&1)===0&&(K===0||K===11||K===15)){var V=X.alternate;V?(X.updateQueue=V.updateQueue,X.memoizedState=V.memoizedState,X.lanes=V.lanes):(X.updateQueue=null,X.memoizedState=null)}var oe=lf(w);if(oe!==null){oe.flags&=-257,uf(oe,w,A,g,i),oe.mode&1&&af(g,O,i),i=oe,R=O;var he=i.updateQueue;if(he===null){var de=new Set;de.add(R),i.updateQueue=de}else he.add(R);break e}else{if((i&1)===0){af(g,O,i),fc();break e}R=Error(t(426))}}else if(at&&A.mode&1){var _t=lf(w);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),uf(_t,w,A,g,i),ku(ms(R,A));break e}}g=R=ms(R,A),Tt!==4&&(Tt=2),bo===null?bo=[g]:bo.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var j=sf(g,R,i);Rd(g,j);break e;case 1:A=R;var I=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Xr===null||!Xr.has(B)))){g.flags|=65536,i&=-i,g.lanes|=i;var Z=of(g,A,i);Rd(g,Z);break e}}g=g.return}while(g!==null)}Of(l)}catch(pe){i=pe,St===l&&l!==null&&(St=l=l.return);continue}break}while(!0)}function $f(){var n=Ya.current;return Ya.current=Na,n===null?Na:n}function fc(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Rt===null||(Si&268435455)===0&&(Xa&268435455)===0||Qr(Rt,jt)}function el(n,i){var l=He;He|=2;var h=$f();(Rt!==n||jt!==i)&&(_r=null,Ci(n,i));do try{lg();break}catch(p){Bf(n,p)}while(!0);if(Au(),He=l,Ya.current=h,St!==null)throw Error(t(261));return Rt=null,jt=0,Tt}function lg(){for(;St!==null;)Df(St)}function ug(){for(;St!==null&&!Ys();)Df(St)}function Df(n){var i=Uf(n.alternate,n,pn);n.memoizedProps=n.pendingProps,i===null?Of(n):St=i,ic.current=null}function Of(n){var i=n;do{var l=i.alternate;if(n=i.return,(i.flags&32768)===0){if(l=tg(l,i,pn),l!==null){St=l;return}}else{if(l=ng(l,i),l!==null){l.flags&=32767,St=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Tt=6,St=null;return}}if(i=i.sibling,i!==null){St=i;return}St=i=n}while(i!==null);Tt===0&&(Tt=5)}function Ai(n,i,l){var h=Ge,p=An.transition;try{An.transition=null,Ge=1,cg(n,i,l,h)}finally{An.transition=p,Ge=h}return null}function cg(n,i,l,h){do vs();while(qr!==null);if((He&6)!==0)throw Error(t(327));l=n.finishedWork;var p=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=l.lanes|l.childLanes;if(Kl(n,g),n===Rt&&(St=Rt=null,jt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ka||(Ka=!0,Hf(hr,function(){return vs(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=An.transition,An.transition=null;var w=Ge;Ge=1;var A=He;He|=4,ic.current=null,ig(n,l),Ef(l,n),Em(fu),Ki=!!du,fu=du=null,n.current=l,sg(l),Gl(),He=A,Ge=w,An.transition=g}else n.current=l;if(Ka&&(Ka=!1,qr=n,Qa=p),g=n.pendingLanes,g===0&&(Xr=null),qs(l.stateNode),on(n,tt()),i!==null)for(h=n.onRecoverableError,l=0;l<i.length;l++)p=i[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(qa)throw qa=!1,n=ac,ac=null,n;return(Qa&1)!==0&&n.tag!==0&&vs(),g=n.pendingLanes,(g&1)!==0?n===lc?So++:(So=0,lc=n):So=0,Hr(),null}function vs(){if(qr!==null){var n=la(Qa),i=An.transition,l=Ge;try{if(An.transition=null,Ge=16>n?16:n,qr===null)var h=!1;else{if(n=qr,qr=null,Qa=0,(He&6)!==0)throw Error(t(331));var p=He;for(He|=4,le=n.current;le!==null;){var g=le,w=g.child;if((le.flags&16)!==0){var A=g.deletions;if(A!==null){for(var R=0;R<A.length;R++){var O=A[R];for(le=O;le!==null;){var X=le;switch(X.tag){case 0:case 11:case 15:_o(8,X,g)}var K=X.child;if(K!==null)K.return=X,le=K;else for(;le!==null;){X=le;var V=X.sibling,oe=X.return;if(Cf(X),X===O){le=null;break}if(V!==null){V.return=oe,le=V;break}le=oe}}}var he=g.alternate;if(he!==null){var de=he.child;if(de!==null){he.child=null;do{var _t=de.sibling;de.sibling=null,de=_t}while(de!==null)}}le=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,le=w;else e:for(;le!==null;){if(g=le,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:_o(9,g,g.return)}var j=g.sibling;if(j!==null){j.return=g.return,le=j;break e}le=g.return}}var I=n.current;for(le=I;le!==null;){w=le;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,le=B;else e:for(w=I;le!==null;){if(A=le,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Va(9,A)}}catch(pe){mt(A,A.return,pe)}if(A===w){le=null;break e}var Z=A.sibling;if(Z!==null){Z.return=A.return,le=Z;break e}le=A.return}}if(He=p,Hr(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(oi,n)}catch{}h=!0}return h}finally{Ge=l,An.transition=i}}return!1}function Nf(n,i,l){i=ms(l,i),i=sf(n,i,1),n=Vr(n,i,1),i=qt(),n!==null&&($r(n,1,i),on(n,i))}function mt(n,i,l){if(n.tag===3)Nf(n,n,l);else for(;i!==null;){if(i.tag===3){Nf(i,n,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Xr===null||!Xr.has(h))){n=ms(l,n),n=of(i,n,1),i=Vr(i,n,1),n=qt(),i!==null&&($r(i,1,n),on(i,n));break}}i=i.return}}function hg(n,i,l){var h=n.pingCache;h!==null&&h.delete(i),i=qt(),n.pingedLanes|=n.suspendedLanes&l,Rt===n&&(jt&l)===l&&(Tt===4||Tt===3&&(jt&130023424)===jt&&500>tt()-oc?Ci(n,0):sc|=l),on(n,i)}function Wf(n,i){i===0&&((n.mode&1)===0?i=1:(i=Hi,Hi<<=1,(Hi&130023424)===0&&(Hi=4194304)));var l=qt();n=yr(n,i),n!==null&&($r(n,i,l),on(n,l))}function dg(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Wf(n,l)}function fg(n,i){var l=0;switch(n.tag){case 13:var h=n.stateNode,p=n.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Wf(n,l)}var Uf;Uf=function(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps||tn.current)rn=!0;else{if((n.lanes&l)===0&&(i.flags&128)===0)return rn=!1,eg(n,i,l);rn=(n.flags&131072)!==0}else rn=!1,at&&(i.flags&1048576)!==0&&wd(i,Ma,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Ha(n,i),n=i.pendingProps;var p=as(i,Dt.current);fs(i,l),p=Bu(null,i,h,n,p,l);var g=$u();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,nn(h)?(g=!0,Aa(i)):g=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Eu(i),p.updater=Wa,i.stateNode=p,p._reactInternals=i,Hu(i,h,n,l),i=Xu(null,i,h,!0,g,l)):(i.tag=0,at&&g&&_u(i),Xt(null,i,p,l),i=i.child),i;case 16:h=i.elementType;e:{switch(Ha(n,i),n=i.pendingProps,p=h._init,h=p(h._payload),i.type=h,p=i.tag=mg(h),n=jn(h,n),p){case 0:i=Yu(null,i,h,n,l);break e;case 1:i=mf(null,i,h,n,l);break e;case 11:i=cf(null,i,h,n,l);break e;case 14:i=hf(null,i,h,jn(h.type,n),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:jn(h,p),Yu(n,i,h,p,l);case 1:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:jn(h,p),mf(n,i,h,p,l);case 3:e:{if(gf(i),n===null)throw Error(t(387));h=i.pendingProps,g=i.memoizedState,p=g.element,Ed(n,i),Fa(i,h,null,l);var w=i.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){p=ms(Error(t(423)),i),i=yf(n,i,h,l,p);break e}else if(h!==p){p=ms(Error(t(424)),i),i=yf(n,i,h,l,p);break e}else for(fn=Nr(i.stateNode.containerInfo.firstChild),dn=i,at=!0,Fn=null,l=Pd(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(cs(),h===p){i=vr(n,i,l);break e}Xt(n,i,h,l)}i=i.child}return i;case 5:return Ld(i),n===null&&Su(i),h=i.type,p=i.pendingProps,g=n!==null?n.memoizedProps:null,w=p.children,pu(h,p)?w=null:g!==null&&pu(h,g)&&(i.flags|=32),pf(n,i),Xt(n,i,w,l),i.child;case 6:return n===null&&Su(i),null;case 13:return xf(n,i,l);case 4:return Ru(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=hs(i,null,h,l):Xt(n,i,h,l),i.child;case 11:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:jn(h,p),cf(n,i,h,p,l);case 7:return Xt(n,i,i.pendingProps,l),i.child;case 8:return Xt(n,i,i.pendingProps.children,l),i.child;case 12:return Xt(n,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,p=i.pendingProps,g=i.memoizedProps,w=p.value,Je(Ia,h._currentValue),h._currentValue=w,g!==null)if(zn(g.value,w)){if(g.children===p.children&&!tn.current){i=vr(n,i,l);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var A=g.dependencies;if(A!==null){w=g.child;for(var R=A.firstContext;R!==null;){if(R.context===h){if(g.tag===1){R=xr(-1,l&-l),R.tag=2;var O=g.updateQueue;if(O!==null){O=O.shared;var X=O.pending;X===null?R.next=R:(R.next=X.next,X.next=R),O.pending=R}}g.lanes|=l,R=g.alternate,R!==null&&(R.lanes|=l),Pu(g.return,l,i),A.lanes|=l;break}R=R.next}}else if(g.tag===10)w=g.type===i.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=l,A=w.alternate,A!==null&&(A.lanes|=l),Pu(w,l,i),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===i){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Xt(n,i,p.children,l),i=i.child}return i;case 9:return p=i.type,h=i.pendingProps.children,fs(i,l),p=kn(p),h=h(p),i.flags|=1,Xt(n,i,h,l),i.child;case 14:return h=i.type,p=jn(h,i.pendingProps),p=jn(h.type,p),hf(n,i,h,p,l);case 15:return df(n,i,i.type,i.pendingProps,l);case 17:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:jn(h,p),Ha(n,i),i.tag=1,nn(h)?(n=!0,Aa(i)):n=!1,fs(i,l),nf(i,h,p),Hu(i,h,p,l),Xu(null,i,h,!0,n,l);case 19:return _f(n,i,l);case 22:return ff(n,i,l)}throw Error(t(156,i.tag))};function Hf(n,i){return ia(n,i)}function pg(n,i,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(n,i,l,h){return new pg(n,i,l,h)}function pc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function mg(n){if(typeof n=="function")return pc(n)?1:0;if(n!=null){if(n=n.$$typeof,n===me)return 11;if(n===Ze)return 14}return 2}function Zr(n,i){var l=n.alternate;return l===null?(l=Tn(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function tl(n,i,l,h,p,g){var w=2;if(h=n,typeof n=="function")pc(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case F:return Ti(l.children,p,g,i);case U:w=8,p|=8;break;case G:return n=Tn(12,l,i,p|2),n.elementType=G,n.lanes=g,n;case te:return n=Tn(13,l,i,p),n.elementType=te,n.lanes=g,n;case we:return n=Tn(19,l,i,p),n.elementType=we,n.lanes=g,n;case ne:return nl(l,p,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:w=10;break e;case q:w=9;break e;case me:w=11;break e;case Ze:w=14;break e;case ee:w=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Tn(w,l,i,p),i.elementType=n,i.type=h,i.lanes=g,i}function Ti(n,i,l,h){return n=Tn(7,n,h,i),n.lanes=l,n}function nl(n,i,l,h){return n=Tn(22,n,h,i),n.elementType=ne,n.lanes=l,n.stateNode={isHidden:!1},n}function mc(n,i,l){return n=Tn(6,n,null,i),n.lanes=l,n}function gc(n,i,l){return i=Tn(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function gg(n,i,l,h,p){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Br(0),this.expirationTimes=Br(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function yc(n,i,l,h,p,g,w,A,R){return n=new gg(n,i,l,A,R),i===1?(i=1,g===!0&&(i|=8)):i=0,g=Tn(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eu(g),n}function yg(n,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:h==null?null:""+h,children:n,containerInfo:i,implementation:l}}function Gf(n){if(!n)return Ur;n=n._reactInternals;e:{if(cn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(nn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(nn(l))return xd(n,l,i)}return i}function Vf(n,i,l,h,p,g,w,A,R){return n=yc(l,h,!0,n,p,g,w,A,R),n.context=Gf(null),l=n.current,h=qt(),p=Kr(l),g=xr(h,p),g.callback=i??null,Vr(l,g,p),n.current.lanes=p,$r(n,p,h),on(n,h),n}function rl(n,i,l,h){var p=i.current,g=qt(),w=Kr(p);return l=Gf(l),i.context===null?i.context=l:i.pendingContext=l,i=xr(g,w),i.payload={element:n},h=h===void 0?null:h,h!==null&&(i.callback=h),n=Vr(p,i,w),n!==null&&(Dn(n,p,w,g),za(n,p,w)),w}function il(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Yf(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function xc(n,i){Yf(n,i),(n=n.alternate)&&Yf(n,i)}function xg(){return null}var Xf=typeof reportError=="function"?reportError:function(n){console.error(n)};function vc(n){this._internalRoot=n}sl.prototype.render=vc.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));rl(n,i,null,null)},sl.prototype.unmount=vc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ki(function(){rl(null,n,null,null)}),i[fr]=null}};function sl(n){this._internalRoot=n}sl.prototype.unstable_scheduleHydration=function(n){if(n){var i=ha();n={blockedOn:null,target:n,priority:i};for(var l=0;l<Zn.length&&i!==0&&i<Zn[l].priority;l++);Zn.splice(l,0,n),l===0&&fa(n)}};function _c(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ol(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function qf(){}function vg(n,i,l,h,p){if(p){if(typeof h=="function"){var g=h;h=function(){var O=il(w);g.call(O)}}var w=Vf(i,h,n,0,null,!1,!1,"",qf);return n._reactRootContainer=w,n[fr]=w.current,oo(n.nodeType===8?n.parentNode:n),ki(),w}for(;p=n.lastChild;)n.removeChild(p);if(typeof h=="function"){var A=h;h=function(){var O=il(R);A.call(O)}}var R=yc(n,0,!1,null,null,!1,!1,"",qf);return n._reactRootContainer=R,n[fr]=R.current,oo(n.nodeType===8?n.parentNode:n),ki(function(){rl(i,R,l,h)}),R}function al(n,i,l,h,p){var g=l._reactRootContainer;if(g){var w=g;if(typeof p=="function"){var A=p;p=function(){var R=il(w);A.call(R)}}rl(i,w,n,p)}else w=vg(l,i,n,p,h);return il(w)}ua=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var l=li(i.pendingLanes);l!==0&&(Yi(i,l|1),on(i,tt()),(He&6)===0&&(xs=tt()+500,Hr()))}break;case 13:ki(function(){var h=yr(n,1);if(h!==null){var p=qt();Dn(h,n,1,p)}}),xc(n,1)}},Qs=function(n){if(n.tag===13){var i=yr(n,134217728);if(i!==null){var l=qt();Dn(i,n,134217728,l)}xc(n,134217728)}},ca=function(n){if(n.tag===13){var i=Kr(n),l=yr(n,i);if(l!==null){var h=qt();Dn(l,n,i,h)}xc(n,i)}},ha=function(){return Ge},da=function(n,i){var l=Ge;try{return Ge=n,i()}finally{Ge=l}},Lr=function(n,i,l){switch(i){case"input":if(Er(n,l),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==n&&h.form===n.form){var p=ka(h);if(!p)throw Error(t(90));zt(h),Er(h,p)}}}break;case"textarea":Bs(n,l);break;case"select":i=l.value,i!=null&&Yn(n,!!l.multiple,i,!1)}},Mt=hc,Oi=ki;var _g={usingClientEntryPoint:!1,Events:[uo,ss,ka,Be,Ns,hc]},ko={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wg={bundleType:ko.bundleType,version:ko.version,rendererPackageName:ko.rendererPackageName,rendererConfig:ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Gs(n),n===null?null:n.stateNode},findFiberByHostInstance:ko.findFiberByHostInstance||xg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ll.isDisabled&&ll.supportsFiber)try{oi=ll.inject(wg),vn=ll}catch{}}return an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_g,an.createPortal=function(n,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_c(i))throw Error(t(200));return yg(n,i,null,l)},an.createRoot=function(n,i){if(!_c(n))throw Error(t(299));var l=!1,h="",p=Xf;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=yc(n,1,!1,null,null,l,!1,h,p),n[fr]=i.current,oo(n.nodeType===8?n.parentNode:n),new vc(i)},an.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Gs(i),n=n===null?null:n.stateNode,n},an.flushSync=function(n){return ki(n)},an.hydrate=function(n,i,l){if(!ol(i))throw Error(t(200));return al(null,n,i,!0,l)},an.hydrateRoot=function(n,i,l){if(!_c(n))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,g="",w=Xf;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),i=Vf(i,null,n,1,l??null,p,!1,g,w),n[fr]=i.current,oo(n),h)for(n=0;n<h.length;n++)l=h[n],p=l._getVersion,p=p(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,p]:i.mutableSourceEagerHydrationData.push(l,p);return new sl(i)},an.render=function(n,i,l){if(!ol(i))throw Error(t(200));return al(null,n,i,!1,l)},an.unmountComponentAtNode=function(n){if(!ol(n))throw Error(t(40));return n._reactRootContainer?(ki(function(){al(null,null,n,!1,function(){n._reactRootContainer=null,n[fr]=null})}),!0):!1},an.unstable_batchedUpdates=hc,an.unstable_renderSubtreeIntoContainer=function(n,i,l,h){if(!ol(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return al(n,i,l,!1,h)},an.version="18.3.1-next-f1338f8080-20240426",an}var r1;function Mg(){if(r1)return Sc.exports;r1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sc.exports=Pg(),Sc.exports}var i1;function Eg(){if(i1)return ul;i1=1;var r=Mg();return ul.createRoot=r.createRoot,ul.hydrateRoot=r.hydrateRoot,ul}var Rg=Eg();const Ig=bh(Rg);var J=Sh();const wr={id:"pj-1",nom:{nomcomplet:"Test Hero",prenom:"Aryn",surnom:"the Blue"},age:25,sexe:"H",taille:175,poids:70,vitesse:9,langues:"Common",alignement:"Neutral Good",raceId:"human",backgroundId:"adventurer",niveauGlobal:1,classe:{1:{classeId:"fighter",subclasseId:"champion",niveau:1}},xp:0,dv:10,maitriseBonus:2,pvActuels:12,pvMax:12,pvTmp:0,calculPvMax:{classe1:{niveauGlobal_1:"10 + modCON",par_niveau_apres_1:"1d10 + modCON"},classe2:{par_niveau_apres_1:""}},CA:16,CalculCA:{base:"10 + modDEX",bonusArmure:"+ armor proficiency + shield"},nivFatigueActuel:0,nivFatigueMax:3,initiative:"modDEX",besoin:[],caracs:{force:{FOR:16,modFOR:3},dexterite:{DEX:14,modDEX:2},constitution:{CON:14,modCON:2},intelligence:{INT:10,modINT:0},sagesse:{SAG:12,modSAG:1},charisme:{CHA:10,modCHA:0}},competences:{},percPassive:11,proficiencies:{},savingThrows:["force","constitution"],inspiration:!1,traits:["Veteran soldier","Brave"],features:[],compteur:{},ressources:{},etats:[],historique:[],notes:"",argent:{cuivre:0,argent:0,or:10,platine:0},materielSlots:{Ceinture_gauche:null,Ceinture_droite:null,Dos_gauche:null,Dos_droit:null,Armure:null,Vetement:null,paquetage:null,accessoire:null},armesDefaut:{main_droite:null,main_gauche:null,mains:null},Inventaire:{id:"",idUnique:"",quantite:0,mod:null,conteneur:null},capaMax:120,capaAvantMalus:60,capaActuel:0,StatEncombrement:"Not encumbered",descriptionPersonnage:{bio:"Test hero for the mini-game.",physique:"Athletic human in light armor.",personnalite:"Calm and determined.",objectifs:"Explore the test dungeon.",relations:"",defauts:"Too reckless."},uiClasse:{ui_template1:"fighter_base",ui_template2:null},SpellcastingSpec:{ability:null,spellSaveDc:null,spellAttackMod:null,slots:{},focusId:null,description:null,spellIds:[]}},kr=12,ar=8,ht=64,Bo=kr*ht,Tl=ar*ht,T0=ht,kh=ht*.5,P0=Bo/2,M0=kh*2,Lg=1841961;function Tr(r,e){return r>=0&&r<kr&&e>=0&&e<ar}function Pn(r,e){const t=T0/2,s=kh/2,o=(r-e)*t+P0,a=(r+e)*s+M0;return{x:o,y:a}}function zg(r,e){const t=T0/2,s=kh/2,o=r-P0,a=e-M0,u=o/t,c=a/s,d=(u+c)/2,f=(c-u)/2,m=Math.round(d),y=Math.round(f);return{x:m,y}}function E0(r,e,t,s){const o=[];for(let a=-s;a<=s;a++)for(let u=-s;u<=s;u++){const c=e+u,d=t+a;if(!Tr(c,d))continue;Math.sqrt(u*u+a*a)<=s+.01&&o.push({x:c,y:d})}return{id:r,type:"circle",cells:o}}function Fg(r,e,t,s,o){const a=[],u=Math.floor(s/2),c=Math.floor(o/2);for(let d=t-c;d<=t+c;d++)for(let f=e-u;f<=e+u;f++)Tr(f,d)&&a.push({x:f,y:d});return{id:r,type:"rectangle",cells:a}}function R0(r,e,t,s,o,a){const u=[],d=typeof a=="number"&&a>0&&a<180?a*Math.PI/360:null;for(let f=1;f<=s;f++){let m=f;if(d!==null){const y=Math.tan(d)*f;m=Math.floor(y),m<0&&(m=0),m>f&&(m=f)}for(let y=-m;y<=m;y++){let x=e,v=t;switch(o){case"right":x=e+f,v=t+y;break;case"left":x=e-f,v=t+y;break;case"down":x=e+y,v=t+f;break;case"up":x=e+y,v=t-f;break}Tr(x,v)&&u.push({x,y:v})}}return{id:r,type:"cone",cells:u}}const jg=30,Bg={shape:"cone",range:jg};function $g(r){return r.facing?r.facing:r.type==="player"?"right":"left"}function Dg(r){return r.visionProfile?r.visionProfile:Bg}function I0(r){const e=Dg(r),t=$g(r),s=`vision-${r.id}`;return e.range<=0?{id:s,type:e.shape==="circle"?"circle":"cone",cells:[]}:e.shape==="circle"?E0(s,r.x,r.y,e.range):R0(s,r.x,r.y,e.range,t,e.apertureDeg)}function s1(r){return`${r.x},${r.y}`}function L0(r,e){const t=I0(r);if(!t.cells.length)return[];const s=new Set;for(const o of t.cells)s.add(s1(o));return e.filter(o=>o.id!==r.id&&o.hp>0&&s.has(s1({x:o.x,y:o.y})))}function Ch(r,e,t){return e.hp<=0?!1:L0(r,t).some(o=>o.id===e.id)}function Rl(r,e,t){return Math.max(e,Math.min(t,r))}function bs(r,e){return Math.abs(r.x-e.x)+Math.abs(r.y-e.y)}function Ut(r){return r.hp<=0}function o1(r,e,t){return Ut(r)||Ut(e)?!1:Ch(r,e,t)}const Og=["./brute.json","./archer.json","./assassin.json","./ghost.json"],a1={types:Og},Ng="brute",Wg="Brute",Ug="Frontliner robuste qui avance pour engager le joueur.",Hg="brute",Gg=["enemy-move","enemy-melee-strike"],Vg={preferredRangeMin:1,preferredRangeMax:1,panicRange:0},Yg={raceOrOrigin:"Brute mercenaire",register:"familier",tone:["agressif","direct","impatient"],vocabulary:["charge","ecrase","avance","finissons-en"],quirks:["phrases courtes","menaces simples"],taboos:["pas de modernisme","pas de meta-jeu"]},Xg={hp:10,moveRange:3,attackDamage:2,armorClass:14,attackRange:1,maxAttacksPerTurn:2},qg={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},Kg={shape:"cone",range:4,apertureDeg:90,canSeeInDark:!1},Qg={id:Ng,label:Wg,description:Ug,aiRole:Hg,actions:Gg,behavior:Vg,speechProfile:Yg,baseStats:Xg,movement:qg,vision:Kg},Zg="archer",Jg="Archer",e2="Tireur qui prefere garder une distance de securite avant de frapper.",t2="archer",n2=["enemy-move","enemy-bow-shot","enemy-melee-strike"],r2={preferredRangeMin:3,preferredRangeMax:6,panicRange:2},i2={raceOrOrigin:"Archer de bande",register:"neutre",tone:["tactique","moqueur","vigilant"],vocabulary:["a couvert","recule","je l'ai en vue","distance"],quirks:["annonce ce qu'il voit","donne des consignes courtes"],taboos:["pas de modernisme","pas de meta-jeu"]},s2={hp:7,moveRange:2,attackDamage:2,armorClass:13,attackRange:6,maxAttacksPerTurn:1},o2={type:"ground",speed:2,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},a2={shape:"cone",range:15,apertureDeg:60,canSeeInDark:!1},l2={id:Zg,label:Jg,description:e2,aiRole:t2,actions:n2,behavior:r2,speechProfile:i2,baseStats:s2,movement:o2,vision:a2},u2="assassin",c2="Assassin",h2="Frappeur rapide qui cherche a se rapprocher pour porter un coup decisif.",d2="assassin",f2=["enemy-move","enemy-melee-strike"],p2={preferredRangeMin:1,preferredRangeMax:1,panicRange:0},m2={raceOrOrigin:"Assassin",register:"soutenu",tone:["froid","tranchant","calme"],vocabulary:["silence","cible","dans l'ombre","fin"],quirks:["parle peu","phrases courtes et precises"],taboos:["pas de modernisme","pas de meta-jeu"]},g2={hp:6,moveRange:3,attackDamage:3,armorClass:15},y2={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},x2={shape:"cone",range:6,apertureDeg:80,canSeeInDark:!1},v2={id:u2,label:c2,description:h2,aiRole:d2,actions:f2,behavior:p2,speechProfile:m2,baseStats:g2,movement:y2,vision:x2},_2="ghost",w2="Fantome",b2="Esprit intangible capable de traverser les autres creatures.",S2="ghost",k2=["enemy-move","enemy-melee-strike"],C2={preferredRangeMin:1,preferredRangeMax:1,panicRange:0},A2={raceOrOrigin:"Esprit vengeur",register:"soutenu",tone:["cryptique","menaant","surnaturel"],vocabulary:["je te sens","au-dela","froideur","souffle"],quirks:["parle en images","phrases etranges mais courtes"],taboos:["pas de modernisme","pas de meta-jeu"]},T2={hp:8,moveRange:4,attackDamage:3,armorClass:12},P2={type:"ghost",speed:4,canPassThroughWalls:!0,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},M2={shape:"circle",range:6,canSeeInDark:!0},E2={id:_2,label:w2,description:b2,aiRole:S2,actions:k2,behavior:C2,speechProfile:A2,baseStats:T2,movement:P2,vision:M2},R2=["./melee-strike.json","./dash.json","./second-wind.json","./throw-dagger.json","./enemy-move.json","./enemy-melee-strike.json","./enemy-bow-shot.json"],l1={actions:R2},I2="melee-strike",L2="Frappe basique",z2="Attaque de melee simple contre une cible a 1 case.",F2="attack",j2={actionType:"action",movementCost:0},B2={target:"enemy",range:{min:0,max:1,shape:"single"},maxTargets:1,requiresLos:!0},$2={perTurn:1,perEncounter:null,resource:null},D2=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_max",target:"primary",max:1,reason:"Portee de melee uniquement."},{type:"target_alive",target:"primary",reason:"La cible doit avoir des PV restants."}],O2={bonus:5,critRange:20},N2={formula:"1d6+3",critRule:"double-dice",damageType:"slashing"},W2=[{type:"damage",target:"primary",formula:"1d6 + modFOR",damageType:"slashing"},{type:"log",message:"Frappe basique inflige 1d6+FOR a la cible."}],U2={priority:"finish_low_hp_target",successLog:"Attaque de melee effectuee.",failureLog:"Cible hors portee ou deja a terre."},H2=["martial","arme","starter"],G2={id:I2,name:L2,summary:z2,category:F2,actionCost:j2,targeting:B2,usage:$2,conditions:D2,attack:O2,damage:N2,effects:W2,aiHints:U2,tags:H2},V2="dash",Y2="Course",X2="Transforme l'action en 3 cases de mouvement en plus.",q2="movement",K2={actionType:"action",movementCost:0},Q2={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},Z2={perTurn:1,perEncounter:null,resource:null},J2=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."}],ey=[{type:"modify_path_limit",target:"self",delta:3,duration:"this_turn"},{type:"log",message:"Course: +3 cases de mouvement pour ce tour."}],ty={priority:"close_gap",successLog:"Course utilisee pour approcher.",failureLog:"Deja a portee, course ignoree."},ny=["mobilite","deplacement"],ry={id:V2,name:Y2,summary:X2,category:q2,actionCost:K2,targeting:Q2,usage:Z2,conditions:J2,effects:ey,aiHints:ty,tags:ny},iy="second-wind",sy="Second souffle",oy="Restaure une partie des PV en bonus action.",ay="support",ly={actionType:"bonus",movementCost:0},uy={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},cy={perTurn:null,perEncounter:1,resource:null},hy=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"stat_below_percent",who:"self",stat:"hp",percentMax:.75,reason:"Economiser tant que les PV sont hauts."}],dy=[{type:"heal",target:"self",formula:"1d10 + niveau",min:1},{type:"temp_hp",target:"self",amount:2,duration:"end_of_turn"},{type:"log",message:"Second souffle: soigne 1d10 + niveau."}],fy={priority:"survive",successLog:"Second souffle declenche.",failureLog:"PV trop hauts ou tour non joueur."},py=["soin","defense","survie"],my={id:iy,name:sy,summary:oy,category:ay,actionCost:ly,targeting:uy,usage:cy,conditions:hy,effects:dy,aiHints:fy,tags:py},gy="throw-dagger",yy="Lancer de dague",xy="Attaque a distance courte avec une dague a lancer.",vy="attack",_y={actionType:"action",movementCost:0},wy={target:"enemy",range:{min:1,max:4,shape:"single"},maxTargets:1,requiresLos:!0},by={perTurn:1,perEncounter:null,resource:{name:"dagger",pool:"bandolier",min:1}},Sy=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_between",target:"primary",min:1,max:4,reason:"Hors de melee mais a portee de lancer."},{type:"resource_at_least",resource:"dagger",pool:"bandolier",value:1,reason:"Besoin d'une dague a lancer."}],ky={bonus:4,critRange:20},Cy={formula:"1d4+2",critRule:"double-dice",damageType:"piercing"},Ay=[{type:"damage",target:"primary",formula:"1d4 + modDEX",damageType:"piercing"},{type:"resource_spend",resource:"dagger",pool:"bandolier",amount:1},{type:"log",message:"Dague lancee: 1d4+DEX degats perforants."}],Ty={priority:"poke_from_range",successLog:"Dague lancee.",failureLog:"Pas de dague ou cible hors portee."},Py=["distance","arme","jet"],My={id:gy,name:yy,summary:xy,category:vy,actionCost:_y,targeting:wy,usage:by,conditions:Sy,attack:ky,damage:Cy,effects:Ay,aiHints:Ty,tags:Py},Ey="enemy-move",Ry="Deplacement (ennemi)",Iy="Deplacement tactique vers une case cible (portee base: moveRange).",Ly="movement",zy={actionType:"action",movementCost:0},Fy={target:"emptyCell",range:{min:1,max:3,shape:"single"},maxTargets:1,requiresLos:!1},jy={perTurn:1,perEncounter:null,resource:null},By=[],$y=[{type:"move_to",target:"self",maxSteps:"moveRange"},{type:"log",message:"L'ennemi se deplace."}],Dy={priority:"positioning",successLog:"Deplacement.",failureLog:"Aucun chemin valide."},Oy=["enemy","movement"],Ny={id:Ey,name:Ry,summary:Iy,category:Ly,actionCost:zy,targeting:Fy,usage:jy,conditions:By,effects:$y,aiHints:Dy,tags:Oy},Wy="enemy-melee-strike",Uy="Frappe (ennemi)",Hy="Attaque de melee simple contre le joueur a 1 case.",Gy="attack",Vy={actionType:"action",movementCost:0},Yy={target:"player",range:{min:0,max:1,shape:"single"},maxTargets:1,requiresLos:!0},Xy={perTurn:1,perEncounter:null,resource:null},qy=[{type:"target_alive",target:"primary",reason:"Le joueur doit etre en vie."}],Ky={bonus:4,critRange:20},Qy={formula:"attackDamage",critRule:"double-dice",damageType:"slashing"},Zy=[{type:"damage",target:"primary",formula:"attackDamage",damageType:"slashing"},{type:"log",message:"L'ennemi frappe au contact."}],Jy={priority:"finish_low_hp_target",successLog:"Frappe au contact.",failureLog:"Joueur hors portee ou non visible."},e3=["enemy","melee"],t3={id:Wy,name:Uy,summary:Hy,category:Gy,actionCost:Vy,targeting:Yy,usage:Xy,conditions:qy,attack:Ky,damage:Qy,effects:Zy,aiHints:Jy,tags:e3},n3="enemy-bow-shot",r3="Tir a l'arc (ennemi)",i3="Tir a distance contre le joueur, prefere eviter la melee.",s3="attack",o3={actionType:"action",movementCost:0},a3={target:"player",range:{min:2,max:6,shape:"single"},maxTargets:1,requiresLos:!0},l3={perTurn:1,perEncounter:null,resource:null},u3=[{type:"target_alive",target:"primary",reason:"Le joueur doit etre en vie."}],c3={bonus:5,critRange:20},h3={formula:"attackDamage",critRule:"double-dice",damageType:"piercing"},d3=[{type:"damage",target:"primary",formula:"attackDamage",damageType:"piercing"},{type:"log",message:"Une fleche siffle dans l'air."}],f3={priority:"poke_from_range",successLog:"Tir a l'arc.",failureLog:"Joueur hors portee/ligne de vue ou trop proche."},p3=["enemy","distance","bow"],m3={id:n3,name:r3,summary:i3,category:s3,actionCost:o3,targeting:a3,usage:l3,conditions:u3,attack:c3,damage:h3,effects:d3,aiHints:f3,tags:p3};function Ss(r,e=1){const t=[];for(let o=0;o<e;o++)t.push(1+Math.floor(Math.random()*r));const s=t.reduce((o,a)=>o+a,0);return{rolls:t,total:s}}function z0(r,e="normal",t=20){if(e==="advantage"){const o=Ss(20),a=Ss(20),u=Math.max(o.total,a.total);return{d20:{rolls:[o.total,a.total],total:u},bonus:r,total:u+r,mode:e,isCrit:u>=t}}if(e==="disadvantage"){const o=Ss(20),a=Ss(20),u=Math.min(o.total,a.total);return{d20:{rolls:[o.total,a.total],total:u},bonus:r,total:u+r,mode:e,isCrit:u>=t}}const s=Ss(20);return{d20:s,bonus:r,total:s.total+r,mode:e,isCrit:s.total>=t}}function g3(r){const e=[],s=r.replace(/\s+/g,"").split(/(?=[+-])/);for(const o of s){if(!o)continue;const a=o.startsWith("-")?-1:1,u=o.replace(/^[+-]/,""),c=u.match(/^(\d*)d(\d+)$/i);if(c){const f=c[1]?parseInt(c[1],10):1,m=parseInt(c[2],10);e.push({diceCount:a*f,diceSides:m,modifier:0});continue}const d=parseInt(u,10);Number.isNaN(d)||e.push({diceCount:0,diceSides:0,modifier:a*d})}return e}function eh(r,e){const t=!!(e!=null&&e.isCrit),s=(e==null?void 0:e.critRule)??"double-dice",o=g3(r),a=[];let u=0;for(const f of o)if(f.diceCount!==0&&f.diceSides>0){const m=Math.abs(f.diceCount),y=t&&s==="double-dice"?m*2:m,x=Ss(f.diceSides,y);a.push(f.diceCount<0?{rolls:x.rolls,total:-x.total}:x)}else u+=f.modifier;let d=a.reduce((f,m)=>f+m.total,0)+u;return t&&s==="double-total"&&(d*=2),{dice:a,flatModifier:u,total:d,formula:r,isCrit:t}}function Ac(r,e){return`${r},${e}`}function y3(r){return r.movementProfile?r.movementProfile:typeof r.moveRange=="number"?{type:"ground",speed:r.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1}:null}function x3(r,e,t,s,o,a,u){if(t<0||s<0||t>=kr||s>=ar||!Tr(t,s))return!1;const c=t===u.x&&s===u.y;return!o.some(f=>f.id!==r.id&&f.hp>0&&f.x===t&&f.y===s)||c&&a?!0:e&&e.canPassThroughEntities?!(c&&e.canStopOnOccupiedTile===!1):!1}function th(r,e,t,s){const o=y3(r),a=o&&o.speed>0?Math.min(s.maxDistance,o.speed):s.maxDistance,u={x:r.x,y:r.y};if(u.x===e.x&&u.y===e.y)return[];const c=new Set,d=new Map,f=new Map,m=[],y=Ac(u.x,u.y);c.add(y),d.set(y,null),f.set(y,0),m.push(u);let x=null;const v=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];for(;m.length>0;){const E=m.shift(),P=Ac(E.x,E.y),N=f.get(P)??0;if(!(N>=a))for(const D of v){const F=E.x+D.x,U=E.y+D.y,G=Ac(F,U);if(c.has(G)||!x3(r,o,F,U,t,s.allowTargetOccupied??!1,e))continue;c.add(G),d.set(G,P),f.set(G,N+1);const Y={x:F,y:U};if(m.push(Y),F===e.x&&U===e.y){x=G,m.length=0;break}}}let b=x;if(!b){let E=null,P=Number.POSITIVE_INFINITY;for(const N of c){const[D,F]=N.split(",").map(Number),U=Math.abs(D-e.x)+Math.abs(F-e.y),G=f.get(N)??0;G!==0&&(G>a||U<P&&(P=U,E=N))}if(!E)return[];b=E}const S=[];let _=b;for(;_;){const[E,P]=_.split(",").map(Number);if(S.push({x:E,y:P}),_===y)break;_=d.get(_)??null}const T=S.reverse(),M=a+1;return T.length>M?T.slice(0,M):T}function v3(r,e){var s,o,a,u,c,d,f,m,y,x;const t=e.actor;if(r.toLowerCase()==="attackdamage")return typeof t.attackDamage=="number"?t.attackDamage:0;if(r.toLowerCase()==="moverange")return typeof t.moveRange=="number"?t.moveRange:0;if(r.toLowerCase()==="attackrange")return typeof t.attackRange=="number"?t.attackRange:1;if(r.toLowerCase()==="niveau"){const v=Number(((s=e.sampleCharacter)==null?void 0:s.niveauGlobal)??1);return Number.isFinite(v)?v:1}if(r.toLowerCase()==="modfor"){const v=Number(((u=(a=(o=e.sampleCharacter)==null?void 0:o.caracs)==null?void 0:a.force)==null?void 0:u.modFOR)??0);return Number.isFinite(v)?v:0}if(r.toLowerCase()==="moddex"){const v=Number(((f=(d=(c=e.sampleCharacter)==null?void 0:c.caracs)==null?void 0:d.dexterite)==null?void 0:f.modDEX)??0);return Number.isFinite(v)?v:0}if(r.toLowerCase()==="modcon"){const v=Number(((x=(y=(m=e.sampleCharacter)==null?void 0:m.caracs)==null?void 0:y.constitution)==null?void 0:x.modCON)??0);return Number.isFinite(v)?v:0}return null}function u1(r,e){const t=String(r??"");return t.trim()?t.replace(/[A-Za-z_][A-Za-z0-9_]*/g,s=>{const o=v3(s,e);return o===null?s:String(o)}):"0"}function _3(r,e,t){var s,o;return t.kind==="token"?t.token:((s=r.targeting)==null?void 0:s.target)==="player"?e.player:(((o=r.targeting)==null?void 0:o.target)==="enemy",null)}function w3(r,e,t){const s=e.actor,o=[e.player,...e.enemies],a=r.targeting;if(!a)return{ok:!1,reason:"Action sans ciblage."};if(a.target==="self")return{ok:!0};if(a.target==="player"){const u=e.player;if(u.hp<=0)return{ok:!1,reason:"Le joueur est deja a terre."};const c=bs(s,u),d=a.range;if(d){if(typeof d.min=="number"&&c<d.min)return{ok:!1,reason:`Cible trop proche pour ${r.name} (distance ${c}, min ${d.min}).`};if(typeof d.max=="number"&&c>d.max)return{ok:!1,reason:`Cible hors portee pour ${r.name} (distance ${c}, max ${d.max}).`}}for(const f of r.conditions||[]){if(f.type==="target_alive"&&u.hp<=0)return{ok:!1,reason:f.reason||"La cible doit avoir des PV restants."};if(f.type==="distance_max"&&typeof f.max=="number"&&c>f.max)return{ok:!1,reason:f.reason||`Distance cible > ${f.max}.`};if(f.type==="distance_between"){const m=typeof f.min=="number"?f.min:(d==null?void 0:d.min)??null,y=typeof f.max=="number"?f.max:(d==null?void 0:d.max)??null;if(m!==null&&c<m)return{ok:!1,reason:f.reason||`Distance cible < ${m}.`};if(y!==null&&c>y)return{ok:!1,reason:f.reason||`Distance cible > ${y}.`}}}return a.requiresLos&&!Ch(s,u,o)?{ok:!1,reason:"Cible hors vision (ligne de vue requise)."}:{ok:!0}}return a.target==="emptyCell"||a.target==="cell"?t.kind!=="cell"?{ok:!1,reason:"Cible de case manquante."}:Tr(t.x,t.y)?{ok:!0}:{ok:!1,reason:"Case hors plateau."}:{ok:!1,reason:"Type de ciblage non supporte."}}function b3(r,e){var a;const t=[],s=[];for(const u of r.conditions||[])u.type==="phase"&&u.mustBe&&u.mustBe!==e.phase&&t.push(u.reason||"Phase incorrecte.");const o=(a=r.usage)==null?void 0:a.resource;if(e.getResourceAmount&&(o!=null&&o.name)&&typeof o.min=="number"){const u=e.getResourceAmount(o.name,o.pool??null);if(u<o.min){const c=o.pool?` (${o.pool})`:"";t.push(`Ressource insuffisante: ${o.name}${c} (${u}/${o.min}).`)}}return{enabled:t.length===0,reasons:t,details:s}}function S3(r,e,t,s){var v,b;const o=[],a=S=>{var _;o.push(S),(_=e.onLog)==null||_.call(e,S)},u=b3(r,e);if(!u.enabled)return{ok:!1,reason:u.reasons.join(" | "),logs:o};const c=w3(r,e,t);if(!c.ok)return{ok:!1,reason:c.reason,logs:o};const d={...e.actor};let f={...e.player};const m=e.enemies.map(S=>({...S})),y=S=>{var _;(_=e.emitEvent)==null||_.call(e,S)},x=()=>{if(d.type!=="enemy")return;const S=m.findIndex(_=>_.id===d.id);S>=0&&(m[S]=d)};for(const S of r.effects||[]){if(S.type==="log"&&typeof S.message=="string"){a(S.message);continue}if(S.type==="resource_spend"&&S.resource&&e.spendResource){const _=typeof S.pool=="string"?S.pool:null,T=typeof S.amount=="number"?S.amount:1;e.spendResource(String(S.resource),_,T);continue}if(S.type==="damage"&&S.target==="primary"){const _=_3(r,e,t);if(!_)continue;const T=(s==null?void 0:s.advantageMode)??"normal",M=((v=r.damage)==null?void 0:v.critRule)??"double-dice",E=u1(S.formula??((b=r.damage)==null?void 0:b.formula)??"0",e);let P=!0,N=!1,D=null,F=null;const U=typeof _.armorClass=="number"?_.armorClass:null;if(F=U,r.attack){const te=z0(r.attack.bonus,T,r.attack.critRange??20);N=te.isCrit,D=te.total,U!==null&&(P=te.total>=U||te.isCrit);const we=te.mode==="normal"?`${te.d20.total}`:`${te.d20.rolls.join(" / ")} -> ${te.d20.total}`;a(`Jet de touche (${r.name}) : ${we} + ${te.bonus} = ${te.total}`+(U!==null?` vs CA ${U}`:"")+(te.isCrit?" (critique!)":""))}if(!P){a(`L'attaque (${r.name}) rate sa cible. Pas de degats.`);const te=d.type==="enemy"?"enemy_attack":"player_attack";y({kind:te,actorId:d.id,actorKind:d.type,targetId:_.id,targetKind:_.type,summary:`${d.id} rate ${_.id} avec ${r.name}.`,data:{actionId:r.id,actionName:r.name,isHit:!1,isCrit:!1,damage:0,attackRollTotal:D,targetArmorClass:F}});continue}const G=eh(E,{isCrit:N,critRule:M}),Y=_.hp,q=Math.max(0,Y-G.total);if(_.type==="player")f={...f,hp:q},a(`${r.name} inflige ${G.total} degats au joueur (PV ${Y} -> ${q}).`);else{const te=m.findIndex(we=>we.id===_.id);te>=0&&(m[te]={...m[te],hp:q},a(`${r.name} inflige ${G.total} degats a ${_.id} (PV ${Y} -> ${q}).`))}const me=d.type==="enemy"?"enemy_attack":"player_attack";y({kind:me,actorId:d.id,actorKind:d.type,targetId:_.id,targetKind:_.type,summary:G.total>0?`${d.id} touche ${_.id} avec ${r.name} et inflige ${G.total} degats (PV ${Y} -> ${q}).`:`${d.id} touche ${_.id} avec ${r.name} (pas de degats).`,data:{actionId:r.id,actionName:r.name,isHit:!0,isCrit:N,damage:G.total,damageFormula:G.formula,attackRollTotal:D,targetArmorClass:F,targetHpBefore:Y,targetHpAfter:q}}),y({kind:"damage",actorId:d.id,actorKind:d.type,targetId:_.id,targetKind:_.type,summary:`${_.id} subit ${G.total} degats (${r.name}).`,data:{sourceActionId:r.id,sourceActionName:r.name,damage:G.total,isCrit:N,targetHpBefore:Y,targetHpAfter:q}});continue}if(S.type==="move_to"&&S.target==="self"){if(t.kind!=="cell")return{ok:!1,reason:"Move: cible de case manquante.",logs:o};const _=S.maxSteps;let T=null;if(typeof _=="number")T=_;else if(typeof _=="string"){const U=u1(_,e),G=Number.parseInt(U,10);T=Number.isFinite(G)?G:null}T===null&&(T=typeof d.moveRange=="number"?d.moveRange:3);const M=Rl(t.x,0,kr-1),E=Rl(t.y,0,ar-1);if(!Tr(M,E))return{ok:!1,reason:"Move: case hors plateau.",logs:o};const P=[f,...m],N=th(d,{x:M,y:E},P,{maxDistance:Math.max(0,T),allowTargetOccupied:!1});if(d.plannedPath=N,N.length===0)return{ok:!1,reason:"Move: aucun chemin valide.",logs:o};const D={x:d.x,y:d.y},F=N[N.length-1];d.x=F.x,d.y=F.y,x(),a(`${d.id} se deplace vers (${F.x}, ${F.y}).`),y({kind:"move",actorId:d.id,actorKind:d.type,summary:`${d.id} se deplace de (${D.x}, ${D.y}) vers (${F.x}, ${F.y}).`,data:{actionId:r.id,actionName:r.name,from:D,to:F,path:N}});continue}}return x(),{ok:!0,logs:o,actorAfter:d,playerAfter:f,enemiesAfter:m}}function Tc(r,e){return e.find(t=>t.hp>0&&t.x===r.x&&t.y===r.y)??null}const qe={active:!1,round:null,stateStart:null,events:[],enemySpeeches:[],lastSpeechByEnemyThisRound:new Map};let k3=0;const F0=new Map;function C3(r,e){qe.active=!0,qe.round=r,qe.stateStart=e,qe.events=[],qe.enemySpeeches=[],qe.lastSpeechByEnemyThisRound=new Map}function mn(r){if(!qe.active||qe.round!==null&&r.round!==qe.round)return;const e={id:`evt-${Date.now()}-${k3++}`,round:r.round,phase:r.phase,kind:r.kind,actorId:r.actorId,actorKind:r.actorKind,targetId:r.targetId??null,targetKind:r.targetKind??null,summary:r.summary,data:r.data??{},timestamp:Date.now()};qe.events.push(e)}function A3(r,e){if(!qe.active)return;const t=(e??"").trim();t&&(qe.enemySpeeches.push({enemyId:r,line:t}),qe.lastSpeechByEnemyThisRound.set(r,t),F0.set(r,t),qe.round!==null&&mn({round:qe.round,phase:"enemies",kind:"speech",actorId:r,actorKind:"enemy",summary:`${r} dit: "${t}"`,data:{line:t}}))}function T3(){return qe.enemySpeeches.slice()}function P3(r){return F0.get(r)??null}function M3(r){return!Number.isFinite(r)||r<=0?qe.events.slice():qe.events.slice(-Math.floor(r))}function E3(r){return!qe.active||!qe.stateStart||qe.round===null?null:{language:"fr",focusSide:"player",focusActorId:r.focusActorId,stateStart:qe.stateStart,stateEnd:r.stateEnd,events:qe.events.slice(),enemySpeeches:qe.enemySpeeches.slice()}}function R3(){qe.active=!1,qe.round=null,qe.stateStart=null,qe.events=[],qe.enemySpeeches=[],qe.lastSpeechByEnemyThisRound=new Map}async function I3(r){const e=await fetch("/api/narration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)return{summary:"",error:"IA non fonctionnel."};const t=await e.json();return!t||typeof t.summary!="string"?{summary:"",error:"IA non fonctionnel."}:t.error&&typeof t.error=="string"?{summary:"",error:t.error}:{summary:t.summary}}async function L3(r){const e=await fetch("/api/enemy-speech",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)return{line:""};const t=await e.json();return!t||typeof t.line!="string"?{line:""}:{line:t.line}}const z3="modulepreload",F3=function(r){return"/"+r},c1={},Il=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let u=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=u(t.map(f=>{if(f=F3(f),f in c1)return;c1[f]=!0;const m=f.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":z3,m||(x.as="script"),x.crossOrigin="",x.href=f,d&&x.setAttribute("nonce",d),document.head.appendChild(x),m)return new Promise((v,b)=>{x.addEventListener("load",v),x.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return o.then(u=>{for(const c of u||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};var xe=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(xe||{});const nh=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},cl=(r,e)=>nh(r).priority??e,$t={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(nh).forEach(e=>{e.type.forEach(t=>{var s,o;return(o=(s=this._removeHandlers)[t])==null?void 0:o.call(s,e)})}),this},add(...r){return r.map(nh).forEach(e=>{e.type.forEach(t=>{var a,u;const s=this._addHandlers,o=this._queue;s[t]?(u=s[t])==null||u.call(s,e):(o[t]=o[t]||[],(a=o[t])==null||a.push(e))})}),this},handle(r,e,t){var u;const s=this._addHandlers,o=this._removeHandlers;if(s[r]||o[r])throw new Error(`Extension type ${r} already has a handler`);s[r]=e,o[r]=t;const a=this._queue;return a[r]&&((u=a[r])==null||u.forEach(c=>e(c)),delete a[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(r,e,t=-1){return this.handle(r,s=>{e.findIndex(a=>a.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((a,u)=>cl(u.value,t)-cl(a.value,t)))},s=>{const o=e.findIndex(a=>a.name===s.name);o!==-1&&e.splice(o,1)})},handleByList(r,e,t=-1){return this.handle(r,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((o,a)=>cl(a,t)-cl(o,t)))},s=>{const o=e.indexOf(s.ref);o!==-1&&e.splice(o,1)})},mixin(r,...e){for(const t of e)Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(t))}},j3={extension:{type:xe.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Il(()=>import("./browserAll-B4gs33KU.js"),__vite__mapDeps([0,1,2]))}},B3={extension:{type:xe.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Il(()=>import("./webworkerAll-CZKnrQTY.js"),__vite__mapDeps([1,2]))}};class Bt{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new Bt(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Pc={exports:{}},h1;function $3(){return h1||(h1=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function o(d,f,m){this.fn=d,this.context=f,this.once=m||!1}function a(d,f,m,y,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new o(m,y||d,x),b=t?t+f:f;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],v]:d._events[b].push(v):(d._events[b]=v,d._eventsCount++),d}function u(d,f){--d._eventsCount===0?d._events=new s:delete d._events[f]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],m,y;if(this._eventsCount===0)return f;for(y in m=this._events)e.call(m,y)&&f.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},c.prototype.listeners=function(f){var m=t?t+f:f,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var x=0,v=y.length,b=new Array(v);x<v;x++)b[x]=y[x].fn;return b},c.prototype.listenerCount=function(f){var m=t?t+f:f,y=this._events[m];return y?y.fn?1:y.length:0},c.prototype.emit=function(f,m,y,x,v,b){var S=t?t+f:f;if(!this._events[S])return!1;var _=this._events[S],T=arguments.length,M,E;if(_.fn){switch(_.once&&this.removeListener(f,_.fn,void 0,!0),T){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,m),!0;case 3:return _.fn.call(_.context,m,y),!0;case 4:return _.fn.call(_.context,m,y,x),!0;case 5:return _.fn.call(_.context,m,y,x,v),!0;case 6:return _.fn.call(_.context,m,y,x,v,b),!0}for(E=1,M=new Array(T-1);E<T;E++)M[E-1]=arguments[E];_.fn.apply(_.context,M)}else{var P=_.length,N;for(E=0;E<P;E++)switch(_[E].once&&this.removeListener(f,_[E].fn,void 0,!0),T){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,m);break;case 3:_[E].fn.call(_[E].context,m,y);break;case 4:_[E].fn.call(_[E].context,m,y,x);break;default:if(!M)for(N=1,M=new Array(T-1);N<T;N++)M[N-1]=arguments[N];_[E].fn.apply(_[E].context,M)}}return!0},c.prototype.on=function(f,m,y){return a(this,f,m,y,!1)},c.prototype.once=function(f,m,y){return a(this,f,m,y,!0)},c.prototype.removeListener=function(f,m,y,x){var v=t?t+f:f;if(!this._events[v])return this;if(!m)return u(this,v),this;var b=this._events[v];if(b.fn)b.fn===m&&(!x||b.once)&&(!y||b.context===y)&&u(this,v);else{for(var S=0,_=[],T=b.length;S<T;S++)(b[S].fn!==m||x&&!b[S].once||y&&b[S].context!==y)&&_.push(b[S]);_.length?this._events[v]=_.length===1?_[0]:_:u(this,v)}return this},c.prototype.removeAllListeners=function(f){var m;return f?(m=t?t+f:f,this._events[m]&&u(this,m)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(Pc)),Pc.exports}var D3=$3();const Un=bh(D3),O3=Math.PI*2,N3=180/Math.PI,W3=Math.PI/180;class Ht{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Ht(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Mc.x=0,Mc.y=0,Mc}}const Mc=new Ht;class Oe{constructor(e=1,t=0,s=0,o=1,a=0,u=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=o,this.tx=a,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,o,a,u){return this.a=e,this.b=t,this.c=s,this.d=o,this.tx=a,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new Ht;const s=e.x,o=e.y;return t.x=this.a*s+this.c*o+this.tx,t.y=this.b*s+this.d*o+this.ty,t}applyInverse(e,t){t=t||new Ht;const s=this.a,o=this.b,a=this.c,u=this.d,c=this.tx,d=this.ty,f=1/(s*u+a*-o),m=e.x,y=e.y;return t.x=u*f*m+-a*f*y+(d*a-c*u)*f,t.y=s*f*y+-o*f*m+(-d*s+c*o)*f,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.a,a=this.c,u=this.tx;return this.a=o*t-this.b*s,this.b=o*s+this.b*t,this.c=a*t-this.d*s,this.d=a*s+this.d*t,this.tx=u*t-this.ty*s,this.ty=u*s+this.ty*t,this}append(e){const t=this.a,s=this.b,o=this.c,a=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*s+e.b*a,this.c=e.c*t+e.d*o,this.d=e.c*s+e.d*a,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*s+e.ty*a+this.ty,this}appendFrom(e,t){const s=e.a,o=e.b,a=e.c,u=e.d,c=e.tx,d=e.ty,f=t.a,m=t.b,y=t.c,x=t.d;return this.a=s*f+o*y,this.b=s*m+o*x,this.c=a*f+u*y,this.d=a*m+u*x,this.tx=c*f+d*y+t.tx,this.ty=c*m+d*x+t.ty,this}setTransform(e,t,s,o,a,u,c,d,f){return this.a=Math.cos(c+f)*a,this.b=Math.sin(c+f)*a,this.c=-Math.sin(c-d)*u,this.d=Math.cos(c-d)*u,this.tx=e-(s*this.a+o*this.c),this.ty=t-(s*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,o=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,o=this.c,a=this.d,u=e.pivot,c=-Math.atan2(-o,a),d=Math.atan2(s,t),f=Math.abs(c+d);return f<1e-5||Math.abs(O3-f)<1e-5?(e.rotation=d,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=d),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(o*o+a*a),e.position.x=this.tx+(u.x*t+u.y*o),e.position.y=this.ty+(u.x*s+u.y*a),e}invert(){const e=this.a,t=this.b,s=this.c,o=this.d,a=this.tx,u=e*o-t*s;return this.a=o/u,this.b=-t/u,this.c=-s/u,this.d=e/u,this.tx=(s*this.ty-o*a)/u,this.ty=-(e*this.ty-t*a)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Oe;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return H3.identity()}static get shared(){return U3.identity()}}const U3=new Oe,H3=new Oe,Ei=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ri=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ii=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Li=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rh=[],j0=[],hl=Math.sign;function G3(){for(let r=0;r<16;r++){const e=[];rh.push(e);for(let t=0;t<16;t++){const s=hl(Ei[r]*Ei[t]+Ii[r]*Ri[t]),o=hl(Ri[r]*Ei[t]+Li[r]*Ri[t]),a=hl(Ei[r]*Ii[t]+Ii[r]*Li[t]),u=hl(Ri[r]*Ii[t]+Li[r]*Li[t]);for(let c=0;c<16;c++)if(Ei[c]===s&&Ri[c]===o&&Ii[c]===a&&Li[c]===u){e.push(c);break}}}for(let r=0;r<16;r++){const e=new Oe;e.set(Ei[r],Ri[r],Ii[r],Li[r],0,0),j0.push(e)}}G3();const Qe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Ei[r],uY:r=>Ri[r],vX:r=>Ii[r],vY:r=>Li[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>rh[r][e],sub:(r,e)=>rh[r][Qe.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Qe.S:Qe.N:Math.abs(e)*2<=Math.abs(r)?r>0?Qe.E:Qe.W:e>0?r>0?Qe.SE:Qe.SW:r>0?Qe.NE:Qe.NW,matrixAppendRotationInv:(r,e,t=0,s=0)=>{const o=j0[Qe.inv(e)];o.tx=t,o.ty=s,r.append(o)},transformRectCoords:(r,e,t,s)=>{const{x:o,y:a,width:u,height:c}=r,{x:d,y:f,width:m,height:y}=e;return t===Qe.E?(s.set(o+d,a+f,u,c),s):t===Qe.S?s.set(m-a-c+d,o+f,c,u):t===Qe.W?s.set(m-o-u+d,y-a-c+f,u,c):t===Qe.N?s.set(a+d,y-o-u+f,c,u):s.set(o+d,a+f,u,c)}},dl=[new Ht,new Ht,new Ht,new Ht];class lt{constructor(e=0,t=0,s=0,o=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new lt(0,0,0,0)}clone(){return new lt(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,o=.5){const{width:a,height:u}=this;if(a<=0||u<=0)return!1;const c=this.x,d=this.y,f=s*(1-o),m=s-f,y=c-f,x=c+a+f,v=d-f,b=d+u+f,S=c+m,_=c+a-m,T=d+m,M=d+u-m;return e>=y&&e<=x&&t>=v&&t<=b&&!(e>S&&e<_&&t>T&&t<M)}intersects(e,t){if(!t){const U=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=U)return!1;const Y=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>Y}const s=this.left,o=this.right,a=this.top,u=this.bottom;if(o<=s||u<=a)return!1;const c=dl[0].set(e.left,e.top),d=dl[1].set(e.left,e.bottom),f=dl[2].set(e.right,e.top),m=dl[3].set(e.right,e.bottom);if(f.x<=c.x||d.y<=c.y)return!1;const y=Math.sign(t.a*t.d-t.b*t.c);if(y===0||(t.apply(c,c),t.apply(d,d),t.apply(f,f),t.apply(m,m),Math.max(c.x,d.x,f.x,m.x)<=s||Math.min(c.x,d.x,f.x,m.x)>=o||Math.max(c.y,d.y,f.y,m.y)<=a||Math.min(c.y,d.y,f.y,m.y)>=u))return!1;const x=y*(d.y-c.y),v=y*(c.x-d.x),b=x*s+v*a,S=x*o+v*a,_=x*s+v*u,T=x*o+v*u;if(Math.max(b,S,_,T)<=x*c.x+v*c.y||Math.min(b,S,_,T)>=x*m.x+v*m.y)return!1;const M=y*(c.y-f.y),E=y*(f.x-c.x),P=M*s+E*a,N=M*o+E*a,D=M*s+E*u,F=M*o+E*u;return!(Math.max(P,N,D,F)<=M*c.x+E*c.y||Math.min(P,N,D,F)>=M*m.x+E*m.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=o,this.height=Math.max(a-o,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=o-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=o,this.height=a-o,this}getBounds(e){return e||(e=new lt),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,o=e.x+e.width,a=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&a>=this.y&&a<this.y+this.height}set(e,t,s,o){return this.x=e,this.y=t,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Ec={default:-1};function yt(r="default"){return Ec[r]===void 0&&(Ec[r]=-1),++Ec[r]}const d1=new Set,Ke="8.0.0",V3="8.3.4",Cs={quiet:!1,noColor:!1},Fe=(r,e,t=3)=>{if(Cs.quiet||d1.has(e))return;let s=new Error().stack;const o=`${e}
Deprecated since v${r}`,a=typeof console.groupCollapsed=="function"&&!Cs.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(t).join(`
`),a?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),d1.add(e)};Object.defineProperties(Fe,{quiet:{get:()=>Cs.quiet,set:r=>{Cs.quiet=r},enumerable:!0,configurable:!1},noColor:{get:()=>Cs.noColor,set:r=>{Cs.noColor=r},enumerable:!0,configurable:!1}});const B0=()=>{};function Ms(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function f1(r){return!(r&r-1)&&!!r}function $0(r){const e={};for(const t in r)r[t]!==void 0&&(e[t]=r[t]);return e}const p1=Object.create(null);function Y3(r){const e=p1[r];return e===void 0&&(p1[r]=yt("resource")),e}const D0=class O0 extends Un{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...O0.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Fe(Ke,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Y3(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};D0.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Es=D0;const N0=class W0 extends Un{constructor(e={}){super(),this.options=e,this.uid=yt("textureSource"),this._resourceType="textureSource",this._resourceId=yt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...W0.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new Es($0(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=yt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const o=Math.round(e*s),a=Math.round(t*s);return this.width=o/s,this.height=a/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===a?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=a,this.emit("resize",this),this._resourceId=yt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=f1(this.pixelWidth)&&f1(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};N0.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Hn=N0;class Ah extends Hn{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Ah.extension=xe.TextureSource;const m1=new Oe;class X3{constructor(e,t){this.mapCoord=new Oe,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let o=0;o<e.length;o+=2){const a=e[o],u=e[o+1];t[o]=a*s.a+u*s.c+s.tx,t[o+1]=a*s.b+u*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,o=e.trim;o&&(m1.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(m1));const a=e.source,u=this.uClampFrame,c=this.clampMargin/a._resolution,d=this.clampOffset/a._resolution;return u[0]=(e.frame.x+c+d)/a.width,u[1]=(e.frame.y+c+d)/a.height,u[2]=(e.frame.x+e.frame.width-c+d)/a.width,u[3]=(e.frame.y+e.frame.height-c+d)/a.height,this.uClampOffset[0]=this.clampOffset/a.pixelWidth,this.uClampOffset[1]=this.clampOffset/a.pixelHeight,this.isSimple=e.frame.width===a.width&&e.frame.height===a.height&&e.rotate===0,!0}}class Ue extends Un{constructor({source:e,label:t,frame:s,orig:o,trim:a,defaultAnchor:u,defaultBorders:c,rotate:d,dynamic:f}={}){if(super(),this.uid=yt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new lt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new Hn,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:m,height:y}=this._source;this.frame.width=m,this.frame.height=y}this.orig=o||this.frame,this.trim=a,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=c,this.destroyed=!1,this.dynamic=f||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new X3(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:o}=this._source,a=t.x/s,u=t.y/o,c=t.width/s,d=t.height/o;let f=this.rotate;if(f){const m=c/2,y=d/2,x=a+m,v=u+y;f=Qe.add(f,Qe.NW),e.x0=x+m*Qe.uX(f),e.y0=v+y*Qe.uY(f),f=Qe.add(f,2),e.x1=x+m*Qe.uX(f),e.y1=v+y*Qe.uY(f),f=Qe.add(f,2),e.x2=x+m*Qe.uX(f),e.y2=v+y*Qe.uY(f),f=Qe.add(f,2),e.x3=x+m*Qe.uX(f),e.y3=v+y*Qe.uY(f)}else e.x0=a,e.y0=u,e.x1=a+c,e.y1=u,e.x2=a+c,e.y2=u+d,e.x3=a,e.y3=u+d}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Fe(Ke,"Texture.baseTexture is now Texture.source"),this._source}}Ue.EMPTY=new Ue({label:"EMPTY",source:new Hn({label:"EMPTY"})});Ue.EMPTY.destroy=B0;Ue.WHITE=new Ue({source:new Ah({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Ue.WHITE.destroy=B0;function q3(r,e,t){const{width:s,height:o}=t.orig,a=t.trim;if(a){const u=a.width,c=a.height;r.minX=a.x-e._x*s,r.maxX=r.minX+u,r.minY=a.y-e._y*o,r.maxY=r.minY+c}else r.minX=-e._x*s,r.maxX=r.minX+s,r.minY=-e._y*o,r.maxY=r.minY+o}const g1=new Oe;class Wn{constructor(e=1/0,t=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=g1,this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new lt);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=g1,this}set(e,t,s,o){this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}addFrame(e,t,s,o,a){a||(a=this.matrix);const u=a.a,c=a.b,d=a.c,f=a.d,m=a.tx,y=a.ty;let x=this.minX,v=this.minY,b=this.maxX,S=this.maxY,_=u*e+d*t+m,T=c*e+f*t+y;_<x&&(x=_),T<v&&(v=T),_>b&&(b=_),T>S&&(S=T),_=u*s+d*t+m,T=c*s+f*t+y,_<x&&(x=_),T<v&&(v=T),_>b&&(b=_),T>S&&(S=T),_=u*e+d*o+m,T=c*e+f*o+y,_<x&&(x=_),T<v&&(v=T),_>b&&(b=_),T>S&&(S=T),_=u*s+d*o+m,T=c*s+f*o+y,_<x&&(x=_),T<v&&(v=T),_>b&&(b=_),T>S&&(S=T),this.minX=x,this.minY=v,this.maxX=b,this.maxY=S}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,o=this.maxX,a=this.maxY,{a:u,b:c,c:d,d:f,tx:m,ty:y}=e;let x=u*t+d*s+m,v=c*t+f*s+y;this.minX=x,this.minY=v,this.maxX=x,this.maxY=v,x=u*o+d*s+m,v=c*o+f*s+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=u*t+d*a+m,v=c*t+f*a+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY,x=u*o+d*a+m,v=c*o+f*a+y,this.minX=x<this.minX?x:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,o){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Wn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,o){let a=this.minX,u=this.minY,c=this.maxX,d=this.maxY;o||(o=this.matrix);const f=o.a,m=o.b,y=o.c,x=o.d,v=o.tx,b=o.ty;for(let S=t;S<s;S+=2){const _=e[S],T=e[S+1],M=f*_+y*T+v,E=m*_+x*T+b;a=M<a?M:a,u=E<u?E:u,c=M>c?M:c,d=E>d?E:d}this.minX=a,this.minY=u,this.maxX=c,this.maxY=d}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var K3={grad:.9,turn:360,rad:360/(2*Math.PI)},br=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Lt=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},En=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},U0=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},y1=function(r){return{r:En(r.r,0,255),g:En(r.g,0,255),b:En(r.b,0,255),a:En(r.a)}},Rc=function(r){return{r:Lt(r.r),g:Lt(r.g),b:Lt(r.b),a:Lt(r.a,3)}},Q3=/^#([0-9a-f]{3,8})$/i,fl=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},H0=function(r){var e=r.r,t=r.g,s=r.b,o=r.a,a=Math.max(e,t,s),u=a-Math.min(e,t,s),c=u?a===e?(t-s)/u:a===t?2+(s-e)/u:4+(e-t)/u:0;return{h:60*(c<0?c+6:c),s:a?u/a*100:0,v:a/255*100,a:o}},G0=function(r){var e=r.h,t=r.s,s=r.v,o=r.a;e=e/360*6,t/=100,s/=100;var a=Math.floor(e),u=s*(1-t),c=s*(1-(e-a)*t),d=s*(1-(1-e+a)*t),f=a%6;return{r:255*[s,c,u,u,d,s][f],g:255*[d,s,s,c,u,u][f],b:255*[u,u,d,s,s,c][f],a:o}},x1=function(r){return{h:U0(r.h),s:En(r.s,0,100),l:En(r.l,0,100),a:En(r.a)}},v1=function(r){return{h:Lt(r.h),s:Lt(r.s),l:Lt(r.l),a:Lt(r.a,3)}},_1=function(r){return G0((t=(e=r).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},$o=function(r){return{h:(e=H0(r)).h,s:(o=(200-(t=e.s))*(s=e.v)/100)>0&&o<200?t*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,s,o},Z3=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,J3=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,e5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,t5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ih={string:[[function(r){var e=Q3.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Lt(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Lt(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=e5.exec(r)||t5.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:y1({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=Z3.exec(r)||J3.exec(r);if(!e)return null;var t,s,o=x1({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(K3[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return _1(o)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,s=r.b,o=r.a,a=o===void 0?1:o;return br(e)&&br(t)&&br(s)?y1({r:Number(e),g:Number(t),b:Number(s),a:Number(a)}):null},"rgb"],[function(r){var e=r.h,t=r.s,s=r.l,o=r.a,a=o===void 0?1:o;if(!br(e)||!br(t)||!br(s))return null;var u=x1({h:Number(e),s:Number(t),l:Number(s),a:Number(a)});return _1(u)},"hsl"],[function(r){var e=r.h,t=r.s,s=r.v,o=r.a,a=o===void 0?1:o;if(!br(e)||!br(t)||!br(s))return null;var u=(function(c){return{h:U0(c.h),s:En(c.s,0,100),v:En(c.v,0,100),a:En(c.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(a)});return G0(u)},"hsv"]]},w1=function(r,e){for(var t=0;t<e.length;t++){var s=e[t][0](r);if(s)return[s,e[t][1]]}return[null,void 0]},n5=function(r){return typeof r=="string"?w1(r.trim(),ih.string):typeof r=="object"&&r!==null?w1(r,ih.object):[null,void 0]},Ic=function(r,e){var t=$o(r);return{h:t.h,s:En(t.s+100*e,0,100),l:t.l,a:t.a}},Lc=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},b1=function(r,e){var t=$o(r);return{h:t.h,s:t.s,l:En(t.l+100*e,0,100),a:t.a}},sh=(function(){function r(e){this.parsed=n5(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Lt(Lc(this.rgba),2)},r.prototype.isDark=function(){return Lc(this.rgba)<.5},r.prototype.isLight=function(){return Lc(this.rgba)>=.5},r.prototype.toHex=function(){return e=Rc(this.rgba),t=e.r,s=e.g,o=e.b,u=(a=e.a)<1?fl(Lt(255*a)):"","#"+fl(t)+fl(s)+fl(o)+u;var e,t,s,o,a,u},r.prototype.toRgb=function(){return Rc(this.rgba)},r.prototype.toRgbString=function(){return e=Rc(this.rgba),t=e.r,s=e.g,o=e.b,(a=e.a)<1?"rgba("+t+", "+s+", "+o+", "+a+")":"rgb("+t+", "+s+", "+o+")";var e,t,s,o,a},r.prototype.toHsl=function(){return v1($o(this.rgba))},r.prototype.toHslString=function(){return e=v1($o(this.rgba)),t=e.h,s=e.s,o=e.l,(a=e.a)<1?"hsla("+t+", "+s+"%, "+o+"%, "+a+")":"hsl("+t+", "+s+"%, "+o+"%)";var e,t,s,o,a},r.prototype.toHsv=function(){return e=H0(this.rgba),{h:Lt(e.h),s:Lt(e.s),v:Lt(e.v),a:Lt(e.a,3)};var e},r.prototype.invert=function(){return ir({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),ir(Ic(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),ir(Ic(this.rgba,-e))},r.prototype.grayscale=function(){return ir(Ic(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),ir(b1(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),ir(b1(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?ir({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Lt(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=$o(this.rgba);return typeof e=="number"?ir({h:e,s:t.s,l:t.l,a:t.a}):Lt(t.h)},r.prototype.isEqual=function(e){return this.toHex()===ir(e).toHex()},r})(),ir=function(r){return r instanceof sh?r:new sh(r)},S1=[],r5=function(r){r.forEach(function(e){S1.indexOf(e)<0&&(e(sh,ih),S1.push(e))})};function i5(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in t)s[t[o]]=o;var a={};r.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,d,f=s[this.toHex()];if(f)return f;if(u!=null&&u.closest){var m=this.toRgb(),y=1/0,x="black";if(!a.length)for(var v in t)a[v]=new r(t[v]).toRgb();for(var b in t){var S=(c=m,d=a[b],Math.pow(c.r-d.r,2)+Math.pow(c.g-d.g,2)+Math.pow(c.b-d.b,2));S<y&&(y=S,x=b)}return x}},e.string.push([function(u){var c=u.toLowerCase(),d=c==="transparent"?"#0000":t[c];return d?new r(d).toRgb():null},"name"])}r5([i5]);const Rs=class Lo{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Lo)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((a,u)=>a===t[u]);if(e!==null&&t!==null){const a=Object.keys(e),u=Object.keys(t);return a.length!==u.length?!1:a.every(c=>e[c]===t[c])}return e===t}toRgba(){const[e,t,s,o]=this._components;return{r:e,g:t,b:s,a:o}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(o*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,o,a]=this._components;return e[0]=t,e[1]=s,e[2]=o,e[3]=a,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,o]=this._components;return e[0]=t,e[1]=s,e[2]=o,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,o,a]=Lo._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=o,this._components[3]*=a,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,a=this._int&255;return t&&(s=s*e+.5|0,o=o*e+.5|0,a=a*e+.5|0),(e*255<<24)+(s<<16)+(o<<8)+a}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,o,a;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,a=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,o,a=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,o,a=255]=e,t/=255,s/=255,o/=255,a/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const c=Lo.HEX_PATTERN.exec(e);c&&(e=`#${c[2]}`)}const u=ir(e);u.isValid()&&({r:t,g:s,b:o,a}=u.rgba,t/=255,s/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=o,this._components[3]=a,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((o,a)=>{e[a]=Math.min(Math.max(o,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Lo||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Rs.shared=new Rs;Rs._temp=new Rs;Rs.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let kt=Rs;const s5={cullArea:null,cullable:!1,cullableChildren:!0};let zc=0;const k1=500;function ot(...r){zc!==k1&&(zc++,zc===k1?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}const Qo={_registeredResources:new Set,register(r){this._registeredResources.add(r)},unregister(r){this._registeredResources.delete(r)},release(){this._registeredResources.forEach(r=>r.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(r){return this._registeredResources.has(r)},reset(){this._registeredResources.clear()}};class o5{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class a5{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new o5(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const Rn=new a5;Qo.register(Rn);const l5={get isCachedAsTexture(){var r;return!!((r=this.renderGroup)!=null&&r.isCachedAsTexture)},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){var r;(r=this.renderGroup)==null||r.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){Fe("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function u5(r,e,t){const s=r.length;let o;if(e>=s||t===0)return;t=e+t>s?s-e:t;const a=s-t;for(o=e;o<a;++o)r[o]=r[o+t];r.length=a}const c5={allowChildren:!0,removeChildren(r=0,e){var a;const t=e??this.children.length,s=t-r,o=[];if(s>0&&s<=t){for(let c=t-1;c>=r;c--){const d=this.children[c];d&&(o.push(d),d.parent=null)}u5(this.children,r,t);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(o);for(let c=0;c<o.length;++c){const d=o[c];(a=d.parentRenderLayer)==null||a.detach(d),this.emit("childRemoved",d,this,c),o[c].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const e=this.getChildAt(r);return this.removeChild(e)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,e)},getChildIndex(r){const e=this.children.indexOf(r);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(r,e){this.allowChildren||Fe(Ke,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${r}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(r.parent){const o=r.parent.children.indexOf(r);if(r.parent===this&&o===e)return r;o!==-1&&r.parent.children.splice(o,1)}e===t.length?t.push(r):t.splice(e,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,e),r.emit("added",this),r},swapChildren(r,e){if(r===e)return;const t=this.getChildIndex(r),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=r;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var r;(r=this.parent)==null||r.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(e=>this.reparentChildAt(e,this.children.length)),r[0])},reparentChildAt(r,e){if(r.parent===this)return this.setChildIndex(r,e),r;const t=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),r.setFromMatrix(t),r},replaceChild(r,e){r.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(r)),e.setFromMatrix(r.localTransform),e.updateLocalTransform(),this.removeChild(r)}},h5={collectRenderables(r,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(r,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,r):this.collectRenderablesWithEffects(r,e,t))},collectRenderablesSimple(r,e,t){const s=this.children,o=s.length;for(let a=0;a<o;a++)s[a].collectRenderables(r,e,t)},collectRenderablesWithEffects(r,e,t){const{renderPipes:s}=e;for(let o=0;o<this.effects.length;o++){const a=this.effects[o];s[a.pipe].push(a,this,r)}this.collectRenderablesSimple(r,e,t);for(let o=this.effects.length-1;o>=0;o--){const a=this.effects[o];s[a.pipe].pop(a,this,r)}}};class C1{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class d5{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return Rn.get(s.maskClass,e)}return e}returnMaskEffect(e){Rn.return(e)}}const oh=new d5;$t.handleByList(xe.MaskEffect,oh._effectClasses);const f5={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const e=this.effects.indexOf(r);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const e=this._maskEffect;(e==null?void 0:e.mask)!==r&&(e&&(this.removeEffect(e),oh.returnMaskEffect(e),this._maskEffect=null),r!=null&&(this._maskEffect=oh.getMaskEffect(r),this.addEffect(this._maskEffect)))},get mask(){var r;return(r=this._maskEffect)==null?void 0:r.mask},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},set filters(r){var a;!Array.isArray(r)&&r&&(r=[r]);const e=this._filterEffect||(this._filterEffect=new C1);r=r;const t=(r==null?void 0:r.length)>0,s=((a=e.filters)==null?void 0:a.length)>0,o=t!==s;r=Array.isArray(r)?r.slice(0):r,e.filters=Object.freeze(r),o&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=r??null))},get filters(){var r;return(r=this._filterEffect)==null?void 0:r.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new C1),this._filterEffect.filterArea=r},get filterArea(){var r;return(r=this._filterEffect)==null?void 0:r.filterArea}},p5={label:null,get name(){return Fe(Ke,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){Fe(Ke,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,e=!1){return this.getChildByLabel(r,e)},getChildByLabel(r,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const o=t[s];if(o.label===r||r instanceof RegExp&&r.test(o.label))return o}if(e)for(let s=0;s<t.length;s++){const a=t[s].getChildByLabel(r,!0);if(a)return a}return null},getChildrenByLabel(r,e=!1,t=[]){const s=this.children;for(let o=0;o<s.length;o++){const a=s[o];(a.label===r||r instanceof RegExp&&r.test(a.label))&&t.push(a)}if(e)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(r,!0,t);return t}},Kt=Rn.getPool(Oe),Cr=Rn.getPool(Wn),m5=new Oe,g5={getFastGlobalBounds(r,e){e||(e=new Wn),e.clear(),this._getGlobalBoundsRecursive(!!r,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(r,e,t){let s=e;if(r&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=Cr.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const a=this.children;for(let u=0;u<a.length;u++)a[u]._getGlobalBoundsRecursive(r,s,t)}if(o){let a=!1;const u=this.renderGroup||this.parentRenderGroup;for(let c=0;c<this.effects.length;c++)this.effects[c].addBounds&&(a||(a=!0,s.applyMatrix(u.worldTransform)),this.effects[c].addBounds(s,!0));a&&s.applyMatrix(u.worldTransform.copyTo(m5).invert()),e.addBounds(s),Cr.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),Cr.return(s))}};function V0(r,e,t){t.clear();let s,o;return r.parent?e?s=r.parent.worldTransform:(o=Kt.get().identity(),s=Th(r,o)):s=Oe.IDENTITY,Y0(r,t,s,e),o&&Kt.return(o),t.isValid||t.set(0,0,0,0),t}function Y0(r,e,t,s){var c,d;if(!r.visible||!r.measurable)return;let o;s?o=r.worldTransform:(r.updateLocalTransform(),o=Kt.get(),o.appendFrom(r.localTransform,t));const a=e,u=!!r.effects.length;if(u&&(e=Cr.get().clear()),r.boundsArea)e.addRect(r.boundsArea,o);else{const f=r.bounds;f&&!f.isEmpty()&&(e.matrix=o,e.addBounds(f));for(let m=0;m<r.children.length;m++)Y0(r.children[m],e,o,s)}if(u){for(let f=0;f<r.effects.length;f++)(d=(c=r.effects[f]).addBounds)==null||d.call(c,e);a.addBounds(e,Oe.IDENTITY),Cr.return(e)}s||Kt.return(o)}function Th(r,e){const t=r.parent;return t&&(Th(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function X0(r,e){if(r===16777215||!e)return e;if(e===16777215||!r)return r;const t=r>>16&255,s=r>>8&255,o=r&255,a=e>>16&255,u=e>>8&255,c=e&255,d=t*a/255|0,f=s*u/255|0,m=o*c/255|0;return(d<<16)+(f<<8)+m}const A1=16777215;function T1(r,e){return r===A1?e:e===A1?r:X0(r,e)}function Pl(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const y5={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(r=new Oe,e){if(e)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const t=Th(this,Kt.get().identity());return r.appendFrom(this.localTransform,t),Kt.return(t),r},getGlobalTint(r){if(r)return this.renderGroup?Pl(this.renderGroup.worldColor):this.parentRenderGroup?Pl(T1(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=T1(e,t.localColor),t=t.parent;return Pl(e)}};function q0(r,e,t){return e.clear(),t||(t=Oe.IDENTITY),K0(r,e,t,r,!0),e.isValid||e.set(0,0,0,0),e}function K0(r,e,t,s,o){var d,f;let a;if(o)a=Kt.get(),a=t.copyTo(a);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const m=r.localTransform;a=Kt.get(),a.appendFrom(m,t)}const u=e,c=!!r.effects.length;if(c&&(e=Cr.get().clear()),r.boundsArea)e.addRect(r.boundsArea,a);else{r.renderPipeId&&(e.matrix=a,e.addBounds(r.bounds));const m=r.children;for(let y=0;y<m.length;y++)K0(m[y],e,a,s,!1)}if(c){for(let m=0;m<r.effects.length;m++)(f=(d=r.effects[m]).addLocalBounds)==null||f.call(d,e,s);u.addBounds(e,Oe.IDENTITY),Cr.return(e)}Kt.return(a)}function Q0(r,e){const t=r.children;for(let s=0;s<t.length;s++){const o=t[s],a=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,c=e.index;(e.data[c]!==a||e.data[c+1]!==u)&&(e.data[e.index]=a,e.data[e.index+1]=u,e.didChange=!0),e.index=c+2,o.children.length&&Q0(o,e)}return e.didChange}const x5=new Oe,v5={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=r/e*t:this.scale.x=t},_setHeight(r,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=r/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Wn});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),Q0(this,r),r.didChange&&q0(this,r.localBounds,x5),r.localBounds},getBounds(r,e){return V0(this,r,e||new Wn)}},_5={_onRender:null,set onRender(r){const e=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},w5={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(b5))}};function b5(r,e){return r._zIndex-e._zIndex}const S5={getGlobalPosition(r=new Ht,e=!1){return this.parent?this.parent.toGlobal(this._position,r,e):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,e,t=!1){const s=this.getGlobalTransform(Kt.get(),t);return e=s.apply(r,e),Kt.return(s),e},toLocal(r,e,t,s){e&&(r=e.toGlobal(r,t,s));const o=this.getGlobalTransform(Kt.get(),s);return t=o.applyInverse(r,t),Kt.return(o),t}};class Z0{constructor(){this.uid=yt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let k5=0;class C5{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new Es(this.textureOptions)}createTexture(e,t,s){const o=new Hn({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new Ue({source:o,label:`texturePool_${k5++}`})}getOptimalTexture(e,t,s=1,o){let a=Math.ceil(e*s-1e-6),u=Math.ceil(t*s-1e-6);a=Ms(a),u=Ms(u);const c=(a<<17)+(u<<1)+(o?1:0);this._texturePool[c]||(this._texturePool[c]=[]);let d=this._texturePool[c].pop();return d||(d=this.createTexture(a,u,o)),d.source._resolution=s,d.source.width=a/s,d.source.height=u/s,d.source.pixelWidth=a,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=e,d.frame.height=t,d.updateUvs(),this._poolKeyHash[d.uid]=c,d}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const J0=new C5;Qo.register(J0);class A5{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Oe,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Z0,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(J0.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Oe),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Oe),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Oe),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function T5(r,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(r[s]=e[s])}const Fc=new Bt(null),pl=new Bt(null),jc=new Bt(null,1,1),ml=new Bt(null),P1=1,P5=2,Bc=4;class yn extends Un{constructor(e={}){var t,s;super(),this.uid=yt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Oe,this.relativeGroupTransform=new Oe,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Bt(this,0,0),this._scale=jc,this._pivot=pl,this._origin=ml,this._skew=Fc,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],T5(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(o=>this.addChild(o)),(s=e.parent)==null||s.addChild(this)}static mixin(e){Fe("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),$t.mixin(yn,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Fe(Ke,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let o=0;o<e.length;o++)this.addChild(e[o]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let o=0;o<e.length;o++)this.removeChild(e[o]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=Rn.get(A5,this),this.groupTransform=Oe.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),Rn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Oe),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*N3}set angle(e){this.rotation=e*W3}get pivot(){return this._pivot===pl&&(this._pivot=new Bt(this,0,0)),this._pivot}set pivot(e){this._pivot===pl&&(this._pivot=new Bt(this,0,0),this._origin!==ml&&ot("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Fc&&(this._skew=new Bt(this,0,0)),this._skew}set skew(e){this._skew===Fc&&(this._skew=new Bt(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===jc&&(this._scale=new Bt(this,1,1)),this._scale}set scale(e){this._scale===jc&&(this._scale=new Bt(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===ml&&(this._origin=new Bt(this,0,0)),this._origin}set origin(e){this._origin===ml&&(this._origin=new Bt(this,0,0),this._pivot!==pl&&ot("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,o=this._pivot,a=this._origin,u=this._position,c=s._x,d=s._y,f=o._x,m=o._y,y=-a._x,x=-a._y;t.a=this._cx*c,t.b=this._sx*c,t.c=this._cy*d,t.d=this._sy*d,t.tx=u._x-(f*t.a+m*t.c)+(y*t.a+x*t.c)-y,t.ty=u._y-(f*t.b+m*t.d)+(y*t.b+x*t.d)-x}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=P1,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=kt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=P1,this._onUpdate())}get tint(){return Pl(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=P5,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Bc,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Bc,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=Bc,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var o;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let a=0;a<t.length;++a)t[a].destroy(e);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}$t.mixin(yn,c5,g5,S5,_5,v5,f5,p5,w5,s5,l5,y5,h5);class Ph extends yn{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Wn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:o}=e;return s>=t.minX&&s<=t.maxX&&o>=t.minY&&o<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var t,s;super.destroy(e),this._bounds=null;for(const o in this._gpuData)(s=(t=this._gpuData[o]).destroy)==null||s.call(t);this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:o}=t;o.blendMode.pushBlendMode(this,this.groupBlendMode,e),o[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const u=this.children,c=u.length;for(let d=0;d<c;d++)u[d].collectRenderables(e,t,s);o.blendMode.popBlendMode(e)}}class Is extends Ph{constructor(e=Ue.EMPTY){e instanceof Ue&&(e={texture:e});const{texture:t=Ue.EMPTY,anchor:s,roundPixels:o,width:a,height:u,...c}=e;super({label:"Sprite",...c}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Bt({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=o??!1,a!==void 0&&(this.width=a),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof Ue?new Is(e):new Is(Ue.from(e,t))}set texture(e){e||(e=Ue.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return q3(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Fe("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:o,height:a}=t.orig;s.minX=-e._x*o,s.maxX=s.minX+o,s.minY=-e._y*a,s.maxY=s.minY+a}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const M5=new Wn;function ep(r,e,t){const s=M5;r.measurable=!0,V0(r,t,s),e.addBoundsMask(s),r.measurable=!1}function tp(r,e,t){const s=Cr.get();r.measurable=!0;const o=Kt.get().identity(),a=np(r,t,o);q0(r,s,a),r.measurable=!1,e.addBoundsMask(s),Kt.return(o),Cr.return(s)}function np(r,e,t){return r?(r!==e&&(np(r.parent,e,t),r.updateLocalTransform(),t.append(r.localTransform)),t):(ot("Mask bounds, renderable is not inside the root container"),t)}class rp{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Is),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||ep(this.mask,e,t)}addLocalBounds(e,t){tp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof Is}}rp.extension=xe.MaskEffect;class ip{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}ip.extension=xe.MaskEffect;class sp{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){ep(this.mask,e,t)}addLocalBounds(e,t){tp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof yn}}sp.extension=xe.MaskEffect;const E5={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};let M1=E5;const et={get(){return M1},set(r){M1=r}};class op extends Hn{constructor(e){e.resource||(e.resource=et.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const o=super.resize(e,t,s);return o&&this.resizeCanvas(),o}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}op.extension=xe.TextureSource;class Fi extends Hn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Fi.extension=xe.TextureSource;var ah=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(ah||{});class $c{constructor(e,t=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=o}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const ap=class gn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new $c(null,null,1/0),this.deltaMS=1/gn.targetFPMS,this.elapsedMS=1/gn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=ah.NORMAL){return this._addListener(new $c(e,t,s))}addOnce(e,t,s=ah.NORMAL){return this._addListener(new $c(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const a=e-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=e-a%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*gn.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,gn.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!gn._shared){const e=gn._shared=new gn;e.autoStart=!0,e._protected=!0}return gn._shared}static get system(){if(!gn._system){const e=gn._system=new gn;e.autoStart=!0,e._protected=!0}return gn._system}};ap.targetFPMS=.06;let gl=ap,Dc;async function lp(){return Dc??(Dc=(async()=>{var u;const e=et.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(c=>{const d=document.createElement("video");d.onloadeddata=()=>c(d),d.onerror=()=>c(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const a=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,a),e.deleteFramebuffer(o),e.deleteTexture(s),(u=e.getExtension("WEBGL_lose_context"))==null||u.loseContext(),a[0]<=a[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Dc}const $l=class up extends Hn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...up.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=gl.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await lp(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(gl.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(gl.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(gl.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};$l.extension=xe.TextureSource;$l.defaultOptions={...Hn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};$l.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Do=$l;const Nn=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(s=>typeof s=="string"||t?e(s):s):r);class R5{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||ot(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=Nn(e);let o;for(let d=0;d<this.parsers.length;d++){const f=this.parsers[d];if(f.test(t)){o=f.getCacheableAssets(s,t);break}}const a=new Map(Object.entries(o||{}));o||s.forEach(d=>{a.set(d,t)});const u=[...a.keys()],c={cacheKeys:u,keys:s};s.forEach(d=>{this._cacheMap.set(d,c)}),u.forEach(d=>{const f=o?o[d]:t;this._cache.has(d)&&this._cache.get(d)!==f&&ot("[Cache] already has key:",d),this._cache.set(d,a.get(d))})}remove(e){if(!this._cacheMap.has(e)){ot(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(o=>{this._cache.delete(o)}),t.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const st=new R5,lh=[];$t.handleByList(xe.TextureSource,lh);function cp(r={}){const e=r&&r.resource,t=e?r.resource:r,s=e?r:{resource:r};for(let o=0;o<lh.length;o++){const a=lh[o];if(a.test(t))return new a(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function I5(r={},e=!1){const t=r&&r.resource,s=t?r.resource:r,o=t?r:{resource:r};if(!e&&st.has(s))return st.get(s);const a=new Ue({source:cp(o)});return a.on("destroy",()=>{st.has(s)&&st.remove(s)}),e||st.set(s,a),a}function L5(r,e=!1){return typeof r=="string"?st.get(r):r instanceof Hn?new Ue({source:r}):I5(r,e)}Ue.from=L5;Hn.from=cp;$t.add(rp,ip,sp,Do,Fi,op,Ah);var ti=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(ti||{});function On(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Ao(r){return r.split("?")[0].split("#")[0]}function z5(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function F5(r,e,t){return r.replace(new RegExp(z5(e),"g"),t)}function j5(r,e){let t="",s=0,o=-1,a=0,u=-1;for(let c=0;c<=r.length;++c){if(c<r.length)u=r.charCodeAt(c);else{if(u===47)break;u=47}if(u===47){if(!(o===c-1||a===1))if(o!==c-1&&a===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const d=t.lastIndexOf("/");if(d!==t.length-1){d===-1?(t="",s=0):(t=t.slice(0,d),s=t.length-1-t.lastIndexOf("/")),o=c,a=0;continue}}else if(t.length===2||t.length===1){t="",s=0,o=c,a=0;continue}}}else t.length>0?t+=`/${r.slice(o+1,c)}`:t=r.slice(o+1,c),s=c-o-1;o=c,a=0}else u===46&&a!==-1?++a:a=-1}return t}const xn={toPosix(r){return F5(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){On(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(On(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const s=Ao(this.toPosix(e??et.get().getBaseUrl())),o=Ao(this.toPosix(t??this.rootname(s)));return r=this.toPosix(r),r.startsWith("/")?xn.join(o,r.slice(1)):this.isAbsolute(r)?r:this.join(s,r)},normalize(r){if(On(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const s=r.endsWith("/");return r=j5(r),r.length>0&&s&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return On(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const s=r[t];if(On(s),s.length>0)if(e===void 0)e=s;else{const o=r[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(On(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let s=-1,o=!0;const a=this.getProtocol(r),u=r;r=r.slice(a.length);for(let c=r.length-1;c>=1;--c)if(e=r.charCodeAt(c),e===47){if(!o){s=c;break}}else o=!1;return s===-1?t?"/":this.isUrl(u)?a+r:a:t&&s===1?"//":a+r.slice(0,s)},rootname(r){On(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){On(r),e&&On(e),r=Ao(this.toPosix(r));let t=0,s=-1,o=!0,a;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let u=e.length-1,c=-1;for(a=r.length-1;a>=0;--a){const d=r.charCodeAt(a);if(d===47){if(!o){t=a+1;break}}else c===-1&&(o=!1,c=a+1),u>=0&&(d===e.charCodeAt(u)?--u===-1&&(s=a):(u=-1,s=c))}return t===s?s=c:s===-1&&(s=r.length),r.slice(t,s)}for(a=r.length-1;a>=0;--a)if(r.charCodeAt(a)===47){if(!o){t=a+1;break}}else s===-1&&(o=!1,s=a+1);return s===-1?"":r.slice(t,s)},extname(r){On(r),r=Ao(this.toPosix(r));let e=-1,t=0,s=-1,o=!0,a=0;for(let u=r.length-1;u>=0;--u){const c=r.charCodeAt(u);if(c===47){if(!o){t=u+1;break}continue}s===-1&&(o=!1,s=u+1),c===46?e===-1?e=u:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||s===-1||a===0||a===1&&e===s-1&&e===t+1?"":r.slice(e,s)},parse(r){On(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=Ao(this.toPosix(r));let t=r.charCodeAt(0);const s=this.isAbsolute(r);let o;e.root=this.rootname(r),s||this.hasProtocol(r)?o=1:o=0;let a=-1,u=0,c=-1,d=!0,f=r.length-1,m=0;for(;f>=o;--f){if(t=r.charCodeAt(f),t===47){if(!d){u=f+1;break}continue}c===-1&&(d=!1,c=f+1),t===46?a===-1?a=f:m!==1&&(m=1):a!==-1&&(m=-1)}return a===-1||c===-1||m===0||m===1&&a===c-1&&a===u+1?c!==-1&&(u===0&&s?e.base=e.name=r.slice(1,c):e.base=e.name=r.slice(u,c)):(u===0&&s?(e.name=r.slice(1,a),e.base=r.slice(1,c)):(e.name=r.slice(u,a),e.base=r.slice(u,c)),e.ext=r.slice(a,c)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function hp(r,e,t,s,o){const a=e[t];for(let u=0;u<a.length;u++){const c=a[u];t<e.length-1?hp(r.replace(s[t],c),e,t+1,s,o):o.push(r.replace(s[t],c))}}function B5(r){const e=/\{(.*?)\}/g,t=r.match(e),s=[];if(t){const o=[];t.forEach(a=>{const u=a.substring(1,a.length-1).split(",");o.push(u)}),hp(r,o,0,t,s)}else s.push(r);return s}const Ll=r=>!Array.isArray(r);class zs{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return Nn(t||s,a=>typeof a=="string"?a:Array.isArray(a)?a.map(u=>(u==null?void 0:u.src)??u):a!=null&&a.src?a.src:a,!0)}addManifest(e){this._manifest&&ot("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let o=t;Array.isArray(t)||(o=Object.entries(t).map(([a,u])=>typeof u=="string"||Array.isArray(u)?{alias:a,src:u}:{alias:a,...u})),o.forEach(a=>{const u=a.src,c=a.alias;let d;if(typeof c=="string"){const f=this._createBundleAssetId(e,c);s.push(f),d=[c,f]}else{const f=c.map(m=>this._createBundleAssetId(e,m));s.push(...f),d=[...c,...f]}this.add({...a,alias:d,src:u})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=a=>{this.hasKey(a)&&ot(`[Resolver] already has key: ${a} overwriting`)},Nn(t).forEach(a=>{const{src:u}=a;let{data:c,format:d,loadParser:f,parser:m}=a;const y=Nn(u).map(S=>typeof S=="string"?B5(S):Array.isArray(S)?S:[S]),x=this.getAlias(a);Array.isArray(x)?x.forEach(s):s(x);const v=[],b=S=>{const _=this._parsers.find(T=>T.test(S));return{..._==null?void 0:_.parse(S),src:S}};y.forEach(S=>{S.forEach(_=>{let T={};if(typeof _!="object"?T=b(_):(c=_.data??c,d=_.format??d,(_.loadParser||_.parser)&&(f=_.loadParser??f,m=_.parser??m),T={...b(_.src),..._}),!x)throw new Error(`[Resolver] alias is undefined for this asset: ${T.src}`);T=this._buildResolvedAsset(T,{aliases:x,data:c,format:d,loadParser:f,parser:m,progressSize:a.progressSize}),v.push(T)})}),x.forEach(S=>{this._assetMap[S]=v})})}resolveBundle(e){const t=Ll(e);e=Nn(e);const s={};return e.forEach(o=>{const a=this._bundles[o];if(a){const u=this.resolve(a),c={};for(const d in u){const f=u[d];c[this._extractAssetIdFromBundle(o,d)]=f}s[o]=c}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const o in t)s[o]=t[o].src;return s}return t.src}resolve(e){const t=Ll(e);e=Nn(e);const s={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let a=this._assetMap[o];const u=this._getPreferredOrder(a);u==null||u.priority.forEach(c=>{u.params[c].forEach(d=>{const f=a.filter(m=>m[c]?m[c]===d:!1);f.length&&(a=f)})}),this._resolverHash[o]=a[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],o=this._preferredOrder.find(a=>a.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:o,loadParser:a,parser:u,format:c,progressSize:d}=t;return(this._basePath||this._rootPath)&&(e.src=xn.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=a??e.loadParser,e.parser=u??e.parser,e.format=c??e.format??$5(e.src),d!==void 0&&(e.progressSize=d),e}}zs.RETINA_PREFIX=/@([0-9\.]+)x/;function $5(r){return r.split(".").pop().split("?").shift().split("#").shift()}const uh=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r},dp=class zo{constructor(e,t){this.linkedSheets=[];let s=e;(e==null?void 0:e.source)instanceof Hn&&(s={texture:e,data:t});const{texture:o,data:a,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof Ue?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=a;const c=parseFloat(a.meta.scale);c?(this.resolution=c,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=zo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=zo.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const o=this._frameKeys[t],a=this._frames[o],u=a.frame;if(u){let c=null,d=null;const f=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,m=new lt(0,0,Math.floor(f.w)/this.resolution,Math.floor(f.h)/this.resolution);a.rotated?c=new lt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):c=new lt(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(d=new lt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new Ue({source:this.textureSource,frame:c,orig:m,trim:d,rotate:a.rotated?2:0,defaultAnchor:a.anchor,defaultBorders:a.borders,label:o.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const o=e[t][s];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*zo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*zo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};dp.BATCH_SIZE=1e3;let E1=dp;const D5=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function fp(r,e,t){const s={};if(r.forEach(o=>{s[o]=e}),Object.keys(e.textures).forEach(o=>{s[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=xn.dirname(r[0]);e.linkedSheets.forEach((a,u)=>{const c=fp([`${o}/${e.data.meta.related_multi_packs[u]}`],a,!0);Object.assign(s,c)})}return s}const O5={extension:xe.Asset,cache:{test:r=>r instanceof E1,getCacheableAssets:(r,e)=>fp(r,e,!1)},resolver:{extension:{type:xe.ResolveParser,name:"resolveSpritesheet"},test:r=>{const t=r.split("?")[0].split("."),s=t.pop(),o=t.pop();return s==="json"&&D5.includes(o)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=zs.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:xe.LoadParser,priority:ti.Normal,name:"spritesheetLoader"},async testParse(r,e){return xn.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var y,x;const{texture:s,imageFilename:o,textureOptions:a,cachePrefix:u}=(e==null?void 0:e.data)??{};let c=xn.dirname(e.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let d;if(s instanceof Ue)d=s;else{const v=uh(c+(o??r.meta.image),e.src);d=(await t.load([{src:v,data:a}]))[v]}const f=new E1({texture:d.source,data:r,cachePrefix:u});await f.parse();const m=(y=r==null?void 0:r.meta)==null?void 0:y.related_multi_packs;if(Array.isArray(m)){const v=[];for(const S of m){if(typeof S!="string")continue;let _=c+S;(x=e.data)!=null&&x.ignoreMultiPack||(_=uh(_,e.src),v.push(t.load({src:_,data:{textureOptions:a,ignoreMultiPack:!0}})))}const b=await Promise.all(v);f.linkedSheets=b,b.forEach(S=>{S.linkedSheets=[f].concat(f.linkedSheets.filter(_=>_!==S))})}return f},async unload(r,e,t){await t.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};$t.add(O5);const Oc=Object.create(null),R1=Object.create(null);function Mh(r,e){let t=R1[r];return t===void 0&&(Oc[e]===void 0&&(Oc[e]=1),R1[r]=t=Oc[e]++),t}let _s;function pp(){return(!_s||_s!=null&&_s.isContextLost())&&(_s=et.get().createCanvas().getContext("webgl",{})),_s}let yl;function N5(){if(!yl){yl="mediump";const r=pp();r&&r.getShaderPrecisionFormat&&(yl=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return yl}function W5(r,e,t){return e?r:t?(r=r.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function U5(r,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let o=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${r}`}else if(s!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function H5(r,e){return e?`#version 300 es
${r}`:r}const G5={},V5={};function Y5(r,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?G5:V5;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${e}`}
${r}`}function X5(r,e){return e?r.replace("#version 300 es",""):r}const Nc={stripVersion:X5,ensurePrecision:U5,addProgramDefines:W5,setProgramName:Y5,insertVersion:H5},To=Object.create(null),mp=class ch{constructor(e){e={...ch.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:N5()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let o=e.fragment,a=e.vertex;Object.keys(Nc).forEach(u=>{const c=s[u];o=Nc[u](o,c,!0),a=Nc[u](a,c,!1)}),this.fragment=o,this.vertex=a,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Mh(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,To[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return To[t]||(To[t]=new ch(e),To[t]._cacheKey=t),To[t]}};mp.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let gp=mp;const I1={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function q5(r){return I1[r]??I1.float32}const K5={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function Q5({source:r,entryPoint:e}){const t={},s=r.indexOf(`fn ${e}`);if(s!==-1){const o=r.indexOf("->",s);if(o!==-1){const a=r.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let c;for(;(c=u.exec(a))!==null;){const d=K5[c[3]]??"float32";t[c[2]]={location:parseInt(c[1],10),format:d,stride:q5(d).stride,offset:0,instance:!1,start:0}}}}return t}function Wc(r){var y,x;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,a=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,c=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,f=(y=r.match(e))==null?void 0:y.map(v=>({group:parseInt(v.match(t)[1],10),binding:parseInt(v.match(s)[1],10),name:v.match(o)[2],isUniform:v.match(o)[1]==="<uniform>",type:v.match(a)[1]}));if(!f)return{groups:[],structs:[]};const m=((x=r.match(u))==null?void 0:x.map(v=>{const b=v.match(d)[1],S=v.match(c).reduce((_,T)=>{const[M,E]=T.split(":");return _[M.trim()]=E.trim(),_},{});return S?{name:b,members:S}:null}).filter(({name:v})=>f.some(b=>b.type===v)))??[];return{groups:f,structs:m}}var Fo=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(Fo||{});function Z5({groups:r}){const e=[];for(let t=0;t<r.length;t++){const s=r[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:Fo.VERTEX|Fo.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:Fo.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:Fo.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function J5({groups:r}){const e=[];for(let t=0;t<r.length;t++){const s=r[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function ex(r,e){const t=new Set,s=new Set,o=[...r.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),a=[...r.groups,...e.groups].filter(u=>{const c=`${u.name}-${u.binding}`;return s.has(c)?!1:(s.add(c),!0)});return{structs:o,groups:a}}const Po=Object.create(null);class Dl{constructor(e){var c,d;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:o,gpuLayout:a,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=s,t.source===s.source){const f=Wc(t.source);this.structsAndGroups=f}else{const f=Wc(s.source),m=Wc(t.source);this.structsAndGroups=ex(f,m)}this.layout=o??J5(this.structsAndGroups),this.gpuLayout=a??Z5(this.structsAndGroups),this.autoAssignGlobalUniforms=((c=this.layout[0])==null?void 0:c.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((d=this.layout[1])==null?void 0:d.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Mh(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=Q5(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Po[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Po[t]||(Po[t]=new Dl(e),Po[t]._cacheKey=t),Po[t]}}const yp=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],tx=yp.reduce((r,e)=>(r[e]=!0,r),{});function nx(r,e){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const xp=class vp{constructor(e,t){this._touched=0,this.uid=yt("uniform"),this._resourceType="uniformGroup",this._resourceId=yt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...vp.defaultOptions,...t},this.uniformStructures=e;const s={};for(const o in e){const a=e[o];if(a.name=o,a.size=a.size??1,!tx[a.type]){const u=a.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,c,d]=u;throw new Error(`Uniform type ${a.type} is not supported. Use type: '${c}', size: ${d} instead.`)}throw new Error(`Uniform type ${a.type} is not supported. Supported uniform types are: ${yp.join(", ")}`)}a.value??(a.value=nx(a.type,a.size)),s[o]=a.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Mh(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};xp.defaultOptions={ubo:!1,isStatic:!1};let _p=xp;class Ml{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const o=e[s];this.setResource(o,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){var o,a;const s=this.resources[t];e!==s&&(s&&((o=e.off)==null||o.call(e,"change",this.onResourceChange,this)),(a=e.on)==null||a.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){var t;const e=this.resources;for(const s in e){const o=e[s];(t=o==null?void 0:o.off)==null||t.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var hh=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(hh||{});class Eh extends Un{constructor(e){super(),this.uid=yt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:o,resources:a,compatibleRenderers:u,groupMap:c}=e;this.gpuProgram=t,this.glProgram=s,u===void 0&&(u=0,t&&(u|=hh.WEBGPU),s&&(u|=hh.WEBGL)),this.compatibleRenderers=u;const d={};if(!a&&!o&&(a={}),a&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&o&&!c)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&o&&c)for(const f in c)for(const m in c[f]){const y=c[f][m];d[y]={group:f,binding:m,name:y}}else if(t&&o&&!c){const f=t.structsAndGroups.groups;c={},f.forEach(m=>{c[m.group]=c[m.group]||{},c[m.group][m.binding]=m.name,d[m.name]=m})}else if(a){o={},c={},t&&t.structsAndGroups.groups.forEach(y=>{c[y.group]=c[y.group]||{},c[y.group][y.binding]=y.name,d[y.name]=y});let f=0;for(const m in a)d[m]||(o[99]||(o[99]=new Ml,this._ownedBindGroups.push(o[99])),d[m]={group:99,binding:f,name:m},c[99]=c[99]||{},c[99][f]=m,f++);for(const m in a){const y=m;let x=a[m];!x.source&&!x._resourceType&&(x=new _p(x));const v=d[y];v&&(o[v.group]||(o[v.group]=new Ml,this._ownedBindGroups.push(o[v.group])),o[v.group].setResource(x,v.binding))}}this.groups=o,this._uniformBindMap=c,this.resources=this._buildResourceAccessor(o,d)}addResource(e,t,s){var o,a;(o=this._uniformBindMap)[t]||(o[t]={}),(a=this._uniformBindMap[t])[s]||(a[s]=e),this.groups[t]||(this.groups[t]=new Ml,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const o in t){const a=t[o];Object.defineProperty(s,a.name,{get(){return e[a.group].getResource(a.binding)},set(u){e[a.group].setResource(u,a.binding)}})}return s}destroy(e=!1){var t,s;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...o}=e;let a,u;return t&&(a=Dl.from(t)),s&&(u=gp.from(s)),new Eh({gpuProgram:a,glProgram:u,...o})}}const dh=[];$t.handleByNamedList(xe.Environment,dh);async function rx(r){if(!r)for(let e=0;e<dh.length;e++){const t=dh[e];if(t.value.test()){await t.value.load();return}}}let Mo;function ix(){if(typeof Mo=="boolean")return Mo;try{Mo=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Mo=!1}return Mo}function L1(r,e,t=2){const s=e&&e.length,o=s?e[0]*t:r.length;let a=wp(r,0,o,t,!0);const u=[];if(!a||a.next===a.prev)return u;let c,d,f;if(s&&(a=ux(r,e,a,t)),r.length>80*t){c=r[0],d=r[1];let m=c,y=d;for(let x=t;x<o;x+=t){const v=r[x],b=r[x+1];v<c&&(c=v),b<d&&(d=b),v>m&&(m=v),b>y&&(y=b)}f=Math.max(m-c,y-d),f=f!==0?32767/f:0}return Ho(a,u,t,c,d,f,0),u}function wp(r,e,t,s,o){let a;if(o===_x(r,e,t,s)>0)for(let u=e;u<t;u+=s)a=z1(u/s|0,r[u],r[u+1],a);else for(let u=t-s;u>=e;u-=s)a=z1(u/s|0,r[u],r[u+1],a);return a&&Ls(a,a.next)&&(Vo(a),a=a.next),a}function ji(r,e){if(!r)return r;e||(e=r);let t=r,s;do if(s=!1,!t.steiner&&(Ls(t,t.next)||dt(t.prev,t,t.next)===0)){if(Vo(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function Ho(r,e,t,s,o,a,u){if(!r)return;!u&&a&&px(r,s,o,a);let c=r;for(;r.prev!==r.next;){const d=r.prev,f=r.next;if(a?ox(r,s,o,a):sx(r)){e.push(d.i,r.i,f.i),Vo(r),r=f.next,c=f.next;continue}if(r=f,r===c){u?u===1?(r=ax(ji(r),e),Ho(r,e,t,s,o,a,2)):u===2&&lx(r,e,t,s,o,a):Ho(ji(r),e,t,s,o,a,1);break}}}function sx(r){const e=r.prev,t=r,s=r.next;if(dt(e,t,s)>=0)return!1;const o=e.x,a=t.x,u=s.x,c=e.y,d=t.y,f=s.y,m=Math.min(o,a,u),y=Math.min(c,d,f),x=Math.max(o,a,u),v=Math.max(c,d,f);let b=s.next;for(;b!==e;){if(b.x>=m&&b.x<=x&&b.y>=y&&b.y<=v&&jo(o,c,a,d,u,f,b.x,b.y)&&dt(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function ox(r,e,t,s){const o=r.prev,a=r,u=r.next;if(dt(o,a,u)>=0)return!1;const c=o.x,d=a.x,f=u.x,m=o.y,y=a.y,x=u.y,v=Math.min(c,d,f),b=Math.min(m,y,x),S=Math.max(c,d,f),_=Math.max(m,y,x),T=fh(v,b,e,t,s),M=fh(S,_,e,t,s);let E=r.prevZ,P=r.nextZ;for(;E&&E.z>=T&&P&&P.z<=M;){if(E.x>=v&&E.x<=S&&E.y>=b&&E.y<=_&&E!==o&&E!==u&&jo(c,m,d,y,f,x,E.x,E.y)&&dt(E.prev,E,E.next)>=0||(E=E.prevZ,P.x>=v&&P.x<=S&&P.y>=b&&P.y<=_&&P!==o&&P!==u&&jo(c,m,d,y,f,x,P.x,P.y)&&dt(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;E&&E.z>=T;){if(E.x>=v&&E.x<=S&&E.y>=b&&E.y<=_&&E!==o&&E!==u&&jo(c,m,d,y,f,x,E.x,E.y)&&dt(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;P&&P.z<=M;){if(P.x>=v&&P.x<=S&&P.y>=b&&P.y<=_&&P!==o&&P!==u&&jo(c,m,d,y,f,x,P.x,P.y)&&dt(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function ax(r,e){let t=r;do{const s=t.prev,o=t.next.next;!Ls(s,o)&&Sp(s,t,t.next,o)&&Go(s,o)&&Go(o,s)&&(e.push(s.i,t.i,o.i),Vo(t),Vo(t.next),t=r=o),t=t.next}while(t!==r);return ji(t)}function lx(r,e,t,s,o,a){let u=r;do{let c=u.next.next;for(;c!==u.prev;){if(u.i!==c.i&&yx(u,c)){let d=kp(u,c);u=ji(u,u.next),d=ji(d,d.next),Ho(u,e,t,s,o,a,0),Ho(d,e,t,s,o,a,0);return}c=c.next}u=u.next}while(u!==r)}function ux(r,e,t,s){const o=[];for(let a=0,u=e.length;a<u;a++){const c=e[a]*s,d=a<u-1?e[a+1]*s:r.length,f=wp(r,c,d,s,!1);f===f.next&&(f.steiner=!0),o.push(gx(f))}o.sort(cx);for(let a=0;a<o.length;a++)t=hx(o[a],t);return t}function cx(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const s=(r.next.y-r.y)/(r.next.x-r.x),o=(e.next.y-e.y)/(e.next.x-e.x);t=s-o}return t}function hx(r,e){const t=dx(r,e);if(!t)return e;const s=kp(t,r);return ji(s,s.next),ji(t,t.next)}function dx(r,e){let t=e;const s=r.x,o=r.y;let a=-1/0,u;if(Ls(r,t))return t;do{if(Ls(r,t.next))return t.next;if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>a&&(a=y,u=t.x<t.next.x?t:t.next,y===s))return u}t=t.next}while(t!==e);if(!u)return null;const c=u,d=u.x,f=u.y;let m=1/0;t=u;do{if(s>=t.x&&t.x>=d&&s!==t.x&&bp(o<f?s:a,o,d,f,o<f?a:s,o,t.x,t.y)){const y=Math.abs(o-t.y)/(s-t.x);Go(t,r)&&(y<m||y===m&&(t.x>u.x||t.x===u.x&&fx(u,t)))&&(u=t,m=y)}t=t.next}while(t!==c);return u}function fx(r,e){return dt(r.prev,r,e.prev)<0&&dt(e.next,r,r.next)<0}function px(r,e,t,s){let o=r;do o.z===0&&(o.z=fh(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,mx(o)}function mx(r){let e,t=1;do{let s=r,o;r=null;let a=null;for(e=0;s;){e++;let u=s,c=0;for(let f=0;f<t&&(c++,u=u.nextZ,!!u);f++);let d=t;for(;c>0||d>0&&u;)c!==0&&(d===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,c--):(o=u,u=u.nextZ,d--),a?a.nextZ=o:r=o,o.prevZ=a,a=o;s=u}a.nextZ=null,t*=2}while(e>1);return r}function fh(r,e,t,s,o){return r=(r-t)*o|0,e=(e-s)*o|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function gx(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function bp(r,e,t,s,o,a,u,c){return(o-u)*(e-c)>=(r-u)*(a-c)&&(r-u)*(s-c)>=(t-u)*(e-c)&&(t-u)*(a-c)>=(o-u)*(s-c)}function jo(r,e,t,s,o,a,u,c){return!(r===u&&e===c)&&bp(r,e,t,s,o,a,u,c)}function yx(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!xx(r,e)&&(Go(r,e)&&Go(e,r)&&vx(r,e)&&(dt(r.prev,r,e.prev)||dt(r,e.prev,e))||Ls(r,e)&&dt(r.prev,r,r.next)>0&&dt(e.prev,e,e.next)>0)}function dt(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Ls(r,e){return r.x===e.x&&r.y===e.y}function Sp(r,e,t,s){const o=vl(dt(r,e,t)),a=vl(dt(r,e,s)),u=vl(dt(t,s,r)),c=vl(dt(t,s,e));return!!(o!==a&&u!==c||o===0&&xl(r,t,e)||a===0&&xl(r,s,e)||u===0&&xl(t,r,s)||c===0&&xl(t,e,s))}function xl(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function vl(r){return r>0?1:r<0?-1:0}function xx(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&Sp(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Go(r,e){return dt(r.prev,r,r.next)<0?dt(r,e,r.next)>=0&&dt(r,r.prev,e)>=0:dt(r,e,r.prev)<0||dt(r,r.next,e)<0}function vx(r,e){let t=r,s=!1;const o=(r.x+e.x)/2,a=(r.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&o<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==r);return s}function kp(r,e){const t=ph(r.i,r.x,r.y),s=ph(e.i,e.x,e.y),o=r.next,a=e.prev;return r.next=e,e.prev=r,t.next=o,o.prev=t,s.next=t,t.prev=s,a.next=s,s.prev=a,s}function z1(r,e,t,s){const o=ph(r,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function Vo(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function ph(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function _x(r,e,t,s){let o=0;for(let a=e,u=t-s;a<t;a+=s)o+=(r[u]-r[a])*(r[a+1]+r[u+1]),u=a;return o}const wx=L1.default||L1;var Cp=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(Cp||{});class bx{constructor(e){this.items=[],this._name=e}emit(e,t,s,o,a,u,c,d){const{name:f,items:m}=this;for(let y=0,x=m.length;y<x;y++)m[y][f](e,t,s,o,a,u,c,d);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Sx=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Ap=class Tp extends Un{constructor(e){super(),this.uid=yt("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...Sx,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await rx(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...Tp.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof yn&&(s={container:s},t&&(Fe(Ke,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:kt.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const o=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Cp.ALL);const{clear:s,clearColor:o,target:a}=e;kt.shared.setValue(o??this.background.colorRgba),t.renderTarget.clear(a,s,kt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new bx(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(e,t){const s=t.reduce((o,a)=>(o[a.name]=a.value,o),{});e.forEach(o=>{const a=o.value,u=o.name,c=s[u];this.renderPipes[u]=new a(this,c?new c:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&Qo.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!ix())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Ap.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Pp=Ap,_l;function kx(r){return _l!==void 0||(_l=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:r??Pp.defaultOptions.failIfMajorPerformanceCaveat};try{if(!et.get().getWebGLRenderingContext())return!1;let o=et.get().createCanvas().getContext("webgl",e);const a=!!((t=o==null?void 0:o.getContextAttributes())!=null&&t.stencil);if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,a}catch{return!1}})()),_l}let wl;async function Cx(r={}){return wl!==void 0||(wl=await(async()=>{const e=et.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),wl}const F1=["webgl","webgpu","canvas"];async function Ax(r){let e=[];r.preference?(e.push(r.preference),F1.forEach(a=>{a!==r.preference&&e.push(a)})):e=F1.slice();let t,s={};for(let a=0;a<e.length;a++){const u=e[a];if(u==="webgpu"&&await Cx()){const{WebGPURenderer:c}=await Il(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-KoiO6yoD.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]));t=c,s={...r,...r.webgpu};break}else if(u==="webgl"&&kx(r.failIfMajorPerformanceCaveat??Pp.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:c}=await Il(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-BgasUmVM.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]));t=c,s={...r,...r.webgl};break}else if(u==="canvas")throw s={...r},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const o=new t;return await o.init(s),o}const Mp="8.14.3";class Ep{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,Mp)}static destroy(){}}Ep.extension=xe.Application;class Tx{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,Mp)}destroy(){this._renderer=null}}Tx.extension={type:[xe.WebGLSystem,xe.WebGPUSystem],name:"initHook",priority:-10};const Rp=class mh{constructor(...e){this.stage=new yn,e[0]!==void 0&&Fe(Ke,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new yn),this.renderer=await Ax(e),mh._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Fe(Ke,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=mh._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Rp._plugins=[];let Ip=Rp;$t.handleByList(xe.Application,Ip._plugins);$t.add(Ep);class Lp extends Un{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Fe(Ke,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Fe(Ke,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Fe(Ke,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Fe(Ke,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Fe(Ke,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(t=this.chars[s].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class Px{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let o=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let a=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=a:this.last.next=a,this.last=a}return o}set(e,t,s=!1,o=this.resetTtl){let a=this.items[e];return s||a!==void 0?(a.value=t,s===!1&&o&&(a.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(a)):(this.max>0&&this.size===this.max&&this.evict(!0),a=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=a:this.last.next=a,this.last=a),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function zp(r=1e3,e=0,t=!1){if(isNaN(r)||r<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new Px(r,e,t)}const Mx=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function zl(r){const e=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let t=r.fontFamily;Array.isArray(r.fontFamily)||(t=r.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let o=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!Mx.includes(o)&&(o=`"${o}"`),t[s]=o}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${e} ${t.join(",")}`}const Uc={willReadFrequently:!0},Gn=class ge{static get experimentalLetterSpacingSupported(){let e=ge._experimentalLetterSpacingSupported;if(e===void 0){const t=et.get().getCanvasRenderingContext2D().prototype;e=ge._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,o,a,u,c,d,f){this.text=e,this.style=t,this.width=s,this.height=o,this.lines=a,this.lineWidths=u,this.lineHeight=c,this.maxLineWidth=d,this.fontProperties=f}static measureText(e=" ",t,s=ge._canvas,o=t.wordWrap){var M;const a=`${e}-${t.styleKey}-wordWrap-${o}`;if(ge._measurementCache.has(a))return ge._measurementCache.get(a);const u=zl(t),c=ge.measureFont(u);c.fontSize===0&&(c.fontSize=t.fontSize,c.ascent=t.fontSize);const d=ge.__context;d.font=u;const m=(o?ge._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),y=new Array(m.length);let x=0;for(let E=0;E<m.length;E++){const P=ge._measureText(m[E],t.letterSpacing,d);y[E]=P,x=Math.max(x,P)}const v=((M=t._stroke)==null?void 0:M.width)||0;let b=x+v;t.dropShadow&&(b+=t.dropShadow.distance);const S=t.lineHeight||c.fontSize;let _=Math.max(S,c.fontSize+v)+(m.length-1)*(S+t.leading);t.dropShadow&&(_+=t.dropShadow.distance);const T=new ge(e,t,b,_,m,y,S+t.leading,x,c);return ge._measurementCache.set(a,T),T}static _measureText(e,t,s){let o=!1;ge.experimentalLetterSpacingSupported&&(ge.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const a=s.measureText(e);let u=a.width;const c=-a.actualBoundingBoxLeft;let f=a.actualBoundingBoxRight-c;if(u>0)if(o)u-=t,f-=t;else{const m=(ge.graphemeSegmenter(e).length-1)*t;u+=m,f+=m}return Math.max(u,f)}static _wordWrap(e,t,s=ge._canvas){const o=s.getContext("2d",Uc);let a=0,u="",c="";const d=Object.create(null),{letterSpacing:f,whiteSpace:m}=t,y=ge._collapseSpaces(m),x=ge._collapseNewlines(m);let v=!y;const b=t.wordWrapWidth+f,S=ge._tokenize(e);for(let _=0;_<S.length;_++){let T=S[_];if(ge._isNewline(T)){if(!x){c+=ge._addLine(u),v=!y,u="",a=0;continue}T=" "}if(y){const E=ge.isBreakingSpace(T),P=ge.isBreakingSpace(u[u.length-1]);if(E&&P)continue}const M=ge._getFromCache(T,f,d,o);if(M>b)if(u!==""&&(c+=ge._addLine(u),u="",a=0),ge.canBreakWords(T,t.breakWords)){const E=ge.wordWrapSplit(T);for(let P=0;P<E.length;P++){let N=E[P],D=N,F=1;for(;E[P+F];){const G=E[P+F];if(!ge.canBreakChars(D,G,T,P,t.breakWords))N+=G;else break;D=G,F++}P+=F-1;const U=ge._getFromCache(N,f,d,o);U+a>b&&(c+=ge._addLine(u),v=!1,u="",a=0),u+=N,a+=U}}else{u.length>0&&(c+=ge._addLine(u),u="",a=0);const E=_===S.length-1;c+=ge._addLine(T,!E),v=!1,u="",a=0}else M+a>b&&(v=!1,c+=ge._addLine(u),u="",a=0),(u.length>0||!ge.isBreakingSpace(T)||v)&&(u+=T,a+=M)}return c+=ge._addLine(u,!1),c}static _addLine(e,t=!0){return e=ge._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,o){let a=s[e];return typeof a!="number"&&(a=ge._measureText(e,t,o)+t,s[e]=a),a}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!ge.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ge._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ge._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const a=e[o],u=e[o+1];if(ge.isBreakingSpace(a,u)||ge._isNewline(a)){s!==""&&(t.push(s),s=""),a==="\r"&&u===`
`?(t.push(`\r
`),o++):t.push(a);continue}s+=a}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,o,a){return!0}static wordWrapSplit(e){return ge.graphemeSegmenter(e)}static measureFont(e){if(ge._fonts[e])return ge._fonts[e];const t=ge._context;t.font=e;const s=t.measureText(ge.METRICS_STRING+ge.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return ge._fonts[e]=o,o}static clearMetrics(e=""){e?delete ge._fonts[e]:ge._fonts={}}static get _canvas(){if(!ge.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",Uc);if(s!=null&&s.measureText)return ge.__canvas=t,t;e=et.get().createCanvas()}catch{e=et.get().createCanvas()}e.width=e.height=10,ge.__canvas=e}return ge.__canvas}static get _context(){return ge.__context||(ge.__context=ge._canvas.getContext("2d",Uc)),ge.__context}};Gn.METRICS_STRING="|q";Gn.BASELINE_SYMBOL="M";Gn.BASELINE_MULTIPLIER=1.4;Gn.HEIGHT_MULTIPLIER=2;Gn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>{const t=r.segment(e),s=[];let o=0;for(const a of t)s[o++]=a.segment;return s}}return r=>[...r]})();Gn.experimentalLetterSpacing=!1;Gn._fonts={};Gn._newlines=[10,13];Gn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Gn._measurementCache=zp(1e3);let or=Gn;const j1=[{offset:0,color:"white"},{offset:1,color:"black"}],Rh=class gh{constructor(...e){this.uid=yt("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=Ex(e);t={...t.type==="radial"?gh.defaultRadialOptions:gh.defaultLinearOptions,...$0(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:kt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:o}=this.end,a=s-e,u=o-t;const c=a<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(a<0){const _=e;e=s,s=_,a*=-1}if(u<0){const _=t;t=o,o=_,u*=-1}}const d=this.colorStops.length?this.colorStops:j1,f=this._textureSize,{canvas:m,context:y}=$1(f,1),x=c?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);B1(x,d),y.fillStyle=x,y.fillRect(0,0,f,1),this.texture=new Ue({source:new Fi({resource:m,addressMode:this._wrapMode})});const v=Math.sqrt(a*a+u*u),b=Math.atan2(u,a),S=new Oe;S.scale(v/f,1),S.rotate(b),S.translate(e,t),this.textureSpace==="local"&&S.scale(f,f),this.transform=S}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:j1,t=this._textureSize,{canvas:s,context:o}=$1(t,t),{x:a,y:u}=this.center,{x:c,y:d}=this.outerCenter,f=this.innerRadius,m=this.outerRadius,y=c-m,x=d-m,v=t/(m*2),b=(a-y)*v,S=(u-x)*v,_=o.createRadialGradient(b,S,f*v,(c-y)*v,(d-x)*v,m*v);B1(_,e),o.fillStyle=e[e.length-1].color,o.fillRect(0,0,t,t),o.fillStyle=_,o.translate(b,S),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-b,-S),o.fillRect(0,0,t,t),this.texture=new Ue({source:new Fi({resource:s,addressMode:this._wrapMode})});const T=new Oe;T.scale(1/v,1/v),T.translate(y,x),this.textureSpace==="local"&&T.scale(t,t),this.transform=T}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Rh.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Rh.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Pr=Rh;function B1(r,e){for(let t=0;t<e.length;t++){const s=e[t];r.addColorStop(s.offset,s.color)}}function $1(r,e){const t=et.get().createCanvas(r,e),s=t.getContext("2d");return{canvas:t,context:s}}function Ex(r){let e=r[0]??{};return(typeof e=="number"||r[1])&&(Fe("8.5.2","use options object instead"),e={type:"linear",start:{x:r[0],y:r[1]},end:{x:r[2],y:r[3]},textureSpace:r[4],textureSize:r[5]??Pr.defaultLinearOptions.textureSize}),e}const D1={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Ol{constructor(e,t){this.uid=yt("fillPattern"),this._tick=0,this.transform=new Oe,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=D1[t].addressModeU,e.source.style.addressModeV=D1[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var Hc,O1;function Rx(){if(O1)return Hc;O1=1,Hc=t;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(a){var u=[];return a.replace(e,function(c,d,f){var m=d.toLowerCase();for(f=o(f),m=="m"&&f.length>2&&(u.push([d].concat(f.splice(0,2))),m="l",d=d=="m"?"l":"L");;){if(f.length==r[m])return f.unshift(d),u.push(f);if(f.length<r[m])throw new Error("malformed path data");u.push([d].concat(f.splice(0,r[m])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(a){var u=a.match(s);return u?u.map(Number):[]}return Hc}var Ix=Rx();const Lx=bh(Ix);function zx(r,e){const t=Lx(r),s=[];let o=null,a=0,u=0;for(let c=0;c<t.length;c++){const d=t[c],f=d[0],m=d;switch(f){case"M":a=m[1],u=m[2],e.moveTo(a,u);break;case"m":a+=m[1],u+=m[2],e.moveTo(a,u);break;case"H":a=m[1],e.lineTo(a,u);break;case"h":a+=m[1],e.lineTo(a,u);break;case"V":u=m[1],e.lineTo(a,u);break;case"v":u+=m[1],e.lineTo(a,u);break;case"L":a=m[1],u=m[2],e.lineTo(a,u);break;case"l":a+=m[1],u+=m[2],e.lineTo(a,u);break;case"C":a=m[5],u=m[6],e.bezierCurveTo(m[1],m[2],m[3],m[4],a,u);break;case"c":e.bezierCurveTo(a+m[1],u+m[2],a+m[3],u+m[4],a+m[5],u+m[6]),a+=m[5],u+=m[6];break;case"S":a=m[3],u=m[4],e.bezierCurveToShort(m[1],m[2],a,u);break;case"s":e.bezierCurveToShort(a+m[1],u+m[2],a+m[3],u+m[4]),a+=m[3],u+=m[4];break;case"Q":a=m[3],u=m[4],e.quadraticCurveTo(m[1],m[2],a,u);break;case"q":e.quadraticCurveTo(a+m[1],u+m[2],a+m[3],u+m[4]),a+=m[3],u+=m[4];break;case"T":a=m[1],u=m[2],e.quadraticCurveToShort(a,u);break;case"t":a+=m[1],u+=m[2],e.quadraticCurveToShort(a,u);break;case"A":a=m[6],u=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],a,u);break;case"a":a+=m[6],u+=m[7],e.arcToSvg(m[1],m[2],m[3],m[4],m[5],a,u);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(a=o.startX,u=o.startY):(a=0,u=0)),o=null;break;default:ot(`Unknown SVG path command: ${f}`)}f!=="Z"&&f!=="z"&&o===null&&(o={startX:a,startY:u},s.push(o))}return e}class Ih{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new Ih(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-e,a=this.y-t;return o*=o,a*=a,o+a<=s}strokeContains(e,t,s,o=.5){if(this.radius===0)return!1;const a=this.x-e,u=this.y-t,c=this.radius,d=(1-o)*s,f=Math.sqrt(a*a+u*u);return f<=c+d&&f>c-(s-d)}getBounds(e){return e||(e=new lt),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Lh{constructor(e=0,t=0,s=0,o=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=o}clone(){return new Lh(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,o=(t-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(e,t,s,o=.5){const{halfWidth:a,halfHeight:u}=this;if(a<=0||u<=0)return!1;const c=s*(1-o),d=s-c,f=a-d,m=u-d,y=a+c,x=u+c,v=e-this.x,b=t-this.y,S=v*v/(f*f)+b*b/(m*m),_=v*v/(y*y)+b*b/(x*x);return S>1&&_<=1}getBounds(e){return e||(e=new lt),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Fx(r,e,t,s,o,a){const u=r-t,c=e-s,d=o-t,f=a-s,m=u*d+c*f,y=d*d+f*f;let x=-1;y!==0&&(x=m/y);let v,b;x<0?(v=t,b=s):x>1?(v=o,b=a):(v=t+x*d,b=s+x*f);const S=r-v,_=e-b;return S*S+_*_}let jx,Bx;class Oo{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let o=0,a=t.length;o<a;o++)s.push(t[o].x,t[o].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let o=0;o<s;o+=2){const a=t[o],u=t[o+1],c=t[(o+2)%s],d=t[(o+3)%s];e+=(c-a)*(d+u)}return e<0}containsPolygon(e){const t=this.getBounds(jx),s=e.getBounds(Bx);if(!t.containsRect(s))return!1;const o=e.points;for(let a=0;a<o.length;a+=2){const u=o[a],c=o[a+1];if(!this.contains(u,c))return!1}return!0}clone(){const e=this.points.slice(),t=new Oo(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const o=this.points.length/2;for(let a=0,u=o-1;a<o;u=a++){const c=this.points[a*2],d=this.points[a*2+1],f=this.points[u*2],m=this.points[u*2+1];d>t!=m>t&&e<(f-c)*((t-d)/(m-d))+c&&(s=!s)}return s}strokeContains(e,t,s,o=.5){const a=s*s,u=a*(1-o),c=a-u,{points:d}=this,f=d.length-(this.closePath?0:2);for(let m=0;m<f;m+=2){const y=d[m],x=d[m+1],v=d[(m+2)%d.length],b=d[(m+3)%d.length],S=Fx(e,t,y,x,v,b),_=Math.sign((v-y)*(t-x)-(b-x)*(e-y));if(S<=(_<0?c:u))return!0}return!1}getBounds(e){e||(e=new lt);const t=this.points;let s=1/0,o=-1/0,a=1/0,u=-1/0;for(let c=0,d=t.length;c<d;c+=2){const f=t[c],m=t[c+1];s=f<s?f:s,o=f>o?f:o,a=m<a?m:a,u=m>u?m:u}return e.x=s,e.width=o-s,e.y=a,e.height=u-a,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Fe("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Fe("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const bl=(r,e,t,s,o,a,u)=>{const c=r-t,d=e-s,f=Math.sqrt(c*c+d*d);return f>=o-a&&f<=o+u};class zh{constructor(e=0,t=0,s=0,o=0,a=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=o,this.radius=a}getBounds(e){return e||(e=new lt),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new zh(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let o=e-(this.x+s),a=t-(this.y+s);const u=s*s;if(o*o+a*a<=u||(o=e-(this.x+this.width-s),o*o+a*a<=u)||(a=t-(this.y+this.height-s),o*o+a*a<=u)||(o=e-(this.x+s),o*o+a*a<=u))return!0}return!1}strokeContains(e,t,s,o=.5){const{x:a,y:u,width:c,height:d,radius:f}=this,m=s*(1-o),y=s-m,x=a+f,v=u+f,b=c-f*2,S=d-f*2,_=a+c,T=u+d;return(e>=a-m&&e<=a+y||e>=_-y&&e<=_+m)&&t>=v&&t<=v+S||(t>=u-m&&t<=u+y||t>=T-y&&t<=T+m)&&e>=x&&e<=x+b?!0:e<x&&t<v&&bl(e,t,x,v,f,y,m)||e>_-f&&t<v&&bl(e,t,_-f,v,f,y,m)||e>_-f&&t>T-f&&bl(e,t,_-f,T-f,f,y,m)||e<x&&t>T-f&&bl(e,t,x,T-f,f,y,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const Fp={};function $x(r,e,t){let s=2166136261;for(let o=0;o<e;o++)s^=r[o].uid,s=Math.imul(s,16777619),s>>>=0;return Fp[s]||Dx(r,e,s,t)}function Dx(r,e,t,s){const o={};let a=0;for(let c=0;c<s;c++){const d=c<e?r[c]:Ue.EMPTY.source;o[a++]=d.source,o[a++]=d.style}const u=new Ml(o);return Fp[t]=u,u}class N1{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function W1(r,e){const t=r.byteLength/8|0,s=new Float64Array(r,0,t);new Float64Array(e,0,t).set(s);const a=r.byteLength-t*8;if(a>0){const u=new Uint8Array(r,t*8,a);new Uint8Array(e,t*8,a).set(u)}}const Ox={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var Nx=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))(Nx||{});function U1(r,e){return e.alphaMode==="no-premultiply-alpha"&&Ox[r]||r}const Wx=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Ux(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function Hx(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=Wx.replace(/%forloop%/gi,Ux(r));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}}finally{e.deleteShader(t)}return r}let ws=null;function Gx(){var e;if(ws)return ws;const r=pp();return ws=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),ws=Hx(ws,r),(e=r.getExtension("WEBGL_lose_context"))==null||e.loseContext(),ws}class Vx{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class Yx{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new Vx,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const No=[];let Fl=0;Qo.register({clear:()=>{if(No.length>0)for(const r of No)r&&r.destroy();No.length=0,Fl=0}});function H1(){return Fl>0?No[--Fl]:new Yx}function G1(r){No[Fl++]=r}let Eo=0;const jp=class Bp{constructor(e){this.uid=yt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...Bp.defaultOptions,...e},e.maxTextures||(Fe("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=Gx());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new N1(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)G1(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=H1(),o=s.textures;o.clear();const a=t[this.elementStart];let u=U1(a.blendMode,a.texture._source),c=a.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,f=this.attributeBuffer.uint32View,m=this.indexBuffer;let y=this._batchIndexSize,x=this._batchIndexStart,v="startBatch";const b=this.maxTextures;for(let S=this.elementStart;S<this.elementSize;++S){const _=t[S];t[S]=null;const M=_.texture._source,E=U1(_.blendMode,M),P=u!==E||c!==_.topology;if(M._batchTick===Eo&&!P){_._textureId=M._textureBindLocation,y+=_.indexSize,_.packAsQuad?(this.packQuadAttributes(_,d,f,_._attributeStart,_._textureId),this.packQuadIndex(m,_._indexStart,_._attributeStart/this.vertexSize)):(this.packAttributes(_,d,f,_._attributeStart,_._textureId),this.packIndex(_,m,_._indexStart,_._attributeStart/this.vertexSize)),_._batch=s;continue}M._batchTick=Eo,(o.count>=b||P)&&(this._finishBatch(s,x,y-x,o,u,c,e,v),v="renderBatch",x=y,u=E,c=_.topology,s=H1(),o=s.textures,o.clear(),++Eo),_._textureId=M._textureBindLocation=o.count,o.ids[M.uid]=o.count,o.textures[o.count++]=M,_._batch=s,y+=_.indexSize,_.packAsQuad?(this.packQuadAttributes(_,d,f,_._attributeStart,_._textureId),this.packQuadIndex(m,_._indexStart,_._attributeStart/this.vertexSize)):(this.packAttributes(_,d,f,_._attributeStart,_._textureId),this.packIndex(_,m,_._indexStart,_._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,x,y-x,o,u,c,e,v),x=y,++Eo),this.elementStart=this.elementSize,this._batchIndexStart=x,this._batchIndexSize=y}_finishBatch(e,t,s,o,a,u,c,d){e.gpuBindGroup=null,e.bindGroup=null,e.action=d,e.batcher=this,e.textures=o,e.blendMode=a,e.topology=u,e.start=t,e.size=s,++Eo,this.batches[this.batchIndex++]=e,c.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new N1(t);W1(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let a=0;a<t.length;a++)o[a]=t[a];else W1(t.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,o){const a=e.indices,u=e.indexSize,c=e.indexOffset,d=e.attributeOffset;for(let f=0;f<u;f++)t[s++]=o+a[f+c]-d}destroy(e={}){var t;if(this.batches!==null){for(let s=0;s<this.batches.length;s++)G1(this.batches[s]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((t=this.shader)==null||t.destroy(),this.shader=null);for(let s=0;s<this._elements.length;s++)this._elements[s]&&(this._elements[s]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};jp.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Xx=jp;var ln=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(ln||{});class Yo extends Un{constructor(e){let{data:t,size:s}=e;const{usage:o,label:a,shrinkToFit:u}=e;super(),this.uid=yt("buffer"),this._resourceType="buffer",this._resourceId=yt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t==null?void 0:t.byteLength);const c=!!t;this.descriptor={size:s,usage:o,mappedAtCreation:c,label:a},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&ln.STATIC)}set static(e){e?this.descriptor.usage|=ln.STATIC:this.descriptor.usage&=~ln.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const o=this._data;if(this._data=e,this._dataInt32=null,!o||o.length!==e.length){!this.shrinkToFit&&o&&e.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=yt("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function $p(r,e){if(!(r instanceof Yo)){let t=e?ln.INDEX:ln.VERTEX;r instanceof Array&&(e?(r=new Uint32Array(r),t=ln.INDEX|ln.COPY_DST):(r=new Float32Array(r),t=ln.VERTEX|ln.COPY_DST)),r=new Yo({data:r,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return r}function qx(r,e,t){const s=r.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const o=s.buffer.data;let a=1/0,u=1/0,c=-1/0,d=-1/0;const f=o.BYTES_PER_ELEMENT,m=(s.offset||0)/f,y=(s.stride||8)/f;for(let x=m;x<o.length;x+=y){const v=o[x],b=o[x+1];v>c&&(c=v),b>d&&(d=b),v<a&&(a=v),b<u&&(u=b)}return t.minX=a,t.minY=u,t.maxX=c,t.maxY=d,t}function Kx(r){return(r instanceof Yo||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=$p(r.buffer,!1),r}class Qx extends Un{constructor(e={}){super(),this.uid=yt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Wn,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:o}=e;if(this.buffers=[],this.attributes={},t)for(const a in t)this.addAttribute(a,t[a]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=Kx(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=$p(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,qx(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(s=>s.destroy()),(t=this.indexBuffer)==null||t.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Zx=new Float32Array(1),Jx=new Uint32Array(1);class e8 extends Qx{constructor(){const t=new Yo({data:Zx,label:"attribute-batch-buffer",usage:ln.VERTEX|ln.COPY_DST,shrinkToFit:!1}),s=new Yo({data:Jx,label:"index-batch-buffer",usage:ln.INDEX|ln.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:o,offset:0},aUV:{buffer:t,format:"float32x2",stride:o,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function V1(r,e,t){if(r)for(const s in r){const o=s.toLocaleLowerCase(),a=e[o];if(a){let u=r[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&a.push(`//----${t}----//`),a.push(u)}else ot(`${s} placement hook does not exist in shader`)}}const t8=/\{\{(.*?)\}\}/g;function Y1(r){var s;const e={};return(((s=r.match(t8))==null?void 0:s.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{e[o]=[]}),e}function X1(r,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(r))!==null;)e.push(t[1])}function q1(r,e,t=!1){const s=[];X1(e,s),r.forEach(c=>{c.header&&X1(c.header,s)});const o=s;t&&o.sort();const a=o.map((c,d)=>`       @location(${d}) ${c},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${a}
`),u}function K1(r,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(r))!==null;)e.push(t[1])}function n8(r){const t=/\b(\w+)\s*:/g.exec(r);return t?t[1]:""}function r8(r){const e=/@.*?\s+/g;return r.replace(e,"")}function i8(r,e){const t=[];K1(e,t),r.forEach(d=>{d.header&&K1(d.header,t)});let s=0;const o=t.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),a=t.sort().map(d=>`       var ${r8(d)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(d=>` ${n8(d)}`).join(`,
`)});`;let c=e.replace(/@out\s+[^;]+;\s*/g,"");return c=c.replace("{{struct}}",`
${o}
`),c=c.replace("{{start}}",`
${a}
`),c=c.replace("{{return}}",`
${u}
`),c}function Q1(r,e){let t=r;for(const s in e){const o=e[s];o.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const ei=Object.create(null),Gc=new Map;let s8=0;function o8({template:r,bits:e}){const t=Dp(r,e);if(ei[t])return ei[t];const{vertex:s,fragment:o}=l8(r,e);return ei[t]=Op(s,o,e),ei[t]}function a8({template:r,bits:e}){const t=Dp(r,e);return ei[t]||(ei[t]=Op(r.vertex,r.fragment,e)),ei[t]}function l8(r,e){const t=e.map(u=>u.vertex).filter(u=>!!u),s=e.map(u=>u.fragment).filter(u=>!!u);let o=q1(t,r.vertex,!0);o=i8(t,o);const a=q1(s,r.fragment,!0);return{vertex:o,fragment:a}}function Dp(r,e){return e.map(t=>(Gc.has(t)||Gc.set(t,s8++),Gc.get(t))).sort((t,s)=>t-s).join("-")+r.vertex+r.fragment}function Op(r,e,t){const s=Y1(r),o=Y1(e);return t.forEach(a=>{V1(a.vertex,s,a.name),V1(a.fragment,o,a.name)}),{vertex:Q1(r,s),fragment:Q1(e,o)}}const u8=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,c8=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,h8=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,d8=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,f8={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},p8={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function m8({bits:r,name:e}){const t=o8({template:{fragment:c8,vertex:u8},bits:[f8,...r]});return Dl.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function g8({bits:r,name:e}){return new gp({name:e,...a8({template:{vertex:h8,fragment:d8},bits:[p8,...r]})})}const y8={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},x8={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Vc={};function v8(r){const e=[];if(r===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<r;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function _8(r){const e=[];if(r===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<r;t++)t===r-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function w8(r){return Vc[r]||(Vc[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${v8(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${_8(r)}
            `}}),Vc[r]}const Yc={};function b8(r){const e=[];for(let t=0;t<r;t++)t>0&&e.push("else"),t<r-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function S8(r){return Yc[r]||(Yc[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${b8(r)}
            `}}),Yc[r]}const k8={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},C8={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Z1={};function A8(r){let e=Z1[r];if(e)return e;const t=new Int32Array(r);for(let s=0;s<r;s++)t[s]=s;return e=Z1[r]=new _p({uTextures:{value:t,type:"i32",size:r}},{isStatic:!0}),e}class J1 extends Eh{constructor(e){const t=g8({name:"batch",bits:[x8,S8(e),C8]}),s=m8({name:"batch",bits:[y8,w8(e),k8]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:A8(e)}}),this.maxTextures=e}}let Ro=null;const Np=class Wp extends Xx{constructor(e){super(e),this.geometry=new e8,this.name=Wp.extension.name,this.vertexSize=6,Ro??(Ro=new J1(e.maxTextures)),this.shader=Ro}packAttributes(e,t,s,o,a){const u=a<<16|e.roundPixels&65535,c=e.transform,d=c.a,f=c.b,m=c.c,y=c.d,x=c.tx,v=c.ty,{positions:b,uvs:S}=e,_=e.color,T=e.attributeOffset,M=T+e.attributeSize;for(let E=T;E<M;E++){const P=E*2,N=b[P],D=b[P+1];t[o++]=d*N+m*D+x,t[o++]=y*D+f*N+v,t[o++]=S[P],t[o++]=S[P+1],s[o++]=_,s[o++]=u}}packQuadAttributes(e,t,s,o,a){const u=e.texture,c=e.transform,d=c.a,f=c.b,m=c.c,y=c.d,x=c.tx,v=c.ty,b=e.bounds,S=b.maxX,_=b.minX,T=b.maxY,M=b.minY,E=u.uvs,P=e.color,N=a<<16|e.roundPixels&65535;t[o+0]=d*_+m*M+x,t[o+1]=y*M+f*_+v,t[o+2]=E.x0,t[o+3]=E.y0,s[o+4]=P,s[o+5]=N,t[o+6]=d*S+m*M+x,t[o+7]=y*M+f*S+v,t[o+8]=E.x1,t[o+9]=E.y1,s[o+10]=P,s[o+11]=N,t[o+12]=d*S+m*T+x,t[o+13]=y*T+f*S+v,t[o+14]=E.x2,t[o+15]=E.y2,s[o+16]=P,s[o+17]=N,t[o+18]=d*_+m*T+x,t[o+19]=y*T+f*_+v,t[o+20]=E.x3,t[o+21]=E.y3,s[o+22]=P,s[o+23]=N}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Ro=new J1(e),this.shader=Ro)}destroy(){this.shader=null,super.destroy()}};Np.extension={type:[xe.Batcher],name:"default"};let T8=Np;function P8(r,e,t,s,o,a,u,c=null){let d=0;t*=e,o*=a;const f=c.a,m=c.b,y=c.c,x=c.d,v=c.tx,b=c.ty;for(;d<u;){const S=r[t],_=r[t+1];s[o]=f*S+y*_+v,s[o+1]=m*S+x*_+b,o+=a,t+=e,d++}}function M8(r,e,t,s){let o=0;for(e*=t;o<s;)r[e]=0,r[e+1]=0,e+=t,o++}function Up(r,e,t,s,o){const a=e.a,u=e.b,c=e.c,d=e.d,f=e.tx,m=e.ty;t||(t=0),s||(s=2),o||(o=r.length/s-t);let y=t*s;for(let x=0;x<o;x++){const v=r[y],b=r[y+1];r[y]=a*v+c*b+f,r[y+1]=u*v+d*b+m,y+=s}}const E8=new Oe;class Hp{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?X0(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||E8}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Xo={extension:{type:xe.ShapeBuilder,name:"circle"},build(r,e){let t,s,o,a,u,c;if(r.type==="circle"){const P=r;if(u=c=P.radius,u<=0)return!1;t=P.x,s=P.y,o=a=0}else if(r.type==="ellipse"){const P=r;if(u=P.halfWidth,c=P.halfHeight,u<=0||c<=0)return!1;t=P.x,s=P.y,o=a=0}else{const P=r,N=P.width/2,D=P.height/2;t=P.x+N,s=P.y+D,u=c=Math.max(0,Math.min(P.radius,Math.min(N,D))),o=N-u,a=D-c}if(o<0||a<0)return!1;const d=Math.ceil(2.3*Math.sqrt(u+c)),f=d*8+(o?4:0)+(a?4:0);if(f===0)return!1;if(d===0)return e[0]=e[6]=t+o,e[1]=e[3]=s+a,e[2]=e[4]=t-o,e[5]=e[7]=s-a,!0;let m=0,y=d*4+(o?2:0)+2,x=y,v=f,b=o+u,S=a,_=t+b,T=t-b,M=s+S;if(e[m++]=_,e[m++]=M,e[--y]=M,e[--y]=T,a){const P=s-S;e[x++]=T,e[x++]=P,e[--v]=P,e[--v]=_}for(let P=1;P<d;P++){const N=Math.PI/2*(P/d),D=o+Math.cos(N)*u,F=a+Math.sin(N)*c,U=t+D,G=t-D,Y=s+F,q=s-F;e[m++]=U,e[m++]=Y,e[--y]=Y,e[--y]=G,e[x++]=G,e[x++]=q,e[--v]=q,e[--v]=U}b=o,S=a+c,_=t+b,T=t-b,M=s+S;const E=s-S;return e[m++]=_,e[m++]=M,e[--v]=E,e[--v]=_,o&&(e[m++]=T,e[m++]=M,e[--v]=E,e[--v]=T),!0},triangulate(r,e,t,s,o,a){if(r.length===0)return;let u=0,c=0;for(let m=0;m<r.length;m+=2)u+=r[m],c+=r[m+1];u/=r.length/2,c/=r.length/2;let d=s;e[d*t]=u,e[d*t+1]=c;const f=d++;for(let m=0;m<r.length;m+=2)e[d*t]=r[m],e[d*t+1]=r[m+1],m>0&&(o[a++]=d,o[a++]=f,o[a++]=d-1),d++;o[a++]=f+1,o[a++]=f,o[a++]=d-1}},R8={...Xo,extension:{...Xo.extension,name:"ellipse"}},I8={...Xo,extension:{...Xo.extension,name:"roundedRectangle"}},Gp=1e-4,e0=1e-4;function L8(r){const e=r.length;if(e<6)return 1;let t=0;for(let s=0,o=r[e-2],a=r[e-1];s<e;s+=2){const u=r[s],c=r[s+1];t+=(u-o)*(c+a),o=u,a=c}return t<0?-1:1}function t0(r,e,t,s,o,a,u,c){const d=r-t*o,f=e-s*o,m=r+t*a,y=e+s*a;let x,v;u?(x=s,v=-t):(x=-s,v=t);const b=d+x,S=f+v,_=m+x,T=y+v;return c.push(b,S),c.push(_,T),2}function Pi(r,e,t,s,o,a,u,c){const d=t-r,f=s-e;let m=Math.atan2(d,f),y=Math.atan2(o-r,a-e);c&&m<y?m+=Math.PI*2:!c&&m>y&&(y+=Math.PI*2);let x=m;const v=y-m,b=Math.abs(v),S=Math.sqrt(d*d+f*f),_=(15*b*Math.sqrt(S)/Math.PI>>0)+1,T=v/_;if(x+=T,c){u.push(r,e),u.push(t,s);for(let M=1,E=x;M<_;M++,E+=T)u.push(r,e),u.push(r+Math.sin(E)*S,e+Math.cos(E)*S);u.push(r,e),u.push(o,a)}else{u.push(t,s),u.push(r,e);for(let M=1,E=x;M<_;M++,E+=T)u.push(r+Math.sin(E)*S,e+Math.cos(E)*S),u.push(r,e);u.push(o,a),u.push(r,e)}return _*2}function z8(r,e,t,s,o,a){const u=Gp;if(r.length===0)return;const c=e;let d=c.alignment;if(e.alignment!==.5){let Q=L8(r);d=(d-.5)*Q+.5}const f=new Ht(r[0],r[1]),m=new Ht(r[r.length-2],r[r.length-1]),y=s,x=Math.abs(f.x-m.x)<u&&Math.abs(f.y-m.y)<u;if(y){r=r.slice(),x&&(r.pop(),r.pop(),m.set(r[r.length-2],r[r.length-1]));const Q=(f.x+m.x)*.5,ie=(m.y+f.y)*.5;r.unshift(Q,ie),r.push(Q,ie)}const v=o,b=r.length/2;let S=r.length;const _=v.length/2,T=c.width/2,M=T*T,E=c.miterLimit*c.miterLimit;let P=r[0],N=r[1],D=r[2],F=r[3],U=0,G=0,Y=-(N-F),q=P-D,me=0,te=0,we=Math.sqrt(Y*Y+q*q);Y/=we,q/=we,Y*=T,q*=T;const Ze=d,ee=(1-Ze)*2,ne=Ze*2;y||(c.cap==="round"?S+=Pi(P-Y*(ee-ne)*.5,N-q*(ee-ne)*.5,P-Y*ee,N-q*ee,P+Y*ne,N+q*ne,v,!0)+2:c.cap==="square"&&(S+=t0(P,N,Y,q,ee,ne,!0,v))),v.push(P-Y*ee,N-q*ee),v.push(P+Y*ne,N+q*ne);for(let Q=1;Q<b-1;++Q){P=r[(Q-1)*2],N=r[(Q-1)*2+1],D=r[Q*2],F=r[Q*2+1],U=r[(Q+1)*2],G=r[(Q+1)*2+1],Y=-(N-F),q=P-D,we=Math.sqrt(Y*Y+q*q),Y/=we,q/=we,Y*=T,q*=T,me=-(F-G),te=D-U,we=Math.sqrt(me*me+te*te),me/=we,te/=we,me*=T,te*=T;const ie=D-P,z=N-F,H=D-U,Se=G-F,Te=ie*H+z*Se,Pe=z*H-Se*ie,Re=Pe<0;if(Math.abs(Pe)<.001*Math.abs(Te)){v.push(D-Y*ee,F-q*ee),v.push(D+Y*ne,F+q*ne),Te>=0&&(c.join==="round"?S+=Pi(D,F,D-Y*ee,F-q*ee,D-me*ee,F-te*ee,v,!1)+4:S+=2,v.push(D-me*ne,F-te*ne),v.push(D+me*ee,F+te*ee));continue}const Ye=(-Y+P)*(-q+F)-(-Y+D)*(-q+N),We=(-me+U)*(-te+F)-(-me+D)*(-te+G),Xe=(ie*We-H*Ye)/Pe,xt=(Se*Ye-z*We)/Pe,Vn=(Xe-D)*(Xe-D)+(xt-F)*(xt-F),zt=D+(Xe-D)*ee,Qt=F+(xt-F)*ee,un=D-(Xe-D)*ne,Zt=F-(xt-F)*ne,Mr=Math.min(ie*ie+z*z,H*H+Se*Se),Er=Re?ee:ne,Rr=Mr+Er*Er*M;Vn<=Rr?c.join==="bevel"||Vn/M>E?(Re?(v.push(zt,Qt),v.push(D+Y*ne,F+q*ne),v.push(zt,Qt),v.push(D+me*ne,F+te*ne)):(v.push(D-Y*ee,F-q*ee),v.push(un,Zt),v.push(D-me*ee,F-te*ee),v.push(un,Zt)),S+=2):c.join==="round"?Re?(v.push(zt,Qt),v.push(D+Y*ne,F+q*ne),S+=Pi(D,F,D+Y*ne,F+q*ne,D+me*ne,F+te*ne,v,!0)+4,v.push(zt,Qt),v.push(D+me*ne,F+te*ne)):(v.push(D-Y*ee,F-q*ee),v.push(un,Zt),S+=Pi(D,F,D-Y*ee,F-q*ee,D-me*ee,F-te*ee,v,!1)+4,v.push(D-me*ee,F-te*ee),v.push(un,Zt)):(v.push(zt,Qt),v.push(un,Zt)):(v.push(D-Y*ee,F-q*ee),v.push(D+Y*ne,F+q*ne),c.join==="round"?Re?S+=Pi(D,F,D+Y*ne,F+q*ne,D+me*ne,F+te*ne,v,!0)+2:S+=Pi(D,F,D-Y*ee,F-q*ee,D-me*ee,F-te*ee,v,!1)+2:c.join==="miter"&&Vn/M<=E&&(Re?(v.push(un,Zt),v.push(un,Zt)):(v.push(zt,Qt),v.push(zt,Qt)),S+=2),v.push(D-me*ee,F-te*ee),v.push(D+me*ne,F+te*ne),S+=2)}P=r[(b-2)*2],N=r[(b-2)*2+1],D=r[(b-1)*2],F=r[(b-1)*2+1],Y=-(N-F),q=P-D,we=Math.sqrt(Y*Y+q*q),Y/=we,q/=we,Y*=T,q*=T,v.push(D-Y*ee,F-q*ee),v.push(D+Y*ne,F+q*ne),y||(c.cap==="round"?S+=Pi(D-Y*(ee-ne)*.5,F-q*(ee-ne)*.5,D-Y*ee,F-q*ee,D+Y*ne,F+q*ne,v,!1)+2:c.cap==="square"&&(S+=t0(D,F,Y,q,ee,ne,!1,v)));const re=e0*e0;for(let Q=_;Q<S+_-2;++Q)P=v[Q*2],N=v[Q*2+1],D=v[(Q+1)*2],F=v[(Q+1)*2+1],U=v[(Q+2)*2],G=v[(Q+2)*2+1],!(Math.abs(P*(F-G)+D*(G-N)+U*(N-F))<re)&&a.push(Q,Q+1,Q+2)}function F8(r,e,t,s){const o=Gp;if(r.length===0)return;const a=r[0],u=r[1],c=r[r.length-2],d=r[r.length-1],f=e||Math.abs(a-c)<o&&Math.abs(u-d)<o,m=t,y=r.length/2,x=m.length/2;for(let v=0;v<y;v++)m.push(r[v*2]),m.push(r[v*2+1]);for(let v=0;v<y-1;v++)s.push(x+v,x+v+1);f&&s.push(x+y-1,x)}function Vp(r,e,t,s,o,a,u){const c=wx(r,e,2);if(!c)return;for(let f=0;f<c.length;f+=3)a[u++]=c[f]+o,a[u++]=c[f+1]+o,a[u++]=c[f+2]+o;let d=o*s;for(let f=0;f<r.length;f+=2)t[d]=r[f],t[d+1]=r[f+1],d+=s}const j8=[],B8={extension:{type:xe.ShapeBuilder,name:"polygon"},build(r,e){for(let t=0;t<r.points.length;t++)e[t]=r.points[t];return!0},triangulate(r,e,t,s,o,a){Vp(r,j8,e,t,s,o,a)}},$8={extension:{type:xe.ShapeBuilder,name:"rectangle"},build(r,e){const t=r,s=t.x,o=t.y,a=t.width,u=t.height;return a>0&&u>0?(e[0]=s,e[1]=o,e[2]=s+a,e[3]=o,e[4]=s+a,e[5]=o+u,e[6]=s,e[7]=o+u,!0):!1},triangulate(r,e,t,s,o,a){let u=0;s*=t,e[s+u]=r[0],e[s+u+1]=r[1],u+=t,e[s+u]=r[2],e[s+u+1]=r[3],u+=t,e[s+u]=r[6],e[s+u+1]=r[7],u+=t,e[s+u]=r[4],e[s+u+1]=r[5],u+=t;const c=s/t;o[a++]=c,o[a++]=c+1,o[a++]=c+2,o[a++]=c+1,o[a++]=c+3,o[a++]=c+2}},D8={extension:{type:xe.ShapeBuilder,name:"triangle"},build(r,e){return e[0]=r.x,e[1]=r.y,e[2]=r.x2,e[3]=r.y2,e[4]=r.x3,e[5]=r.y3,!0},triangulate(r,e,t,s,o,a){let u=0;s*=t,e[s+u]=r[0],e[s+u+1]=r[1],u+=t,e[s+u]=r[2],e[s+u+1]=r[3],u+=t,e[s+u]=r[4],e[s+u+1]=r[5];const c=s/t;o[a++]=c,o[a++]=c+1,o[a++]=c+2}},O8=new Oe,N8=new lt;function W8(r,e,t,s){const o=e.matrix?r.copyFrom(e.matrix).invert():r.identity();if(e.textureSpace==="local"){const u=t.getBounds(N8);e.width&&u.pad(e.width);const{x:c,y:d}=u,f=1/u.width,m=1/u.height,y=-c*f,x=-d*m,v=o.a,b=o.b,S=o.c,_=o.d;o.a*=f,o.b*=f,o.c*=m,o.d*=m,o.tx=y*v+x*S+o.tx,o.ty=y*b+x*_+o.ty}else o.translate(e.texture.frame.x,e.texture.frame.y),o.scale(1/e.texture.source.width,1/e.texture.source.height);const a=e.texture.source.style;return!(e.fill instanceof Pr)&&a.addressMode==="clamp-to-edge"&&(a.addressMode="repeat",a.update()),s&&o.append(O8.copyFrom(s).invert()),o}const Nl={};$t.handleByMap(xe.ShapeBuilder,Nl);$t.add($8,B8,D8,Xo,R8,I8);const U8=new lt,H8=new Oe;function G8(r,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let o=0;o<r.instructions.length;o++){const a=r.instructions[o];if(a.action==="texture")V8(a.data,s,t);else if(a.action==="fill"||a.action==="stroke"){const u=a.action==="stroke",c=a.data.path.shapePath,d=a.data.style,f=a.data.hole;u&&f&&n0(f.shapePath,d,!0,s,t),f&&(c.shapePrimitives[c.shapePrimitives.length-1].holes=f.shapePath.shapePrimitives),n0(c,d,u,s,t)}}}function V8(r,e,t){const s=[],o=Nl.rectangle,a=U8;a.x=r.dx,a.y=r.dy,a.width=r.dw,a.height=r.dh;const u=r.transform;if(!o.build(a,s))return;const{vertices:c,uvs:d,indices:f}=t,m=f.length,y=c.length/2;u&&Up(s,u),o.triangulate(s,c,2,y,f,m);const x=r.image,v=x.uvs;d.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const b=Rn.get(Hp);b.indexOffset=m,b.indexSize=f.length-m,b.attributeOffset=y,b.attributeSize=c.length/2-y,b.baseColor=r.style,b.alpha=r.alpha,b.texture=x,b.geometryData=t,e.push(b)}function n0(r,e,t,s,o){const{vertices:a,uvs:u,indices:c}=o;r.shapePrimitives.forEach(({shape:d,transform:f,holes:m})=>{const y=[],x=Nl[d.type];if(!x.build(d,y))return;const v=c.length,b=a.length/2;let S="triangle-list";if(f&&Up(y,f),t){const E=d.closePath??!0,P=e;P.pixelLine?(F8(y,E,a,c),S="line-list"):z8(y,P,!1,E,a,c)}else if(m){const E=[],P=y.slice();Y8(m).forEach(D=>{E.push(P.length/2),P.push(...D)}),Vp(P,E,a,2,b,c,v)}else x.triangulate(y,a,2,b,c,v);const _=u.length/2,T=e.texture;if(T!==Ue.WHITE){const E=W8(H8,e,d,f);P8(a,2,b,u,_,2,a.length/2-b,E)}else M8(u,_,2,a.length/2-b);const M=Rn.get(Hp);M.indexOffset=v,M.indexSize=c.length-v,M.attributeOffset=b,M.attributeSize=a.length/2-b,M.baseColor=e.color,M.alpha=e.alpha,M.texture=T,M.geometryData=o,M.topology=S,s.push(M)})}function Y8(r){const e=[];for(let t=0;t<r.length;t++){const s=r[t].shape,o=[];Nl[s.type].build(s,o)&&e.push(o)}return e}class X8{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class q8{constructor(){this.instructions=new Z0}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new T8({maxTextures:t}),this.instructions.reset()}get geometry(){return Fe(V3,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Fh=class yh{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){yh.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??yh.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),G8(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=Rn.get(q8,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[e.uid],a=o.vertices.length,u=o.indices.length;for(let m=0;m<s.length;m++)s[m].applyTransform=!1;const c=t.batcher;c.ensureAttributeBuffer(a),c.ensureIndexBuffer(u),c.begin();for(let m=0;m<s.length;m++){const y=s[m];c.add(y)}c.finish(t.instructions);const d=c.geometry;d.indexBuffer.setDataWithSize(c.indexBuffer,c.indexSize,!0),d.buffers[0].setDataWithSize(c.attributeBuffer.float32View,c.attributeSize,!0);const f=c.batches;for(let m=0;m<f.length;m++){const y=f[m];y.bindGroup=$x(y.textures.textures,y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new X8;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(Rn.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{Rn.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};Fh.extension={type:[xe.WebGLSystem,xe.WebGPUSystem,xe.CanvasSystem],name:"graphicsContext"};Fh.defaultOptions={bezierSmoothness:.5};let Yp=Fh;const K8=8,Sl=11920929e-14,Q8=1;function Xp(r,e,t,s,o,a,u,c,d,f){const y=Math.min(.99,Math.max(0,f??Yp.defaultOptions.bezierSmoothness));let x=(Q8-y)/1;return x*=x,Z8(e,t,s,o,a,u,c,d,r,x),r}function Z8(r,e,t,s,o,a,u,c,d,f){xh(r,e,t,s,o,a,u,c,d,f,0),d.push(u,c)}function xh(r,e,t,s,o,a,u,c,d,f,m){if(m>K8)return;const y=(r+t)/2,x=(e+s)/2,v=(t+o)/2,b=(s+a)/2,S=(o+u)/2,_=(a+c)/2,T=(y+v)/2,M=(x+b)/2,E=(v+S)/2,P=(b+_)/2,N=(T+E)/2,D=(M+P)/2;if(m>0){let F=u-r,U=c-e;const G=Math.abs((t-u)*U-(s-c)*F),Y=Math.abs((o-u)*U-(a-c)*F);if(G>Sl&&Y>Sl){if((G+Y)*(G+Y)<=f*(F*F+U*U)){d.push(N,D);return}}else if(G>Sl){if(G*G<=f*(F*F+U*U)){d.push(N,D);return}}else if(Y>Sl){if(Y*Y<=f*(F*F+U*U)){d.push(N,D);return}}else if(F=N-(r+u)/2,U=D-(e+c)/2,F*F+U*U<=f){d.push(N,D);return}}xh(r,e,y,x,T,M,N,D,d,f,m+1),xh(N,D,E,P,S,_,u,c,d,f,m+1)}const J8=8,e4=11920929e-14,t4=1;function n4(r,e,t,s,o,a,u,c){const f=Math.min(.99,Math.max(0,c??Yp.defaultOptions.bezierSmoothness));let m=(t4-f)/1;return m*=m,r4(e,t,s,o,a,u,r,m),r}function r4(r,e,t,s,o,a,u,c){vh(u,r,e,t,s,o,a,c,0),u.push(o,a)}function vh(r,e,t,s,o,a,u,c,d){if(d>J8)return;const f=(e+s)/2,m=(t+o)/2,y=(s+a)/2,x=(o+u)/2,v=(f+y)/2,b=(m+x)/2;let S=a-e,_=u-t;const T=Math.abs((s-a)*_-(o-u)*S);if(T>e4){if(T*T<=c*(S*S+_*_)){r.push(v,b);return}}else if(S=v-(e+a)/2,_=b-(t+u)/2,S*S+_*_<=c){r.push(v,b);return}vh(r,e,t,f,m,v,b,c,d+1),vh(r,v,b,y,x,a,u,c,d+1)}function qp(r,e,t,s,o,a,u,c){let d=Math.abs(o-a);(!u&&o>a||u&&a>o)&&(d=2*Math.PI-d),c||(c=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),c=Math.max(c,3);let f=d/c,m=o;f*=u?-1:1;for(let y=0;y<c+1;y++){const x=Math.cos(m),v=Math.sin(m),b=e+x*s,S=t+v*s;r.push(b,S),m+=f}}function i4(r,e,t,s,o,a){const u=r[r.length-2],d=r[r.length-1]-t,f=u-e,m=o-t,y=s-e,x=Math.abs(d*y-f*m);if(x<1e-8||a===0){(r[r.length-2]!==e||r[r.length-1]!==t)&&r.push(e,t);return}const v=d*d+f*f,b=m*m+y*y,S=d*m+f*y,_=a*Math.sqrt(v)/x,T=a*Math.sqrt(b)/x,M=_*S/v,E=T*S/b,P=_*y+T*f,N=_*m+T*d,D=f*(T+M),F=d*(T+M),U=y*(_+E),G=m*(_+E),Y=Math.atan2(F-N,D-P),q=Math.atan2(G-N,U-P);qp(r,P+e,N+t,a,Y,q,f*m>y*d)}const Wo=Math.PI*2,Xc={centerX:0,centerY:0,ang1:0,ang2:0},qc=({x:r,y:e},t,s,o,a,u,c,d)=>{r*=t,e*=s;const f=o*r-a*e,m=a*r+o*e;return d.x=f+u,d.y=m+c,d};function s4(r,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,o=Math.cos(r),a=Math.sin(r),u=Math.cos(r+e),c=Math.sin(r+e);return[{x:o-a*s,y:a+o*s},{x:u+c*s,y:c-u*s},{x:u,y:c}]}const r0=(r,e,t,s)=>{const o=r*s-e*t<0?-1:1;let a=r*t+e*s;return a>1&&(a=1),a<-1&&(a=-1),o*Math.acos(a)},o4=(r,e,t,s,o,a,u,c,d,f,m,y,x)=>{const v=Math.pow(o,2),b=Math.pow(a,2),S=Math.pow(m,2),_=Math.pow(y,2);let T=v*b-v*_-b*S;T<0&&(T=0),T/=v*_+b*S,T=Math.sqrt(T)*(u===c?-1:1);const M=T*o/a*y,E=T*-a/o*m,P=f*M-d*E+(r+t)/2,N=d*M+f*E+(e+s)/2,D=(m-M)/o,F=(y-E)/a,U=(-m-M)/o,G=(-y-E)/a,Y=r0(1,0,D,F);let q=r0(D,F,U,G);c===0&&q>0&&(q-=Wo),c===1&&q<0&&(q+=Wo),x.centerX=P,x.centerY=N,x.ang1=Y,x.ang2=q};function a4(r,e,t,s,o,a,u,c=0,d=0,f=0){if(a===0||u===0)return;const m=Math.sin(c*Wo/360),y=Math.cos(c*Wo/360),x=y*(e-s)/2+m*(t-o)/2,v=-m*(e-s)/2+y*(t-o)/2;if(x===0&&v===0)return;a=Math.abs(a),u=Math.abs(u);const b=Math.pow(x,2)/Math.pow(a,2)+Math.pow(v,2)/Math.pow(u,2);b>1&&(a*=Math.sqrt(b),u*=Math.sqrt(b)),o4(e,t,s,o,a,u,d,f,m,y,x,v,Xc);let{ang1:S,ang2:_}=Xc;const{centerX:T,centerY:M}=Xc;let E=Math.abs(_)/(Wo/4);Math.abs(1-E)<1e-7&&(E=1);const P=Math.max(Math.ceil(E),1);_/=P;let N=r[r.length-2],D=r[r.length-1];const F={x:0,y:0};for(let U=0;U<P;U++){const G=s4(S,_),{x:Y,y:q}=qc(G[0],a,u,y,m,T,M,F),{x:me,y:te}=qc(G[1],a,u,y,m,T,M,F),{x:we,y:Ze}=qc(G[2],a,u,y,m,T,M,F);Xp(r,N,D,Y,q,me,te,we,Ze),N=we,D=Ze,S+=_}}function l4(r,e,t){const s=(u,c)=>{const d=c.x-u.x,f=c.y-u.y,m=Math.sqrt(d*d+f*f),y=d/m,x=f/m;return{len:m,nx:y,ny:x}},o=(u,c)=>{u===0?r.moveTo(c.x,c.y):r.lineTo(c.x,c.y)};let a=e[e.length-1];for(let u=0;u<e.length;u++){const c=e[u%e.length],d=c.radius??t;if(d<=0){o(u,c),a=c;continue}const f=e[(u+1)%e.length],m=s(c,a),y=s(c,f);if(m.len<1e-4||y.len<1e-4){o(u,c),a=c;continue}let x=Math.asin(m.nx*y.ny-m.ny*y.nx),v=1,b=!1;m.nx*y.nx-m.ny*-y.ny<0?x<0?x=Math.PI+x:(x=Math.PI-x,v=-1,b=!0):x>0&&(v=-1,b=!0);const S=x/2;let _,T=Math.abs(Math.cos(S)*d/Math.sin(S));T>Math.min(m.len/2,y.len/2)?(T=Math.min(m.len/2,y.len/2),_=Math.abs(T*Math.sin(S)/Math.cos(S))):_=d;const M=c.x+y.nx*T+-y.ny*_*v,E=c.y+y.ny*T+y.nx*_*v,P=Math.atan2(m.ny,m.nx)+Math.PI/2*v,N=Math.atan2(y.ny,y.nx)-Math.PI/2*v;u===0&&r.moveTo(M+Math.cos(P)*_,E+Math.sin(P)*_),r.arc(M,E,_,P,N,b),a=c}}function u4(r,e,t,s){const o=(c,d)=>Math.sqrt((c.x-d.x)**2+(c.y-d.y)**2),a=(c,d,f)=>({x:c.x+(d.x-c.x)*f,y:c.y+(d.y-c.y)*f}),u=e.length;for(let c=0;c<u;c++){const d=e[(c+1)%u],f=d.radius??t;if(f<=0){c===0?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y);continue}const m=e[c],y=e[(c+2)%u],x=o(m,d);let v;if(x<1e-4)v=d;else{const _=Math.min(x/2,f);v=a(d,m,_/x)}const b=o(y,d);let S;if(b<1e-4)S=d;else{const _=Math.min(b/2,f);S=a(d,y,_/b)}c===0?r.moveTo(v.x,v.y):r.lineTo(v.x,v.y),r.quadraticCurveTo(d.x,d.y,S.x,S.y,s)}}const c4=new lt;class h4{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Wn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],a=s[s.length-1];return(o!==e||a!==t)&&s.push(e,t),this}arc(e,t,s,o,a,u){this._ensurePoly(!1);const c=this._currentPoly.points;return qp(c,e,t,s,o,a,u),this}arcTo(e,t,s,o,a){this._ensurePoly();const u=this._currentPoly.points;return i4(u,e,t,s,o,a),this}arcToSvg(e,t,s,o,a,u,c){const d=this._currentPoly.points;return a4(d,this._currentPoly.lastX,this._currentPoly.lastY,u,c,e,t,s,o,a),this}bezierCurveTo(e,t,s,o,a,u,c){this._ensurePoly();const d=this._currentPoly;return Xp(this._currentPoly.points,d.lastX,d.lastY,e,t,s,o,a,u,c),this}quadraticCurveTo(e,t,s,o,a){this._ensurePoly();const u=this._currentPoly;return n4(this._currentPoly.points,u.lastX,u.lastY,e,t,s,o,a),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,o=s.length;for(let a=0;a<e.instructions.length;a++){const u=e.instructions[a];this[u.action](...u.data)}if(e.checkForHoles&&s.length-o>1){let a=null;for(let u=o;u<s.length;u++){const c=s[u];if(c.shape.type==="polygon"){const d=c.shape,f=a==null?void 0:a.shape;f&&f.containsPolygon(d)?(a.holes||(a.holes=[]),a.holes.push(c),s.copyWithin(u,u+1),s.length--,u--):a=c}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,o,a){return this.drawShape(new lt(e,t,s,o),a),this}circle(e,t,s,o){return this.drawShape(new Ih(e,t,s),o),this}poly(e,t,s){const o=new Oo(e);return o.closePath=t,this.drawShape(o,s),this}regularPoly(e,t,s,o,a=0,u){o=Math.max(o|0,3);const c=-1*Math.PI/2+a,d=Math.PI*2/o,f=[];for(let m=0;m<o;m++){const y=c-m*d;f.push(e+s*Math.cos(y),t+s*Math.sin(y))}return this.poly(f,!0,u),this}roundPoly(e,t,s,o,a,u=0,c){if(o=Math.max(o|0,3),a<=0)return this.regularPoly(e,t,s,o,u);const d=s*Math.sin(Math.PI/o)-.001;a=Math.min(a,d);const f=-1*Math.PI/2+u,m=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let x=0;x<o;x++){const v=x*m+f,b=e+s*Math.cos(v),S=t+s*Math.sin(v),_=v+Math.PI+y,T=v-Math.PI-y,M=b+a*Math.cos(_),E=S+a*Math.sin(_),P=b+a*Math.cos(T),N=S+a*Math.sin(T);x===0?this.moveTo(M,E):this.lineTo(M,E),this.quadraticCurveTo(b,S,P,N,c)}return this.closePath()}roundShape(e,t,s=!1,o){return e.length<3?this:(s?u4(this,e,t,o):l4(this,e,t),this.closePath())}filletRect(e,t,s,o,a){if(a===0)return this.rect(e,t,s,o);const u=Math.min(s,o)/2,c=Math.min(u,Math.max(-u,a)),d=e+s,f=t+o,m=c<0?-c:0,y=Math.abs(c);return this.moveTo(e,t+y).arcTo(e+m,t+m,e+y,t,y).lineTo(d-y,t).arcTo(d-m,t+m,d,t+y,y).lineTo(d,f-y).arcTo(d-m,f-m,e+s-y,f,y).lineTo(e+y,f).arcTo(e+m,f-m,e,f-y,y).closePath()}chamferRect(e,t,s,o,a,u){if(a<=0)return this.rect(e,t,s,o);const c=Math.min(a,Math.min(s,o)/2),d=e+s,f=t+o,m=[e+c,t,d-c,t,d,t+c,d,f-c,d-c,f,e+c,f,e,f-c,e,t+c];for(let y=m.length-1;y>=2;y-=2)m[y]===m[y-2]&&m[y-1]===m[y-3]&&m.splice(y-1,2);return this.poly(m,!0,u)}ellipse(e,t,s,o,a){return this.drawShape(new Lh(e,t,s,o),a),this}roundRect(e,t,s,o,a,u){return this.drawShape(new zh(e,t,s,o,a),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new Oo,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Oo,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,o=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const a=t.transform,u=s;s=a.a*s+a.c*o+a.tx,o=a.b*u+a.d*o+a.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const o=t[s],a=o.shape.getBounds(c4);o.transform?e.addRect(a,o.transform):e.addRect(a)}return e}}class Ar{constructor(e,t=!1){this.instructions=[],this.uid=yt("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?zx(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new h4(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,o,a){const u=this.instructions[this.instructions.length-1],c=this.getLastPoint(Ht.shared);let d=0,f=0;if(!u||u.action!=="bezierCurveTo")d=c.x,f=c.y;else{d=u.data[2],f=u.data[3];const m=c.x,y=c.y;d=m+(m-d),f=y+(y-f)}return this.instructions.push({action:"bezierCurveTo",data:[d,f,e,t,s,o,a]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(Ht.shared);let u=0,c=0;if(!o||o.action!=="quadraticCurveTo")u=a.x,c=a.y;else{u=o.data[0],c=o.data[1];const d=a.x,f=a.y;u=d+(d-u),c=f+(f-c)}return this.instructions.push({action:"quadraticCurveTo",data:[u,c,e,t,s]}),this._dirty=!0,this}rect(e,t,s,o,a){return this.instructions.push({action:"rect",data:[e,t,s,o,a]}),this._dirty=!0,this}circle(e,t,s,o){return this.instructions.push({action:"circle",data:[e,t,s,o]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,o,a,u,c){a||(a=o/2);const d=-1*Math.PI/2+u,f=s*2,m=Math.PI*2/f,y=[];for(let x=0;x<f;x++){const v=x%2?a:o,b=x*m+d;y.push(e+v*Math.cos(b),t+v*Math.sin(b))}return this.poly(y,!0,c),this}clone(e=!1){const t=new Ar;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];t.instructions.push({action:o.action,data:o.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,o=e.c,a=e.d,u=e.tx,c=e.ty;let d=0,f=0,m=0,y=0,x=0,v=0,b=0,S=0;for(let _=0;_<this.instructions.length;_++){const T=this.instructions[_],M=T.data;switch(T.action){case"moveTo":case"lineTo":d=M[0],f=M[1],M[0]=t*d+o*f+u,M[1]=s*d+a*f+c;break;case"bezierCurveTo":m=M[0],y=M[1],x=M[2],v=M[3],d=M[4],f=M[5],M[0]=t*m+o*y+u,M[1]=s*m+a*y+c,M[2]=t*x+o*v+u,M[3]=s*x+a*v+c,M[4]=t*d+o*f+u,M[5]=s*d+a*f+c;break;case"quadraticCurveTo":m=M[0],y=M[1],d=M[2],f=M[3],M[0]=t*m+o*y+u,M[1]=s*m+a*y+c,M[2]=t*d+o*f+u,M[3]=s*d+a*f+c;break;case"arcToSvg":d=M[5],f=M[6],b=M[0],S=M[1],M[0]=t*b+o*S,M[1]=s*b+a*S,M[5]=t*d+o*f+u,M[6]=s*d+a*f+c;break;case"circle":M[4]=Io(M[3],e);break;case"rect":M[4]=Io(M[4],e);break;case"ellipse":M[8]=Io(M[8],e);break;case"roundRect":M[5]=Io(M[5],e);break;case"addPath":M[0].transform(e);break;case"poly":M[2]=Io(M[2],e);break;default:ot("unknown transform action",T.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function Io(r,e){return r?r.prepend(e):e.clone()}function gt(r,e,t){const s=r.getAttribute(e);return s?Number(s):t}function d4(r,e){const t=r.querySelectorAll("defs");for(let s=0;s<t.length;s++){const o=t[s];for(let a=0;a<o.children.length;a++){const u=o.children[a];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=f4(u);break;case"radialgradient":e.defs[u.id]=p4();break}}}}function f4(r){const e=gt(r,"x1",0),t=gt(r,"y1",0),s=gt(r,"x2",1),o=gt(r,"y2",0),a=r.getAttribute("gradientUnits")||"objectBoundingBox",u=new Pr(e,t,s,o,a==="objectBoundingBox"?"local":"global");for(let c=0;c<r.children.length;c++){const d=r.children[c],f=gt(d,"offset",0),m=kt.shared.setValue(d.getAttribute("stop-color")).toNumber();u.addColorStop(f,m)}return u}function p4(r){return ot("[SVG Parser] Radial gradients are not yet supported"),new Pr(0,0,1,0)}function i0(r){const e=r.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const s0={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Kp(r,e){const t=r.getAttribute("style"),s={},o={},a={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in s0){const c=r.getAttribute(u);c&&o0(e,a,u,c.trim())}if(t){const u=t.split(";");for(let c=0;c<u.length;c++){const d=u[c].trim(),[f,m]=d.split(":");s0[f]&&o0(e,a,f,m.trim())}}return{strokeStyle:a.useStroke?s:null,fillStyle:a.useFill?o:null,useFill:a.useFill,useStroke:a.useStroke}}function o0(r,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=i0(s);e.strokeStyle.fill=r.defs[o]}else e.strokeStyle.color=kt.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=i0(s);e.fillStyle.fill=r.defs[o]}else e.fillStyle.color=kt.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function m4(r){if(r.length<=2)return!0;const e=r.map(c=>c.area).sort((c,d)=>d-c),[t,s]=e,o=e[e.length-1],a=t/s,u=s/o;return!(a>3&&u<2)}function g4(r){return r.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function y4(r){const e=r.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],o=[];for(let m=0;m<t.length;m+=2)m+1<t.length&&(s.push(t[m]),o.push(t[m+1]));if(s.length===0||o.length===0)return 0;const a=Math.min(...s),u=Math.max(...s),c=Math.min(...o),d=Math.max(...o);return(u-a)*(d-c)}function a0(r,e){const t=new Ar(r,!1);for(const s of t.instructions)e.instructions.push(s)}function x4(r,e){if(typeof r=="string"){const u=document.createElement("div");u.innerHTML=r.trim(),r=u.querySelector("svg")}const t={context:e,defs:{},path:new Ar};d4(r,t);const s=r.children,{fillStyle:o,strokeStyle:a}=Kp(r,t);for(let u=0;u<s.length;u++){const c=s[u];c.nodeName.toLowerCase()!=="defs"&&Qp(c,t,o,a)}return e}function Qp(r,e,t,s){const o=r.children,{fillStyle:a,strokeStyle:u}=Kp(r,e);a&&t?t={...t,...a}:a&&(t=a),u&&s?s={...s,...u}:u&&(s=u);const c=!t&&!s;c&&(t={color:0});let d,f,m,y,x,v,b,S,_,T,M,E,P,N,D,F,U;switch(r.nodeName.toLowerCase()){case"path":{N=r.getAttribute("d");const G=r.getAttribute("fill-rule"),Y=g4(N),q=G==="evenodd",me=Y.length>1;if(q&&me){const we=Y.map(ee=>({path:ee,area:y4(ee)}));if(we.sort((ee,ne)=>ne.area-ee.area),Y.length>3||!m4(we))for(let ee=0;ee<we.length;ee++){const ne=we[ee],re=ee===0;e.context.beginPath();const Q=new Ar(void 0,!0);a0(ne.path,Q),e.context.path(Q),re?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let ee=0;ee<we.length;ee++){const ne=we[ee],re=ee%2===1;e.context.beginPath();const Q=new Ar(void 0,!0);a0(ne.path,Q),e.context.path(Q),re?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const we=G?G==="evenodd":!0;D=new Ar(N,we),e.context.path(D),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":b=gt(r,"cx",0),S=gt(r,"cy",0),_=gt(r,"r",0),e.context.ellipse(b,S,_,_),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":d=gt(r,"x",0),f=gt(r,"y",0),F=gt(r,"width",0),U=gt(r,"height",0),T=gt(r,"rx",0),M=gt(r,"ry",0),T||M?e.context.roundRect(d,f,F,U,T||M):e.context.rect(d,f,F,U),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":b=gt(r,"cx",0),S=gt(r,"cy",0),T=gt(r,"rx",0),M=gt(r,"ry",0),e.context.beginPath(),e.context.ellipse(b,S,T,M),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":m=gt(r,"x1",0),y=gt(r,"y1",0),x=gt(r,"x2",0),v=gt(r,"y2",0),e.context.beginPath(),e.context.moveTo(m,y),e.context.lineTo(x,v),s&&e.context.stroke(s);break;case"polygon":P=r.getAttribute("points"),E=P.match(/\d+/g).map(G=>parseInt(G,10)),e.context.poly(E,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":P=r.getAttribute("points"),E=P.match(/\d+/g).map(G=>parseInt(G,10)),e.context.poly(E,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{ot(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}c&&(t=null);for(let G=0;G<o.length;G++)Qp(o[G],e,t,s)}function v4(r){return kt.isColorLike(r)}function l0(r){return r instanceof Ol}function u0(r){return r instanceof Pr}function _4(r){return r instanceof Ue}function w4(r,e,t){const s=kt.shared.setValue(e??0);return r.color=s.toNumber(),r.alpha=s.alpha===1?t.alpha:s.alpha,r.texture=Ue.WHITE,{...t,...r}}function b4(r,e,t){return r.texture=e,{...t,...r}}function c0(r,e,t){return r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,{...t,...r}}function h0(r,e,t){return e.buildGradient(),r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,r.textureSpace=e.textureSpace,{...t,...r}}function S4(r,e){const t={...e,...r},s=kt.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function zi(r,e){if(r==null)return null;const t={},s=r;return v4(r)?w4(t,r,e):_4(r)?b4(t,r,e):l0(r)?c0(t,r,e):u0(r)?h0(t,r,e):s.fill&&l0(s.fill)?c0(s,s.fill,e):s.fill&&u0(s.fill)?h0(s,s.fill,e):S4(s,e)}function jl(r,e){const{width:t,alignment:s,miterLimit:o,cap:a,join:u,pixelLine:c,...d}=e,f=zi(r,d);return f?{width:t,alignment:s,miterLimit:o,cap:a,join:u,pixelLine:c,...f}:null}const k4=new Ht,d0=new Oe,jh=class sr extends Un{constructor(){super(...arguments),this.uid=yt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Ar,this._transform=new Oe,this._fillStyle={...sr.defaultFillStyle},this._strokeStyle={...sr.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Wn,this._boundsDirty=!0}clone(){const e=new sr;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=zi(e,sr.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=jl(e,sr.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=zi(e,sr.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=zi(e,sr.defaultStrokeStyle),this}texture(e,t,s,o,a,u){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:o||0,dw:a||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?kt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Ar,this}fill(e,t){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&(o==null?void 0:o.action)==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(Fe(Ke,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=zi(e,sr.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Ht.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&(s==null?void 0:s.action)==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=jl(e,sr.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,o,a,u){this._tick++;const c=this._transform;return this._activePath.arc(c.a*e+c.c*t+c.tx,c.b*e+c.d*t+c.ty,s,o,a,u),this}arcTo(e,t,s,o,a){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,a),this}arcToSvg(e,t,s,o,a,u,c){this._tick++;const d=this._transform;return this._activePath.arcToSvg(e,t,s,o,a,d.a*u+d.c*c+d.tx,d.b*u+d.d*c+d.ty),this}bezierCurveTo(e,t,s,o,a,u,c){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*e+d.c*t+d.tx,d.b*e+d.d*t+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*a+d.c*u+d.tx,d.b*a+d.d*u+d.ty,c),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,s,o){return this._tick++,this._activePath.ellipse(e,t,s,o,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,o=this._activePath.instructions,a=s.a*e+s.c*t+s.tx,u=s.b*e+s.d*t+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=a,o[0].data[1]=u,this):(this._activePath.moveTo(a,u),this)}quadraticCurveTo(e,t,s,o,a){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,a),this}rect(e,t,s,o){return this._tick++,this._activePath.rect(e,t,s,o,this._transform.clone()),this}roundRect(e,t,s,o,a){return this._tick++,this._activePath.roundRect(e,t,s,o,a,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,o,a=0,u){return this._tick++,this._activePath.regularPoly(e,t,s,o,a,u),this}roundPoly(e,t,s,o,a,u){return this._tick++,this._activePath.roundPoly(e,t,s,o,a,u),this}roundShape(e,t,s,o){return this._tick++,this._activePath.roundShape(e,t,s,o),this}filletRect(e,t,s,o,a){return this._tick++,this._activePath.filletRect(e,t,s,o,a),this}chamferRect(e,t,s,o,a,u){return this._tick++,this._activePath.chamferRect(e,t,s,o,a,u),this}star(e,t,s,o,a=0,u=0){return this._tick++,this._activePath.star(e,t,s,o,a,u,this._transform.clone()),this}svg(e){return this._tick++,x4(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,o,a,u){return e instanceof Oe?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,o,a,u),this)}transform(e,t,s,o,a,u){return e instanceof Oe?(this._transform.append(e),this):(d0.set(e,t,s,o,a,u),this._transform.append(d0),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],o=s.action;if(o==="fill"){const a=s.data;e.addBounds(a.path.bounds)}else if(o==="texture"){const a=s.data;e.addFrame(a.dx,a.dy,a.dx+a.dw,a.dy+a.dh,a.transform)}if(o==="stroke"){const a=s.data,u=a.style.alignment,c=a.style.width*(1-u),d=a.path.bounds;e.addFrame(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c)}}return e}containsPoint(e){var o;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let a=0;a<t.length;a++){const u=t[a],c=u.data,d=c.path;if(!u.action||!d)continue;const f=c.style,m=d.shapePath.shapePrimitives;for(let y=0;y<m.length;y++){const x=m[y].shape;if(!f||!x)continue;const v=m[y].transform,b=v?v.applyInverse(e,k4):e;if(u.action==="fill")s=x.contains(b.x,b.y);else{const _=f;s=x.strokeContains(b.x,b.y,_.width,_.alignment)}const S=c.hole;if(S){const _=(o=S.shapePath)==null?void 0:o.shapePrimitives;if(_)for(let T=0;T<_.length;T++)_[T].shape.contains(b.x,b.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};jh.defaultFillStyle={color:16777215,alpha:1,texture:Ue.WHITE,matrix:null,fill:null,textureSpace:"local"};jh.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Ue.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Mn=jh;const Bh=class ks extends Un{constructor(e={}){super(),this.uid=yt("textStyle"),this._tick=0,C4(e);const t={...ks.defaultTextStyle,...e};for(const s in t){const o=s;this[o]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...ks.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...ks.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Mn.defaultFillStyle,...e},()=>{this._fill=zi({...this._originalFill},Mn.defaultFillStyle)})),this._fill=zi(e===0?"black":e,Mn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Mn.defaultStrokeStyle,...e},()=>{this._stroke=jl({...this._originalStroke},Mn.defaultStrokeStyle)})),this._stroke=jl(e,Mn.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=ks.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new ks({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){var s,o,a,u;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const c=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(c),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(c),(a=this._stroke)!=null&&a.texture&&this._stroke.texture.destroy(c),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(c)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,o,a)=>(s[o]===a||(s[o]=a,t==null||t(o,a),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(kt.isColorLike(e)||e instanceof Pr||e instanceof Ol)}};Bh.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Bh.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let qo=Bh;function C4(r){const e=r;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=qo.defaultDropShadow;r.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Fe(Ke,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(kt.isColorLike(t))s.color=t;else if(t instanceof Pr||t instanceof Ol)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");r.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Fe(Ke,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&ot("The number of fill colors must match the number of fill gradient stops.");const t=new Pr({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),o=e.fill.map(a=>kt.shared.setValue(a).toNumber());s.forEach((a,u)=>{t.addColorStop(a,o[u])}),r.fill={fill:t}}}class A4{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=et.get().createCanvas();s.width=e,s.height=t;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=Ms(e),t=Ms(t);const o=(e<<17)+(t<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let a=this._canvasPool[o].pop();return a||(a=this._createCanvasAndContext(e,t)),a}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:o}=t,a=(s<<17)+(o<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,o),this._canvasPool[a].push(e)}clear(){this._canvasPool={}}}const Ko=new A4;Qo.register(Ko);const f0=1e5;function Bl(r,e,t,s=0){if(r.texture===Ue.WHITE&&!r.fill)return kt.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof Ol){const o=r.fill,a=e.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(Oe.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),a.setTransform(u),a}else if(r.fill instanceof Pr){const o=r.fill,a=o.type==="linear",u=o.textureSpace==="local";let c=1,d=1;u&&t&&(c=t.width+s,d=t.height+s);let f,m=!1;if(a){const{start:y,end:x}=o;f=e.createLinearGradient(y.x*c,y.y*d,x.x*c,x.y*d),m=Math.abs(x.x-y.x)<Math.abs((x.y-y.y)*.1)}else{const{center:y,innerRadius:x,outerCenter:v,outerRadius:b}=o;f=e.createRadialGradient(y.x*c,y.y*d,x*c,v.x*c,v.y*d,b*c)}if(m&&u&&t){const y=t.lineHeight/d;for(let x=0;x<t.lines.length;x++){const v=(x*t.lineHeight+s/2)/d;o.colorStops.forEach(b=>{const S=v+b.offset*y;f.addColorStop(Math.floor(S*f0)/f0,kt.shared.setValue(b.color).toHex())})}}else o.colorStops.forEach(y=>{f.addColorStop(y.offset,kt.shared.setValue(y.color).toHex())});return f}}else{const o=e.createPattern(r.texture.source.resource,"repeat"),a=r.matrix.copyTo(Oe.shared);return a.scale(r.texture.frame.width,r.texture.frame.height),o.setTransform(a),o}return ot("FillStyle not recognised",r),"red"}const Zp=class Jp extends Lp{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...Jp.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Ue.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const a=zl(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof Es?t.textureStyle:new Es(t.textureStyle)),this.fontMetrics=or.measureFont(a),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){var _,T;const t=or.graphemeSegmenter(e).filter(M=>!this._currentChars.includes(M)).filter((M,E,P)=>P.indexOf(M)===E);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:a}=s.canvasAndContext,u=s.texture.source;const c=this._style;let d=this._currentX,f=this._currentY,m=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,x=this._padding*y;let v=!1;const b=o.width/this.resolution,S=o.height/this.resolution;for(let M=0;M<t.length;M++){const E=t[M],P=or.measureText(E,c,o,!1);P.lineHeight=P.height;const N=P.width*y,D=Math.ceil((c.fontStyle==="italic"?2:1)*N),F=P.height*y,U=D+x*2,G=F+x*2;if(v=!1,E!==`
`&&E!=="\r"&&E!=="	"&&E!==" "&&(v=!0,m=Math.ceil(Math.max(G,m))),d+U>b&&(f+=m,m=G,d=0,f+m>S)){u.update();const q=this._nextPage();o=q.canvasAndContext.canvas,a=q.canvasAndContext.context,u=q.texture.source,d=0,f=0,m=0}const Y=N/y-(((_=c.dropShadow)==null?void 0:_.distance)??0)-(((T=c._stroke)==null?void 0:T.width)??0);if(this.chars[E]={id:E.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:Y,kerning:{}},v){this._drawGlyph(a,P,d+x,f+x,y,c);const q=u.width*y,me=u.height*y,te=new lt(d/q*u.width,f/me*u.height,U/q*u.width,G/me*u.height);this.chars[E].texture=new Ue({source:u,frame:te}),d+=Math.ceil(U)}}u.update(),this._currentX=d,this._currentY=f,this._currentMaxCharHeight=m,this._skipKerning&&this._applyKerning(t,a)}get pageTextures(){return Fe(Ke,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let o=0;o<e.length;o++){const a=e[o];for(let u=0;u<this._currentChars.length;u++){const c=this._currentChars[u];let d=s[a];d||(d=s[a]=t.measureText(a).width);let f=s[c];f||(f=s[c]=t.measureText(c).width);let m=t.measureText(a+c).width,y=m-(d+f);y&&(this.chars[a].kerning[c]=y),m=t.measureText(a+c).width,y=m-(d+f),y&&(this.chars[c].kerning[a]=y)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=Ko.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new Ue({source:new Fi({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const a={canvasAndContext:t,texture:o};return this.pages[this._currentPageIndex]=a,a}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=zl(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const o=t._stroke,a=(o==null?void 0:o.width)??0;if(o&&(e.lineWidth=a,e.lineJoin=o.join,e.miterLimit=o.miterLimit,e.strokeStyle=Bl(o,e)),t._fill&&(e.fillStyle=Bl(t._fill,e)),t.dropShadow){const u=t.dropShadow,c=kt.shared.setValue(u.color).toArray(),d=u.blur*s,f=u.distance*s;e.shadowColor=`rgba(${c[0]*255},${c[1]*255},${c[2]*255},${u.alpha})`,e.shadowBlur=d,e.shadowOffsetX=Math.cos(u.angle)*f,e.shadowOffsetY=Math.sin(u.angle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,o,a,u){const c=t.text,d=t.fontProperties,f=u._stroke,m=((f==null?void 0:f.width)??0)*a,y=s+m/2,x=o-m/2,v=d.descent*a,b=t.lineHeight*a;let S=!1;u.stroke&&m&&(S=!0,e.strokeText(c,y,x+b-v));const{shadowBlur:_,shadowOffsetX:T,shadowOffsetY:M}=e;u._fill&&(S&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(c,y,x+b-v)),S&&(e.shadowBlur=_,e.shadowOffsetX=T,e.shadowOffsetY=M)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];Ko.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};Zp.defaultOptions={textureSize:512,style:new qo,mipmap:!0};let p0=Zp;function T4(r,e,t,s){const o={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=t.baseLineOffset;let a=o.lines[0],u=null,c=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},f=t.baseMeasurementFontSize/e.fontSize,m=e.letterSpacing*f,y=e.wordWrapWidth*f,x=e.lineHeight?e.lineHeight*f:t.lineHeight,v=e.wordWrap&&e.breakWords,b=T=>{const M=a.width;for(let E=0;E<d.index;E++){const P=T.positions[E];a.chars.push(T.chars[E]),a.charPositions.push(P+M)}a.width+=T.width,c=!1,d.width=0,d.index=0,d.chars.length=0},S=()=>{let T=a.chars.length-1;if(s){let M=a.chars[T];for(;M===" ";)a.width-=t.chars[M].xAdvance,M=a.chars[--T]}o.width=Math.max(o.width,a.width),a={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},c=!0,o.lines.push(a),o.height+=x},_=T=>T-m>y;for(let T=0;T<r.length+1;T++){let M;const E=T===r.length;E||(M=r[T]);const P=t.chars[M]||t.chars[" "];if(/(?:\s)/.test(M)||M==="\r"||M===`
`||E){if(!c&&e.wordWrap&&_(a.width+d.width)?(S(),b(d),E||a.charPositions.push(0)):(d.start=a.width,b(d),E||a.charPositions.push(0)),M==="\r"||M===`
`)S();else if(!E){const U=P.xAdvance+(P.kerning[u]||0)+m;a.width+=U,a.spaceWidth=U,a.spacesIndex.push(a.charPositions.length),a.chars.push(M)}}else{const F=P.kerning[u]||0,U=P.xAdvance+F+m;v&&_(a.width+d.width+U)&&(b(d),S()),d.positions[d.index++]=d.width+F,d.chars.push(M),d.width+=U}u=M}return S(),e.align==="center"?P4(o):e.align==="right"?M4(o):e.align==="justify"&&E4(o),o}function P4(r){for(let e=0;e<r.lines.length;e++){const t=r.lines[e],s=r.width/2-t.width/2;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function M4(r){for(let e=0;e<r.lines.length;e++){const t=r.lines[e],s=r.width-t.width;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function E4(r){const e=r.width;for(let t=0;t<r.lines.length;t++){const s=r.lines[t];let o=0,a=s.spacesIndex[o++],u=0;const c=s.spacesIndex.length,f=(e-s.width)/c;for(let m=0;m<s.charPositions.length;m++)m===a&&(a=s.spacesIndex[o++],u+=f),s.charPositions[m]+=u}}function R4(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const e=[];for(let t=0,s=r.length;t<s;t++){const o=r[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const a=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<a)throw new Error("[BitmapFont]: Invalid character range.");for(let c=a,d=u;c<=d;c++)e.push(String.fromCharCode(c))}else e.push(...Array.from(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let kl=0;class I4{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=zp(1e3)}getFont(e,t){var u;let s=`${t.fontFamily}-bitmap`,o=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,o=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,o=!1),!st.has(s)){const c=Object.create(t);c.lineHeight=0;const d=new p0({style:c,overrideFill:o,overrideSize:!0,...this.defaultOptions});kl++,kl>50&&ot("BitmapText",`You have dynamically created ${kl} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),d.once("destroy",()=>{kl--,st.remove(s)}),st.set(s,d)}const a=st.get(s);return(u=a.ensureCharacters)==null||u.call(a,e),a}getLayout(e,t,s=!0){const o=this.getFont(e,t),a=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(a))return this.measureCache.get(a);const u=or.graphemeSegmenter(e),c=T4(u,t,o,s);return this.measureCache.set(a,c),c}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){var f,m,y,x;let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:(f=e[2])==null?void 0:f.chars,resolution:(m=e[2])==null?void 0:m.resolution,padding:(y=e[2])==null?void 0:y.padding,skipKerning:(x=e[2])==null?void 0:x.skipKerning},Fe(Ke,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t==null?void 0:t.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const o=t.style,a=o instanceof qo?o:new qo(o),u=t.dynamicFill??this._canUseTintForStyle(a),c=new p0({style:a,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),d=R4(t.chars);return c.ensureCharacters(d.join("")),st.set(`${s}-bitmap`,c),c.once("destroy",()=>st.remove(`${s}-bitmap`)),c}uninstall(e){const t=`${e}-bitmap`,s=st.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const m0=new I4;class em extends Lp{constructor(e,t){super();const{textures:s,data:o}=e;Object.keys(o.pages).forEach(a=>{const u=o.pages[parseInt(a,10)],c=s[u.id];this.pages.push({texture:c})}),Object.keys(o.chars).forEach(a=>{const u=o.chars[a],{frame:c,source:d,rotate:f}=s[u.page],m=Qe.transformRectCoords(u,c,f,new lt),y=new Ue({frame:m,orig:new lt(0,0,u.width,u.height),source:d,rotate:f});this.chars[a]={id:a.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){m0.install(e)}static uninstall(e){m0.uninstall(e)}}const Kc={test(r){return typeof r=="string"&&r.startsWith("info face=")},parse(r){const e=r.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in e){const x=e[y].match(/^[a-z]+/gm)[0],v=e[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),b={};for(const S in v){const _=v[S].split("="),T=_[0],M=_[1].replace(/"/gm,""),E=parseFloat(M),P=isNaN(E)?M:E;b[T]=P}t[x].push(b)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=t.info,[a]=t.common,[u]=t.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(a.lineHeight,10);const c=t.page;for(let y=0;y<c.length;y++)s.pages.push({id:parseInt(c[y].id,10)||0,file:c[y].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(a.base,10);const f=t.char;for(let y=0;y<f.length;y++){const x=f[y],v=parseInt(x.id,10);let b=x.letter??x.char??String.fromCharCode(v);b==="space"&&(b=" "),d[v]=b,s.chars[b]={id:v,page:parseInt(x.page,10)||0,x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xOffset:parseInt(x.xoffset,10),yOffset:parseInt(x.yoffset,10),xAdvance:parseInt(x.xadvance,10),kerning:{}}}const m=t.kerning||[];for(let y=0;y<m.length;y++){const x=parseInt(m[y].first,10),v=parseInt(m[y].second,10),b=parseInt(m[y].amount,10);s.chars[d[v]].kerning[d[x]]=b}return s}},g0={test(r){const e=r;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(r){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=r.getElementsByTagName("info")[0],s=r.getElementsByTagName("common")[0],o=r.getElementsByTagName("distanceField")[0];o&&(e.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const a=r.getElementsByTagName("page"),u=r.getElementsByTagName("char"),c=r.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let f=0;f<a.length;f++)e.pages.push({id:parseInt(a[f].getAttribute("id"),10)||0,file:a[f].getAttribute("file")});const d={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let f=0;f<u.length;f++){const m=u[f],y=parseInt(m.getAttribute("id"),10);let x=m.getAttribute("letter")??m.getAttribute("char")??String.fromCharCode(y);x==="space"&&(x=" "),d[y]=x,e.chars[x]={id:y,page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xOffset:parseInt(m.getAttribute("xoffset"),10),yOffset:parseInt(m.getAttribute("yoffset"),10),xAdvance:parseInt(m.getAttribute("xadvance"),10),kerning:{}}}for(let f=0;f<c.length;f++){const m=parseInt(c[f].getAttribute("first"),10),y=parseInt(c[f].getAttribute("second"),10),x=parseInt(c[f].getAttribute("amount"),10);e.chars[d[y]].kerning[d[m]]=x}return e}},y0={test(r){return typeof r=="string"&&r.match(/<font(\s|>)/)?g0.test(et.get().parseXML(r)):!1},parse(r){return g0.parse(et.get().parseXML(r))}},L4=[".xml",".fnt"],z4={extension:{type:xe.CacheParser,name:"cacheBitmapFont"},test:r=>r instanceof em,getCacheableAssets(r,e){const t={};return r.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},F4={extension:{type:xe.LoadParser,priority:ti.Normal},name:"loadBitmapFont",id:"bitmap-font",test(r){return L4.includes(xn.extname(r).toLowerCase())},async testParse(r){return Kc.test(r)||y0.test(r)},async parse(r,e,t){const s=Kc.test(r)?Kc.parse(r):y0.parse(r),{src:o}=e,{pages:a}=s,u=[],c=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<a.length;++y){const x=a[y].file;let v=xn.join(xn.dirname(o),x);v=uh(v,o),u.push({src:v,data:c})}const d=await t.load(u),f=u.map(y=>d[y.src]);return new em({data:s,textures:f},o)},async load(r,e){return await(await et.get().fetch(r)).text()},async unload(r,e,t){await Promise.all(r.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),r.destroy()}};class j4{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const B4={extension:{type:xe.CacheParser,name:"cacheTextureArray"},test:r=>Array.isArray(r)&&r.every(e=>e instanceof Ue),getCacheableAssets:(r,e)=>{const t={};return r.forEach(s=>{e.forEach((o,a)=>{t[s+(a===0?"":a+1)]=o})}),t}};async function tm(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const $4={extension:{type:xe.DetectionParser,priority:1},test:async()=>tm("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")},x0=["png","jpg","jpeg"],D4={extension:{type:xe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...x0],remove:async r=>r.filter(e=>!x0.includes(e))},O4="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Wl(r){return O4?!1:document.createElement("video").canPlayType(r)!==""}const N4={extension:{type:xe.DetectionParser,priority:0},test:async()=>Wl("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")},W4={extension:{type:xe.DetectionParser,priority:0},test:async()=>Wl("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")},U4={extension:{type:xe.DetectionParser,priority:0},test:async()=>Wl("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")},H4={extension:{type:xe.DetectionParser,priority:0},test:async()=>tm("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")},nm=class El{constructor(){this.loadOptions={...El.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{var u,c;let o=null,a=null;if((t.parser||t.loadParser)&&(a=this._parserHash[t.parser||t.loadParser],t.loadParser&&ot(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),a||ot(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!a){for(let d=0;d<this.parsers.length;d++){const f=this.parsers[d];if(f.load&&((u=f.test)!=null&&u.call(f,e,t,this))){a=f;break}}if(!a)return ot(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await a.load(e,t,this),s.parser=a;for(let d=0;d<this.parsers.length;d++){const f=this.parsers[d];f.parse&&f.parse&&await((c=f.testParse)==null?void 0:c.call(f,o,t,this))&&(o=await f.parse(o,t,this)||o,s.parser=f)}return o})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...El.defaultOptions,...this.loadOptions,onProgress:t}:{...El.defaultOptions,...this.loadOptions,...t||{}},{onProgress:o,onError:a,strategy:u,retryCount:c,retryDelay:d}=s;let f=0;const m={},y=Ll(e),x=Nn(e,S=>({alias:[S],src:S,data:{}})),v=x.reduce((S,_)=>S+(_.progressSize||1),0),b=x.map(async S=>{const _=xn.toAbsolute(S.src);m[S.src]||(await this._loadAssetWithRetry(_,S,{onProgress:o,onError:a,strategy:u,retryCount:c,retryDelay:d},m),f+=S.progressSize||1,o&&o(f/v))});return await Promise.all(b),y?m[x[0].src]:m}async unload(e){const s=Nn(e,o=>({alias:[o],src:o})).map(async o=>{var c,d;const a=xn.toAbsolute(o.src),u=this.promiseCache[a];if(u){const f=await u.promise;delete this.promiseCache[a],await((d=(c=u.parser)==null?void 0:c.unload)==null?void 0:d.call(c,f,o,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?ot("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&ot(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,o){let a=0;const{onError:u,strategy:c,retryCount:d,retryDelay:f}=s,m=y=>new Promise(x=>setTimeout(x,y));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),o[t.src]=await this.promiseCache[e].promise;return}catch(y){delete this.promiseCache[e],delete o[t.src],a++;const x=c!=="retry"||a>d;if(c==="retry"&&!x){u&&u(y,t),await m(f);continue}if(c==="skip"){u&&u(y,t);return}throw u&&u(y,t),new Error(`[Loader.load] Failed to load ${e}.
${y}`)}}};nm.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let G4=nm;function Fs(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function js(r,e){const t=r.split("?")[0],s=xn.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const V4=".json",Y4="application/json",X4={extension:{type:xe.LoadParser,priority:ti.Low},name:"loadJson",id:"json",test(r){return Fs(r,Y4)||js(r,V4)},async load(r){return await(await et.get().fetch(r)).json()}},q4=".txt",K4="text/plain",Q4={name:"loadTxt",id:"text",extension:{type:xe.LoadParser,priority:ti.Low,name:"loadTxt"},test(r){return Fs(r,K4)||js(r,q4)},async load(r){return await(await et.get().fetch(r)).text()}},Z4=["normal","bold","100","200","300","400","500","600","700","800","900"],J4=[".ttf",".otf",".woff",".woff2"],e6=["font/ttf","font/otf","font/woff","font/woff2"],t6=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function n6(r){const e=xn.extname(r),o=xn.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1));let a=o.length>0;for(const c of o)if(!c.match(t6)){a=!1;break}let u=o.join(" ");return a||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const r6=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function i6(r){return r6.test(r)?r:encodeURI(r)}const s6={extension:{type:xe.LoadParser,priority:ti.Low},name:"loadWebFont",id:"web-font",test(r){return Fs(r,e6)||js(r,J4)},async load(r,e){var s,o,a;const t=et.get().getFontFaceSet();if(t){const u=[],c=((s=e.data)==null?void 0:s.family)??n6(r),d=((a=(o=e.data)==null?void 0:o.weights)==null?void 0:a.filter(m=>Z4.includes(m)))??["normal"],f=e.data??{};for(let m=0;m<d.length;m++){const y=d[m],x=new FontFace(c,`url(${i6(r)})`,{...f,weight:y});await x.load(),t.add(x),u.push(x)}return st.has(`${c}-and-url`)?st.get(`${c}-and-url`).entries.push({url:r,faces:u}):st.set(`${c}-and-url`,{entries:[{url:r,faces:u}]}),u.length===1?u[0]:u}return ot("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){const e=Array.isArray(r)?r:[r],t=e[0].family,s=st.get(`${t}-and-url`),o=s.entries.find(a=>a.faces.some(u=>e.indexOf(u)!==-1));o.faces=o.faces.filter(a=>e.indexOf(a)===-1),o.faces.length===0&&(s.entries=s.entries.filter(a=>a!==o)),e.forEach(a=>{et.get().getFontFaceSet().delete(a)}),s.entries.length===0&&st.remove(`${t}-and-url`)}};function $h(r,e=1){var s;const t=(s=zs.RETINA_PREFIX)==null?void 0:s.exec(r);return t?parseFloat(t[1]):e}function Dh(r,e,t){r.label=t,r._sourceOrigin=t;const s=new Ue({source:r,label:t}),o=()=>{delete e.promiseCache[t],st.has(t)&&st.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(ot("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{r.destroyed||(ot("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const o6=".svg",a6="image/svg+xml",l6={extension:{type:xe.LoadParser,priority:ti.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(r){return Fs(r,a6)||js(r,o6)},async load(r,e,t){var s;return((s=e.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?c6(r):u6(r,e,t,this.config.crossOrigin)},unload(r){r.destroy(!0)}};async function u6(r,e,t,s){var _,T,M;const o=await et.get().fetch(r),a=et.get().createImage();a.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,a.crossOrigin=s,await a.decode();const u=((_=e.data)==null?void 0:_.width)??a.width,c=((T=e.data)==null?void 0:T.height)??a.height,d=((M=e.data)==null?void 0:M.resolution)||$h(r),f=Math.ceil(u*d),m=Math.ceil(c*d),y=et.get().createCanvas(f,m),x=y.getContext("2d");x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(a,0,0,u*d,c*d);const{parseAsGraphicsContext:v,...b}=e.data??{},S=new Fi({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:d,...b});return Dh(S,t,r)}async function c6(r){const t=await(await et.get().fetch(r)).text(),s=new Mn;return s.svg(t),s}const h6=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Ts=null,_h=class{constructor(){Ts||(Ts=URL.createObjectURL(new Blob([h6],{type:"application/javascript"}))),this.worker=new Worker(Ts)}};_h.revokeObjectURL=function(){Ts&&(URL.revokeObjectURL(Ts),Ts=null)};const d6=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Ps=null;class rm{constructor(){Ps||(Ps=URL.createObjectURL(new Blob([d6],{type:"application/javascript"}))),this.worker=new Worker(Ps)}}rm.revokeObjectURL=function(){Ps&&(URL.revokeObjectURL(Ps),Ps=null)};let v0=0,Qc;class f6{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new _h;t.addEventListener("message",s=>{t.terminate(),_h.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){var s;return this._run("loadImageBitmap",[e,(s=t==null?void 0:t.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){Qc===void 0&&(Qc=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<Qc&&(this._createdWorkers++,e=new rm().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((o,a)=>{this._queue.push({id:e,arguments:t,resolve:o,reject:a})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[v0]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:v0++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const _0=new f6,p6=[".jpeg",".jpg",".png",".webp",".avif"],m6=["image/jpeg","image/png","image/webp","image/avif"];async function g6(r,e){var o;const t=await et.get().fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const s=await t.blob();return((o=e==null?void 0:e.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const im={name:"loadTextures",id:"texture",extension:{type:xe.LoadParser,priority:ti.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Fs(r,m6)||js(r,p6)},async load(r,e,t){var a;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await _0.isImageBitmapSupported()?s=await _0.loadImageBitmap(r,e):s=await g6(r,e):s=await new Promise((u,c)=>{s=et.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=r,s.complete?u(s):(s.onload=()=>{u(s)},s.onerror=c)});const o=new Fi({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((a=e.data)==null?void 0:a.resolution)||$h(r),...e.data});return Dh(o,t,r)},unload(r){r.destroy(!0)}},y6=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let Zc,Jc;function x6(r,e,t){t===void 0&&!e.startsWith("data:")?r.crossOrigin=_6(e):t!==!1&&(r.crossOrigin=typeof t=="string"?t:"anonymous")}function v6(r){return new Promise((e,t)=>{r.addEventListener("canplaythrough",s),r.addEventListener("error",o),r.load();function s(){a(),e()}function o(u){a(),t(u)}function a(){r.removeEventListener("canplaythrough",s),r.removeEventListener("error",o)}})}function _6(r,e=globalThis.location){if(r.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function w6(){const r=[],e=[];for(const t of y6){const s=Do.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;Wl(s)&&(r.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:r,validVideoMime:e}}const b6={name:"loadVideo",id:"video",extension:{type:xe.LoadParser,name:"loadVideo"},test(r){if(!Zc||!Jc){const{validVideoExtensions:s,validVideoMime:o}=w6();Zc=s,Jc=o}const e=Fs(r,Jc),t=js(r,Zc);return e||t},async load(r,e,t){var d,f;const s={...Do.defaultOptions,resolution:((d=e.data)==null?void 0:d.resolution)||$h(r),alphaMode:((f=e.data)==null?void 0:f.alphaMode)||await lp(),...e.data},o=document.createElement("video"),a={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(a).forEach(m=>{const y=a[m];y!==void 0&&o.setAttribute(m,y)}),s.muted===!0&&(o.muted=!0),x6(o,r,s.crossorigin);const u=document.createElement("source");let c;if(s.mime)c=s.mime;else if(r.startsWith("data:"))c=r.slice(5,r.indexOf(";"));else if(!r.startsWith("blob:")){const m=r.split("?")[0].slice(r.lastIndexOf(".")+1).toLowerCase();c=Do.MIME_TYPES[m]||`video/${m}`}return u.src=r,c&&(u.type=c),new Promise(m=>{const y=async()=>{const x=new Do({...s,resource:o});o.removeEventListener("canplay",y),e.data.preload&&await v6(o),m(Dh(x,t,r))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",y),o.appendChild(u)})},unload(r){r.destroy(!0)}},sm={extension:{type:xe.ResolveParser,name:"resolveTexture"},test:im.test,parse:r=>{var e;return{resolution:parseFloat(((e=zs.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:r.split(".").pop(),src:r}}},S6={extension:{type:xe.ResolveParser,priority:-2,name:"resolveJson"},test:r=>zs.RETINA_PREFIX.test(r)&&r.endsWith(".json"),parse:sm.parse};class k6{constructor(){this._detections=[],this._initialized=!1,this.resolver=new zs,this.loader=new G4,this.cache=st,this._backgroundLoader=new j4(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var a,u;if(this._initialized){ot("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let c=e.manifest;typeof c=="string"&&(c=await this.load(c)),this.resolver.addManifest(c)}const t=((a=e.texturePreference)==null?void 0:a.resolution)??1,s=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:(u=e.texturePreference)==null?void 0:u.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=Ll(e),o=Nn(e).map(c=>{if(typeof c!="string"){const d=this.resolver.getAlias(c);return d.some(f=>!this.resolver.hasKey(f))&&this.add(c),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),a=this.resolver.resolve(o),u=await this._mapLoadToResolve(a,t);return s?u[o[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const o=this.resolver.resolveBundle(e),a={},u=Object.keys(o);let c=0;const d=[],f=()=>{t==null||t(d.reduce((y,x)=>y+x,0)/c)},m=u.map((y,x)=>{const v=o[y],b=Object.values(v),_=[...new Set(b.flat())].reduce((T,M)=>T+(M.progressSize||1),0);return d.push(0),c+=_,this._mapLoadToResolve(v,T=>{d[x]=T*_,f()}).then(T=>{a[y]=T})});return await Promise.all(m),s?a[e[0]]:a}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return st.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=st.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,t);this._backgroundLoader.active=!0;const a={};return s.forEach(u=>{const c=o[u.src],d=[u.src];u.alias&&d.push(...u.alias),d.forEach(f=>{a[f]=c}),st.set(d,c)}),a}async unload(e){this._initialized||await this.init();const t=Nn(e).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=Nn(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{st.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,o)=>t.indexOf(s)===o),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const As=new k6;$t.handleByList(xe.LoadParser,As.loader.parsers).handleByList(xe.ResolveParser,As.resolver.parsers).handleByList(xe.CacheParser,As.cache.parsers).handleByList(xe.DetectionParser,As.detections);$t.add(B4,D4,$4,H4,N4,W4,U4,X4,Q4,s6,l6,im,b6,F4,z4,sm,S6);const w0={loader:xe.LoadParser,resolver:xe.ResolveParser,cache:xe.CacheParser,detection:xe.DetectionParser};$t.handle(xe.Asset,r=>{const e=r.ref;Object.entries(w0).filter(([t])=>!!e[t]).forEach(([t,s])=>$t.add(Object.assign(e[t],{extension:e[t].extension??s})))},r=>{const e=r.ref;Object.keys(w0).filter(t=>!!e[t]).forEach(t=>$t.remove(e[t]))});class Bi extends Ph{constructor(e){e instanceof Mn&&(e={context:e});const{context:t,roundPixels:s,...o}=e||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new Mn,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Bi(this._context.clone()):(this._ownedContext=null,new Bi(this._context))}lineStyle(e,t,s){Fe(Ke,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return e&&(o.width=e),t&&(o.color=t),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(e,t){Fe(Ke,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){Fe(Ke,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==Mn.defaultStrokeStyle.width||e.color!==Mn.defaultStrokeStyle.color||e.alpha!==Mn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Fe(Ke,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Fe(Ke,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Fe(Ke,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Fe(Ke,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Fe(Ke,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Fe(Ke,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class C6 extends Ph{constructor(e,t){const{text:s,resolution:o,style:a,anchor:u,width:c,height:d,roundPixels:f,...m}=e;super({...m}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=s??"",this.style=a,this.resolution=o??null,this.allowChildren=!1,this._anchor=new Bt({_onUpdate:()=>{this.onViewUpdate()}}),u&&(this.anchor=u),this.roundPixels=f??!1,c!==void 0&&(this.width=c),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,s=this.bounds.height,o=-t*this.anchor.x;let a=0;return e.x>=o&&e.x<=o+t&&(a=-s*this.anchor.y,e.y>=a&&e.y<=a+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function A6(r,e){let t=r[0]??{};return(typeof t=="string"||r[1])&&(Fe(Ke,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:r[1]}),t}let Mi=null,Sr=null;function T6(r,e){Mi||(Mi=et.get().createCanvas(256,128),Sr=Mi.getContext("2d",{willReadFrequently:!0}),Sr.globalCompositeOperation="copy",Sr.globalAlpha=1),(Mi.width<r||Mi.height<e)&&(Mi.width=Ms(r),Mi.height=Ms(e))}function b0(r,e,t){for(let s=0,o=4*t*e;s<e;++s,o+=4)if(r[o+3]!==0)return!1;return!0}function S0(r,e,t,s,o){const a=4*e;for(let u=s,c=s*a+4*t;u<=o;++u,c+=a)if(r[c+3]!==0)return!1;return!0}function P6(...r){let e=r[0];e.canvas||(e={canvas:r[0],resolution:r[1]});const{canvas:t}=e,s=Math.min(e.resolution??1,1),o=e.width??t.width,a=e.height??t.height;let u=e.output;if(T6(o,a),!Sr)throw new TypeError("Failed to get canvas 2D context");Sr.drawImage(t,0,0,o,a,0,0,o*s,a*s);const d=Sr.getImageData(0,0,o,a).data;let f=0,m=0,y=o-1,x=a-1;for(;m<a&&b0(d,o,m);)++m;if(m===a)return lt.EMPTY;for(;b0(d,o,x);)--x;for(;S0(d,o,f,m,x);)++f;for(;S0(d,o,y,m,x);)--y;return++y,++x,Sr.globalCompositeOperation="source-over",Sr.strokeRect(f,m,y-f,x-m),Sr.globalCompositeOperation="copy",u??(u=new lt),u.set(f/s,m/s,(y-f)/s,(x-m)/s),u}const k0=new lt;class M6{getCanvasAndContext(e){const{text:t,style:s,resolution:o=1}=e,a=s._getFinalPadding(),u=or.measureText(t||" ",s),c=Math.ceil(Math.ceil(Math.max(1,u.width)+a*2)*o),d=Math.ceil(Math.ceil(Math.max(1,u.height)+a*2)*o),f=Ko.getOptimalCanvasAndContext(c,d);this._renderTextToCanvas(t,s,a,o,f);const m=s.trim?P6({canvas:f.canvas,width:c,height:d,resolution:1,output:k0}):k0.set(0,0,c,d);return{canvasAndContext:f,frame:m}}returnCanvasAndContext(e){Ko.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,s,o,a){var E,P,N,D;const{canvas:u,context:c}=a,d=zl(t),f=or.measureText(e||" ",t),m=f.lines,y=f.lineHeight,x=f.lineWidths,v=f.maxLineWidth,b=f.fontProperties,S=u.height;if(c.resetTransform(),c.scale(o,o),c.textBaseline=t.textBaseline,(E=t._stroke)!=null&&E.width){const F=t._stroke;c.lineWidth=F.width,c.miterLimit=F.miterLimit,c.lineJoin=F.join,c.lineCap=F.cap}c.font=d;let _,T;const M=t.dropShadow?2:1;for(let F=0;F<M;++F){const U=t.dropShadow&&F===0,G=U?Math.ceil(Math.max(1,S)+s*2):0,Y=G*o;if(U){c.fillStyle="black",c.strokeStyle="black";const te=t.dropShadow,we=te.color,Ze=te.alpha;c.shadowColor=kt.shared.setValue(we).setAlpha(Ze).toRgbaString();const ee=te.blur*o,ne=te.distance*o;c.shadowBlur=ee,c.shadowOffsetX=Math.cos(te.angle)*ne,c.shadowOffsetY=Math.sin(te.angle)*ne+Y}else{if(c.fillStyle=t._fill?Bl(t._fill,c,f,s*2):null,(P=t._stroke)!=null&&P.width){const te=t._stroke.width*.5+s*2;c.strokeStyle=Bl(t._stroke,c,f,te)}c.shadowColor="black"}let q=(y-b.fontSize)/2;y-b.fontSize<0&&(q=0);const me=((N=t._stroke)==null?void 0:N.width)??0;for(let te=0;te<m.length;te++)_=me/2,T=me/2+te*y+b.ascent+q,t.align==="right"?_+=v-x[te]:t.align==="center"&&(_+=(v-x[te])/2),(D=t._stroke)!=null&&D.width&&this._drawLetterSpacing(m[te],t,a,_+s,T+s-G,!0),t._fill!==void 0&&this._drawLetterSpacing(m[te],t,a,_+s,T+s-G)}}_drawLetterSpacing(e,t,s,o,a,u=!1){const{context:c}=s,d=t.letterSpacing;let f=!1;if(or.experimentalLetterSpacingSupported&&(or.experimentalLetterSpacing?(c.letterSpacing=`${d}px`,c.textLetterSpacing=`${d}px`,f=!0):(c.letterSpacing="0px",c.textLetterSpacing="0px")),d===0||f){u?c.strokeText(e,o,a):c.fillText(e,o,a);return}let m=o;const y=or.graphemeSegmenter(e);let x=c.measureText(e).width,v=0;for(let b=0;b<y.length;++b){const S=y[b];u?c.strokeText(S,m,a):c.fillText(S,m,a);let _="";for(let T=b+1;T<y.length;++T)_+=y[T];v=c.measureText(_).width,m+=x-v+d,x=v}}}const C0=new M6;class E6 extends C6{constructor(...e){const t=A6(e,"Text");super(t,qo),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof Es?t.textureStyle:new Es(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let s=0,o=0;if(this._style.trim){const{frame:a,canvasAndContext:u}=C0.getCanvasAndContext({text:this.text,style:this._style,resolution:1});C0.returnCanvasAndContext(u),s=a.width,o=a.height}else{const a=or.measureText(this._text,this._style);s=a.width,o=a.height}e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*o,e.maxY=e.minY+o}}$t.add(j3,B3);const R6=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<!-- Created with Inkscape (http://www.inkscape.org/) -->\r
\r
<svg\r
   width="174.61385mm"\r
   height="234.6797mm"\r
   viewBox="0 0 174.61385 234.6797"\r
   version="1.1"\r
   id="svg1"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   sodipodi:docname="gentil.svg"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#191919"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#bd2727ff"\r
     inkscape:document-units="mm"\r
     inkscape:zoom="0.72604517"\r
     inkscape:cx="331.24661"\r
     inkscape:cy="485.50698"\r
     inkscape:window-width="1920"\r
     inkscape:window-height="1017"\r
     inkscape:window-x="1912"\r
     inkscape:window-y="-8"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="layer1"\r
     showgrid="true">\r
    <inkscape:grid\r
       id="grid1"\r
       units="mm"\r
       originx="-17.307133"\r
       originy="-20.032634"\r
       spacingx="0.99999998"\r
       spacingy="1"\r
       empcolor="#0099e5"\r
       empopacity="0.30196078"\r
       color="#0099e5"\r
       opacity="0.14901961"\r
       empspacing="5"\r
       enabled="true"\r
       visible="true" />\r
  </sodipodi:namedview>\r
  <defs\r
     id="defs1" />\r
  <g\r
     inkscape:label="Calque 1"\r
     inkscape:groupmode="layer"\r
     id="layer1"\r
     transform="translate(-17.307132,-20.032634)">\r
    <path\r
       d="m 69.048457,20.142976 c -0.141111,0.105834 -1.234722,0.282223 -2.434166,0.352778 -2.504723,0.176389 -3.633611,0.740834 -4.445,2.293056 -0.352778,0.599722 -0.9525,1.622778 -1.411111,2.328333 -0.881945,1.340556 -2.046111,4.233334 -2.328334,5.891389 -0.105833,0.564445 -0.599722,2.2225 -1.093611,3.633611 -0.458611,1.446389 -1.093611,4.021667 -1.375833,5.785556 -0.282222,1.763888 -0.740833,3.421944 -1.023056,3.774721 -0.282222,0.3175 -0.599722,0.811389 -0.740833,1.093611 -0.141111,0.282223 0.07056,0.141112 0.458611,-0.352777 0.846667,-1.023056 0.9525,-0.740834 0.211667,0.670277 -0.282222,0.564445 -0.423333,1.093612 -0.282222,1.199445 0.105833,0.105833 -0.176389,0.811389 -0.635,1.516944 -0.740834,1.234722 -0.811389,1.27 -1.128889,0.564445 -0.176389,-0.388056 -0.881945,-0.987778 -1.516945,-1.305278 -1.093611,-0.529167 -1.305277,-0.529167 -2.434166,0.03528 -1.940278,0.917222 -4.233333,3.139722 -5.115278,4.974167 -0.670278,1.411111 -1.27,1.975555 -3.598333,3.457222 -3.033889,1.905 -5.750277,4.797777 -7.161388,7.584722 -0.458612,0.917222 -1.305278,2.116666 -1.869723,2.681111 -1.305277,1.340555 -3.139722,6.0325 -2.575277,6.596944 0.246944,0.246945 1.411111,0.423334 2.892777,0.388056 l 2.434167,-0.03528 -0.176389,1.093611 c -0.105833,0.599722 -0.352778,2.187222 -0.564444,3.563056 -0.176389,1.340555 -0.599723,2.751666 -0.917223,3.069166 -0.423333,0.458611 -0.493888,1.023056 -0.3175,2.257778 0.211667,1.763889 0.705556,2.610555 1.481667,2.610555 0.352778,0 0.423333,0.3175 0.246945,1.093611 -0.105834,0.635 -0.03528,1.199445 0.176388,1.340556 0.246945,0.141111 0.282223,0.987778 0.07056,2.681111 -0.176388,1.375833 -0.211666,2.822222 -0.105833,3.280833 0.246945,1.093611 -0.529167,3.774722 -1.340555,4.515556 -0.388056,0.3175 -0.670278,0.846666 -0.670278,1.199444 0,0.317504 -0.493889,0.740834 -1.234722,1.023054 -1.693334,0.59972 -2.081389,1.44639 -1.799167,4.1275 0.352778,3.35139 -0.282222,6.70278 -1.446389,7.69056 -1.128889,0.98778 -1.234722,2.61055 -0.282222,4.40972 0.3175,0.635 0.635,1.79917 0.705555,2.61056 0.529167,5.53861 0.529167,5.82083 -0.03528,6.0325 -0.3175,0.10583 -0.599722,0.21166 -0.670277,0.21166 -0.03528,0 -0.176389,-0.635 -0.3175,-1.44639 -0.176388,-1.02305 -0.423333,-1.51694 -0.917222,-1.62277 -0.529166,-0.14112 -0.705555,-0.49389 -0.705555,-1.30528 -0.03528,-2.11667 -2.575278,-6.17361 -3.633611,-5.75028 -1.023056,0.38806 -1.093611,2.54 -0.246945,4.86833 0.705556,1.79917 0.740834,2.2225 0.352778,2.96334 -0.246944,0.49389 -0.352778,1.30527 -0.246944,1.905 0.141111,0.70555 0,1.5875 -0.458612,2.57527 -0.388055,0.84667 -0.705555,2.2225 -0.705555,3.06917 0,1.51694 0,1.51694 -0.776111,0.9525 -2.081389,-1.44639 -2.187222,-1.44639 -1.940278,-0.0706 0.105833,0.70556 0.529167,1.72862 0.881945,2.25778 0.846666,1.16417 3.563055,7.51417 4.656666,10.83028 1.305278,3.98639 3.386667,7.83167 5.432778,9.91305 2.786944,2.89278 3.986389,2.46945 5.185833,-1.86972 1.058333,-3.81 0.917222,-5.57389 -0.635,-7.83166 -0.705556,-1.02306 -1.340556,-1.76389 -1.375833,-1.5875 -0.03528,0.17639 -0.176389,0.74083 -0.282223,1.27 -0.3175,1.37583 -0.670277,1.23472 -1.340555,-0.56445 l -0.564444,-1.55222 2.151944,0.17639 c 1.199444,0.0705 3.175,0.28222 4.374444,0.49389 2.434166,0.35278 3.739444,0.0705 4.303889,-1.05834 0.599722,-1.05833 0.458611,-2.08138 -0.3175,-2.8575 -0.881945,-0.88194 -1.305278,-1.94027 -2.010834,-4.7625 -0.246944,-1.16416 -0.846666,-2.75167 -1.305277,-3.52778 -0.705556,-1.16416 -0.811389,-1.69333 -0.564445,-2.99861 0.141111,-0.88194 0.529167,-2.15194 0.881945,-2.82222 1.164166,-2.18722 1.234722,-2.43417 1.234722,-3.52778 0,-1.23472 1.093611,-3.56305 2.116666,-4.58611 0.388056,-0.38805 0.705556,-0.98778 0.705556,-1.34055 0,-0.35278 0.246944,-0.9525 0.529167,-1.37584 0.3175,-0.45861 0.529166,-1.37583 0.458611,-2.11666 -0.03528,-0.74084 0.282222,-2.99862 0.705555,-5.04473 0.423334,-2.04611 0.9525,-4.58611 1.128889,-5.67972 0.246945,-1.19944 0.987778,-2.99861 1.905,-4.550832 0.846667,-1.375834 1.834444,-3.386667 2.187222,-4.445 0.352778,-1.058333 0.776111,-1.905 0.917222,-1.905 0.141112,0 0.529167,0.529167 0.846667,1.128889 0.3175,0.635 1.411111,2.434166 2.363611,3.951111 1.340556,2.046111 1.869722,3.280833 2.046111,4.691942 0.141111,1.05834 0.564445,2.32834 0.917222,2.82222 2.293056,3.24556 2.328334,4.37445 0.352778,7.09084 -0.670278,0.91722 -1.905,2.92805 -2.716389,4.445 -1.552222,2.96333 -1.552222,3.10444 -1.058333,9.03111 0.03528,0.28222 -0.105833,2.64583 -0.3175,5.22111 -0.352778,4.23334 -0.529167,4.97417 -1.658055,7.40834 -1.869723,3.95111 -1.940278,4.19805 -2.293056,7.65527 -0.211667,2.08139 -0.211667,4.09223 0.03528,5.89139 0.352778,2.61056 0.3175,2.92806 -0.917222,7.69056 -1.481667,5.57389 -1.516945,5.32694 1.199444,6.0325 0.881944,0.24694 1.658056,0.70555 1.905,1.12889 0.9525,1.79916 -0.599722,8.5725 -3.457222,14.99305 -1.058334,2.43417 -4.621389,7.16139 -5.185833,6.94972 -0.564445,-0.21166 -1.023056,0.14112 -1.693334,1.37584 -0.529166,0.9525 -1.058333,1.23472 -2.328333,1.34055 -0.246944,0.0353 -0.458611,0.21167 -0.458611,0.38806 0,0.17639 -0.3175,0.74083 -0.670278,1.27 -0.634999,0.88194 -0.634999,1.05833 -0.211666,1.905 0.458611,0.88194 0.352777,1.19944 -1.305278,4.72722 l -1.799166,3.81 -0.07055,5.46806 c -0.07056,7.76111 -0.458612,12.94694 -1.305278,17.85055 l -0.740834,4.30389 -1.552222,0.77611 c -0.846666,0.42333 -1.481666,0.84667 -1.375833,0.9525 0.07056,0.10583 -0.07056,0.81139 -0.352778,1.62278 -0.458611,1.30528 -0.458611,1.51694 0,1.86972 1.093611,0.77611 1.27,2.15195 0.917222,6.42056 -0.211666,2.25777 -0.493888,4.97416 -0.635,5.96194 -0.176388,1.02306 -0.211666,2.01083 -0.105833,2.15195 0.493889,0.74083 9.524999,4.7625 11.429999,5.07999 2.645833,0.45862 9.489722,-0.21166 11.006666,-1.09361 0.917222,-0.49388 1.058334,-0.84666 1.164167,-2.25777 0.07055,-1.19945 -0.105833,-2.01084 -0.599722,-2.82223 -0.776111,-1.27 -6.632222,-7.05555 -8.466667,-8.32555 -1.09361,-0.77611 -1.164165,-0.9525 -0.9525,-2.29306 0.141111,-0.81139 0.529167,-1.69333 0.9525,-1.97555 0.493889,-0.42334 0.776111,-1.19945 1.023056,-2.99861 0.388055,-3.21028 4.7625,-14.78139 8.290277,-21.94278 1.481667,-2.92806 2.822223,-6.17361 2.998611,-7.19667 0.635001,-3.38666 3.598334,-7.3025 6.138334,-8.07861 0.811388,-0.28222 1.552222,-0.81139 1.905,-1.41111 0.493888,-0.88194 0.740833,-0.98778 2.187222,-0.91722 2.081389,0.10583 3.139722,0.70555 6.35,3.56305 1.446388,1.30528 3.069166,2.43417 3.598333,2.54 0.529167,0.10584 1.199444,0.56445 1.516944,1.02306 0.846667,1.30528 3.245556,8.29028 3.527778,10.23055 0.282222,2.04612 1.516944,6.52639 1.940278,6.985 0.141111,0.14112 0.141111,0.74084 0,1.27 -0.176389,0.56445 -0.211667,1.09362 -0.105834,1.19945 0.105834,0.10583 0.03528,0.38805 -0.141111,0.635 -0.529166,0.635 -0.881944,2.99861 -0.529166,3.24555 0.176388,0.10584 0.246944,0.9525 0.176388,1.86973 -0.246944,2.50472 0.493889,7.86694 1.164167,8.60777 0.811389,0.91723 3.280833,1.16417 6.244177,0.67028 4.833056,-0.81139 6.596945,-0.81139 10.583333,-0.0353 2.610561,0.49389 5.185841,0.74084 8.219731,0.74084 3.98639,0 4.445,-0.0706 5.11528,-0.74084 0.56444,-0.56444 0.70555,-0.98777 0.52916,-1.83444 -0.10583,-0.56444 -0.38805,-1.23472 -0.56444,-1.48167 -0.17639,-0.24694 -2.04611,-0.88194 -4.1275,-1.41111 -2.11667,-0.52916 -4.02167,-1.16416 -4.30389,-1.37583 -0.52917,-0.42333 -2.50472,-1.48167 -4.974173,-2.71639 -3.421944,-1.65806 -5.679722,-4.19806 -4.974167,-5.53861 0.246945,-0.42333 0.105834,-1.27 -0.388055,-2.71639 -0.635,-1.905 -0.705556,-2.61056 -0.493889,-7.05556 0.141111,-2.71638 0.3175,-5.43277 0.423333,-5.99722 0.105834,-0.59972 0.3175,-3.38666 0.423334,-6.24416 0.141111,-3.13973 0.423333,-5.36223 0.635,-5.60917 0.599722,-0.56444 1.516944,-0.17639 3.280833,1.44639 1.552222,1.41111 2.504722,1.62278 2.504722,0.52917 0,-0.77612 -1.234722,-3.10445 -1.940278,-3.70417 -1.023055,-0.84667 -1.234722,-1.5875 -0.846666,-2.99861 0.211666,-0.74084 0.599722,-1.5875 0.881944,-1.83445 0.282222,-0.28222 0.493889,-0.81139 0.493889,-1.19944 0,-1.48167 3.139733,-0.59972 8.255003,2.39889 0.84667,0.49389 2.89278,0.59972 3.175,0.17639 0.10584,-0.17639 -1.05833,-1.37584 -2.54,-2.68111 -2.54,-2.29306 -6.84389,-4.79778 -8.255003,-4.79778 -0.3175,0 -0.705556,-0.17639 -0.811389,-0.35278 -0.105834,-0.21167 -0.670278,-0.35278 -1.234723,-0.35278 -0.811389,0 -1.058333,-0.21166 -1.375833,-1.12889 -0.317499,-0.84666 -0.493889,-1.02305 -0.811389,-0.70555 -1.128889,1.12889 -1.199445,0.0353 -0.352778,-4.62139 0.352778,-1.86972 1.128889,-3.06917 1.128889,-1.69333 0,1.5875 0.635,0.35277 0.776111,-1.55223 0.105833,-1.30527 0.423333,-2.29305 0.917222,-2.92805 2.751673,-3.42195 3.245563,-4.72722 3.245563,-8.71361 0,-1.72861 0.17639,-3.03389 0.42333,-3.28084 0.45861,-0.45861 0.49389,-3.56305 0.10584,-10.58333 -0.24695,-4.1275 -0.21167,-4.65667 0.3175,-4.65667 0.59972,0 0.77611,0.56445 1.05833,3.42195 0.24694,2.46944 1.16417,4.1275 3.66889,6.56167 2.18722,2.18722 3.03389,2.2225 1.94028,0.14111 -0.35278,-0.635 -1.02306,-1.905 -1.48167,-2.78695 -0.77611,-1.48166 -0.81139,-1.69333 -0.35278,-2.71639 0.3175,-0.67027 0.74083,-1.09361 1.16417,-1.09361 0.38805,0 1.19944,-0.17639 1.79916,-0.38805 2.01084,-0.74084 10.05417,1.65805 13.22917,3.91583 0.91722,0.635 1.23472,0.70556 2.36361,0.38806 0.74083,-0.21167 1.83444,-0.38806 2.46944,-0.38806 1.5875,0 4.97417,1.12889 6.70278,2.2225 1.34055,0.84667 1.94028,0.98778 5.29167,1.09361 5.78555,0.24695 15.98083,2.25778 19.685,3.91583 0.98777,0.42334 2.8575,0.88195 4.19805,0.98778 1.34056,0.14111 3.10444,0.56445 3.95111,0.9525 1.09361,0.56445 3.73945,1.02306 9.91306,1.76389 9.17222,1.16417 14.9225,1.62278 14.9225,1.30528 0,-0.49389 -3.66889,-2.01084 -10.58334,-4.445 -3.98639,-1.41111 -8.07861,-2.8575 -9.10166,-3.21028 -1.05834,-0.38805 -2.68111,-0.70555 -3.66889,-0.70555 -0.98778,0 -2.68111,-0.35278 -3.91584,-0.84667 -1.23472,-0.45861 -3.35138,-0.91722 -4.83305,-1.05833 -4.55083,-0.35278 -16.05139,-3.59834 -19.93194,-5.60917 -1.12889,-0.59972 -2.08139,-0.74083 -4.93889,-0.77611 -3.73945,0 -6.10306,-0.74084 -7.83167,-2.36361 -0.70556,-0.635 -1.16417,-0.70556 -4.445,-0.67028 -4.65666,0.10583 -11.21833,-1.27 -12.24138,-2.50472 -1.44639,-1.72861 -0.38806,-3.31611 3.31611,-5.00945 1.76389,-0.81139 2.96333,-1.79917 2.61055,-2.18722 -0.10583,-0.0706 -1.55222,0.17639 -3.24555,0.59972 -3.4925,0.88194 -6.49111,2.54 -8.21972,4.51556 -1.37584,1.65805 -2.32834,1.97555 -3.13973,1.05833 -0.49389,-0.56444 -0.52916,-0.84667 -0.21166,-1.5875 0.84666,-1.76389 0.21166,-6.6675 -1.12889,-8.78417 -0.705564,-1.12889 -1.340564,-6.87917 -1.09362,-9.63083 0.246945,-2.2225 0.176389,-2.54 -0.493888,-3.21028 -0.670278,-0.67028 -0.740834,-1.16417 -0.776112,-4.30389 0,-2.46944 -0.246944,-4.23333 -0.705555,-5.67972 C 96.988477,101.5993 96.600422,99.835411 96.45931,98.812356 96.318199,97.7893 95.965422,96.484022 95.683199,95.919578 95.400977,95.319856 94.836533,93.450133 94.483755,91.7568 c -0.599722,-3.033889 -0.599722,-3.139722 0.03528,-3.704166 0.811389,-0.740834 1.622778,-3.316111 1.340555,-4.339167 -0.105833,-0.423333 0.03528,-1.869722 0.282223,-3.210278 0.282222,-1.340555 0.529166,-3.245555 0.529166,-4.233333 0,-1.763889 0,-1.799167 0.705556,-1.164167 0.599722,0.529167 0.811389,0.564445 1.763889,0.176389 1.763896,-0.740833 2.116676,-1.516944 1.587506,-3.4925 -0.49389,-1.905 -1.05834,-3.069166 -1.69334,-3.457222 -1.093611,-0.705555 -1.305278,-2.116666 -0.776111,-4.974166 0.917222,-4.7625 0.599722,-8.149167 -0.846667,-8.748889 -0.3175,-0.105833 -1.904999,-0.3175 -3.563055,-0.458611 l -2.963333,-0.211667 -0.105834,-3.175 c -0.141123,-3.845214 -0.4939,-5.150492 -1.834456,-7.302436 -1.375833,-2.151944 -2.575288,-2.928055 -4.480288,-2.822222 l -1.552222,0.07056 0.07055,-1.340555 c 0.07056,-1.975556 -0.246939,-3.598334 -1.305273,-6.173612 -0.493889,-1.27 -0.987777,-2.610555 -1.058333,-2.963333 -0.282222,-1.375833 -1.058333,-3.175 -1.834444,-4.233333 -0.458611,-0.599722 -0.811389,-1.27 -0.811389,-1.446389 0,-0.388056 -3.139722,-3.351389 -4.092222,-3.845278 -0.811389,-0.458611 -4.550834,-0.881945 -4.833056,-0.564445 z m 26.35251,79.798332 c -0.282222,0.317502 -0.776111,-0.423333 -0.599722,-0.917222 0.211667,-0.529166 0.246944,-0.493889 0.458611,0.105834 0.141111,0.352777 0.211667,0.740833 0.141111,0.811388 z m -20.249454,68.615272 1.5875,0.74084 0.599722,2.99861 c 1.375833,6.73805 1.164166,11.04194 -0.635,12.73528 -0.458611,0.42333 -0.846667,1.02305 -0.846667,1.30527 0,0.28223 -0.3175,0.91723 -0.705555,1.48167 -0.811389,1.16417 -1.023056,4.02167 -0.388056,5.57389 0.246945,0.56444 0.388056,1.79917 0.3175,2.75167 l -0.105833,1.72861 -2.116667,-3.13972 c -1.834444,-2.75167 -5.609166,-6.56167 -6.491111,-6.56167 -0.141111,0 -0.458611,-0.38806 -0.670278,-0.88195 -0.246944,-0.49388 -0.811388,-1.05833 -1.305277,-1.23472 -0.493889,-0.17639 -0.917223,-0.56444 -0.917223,-0.88194 -0.211666,-2.64584 -0.176388,-2.82222 1.128889,-4.23334 2.116667,-2.29305 7.373056,-11.71222 7.373056,-13.22916 0,-0.45861 0.881944,-0.24695 3.175,0.84666 z"\r
       id="path3"\r
       style="fill:currentColor;fill-opacity:1;stroke:none;stroke-width:0.0352778" />\r
  </g>\r
</svg>\r
`,I6=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<svg\r
   width="2342"\r
   height="3750"\r
   viewBox="0 0 2342 3750"\r
   version="1.1"\r
   id="svg1"\r
   sodipodi:docname="mechant.svg"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <defs\r
     id="defs1" />\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#ffffff"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#d1d1d1"\r
     inkscape:zoom="0.21733333"\r
     inkscape:cx="1171.0123"\r
     inkscape:cy="1875"\r
     inkscape:window-width="1920"\r
     inkscape:window-height="1017"\r
     inkscape:window-x="-"\r
     inkscape:window-y="-8"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="svg1" />\r
  <path\r
     fill-rule="nonzero"\r
     fill="#000000"\r
     fill-opacity="1"\r
     d="m 1179.4102,3716.9922 c -17.3907,-74.8555 -35.9414,-120.9844 -69.0313,-171.7774 -30.6094,-46.9726 -82.0898,-92.3789 -115.62499,-102 -9.15235,-2.625 -10.1875,-2.039 -14.46875,8.211 -2.53907,6.0703 -9.29688,27.6328 -15.01954,47.9101 -11.40625,40.4102 -25.3125,77.6563 -29,77.6563 -1.29296,0 -4.19531,-12.1133 -6.44921,-26.918 -6.85938,-45.0625 -25.47266,-111.832 -39.1875,-140.5703 -15.55469,-32.5898 -37.56641,-58.125 -60.26954,-69.918 -13.26171,-6.8906 -21.32421,-8.6875 -39.5039,-8.7929 -26.72266,-0.1563 -41.25781,5.8086 -60.45703,24.8164 -14.30469,14.164 -16.1836,14.9531 -16.28516,6.8594 -0.14062,-11.0079 -12.54687,-33.0313 -25.9375,-46.0235 -52.17578,-50.6328 -129.63672,-52.4961 -178.97266,-4.3008 -10.42578,10.1836 -21.48828,22.1836 -24.58203,26.6719 -5.5625,8.0625 -5.60937,7.9258 -4.17187,-11.4219 0.92187,-12.4336 11.65625,-51.1172 29.42578,-106.0351 62.49609,-193.1406 112.14844,-389.7969 155.69141,-616.6485 18.38671,-95.7812 35.44921,-222.3007 35.53125,-263.4609 l 0.0391,-17.1289 h -13.9961 c -32.30859,0 -86.14843,-21.6016 -135.19531,-54.2305 C 451.2891,2202.9102 384.21879,2073.8789 376.1602,1931.6914 l -2.07813,-36.6133 -92.28125,-185.9687 C 231.04687,1606.8203 167.20703,1474.6797 139.93359,1415.4609 76.816406,1278.4102 44.253906,1214.0586 17.546875,1173.6094 1.621094,1149.4805 -2.457031,1141.1289 1.300781,1140.3281 c 9.125,-1.9375 67.613281,12.9532 128.253909,32.6524 63.97656,20.789 114.91015,41.039 149.80859,59.5781 11.91406,6.3203 22.19141,10.9727 22.83203,10.332 0.64453,-0.6406 -6.85156,-34.75 -16.65625,-75.8008 -39.96484,-167.3398 -42.8164,-188.92964 -42.79297,-324.23043 0.0117,-82.66015 1.15625,-109.98046 5.83985,-139.60937 5.70703,-36.10156 23.48047,-112.28125 28.19531,-120.85156 2.13672,-3.87891 46.05469,69.26172 73.13281,121.80078 4.625,8.97265 11.3086,19.98047 14.85938,24.46094 l 6.44922,8.14843 7.98046,-17.9375 C 383.59375,709.01172 394.86328,683.32031 404.25,661.78125 442.76172,573.42969 496.08984,474 550.375,389.35156 c 9.78125,-15.26172 42.82031,-62.97265 73.42187,-106.04297 92.47657,-130.14843 130.32813,-180.25 132.13282,-174.89843 0.52734,1.57031 -3.46485,20.37109 -8.8711,41.78906 C 721.60937,251 718.21094,332 737.92187,367.83984 c 6.26954,11.39844 9.09766,13.5 19.33985,14.35157 15.53515,1.29687 20.58203,-1.5 82.62109,-45.72266 88.19531,-62.85938 122.33594,-82.6875 262.98829,-152.70703 50.1602,-24.97266 103.6289,-53.5 118.8008,-63.40234 40.8789,-26.64063 78.0976,-63.898442 97.6562,-97.757818 18.8321,-32.570312 19.3516,-32.203124 22.7032,16.007813 4.6406,66.839845 14.1093,105.718745 36.3984,149.460935 39.6289,77.75781 131.8516,149.3711 209.5,162.69141 26.8906,4.60937 41.2109,1.53906 61.5508,-13.20313 14.6797,-10.6289 35.6992,-47.6875 45.5781,-80.34765 10.5898,-35.05078 6.3516,-154.75 -7.5391,-212.890628 -0.9687,-4.039062 -0.3476,-7.339843 1.3711,-7.339843 5.0391,0 37.711,72.480471 57.3477,127.238281 9.9805,27.82031 29.4219,85.8125 43.2031,128.88281 29.3477,91.63672 46.9688,137.10938 72.8789,188.08985 19.2891,37.9375 83.0508,148.6289 89,154.48828 2.2188,2.1914 5.0313,0.57031 8.5195,-4.89844 19.4883,-30.47266 67.8711,-61.78125 106.2383,-68.76172 30.1407,-5.46875 31.6211,-2.66016 10.6211,20.03125 -22.9492,24.77734 -41.9375,63.57813 -49.4179,100.9375 -6.1602,30.76172 -5.543,104.87109 1.8984,228.39063 6.1016,101.17189 1.6406,283.24219 -8.4883,346.44139 l -1.9297,12.0078 35.5469,-20.2773 c 63.1797,-36.0625 178.2109,-81.5899 255.332,-101.082 17.0508,-4.3086 31.5782,-7.3204 32.3008,-6.6875 0.7188,0.6289 -6.7226,11.8085 -16.5312,24.8476 -42.1719,56.0508 -67.0704,92.3399 -95.8086,139.6328 -20.2422,33.3086 -84.3907,159.8594 -122.0118,240.6875 -34.7109,74.5703 -100.9687,208.5625 -127.4492,257.7422 l -23.3711,43.3789 8.5899,35.9297 c 16.332,68.2813 18.1992,120.6406 6.5,181.9883 -25.9492,136.0625 -111.0977,238.8125 -220.3477,265.8828 -25.1523,6.2305 -61.0625,6.8594 -84.3633,1.4805 -9.0976,-2.1016 -17.3789,-2.9805 -18.3984,-1.961 -4.8398,4.8282 8.7109,166.6875 23.0195,275.0703 17.5508,132.9375 27.0586,180.9141 70.461,355.5157 28.9687,116.5781 29.8789,119.8476 68.6992,247.1328 18.5117,60.7148 32.0703,110.7187 31.4101,115.8242 l -1.1796,8.9883 -4.2696,-8.5586 c -7.6523,-15.3281 -27.9804,-24.0664 -55.9804,-24.0664 -21.9102,0 -27.3789,1.3554 -49.5,12.2851 -29.7813,14.7227 -53.0586,38.4688 -58.8204,60.0157 -2.0898,7.7851 -4.5898,14.0351 -5.5585,13.8867 -0.9727,-0.1485 -9.1524,-9.2617 -18.1797,-20.2461 -20.6914,-25.1797 -39.4102,-35.2813 -69.2227,-37.336 -60.5976,-4.1835 -103.5703,40.6055 -123.25,128.4571 -9.0703,40.4883 -17.8281,95.0742 -17.8594,111.2929 -0.01,5.8321 -1.3086,10.6016 -2.8906,10.6016 -4.5898,0 -24.7695,-44.2031 -37.9805,-83.1992 -6.6875,-19.7383 -14.9375,-41.3984 -18.3476,-48.1367 l -6.1992,-12.2461 -11.3125,4.7226 c -43.5196,18.1836 -98.4805,81.2813 -124.461,142.8907 -14.9687,35.4882 -28.9883,82.4218 -37.3086,124.8437 -3.8711,19.7422 -8.1406,37.9609 -9.5,40.4883 -1.4882,2.8008 -5.8398,-9.9649 -11.1093,-32.625 z m 252.4492,-526.6289 c 3.8906,-143.336 6.4297,-182.332 19.8515,-305.0625 18.1993,-166.4805 34.3594,-261.8906 58.8282,-347.4727 14.3515,-50.1875 37.332,-110.7578 52.6015,-138.6679 5.3985,-9.8711 7.5391,-15.7383 4.7696,-13.0508 -6.1797,6.0117 -51.3204,90.9023 -63.0313,118.5195 -56.9883,134.5508 -90.5781,340.2422 -97.3281,596.0117 -3.1602,119.4805 5.8008,284.1328 17.1094,314.8203 1.3281,3.6055 2.7382,-17.6718 3.1289,-47.2812 0.3906,-29.6094 2.2304,-109.625 4.0703,-177.8164 z m -476.23831,206.4961 c 0,-2.168 2.36719,-23.0938 5.25782,-46.4922 4.29687,-34.7774 4.93359,-63.4024 3.49218,-156.7422 -1.72656,-111.3477 -5.07812,-159.8398 -20.32031,-293.6406 -22.0625,-193.7344 -77.27344,-378.336 -148.32812,-495.9727 -9.19532,-15.2304 -17.26172,-27.6914 -17.92188,-27.6914 -0.66016,0 3.71484,10.6485 9.72266,23.6602 36.0039,77.9804 83.30859,259.0898 109.29297,418.4375 28.6875,175.9179 46.22265,350.1601 50.98046,506.5312 1.26563,41.7227 3.54688,75.8594 5.06641,75.8594 1.51563,0 2.75781,-1.7773 2.75781,-3.9492 z m 707.76951,-177.1328 c -3.2617,-23.3282 -9.0117,-67.375 -12.789,-97.8789 -12.5821,-101.6602 -23.0625,-175.3789 -37.543,-264.2774 -7.8984,-48.4531 -16.0703,-100.207 -18.168,-115.0117 -9.4101,-66.6992 -7.3203,-3.0469 3.7891,115.0117 8.3789,88.9766 17.1406,155.0156 30.7617,231.7617 16.3399,92.086 35.4883,177.8164 38.8594,173.9766 0.5586,-0.6406 -1.6406,-20.2539 -4.9102,-43.582 z m -949.50779,-83.1953 c 16.32422,-93.6016 27.94922,-209.0079 31.05078,-308.3243 1.99219,-63.6757 -0.17187,-59.7031 -12.4375,22.836 -11.72656,78.9179 -28.77734,273.2695 -27.84375,317.375 0.34766,16.3008 1.54688,12.1523 9.23047,-31.8867 z m 514.98829,-8.211 c 22.2187,-19.0234 25.4883,-43.332 8.8008,-65.5586 -16.1133,-21.4648 -45.2617,-26.3398 -66.6133,-11.1367 -38.3867,27.3398 -18.0898,88.168 29.4414,88.168 12.3984,0 17.2617,-1.9649 28.3711,-11.4727 z m -13.7617,-365.2578 c 18.5625,-10.875 33.1406,-28.2422 45.1797,-53.793 8.6718,-18.3906 10.0625,-24.9882 9.9922,-47.4609 -0.1016,-30.0078 -6.9805,-48.8867 -26.5196,-72.7383 -42.4531,-51.8008 -123.2617,-33.3008 -142.8711,32.6914 -6.3203,21.2891 -6.3906,61.8086 -0.1523,82.8281 16.9101,56.9336 70.3711,84.2618 114.3711,58.4727 z m 110.8203,-103.7031 c 13.6289,-29.9688 22.25,-69.7578 22.4609,-103.5899 0.1602,-26.8281 -0.9687,-33.4804 -8.3906,-49.5078 -18.2109,-39.3125 -52.2109,-64.4336 -90.9414,-67.2031 -21.3672,-1.5273 -22.9492,-1.0977 -49.7695,13.5195 -34.418,18.7617 -47.1289,19.6836 -67.5703,4.8711 -45.0391,-32.6289 -88.5391,-30.6875 -124.0782,5.5196 -7.82419,7.9726 -15.46873,14.5 -16.98826,14.5 -3.83984,0 -17.79687,-31.668 -20.48047,-46.4688 -2.41796,-13.3203 0.16016,-28.5703 4.82422,-28.5703 1.61328,0 6.10938,9.5391 9.99219,21.1992 3.87891,11.6719 7.77344,21.2109 8.65234,21.2109 0.87891,0 8.46878,-5.789 16.85938,-12.8789 21.6719,-18.2617 43.0195,-26.9296 66.3906,-26.9296 16.3203,0 24.3086,2.3906 51.0313,15.1992 l 31.6875,15.1992 24.4297,-10.4688 c 55.5898,-23.8007 110.25,-13.0898 153.3711,30.0274 16.539,16.543 32.2812,44.8125 35.9101,64.4726 1.8594,10.0704 2.5899,10.8594 4.8516,5.3204 30.8398,-75.6719 66.789,-146.0704 97.039,-190.0313 23.0274,-33.4492 56.0079,-63.6211 79.6172,-72.8398 17.2735,-6.7383 24.9414,-7.4883 81.0625,-7.9297 66.7188,-0.5196 81.5196,-2.8907 114.4492,-18.2696 44.629,-20.8515 80.8985,-57.6914 105.6993,-107.3515 26.0507,-52.1797 34.0898,-90.3711 34,-161.5 -0.078,-57.7891 -3.25,-84.5899 -19.6993,-166.3985 -21.1679,-105.3515 -21.4609,-171.0312 -1.289,-290.3593 19.039,-112.6211 19.1992,-140.1211 1.2578,-213.6133 -25.0586,-102.6367 -62.8984,-173.5195 -126.4375,-236.8399 -57.4922,-57.289 -123.7109,-96.88668 -205.8594,-123.07809 C 1489.1992,921 1462.5703,916.85156 1422.0781,918.5 c -38.1992,1.57031 -54.3086,7.64062 -80.7578,30.46094 -25.0586,21.61718 -48.6406,78.78906 -76.5586,185.61716 l -7.6015,29.0703 -13.4297,-22.5898 c -30.0899,-50.6602 -95.6211,-94.6602 -190.2305,-127.7383 -85.77734,-29.99999 -150.83984,-40.78905 -244.69922,-40.62108 -76.19531,0.15234 -114.875,5.90234 -168.39062,25.01953 C 568,1023.6016 519.32422,1062.7109 494.09375,1115.3008 c -26.625,55.4805 -32.33984,108.2773 -29.84375,275.6875 1.03125,69.0898 1.22656,124.1523 0.43359,122.3515 -1.96875,-4.4609 -23.82422,-162.3203 -27.78125,-200.6484 -4.76953,-46.2617 -4.02734,-122.2812 1.50782,-154.0117 5.64453,-32.3594 24.76562,-89.2305 37.05468,-110.1992 11.125,-18.9805 42.41407,-56.30081 60.10157,-71.67191 56.8164,-49.38672 122.34375,-72.59765 223.70312,-79.23828 48.76953,-3.19922 56.28906,-4.39844 54.91016,-8.80859 -0.87891,-2.82031 -8.45703,-21.89063 -16.84375,-42.39063 -16.83985,-41.16015 -28.78516,-89.58984 -34.03516,-137.97265 -4.05859,-37.38672 -4.15625,-96.07813 -0.17578,-105.33985 2.27344,-5.29687 2.84766,-4.29687 3.03516,5.26172 0.32812,16.98828 18.11718,113.19141 27.84375,150.60938 13.96875,53.71093 46.52343,139.12109 53.20312,139.55078 1.30859,0.0898 17.79688,2.10937 36.63672,4.5 18.84375,2.3789 34.63672,4.00781 35.10156,3.62109 0.46485,-0.39062 -3.46875,-11.17187 -8.73828,-23.96094 -19.42969,-47.10937 -42.05859,-133.53906 -50.56641,-193.12109 -9.62109,-67.39062 -15.23828,-183.39844 -9.0664,-187.21094 1.4375,-0.88672 6.70312,25.8125 11.69922,59.35157 23.42968,157.30859 33.05078,203.39843 59.07422,283.01171 22.79296,69.73829 15.39062,61.48829 71.80859,80.06641 68.50395,22.57031 126.62505,52.65234 179.18355,92.76172 15.2188,11.6211 29,21.1211 30.6094,21.1211 1.6602,0 1.8711,-6.7109 0.4805,-15.5 -1.3399,-8.5195 -4.1289,-42.66016 -6.1992,-75.85157 -4.211,-67.67969 -13.3907,-162.50781 -23.0196,-237.94922 -3.5312,-27.6914 -5.8125,-50.96094 -5.0625,-51.71094 2.6329,-2.6289 21.5235,63.10157 27.9414,97.16016 10.8399,57.55078 13.3516,89.08203 15.2188,190.87109 1.582,86.71098 2.4922,99.51958 8.0195,112.32028 3.5235,8.1485 7.4102,13.1289 8.9102,11.418 1.4726,-1.6601 6.0625,-16.2383 10.1914,-32.3906 8.3789,-32.7578 21.4922,-68.63674 43.7187,-119.67971 23.7618,-54.58984 26.293,-68.78906 26.3008,-147.85937 0,-72.57813 -3.4883,-115.6875 -16.6289,-205.55078 -8.9492,-61.12891 -38.0312,-207.4375 -51.8906,-261.00782 -0.9414,-3.62109 0.7617,-2.21093 3.8008,3.16797 27.3593,48.26172 59,171.13282 77.75,301.89063 16.039,111.92969 17.7187,172.16015 6.4609,231.65234 -2.5508,13.45703 -4.6328,24.53906 -4.6328,24.62891 0,0.0781 10.9297,-5.17969 24.293,-11.69922 28.3984,-13.85156 65.2773,-22.72266 94.457,-22.72266 48,0 110.8711,16.92188 167.3633,45.05078 107.2695,53.40235 184.0195,129.41013 239.457,237.17193 23.1524,45 22.8399,41.4101 -4.0781,-47.3125 -30.4492,-100.32818 -36.75,-134.62896 -36.5625,-199.01958 0.1133,-39.21094 1.5117,-57.82031 5.1211,-68.50781 l 4.9609,-14.67188 2.2305,26.08984 c 6.1992,72.40235 17.6484,138.17969 34.539,198.40233 19.6016,69.8867 42.5704,175.5899 48.879,224.8672 3.621,28.2422 6.9531,74.7422 7.4101,103.3399 0.4609,28.6093 1.8399,50.2304 3.0703,48.0507 3.5391,-6.3007 21.5899,-120.7187 25.5508,-161.9414 5.9102,-61.6679 7.8984,-226.61716 3.4492,-287.11716 -7.3398,-99.88282 -29.6797,-190.25 -63.3789,-256.3711 l -14.832,-29.10937 -0.2188,22.83984 c -0.3007,31.21094 -5.9492,82.60938 -9.8007,89.21094 -2.2774,3.89062 -3.1875,-0.53125 -3.2696,-15.80078 -0.2773,-54.83985 -15.8906,-108.83985 -55.6484,-192.5 -28.582,-60.14063 -49.2813,-109.46875 -60.2617,-143.55078 -3.1797,-9.8711 -6.2383,-18.48828 -6.8086,-19.14844 -0.5703,-0.67188 -7.3516,4.20703 -15.0586,10.83984 -17.2422,14.8086 -53.8321,32.5586 -76.9922,37.34766 -24.9688,5.17187 -69.1797,4.40234 -95.8594,-1.66797 -44.8008,-10.19141 -83.2305,-29.62109 -128.289,-64.87109 -62.4219,-48.83985 -93.2305,-93.89063 -108.1211,-158.08985 -2.7305,-11.73828 -5.4883,-21.89062 -6.1485,-22.55078 -0.6523,-0.64844 -13.3906,5.44141 -28.2929,13.53906 -14.8985,8.10157 -59.3985,28.65235 -98.879,45.66016 -174.10152,75.03125 -254.00386,120.72266 -363.22261,207.74219 -27.48047,21.89844 -55.1836,41.98828 -61.56641,44.66015 -29.54687,12.33985 -66.04687,-8.82031 -87.19531,-50.55078 -8.75391,-17.26953 -18.125,-57.89062 -18.33985,-79.48047 l -0.13671,-14.00781 -7.89063,22.83985 c -17.38281,50.32031 -21.99219,78.25 -21.80859,132.13671 0.35937,104.04297 24.70312,220.21094 67.28906,321.10157 18.46875,43.76172 18.64453,44.32031 13.90625,44.32031 -4.48047,0 -25.25391,-32.60938 -41.46875,-65.08984 -23.32422,-46.73047 -51.96094,-131.92969 -66.39844,-197.55079 -7.16797,-32.58984 -12.86328,-95 -10.41406,-114.17968 l 2.08203,-16.32813 -13.63281,22.83985 c -31.75391,53.17968 -63.24219,126.92968 -97.83594,229.16015 -26.28906,77.66797 -34.85547,96.83985 -50.46484,112.91797 -14.48438,14.91016 -27.87891,15.98047 -41.14063,3.26953 l -9.02344,-8.64844 1.48047,11.09766 c 0.81641,6.10156 3.76953,34.58203 6.5625,63.29297 2.79297,28.71875 9.60938,82.30855 15.14844,119.08985 9.47266,62.8789 10.16406,73.918 11.5625,184.3398 0.82031,64.6094 0.75781,116.7305 -0.13281,115.8282 -1.8711,-1.8789 -9.66016,-66.4805 -17.10938,-141.9297 C 367.98047,1046.4102 353.51953,961.58984 326.375,865.69922 317.48437,834.30078 308.64844,802 306.74219,793.92187 c -5.32813,-22.52343 -1.75,137.27735 4.45703,199.01954 6.73047,66.99999 18.66406,146.99999 30.90625,207.17969 11.53125,56.6875 11.94922,58.207 46.29687,167.8281 58.89063,187.9727 70.33594,263.5508 66.24219,437.4102 -1.89844,80.4492 -1.42969,94.2695 4.52344,133.7617 17.55078,116.418 61.64453,200.2383 134.25781,255.2187 45.15234,34.1915 91.67969,50.8711 151.75391,54.4219 49.69922,2.9297 58.85156,6.5196 89.80078,35.168 21.3789,19.8008 68.35547,80.6797 107.24609,138.9805 35.01563,52.5 72.19534,128.8711 92.39454,189.7812 l 17.25,52.0391 1.9375,-28.1211 c 1.4531,-21.0391 4.1211,-32.5899 10.6406,-45.9102 22.8399,-46.6679 83.3594,-77.1679 134.5508,-67.8086 54.8984,10.0313 93.3086,47.8985 105.3203,103.8399 8.9883,41.8789 10.9414,49.7578 12.3399,49.7578 0.8086,0 4.9804,-7.707 9.2695,-17.1289 z m -159.8594,-285.9375 c -29,-7.5508 -63.1211,-34.8516 -80.9414,-64.7617 -8.3594,-14.0196 -11.707,-17.1016 -16.9375,-15.6094 -3.5898,1.0195 -23.7812,3.5195 -44.8711,5.539 -21.082,2.0313 -38.33202,4.9297 -38.33202,6.4493 0,7.6406 -7.60937,1.1523 -13.01953,-11.0977 -23.05078,-52.1719 2.92187,-130.7226 50.54295,-152.8516 18.8594,-8.7617 33.6602,-7.8398 51.0469,3.1915 24.3633,15.4375 35.1211,39.8789 41.832,95.0078 1.8594,15.25 5.6211,34.3398 8.3477,42.4218 6.3515,18.75 24.8828,44.0586 38.3711,52.3907 17.582,10.8593 24.1211,11.1484 38.332,1.75 25.8477,-17.1016 42.2969,-49.3321 48.6172,-95.2032 4.793,-34.75 11.6328,-54.1992 25.4297,-72.2773 l 11.5508,-15.1211 -8.3985,-7.2187 c -16.9101,-14.543 -1.1601,-14.9415 32.7305,-0.8399 41.1484,17.1367 59.3906,41.7969 68.1992,92.2383 5.211,29.7891 1.8594,69.6601 -7.3594,87.4609 -5.0312,9.7383 -5.6992,10.0782 -8.1914,4.0977 -1.5,-3.5664 -5.6211,-13.4492 -9.1601,-21.9375 l -6.4297,-15.4414 -15.6406,6.9219 c -15.9883,7.0781 -45.8203,9.75 -58.1602,5.1992 -5.75,-2.1094 -7.2187,-0.4492 -11.0703,12.5898 -6.1602,20.8711 -22.0469,40.7305 -39.418,49.2578 -16.5,8.1016 -42.4023,11.6602 -57.0703,7.8438 z m 158.2383,-113.9922 c 23.1133,-16.668 24.582,-48.5195 3.2227,-69.8906 -16.211,-16.1993 -26.4297,-16.2188 -41.6524,-0.09 -19.6992,20.8906 -26.3789,49.5 -15.2578,65.3711 9.8594,14.0899 37.2891,16.4414 53.6875,4.6094 z m -255.8789,1.1797 c 8.5508,-3.5781 13.1406,-8.6094 18.1406,-19.9102 7.4688,-16.8789 6.4805,-30.4375 -3.6601,-50.1992 -17.2813,-33.6992 -45.5586,-37.0781 -64.9688,-7.7812 -17.1211,25.8515 -16.2812,46.3203 2.6484,64.4531 7.1993,6.8984 26.3399,16.6562 35.4688,18.0781 0.5,0.078 6.0703,-2.0117 12.3711,-4.6406 z m -385.56251,-65.1289 c -22.03125,-5 -47.78907,-17.0391 -69.1836,-32.3399 -17.65234,-12.6211 -45.46875,-49.0195 -60.24609,-78.832 -17.97656,-36.2695 -17.69922,-41.1367 0.93359,-16.3086 48.14453,64.1406 95.76953,97.1406 167.28125,115.8906 18.02735,4.7188 27.52735,8.6602 25.58594,10.5977 -5.19141,5.1914 -43.3125,5.7812 -64.37109,0.9922 z m 926.86331,-3.4024 c -37.211,-8.0976 -88.6914,-33.207 -105.9492,-51.6797 -5.2305,-5.5976 -8.9727,-10.707 -8.3204,-11.3593 0.6485,-0.6485 14.1602,3.2226 30.0196,8.6015 66.8593,22.6602 132.289,27.9805 175.6679,14.3086 41.6016,-13.1094 92.711,-47.6289 120.6914,-81.5078 13.4493,-16.2812 15.8204,-12.6211 5.3204,8.1797 -44.0704,87.3086 -130.4805,132.3984 -217.4297,113.457 z m -395.0196,-32.7187 c 5.2696,-20.5313 8.2383,-114.668 4.8399,-153.7305 -3.6719,-42.0898 -2.0195,-105.2695 2.9805,-114.1992 1.8085,-3.2383 6.1484,5.9609 13.5703,28.8086 6,18.4609 13.3398,39.3203 16.3203,46.3633 l 5.4062,12.789 7.3711,-11.9218 c 18.8906,-30.5586 127.1602,-124.4883 232.0313,-201.2969 167.7578,-122.8633 214.2695,-150.0508 256.6797,-150.0508 22.6914,0 33.6992,9.3789 33.6992,28.7187 0,17.2813 -12.3008,33.4102 -44.0508,57.7383 -14.0469,10.7735 -30.8086,24.4922 -37.2383,30.5117 -11.1289,10.3907 -11.1914,10.6016 -1.5,4.1407 24.6914,-16.4297 93.0586,-49.3321 102.5078,-49.3321 15.8516,0 10.9922,9.3829 -11.5781,22.3516 -124.8906,71.7813 -165.8711,100.8984 -235.0508,167.0313 -24.0976,23.039 -53.5586,48.8398 -65.4687,57.3398 l -21.6524,15.4492 14.25,4.1992 c 26.711,7.8907 61.711,11.8789 88.2305,10.0586 67.9727,-4.6562 113.3828,-51.289 135.0117,-138.6562 4.1602,-16.7813 9.3086,-32.6133 11.4414,-35.1914 3.9492,-4.7617 35.1172,-15.5117 56.7188,-19.5586 l 11.8984,-2.2305 -1.9375,35.457 c -4.4805,82.4414 -14.3398,131.7618 -34.8125,174.1329 -45.7305,94.6601 -168.3984,138.3593 -277.6992,98.9296 -42.5,-15.332 -90.9688,-54.0898 -113.1797,-90.5312 -6.9883,-11.4688 -8.1602,-12.1914 -11.2617,-6.8984 -26.3164,44.8281 -66.0664,65.5468 -101.8985,53.1093 l -13.5898,-4.7304 0.4883,42.7617 c 0.5312,46.457 -4.6875,72.5078 -17.4883,87.2265 -6,6.9024 -6.5391,7.0313 -5.0391,1.211 z M 1629.5,2047.7383 c 14.4297,-5.1289 33.1094,-13.3399 41.5,-18.2578 19.5117,-11.4414 51.1602,-40.8086 59.2109,-54.9492 5.2696,-9.2696 4.0977,-8.5625 -7.6992,4.6484 -16.4023,18.3789 -46.2109,40.1406 -73.5703,53.7305 -26.3828,13.1093 -37.6016,16.4609 -73.6719,22.0312 l -30.7304,4.7383 29.3593,-1.3086 c 21.461,-0.9609 36.4297,-3.8203 55.6016,-10.6328 z m -896.38281,28.293 c -45.44141,-11.1719 -85.6875,-31.5196 -118.67969,-60 -33.39453,-28.8399 -64.13672,-85.75 -77.66016,-143.793 -6.39843,-27.457 -18.75781,-103.457 -17.09375,-105.1172 2.60938,-2.6094 49.9961,10 59.69532,15.8789 10.66015,6.4688 11.28515,7.7695 28.79296,59.8711 11.84766,35.2695 24.22657,56.1289 44.92188,75.6992 45.03516,42.5899 113.66797,55.7695 180.57031,34.6797 l 17.51953,-5.5195 -16.6914,-9.1289 c -21.45313,-11.7305 -38.53125,-25.7618 -82.77735,-68.0118 -59.21875,-56.5585 -87.95703,-76.1406 -191.6914,-130.6289 -31.85157,-16.7421 -57.91407,-31.6601 -57.91407,-33.1718 0,-1.5078 3.64454,-4.1289 8.10157,-5.8203 11.37109,-4.3282 33.42968,3.3007 85.69922,29.621 23.77734,11.9688 43.23046,21.25 43.23046,20.6094 0,-0.6406 -20.92187,-14.9297 -46.49218,-31.75 -48.83594,-32.1406 -58.57422,-40.5195 -64.14063,-55.2109 -4.17578,-11.0195 -0.77344,-20.8164 11.04688,-31.8086 7.96093,-7.3984 11.40625,-8.1602 37.05078,-8.1602 27.66797,0 29.08984,0.4024 65.80078,18.211 41.65234,20.2109 87.77734,48.4101 182.71094,111.7109 117.4414,78.3203 193.72261,143.1367 237.75391,202.0391 6.3594,8.5078 12.6484,14.3789 13.9687,13.0508 1.3204,-1.3399 7.4805,-17.5821 13.6915,-36.0899 6.1992,-18.5195 12,-34.3906 12.8789,-35.2695 3.8593,-3.8633 5.5898,45.0976 2.3711,67.2969 -5.6602,39.121 -25.5508,61.9609 -53.961,61.9804 -18.6719,0.02 -33.9609,-9.3906 -48.2305,-29.6679 -6.81636,-9.6915 -13.42183,-17.8516 -14.67964,-18.1329 -1.26172,-0.2773 -9.63282,8.0899 -18.60547,18.6016 -29.4961,34.5313 -90.2461,70.5 -135.14844,80.0195 -29.51172,6.2618 -71.875,5.4297 -102.03906,-1.9882 z m 101.98047,-32.9024 c 23.76562,-5.9805 58.53515,-20.0781 58.53515,-23.75 0,-0.6484 -8.82031,2.3711 -19.60156,6.7305 -10.78125,4.3515 -30.85156,10.789 -44.59766,14.3008 -23.10937,5.9101 -32.80468,9.6406 -25.05859,9.6406 1.75,0 15.57812,-3.1094 30.72266,-6.9219 z M 1060.0313,1744.5508 C 999.94531,1685.6406 863.01172,1611.5586 626.08984,1509.7891 l -17.9414,-7.711 13.50781,-0.078 c 43.24219,-0.25 165.47266,47.5 279.54297,109.1914 76.83984,41.5586 139.81248,86.8477 164.99218,118.668 9.5899,12.1211 21.4492,36.6914 17.3281,35.9101 -1.2578,-0.2382 -11.8281,-9.789 -23.4882,-21.2187 z m 159.9375,-3.2813 c 0.2109,-35.8906 25.6015,-61.6797 92.8007,-94.2382 138.8203,-67.25 229.6524,-108.0704 272.2188,-122.3321 34.3125,-11.5 46.6328,-12.7187 28.0117,-2.789 -7.1406,3.8203 -33.5508,18.7695 -58.6797,33.2187 -65.8789,37.9024 -101.832,57.1094 -182.6992,97.6406 -84.543,42.3516 -116.9023,62.3594 -136.9922,84.6993 l -14.7305,16.3906 z m -37.5899,-133.4297 -9.7891,-4.4804 14.9102,-0.1485 c 32.9805,-0.3203 66.8398,-17.4101 106.6289,-53.8125 23.25,-21.2773 27.6211,-17.4101 9,7.9532 -31.1601,42.4375 -87.168,65.8672 -120.75,50.4882 z M 1124.4219,1479 c -18.8633,-4.75 -60.6602,-27.5703 -57.0821,-31.1484 0.6407,-0.6407 10.629,2.707 22.211,7.4375 29.9609,12.2304 72.0078,12.0625 109.1406,-0.461 14.3594,-4.8281 29.5391,-11.0195 33.7305,-13.7383 10.957,-7.1015 12.9375,-2.5507 4.9297,11.3086 -11.1602,19.293 -30.8399,27.4922 -68.961,28.6914 -17.4297,0.5508 -37.2187,-0.3906 -43.9687,-2.0898 z M 432.74609,1028.1016 c 1.48047,-42.71098 8.55469,-119.91019 14.42578,-157.51176 l 4.07813,-26.10156 2.34766,14.69141 c 4.03906,25.23047 3.04296,77.64843 -2.16407,113.76953 -6.52734,45.28128 -14.57812,86.23048 -17.57812,89.41018 -1.3125,1.3906 -1.8125,-14.0196 -1.11328,-34.2578 z m 22.1211,8.8867 c 19.54687,-57.41018 40.63672,-145.94924 56.73437,-238.16799 7.20703,-41.28125 14.07813,-79.85156 15.27735,-85.71875 4.67578,-22.9414 7.85937,-12.38281 7.85937,26.07813 0,91 -20.74219,193.60937 -52.28906,258.66015 -12.03516,24.80856 -32.67578,54.10936 -27.58203,39.14846 z m 685.09371,-71.77736 c -16.6601,-35.24219 -45.4726,-111.69922 -60.8515,-161.5 -19.3594,-62.65235 -88.47659,-329.74219 -85.9844,-332.23047 2.48828,-2.49219 23.8164,47.35937 39.3047,91.84765 21.5703,61.96094 46.4805,146.8125 74.8789,255.0625 13.6523,52.03907 30.7227,111.9375 37.9297,133.09766 7.2109,21.17188 12.4531,40.26172 11.6406,42.42188 -0.8203,2.16015 -8.4297,-10.75 -16.918,-28.69922 z M 593.96875,876.30859 c -8.24609,-15.77734 -17.69922,-78.3789 -10.6875,-70.80859 2.85156,3.07812 19.97266,65.41016 19.97266,72.69922 0,5.76953 -5.90235,4.57031 -9.28516,-1.89063 z m 394.95312,-11.4375 c -9.93359,-11.96093 -25.72656,-69.1914 -20.0664,-72.6914 2.60937,-1.6211 10.59375,17.80078 20.83594,50.67968 3.07421,9.8711 6.16406,19.78125 6.86718,22.01954 1.64844,5.28125 -3.26172,5.26953 -7.63672,0 z M 701.69922,804.51953 C 687.97656,768.75 684.83203,755.64062 685.04687,735.19141 c 0.14844,-14.28125 0.79688,-16.42188 3.1875,-10.46094 2.51954,6.26953 19.28907,73.1289 24.51563,97.73828 3.04687,14.35156 -1.49219,6.98047 -11.05078,-17.94922 z m 833.41018,10.10156 c -1.0781,-6.90234 -4.9805,-47.05078 -8.668,-89.21093 -7.0117,-80.14063 -14.6914,-136.42969 -27.0312,-198.21875 -4.0391,-20.17969 -6.4805,-36.70313 -5.4297,-36.70313 3.8281,0 26.2812,57.90234 34.1601,88.08984 20.3477,77.92188 28.1992,172.8711 18.4883,223.35157 -4.7187,24.4414 -8.9687,29.1289 -11.5195,12.6914 z m -74.8906,-54.14062 c -1.0274,-7.62891 -2.6485,-25.60938 -3.6094,-39.96875 l -1.75,-26.10156 5.3906,11.41796 c 6.2188,13.19141 10.3594,68.51172 5.1211,68.51172 -1.8125,0 -4.1328,-6.23047 -5.1523,-13.85937 z m 254.5195,-97.87891 c -1.8594,-35.38281 -7.5195,-76.32031 -18.3594,-132.58203 -4.6875,-24.34766 -4.2891,-26.26953 3.1406,-15.05859 7.6211,11.5 20.8516,50.78906 26.1524,77.64843 7.039,35.64063 2.707,109.96094 -6.4024,109.96094 -1.3398,0 -3.3789,-17.99219 -4.5312,-39.96875 z m -38.0586,-36.71094 c 0,-33.67187 0.8086,-41.26953 4.0703,-38.01171 2.75,2.74218 4.0781,15.21093 4.0781,38.01171 0,22.78907 -1.3281,35.26954 -4.0781,38.00782 -3.2617,3.26172 -4.0703,-4.32813 -4.0703,-38.00782 z M 417.36719,1744.5586 c -14.4336,-199.7891 -75.11328,-338.3398 -190.38672,-434.668 -39.04688,-32.6406 -130.617189,-91.7304 -135.132814,-87.2187 -1.113281,1.1172 2.4375,6.7695 7.886719,12.5781 28.312495,30.1602 113.593745,153.4102 160.898435,232.5 49.9375,83.5195 125.22656,236.8789 148.55078,302.6211 4.95313,13.9492 9.60938,24.7695 10.34375,24.0273 0.73828,-0.7265 -0.23437,-23.1601 -2.16015,-49.8398 z m 1481.08201,10.2227 c 24.5899,-73 102.6211,-221.3321 167.3594,-318.1094 46.8203,-69.9922 93.2305,-129.211 136.9805,-174.7735 26.1914,-27.2773 31.7812,-35.8086 16.3125,-24.8984 -4.9414,3.4883 -16.6016,10.1797 -25.9219,14.8711 -29.8399,15.0391 -102.8594,66.0195 -132.3008,92.3789 -77.0976,69.0391 -139.5898,174.3906 -166.0898,280.0195 -5.0703,20.1719 -6.9493,41.3203 -8.2891,92.9922 -1.0586,40.6797 -0.5586,65.6094 1.2617,63.6172 1.6485,-1.7891 6.4571,-13.5391 10.6875,-26.0976 z m 0,0"\r
     id="path1"\r
     inkscape:highlight-color="#aaaaaa"\r
     style="fill:#ffffff;fill-opacity:1" />\r
</svg>\r
`,L6="#87CEFA",z6="#FF0000";function om(r){const e=r.match(/viewBox\s*=\s*"([^"]+)"/i),t=r.match(/<path[^>]*\sd="([^"]+)"[^>]*>/i);if(!e||!t)throw new Error("Cannot parse SVG path/viewBox from source.");const s=t[0].match(/transform="([^"]+)"/i);return{d:t[1],transform:s?s[1]:void 0,viewBox:e[1]}}const F6=om(R6),j6=om(I6);function B6(r){return r==="player"?L6:z6}function $6(r){const e=r==="player"?F6:j6,t=B6(r),s=e.transform?` transform="${e.transform}"`:"";return[`<svg viewBox="${e.viewBox}" xmlns="http://www.w3.org/2000/svg" style="background:none">`,"<g>",`<path d="${e.d}"${s} fill="${t}" />`,"</g>","</svg>"].join("")}function wh(r){const e=$6(r);return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}const am="token-player-svg",lm="token-enemy-svg";let Cl=null;async function D6(){if(Cl)return Cl;const r=[{alias:am,src:wh("player")},{alias:lm,src:wh("enemy")}];return Cl=(async()=>{for(const e of r)As.add(e);await As.load(r.map(e=>e.alias))})(),Cl}function O6(r){const e=J.useRef(null),t=J.useRef(null),s=J.useRef(null),o=J.useRef(null),a=J.useRef(null),u=J.useRef(null),c=J.useRef(typeof r.zoom=="number"?r.zoom:1),d=J.useRef({x:typeof r.panX=="number"?r.panX:0,y:typeof r.panY=="number"?r.panY:0});return c.current=typeof r.zoom=="number"?r.zoom:1,d.current={x:typeof r.panX=="number"?r.panX:0,y:typeof r.panY=="number"?r.panY:0},J.useEffect(()=>{var f;(f=u.current)==null||f.call(u)},[r.zoom,r.panX,r.panY]),J.useEffect(()=>{if(!r.enabled||!r.containerRef.current||e.current)return;const f=new Ip;e.current=f;let m=!1,y=null,x=null,v=!1;return(async()=>{if(await f.init({width:Bo,height:Tl,background:Lg,antialias:!0}),v=!0,await D6(),m)return;const S=r.containerRef.current;if(!S)return;S.prepend(f.canvas);const _=new yn;f.stage.addChild(_);const T=new Bi;_.addChild(T),(()=>{T.clear();for(let F=0;F<ar;F++)for(let U=0;U<kr;U++){if(!Tr(U,F))continue;const G=Pn(U,F),Y=ht,q=ht*.5,me=[G.x,G.y-q/2,G.x+Y/2,G.y,G.x,G.y+q/2,G.x-Y/2,G.y],te=(U+F)%2===0;T.poly(me).fill({color:te?1381666:1908016,alpha:1})}})();const E=new Bi;_.addChild(E),s.current=E;const P=new yn;_.addChild(P),t.current=P;const N=new yn;_.addChild(N),o.current=N;const D=()=>{const F=r.containerRef.current;if(!F)return;const U=Math.max(1,F.clientWidth),G=Math.max(1,F.clientHeight);f.renderer.resize(U,G);const Y=Math.min(U/Bo,G/Tl),q=c.current,me=Y*q,te=(U-Bo*me)/2+d.current.x,we=(G-Tl*me)/2+d.current.y;_.scale.set(me),_.position.set(te,we),a.current={scale:me,offsetX:te,offsetY:we};const Ze=f.canvas;Ze.style.width="100%",Ze.style.height="100%",Ze.style.display="block"};y=D,u.current=D,D(),x=new ResizeObserver(()=>D()),x.observe(S),window.addEventListener("resize",D)})(),()=>{m=!0,x&&x.disconnect(),y&&window.removeEventListener("resize",y),v&&e.current&&e.current.destroy(!0),e.current=null,t.current=null,s.current=null,o.current=null,a.current=null,u.current=null}},[r.enabled,r.containerRef]),{appRef:e,tokenLayerRef:t,pathLayerRef:s,speechLayerRef:o,viewportRef:a}}function N6(r){J.useEffect(()=>{const e=r.pathLayerRef.current;if(!e)return;e.clear();const t=r.effectSpecs.map(a=>{switch(a.kind){case"circle":return E0(a.id,r.player.x,r.player.y,a.radius??1);case"rectangle":return Fg(a.id,r.player.x,r.player.y,a.width??1,a.height??1);case"cone":return R0(a.id,r.player.x,r.player.y,a.range??1,a.direction??"right");default:return{id:a.id,type:"circle",cells:[]}}});for(const a of t)for(const u of a.cells){const c=Pn(u.x,u.y),d=ht,f=ht*.5,m=[c.x,c.y-f/2,c.x+d/2,c.y,c.x,c.y+f/2,c.x-d/2,c.y],y=a.type==="circle"?3447003:a.type==="rectangle"?3066993:15158332;e.poly(m).fill({color:y,alpha:.45})}if(r.showVisionDebug){const a=[r.player,...r.enemies];for(const u of a){const c=I0(u);for(const d of c.cells){const f=Pn(d.x,d.y),m=ht,y=ht*.5,x=[f.x,f.y-y/2,f.x+m/2,f.y,f.x,f.y+y/2,f.x-m/2,f.y],v=u.type==="player"?2719929:12597547;e.poly(x).fill({color:v,alpha:u.type==="player"?.25:.2})}}}const s=[r.player,...r.enemies];for(const a of s){const u=Pn(a.x,a.y),c=ht,d=ht*.5,f=[u.x,u.y-d/2,u.x+c/2,u.y,u.x,u.y+d/2,u.x-c/2,u.y],m=a.type==="player"?3066993:15158332;e.poly(f).fill({color:m,alpha:.2})}if(r.selectedTargetId){const a=r.enemies.find(u=>u.id===r.selectedTargetId);if(a){const u=Pn(a.x,a.y),c=ht,d=ht*.5,f=[u.x,u.y-d/2,u.x+c/2,u.y,u.x,u.y+d/2,u.x-c/2,u.y];e.poly(f).fill({color:3447003,alpha:.6})}}if(r.selectedPath.length>0){const a=r.selectedPath[r.selectedPath.length-1],u=Pn(a.x,a.y),c=ht,d=ht*.5,f=[u.x,u.y-d/2,u.x+c/2,u.y,u.x,u.y+d/2,u.x-c/2,u.y];e.poly(f).fill({color:15844367,alpha:.2})}for(const a of r.enemies){if(!a.plannedPath||a.plannedPath.length===0)continue;const u=a.plannedPath,c=u[0],d=Pn(c.x,c.y);e.setStrokeStyle({width:3,color:15158332,alpha:.9}),e.moveTo(d.x,d.y);for(const f of u.slice(1)){const m=Pn(f.x,f.y);e.lineTo(m.x,m.y)}e.stroke()}if(r.selectedPath.length===0)return;e.setStrokeStyle({width:6,color:15844367,alpha:1});const o=Pn(r.player.x,r.player.y);e.moveTo(o.x,o.y);for(const a of r.selectedPath){const u=Pn(a.x,a.y);e.lineTo(u.x,u.y)}e.stroke()},[r.pathLayerRef,r.player,r.enemies,r.selectedPath,r.effectSpecs,r.selectedTargetId,r.showVisionDebug])}function W6(r){J.useEffect(()=>{const e=r.speechLayerRef.current;if(!e)return;e.removeChildren();const t=[r.player,...r.enemies],s=new Map(r.speechBubbles.map(f=>[f.tokenId,f])),o=6,a=140,u=ht*1,c=[];for(const f of t){if(f.type!=="enemy"||Ut(f))continue;const m=s.get(f.id);if(!m||!m.text.trim())continue;const y=Pn(f.x,f.y),x=new yn,v=new Bi;v.beginFill(16777215,.92);const b=new E6(m.text,{fontFamily:"Arial",fontSize:11,fill:0,align:"center",wordWrap:!0,wordWrapWidth:a-10}),S=Math.min(a,b.width+10),_=b.height+8;v.drawRoundedRect(-S/2,-_,S,_,7),v.endFill(),b.x=-b.width/2,b.y=-_+4,x.addChild(v),x.addChild(b);const T=y.x+ht*.05,M=y.y-u;x.x=T,x.y=M,e.addChild(x),c.push({x:T-S/2,y:M-_,width:S,height:_,view:x})}c.sort((f,m)=>f.y-m.y);const d=[];for(const f of c){let m=f.y,y=0;const x=(b,S,_)=>{const T=b.x,M=b.y,E=b.x+b.width,P=b.y+b.height,N=S,D=_,F=S+f.width,U=_+f.height;return T<F&&E>N&&M<U&&P>D};for(;y<20;){const b=d.find(S=>x(S,f.x,m));if(!b)break;m=b.y-f.height-o,y+=1}const v=m-f.y;v!==0&&(f.view.y+=v,f.y=m),d.push(f)}},[r.speechLayerRef,r.player,r.enemies,r.speechBubbles])}function U6(r){J.useEffect(()=>{const e=r.tokenLayerRef.current;if(!e)return;e.removeChildren();const t=[r.player,...r.enemies];for(const s of t){const o=new yn;if(!Ut(s)){const d=new Bi;d.beginFill(0,.4),d.drawEllipse(0,0,ht*.4,ht*.15),d.endFill(),o.addChild(d)}const a=s.type==="player"?am:lm,u=Is.from(a);u.anchor.set(.5,1),u.width=ht*.9,u.height=ht*.9,Ut(s)?(u.rotation=Math.PI/2,u.alpha=.7):(u.rotation=0,u.alpha=1),o.addChild(u);const c=Pn(s.x,s.y);o.x=c.x+ht*.05,o.y=c.y,e.addChild(o)}},[r.tokenLayerRef,r.player,r.enemies])}function H6(r){return C.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:16,boxSizing:"border-box"},children:[C.jsx("h1",{style:{marginBottom:8},children:"Prparation du combat"}),C.jsx("p",{style:{marginBottom:16,fontSize:13,maxWidth:480,textAlign:"center"},children:"Configurez le combat avant de lancer la grille : nombre d'ennemis, puis dmarrez pour effectuer les jets d'initiative et entrer en mode tour par tour."}),C.jsxs("div",{style:{padding:16,borderRadius:8,background:"#141421",border:"1px solid #333",minWidth:260,display:"flex",flexDirection:"column",gap:12},children:[C.jsxs("label",{style:{fontSize:13},children:["Nombre d'ennemis :",C.jsx("input",{type:"number",min:1,max:8,value:r.configEnemyCount,onChange:e=>r.onChangeEnemyCount(Math.max(1,Math.min(8,Number(e.target.value)||1))),style:{marginLeft:8,width:60,background:"#0f0f19",color:"#f5f5f5",border:"1px solid #333",borderRadius:4,padding:"2px 4px"}})]}),C.jsxs("p",{style:{fontSize:11,color:"#b0b8c4",margin:0},children:["Taille de la carte : actuellement fixe (",r.gridCols," x ",r.gridRows,"). Un redimensionnement dynamique demandera une refonte de boardConfig.ts."]}),C.jsx("button",{type:"button",onClick:()=>{if(r.enemyTypeCount===0){r.onNoEnemyTypes();return}r.onStartCombat()},style:{marginTop:8,padding:"6px 12px",background:"#2ecc71",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontWeight:600,fontSize:13},children:"Lancer le combat"})]})]})}function G6(r){return C.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333"},children:[C.jsx("h2",{style:{margin:"0 0 8px"},children:"tat du combat"}),C.jsxs("div",{children:[C.jsx("strong",{children:"Round :"})," ",r.round," | ",C.jsx("strong",{children:"Phase :"})," ",r.phase==="player"?"Joueur":"Ennemis"]}),C.jsxs("div",{style:{fontSize:12,marginTop:4},children:[C.jsx("strong",{children:"Initiative PJ :"})," ",r.playerInitiative??"en cours..."]}),C.jsxs("div",{children:[C.jsx("strong",{children:"Nom :"})," ",r.sampleCharacter.nom.nomcomplet]}),C.jsxs("div",{children:[C.jsx("strong",{children:"Niveau :"})," ",r.sampleCharacter.niveauGlobal," |"," ",C.jsx("strong",{children:"Classe :"})," ",r.sampleCharacter.classe[1].classeId]}),C.jsxs("div",{children:[C.jsx("strong",{children:"PV :"})," ",r.player.hp," / ",r.player.maxHp]}),C.jsxs("div",{children:[C.jsx("strong",{children:"CA :"})," ",r.sampleCharacter.CA]}),C.jsxs("div",{style:{marginTop:8},children:[C.jsx("strong",{children:"Caracs :"})," FOR ",r.sampleCharacter.caracs.force.FOR," | DEX"," ",r.sampleCharacter.caracs.dexterite.DEX," | CON"," ",r.sampleCharacter.caracs.constitution.CON]}),C.jsxs("div",{style:{marginTop:8,fontSize:12},children:[C.jsx("strong",{children:"Trajectoire :"})," ",r.selectedPath.length===0?"aucune":`(${r.player.x}, ${r.player.y}) -> `+r.selectedPath.map(e=>`(${e.x}, ${e.y})`).join(" -> ")]}),C.jsxs("div",{style:{marginTop:8,fontSize:11,opacity:.85},children:[C.jsx("strong",{children:"IA ennemis (debug) :"}),C.jsxs("div",{children:["Dernier appel :"," ",r.aiLastState?`round ${r.aiLastState.round}, phase ${r.aiLastState.phase}`:"aucun"]}),C.jsxs("div",{children:["Dcisions reues :"," ",r.aiLastIntents===null?"n/a":`${r.aiLastIntents.length} (fallback: ${r.aiUsedFallback?"oui":"non"})`]}),r.aiLastError&&C.jsxs("div",{children:["Erreur : ",r.aiLastError]})]})]})}function V6(r){const{enemies:e,player:t,validatedAction:s}=r;return C.jsxs("section",{style:{padding:"8px 12px",background:"#151524",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[C.jsx("h2",{style:{margin:"0 0 4px"},children:"Ennemis"}),C.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Chaque ennemi est une entit propre. Capacits IA : dplacement, attaque au contact, attente si aucune option."}),C.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:e.map(o=>{var a;return C.jsxs("div",{style:{background:"#0f0f19",border:"1px solid #2a2a3a",borderRadius:8,padding:"8px 10px",display:"flex",flexDirection:"column",gap:6},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[C.jsx("strong",{style:{color:"#f5f5f5"},children:o.id}),C.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["(",o.x,",",o.y,") | PV ",o.hp," / ",o.maxHp," ",o.aiRole?`(role: ${o.aiRole})`:""]})]}),C.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:r.capabilities.map(u=>C.jsx("span",{style:{background:u.color,color:"#0b0b12",borderRadius:4,padding:"2px 6px",fontSize:11,fontWeight:700},children:u.action.toUpperCase()},`${o.id}-${u.action}`))}),C.jsxs("div",{style:{fontSize:12,color:"#d0d6e0"},children:["Ce qu'il peut faire : ",r.capabilities.map(u=>u.label).join(" | ")]}),s&&((a=s.targeting)==null?void 0:a.target)==="enemy"&&(()=>{const u=r.validateEnemyTargetForAction(s,o,t,[t,...e]),c=u.ok,d=r.selectedTargetId===o.id;return C.jsx("button",{type:"button",onClick:()=>{if(!c){r.onLog(u.reason||`Cible ${o.id} invalide pour ${s.name}.`);return}r.onSelectTargetId(o.id),r.onSetTargetMode("none"),r.onLog(`Cible selectionnee: ${o.id}.`)},disabled:!c,style:{marginTop:6,alignSelf:"flex-start",padding:"4px 8px",fontSize:11,borderRadius:4,border:"none",cursor:c?"pointer":"default",background:c?"#3498db":"#555",color:"#fff",opacity:d?1:.9},children:d?"Cible actuelle":"Cibler avec l'action valide"})})(),C.jsxs("div",{style:{fontSize:12,color:"#9cb2ff"},children:["Dernire dcision IA : ",r.describeEnemyLastDecision(o.id)]})]},o.id)})})]})}function Y6(r){return C.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:C.jsxs("div",{style:{background:"#141421",borderRadius:12,border:"1px solid #f1c40f",padding:"24px 32px",maxWidth:360,textAlign:"center",boxShadow:"0 0 24px rgba(0,0,0,0.6)"},children:[C.jsx("h2",{style:{margin:"0 0 8px"},children:"Game Over"}),C.jsx("p",{style:{fontSize:13,margin:"0 0 16px"},children:"Le hros est tomb et aucun alli n'est en mesure de continuer."}),C.jsx("button",{type:"button",onClick:r.onRestart,style:{padding:"6px 12px",background:"#e67e22",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:600},children:"Recommencer le combat"})]})})}function X6(r){return C.jsxs("div",{style:{marginBottom:8,padding:"6px 10px",background:"#111322",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[C.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["Ordre d'initiative (round ",r.round,")"]}),r.activeEntry&&C.jsxs("span",{style:{fontSize:11,color:"#f1c40f"},children:["Tour actuel :"," ",r.activeEntry.kind==="player"?"Joueur":r.activeEntry.id]})]}),C.jsx("div",{style:{display:"flex",gap:8,alignItems:"center",overflowX:"auto",paddingBottom:2},children:r.timelineEntries.map(e=>{const t=r.activeEntry&&e.id===r.activeEntry.id&&e.kind===r.activeEntry.kind,s=e.kind==="player",o=wh(s?"player":"enemy"),a=e.kind==="player"?r.player:r.enemies.find(d=>d.id===e.id)||null,u=a?Ut(a):!1,c=s?{svg:o,label:"PJ"}:{svg:o,label:e.id};return C.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:4,borderRadius:6,border:t?"2px solid #f1c40f":"1px solid #333",background:u?"#111118":t?"#1b1b30":"#101020",minWidth:48},children:[C.jsx("img",{src:c.svg,alt:c.label,style:{width:32,height:32,objectFit:"contain",filter:u?"grayscale(1)":s?"none":"grayscale(0.2)"}}),C.jsx("span",{style:{fontSize:10,marginTop:2,color:u?"#777a8a":"#d0d6e0",whiteSpace:"nowrap",textDecoration:u?"line-through":"none"},children:c.label}),C.jsxs("span",{style:{fontSize:9,color:"#9aa0b5"},children:["Init ",e.initiative]})]},`${e.kind}-${e.id}`)})})]})}function q6(r){return C.jsxs("div",{style:{padding:"10px 12px",background:"linear-gradient(180deg, rgba(38, 28, 16, 0.92), rgba(16, 12, 8, 0.92))",borderRadius:14,border:"1px solid rgba(255,255,255,0.10)",boxShadow:"0 16px 50px rgba(0,0,0,0.45)",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%",height:170,fontFamily:'"Iowan Old Style", "Palatino Linotype", Palatino, Garamond, "Times New Roman", serif'},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[C.jsx("span",{style:{fontSize:13,color:"rgba(255,255,255,0.82)",fontWeight:700},children:"Chronique du tour"}),C.jsxs("span",{style:{fontSize:12,color:"rgba(255,255,255,0.65)"},children:["Round ",r.round]})]}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2,flex:"1 1 auto",minHeight:0,overflowY:"auto",paddingRight:4},children:[r.narrativeLog.length===0&&C.jsx("span",{style:{fontSize:12,color:"rgba(255,255,255,0.65)"},children:"En attente d'actions pour raconter le tour..."}),r.narrativeLog.slice(0,20).map((e,t)=>C.jsxs("span",{style:{fontSize:13,color:"rgba(255,255,255,0.88)"},children:[" ",e]},t))]})]})}function K6(r){var s,o,a,u;const e=r.selectedAction,t=r.selectedAvailability;return C.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[C.jsx("h2",{style:{margin:"0 0 4px"},children:"Actions dtailles"}),C.jsxs("p",{style:{margin:0,fontSize:12,opacity:.85},children:["Source: ",C.jsx("code",{children:"action-game/actions/index.json"}),". Liste charge et vrifie localement (phase, distance)."]}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:[r.actions.map(c=>{const d=r.computeActionAvailability(c),f=(e==null?void 0:e.id)===c.id,m=c.actionCost.actionType==="action"?"#8e44ad":c.actionCost.actionType==="bonus"?"#27ae60":c.actionCost.actionType==="reaction"?"#e67e22":"#2980b9",y=f?"#6c5ce7":"#2a2a3a";return C.jsxs("button",{type:"button",onClick:()=>r.onSelectActionId(c.id),style:{textAlign:"left",background:f?"#1e1e2f":"#0f0f19",color:"#f5f5f5",border:`1px solid ${y}`,borderRadius:6,padding:"8px 10px",cursor:"pointer"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,marginBottom:4,alignItems:"center"},children:[C.jsx("span",{style:{fontWeight:600},children:c.name}),C.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:m,color:"#fff"},children:c.actionCost.actionType})]}),C.jsx("div",{style:{fontSize:12,opacity:.9},children:c.summary||c.category}),C.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:4,fontSize:11,alignItems:"center"},children:[C.jsx("span",{style:{color:d.enabled?"#2ecc71":"#e74c3c"},children:d.enabled?"Disponible":d.reasons[0]||"Bloque"}),C.jsx("span",{style:{color:"#9aa0b5"},children:r.describeRange(c.targeting)}),C.jsx("span",{style:{color:"#9aa0b5"},children:r.describeUsage(c.usage)})]})]},c.id)}),r.actions.length===0&&C.jsx("div",{style:{fontSize:12,opacity:.8},children:"Aucune action charge pour le moment."})]}),e&&C.jsxs("div",{style:{borderTop:"1px solid #2a2a3a",paddingTop:8,display:"flex",flexDirection:"column",gap:6},children:[C.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",fontSize:11},children:[C.jsx("span",{style:{background:"#2d2d40",color:"#d0d4f7",padding:"2px 6px",borderRadius:4},children:e.category}),(s=e.tags)==null?void 0:s.slice(0,4).map(c=>C.jsx("span",{style:{background:"#1f2a38",color:"#9bb0d6",padding:"2px 6px",borderRadius:4},children:c},c))]}),C.jsx("div",{style:{fontSize:12},children:e.summary||"Pas de rsum."}),C.jsxs("div",{style:{fontSize:12},children:[C.jsx("strong",{children:"Cot:"})," ",e.actionCost.actionType," | Mouvement"," ",e.actionCost.movementCost]}),C.jsxs("div",{style:{fontSize:12},children:[C.jsx("strong",{children:"Porte:"})," ",r.describeRange(e.targeting)]}),C.jsxs("div",{style:{fontSize:12},children:[C.jsx("strong",{children:"Usage:"})," ",r.describeUsage(e.usage)]}),C.jsxs("div",{style:{fontSize:12},children:[C.jsx("strong",{children:"Conditions:"}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:[e.conditions.length===0&&C.jsx("span",{style:{color:"#9aa0b5"},children:"Aucune condition."}),e.conditions.map((c,d)=>C.jsxs("div",{style:{color:"#cfd3ec"},children:[r.conditionLabel(c),c.reason?` - ${c.reason}`:""]},`${c.type}-${d}`)),t&&C.jsxs("div",{style:{color:t.enabled?"#2ecc71":"#e74c3c"},children:["tat:"," ",t.enabled?"OK pour ce tour":t.reasons.join(" | ")||"Bloqu",t.details.length>0&&C.jsx("div",{style:{color:"#9aa0b5",marginTop:2},children:t.details.join(" / ")})]})]})]}),C.jsxs("div",{style:{fontSize:12},children:[C.jsx("strong",{children:"Effets:"}),C.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:e.effects.map((c,d)=>C.jsx("div",{style:{color:"#cfd3ec"},children:r.effectLabel(c)},`${c.type}-${d}`))})]}),C.jsxs("div",{style:{fontSize:12},children:[C.jsx("strong",{children:"Hints IA:"})," ",((o=e.aiHints)==null?void 0:o.priority)||"n/a",C.jsxs("div",{style:{color:"#9aa0b5"},children:["Success: ",((a=e.aiHints)==null?void 0:a.successLog)||"n/a"]}),C.jsxs("div",{style:{color:"#9aa0b5"},children:["Failure: ",((u=e.aiHints)==null?void 0:u.failureLog)||"n/a"]})]}),C.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[C.jsx("button",{type:"button",onClick:()=>r.onPreviewActionArea(e),style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Prvisualiser"}),C.jsx("button",{type:"button",onClick:()=>r.onValidateAction(e),disabled:!(t!=null&&t.enabled),style:{padding:"4px 8px",background:t!=null&&t.enabled?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:t!=null&&t.enabled?"pointer":"default",fontSize:12},children:"Valider l'action"})]})]})]})]})}function Q6(r){var e,t,s,o,a,u;return C.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[C.jsx("h2",{style:{margin:"0 0 4px"},children:"Jets de ds"}),C.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Choisir une action, la valider, puis lancer le jet de touche et/ou de dgts. Mode auto: enchane touche + dgts."}),C.jsxs("div",{style:{fontSize:12},children:["Action valide :"," ",r.validatedAction?`${r.validatedAction.name} (${r.validatedAction.id})`:"aucune (valider une action d'abord)"]}),C.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["normal","advantage","disadvantage"].map(c=>C.jsx("button",{type:"button",onClick:()=>r.onSetAdvantageMode(c),style:{padding:"4px 8px",background:r.advantageMode===c?"#8e44ad":"#2c2c3a",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:c},c))}),C.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[C.jsx("button",{type:"button",onClick:r.onRollAttack,disabled:!((e=r.validatedAction)!=null&&e.attack),style:{padding:"4px 8px",background:(t=r.validatedAction)!=null&&t.attack?"#2980b9":"#555",color:"#fff",border:"none",borderRadius:4,cursor:(s=r.validatedAction)!=null&&s.attack?"pointer":"default",fontSize:12},children:"Lancer jet de touche"}),C.jsx("button",{type:"button",onClick:r.onRollDamage,disabled:!((o=r.validatedAction)!=null&&o.damage),style:{padding:"4px 8px",background:(a=r.validatedAction)!=null&&a.damage?"#27ae60":"#555",color:"#fff",border:"none",borderRadius:4,cursor:(u=r.validatedAction)!=null&&u.damage?"pointer":"default",fontSize:12},children:"Lancer dgts"}),C.jsx("button",{type:"button",onClick:r.onAutoResolve,style:{padding:"4px 8px",background:"#9b59b6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Mode auto (touche + dgts)"})]}),C.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[C.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[C.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de touche"}),r.attackRoll?C.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["d20: ",r.attackRoll.d20.rolls.join(" / "),"  ",r.attackRoll.d20.total," | bonus"," ",r.attackRoll.bonus," | total ",r.attackRoll.total," ",r.attackRoll.isCrit?"(critique)":""]}):C.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lanc."})]}),C.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[C.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de dgts"}),r.damageRoll?C.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["Ds:"," ",r.damageRoll.dice.length?r.damageRoll.dice.map(c=>c.rolls.join("+")).join(" | "):"-"," ","| mod ",r.damageRoll.flatModifier," | total ",r.damageRoll.total," ",r.damageRoll.isCrit?"(critique)":""]}):C.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lanc."})]})]}),C.jsxs("div",{style:{fontSize:12},children:[C.jsx("strong",{children:"Logs des jets:"}),C.jsxs("div",{style:{marginTop:4,display:"flex",flexDirection:"column",gap:2},children:[r.diceLogs.map((c,d)=>C.jsxs("div",{style:{color:"#dfe6ff"},children:["- ",c]},d)),r.diceLogs.length===0&&C.jsx("div",{style:{color:"#9aa0b5"},children:"Aucun jet enregistr."})]})]})]})}function Z6(r){return C.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[C.jsx("h2",{style:{margin:"0 0 4px"},children:"Zones d'effet (demo)"}),C.jsxs("p",{style:{margin:0,fontSize:12},children:["Ces boutons utilisent les helpers de ",C.jsx("code",{children:"boardEffects.ts"})," pour dessiner des zones en coordonnes de grille autour du joueur."]}),C.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:[C.jsx("button",{type:"button",onClick:r.onShowCircle,style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cercle R=2"}),C.jsx("button",{type:"button",onClick:r.onShowRectangle,style:{padding:"4px 8px",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Rectangle 3x3"}),C.jsx("button",{type:"button",onClick:r.onShowCone,style:{padding:"4px 8px",background:"#c0392b",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cne porte 4"}),C.jsx("button",{type:"button",onClick:r.onToggleVisionDebug,style:{padding:"4px 8px",background:r.showVisionDebug?"#f1c40f":"#555",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:r.showVisionDebug?"Masquer vision":"Afficher vision"}),C.jsx("button",{type:"button",onClick:r.onClear,style:{padding:"4px 8px",background:"#7f8c8d",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Effacer zones"})]})]})}function J6(r){return C.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",flex:"1 1 auto",display:"flex",flexDirection:"column"},children:[C.jsx("h2",{style:{margin:"0 0 8px"},children:"Log"}),C.jsx("div",{style:{flex:"1 1 auto",overflowY:"auto",fontSize:12,lineHeight:1.4},children:r.log.map((e,t)=>C.jsxs("div",{children:["- ",e]},t))})]})}function Uo(r,e){return{x:Math.cos(e)*r,y:Math.sin(e)*r}}function A0(r,e,t,s,o){const a=Uo(r,t);return`A ${r} ${r} 0 ${s} ${o} ${a.x} ${a.y}`}function e9(r,e,t,s){const o=Math.abs(s-t)>=Math.PI*2-1e-6,a=s-t,u=o||Math.abs(a)>Math.PI?1:0,c=a>=0?1:0,d=c===1?0:1,f=Uo(e,t),m=Uo(r,s),y=Uo(r,t);return[`M ${f.x} ${f.y}`,A0(e,t,s,u,c),`L ${m.x} ${m.y}`,A0(r,s,t,u,d),`L ${y.x} ${y.y}`,"Z"].join(" ")}function t9(r){if(!r.open)return null;const e=r.size??240,t=e/2,s=t,o=Math.max(44,Math.floor(s*.42)),a=o-6,u=Math.max(1,r.items.length),c=Math.PI*2/u,d=-Math.PI/2,f=r.centerLabel??"Annuler",m=r.onCenterClick??r.onClose,y=typeof r.sliceOpacity=="number"?r.sliceOpacity:1,x=typeof r.centerOpacity=="number"?r.centerOpacity:1;return C.jsx("div",{style:{position:"absolute",left:r.anchorX,top:r.anchorY,width:e,height:e,transform:"translate(-50%, -50%)",zIndex:50,pointerEvents:"auto",userSelect:"none"},onMouseDown:v=>{v.preventDefault(),v.stopPropagation()},onClick:v=>{v.preventDefault(),v.stopPropagation()},children:C.jsxs("svg",{width:e,height:e,viewBox:`${-t} ${-t} ${e} ${e}`,children:[C.jsx("defs",{children:C.jsx("filter",{id:"wheelShadow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:C.jsx("feDropShadow",{dx:"0",dy:"10",stdDeviation:"14",floodOpacity:"0.35"})})}),C.jsxs("g",{filter:"url(#wheelShadow)",children:[r.items.map((v,b)=>{const S=d+b*c,_=d+(b+1)*c,T=(S+_)/2,M=Uo((o+s)/2,T),E=e9(o,s,S,_),P=!!v.disabled,N=P&&v.disabledReason?v.disabledReason:P?"Indisponible":void 0;return C.jsxs("g",{children:[C.jsx("path",{d:E,fill:P?"rgba(90, 90, 100, 0.75)":v.color,stroke:"rgba(255,255,255,0.22)",strokeWidth:1,style:{cursor:P?"not-allowed":"pointer",transition:"filter 120ms ease, opacity 120ms ease"},opacity:(P?.55:.95)*Math.max(0,Math.min(1,y)),onClick:D=>{var F;D.preventDefault(),D.stopPropagation(),!P&&((F=v.onSelect)==null||F.call(v))},children:N?C.jsx("title",{children:N}):null}),C.jsx("text",{x:M.x,y:M.y,textAnchor:"middle",dominantBaseline:"middle",style:{fill:P?"rgba(255,255,255,0.6)":"rgba(255,255,255,0.92)",fontSize:12,fontWeight:700,letterSpacing:.2,pointerEvents:"none"},children:v.label})]},v.id)}),C.jsx("circle",{cx:0,cy:0,r:a,fill:"rgba(10,10,16,0.92)",stroke:"rgba(255,255,255,0.18)",strokeWidth:1,opacity:Math.max(0,Math.min(1,x)),style:{cursor:"pointer"},onClick:v=>{v.preventDefault(),v.stopPropagation(),m()}}),C.jsx("text",{x:0,y:0,textAnchor:"middle",dominantBaseline:"middle",style:{fill:"rgba(255,255,255,0.9)",fontSize:12,fontWeight:800,pointerEvents:"none"},children:f})]})]})})}function n9(r){const e=r.toLowerCase();return e==="attack"?"Attaque":e==="movement"?"Mouvement":e==="support"?"Support":e==="defense"?"Defense":e==="item"?"Objet":e==="reaction"?"Reaction":r}function r9(r){const e=r.toLowerCase();return e==="attack"?"#e74c3c":e==="movement"?"#2ecc71":e==="support"?"#3498db":e==="defense"?"#9b59b6":e==="item"?"#f1c40f":e==="reaction"?"#e67e22":"#7f8c8d"}function i9(r){const[e,t]=J.useState("root"),[s,o]=J.useState(null),a=r.actions.length>7,u=J.useMemo(()=>{const m=new Set;for(const y of r.actions)m.add(y.category);return Array.from(m).sort((y,x)=>y.localeCompare(x))},[r.actions]);J.useEffect(()=>{r.open||(t("root"),o(null))},[r.open]);const c=J.useMemo(()=>{if(e==="categories")return[{id:"all",label:"Toutes",color:"#34495e",onSelect:()=>{o(null),t("actions")}},...u.map(v=>({id:`cat-${v}`,label:n9(v),color:r9(v),onSelect:()=>{o(v),t("actions")}}))];if(e==="actions")return(s?r.actions.filter(v=>v.category===s):r.actions).map(v=>{const S=r.computeActionAvailability(v).enabled;return{id:`action-${v.id}`,label:v.name,color:S?"#2ecc71":"#e74c3c",onSelect:()=>{r.onPickAction(v),t("root"),o(null)}}});const m=r.canInteractWithBoard,y=r.selectedPathLength>0;return[{id:"move",label:"Deplacer",color:"#2ecc71",disabled:!m,disabledReason:"Tour joueur requis",onSelect:r.onEnterMoveMode},{id:"action",label:"Action",color:"#e74c3c",disabled:!r.canInteractWithBoard,disabledReason:"Tour joueur requis",onSelect:()=>{if(a){t("categories");return}t("actions")}},{id:"validate-move",label:"Valider",color:"#f1c40f",disabled:!r.canInteractWithBoard||!y,disabledReason:y?"Tour joueur requis":"Aucun trajet",onSelect:r.onValidateMove},{id:"reset-move",label:"Annuler trajet",color:"#e67e22",disabled:!r.canInteractWithBoard||!y,disabledReason:y?"Tour joueur requis":"Aucun trajet",onSelect:r.onResetMove},{id:"inspect",label:"Inspecter",color:"#3498db",disabled:!r.hasCell,disabledReason:"Aucune case",onSelect:r.onInspect},{id:"interact",label:"Interagir",color:"#9b59b6",disabled:!r.canInteractWithBoard,disabledReason:"Tour joueur requis",onSelect:r.onInteract},{id:"hide",label:"Se cacher",color:"#34495e",disabled:!r.canInteractWithBoard,disabledReason:"Tour joueur requis",onSelect:r.onHide},{id:"end-turn",label:"Fin tour",color:"#ff7f50",disabled:!r.canInteractWithBoard||r.isResolvingEnemies,disabledReason:r.isResolvingEnemies?"Tour des ennemis en cours":"Tour joueur requis",onSelect:r.onEndTurn}]},[u,r,s,a,e]),{centerLabel:d,onCenterClick:f}=J.useMemo(()=>e==="root"?{centerLabel:"Annuler",onCenterClick:r.onClose}:e==="categories"?{centerLabel:"Retour",onCenterClick:()=>t("root")}:e==="actions"&&a?{centerLabel:"Retour",onCenterClick:()=>t("categories")}:{centerLabel:"Retour",onCenterClick:()=>t("root")},[r.onClose,a,e]);return C.jsx(t9,{open:r.open,anchorX:r.anchorX,anchorY:r.anchorY,items:c,onClose:r.onClose,size:r.size,centerLabel:d,onCenterClick:f,sliceOpacity:.65,centerOpacity:.6})}function Al(r,e,t){return Math.max(e,Math.min(t,r))}function s9(r){return r==="action"?"#8e44ad":r==="bonus"?"#27ae60":r==="reaction"?"#e67e22":"#2980b9"}function o9(r){var v,b,S,_,T,M,E;const e=J.useRef(null),[t,s]=J.useState({left:16,top:16}),o=J.useRef(null),a=J.useRef(!1),[u,c]=J.useState(!1),d=r.action,f=r.availability,m=f?!f.enabled:!1;J.useLayoutEffect(()=>{if(!r.open||a.current)return;const P=e.current;if(!P)return;const N=P.parentElement;if(!N)return;const D=N.getBoundingClientRect(),F=P.getBoundingClientRect(),U=r.anchorX+18,G=r.anchorY+18,Y=Al(U,8,Math.max(8,D.width-F.width-8)),q=Al(G,8,Math.max(8,D.height-F.height-8));s({left:Y,top:q})},[r.anchorX,r.anchorY,r.open,d==null?void 0:d.id]),J.useEffect(()=>{r.open&&(a.current=!1)},[r.open,d==null?void 0:d.id]),J.useEffect(()=>{if(!u)return;const P=D=>{const F=e.current,U=o.current;if(!F||!U)return;const G=F.parentElement;if(!G)return;const Y=G.getBoundingClientRect(),q=F.getBoundingClientRect(),me=D.clientX-U.startClientX,te=D.clientY-U.startClientY,we=U.startLeft+me,Ze=U.startTop+te,ee=Al(we,8,Math.max(8,Y.width-q.width-8)),ne=Al(Ze,8,Math.max(8,Y.height-q.height-8));a.current=!0,s({left:ee,top:ne})},N=()=>{c(!1),o.current=null};return window.addEventListener("pointermove",P),window.addEventListener("pointerup",N,{once:!0}),()=>{window.removeEventListener("pointermove",P)}},[u]);const x=!!(((v=d==null?void 0:d.targeting)==null?void 0:v.target)==="enemy");return!r.open||!d?null:C.jsxs("div",{ref:e,onMouseDown:P=>P.stopPropagation(),style:{position:"absolute",left:t.left,top:t.top,zIndex:60,width:360,maxWidth:"min(92vw, 420px)",background:"rgba(10, 10, 16, 0.92)",border:"1px solid rgba(255,255,255,0.14)",borderRadius:12,padding:12,boxShadow:"0 18px 60px rgba(0,0,0,0.55)",backdropFilter:"blur(8px)"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10,alignItems:"flex-start"},children:[C.jsxs("div",{onPointerDown:P=>{P.button!==0||!e.current||(P.preventDefault(),P.stopPropagation(),o.current={startClientX:P.clientX,startClientY:P.clientY,startLeft:t.left,startTop:t.top},c(!0))},style:{minWidth:0,flex:"1 1 auto",cursor:u?"grabbing":"grab",userSelect:"none"},title:"Glisser pour deplacer",children:[C.jsx("div",{style:{fontSize:13,fontWeight:900,color:"#fff"},children:d.name}),C.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:6},children:[C.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:6,background:s9(d.actionCost.actionType),color:"#fff",fontWeight:800},children:d.actionCost.actionType}),C.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:6,background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.12)",color:"rgba(255,255,255,0.85)",fontWeight:700},children:d.category}),C.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:6,background:m?"rgba(231,76,60,0.25)":"rgba(46,204,113,0.18)",border:`1px solid ${m?"rgba(231,76,60,0.55)":"rgba(46,204,113,0.45)"}`,color:m?"#ffb2aa":"#bdf6d2",fontWeight:800},children:f?f.enabled?"Disponible":"Bloquee":"Etat inconnu"})]})]}),C.jsx("button",{type:"button",onClick:()=>{r.onClose()},style:{width:32,height:32,borderRadius:10,border:"1px solid rgba(255,255,255,0.14)",background:"rgba(255,255,255,0.06)",color:"rgba(255,255,255,0.85)",cursor:"pointer",fontWeight:900,flex:"0 0 auto"},title:"Fermer",children:""})]}),C.jsx("div",{style:{marginTop:10,fontSize:12,color:"rgba(255,255,255,0.82)"},children:d.summary||"Aucun resume."}),f&&!f.enabled&&C.jsxs("div",{style:{marginTop:10},children:[C.jsx("div",{style:{fontSize:12,fontWeight:800,color:"#ffb2aa"},children:"Pourquoi c'est bloque"}),C.jsx("ul",{style:{margin:"6px 0 0",paddingLeft:18,color:"rgba(255,255,255,0.85)",fontSize:12},children:f.reasons.map((P,N)=>C.jsx("li",{children:P},N))})]}),C.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,flexWrap:"wrap"},children:[r.stage==="draft"&&C.jsx("button",{type:"button",onClick:()=>{r.onValidateAction(d)},disabled:!!(f&&!f.enabled),style:{padding:"6px 10px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:f!=null&&f.enabled?"#2ecc71":"rgba(90, 90, 100, 0.55)",color:f!=null&&f.enabled?"#0b0b12":"rgba(255,255,255,0.75)",cursor:f!=null&&f.enabled?"pointer":"not-allowed",fontSize:12,fontWeight:900},title:f!=null&&f.enabled?"Valider l'action":"Action indisponible",children:"Valider"}),r.stage==="active"&&C.jsx("span",{style:{fontSize:12,color:"rgba(255,255,255,0.70)"},children:"Action validee: suivez les etapes ci-dessous."})]}),x&&C.jsxs("div",{style:{marginTop:12},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"center"},children:[C.jsx("div",{style:{fontSize:12,fontWeight:900,color:"#fff"},children:"Cible"}),C.jsx("button",{type:"button",onClick:()=>{r.stage==="active"&&r.onSetTargetMode("selecting")},disabled:r.stage!=="active",style:{padding:"4px 8px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:r.stage==="active"?"rgba(255,255,255,0.06)":"rgba(90, 90, 100, 0.35)",color:"#fff",cursor:r.stage==="active"?"pointer":"not-allowed",fontSize:12,fontWeight:800},children:"Selectionner cible"})]}),C.jsxs("div",{style:{marginTop:6,fontSize:12,color:"rgba(255,255,255,0.80)"},children:["Cible selectionnee:"," ",C.jsx("strong",{children:r.selectedTargetId?r.selectedTargetId:"aucune"}),r.targetMode==="selecting"&&r.stage==="active"&&C.jsx("span",{style:{marginLeft:8,color:"#cfd3ff"},children:"(clique un ennemi)"})]}),r.stage!=="active"&&C.jsx("div",{style:{marginTop:6,fontSize:12,color:"rgba(255,255,255,0.70)"},children:"Validez l'action pour pouvoir selectionner une cible sur la grille."})]}),r.stage==="active"&&C.jsxs("div",{style:{marginTop:12},children:[C.jsx("div",{style:{fontSize:12,fontWeight:900,color:"#fff",marginBottom:6},children:"Jets"}),C.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["normal","advantage","disadvantage"].map(P=>C.jsx("button",{type:"button",onClick:()=>r.onSetAdvantageMode(P),style:{padding:"4px 8px",background:r.advantageMode===P?"#8e44ad":"rgba(255,255,255,0.06)",color:"#fff",border:"1px solid rgba(255,255,255,0.12)",borderRadius:10,cursor:"pointer",fontSize:12,fontWeight:800},children:P},P))}),C.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,flexWrap:"wrap"},children:[C.jsx("button",{type:"button",onClick:r.onRollAttack,disabled:!((b=r.validatedAction)!=null&&b.attack),style:{padding:"6px 10px",background:(S=r.validatedAction)!=null&&S.attack?"#2980b9":"rgba(90, 90, 100, 0.55)",color:"#fff",border:"1px solid rgba(255,255,255,0.12)",borderRadius:10,cursor:(_=r.validatedAction)!=null&&_.attack?"pointer":"not-allowed",fontSize:12,fontWeight:900},children:"Jet de touche"}),C.jsx("button",{type:"button",onClick:r.onRollDamage,disabled:!((T=r.validatedAction)!=null&&T.damage),style:{padding:"6px 10px",background:(M=r.validatedAction)!=null&&M.damage?"#27ae60":"rgba(90, 90, 100, 0.55)",color:"#fff",border:"1px solid rgba(255,255,255,0.12)",borderRadius:10,cursor:(E=r.validatedAction)!=null&&E.damage?"pointer":"not-allowed",fontSize:12,fontWeight:900},children:"Degats"}),C.jsx("button",{type:"button",onClick:r.onAutoResolve,style:{padding:"6px 10px",background:"#9b59b6",color:"#fff",border:"1px solid rgba(255,255,255,0.12)",borderRadius:10,cursor:"pointer",fontSize:12,fontWeight:900},children:"Auto"})]}),C.jsxs("div",{style:{marginTop:10,display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[C.jsxs("div",{style:{padding:8,borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.04)"},children:[C.jsx("div",{style:{fontSize:11,fontWeight:900,color:"rgba(255,255,255,0.85)"},children:"Touche"}),C.jsx("div",{style:{fontSize:12,color:"rgba(255,255,255,0.85)",marginTop:4},children:r.attackRoll?`${r.attackRoll.total}${r.attackRoll.isCrit?" (crit)":""}`:"-"})]}),C.jsxs("div",{style:{padding:8,borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.04)"},children:[C.jsx("div",{style:{fontSize:11,fontWeight:900,color:"rgba(255,255,255,0.85)"},children:"Degats"}),C.jsx("div",{style:{fontSize:12,color:"rgba(255,255,255,0.85)",marginTop:4},children:r.damageRoll?`${r.damageRoll.total}${r.damageRoll.isCrit?" (crit)":""}`:"-"})]})]}),r.diceLogs.length>0&&C.jsxs("div",{style:{marginTop:10},children:[C.jsx("div",{style:{fontSize:11,fontWeight:900,color:"rgba(255,255,255,0.75)"},children:"Derniers jets"}),C.jsx("div",{style:{marginTop:4,display:"flex",flexDirection:"column",gap:3},children:r.diceLogs.slice(-4).map((P,N)=>C.jsxs("div",{style:{fontSize:11,color:"rgba(255,255,255,0.78)"},children:["- ",P]},N))})]})]})]})}function a9(r){var y;const e=J.useMemo(()=>r.tabs.filter(x=>!x.hidden),[r.tabs]),t=r.defaultTabId??((y=e[0])==null?void 0:y.id)??"tab",s=r.collapsible??!0,o=r.collapsedByDefault??!0,[a,u]=J.useState(o&&s?null:t);J.useEffect(()=>{a!==null&&(e.some(x=>x.id===a)||u(t))},[a,t,e]);const c=a?e.find(x=>x.id===a):void 0,d=r.expandedHeight??320,f=r.collapsedHeight??52,m=a!==null;return C.jsxs("div",{style:{flex:`0 0 ${m?d:f}px`,display:"flex",flexDirection:"column",minHeight:0,background:"rgba(12, 12, 18, 0.9)",border:"1px solid rgba(255,255,255,0.10)",borderRadius:14,boxShadow:"0 18px 60px rgba(0,0,0,0.45)"},children:[C.jsx("div",{style:{display:"flex",gap:8,padding:"10px 10px 0 10px",flexWrap:"wrap"},children:e.map(x=>{const v=x.id===a;return C.jsx("button",{type:"button",onClick:()=>{if(!s){u(x.id);return}u(b=>b===x.id?null:x.id)},style:{padding:"8px 10px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:v?"rgba(255,255,255,0.10)":"rgba(255,255,255,0.05)",color:v?"#fff":"rgba(255,255,255,0.75)",cursor:"pointer",fontSize:12,fontWeight:700},children:x.label},x.id)})}),m&&C.jsx("div",{style:{padding:10,minHeight:0,flex:"1 1 auto",overflow:"hidden"},children:C.jsx("div",{style:{width:"100%",height:"100%",overflow:"auto",paddingRight:4},children:c==null?void 0:c.content})})]})}const l9={"./melee-strike.json":G2,"./dash.json":ry,"./second-wind.json":my,"./throw-dagger.json":My,"./enemy-move.json":Ny,"./enemy-melee-strike.json":t3,"./enemy-bow-shot.json":m3},u9={"./brute.json":Qg,"./archer.json":l2,"./assassin.json":v2,"./ghost.json":E2};function c9(){const r=Array.isArray(a1.types)?a1.types:[],e=[];for(const t of r){const s=u9[t];s?e.push(s):console.warn("[enemy-types] Type path missing in bundle:",t)}return e.length===0&&console.warn("[enemy-types] No enemy types loaded from index.json"),e}function h9(r,e,t){const{x:s,y:o}=t,a=e.baseStats;return{id:`enemy-${r+1}`,type:"enemy",enemyTypeId:e.id,enemyTypeLabel:e.label,aiRole:e.aiRole,actionIds:Array.isArray(e.actions)?e.actions:null,speechProfile:e.speechProfile??null,moveRange:a.moveRange,attackDamage:a.attackDamage,attackRange:typeof a.attackRange=="number"?a.attackRange:1,maxAttacksPerTurn:typeof a.maxAttacksPerTurn=="number"?a.maxAttacksPerTurn:1,armorClass:a.armorClass,movementProfile:e.movement?e.movement:{type:"ground",speed:e.baseStats.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},facing:"left",visionProfile:e.vision?e.vision:{shape:"cone",range:5},x:s,y:o,hp:a.hp,maxHp:a.hp}}function d9(r){const e=ar,t=kr,s=Math.floor(r/e),o=r%e;return{x:Math.max(0,t-1-s),y:o}}const f9=[{action:"move",label:"Se deplacer jusqu'a 3 cases (Manhattan)",color:"#2ecc71"},{action:"attack",label:"Attaque le joueur a distance 1 (2 degats)",color:"#e74c3c"},{action:"wait",label:"Attend si aucune action viable",color:"#7f8c8d"}],p9=()=>{const r=J.useRef(null),e=J.useRef(!1),[t,s]=J.useState([]),[o,a]=J.useState([]),[u,c]=J.useState([]),[d,f]=J.useState({id:"player-1",type:"player",x:0,y:Math.floor(ar/2),facing:"right",visionProfile:{shape:"cone",range:5},hp:wr.pvActuels,maxHp:wr.pvMax}),[m,y]=J.useState([]),[x,v]=J.useState([]),[b,S]=J.useState("player"),[_,T]=J.useState(1),[M,E]=J.useState(!1),[P,N]=J.useState(!1),[D,F]=J.useState(null),[U,G]=J.useState([]),[Y,q]=J.useState(0),[me,te]=J.useState(!1),[we,Ze]=J.useState(3),ee=.5,ne=2.5,re=.1,[Q,ie]=J.useState(1),[z,H]=J.useState({x:0,y:0}),[Se,Te]=J.useState(!1),Pe=J.useRef(null),{tokenLayerRef:Re,pathLayerRef:Ye,speechLayerRef:We,viewportRef:Xe}=O6({enabled:me,containerRef:r,zoom:Q,panX:z.x,panY:z.y}),[xt,Vn]=J.useState([]),[zt,Qt]=J.useState([]),[un,Zt]=J.useState(null),[Mr,Er]=J.useState(null),[Rr,ni]=J.useState("normal"),[Gt,Yn]=J.useState(null),[$i,ri]=J.useState(null),[Bs,Zo]=J.useState([]),[Jo,ii]=J.useState(!1),[lr,Di]=J.useState({usedAction:!1,usedBonus:!1}),[Xn,ur]=J.useState({turn:{},encounter:{}}),[ea,$s]=J.useState({"bandolier:dagger":3}),[Ds,Os]=J.useState(5),[Pt,Ir]=J.useState([]),[wt,cr]=J.useState(null),[Lr,Jt]=J.useState("none"),[In,zr]=J.useState("idle"),[Be,Ns]=J.useState(null),[Mt,Oi]=J.useState(null),[Ws,Ln]=J.useState([]),[Fr,Us]=J.useState(!1),[si,Ul]=J.useState(null),[Ni,Hs]=J.useState(null),[jr,Wi]=J.useState(null),[Hl,ta]=J.useState(null),[na,cn]=J.useState(!1),[Vt,ra]=J.useState(!1);U6({tokenLayerRef:Re,player:d,enemies:x}),W6({speechLayerRef:We,player:d,enemies:x,speechBubbles:u}),N6({pathLayerRef:Ye,player:d,enemies:x,selectedPath:Pt,effectSpecs:Ws,selectedTargetId:wt,showVisionDebug:Fr});function hn(){Ns(k=>k?{...k,open:!1}:null)}function Gs(k,L){return`${L??"default"}:${k}`}function Vs(k,L){const $=Gs(k,L);return typeof ea[$]=="number"?ea[$]:0}J.useEffect(()=>{(b!=="player"||Vt)&&(zr("idle"),hn())},[b,Vt]),J.useEffect(()=>{const k=L=>{if(L.key==="Escape"){if(Be!=null&&Be.open){hn();return}if(Lr==="selecting"){Jt("none");return}In==="moving"&&zr("idle")}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[Be==null?void 0:Be.open,In,Lr]);function ia(k){var $,W;if(na)return"Fallback local : action engine";if(jr===null)return"IA non appelee pour l'instant";const L=jr.find(se=>se.enemyId===k);return L?(($=L.target)==null?void 0:$.kind)==="cell"?`${L.actionId} -> (${L.target.x}, ${L.target.y})`:((W=L.target)==null?void 0:W.kind)==="token"?`${L.actionId} -> ${L.target.tokenId}`:L.actionId:"Aucun intent recu pour cet ennemi"}function sa(){if(m.length===0){fe("Aucun type d'ennemi charge (enemyTypes). Impossible de generer le combat.");return}const k=[],L=$=>m[$%m.length];for(let $=0;$<we;$++)k.push(h9($,L($),d9($)));v(k),T(1),N(!1),G([]),q(0),te(!0),ur({turn:{},encounter:{}}),Di({usedAction:!1,usedBonus:!1}),$s({"bandolier:dagger":3}),Os(5)}function Ys(){if(!P||U.length===0)return null;const k=Y>=0&&Y<U.length?Y:0;return U[k]??null}function Gl(){if(!P||U.length===0)return{entry:null,willWrap:!1};const k=(Y+1)%U.length;return{entry:U[k]??null,willWrap:k===0}}function tt(){U.length!==0&&q(k=>{const L=(k+1)%U.length;return L===0&&T($=>$+1),L})}function Vl(){if(P)return;const k=wr.caracs.dexterite.modDEX??0,L=()=>Math.floor(Math.random()*20)+1,$=L(),W=$+k,se=[];se.push({id:d.id,kind:"player",initiative:W});const ke=x.map(ye=>{const ue=L();return se.push({id:ye.id,kind:"enemy",initiative:ue}),{...ye,initiative:ue}});F(W),v(ke),se.sort((ye,be)=>be.initiative-ye.initiative),G(se),q(0),N(!0);const ae=se[0];ae&&(ae.kind==="player"?fe(`Initiative: Joueur ${W} (d20=${$}, mod=${k})  le joueur commence.`):fe(`Initiative: Joueur ${W} (d20=${$}, mod=${k})  ${ae.id} commence (initiative ${ae.initiative}).`))}function fe(k){s(L=>[k,...L].slice(0,12))}function Xs(k){a(L=>[k,...L].slice(0,20))}function hr(k){Zo(L=>[k,...L].slice(0,6)),fe(k)}function Yl(k,L){const $=(L??"").trim();$&&c(W=>[...W.filter(ke=>ke.tokenId!==k),{tokenId:k,text:$,updatedAtRound:_}])}function oa(k){c(L=>L.filter($=>$.tokenId!==k))}function oi(k,L,$){const W=[{id:L.id,kind:"player",label:"Heros",aiRole:null,enemyTypeId:null,x:L.x,y:L.y,hp:L.hp,maxHp:L.maxHp},...$.map(se=>({id:se.id,kind:"enemy",label:se.enemyTypeLabel||se.enemyTypeId||se.id,aiRole:se.aiRole??null,enemyTypeId:se.enemyTypeId??null,x:se.x,y:se.y,hp:se.hp,maxHp:se.maxHp}))];return{round:_,phase:k,grid:{cols:kr,rows:ar},actors:W}}function vn(k){return oi(k,d,x)}J.useEffect(()=>{const k=c9();y(k)},[]),J.useEffect(()=>{me&&!P&&x.length>0&&Vl()},[me,P,x.length]),J.useEffect(()=>{c(k=>k.filter(L=>x.some($=>$.id===L.tokenId&&$.hp>0)))},[x]),J.useEffect(()=>{const k=Array.isArray(l1.actions)?l1.actions:[],L=[];for(const W of k){const se=l9[W];se?L.push(se):console.warn("[actions] Action path missing in bundle:",W)}L.length===0&&console.warn("[actions] No actions loaded from index.json"),Vn(L);const $=L.filter(W=>!(W.tags||[]).includes("enemy"));Qt($),Zt($.length?$[0].id:null)},[]),J.useEffect(()=>{if(!me||!P)return;const k=Ys();if(k){if(k.kind==="player"){S("player"),Di({usedAction:!1,usedBonus:!1}),ur(L=>({...L,turn:{}})),Os(5),ii(!1),Yn(null),ri(null),e.current=!1,C3(_,vn("player")),mn({round:_,phase:"player",kind:"turn_start",actorId:d.id,actorKind:"player",summary:`Debut du tour du heros (round ${_}).`});return}M||(S("enemies"),ha(k.id))}},[me,P,U,Y,M]);function qs(){if(x.length===0)return null;let k=null;for(const L of x){const $=bs(d,L);(k===null||$<k)&&(k=$)}return k}function en(k,L,$,W){if(L.type!=="enemy")return{ok:!1,reason:"La cible selectionnee n'est pas un ennemi."};if(L.hp<=0)return{ok:!1,reason:"La cible est deja a terre."};const se=k.targeting;if(!se||se.target!=="enemy")return{ok:!1,reason:"Cette action ne cible pas un ennemi."};const ke=bs($,L),ae=se.range;if(ae){if(typeof ae.min=="number"&&ke<ae.min)return{ok:!1,reason:`Cible trop proche pour ${k.name} (distance ${ke}, min ${ae.min}).`};if(typeof ae.max=="number"&&ke>ae.max)return{ok:!1,reason:`Cible hors portee pour ${k.name} (distance ${ke}, max ${ae.max}).`}}for(const ye of k.conditions||[]){if(ye.type==="distance_max"&&typeof ye.max=="number"&&ke>ye.max)return{ok:!1,reason:ye.reason||`Distance cible > ${ye.max}.`};if(ye.type==="distance_between"){const be=typeof ye.min=="number"?ye.min:typeof(ae==null?void 0:ae.min)=="number"?ae.min:null,ue=typeof ye.max=="number"?ye.max:typeof(ae==null?void 0:ae.max)=="number"?ae.max:null;if(be!==null&&ke<be)return{ok:!1,reason:ye.reason||`Distance cible < ${be}.`};if(ue!==null&&ke>ue)return{ok:!1,reason:ye.reason||`Distance cible > ${ue}.`}}if(ye.type==="target_alive"&&L.hp<=0)return{ok:!1,reason:ye.reason||"La cible doit avoir des PV restants."}}return se.requiresLos&&!Ch($,L,W)?{ok:!1,reason:"Cible hors du champ de vision ou derriere un obstacle (ligne de vue requise)."}:{ok:!0}}function ai(k){var ue,Ne,Me,Ae,Ee,Ie;const L=[],$=[];b!=="player"&&L.push("Action bloquee pendant le tour des ennemis.");const W=(ue=k.actionCost)==null?void 0:ue.actionType;W==="action"&&lr.usedAction&&L.push("Action principale deja utilisee ce tour."),W==="bonus"&&lr.usedBonus&&L.push("Action bonus deja utilisee ce tour.");const se=typeof Xn.turn[k.id]=="number"?Xn.turn[k.id]:0,ke=typeof Xn.encounter[k.id]=="number"?Xn.encounter[k.id]:0;typeof((Ne=k.usage)==null?void 0:Ne.perTurn)=="number"&&($.push(`Usages/tour: ${se}/${k.usage.perTurn}`),se>=k.usage.perTurn&&L.push("Limite d'usage atteinte pour ce tour.")),typeof((Me=k.usage)==null?void 0:Me.perEncounter)=="number"&&($.push(`Usages/rencontre: ${ke}/${k.usage.perEncounter}`),ke>=k.usage.perEncounter&&L.push("Limite d'usage atteinte pour la rencontre."));const ae=(Ae=k.usage)==null?void 0:Ae.resource;if(ae!=null&&ae.name&&typeof ae.min=="number"){const ce=Vs(ae.name,ae.pool);if(ce<ae.min){const Le=ae.pool?` (${ae.pool})`:"";L.push(`Ressource insuffisante: ${ae.name}${Le} (${ce}/${ae.min}).`)}}const ye=(Ee=k.targeting)==null?void 0:Ee.target,be=(Ie=k.targeting)==null?void 0:Ie.range;if(ye==="enemy"){const ce=qs();ce===null?L.push("Aucune cible ennemie presente."):($.push(`Distance mini ennemie: ${ce}`),typeof(be==null?void 0:be.min)=="number"&&ce<be.min&&L.push(`Trop proche (< ${be.min}).`),typeof(be==null?void 0:be.max)=="number"&&ce>be.max&&L.push(`Hors portee (> ${be.max}).`))}for(const ce of k.conditions||[]){if(ce.type==="phase"&&ce.mustBe&&ce.mustBe!==b&&L.push(ce.reason||"Phase incorrecte."),ce.type==="stat_below_percent"&&ce.who==="self"&&ce.stat==="hp"){const Le=Math.max(1,d.maxHp||1),bt=d.hp/Le;typeof ce.percentMax=="number"&&bt>=ce.percentMax&&L.push(ce.reason||`PV trop hauts (>= ${Math.round(ce.percentMax*100)}%).`)}if(ce.type==="distance_max"&&ye==="enemy"){const Le=qs();Le!==null&&typeof ce.max=="number"&&Le>ce.max&&L.push(ce.reason||`Distance > ${ce.max}.`)}if(ce.type==="distance_between"&&ye==="enemy"){const Le=qs();Le!==null&&(typeof ce.min=="number"&&Le<ce.min&&L.push(ce.reason||`Distance < ${ce.min}.`),typeof ce.max=="number"&&Le>ce.max&&L.push(ce.reason||`Distance > ${ce.max}.`))}if(ce.type==="resource_at_least"&&ce.resource){const Le=typeof ce.pool=="string"?ce.pool:void 0,bt=Vs(String(ce.resource),Le),$e=typeof ce.value=="number"?ce.value:1;if(bt<$e){const je=Le?` (${Le})`:"";L.push(ce.reason||`Ressource insuffisante: ${ce.resource}${je} (${bt}/${$e}).`)}}}return{enabled:L.length===0,reasons:L,details:$}}function Xl(k){var ke,ae,ye,be,ue,Ne;const L=Number(wr.niveauGlobal||1),$=Number(((ae=(ke=wr.caracs)==null?void 0:ke.force)==null?void 0:ae.modFOR)||0),W=Number(((be=(ye=wr.caracs)==null?void 0:ye.dexterite)==null?void 0:be.modDEX)||0),se=Number(((Ne=(ue=wr.caracs)==null?void 0:ue.constitution)==null?void 0:Ne.modCON)||0);return k.replace(/\s+/g,"").replace(/niveau/gi,String(L)).replace(/modFOR/gi,String($)).replace(/modDEX/gi,String(W)).replace(/modCON/gi,String(se))}function ql(k){var $;const L=[];if(k.perTurn&&L.push(`${k.perTurn}/tour`),k.perEncounter&&L.push(`${k.perEncounter}/rencontre`),($=k.resource)!=null&&$.name){const W=k.resource.pool?` (${k.resource.pool})`:"";L.push(`Ressource: ${k.resource.name}${W}`)}return L.length?L.join(" | "):"Libre"}function Ui(k){const{range:L,target:$}=k;return L.shape==="self"?"Portee: soi-meme":L.min===L.max?`Portee: ${L.max} (${$})`:`Portee: ${L.min}-${L.max} (${$})`}function Hi(k){switch(k.type){case"phase":return`Phase requise: ${k.mustBe??"?"}`;case"distance_max":return`Distance <= ${k.max??"?"}`;case"distance_between":return`Distance ${k.min??0}-${k.max??"?"}`;case"stat_below_percent":return`Stat ${k.stat} < ${Math.round((k.percentMax??0)*100)}%`;case"target_alive":return"Cible doit etre vivante";case"resource_at_least":return`Ressource ${k.resource??"?"} >= ${k.value??"?"}`;default:return k.reason||k.type}}function li(k){switch(k.type){case"damage":return`Degats ${k.damageType??""} (${k.formula??"?"})`;case"heal":return`Soin (${k.formula??"?"})`;case"status":return`Etat: ${k.status??"?"} (${k.duration??"?"} tour)`;case"temp_hp":return`PV temporaires: ${k.amount??"?"}`;case"move":return`Deplacement +${k.maxSteps??"?"} (${k.direction??"direction libre"})`;case"resource_spend":return`Consomme ${k.amount??1} ${k.resource??"ressource"}`;case"modify_path_limit":return`+${k.delta??"?"} cases de mouvement ce tour`;default:return k.type}}function Gi(k){var W;const L=(W=k.targeting)==null?void 0:W.range;if(!L)return;const $=`preview-${k.id}`;if(L.shape==="rectangle"){Ln([{id:$,kind:"rectangle",width:Math.max(1,L.max),height:Math.max(1,L.max)}]),fe(`Previsualisation rectangle pour ${k.name}.`);return}if(L.shape==="cone"){Ln([{id:$,kind:"cone",range:Math.max(1,L.max),direction:"right"}]),fe(`Previsualisation cone (direction droite) pour ${k.name}.`);return}Ln([{id:$,kind:"circle",radius:Math.max(1,L.max)}]),fe(`Previsualisation de portee pour ${k.name}.`)}function aa(k){var ae,ye,be;const L=(ae=k.actionCost)==null?void 0:ae.actionType,$=L==="action",W=L==="bonus";if($&&lr.usedAction){fe(`Action ${k.name} refusee: action principale deja utilisee ce tour.`);return}if(W&&lr.usedBonus){fe(`Action ${k.name} refusee: action bonus deja utilisee ce tour.`);return}const se=ai(k);if(!se.enabled){fe(`Action ${k.name} bloque: ${se.reasons.join(" | ")}`);return}ur(ue=>({turn:{...ue.turn,[k.id]:(ue.turn[k.id]??0)+1},encounter:{...ue.encounter,[k.id]:(ue.encounter[k.id]??0)+1}}));for(const ue of k.effects||[]){if(ue.type==="modify_path_limit"&&typeof ue.delta=="number"&&(Os(Ne=>Math.max(1,Ne+ue.delta)),typeof ue.delta=="number"&&fe(`Mouvement: limite de trajet modifiee (${ue.delta>=0?"+":""}${ue.delta}).`)),ue.type==="resource_spend"&&ue.resource){const Ne=typeof ue.pool=="string"?ue.pool:null,Me=typeof ue.amount=="number"?ue.amount:1,Ae=Gs(String(ue.resource),Ne);$s(Ee=>({...Ee,[Ae]:Math.max(0,(Ee[Ae]??0)-Me)}))}if(ue.type==="heal"&&typeof ue.formula=="string"){const Ne=Xl(ue.formula),Me=eh(Ne,{isCrit:!1,critRule:"double-dice"}),Ae=typeof ue.min=="number"?ue.min:null,Ee=Ae!==null?Math.max(Ae,Me.total):Me.total;f(Ie=>({...Ie,hp:Math.min(Ie.maxHp,Ie.hp+Ee)})),hr(`Soin (${k.name}) : ${Ne} -> +${Ee} PV`)}ue.type==="log"&&typeof ue.message=="string"&&fe(ue.message)}Er(k.id),Yn(null),ri(null),ii(!1),Di(ue=>({usedAction:ue.usedAction||$,usedBonus:ue.usedBonus||W}));const ke=((ye=k.aiHints)==null?void 0:ye.successLog)||"Action validee. Prets pour les jets.";fe(`${k.name}: ${ke}`),((be=k.targeting)==null?void 0:be.target)==="enemy"?(Jt("selecting"),cr(null),fe("Selection de cible: cliquez sur un ennemi sur la grille ou dans la liste.")):(Jt("none"),cr(null))}function ui(){return Mr&&zt.find(k=>k.id===Mr)||null}function Ks(k){return k?k.attack||k.damage||k.skillCheck?!0:(k.effects||[]).some($=>typeof $.formula=="string"&&$.formula.trim().length>0):!1}function Vi(){var ae,ye;if(Vt||Ut(d))return;const k=ui();if(!k){fe("Aucune action validee pour lancer un jet.");return}if(!k.attack){fe("Cette action ne requiert pas de jet de touche.");return}if(Jo){fe("Jet de touche deja effectue pour cette action ce tour. Validez une nouvelle action ou terminez le tour.");return}let L=null;if(((ae=k.targeting)==null?void 0:ae.target)==="enemy"){if(!wt){fe("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet.");return}const be=x.find(ue=>ue.id===wt);if(!be){fe("Cible ennemie introuvable ou deja vaincue.");return}L=typeof be.armorClass=="number"?be.armorClass:null}const $=z0(k.attack.bonus,Rr,k.attack.critRange??20);Yn($),ii(!0),ri(null);const W=$.mode==="normal"?`${$.d20.total}`:`${$.d20.rolls.join(" / ")} -> ${$.d20.total}`,se=((ye=k.targeting)==null?void 0:ye.target)==="enemy"&&wt?` sur ${wt}`:"",ke=`Jet de touche (${k.name})${se} : ${W} + ${$.bonus} = ${$.total}`;if(L!==null){const ue=$.total>=L||$.isCrit?`TOUCHE (CA ${L})${$.isCrit?" (critique!)":""}`:`RATE (CA ${L})`;hr(`${ke} -> ${ue}`)}else hr(`${ke}${$.isCrit?" (critique!)":""}`)}function Br(){var be,ue,Ne;if(Vt||Ut(d))return;const k=ui();if(!k){fe("Aucune action validee pour lancer un jet.");return}if(!k.damage){fe("Cette action ne requiert pas de jet de degats.");return}if(k.attack&&!Gt){fe("Un jet de touche est requis avant les degats pour cette action.");return}let L=null,$=null;if(((be=k.targeting)==null?void 0:be.target)==="enemy"){if(!wt){fe("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet de degats.");return}if(L=x.findIndex(Ae=>Ae.id===wt),L===-1){fe("Cible ennemie introuvable ou deja vaincue.");return}const Me=x[L];$=typeof Me.armorClass=="number"?Me.armorClass:null}const W=!!(Gt!=null&&Gt.isCrit);if($!==null&&k.attack&&Gt){const Me=Gt.total;if(!(Me>=$||Gt.isCrit)){const Ee=((ue=k.targeting)==null?void 0:ue.target)==="enemy"&&wt?` sur ${wt}`:"";fe(`L'attaque (${k.name})${Ee} a manque la cible (CA ${$}). Pas de degats.`),wt&&mn({round:_,phase:b,kind:"player_attack",actorId:d.id,actorKind:"player",targetId:wt,targetKind:"enemy",summary:`Le heros attaque ${wt} (${k.name}) mais manque (CA ${$}).`,data:{actionId:k.id,attackTotal:Me,targetArmorClass:$,hit:!1}});return}}const se=eh(k.damage.formula,{isCrit:W,critRule:k.damage.critRule});ri(se);const ke=se.dice.map(Me=>Me.rolls.join("+")).join(" | "),ae=se.total,ye=((Ne=k.targeting)==null?void 0:Ne.target)==="enemy"&&wt?` sur ${wt}`:"";hr(`Degats (${k.name})${ye} : ${ke||"0"} + ${se.flatModifier} = ${ae}${W?" (critique)":""}`),typeof L=="number"&&L>=0&&v(Me=>{if(L===null||L<0||L>=Me.length)return Me;const Ae=[...Me],Ee={...Ae[L]},Ie=Ee.hp;return Ee.hp=Math.max(0,Ee.hp-ae),Ae[L]=Ee,mn({round:_,phase:b,kind:"player_attack",actorId:d.id,actorKind:"player",targetId:Ee.id,targetKind:"enemy",summary:`Le heros frappe ${Ee.id} et inflige ${ae} degats (PV ${Ie} -> ${Ee.hp}).`,data:{actionId:k.id,damage:ae,isCrit:W,targetHpBefore:Ie,targetHpAfter:Ee.hp}}),Ee.hp<=0&&Ie>0&&mn({round:_,phase:b,kind:"death",actorId:Ee.id,actorKind:"enemy",summary:`${Ee.id} s'effondre, hors de combat.`,targetId:Ee.id,targetKind:"enemy",data:{killedBy:d.id}}),Ae})}function $r(){const k=ui();if(!k){fe("Aucune action validee pour lancer un jet.");return}if(!k.attack){fe("Mode auto: pas de jet de touche necessaire."),k.damage&&Br();return}Vi(),setTimeout(()=>{k.damage&&Br()},50)}function Kl(k){if(b!=="player"||Vt||Ut(d))return;const L=r.current;if(!L)return;const $=L.querySelector("canvas");if(!$)return;const W=$.getBoundingClientRect(),se=k.clientX-W.left,ke=k.clientY-W.top,ae=Xe.current;if(!ae)return;const ye=(se-ae.offsetX)/ae.scale,be=(ke-ae.offsetY)/ae.scale;if(ye<0||be<0||ye>Bo||be>Tl)return;const{x:ue,y:Ne}=zg(ye,be),Me=ue,Ae=Ne;if(!Tr(Me,Ae))return;if(Lr==="selecting"){const Ie=[d,...x],ce=Tc({x:Me,y:Ae},Ie);if(!ce||ce.type!=="enemy"){fe(`Pas d'ennemi sur (${Me}, ${Ae}).`);return}const Le=ui();if(!Le){fe("Aucune action validee pour selectionner une cible.");return}const bt=en(Le,ce,d,[d,...x]);if(!bt.ok){fe(bt.reason||"Cette cible n'est pas valide pour cette action.");return}cr(ce.id),Jt("none"),fe(`Cible selectionnee: ${ce.id}.`);return}if(In!=="moving"){const Ie=[d,...x],ce=Tc({x:Me,y:Ae},Ie)??null;Ns({open:!0,anchorX:se,anchorY:ke,cell:{x:Me,y:Ae},token:ce});return}const Ee=(Ie,ce)=>x.some(Le=>Le.hp>0&&Le.x===Ie&&Le.y===ce);if(Ee(Me,Ae)){fe(`Case (${Me}, ${Ae}) occupee par un ennemi : impossible de s'y deplacer.`);return}Ir(Ie=>{const ce=Math.max(1,Ds),Le=[...Ie];if(Le.length>=ce)return fe("Limite de 5 cases atteinte pour ce tour."),Le;let bt=Le.length>0?Le[Le.length-1]:{x:d.x,y:d.y};if(bt.x===Me&&bt.y===Ae)return Le;let $e=bt.x,je=bt.y,vt=ce-Le.length;for(;$e!==Me&&vt>0;){const Ct=Math.sign(Me-$e),ft=$e+Ct;if(Ee(ft,je)){fe(`Trajectoire bloquee par un ennemi en (${ft}, ${je}).`);break}$e=ft,Le.push({x:$e,y:je}),vt--}for(;je!==Ae&&vt>0;){const Ct=Math.sign(Ae-je),ft=je+Ct;if(Ee($e,ft)){fe(`Trajectoire bloquee par un ennemi en (${$e}, ${ft}).`);break}je=ft,Le.push({x:$e,y:je}),vt--}return fe(vt===0&&($e!==Me||je!==Ae)?"Trajectoire tronquee: limite de 5 cases atteinte.":`Trajectoire: ajout de la case (${Me}, ${Ae}).`),Le})}function Yi(){if(b!=="player"||Vt||Ut(d)||Pt.length===0)return;const k=Pt[Pt.length-1],L={x:d.x,y:d.y};f($=>({...$,x:k.x,y:k.y})),fe(`Deplacement valide vers (${k.x}, ${k.y}) via ${Pt.length} etape(s).`),mn({round:_,phase:"player",kind:"move",actorId:d.id,actorKind:"player",summary:`Le heros se deplace de (${L.x}, ${L.y}) vers (${k.x}, ${k.y}).`,data:{from:L,to:{x:k.x,y:k.y},steps:Pt.length}}),Ir([]),zr("idle"),hn()}function Ge(){b==="player"&&(Vt||(Ir([]),fe("Trajectoire reinitialisee.")))}function la(){const k={id:d.id,x:d.x,y:d.y,hp:d.hp,maxHp:d.maxHp},L=x.map($=>({id:$.id,x:$.x,y:$.y,hp:$.hp,maxHp:$.maxHp,type:$.enemyTypeId,aiRole:$.aiRole??null,moveRange:$.moveRange??null,attackDamage:$.attackDamage??null,attackRange:$.attackRange??null,maxAttacksPerTurn:$.maxAttacksPerTurn??null,actionIds:$.actionIds??null}));return{round:_,phase:b,grid:{cols:kr,rows:ar},player:k,enemies:L,actionsCatalog:xt.map($=>{var W,se,ke,ae,ye,be,ue,Ne;return{id:$.id,name:$.name,category:String($.category??""),targeting:{target:String(((W=$.targeting)==null?void 0:W.target)??""),range:{min:Number(((ke=(se=$.targeting)==null?void 0:se.range)==null?void 0:ke.min)??0),max:Number(((ye=(ae=$.targeting)==null?void 0:ae.range)==null?void 0:ye.max)??0),shape:String(((ue=(be=$.targeting)==null?void 0:be.range)==null?void 0:ue.shape)??"")},requiresLos:!!((Ne=$.targeting)!=null&&Ne.requiresLos)}}})}}function ua(k){const L=new Set(x.map(W=>W.id)),$=[];for(const W of k){if(!W||typeof W!="object"||typeof W.enemyId!="string"||!L.has(W.enemyId)||typeof W.actionId!="string"||!W.actionId.trim())continue;const se=W.target;let ke={kind:"none"};se&&typeof se=="object"&&(se.kind==="token"&&typeof se.tokenId=="string"?ke={kind:"token",tokenId:se.tokenId}:se.kind==="cell"&&typeof se.x=="number"&&typeof se.y=="number"&&(ke={kind:"cell",x:se.x,y:se.y}));const ae=W.advantageMode,ye=ae==="advantage"||ae==="disadvantage"?ae:"normal";$.push({enemyId:W.enemyId,actionId:W.actionId.trim(),target:ke,advantageMode:ye})}return $}async function Qs(k){console.log("[enemy-ai] Envoi etat au backend:",k),Ul(k),ta(null),cn(!1);try{const L=await fetch("/api/enemy-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!L.ok)throw new Error(`HTTP ${L.status}`);const $=await L.json();if(!$.intents||!Array.isArray($.intents))throw new Error("Reponse backend invalide (intents manquant).");const W=ua($.intents);return Wi(W),W.length===0&&cn(!0),W}catch(L){return ta(L instanceof Error?L.message:String(L??"unknown")),Wi(null),cn(!0),[]}}async function ca(k,L,$){const W=$.find(Ie=>Ie.id===k);if(!W||Ut(W))return;const se=[L,...$],ke=L0(W,se),ae=ke.filter(Ie=>Ie.type==="enemy"&&Ie.id!==k&&!Ut(Ie)).map(Ie=>Ie.id),ye=ke.filter(Ie=>Ie.type==="player"&&!Ut(Ie)).map(Ie=>Ie.id),be=o1(W,L,se),ue=bs(W,L),Ne=W.maxHp>0?W.hp/W.maxHp:0,Me={language:"fr",maxLines:2,enemyId:k,enemyTypeId:W.enemyTypeId??null,aiRole:W.aiRole??null,speechProfile:W.speechProfile??null,perception:{canSeePlayer:be,distanceToPlayer:Number.isFinite(ue)?ue:null,hpRatio:Number.isFinite(Ne)?Ne:0,alliesVisible:ae,enemiesVisible:ye,lastKnownPlayerPos:be?{x:L.x,y:L.y}:null},priorSpeechesThisRound:T3(),selfLastSpeech:P3(k),recentEvents:M3(16)},Ee=((await L3(Me)).line??"").trim();if(!Ee){oa(k);return}Yl(k,Ee),A3(k,Ee)}async function ha(k){var Ee,Ie,ce,Le,bt;E(!0),Ir([]),Ln([]);const L=x.map($e=>({...$e}));let $={...d};const W=L.find($e=>$e.id===k);if(!W||Ut(W)){E(!1),tt();return}const se=la(),ae=(await Qs(se)).filter($e=>$e.enemyId===k),ye=[$,...L],be=Array.isArray(W.actionIds)&&W.actionIds.length?W.actionIds:["enemy-move","enemy-melee-strike"],ue=$e=>xt.find(je=>je.id===$e)??null,Ne=($e,je,vt)=>{const Ct=ue($e);if(!Ct)return{ok:!1,reason:`Action inconnue: ${$e}`};if(!be.includes($e))return{ok:!1,reason:`Action non autorisee pour ${W.id}: ${$e}`};const ft=S3(Ct,{round:_,phase:"enemies",actor:W,player:$,enemies:L,sampleCharacter:wr,onLog:fe,emitEvent:nt=>{mn({round:_,phase:"enemies",kind:nt.kind,actorId:nt.actorId,actorKind:nt.actorKind,targetId:nt.targetId??null,targetKind:nt.targetKind??null,summary:nt.summary,data:nt.data??{}})}},je,{advantageMode:vt});if(!ft.ok||!ft.playerAfter||!ft.enemiesAfter)return{ok:!1,reason:ft.reason||"Echec de resolution."};$=ft.playerAfter;for(let nt=0;nt<L.length;nt++)L[nt]=ft.enemiesAfter[nt]??L[nt];return{ok:!0,action:Ct}};let Me=!1;if(ae.length>0){const $e=ae[0],je=$e.target;let vt={kind:"none"};if(je.kind==="token"){const ft=ye.find(nt=>nt.id===je.tokenId)??null;ft&&(vt={kind:"token",token:ft})}else je.kind==="cell"&&(vt={kind:"cell",x:je.x,y:je.y});const Ct=Ne($e.actionId,vt,$e.advantageMode);Ct.ok?cn(!1):(Me=!0,fe(`${W.id}: intent IA invalide (${Ct.reason}).`))}else Me=!0;if(Me)if(cn(!0),!o1(W,$,ye))fe(`${W.id} ne voit pas le joueur et reste en alerte.`);else{const je=bs(W,$),vt=be.includes("enemy-bow-shot"),Ct=be.includes("enemy-melee-strike"),ft=be.includes("enemy-move"),nt=typeof W.moveRange=="number"?W.moveRange:3,dr=W.aiRole==="archer",Js=dr?3:1,eu=dr?2:0;let wn=!1;const ma=()=>{let De=null,pt=-1;for(let Yt=-nt;Yt<=nt;Yt++)for(let Jn=-nt;Jn<=nt;Jn++){const ga=Math.abs(Yt)+Math.abs(Jn);if(ga===0||ga>nt)continue;const Qi=W.x+Yt,Zi=W.y+Jn;if(!Tr(Qi,Zi)||Tc({x:Qi,y:Zi},ye))continue;const Ji=bs({x:Qi,y:Zi},$);Ji>pt&&(pt=Ji,De={x:Qi,y:Zi})}return De};if(!wn&&$.hp>0&&dr&&vt){const De=ue("enemy-bow-shot"),pt=((Ie=(Ee=De==null?void 0:De.targeting)==null?void 0:Ee.range)==null?void 0:Ie.min)??2,Yt=((Le=(ce=De==null?void 0:De.targeting)==null?void 0:ce.range)==null?void 0:Le.max)??6;if(je>=pt&&je<=Yt){const Jn=Ne("enemy-bow-shot",{kind:"token",token:$});Jn.ok&&(mn({round:_,phase:"enemies",kind:"enemy_attack",actorId:W.id,actorKind:"enemy",targetId:$.id,targetKind:"player",summary:`${W.id} tire a distance (${Jn.action.name}).`,data:{actionId:Jn.action.id,fallback:!0}}),wn=!0)}}if(!wn&&$.hp>0&&dr&&ft&&je<=eu){const De=ma();if(De){const pt={x:W.x,y:W.y},Yt=Ne("enemy-move",{kind:"cell",x:De.x,y:De.y});Yt.ok&&(mn({round:_,phase:"enemies",kind:"move",actorId:W.id,actorKind:"enemy",summary:`${W.id} recule de (${pt.x}, ${pt.y}) vers (${De.x}, ${De.y}).`,data:{from:pt,to:De,fallback:!0,actionId:Yt.action.id}}),wn=!0)}}if(!wn&&$.hp>0&&!dr&&Ct&&je<=1){const De=Ne("enemy-melee-strike",{kind:"token",token:$});De.ok&&(mn({round:_,phase:"enemies",kind:"enemy_attack",actorId:W.id,actorKind:"enemy",targetId:$.id,targetKind:"player",summary:`${W.id} attaque au contact (${De.action.name}).`,data:{actionId:De.action.id,fallback:!0}}),wn=!0)}if(!wn&&$.hp>0&&ft){let De=null;if(dr)if(je>Js){const pt=th(W,{x:$.x,y:$.y},ye,{maxDistance:nt,allowTargetOccupied:!1});pt.length&&(De=pt[pt.length-1])}else De=ma();else{const pt=th(W,{x:$.x,y:$.y},ye,{maxDistance:nt,allowTargetOccupied:!1});pt.length&&(De=pt[pt.length-1])}if(De){const pt={x:W.x,y:W.y},Yt=Ne("enemy-move",{kind:"cell",x:De.x,y:De.y});Yt.ok&&(mn({round:_,phase:"enemies",kind:"move",actorId:W.id,actorKind:"enemy",summary:`${W.id} se deplace de (${pt.x}, ${pt.y}) vers (${De.x}, ${De.y}).`,data:{from:pt,to:De,fallback:!0,actionId:Yt.action.id}}),wn=!0)}}if(!wn&&$.hp>0&&dr&&Ct&&je<=1){const De=Ne("enemy-melee-strike",{kind:"token",token:$});De.ok&&(mn({round:_,phase:"enemies",kind:"enemy_attack",actorId:W.id,actorKind:"enemy",targetId:$.id,targetKind:"player",summary:`${W.id} attaque au contact (${De.action.name}).`,data:{actionId:De.action.id,fallback:!0}}),wn=!0)}}f($),v(L);try{await ca(k,$,L)}catch{}const Ae=Gl();if(e.current&&((bt=Ae.entry)==null?void 0:bt.kind)==="player")try{const $e=oi("player",$,L),je=E3({focusActorId:$.id??null,stateEnd:$e});if(je){const vt=await I3(je),Ct=(vt.error||vt.summary||"").trim();Ct&&Xs(Ct)}}catch{Xs("IA non fonctionnel.")}finally{R3(),e.current=!1}E(!1),tt()}function da(){if(Vt)return;const k=Ys();!k||k.kind!=="player"||(fe(`Fin du tour joueur (round ${_}).`),e.current=!0,mn({round:_,phase:"player",kind:"turn_end",actorId:d.id,actorKind:"player",summary:`Fin du tour du heros (round ${_}).`}),tt())}function Zs(){Ln([{id:"demo-circle",kind:"circle",radius:2}]),fe("Zone d'effet: cercle (rayon 2) autour du joueur.")}function Xi(){Ln([{id:"demo-rect",kind:"rectangle",width:3,height:3}]),fe("Zone d'effet: rectangle 3x3 centre sur le joueur.")}function qn(){Ln([{id:"demo-cone",kind:"cone",range:4,direction:"right"}]),fe("Zone d'effet: cone vers la droite (portee 4).")}function Kn(){Ln([]),fe("Zones d'effet effacees.")}J.useEffect(()=>{Vt||d.hp<=0&&([d,...x].some(L=>L.type==="player"&&!Ut(L))||ra(!0))},[d,x,Vt]);const _n=zt.find(k=>k.id===un)||zt[0]||null,ci=_n?ai(_n):null,Qn=ui(),Zn=Ks(Qn),hi=Mt&&zt.find(k=>k.id===Mt.actionId)||null,di=hi?ai(hi):null,fi=(Mt==null?void 0:Mt.stage)==="active"&&hi&&Mr===hi.id?{enabled:!0,reasons:[],details:(di==null?void 0:di.details)??[]}:di,Ql=Ys(),fa=U;if(!me)return C.jsx(H6,{configEnemyCount:we,enemyTypeCount:m.length,gridCols:kr,gridRows:ar,onChangeEnemyCount:Ze,onNoEnemyTypes:()=>fe("Aucun type d'ennemi charge (enemyTypes). Impossible de generer le combat."),onStartCombat:sa});const qi=b==="player"&&!Vt&&!Ut(d);function pa(k){const L=(Be==null?void 0:Be.anchorX)??0,$=(Be==null?void 0:Be.anchorY)??0;Zt(k.id),Oi({anchorX:L,anchorY:$,actionId:k.id,stage:"draft"}),hn()}function Zl(){Oi(null),Jt("none")}function pi(k){aa(k),Oi(L=>L&&{...L,actionId:k.id,stage:"active"})}function mi(){const k=Be==null?void 0:Be.cell;if(!k)return;const L=Be==null?void 0:Be.token;L?L.type==="player"?fe(`Inspection: joueur (${L.id}) en (${L.x}, ${L.y}), PV ${L.hp}/${L.maxHp}.`):fe(`Inspection: ennemi (${L.id}) en (${L.x}, ${L.y}), PV ${L.hp}/${L.maxHp}.`):fe(`Inspection: case (${k.x}, ${k.y}).`),hn()}function Dr(){const k=Be==null?void 0:Be.cell;fe(k?`Interagir: (a integrer) sur (${k.x}, ${k.y}).`:"Interagir: (a integrer)."),hn()}function Ki(){fe("Se cacher: (a integrer)."),hn()}const Jl=[{id:"combat",label:"Combat",content:C.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"flex-start"},children:[C.jsx("div",{style:{flex:"1 1 340px",minWidth:340},children:C.jsx(G6,{round:_,phase:b,playerInitiative:D,player:d,selectedPath:Pt,sampleCharacter:wr,aiLastState:si,aiLastIntents:jr,aiUsedFallback:na,aiLastError:Hl})}),C.jsx("div",{style:{flex:"1 1 340px",minWidth:340},children:C.jsx(V6,{enemies:x,player:d,capabilities:f9,validatedAction:Qn,selectedTargetId:wt,describeEnemyLastDecision:ia,validateEnemyTargetForAction:en,onSelectTargetId:cr,onSetTargetMode:Jt,onLog:fe})}),C.jsx("div",{style:{flex:"1 1 340px",minWidth:340},children:C.jsx(K6,{actions:zt,selectedAction:_n,selectedAvailability:ci,computeActionAvailability:ai,onSelectActionId:Zt,describeRange:Ui,describeUsage:ql,conditionLabel:Hi,effectLabel:li,onPreviewActionArea:Gi,onValidateAction:aa})}),Zn&&C.jsx("div",{style:{flex:"1 1 340px",minWidth:340},children:C.jsx(Q6,{validatedAction:Qn,advantageMode:Rr,onSetAdvantageMode:ni,onRollAttack:Vi,onRollDamage:Br,onAutoResolve:$r,attackRoll:Gt,damageRoll:$i,diceLogs:Bs})})]})},{id:"effects",label:"Effets",content:C.jsx("div",{style:{maxWidth:520},children:C.jsx(Z6,{showVisionDebug:Fr,onShowCircle:Zs,onShowRectangle:Xi,onShowCone:qn,onToggleVisionDebug:()=>Us(k=>!k),onClear:Kn})})},{id:"logs",label:"Logs",content:C.jsx(J6,{log:t})}];return C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",height:"100vh",overflow:"hidden",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:"16px",boxSizing:"border-box",position:"relative"},children:[Vt&&C.jsx(Y6,{onRestart:()=>window.location.reload()}),C.jsxs("div",{style:{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",gap:10,minHeight:0,overflow:"hidden"},children:[C.jsx("div",{style:{flex:"0 0 auto",padding:"10px 12px",borderRadius:14,background:"rgba(12,12,18,0.88)",border:"1px solid rgba(255,255,255,0.10)",boxShadow:"0 18px 60px rgba(0,0,0,0.35)"},children:C.jsx(X6,{round:_,timelineEntries:fa,activeEntry:Ql,player:d,enemies:x})}),C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",padding:"0 4px"},children:[C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[C.jsx("span",{style:{fontSize:18,fontWeight:900,letterSpacing:.4},children:"Mini Donjon"}),C.jsx("span",{style:{fontSize:12,color:"rgba(255,255,255,0.70)"},children:"Clic gauche: roue d'actions  Deplacer: clics successifs (max 5)"})]}),C.jsx("span",{style:{fontSize:12,color:"rgba(255,255,255,0.65)"},children:b==="player"?"Tour joueur":"Tour ennemis"})]}),C.jsx("div",{style:{flex:"1 1 auto",minHeight:0,borderRadius:18,padding:10,background:"radial-gradient(1200px 500px at 40% 0%, rgba(120,90,40,0.20), rgba(12,12,18,0.92))",border:"1px solid rgba(255,255,255,0.12)",boxShadow:"0 25px 90px rgba(0,0,0,0.55)",overflow:"visible"},children:C.jsxs("div",{ref:r,onClick:Kl,onContextMenu:k=>{k.preventDefault()},onMouseDown:k=>{k.button===2&&(k.preventDefault(),k.stopPropagation(),Te(!0),Pe.current={x:k.clientX,y:k.clientY})},onMouseMove:k=>{if(!Se)return;const L=Pe.current;if(!L)return;const $=k.clientX-L.x,W=k.clientY-L.y;$===0&&W===0||(Pe.current={x:k.clientX,y:k.clientY},H(se=>({x:se.x+$,y:se.y+W})))},onMouseUp:k=>{k.button===2&&(Te(!1),Pe.current=null)},onMouseLeave:()=>{Te(!1),Pe.current=null},style:{width:"100%",height:"100%",minHeight:0,borderRadius:14,border:"1px solid rgba(255,255,255,0.10)",background:"#05050a",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible",cursor:Se?"grabbing":"default"},children:[C.jsxs("div",{onMouseDown:k=>k.stopPropagation(),style:{position:"absolute",right:12,top:12,zIndex:45,display:"flex",flexDirection:"column",gap:6,padding:8,borderRadius:12,background:"rgba(10, 10, 16, 0.72)",border:"1px solid rgba(255,255,255,0.14)",backdropFilter:"blur(6px)",boxShadow:"0 14px 40px rgba(0,0,0,0.35)"},children:[C.jsx("button",{type:"button",onClick:()=>ie(k=>Rl(Math.round((k+re)*10)/10,ee,ne)),disabled:Q>=ne-1e-6,style:{width:34,height:34,borderRadius:10,border:"1px solid rgba(255,255,255,0.14)",background:Q>=ne-1e-6?"rgba(80,80,90,0.55)":"rgba(255,255,255,0.08)",color:"#fff",cursor:Q>=ne-1e-6?"default":"pointer",fontSize:18,fontWeight:800,lineHeight:1},title:"Zoom +",children:"+"}),C.jsxs("div",{style:{textAlign:"center",fontSize:12,color:"rgba(255,255,255,0.75)",fontWeight:700},title:"Niveau de zoom",children:[Math.round(Q*100),"%"]}),C.jsx("button",{type:"button",onClick:()=>ie(k=>Rl(Math.round((k-re)*10)/10,ee,ne)),disabled:Q<=ee+1e-6,style:{width:34,height:34,borderRadius:10,border:"1px solid rgba(255,255,255,0.14)",background:Q<=ee+1e-6?"rgba(80,80,90,0.55)":"rgba(255,255,255,0.08)",color:"#fff",cursor:Q<=ee+1e-6?"default":"pointer",fontSize:22,fontWeight:800,lineHeight:1},title:"Zoom -",children:""}),C.jsx("button",{type:"button",onClick:()=>ie(1),disabled:Math.abs(Q-1)<1e-6,style:{marginTop:4,width:34,height:28,borderRadius:10,border:"1px solid rgba(255,255,255,0.14)",background:Math.abs(Q-1)<1e-6?"rgba(80,80,90,0.55)":"rgba(255,255,255,0.06)",color:"rgba(255,255,255,0.85)",cursor:Math.abs(Q-1)<1e-6?"default":"pointer",fontSize:11,fontWeight:800},title:"Reset zoom",children:"1"})]}),C.jsx(i9,{open:!!(Be!=null&&Be.open),anchorX:(Be==null?void 0:Be.anchorX)??0,anchorY:(Be==null?void 0:Be.anchorY)??0,size:240,canInteractWithBoard:qi,hasCell:!!(Be!=null&&Be.cell),selectedPathLength:Pt.length,isResolvingEnemies:M,actions:zt,computeActionAvailability:ai,onClose:hn,onEnterMoveMode:()=>{zr("moving"),hn(),fe(`Mode deplacement active: cliquez sur des cases pour tracer un trajet (max ${Ds}).`)},onValidateMove:Yi,onResetMove:()=>{Ge(),hn()},onInspect:mi,onInteract:Dr,onHide:Ki,onEndTurn:()=>{da(),hn()},onPickAction:pa}),C.jsx(o9,{open:!!Mt,anchorX:(Mt==null?void 0:Mt.anchorX)??0,anchorY:(Mt==null?void 0:Mt.anchorY)??0,stage:(Mt==null?void 0:Mt.stage)??"draft",action:hi,availability:fi,player:d,enemies:x,validatedAction:Qn,targetMode:Lr,selectedTargetId:wt,onSelectTargetId:cr,onSetTargetMode:Jt,advantageMode:Rr,onSetAdvantageMode:ni,onRollAttack:Vi,onRollDamage:Br,onAutoResolve:$r,attackRoll:Gt,damageRoll:$i,diceLogs:Bs,onValidateAction:pi,onClose:Zl}),In==="moving"&&C.jsxs("div",{onMouseDown:k=>k.stopPropagation(),style:{position:"absolute",left:10,bottom:10,zIndex:40,display:"flex",gap:8,padding:"8px 10px",borderRadius:10,background:"rgba(10, 10, 16, 0.75)",border:"1px solid rgba(255,255,255,0.14)",backdropFilter:"blur(6px)",boxShadow:"0 14px 40px rgba(0,0,0,0.35)"},children:[C.jsx("span",{style:{fontSize:12,alignSelf:"center",color:"#cfd3ff"},children:"Mode deplacement"}),C.jsx("button",{type:"button",onClick:()=>zr("idle"),style:{padding:"4px 8px",background:"#34495e",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:12},children:"Quitter"}),C.jsx("button",{type:"button",onClick:Ge,disabled:Pt.length===0,style:{padding:"4px 8px",background:Pt.length?"#e67e22":"#555",color:"#fff",border:"none",borderRadius:6,cursor:Pt.length?"pointer":"default",fontSize:12},children:"Annuler"}),C.jsx("button",{type:"button",onClick:Yi,disabled:Pt.length===0,style:{padding:"4px 8px",background:Pt.length?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:6,cursor:Pt.length?"pointer":"default",fontSize:12,fontWeight:600},children:"Valider"})]})]})}),C.jsx(q6,{round:_,narrativeLog:o})]}),C.jsx(a9,{tabs:Jl,defaultTabId:"combat",collapsible:!0,collapsedByDefault:!0,collapsedHeight:52,expandedHeight:320})]})},m9=document.getElementById("root");Ig.createRoot(m9).render(C.jsx(p9,{}));export{A5 as $,Pp as A,ln as B,yn as C,et as D,xe as E,J0 as F,Dl as G,C1 as H,Is as I,q5 as J,ix as K,Qo as L,Oe as M,yt as N,lt as O,Ht as P,bx as Q,hh as R,Eh as S,gl as T,ah as U,T1 as V,Bc as W,P1 as X,P5 as Y,Es as Z,kt as _,gp as a,q0 as a0,Mp as a1,Fe as a2,Ke as a3,Tx as a4,Qx as a5,Hx as a6,g8 as a7,x8 as a8,S8 as a9,C8 as aa,A8 as ab,Hp as ac,U1 as ad,N1 as ae,m0 as af,or as ag,T4 as ah,st as ai,Bi as aj,q3 as ak,qo as al,C0 as am,Yp as an,Un as b,Nx as c,Yo as d,$t as e,W1 as f,$x as g,Ml as h,Mh as i,Cp as j,op as k,Hn as l,_p as m,Ko as n,m8 as o,y8 as p,w8 as q,u5 as r,k8 as s,Ue as t,X3 as u,T8 as v,ot as w,Rn as x,V0 as y,Wn as z};
