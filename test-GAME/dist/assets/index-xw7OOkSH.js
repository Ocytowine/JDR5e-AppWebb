const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-C1DhD64G.js","assets/webworkerAll-BXZLQuQu.js","assets/colorToUniform-mpwsTOLU.js","assets/WebGPURenderer-B-VVkoef.js","assets/SharedSystems-DxpwknqW.js","assets/WebGLRenderer-DCkHzk4j.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Hc(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Wu={exports:{}},Hs={},Gu={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af;function xg(){if(Af)return Fe;Af=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function x(I){return I===null||typeof I!="object"?null:(I=y&&I[y]||I["@@iterator"],typeof I=="function"?I:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function w(I,G,be){this.props=I,this.context=G,this.refs=b,this.updater=be||_}w.prototype.isReactComponent={},w.prototype.setState=function(I,G){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,G,"setState")},w.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function A(){}A.prototype=w.prototype;function T(I,G,be){this.props=I,this.context=G,this.refs=b,this.updater=be||_}var E=T.prototype=new A;E.constructor=T,S(E,w.prototype),E.isPureReactComponent=!0;var R=Array.isArray,X=Object.prototype.hasOwnProperty,N={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function oe(I,G,be){var Me,Re={},_e=null,Oe=null;if(G!=null)for(Me in G.ref!==void 0&&(Oe=G.ref),G.key!==void 0&&(_e=""+G.key),G)X.call(G,Me)&&!D.hasOwnProperty(Me)&&(Re[Me]=G[Me]);var Ie=arguments.length-2;if(Ie===1)Re.children=be;else if(1<Ie){for(var je=Array(Ie),ft=0;ft<Ie;ft++)je[ft]=arguments[ft+2];Re.children=je}if(I&&I.defaultProps)for(Me in Ie=I.defaultProps,Ie)Re[Me]===void 0&&(Re[Me]=Ie[Me]);return{$$typeof:i,type:I,key:_e,ref:Oe,props:Re,_owner:N.current}}function ae(I,G){return{$$typeof:i,type:I.type,key:G,ref:I.ref,props:I.props,_owner:I._owner}}function Q(I){return typeof I=="object"&&I!==null&&I.$$typeof===i}function ne(I){var G={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(be){return G[be]})}var Te=/\/+/g;function pe(I,G){return typeof I=="object"&&I!==null&&I.key!=null?ne(""+I.key):G.toString(36)}function Ee(I,G,be,Me,Re){var _e=typeof I;(_e==="undefined"||_e==="boolean")&&(I=null);var Oe=!1;if(I===null)Oe=!0;else switch(_e){case"string":case"number":Oe=!0;break;case"object":switch(I.$$typeof){case i:case e:Oe=!0}}if(Oe)return Oe=I,Re=Re(Oe),I=Me===""?"."+pe(Oe,0):Me,R(Re)?(be="",I!=null&&(be=I.replace(Te,"$&/")+"/"),Ee(Re,G,be,"",function(ft){return ft})):Re!=null&&(Q(Re)&&(Re=ae(Re,be+(!Re.key||Oe&&Oe.key===Re.key?"":(""+Re.key).replace(Te,"$&/")+"/")+I)),G.push(Re)),1;if(Oe=0,Me=Me===""?".":Me+":",R(I))for(var Ie=0;Ie<I.length;Ie++){_e=I[Ie];var je=Me+pe(_e,Ie);Oe+=Ee(_e,G,be,je,Re)}else if(je=x(I),typeof je=="function")for(I=je.call(I),Ie=0;!(_e=I.next()).done;)_e=_e.value,je=Me+pe(_e,Ie++),Oe+=Ee(_e,G,be,je,Re);else if(_e==="object")throw G=String(I),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Oe}function dt(I,G,be){if(I==null)return I;var Me=[],Re=0;return Ee(I,Me,"","",function(_e){return G.call(be,_e,Re++)}),Me}function te(I){if(I._status===-1){var G=I._result;G=G(),G.then(function(be){(I._status===0||I._status===-1)&&(I._status=1,I._result=be)},function(be){(I._status===0||I._status===-1)&&(I._status=2,I._result=be)}),I._status===-1&&(I._status=0,I._result=G)}if(I._status===1)return I._result.default;throw I._result}var se={current:null},J={transition:null},ee={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:J,ReactCurrentOwner:N};function re(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:dt,forEach:function(I,G,be){dt(I,function(){G.apply(this,arguments)},be)},count:function(I){var G=0;return dt(I,function(){G++}),G},toArray:function(I){return dt(I,function(G){return G})||[]},only:function(I){if(!Q(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Fe.Component=w,Fe.Fragment=t,Fe.Profiler=o,Fe.PureComponent=T,Fe.StrictMode=s,Fe.Suspense=d,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Fe.act=re,Fe.cloneElement=function(I,G,be){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var Me=S({},I.props),Re=I.key,_e=I.ref,Oe=I._owner;if(G!=null){if(G.ref!==void 0&&(_e=G.ref,Oe=N.current),G.key!==void 0&&(Re=""+G.key),I.type&&I.type.defaultProps)var Ie=I.type.defaultProps;for(je in G)X.call(G,je)&&!D.hasOwnProperty(je)&&(Me[je]=G[je]===void 0&&Ie!==void 0?Ie[je]:G[je])}var je=arguments.length-2;if(je===1)Me.children=be;else if(1<je){Ie=Array(je);for(var ft=0;ft<je;ft++)Ie[ft]=arguments[ft+2];Me.children=Ie}return{$$typeof:i,type:I.type,key:Re,ref:_e,props:Me,_owner:Oe}},Fe.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:l,_context:I},I.Consumer=I},Fe.createElement=oe,Fe.createFactory=function(I){var G=oe.bind(null,I);return G.type=I,G},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(I){return{$$typeof:h,render:I}},Fe.isValidElement=Q,Fe.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:te}},Fe.memo=function(I,G){return{$$typeof:m,type:I,compare:G===void 0?null:G}},Fe.startTransition=function(I){var G=J.transition;J.transition={};try{I()}finally{J.transition=G}},Fe.unstable_act=re,Fe.useCallback=function(I,G){return se.current.useCallback(I,G)},Fe.useContext=function(I){return se.current.useContext(I)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(I){return se.current.useDeferredValue(I)},Fe.useEffect=function(I,G){return se.current.useEffect(I,G)},Fe.useId=function(){return se.current.useId()},Fe.useImperativeHandle=function(I,G,be){return se.current.useImperativeHandle(I,G,be)},Fe.useInsertionEffect=function(I,G){return se.current.useInsertionEffect(I,G)},Fe.useLayoutEffect=function(I,G){return se.current.useLayoutEffect(I,G)},Fe.useMemo=function(I,G){return se.current.useMemo(I,G)},Fe.useReducer=function(I,G,be){return se.current.useReducer(I,G,be)},Fe.useRef=function(I){return se.current.useRef(I)},Fe.useState=function(I){return se.current.useState(I)},Fe.useSyncExternalStore=function(I,G,be){return se.current.useSyncExternalStore(I,G,be)},Fe.useTransition=function(){return se.current.useTransition()},Fe.version="18.3.1",Fe}var Pf;function Vc(){return Pf||(Pf=1,Gu.exports=xg()),Gu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf;function vg(){if(Tf)return Hs;Tf=1;var i=Vc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(h,d,m){var p,y={},x=null,_=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(_=d.ref);for(p in d)s.call(d,p)&&!l.hasOwnProperty(p)&&(y[p]=d[p]);if(h&&h.defaultProps)for(p in d=h.defaultProps,d)y[p]===void 0&&(y[p]=d[p]);return{$$typeof:e,type:h,key:x,ref:_,props:y,_owner:o.current}}return Hs.Fragment=t,Hs.jsx=u,Hs.jsxs=u,Hs}var Ef;function _g(){return Ef||(Ef=1,Wu.exports=vg()),Wu.exports}var F=_g(),Ta={},Hu={exports:{}},Yt={},Vu={exports:{}},Yu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mf;function wg(){return Mf||(Mf=1,(function(i){function e(J,ee){var re=J.length;J.push(ee);e:for(;0<re;){var I=re-1>>>1,G=J[I];if(0<o(G,ee))J[I]=ee,J[re]=G,re=I;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ee=J[0],re=J.pop();if(re!==ee){J[0]=re;e:for(var I=0,G=J.length,be=G>>>1;I<be;){var Me=2*(I+1)-1,Re=J[Me],_e=Me+1,Oe=J[_e];if(0>o(Re,re))_e<G&&0>o(Oe,Re)?(J[I]=Oe,J[_e]=re,I=_e):(J[I]=Re,J[Me]=re,I=Me);else if(_e<G&&0>o(Oe,re))J[I]=Oe,J[_e]=re,I=_e;else break e}}return ee}function o(J,ee){var re=J.sortIndex-ee.sortIndex;return re!==0?re:J.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var d=[],m=[],p=1,y=null,x=3,_=!1,S=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(J){for(var ee=t(m);ee!==null;){if(ee.callback===null)s(m);else if(ee.startTime<=J)s(m),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(m)}}function R(J){if(b=!1,E(J),!S)if(t(d)!==null)S=!0,te(X);else{var ee=t(m);ee!==null&&se(R,ee.startTime-J)}}function X(J,ee){S=!1,b&&(b=!1,A(oe),oe=-1),_=!0;var re=x;try{for(E(ee),y=t(d);y!==null&&(!(y.expirationTime>ee)||J&&!ne());){var I=y.callback;if(typeof I=="function"){y.callback=null,x=y.priorityLevel;var G=I(y.expirationTime<=ee);ee=i.unstable_now(),typeof G=="function"?y.callback=G:y===t(d)&&s(d),E(ee)}else s(d);y=t(d)}if(y!==null)var be=!0;else{var Me=t(m);Me!==null&&se(R,Me.startTime-ee),be=!1}return be}finally{y=null,x=re,_=!1}}var N=!1,D=null,oe=-1,ae=5,Q=-1;function ne(){return!(i.unstable_now()-Q<ae)}function Te(){if(D!==null){var J=i.unstable_now();Q=J;var ee=!0;try{ee=D(!0,J)}finally{ee?pe():(N=!1,D=null)}}else N=!1}var pe;if(typeof T=="function")pe=function(){T(Te)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,dt=Ee.port2;Ee.port1.onmessage=Te,pe=function(){dt.postMessage(null)}}else pe=function(){w(Te,0)};function te(J){D=J,N||(N=!0,pe())}function se(J,ee){oe=w(function(){J(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){S||_||(S=!0,te(X))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(J){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var re=x;x=ee;try{return J()}finally{x=re}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,ee){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var re=x;x=J;try{return ee()}finally{x=re}},i.unstable_scheduleCallback=function(J,ee,re){var I=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?I+re:I):re=I,J){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=re+G,J={id:p++,callback:ee,priorityLevel:J,startTime:re,expirationTime:G,sortIndex:-1},re>I?(J.sortIndex=re,e(m,J),t(d)===null&&J===t(m)&&(b?(A(oe),oe=-1):b=!0,se(R,re-I))):(J.sortIndex=G,e(d,J),S||_||(S=!0,te(X))),J},i.unstable_shouldYield=ne,i.unstable_wrapCallback=function(J){var ee=x;return function(){var re=x;x=ee;try{return J.apply(this,arguments)}finally{x=re}}}})(Yu)),Yu}var Rf;function Sg(){return Rf||(Rf=1,Vu.exports=wg()),Vu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If;function kg(){if(If)return Yt;If=1;var i=Vc(),e=Sg();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,r){u(n,r),u(n+"Capture",r)}function u(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},y={};function x(n){return d.call(y,n)?!0:d.call(p,n)?!1:m.test(n)?y[n]=!0:(p[n]=!0,!1)}function _(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,r,a,c){if(r===null||typeof r>"u"||_(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function b(n,r,a,c,f,g,v){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=g,this.removeEmptyString=v}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){w[n]=new b(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];w[r]=new b(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){w[n]=new b(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){w[n]=new b(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){w[n]=new b(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){w[n]=new b(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){w[n]=new b(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){w[n]=new b(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){w[n]=new b(n,5,!1,n.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function T(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(A,T);w[r]=new b(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(A,T);w[r]=new b(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(A,T);w[r]=new b(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){w[n]=new b(n,1,!1,n.toLowerCase(),null,!1,!1)}),w.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){w[n]=new b(n,1,!1,n.toLowerCase(),null,!0,!0)});function E(n,r,a,c){var f=w.hasOwnProperty(r)?w[r]:null;(f!==null?f.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,a,f,c)&&(a=null),c||f===null?x(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(r=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(r):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),N=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),ne=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),dt=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),J=Symbol.iterator;function ee(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,I;function G(n){if(I===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);I=r&&r[1]||""}return`
`+I+n}var be=!1;function Me(n,r){if(!n||be)return"";be=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(j){var c=j}Reflect.construct(n,[],r)}else{try{r.call()}catch(j){c=j}n.call(r.prototype)}else{try{throw Error()}catch(j){c=j}n()}}catch(j){if(j&&c&&typeof j.stack=="string"){for(var f=j.stack.split(`
`),g=c.stack.split(`
`),v=f.length-1,C=g.length-1;1<=v&&0<=C&&f[v]!==g[C];)C--;for(;1<=v&&0<=C;v--,C--)if(f[v]!==g[C]){if(v!==1||C!==1)do if(v--,C--,0>C||f[v]!==g[C]){var P=`
`+f[v].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=v&&0<=C);break}}}finally{be=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function Re(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=Me(n.type,!1),n;case 11:return n=Me(n.type.render,!1),n;case 1:return n=Me(n.type,!0),n;default:return""}}function _e(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case N:return"Portal";case ae:return"Profiler";case oe:return"StrictMode";case pe:return"Suspense";case Ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ne:return(n.displayName||"Context")+".Consumer";case Q:return(n._context.displayName||"Context")+".Provider";case Te:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case dt:return r=n.displayName||null,r!==null?r:_e(n.type)||"Memo";case te:r=n._payload,n=n._init;try{return _e(n(r))}catch{}}return null}function Oe(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(r);case 8:return r===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ie(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function je(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ft(n){var r=je(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){c=""+v,g.call(this,v)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Bn(n){n._valueTracker||(n._valueTracker=ft(n))}function on(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=je(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Rt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Nt(n,r){var a=r.checked;return re({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function qt(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Ie(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function gt(n,r){r=r.checked,r!=null&&E(n,"checked",r,!1)}function yn(n,r){gt(n,r);var a=Ie(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Yn(n,r.type,a):r.hasOwnProperty("defaultValue")&&Yn(n,r.type,Ie(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function vt(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Yn(n,r,a){(r!=="number"||Rt(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var jr=Array.isArray;function xn(n,r,a,c){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ie(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function pi(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function vn(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(jr(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Ie(a)}}function Dr(n,r){var a=Ie(r.value),c=Ie(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function yo(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function mi(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ls(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?mi(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Xn,Or=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,f)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Xn=Xn||document.createElement("div"),Xn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Xn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function hr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xo=["Webkit","ms","Moz","O"];Object.keys(dr).forEach(function(n){xo.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),dr[r]=dr[n]})});function fr(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||dr.hasOwnProperty(n)&&dr[n]?(""+r).trim():r+"px"}function Kt(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=fr(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var al=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function us(n,r){if(r){if(al[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Nr(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gi=null;function cs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var de=null,pr=null,jn=null;function vo(n){if(n=Ms(n)){if(typeof de!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Wo(r),de(n.stateNode,n.type,r))}}function _o(n){pr?jn?jn.push(n):jn=[n]:pr=n}function yi(){if(pr){var n=pr,r=jn;if(jn=pr=null,vo(n),r)for(n=0;n<r.length;n++)vo(r[n])}}function hs(n,r){return n(r)}function xi(){}var vi=!1;function ds(n,r,a){if(vi)return n(r,a);vi=!0;try{return hs(n,r,a)}finally{vi=!1,(pr!==null||jn!==null)&&(xi(),yi())}}function $r(n,r){var a=n.stateNode;if(a===null)return null;var c=Wo(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var fs=!1;if(h)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){fs=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{fs=!1}function ll(n,r,a,c,f,g,v,C,P){var j=Array.prototype.slice.call(arguments,3);try{r.apply(a,j)}catch(Y){this.onError(Y)}}var _n=!1,_i=null,Wr=!1,Gr=null,ul={onError:function(n){_n=!0,_i=n}};function cl(n,r,a,c,f,g,v,C,P){_n=!1,_i=null,ll.apply(ul,arguments)}function hl(n,r,a,c,f,g,v,C,P){if(cl.apply(this,arguments),_n){if(_n){var j=_i;_n=!1,_i=null}else throw Error(t(198));Wr||(Wr=!0,Gr=j)}}function qn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Hr(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function wo(n){if(qn(n)!==n)throw Error(t(188))}function dl(n){var r=n.alternate;if(!r){if(r=qn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return wo(f),n;if(g===c)return wo(f),r;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var v=!1,C=f.child;C;){if(C===a){v=!0,a=f,c=g;break}if(C===c){v=!0,c=f,a=g;break}C=C.sibling}if(!v){for(C=g.child;C;){if(C===a){v=!0,a=g,c=f;break}if(C===c){v=!0,c=g,a=f;break}C=C.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function So(n){return n=dl(n),n!==null?ko(n):null}function ko(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=ko(n);if(r!==null)return r;n=n.sibling}return null}var bo=e.unstable_scheduleCallback,Co=e.unstable_cancelCallback,fl=e.unstable_shouldYield,pl=e.unstable_requestPaint,tt=e.unstable_now,nt=e.unstable_getCurrentPriorityLevel,_t=e.unstable_ImmediatePriority,We=e.unstable_UserBlockingPriority,wi=e.unstable_NormalPriority,Ze=e.unstable_LowPriority,Kn=e.unstable_IdlePriority,Si=null,Qt=null;function Ao(n){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Si,n,void 0,(n.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:B,Po=Math.log,k=Math.LN2;function B(n){return n>>>=0,n===0?32:31-(Po(n)/k|0)|0}var O=64,ie=4194304;function U(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function H(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,v=a&268435455;if(v!==0){var C=v&~f;C!==0?c=U(C):(g&=v,g!==0&&(c=U(g)))}else v=a&~f,v!==0?c=U(v):g!==0&&(c=U(g));if(c===0)return 0;if(r!==0&&r!==c&&(r&f)===0&&(f=c&-c,g=r&-r,f>=g||f===16&&(g&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-$t(r),f=1<<a,c|=n[a],r&=~f;return c}function W(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-$t(g),C=1<<v,P=f[v];P===-1?((C&a)===0||(C&c)!==0)&&(f[v]=W(C,r)):P<=r&&(n.expiredLanes|=C),g&=~C}}function Z(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ve(){var n=O;return O<<=1,(O&4194240)===0&&(O=64),n}function ze(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function ye(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-$t(r),n[r]=a}function Ce(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-$t(a),g=1<<f;r[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function ke(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-$t(a),f=1<<c;f&r|n[c]&r&&(n[c]|=r),a&=~f}}var fe=0;function $e(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var pt,rt,it,Zt,ki,wn=!1,To=[],mr=null,gr=null,yr=null,ps=new Map,ms=new Map,xr=[],N0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lh(n,r){switch(n){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":ps.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ms.delete(r.pointerId)}}function gs(n,r,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},r!==null&&(r=Ms(r),r!==null&&rt(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function $0(n,r,a,c,f){switch(r){case"focusin":return mr=gs(mr,n,r,a,c,f),!0;case"dragenter":return gr=gs(gr,n,r,a,c,f),!0;case"mouseover":return yr=gs(yr,n,r,a,c,f),!0;case"pointerover":var g=f.pointerId;return ps.set(g,gs(ps.get(g)||null,n,r,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,ms.set(g,gs(ms.get(g)||null,n,r,a,c,f)),!0}return!1}function uh(n){var r=Vr(n.target);if(r!==null){var a=qn(r);if(a!==null){if(r=a.tag,r===13){if(r=Hr(a),r!==null){n.blockedOn=r,ki(n.priority,function(){it(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Eo(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=gl(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);gi=c,a.target.dispatchEvent(c),gi=null}else return r=Ms(a),r!==null&&rt(r),n.blockedOn=a,!1;r.shift()}return!0}function ch(n,r,a){Eo(n)&&a.delete(r)}function U0(){wn=!1,mr!==null&&Eo(mr)&&(mr=null),gr!==null&&Eo(gr)&&(gr=null),yr!==null&&Eo(yr)&&(yr=null),ps.forEach(ch),ms.forEach(ch)}function ys(n,r){n.blockedOn===r&&(n.blockedOn=null,wn||(wn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,U0)))}function xs(n){function r(f){return ys(f,n)}if(0<To.length){ys(To[0],n);for(var a=1;a<To.length;a++){var c=To[a];c.blockedOn===n&&(c.blockedOn=null)}}for(mr!==null&&ys(mr,n),gr!==null&&ys(gr,n),yr!==null&&ys(yr,n),ps.forEach(r),ms.forEach(r),a=0;a<xr.length;a++)c=xr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<xr.length&&(a=xr[0],a.blockedOn===null);)uh(a),a.blockedOn===null&&xr.shift()}var bi=R.ReactCurrentBatchConfig,Mo=!0;function W0(n,r,a,c){var f=fe,g=bi.transition;bi.transition=null;try{fe=1,ml(n,r,a,c)}finally{fe=f,bi.transition=g}}function G0(n,r,a,c){var f=fe,g=bi.transition;bi.transition=null;try{fe=4,ml(n,r,a,c)}finally{fe=f,bi.transition=g}}function ml(n,r,a,c){if(Mo){var f=gl(n,r,a,c);if(f===null)Fl(n,r,c,Ro,a),lh(n,c);else if($0(f,n,r,a,c))c.stopPropagation();else if(lh(n,c),r&4&&-1<N0.indexOf(n)){for(;f!==null;){var g=Ms(f);if(g!==null&&pt(g),g=gl(n,r,a,c),g===null&&Fl(n,r,c,Ro,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else Fl(n,r,c,null,a)}}var Ro=null;function gl(n,r,a,c){if(Ro=null,n=cs(c),n=Vr(n),n!==null)if(r=qn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Hr(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Ro=n,null}function hh(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nt()){case _t:return 1;case We:return 4;case wi:case Ze:return 16;case Kn:return 536870912;default:return 16}default:return 16}}var vr=null,yl=null,Io=null;function dh(){if(Io)return Io;var n,r=yl,a=r.length,c,f="value"in vr?vr.value:vr.textContent,g=f.length;for(n=0;n<a&&r[n]===f[n];n++);var v=a-n;for(c=1;c<=v&&r[a-c]===f[g-c];c++);return Io=f.slice(n,1<c?1-c:void 0)}function Fo(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Lo(){return!0}function fh(){return!1}function Jt(n){function r(a,c,f,g,v){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Lo:fh,this.isPropagationStopped=fh,this}return re(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Lo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Lo)},persist:function(){},isPersistent:Lo}),r}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=Jt(Ci),vs=re({},Ci,{view:0,detail:0}),H0=Jt(vs),vl,_l,_s,zo=re({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_s&&(_s&&n.type==="mousemove"?(vl=n.screenX-_s.screenX,_l=n.screenY-_s.screenY):_l=vl=0,_s=n),vl)},movementY:function(n){return"movementY"in n?n.movementY:_l}}),ph=Jt(zo),V0=re({},zo,{dataTransfer:0}),Y0=Jt(V0),X0=re({},vs,{relatedTarget:0}),wl=Jt(X0),q0=re({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),K0=Jt(q0),Q0=re({},Ci,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Z0=Jt(Q0),J0=re({},Ci,{data:0}),mh=Jt(J0),em={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rm(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=nm[n])?!!r[n]:!1}function Sl(){return rm}var im=re({},vs,{key:function(n){if(n.key){var r=em[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Fo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tm[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sl,charCode:function(n){return n.type==="keypress"?Fo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sm=Jt(im),om=re({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gh=Jt(om),am=re({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sl}),lm=Jt(am),um=re({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),cm=Jt(um),hm=re({},zo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dm=Jt(hm),fm=[9,13,27,32],kl=h&&"CompositionEvent"in window,ws=null;h&&"documentMode"in document&&(ws=document.documentMode);var pm=h&&"TextEvent"in window&&!ws,yh=h&&(!kl||ws&&8<ws&&11>=ws),xh=" ",vh=!1;function _h(n,r){switch(n){case"keyup":return fm.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ai=!1;function mm(n,r){switch(n){case"compositionend":return wh(r);case"keypress":return r.which!==32?null:(vh=!0,xh);case"textInput":return n=r.data,n===xh&&vh?null:n;default:return null}}function gm(n,r){if(Ai)return n==="compositionend"||!kl&&_h(n,r)?(n=dh(),Io=yl=vr=null,Ai=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yh&&r.locale!=="ko"?null:r.data;default:return null}}var ym={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sh(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!ym[n.type]:r==="textarea"}function kh(n,r,a,c){_o(c),r=No(r,"onChange"),0<r.length&&(a=new xl("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var Ss=null,ks=null;function xm(n){$h(n,0)}function Bo(n){var r=Ri(n);if(on(r))return n}function vm(n,r){if(n==="change")return r}var bh=!1;if(h){var bl;if(h){var Cl="oninput"in document;if(!Cl){var Ch=document.createElement("div");Ch.setAttribute("oninput","return;"),Cl=typeof Ch.oninput=="function"}bl=Cl}else bl=!1;bh=bl&&(!document.documentMode||9<document.documentMode)}function Ah(){Ss&&(Ss.detachEvent("onpropertychange",Ph),ks=Ss=null)}function Ph(n){if(n.propertyName==="value"&&Bo(ks)){var r=[];kh(r,ks,n,cs(n)),ds(xm,r)}}function _m(n,r,a){n==="focusin"?(Ah(),Ss=r,ks=a,Ss.attachEvent("onpropertychange",Ph)):n==="focusout"&&Ah()}function wm(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bo(ks)}function Sm(n,r){if(n==="click")return Bo(r)}function km(n,r){if(n==="input"||n==="change")return Bo(r)}function bm(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Sn=typeof Object.is=="function"?Object.is:bm;function bs(n,r){if(Sn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!d.call(r,f)||!Sn(n[f],r[f]))return!1}return!0}function Th(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Eh(n,r){var a=Th(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Th(a)}}function Mh(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Mh(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Rh(){for(var n=window,r=Rt();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Rt(n.document)}return r}function Al(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function Cm(n){var r=Rh(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Mh(a.ownerDocument.documentElement,a)){if(c!==null&&Al(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=Eh(a,g);var v=Eh(a,c);f&&v&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(r),n.extend(v.node,v.offset)):(r.setEnd(v.node,v.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Am=h&&"documentMode"in document&&11>=document.documentMode,Pi=null,Pl=null,Cs=null,Tl=!1;function Ih(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Tl||Pi==null||Pi!==Rt(c)||(c=Pi,"selectionStart"in c&&Al(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Cs&&bs(Cs,c)||(Cs=c,c=No(Pl,"onSelect"),0<c.length&&(r=new xl("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Pi)))}function jo(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Ti={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},El={},Fh={};h&&(Fh=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function Do(n){if(El[n])return El[n];if(!Ti[n])return n;var r=Ti[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Fh)return El[n]=r[a];return n}var Lh=Do("animationend"),zh=Do("animationiteration"),Bh=Do("animationstart"),jh=Do("transitionend"),Dh=new Map,Oh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(n,r){Dh.set(n,r),l(r,[n])}for(var Ml=0;Ml<Oh.length;Ml++){var Rl=Oh[Ml],Pm=Rl.toLowerCase(),Tm=Rl[0].toUpperCase()+Rl.slice(1);_r(Pm,"on"+Tm)}_r(Lh,"onAnimationEnd"),_r(zh,"onAnimationIteration"),_r(Bh,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(jh,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Em=new Set("cancel close invalid load scroll toggle".split(" ").concat(As));function Nh(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,hl(c,r,void 0,n),n.currentTarget=null}function $h(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(r)for(var v=c.length-1;0<=v;v--){var C=c[v],P=C.instance,j=C.currentTarget;if(C=C.listener,P!==g&&f.isPropagationStopped())break e;Nh(f,C,j),g=P}else for(v=0;v<c.length;v++){if(C=c[v],P=C.instance,j=C.currentTarget,C=C.listener,P!==g&&f.isPropagationStopped())break e;Nh(f,C,j),g=P}}}if(Wr)throw n=Gr,Wr=!1,Gr=null,n}function Xe(n,r){var a=r[Ol];a===void 0&&(a=r[Ol]=new Set);var c=n+"__bubble";a.has(c)||(Uh(r,n,2,!1),a.add(c))}function Il(n,r,a){var c=0;r&&(c|=4),Uh(a,n,c,r)}var Oo="_reactListening"+Math.random().toString(36).slice(2);function Ps(n){if(!n[Oo]){n[Oo]=!0,s.forEach(function(a){a!=="selectionchange"&&(Em.has(a)||Il(a,!1,n),Il(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Oo]||(r[Oo]=!0,Il("selectionchange",!1,r))}}function Uh(n,r,a,c){switch(hh(r)){case 1:var f=W0;break;case 4:f=G0;break;default:f=ml}a=f.bind(null,r,a,n),f=void 0,!fs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function Fl(n,r,a,c,f){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var C=c.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(v===4)for(v=c.return;v!==null;){var P=v.tag;if((P===3||P===4)&&(P=v.stateNode.containerInfo,P===f||P.nodeType===8&&P.parentNode===f))return;v=v.return}for(;C!==null;){if(v=Vr(C),v===null)return;if(P=v.tag,P===5||P===6){c=g=v;continue e}C=C.parentNode}}c=c.return}ds(function(){var j=g,Y=cs(a),q=[];e:{var V=Dh.get(n);if(V!==void 0){var le=xl,ce=n;switch(n){case"keypress":if(Fo(a)===0)break e;case"keydown":case"keyup":le=sm;break;case"focusin":ce="focus",le=wl;break;case"focusout":ce="blur",le=wl;break;case"beforeblur":case"afterblur":le=wl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=ph;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Y0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=lm;break;case Lh:case zh:case Bh:le=K0;break;case jh:le=cm;break;case"scroll":le=H0;break;case"wheel":le=dm;break;case"copy":case"cut":case"paste":le=Z0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=gh}var he=(r&4)!==0,mt=!he&&n==="scroll",L=he?V!==null?V+"Capture":null:V;he=[];for(var M=j,z;M!==null;){z=M;var K=z.stateNode;if(z.tag===5&&K!==null&&(z=K,L!==null&&(K=$r(M,L),K!=null&&he.push(Ts(M,K,z)))),mt)break;M=M.return}0<he.length&&(V=new le(V,ce,null,a,Y),q.push({event:V,listeners:he}))}}if((r&7)===0){e:{if(V=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",V&&a!==gi&&(ce=a.relatedTarget||a.fromElement)&&(Vr(ce)||ce[Qn]))break e;if((le||V)&&(V=Y.window===Y?Y:(V=Y.ownerDocument)?V.defaultView||V.parentWindow:window,le?(ce=a.relatedTarget||a.toElement,le=j,ce=ce?Vr(ce):null,ce!==null&&(mt=qn(ce),ce!==mt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(le=null,ce=j),le!==ce)){if(he=ph,K="onMouseLeave",L="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(he=gh,K="onPointerLeave",L="onPointerEnter",M="pointer"),mt=le==null?V:Ri(le),z=ce==null?V:Ri(ce),V=new he(K,M+"leave",le,a,Y),V.target=mt,V.relatedTarget=z,K=null,Vr(Y)===j&&(he=new he(L,M+"enter",ce,a,Y),he.target=z,he.relatedTarget=mt,K=he),mt=K,le&&ce)t:{for(he=le,L=ce,M=0,z=he;z;z=Ei(z))M++;for(z=0,K=L;K;K=Ei(K))z++;for(;0<M-z;)he=Ei(he),M--;for(;0<z-M;)L=Ei(L),z--;for(;M--;){if(he===L||L!==null&&he===L.alternate)break t;he=Ei(he),L=Ei(L)}he=null}else he=null;le!==null&&Wh(q,V,le,he,!1),ce!==null&&mt!==null&&Wh(q,mt,ce,he,!0)}}e:{if(V=j?Ri(j):window,le=V.nodeName&&V.nodeName.toLowerCase(),le==="select"||le==="input"&&V.type==="file")var me=vm;else if(Sh(V))if(bh)me=km;else{me=wm;var we=_m}else(le=V.nodeName)&&le.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(me=Sm);if(me&&(me=me(n,j))){kh(q,me,a,Y);break e}we&&we(n,V,j),n==="focusout"&&(we=V._wrapperState)&&we.controlled&&V.type==="number"&&Yn(V,"number",V.value)}switch(we=j?Ri(j):window,n){case"focusin":(Sh(we)||we.contentEditable==="true")&&(Pi=we,Pl=j,Cs=null);break;case"focusout":Cs=Pl=Pi=null;break;case"mousedown":Tl=!0;break;case"contextmenu":case"mouseup":case"dragend":Tl=!1,Ih(q,a,Y);break;case"selectionchange":if(Am)break;case"keydown":case"keyup":Ih(q,a,Y)}var Se;if(kl)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Ai?_h(n,a)&&(Ae="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(yh&&a.locale!=="ko"&&(Ai||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Ai&&(Se=dh()):(vr=Y,yl="value"in vr?vr.value:vr.textContent,Ai=!0)),we=No(j,Ae),0<we.length&&(Ae=new mh(Ae,n,null,a,Y),q.push({event:Ae,listeners:we}),Se?Ae.data=Se:(Se=wh(a),Se!==null&&(Ae.data=Se)))),(Se=pm?mm(n,a):gm(n,a))&&(j=No(j,"onBeforeInput"),0<j.length&&(Y=new mh("onBeforeInput","beforeinput",null,a,Y),q.push({event:Y,listeners:j}),Y.data=Se))}$h(q,r)})}function Ts(n,r,a){return{instance:n,listener:r,currentTarget:a}}function No(n,r){for(var a=r+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=$r(n,a),g!=null&&c.unshift(Ts(n,g,f)),g=$r(n,r),g!=null&&c.push(Ts(n,g,f))),n=n.return}return c}function Ei(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wh(n,r,a,c,f){for(var g=r._reactName,v=[];a!==null&&a!==c;){var C=a,P=C.alternate,j=C.stateNode;if(P!==null&&P===c)break;C.tag===5&&j!==null&&(C=j,f?(P=$r(a,g),P!=null&&v.unshift(Ts(a,P,C))):f||(P=$r(a,g),P!=null&&v.push(Ts(a,P,C)))),a=a.return}v.length!==0&&n.push({event:r,listeners:v})}var Mm=/\r\n?/g,Rm=/\u0000|\uFFFD/g;function Gh(n){return(typeof n=="string"?n:""+n).replace(Mm,`
`).replace(Rm,"")}function $o(n,r,a){if(r=Gh(r),Gh(n)!==r&&a)throw Error(t(425))}function Uo(){}var Ll=null,zl=null;function Bl(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var jl=typeof setTimeout=="function"?setTimeout:void 0,Im=typeof clearTimeout=="function"?clearTimeout:void 0,Hh=typeof Promise=="function"?Promise:void 0,Fm=typeof queueMicrotask=="function"?queueMicrotask:typeof Hh<"u"?function(n){return Hh.resolve(null).then(n).catch(Lm)}:jl;function Lm(n){setTimeout(function(){throw n})}function Dl(n,r){var a=r,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),xs(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);xs(r)}function wr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Vh(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Mi=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Mi,Es="__reactProps$"+Mi,Qn="__reactContainer$"+Mi,Ol="__reactEvents$"+Mi,zm="__reactListeners$"+Mi,Bm="__reactHandles$"+Mi;function Vr(n){var r=n[Dn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Qn]||a[Dn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Vh(n);n!==null;){if(a=n[Dn])return a;n=Vh(n)}return r}n=a,a=n.parentNode}return null}function Ms(n){return n=n[Dn]||n[Qn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ri(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Wo(n){return n[Es]||null}var Nl=[],Ii=-1;function Sr(n){return{current:n}}function qe(n){0>Ii||(n.current=Nl[Ii],Nl[Ii]=null,Ii--)}function Ve(n,r){Ii++,Nl[Ii]=n.current,n.current=r}var kr={},It=Sr(kr),Ut=Sr(!1),Yr=kr;function Fi(n,r){var a=n.type.contextTypes;if(!a)return kr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=r[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=f),f}function Wt(n){return n=n.childContextTypes,n!=null}function Go(){qe(Ut),qe(It)}function Yh(n,r,a){if(It.current!==kr)throw Error(t(168));Ve(It,r),Ve(Ut,a)}function Xh(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in r))throw Error(t(108,Oe(n)||"Unknown",f));return re({},a,c)}function Ho(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||kr,Yr=It.current,Ve(It,n),Ve(Ut,Ut.current),!0}function qh(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Xh(n,r,Yr),c.__reactInternalMemoizedMergedChildContext=n,qe(Ut),qe(It),Ve(It,n)):qe(Ut),Ve(Ut,a)}var Zn=null,Vo=!1,$l=!1;function Kh(n){Zn===null?Zn=[n]:Zn.push(n)}function jm(n){Vo=!0,Kh(n)}function br(){if(!$l&&Zn!==null){$l=!0;var n=0,r=fe;try{var a=Zn;for(fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Zn=null,Vo=!1}catch(f){throw Zn!==null&&(Zn=Zn.slice(n+1)),bo(_t,br),f}finally{fe=r,$l=!1}}return null}var Li=[],zi=0,Yo=null,Xo=0,an=[],ln=0,Xr=null,Jn=1,er="";function qr(n,r){Li[zi++]=Xo,Li[zi++]=Yo,Yo=n,Xo=r}function Qh(n,r,a){an[ln++]=Jn,an[ln++]=er,an[ln++]=Xr,Xr=n;var c=Jn;n=er;var f=32-$t(c)-1;c&=~(1<<f),a+=1;var g=32-$t(r)+f;if(30<g){var v=f-f%5;g=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Jn=1<<32-$t(r)+f|a<<f|c,er=g+n}else Jn=1<<g|a<<f|c,er=n}function Ul(n){n.return!==null&&(qr(n,1),Qh(n,1,0))}function Wl(n){for(;n===Yo;)Yo=Li[--zi],Li[zi]=null,Xo=Li[--zi],Li[zi]=null;for(;n===Xr;)Xr=an[--ln],an[ln]=null,er=an[--ln],an[ln]=null,Jn=an[--ln],an[ln]=null}var en=null,tn=null,Je=!1,kn=null;function Zh(n,r){var a=dn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function Jh(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,en=n,tn=wr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,en=n,tn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Xr!==null?{id:Jn,overflow:er}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=dn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,en=n,tn=null,!0):!1;default:return!1}}function Gl(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Hl(n){if(Je){var r=tn;if(r){var a=r;if(!Jh(n,r)){if(Gl(n))throw Error(t(418));r=wr(a.nextSibling);var c=en;r&&Jh(n,r)?Zh(c,a):(n.flags=n.flags&-4097|2,Je=!1,en=n)}}else{if(Gl(n))throw Error(t(418));n.flags=n.flags&-4097|2,Je=!1,en=n}}}function ed(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;en=n}function qo(n){if(n!==en)return!1;if(!Je)return ed(n),Je=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Bl(n.type,n.memoizedProps)),r&&(r=tn)){if(Gl(n))throw td(),Error(t(418));for(;r;)Zh(n,r),r=wr(r.nextSibling)}if(ed(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){tn=wr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}tn=null}}else tn=en?wr(n.stateNode.nextSibling):null;return!0}function td(){for(var n=tn;n;)n=wr(n.nextSibling)}function Bi(){tn=en=null,Je=!1}function Vl(n){kn===null?kn=[n]:kn.push(n)}var Dm=R.ReactCurrentBatchConfig;function Rs(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(v){var C=f.refs;v===null?delete C[g]:C[g]=v},r._stringRef=g,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Ko(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function nd(n){var r=n._init;return r(n._payload)}function rd(n){function r(L,M){if(n){var z=L.deletions;z===null?(L.deletions=[M],L.flags|=16):z.push(M)}}function a(L,M){if(!n)return null;for(;M!==null;)r(L,M),M=M.sibling;return null}function c(L,M){for(L=new Map;M!==null;)M.key!==null?L.set(M.key,M):L.set(M.index,M),M=M.sibling;return L}function f(L,M){return L=Ir(L,M),L.index=0,L.sibling=null,L}function g(L,M,z){return L.index=z,n?(z=L.alternate,z!==null?(z=z.index,z<M?(L.flags|=2,M):z):(L.flags|=2,M)):(L.flags|=1048576,M)}function v(L){return n&&L.alternate===null&&(L.flags|=2),L}function C(L,M,z,K){return M===null||M.tag!==6?(M=ju(z,L.mode,K),M.return=L,M):(M=f(M,z),M.return=L,M)}function P(L,M,z,K){var me=z.type;return me===D?Y(L,M,z.props.children,K,z.key):M!==null&&(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===te&&nd(me)===M.type)?(K=f(M,z.props),K.ref=Rs(L,M,z),K.return=L,K):(K=_a(z.type,z.key,z.props,null,L.mode,K),K.ref=Rs(L,M,z),K.return=L,K)}function j(L,M,z,K){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=Du(z,L.mode,K),M.return=L,M):(M=f(M,z.children||[]),M.return=L,M)}function Y(L,M,z,K,me){return M===null||M.tag!==7?(M=ri(z,L.mode,K,me),M.return=L,M):(M=f(M,z),M.return=L,M)}function q(L,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return M=ju(""+M,L.mode,z),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case X:return z=_a(M.type,M.key,M.props,null,L.mode,z),z.ref=Rs(L,null,M),z.return=L,z;case N:return M=Du(M,L.mode,z),M.return=L,M;case te:var K=M._init;return q(L,K(M._payload),z)}if(jr(M)||ee(M))return M=ri(M,L.mode,z,null),M.return=L,M;Ko(L,M)}return null}function V(L,M,z,K){var me=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return me!==null?null:C(L,M,""+z,K);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case X:return z.key===me?P(L,M,z,K):null;case N:return z.key===me?j(L,M,z,K):null;case te:return me=z._init,V(L,M,me(z._payload),K)}if(jr(z)||ee(z))return me!==null?null:Y(L,M,z,K,null);Ko(L,z)}return null}function le(L,M,z,K,me){if(typeof K=="string"&&K!==""||typeof K=="number")return L=L.get(z)||null,C(M,L,""+K,me);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case X:return L=L.get(K.key===null?z:K.key)||null,P(M,L,K,me);case N:return L=L.get(K.key===null?z:K.key)||null,j(M,L,K,me);case te:var we=K._init;return le(L,M,z,we(K._payload),me)}if(jr(K)||ee(K))return L=L.get(z)||null,Y(M,L,K,me,null);Ko(M,K)}return null}function ce(L,M,z,K){for(var me=null,we=null,Se=M,Ae=M=0,Ct=null;Se!==null&&Ae<z.length;Ae++){Se.index>Ae?(Ct=Se,Se=null):Ct=Se.sibling;var Ue=V(L,Se,z[Ae],K);if(Ue===null){Se===null&&(Se=Ct);break}n&&Se&&Ue.alternate===null&&r(L,Se),M=g(Ue,M,Ae),we===null?me=Ue:we.sibling=Ue,we=Ue,Se=Ct}if(Ae===z.length)return a(L,Se),Je&&qr(L,Ae),me;if(Se===null){for(;Ae<z.length;Ae++)Se=q(L,z[Ae],K),Se!==null&&(M=g(Se,M,Ae),we===null?me=Se:we.sibling=Se,we=Se);return Je&&qr(L,Ae),me}for(Se=c(L,Se);Ae<z.length;Ae++)Ct=le(Se,L,Ae,z[Ae],K),Ct!==null&&(n&&Ct.alternate!==null&&Se.delete(Ct.key===null?Ae:Ct.key),M=g(Ct,M,Ae),we===null?me=Ct:we.sibling=Ct,we=Ct);return n&&Se.forEach(function(Fr){return r(L,Fr)}),Je&&qr(L,Ae),me}function he(L,M,z,K){var me=ee(z);if(typeof me!="function")throw Error(t(150));if(z=me.call(z),z==null)throw Error(t(151));for(var we=me=null,Se=M,Ae=M=0,Ct=null,Ue=z.next();Se!==null&&!Ue.done;Ae++,Ue=z.next()){Se.index>Ae?(Ct=Se,Se=null):Ct=Se.sibling;var Fr=V(L,Se,Ue.value,K);if(Fr===null){Se===null&&(Se=Ct);break}n&&Se&&Fr.alternate===null&&r(L,Se),M=g(Fr,M,Ae),we===null?me=Fr:we.sibling=Fr,we=Fr,Se=Ct}if(Ue.done)return a(L,Se),Je&&qr(L,Ae),me;if(Se===null){for(;!Ue.done;Ae++,Ue=z.next())Ue=q(L,Ue.value,K),Ue!==null&&(M=g(Ue,M,Ae),we===null?me=Ue:we.sibling=Ue,we=Ue);return Je&&qr(L,Ae),me}for(Se=c(L,Se);!Ue.done;Ae++,Ue=z.next())Ue=le(Se,L,Ae,Ue.value,K),Ue!==null&&(n&&Ue.alternate!==null&&Se.delete(Ue.key===null?Ae:Ue.key),M=g(Ue,M,Ae),we===null?me=Ue:we.sibling=Ue,we=Ue);return n&&Se.forEach(function(yg){return r(L,yg)}),Je&&qr(L,Ae),me}function mt(L,M,z,K){if(typeof z=="object"&&z!==null&&z.type===D&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case X:e:{for(var me=z.key,we=M;we!==null;){if(we.key===me){if(me=z.type,me===D){if(we.tag===7){a(L,we.sibling),M=f(we,z.props.children),M.return=L,L=M;break e}}else if(we.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===te&&nd(me)===we.type){a(L,we.sibling),M=f(we,z.props),M.ref=Rs(L,we,z),M.return=L,L=M;break e}a(L,we);break}else r(L,we);we=we.sibling}z.type===D?(M=ri(z.props.children,L.mode,K,z.key),M.return=L,L=M):(K=_a(z.type,z.key,z.props,null,L.mode,K),K.ref=Rs(L,M,z),K.return=L,L=K)}return v(L);case N:e:{for(we=z.key;M!==null;){if(M.key===we)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){a(L,M.sibling),M=f(M,z.children||[]),M.return=L,L=M;break e}else{a(L,M);break}else r(L,M);M=M.sibling}M=Du(z,L.mode,K),M.return=L,L=M}return v(L);case te:return we=z._init,mt(L,M,we(z._payload),K)}if(jr(z))return ce(L,M,z,K);if(ee(z))return he(L,M,z,K);Ko(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,M!==null&&M.tag===6?(a(L,M.sibling),M=f(M,z),M.return=L,L=M):(a(L,M),M=ju(z,L.mode,K),M.return=L,L=M),v(L)):a(L,M)}return mt}var ji=rd(!0),id=rd(!1),Qo=Sr(null),Zo=null,Di=null,Yl=null;function Xl(){Yl=Di=Zo=null}function ql(n){var r=Qo.current;qe(Qo),n._currentValue=r}function Kl(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Oi(n,r){Zo=n,Yl=Di=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Gt=!0),n.firstContext=null)}function un(n){var r=n._currentValue;if(Yl!==n)if(n={context:n,memoizedValue:r,next:null},Di===null){if(Zo===null)throw Error(t(308));Di=n,Zo.dependencies={lanes:0,firstContext:n}}else Di=Di.next=n;return r}var Kr=null;function Ql(n){Kr===null?Kr=[n]:Kr.push(n)}function sd(n,r,a,c){var f=r.interleaved;return f===null?(a.next=a,Ql(r)):(a.next=f.next,f.next=a),r.interleaved=a,tr(n,c)}function tr(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Cr=!1;function Zl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function od(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function nr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Ar(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ne&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,tr(n,a)}return f=c.interleaved,f===null?(r.next=r,Ql(c)):(r.next=f.next,f.next=r),c.interleaved=r,tr(n,a)}function Jo(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,ke(n,a)}}function ad(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?f=g=r:g=g.next=r}else f=g=r;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function ea(n,r,a,c){var f=n.updateQueue;Cr=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var P=C,j=P.next;P.next=null,v===null?g=j:v.next=j,v=P;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,C=Y.lastBaseUpdate,C!==v&&(C===null?Y.firstBaseUpdate=j:C.next=j,Y.lastBaseUpdate=P))}if(g!==null){var q=f.baseState;v=0,Y=j=P=null,C=g;do{var V=C.lane,le=C.eventTime;if((c&V)===V){Y!==null&&(Y=Y.next={eventTime:le,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ce=n,he=C;switch(V=r,le=a,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){q=ce.call(le,q,V);break e}q=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,V=typeof ce=="function"?ce.call(le,q,V):ce,V==null)break e;q=re({},q,V);break e;case 2:Cr=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,V=f.effects,V===null?f.effects=[C]:V.push(C))}else le={eventTime:le,lane:V,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Y===null?(j=Y=le,P=q):Y=Y.next=le,v|=V;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;V=C,C=V.next,V.next=null,f.lastBaseUpdate=V,f.shared.pending=null}}while(!0);if(Y===null&&(P=q),f.baseState=P,f.firstBaseUpdate=j,f.lastBaseUpdate=Y,r=f.shared.interleaved,r!==null){f=r;do v|=f.lane,f=f.next;while(f!==r)}else g===null&&(f.shared.lanes=0);Jr|=v,n.lanes=v,n.memoizedState=q}}function ld(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Is={},On=Sr(Is),Fs=Sr(Is),Ls=Sr(Is);function Qr(n){if(n===Is)throw Error(t(174));return n}function Jl(n,r){switch(Ve(Ls,r),Ve(Fs,n),Ve(On,Is),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ls(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=ls(r,n)}qe(On),Ve(On,r)}function Ni(){qe(On),qe(Fs),qe(Ls)}function ud(n){Qr(Ls.current);var r=Qr(On.current),a=ls(r,n.type);r!==a&&(Ve(Fs,n),Ve(On,a))}function eu(n){Fs.current===n&&(qe(On),qe(Fs))}var st=Sr(0);function ta(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var tu=[];function nu(){for(var n=0;n<tu.length;n++)tu[n]._workInProgressVersionPrimary=null;tu.length=0}var na=R.ReactCurrentDispatcher,ru=R.ReactCurrentBatchConfig,Zr=0,ot=null,wt=null,kt=null,ra=!1,zs=!1,Bs=0,Om=0;function Ft(){throw Error(t(321))}function iu(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Sn(n[a],r[a]))return!1;return!0}function su(n,r,a,c,f,g){if(Zr=g,ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,na.current=n===null||n.memoizedState===null?Wm:Gm,n=a(c,f),zs){g=0;do{if(zs=!1,Bs=0,25<=g)throw Error(t(301));g+=1,kt=wt=null,r.updateQueue=null,na.current=Hm,n=a(c,f)}while(zs)}if(na.current=oa,r=wt!==null&&wt.next!==null,Zr=0,kt=wt=ot=null,ra=!1,r)throw Error(t(300));return n}function ou(){var n=Bs!==0;return Bs=0,n}function Nn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ot.memoizedState=kt=n:kt=kt.next=n,kt}function cn(){if(wt===null){var n=ot.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var r=kt===null?ot.memoizedState:kt.next;if(r!==null)kt=r,wt=n;else{if(n===null)throw Error(t(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},kt===null?ot.memoizedState=kt=n:kt=kt.next=n}return kt}function js(n,r){return typeof r=="function"?r(n):r}function au(n){var r=cn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=wt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var C=v=null,P=null,j=g;do{var Y=j.lane;if((Zr&Y)===Y)P!==null&&(P=P.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),c=j.hasEagerState?j.eagerState:n(c,j.action);else{var q={lane:Y,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};P===null?(C=P=q,v=c):P=P.next=q,ot.lanes|=Y,Jr|=Y}j=j.next}while(j!==null&&j!==g);P===null?v=c:P.next=C,Sn(c,r.memoizedState)||(Gt=!0),r.memoizedState=c,r.baseState=v,r.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,ot.lanes|=g,Jr|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function lu(n){var r=cn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=r.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);Sn(g,r.memoizedState)||(Gt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),a.lastRenderedState=g}return[g,c]}function cd(){}function hd(n,r){var a=ot,c=cn(),f=r(),g=!Sn(c.memoizedState,f);if(g&&(c.memoizedState=f,Gt=!0),c=c.queue,uu(pd.bind(null,a,c,n),[n]),c.getSnapshot!==r||g||kt!==null&&kt.memoizedState.tag&1){if(a.flags|=2048,Ds(9,fd.bind(null,a,c,f,r),void 0,null),bt===null)throw Error(t(349));(Zr&30)!==0||dd(a,r,f)}return f}function dd(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=ot.updateQueue,r===null?(r={lastEffect:null,stores:null},ot.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function fd(n,r,a,c){r.value=a,r.getSnapshot=c,md(r)&&gd(n)}function pd(n,r,a){return a(function(){md(r)&&gd(n)})}function md(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Sn(n,a)}catch{return!0}}function gd(n){var r=tr(n,1);r!==null&&Pn(r,n,1,-1)}function yd(n){var r=Nn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:n},r.queue=n,n=n.dispatch=Um.bind(null,ot,n),[r.memoizedState,n]}function Ds(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=ot.updateQueue,r===null?(r={lastEffect:null,stores:null},ot.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function xd(){return cn().memoizedState}function ia(n,r,a,c){var f=Nn();ot.flags|=n,f.memoizedState=Ds(1|r,a,void 0,c===void 0?null:c)}function sa(n,r,a,c){var f=cn();c=c===void 0?null:c;var g=void 0;if(wt!==null){var v=wt.memoizedState;if(g=v.destroy,c!==null&&iu(c,v.deps)){f.memoizedState=Ds(r,a,g,c);return}}ot.flags|=n,f.memoizedState=Ds(1|r,a,g,c)}function vd(n,r){return ia(8390656,8,n,r)}function uu(n,r){return sa(2048,8,n,r)}function _d(n,r){return sa(4,2,n,r)}function wd(n,r){return sa(4,4,n,r)}function Sd(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function kd(n,r,a){return a=a!=null?a.concat([n]):null,sa(4,4,Sd.bind(null,r,n),a)}function cu(){}function bd(n,r){var a=cn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&iu(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Cd(n,r){var a=cn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&iu(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function Ad(n,r,a){return(Zr&21)===0?(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=a):(Sn(a,r)||(a=ve(),ot.lanes|=a,Jr|=a,n.baseState=!0),r)}function Nm(n,r){var a=fe;fe=a!==0&&4>a?a:4,n(!0);var c=ru.transition;ru.transition={};try{n(!1),r()}finally{fe=a,ru.transition=c}}function Pd(){return cn().memoizedState}function $m(n,r,a){var c=Mr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Td(n))Ed(r,a);else if(a=sd(n,r,a,c),a!==null){var f=Dt();Pn(a,n,c,f),Md(a,r,c)}}function Um(n,r,a){var c=Mr(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Td(n))Ed(r,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var v=r.lastRenderedState,C=g(v,a);if(f.hasEagerState=!0,f.eagerState=C,Sn(C,v)){var P=r.interleaved;P===null?(f.next=f,Ql(r)):(f.next=P.next,P.next=f),r.interleaved=f;return}}catch{}finally{}a=sd(n,r,f,c),a!==null&&(f=Dt(),Pn(a,n,c,f),Md(a,r,c))}}function Td(n){var r=n.alternate;return n===ot||r!==null&&r===ot}function Ed(n,r){zs=ra=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Md(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,ke(n,a)}}var oa={readContext:un,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},Wm={readContext:un,useCallback:function(n,r){return Nn().memoizedState=[n,r===void 0?null:r],n},useContext:un,useEffect:vd,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,ia(4194308,4,Sd.bind(null,r,n),a)},useLayoutEffect:function(n,r){return ia(4194308,4,n,r)},useInsertionEffect:function(n,r){return ia(4,2,n,r)},useMemo:function(n,r){var a=Nn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Nn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=$m.bind(null,ot,n),[c.memoizedState,n]},useRef:function(n){var r=Nn();return n={current:n},r.memoizedState=n},useState:yd,useDebugValue:cu,useDeferredValue:function(n){return Nn().memoizedState=n},useTransition:function(){var n=yd(!1),r=n[0];return n=Nm.bind(null,n[1]),Nn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=ot,f=Nn();if(Je){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),bt===null)throw Error(t(349));(Zr&30)!==0||dd(c,r,a)}f.memoizedState=a;var g={value:a,getSnapshot:r};return f.queue=g,vd(pd.bind(null,c,g,n),[n]),c.flags|=2048,Ds(9,fd.bind(null,c,g,a,r),void 0,null),a},useId:function(){var n=Nn(),r=bt.identifierPrefix;if(Je){var a=er,c=Jn;a=(c&~(1<<32-$t(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=Bs++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Om++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Gm={readContext:un,useCallback:bd,useContext:un,useEffect:uu,useImperativeHandle:kd,useInsertionEffect:_d,useLayoutEffect:wd,useMemo:Cd,useReducer:au,useRef:xd,useState:function(){return au(js)},useDebugValue:cu,useDeferredValue:function(n){var r=cn();return Ad(r,wt.memoizedState,n)},useTransition:function(){var n=au(js)[0],r=cn().memoizedState;return[n,r]},useMutableSource:cd,useSyncExternalStore:hd,useId:Pd,unstable_isNewReconciler:!1},Hm={readContext:un,useCallback:bd,useContext:un,useEffect:uu,useImperativeHandle:kd,useInsertionEffect:_d,useLayoutEffect:wd,useMemo:Cd,useReducer:lu,useRef:xd,useState:function(){return lu(js)},useDebugValue:cu,useDeferredValue:function(n){var r=cn();return wt===null?r.memoizedState=n:Ad(r,wt.memoizedState,n)},useTransition:function(){var n=lu(js)[0],r=cn().memoizedState;return[n,r]},useMutableSource:cd,useSyncExternalStore:hd,useId:Pd,unstable_isNewReconciler:!1};function bn(n,r){if(n&&n.defaultProps){r=re({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function hu(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:re({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var aa={isMounted:function(n){return(n=n._reactInternals)?qn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Dt(),f=Mr(n),g=nr(c,f);g.payload=r,a!=null&&(g.callback=a),r=Ar(n,g,f),r!==null&&(Pn(r,n,f,c),Jo(r,n,f))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Dt(),f=Mr(n),g=nr(c,f);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=Ar(n,g,f),r!==null&&(Pn(r,n,f,c),Jo(r,n,f))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Dt(),c=Mr(n),f=nr(a,c);f.tag=2,r!=null&&(f.callback=r),r=Ar(n,f,c),r!==null&&(Pn(r,n,c,a),Jo(r,n,c))}};function Rd(n,r,a,c,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,v):r.prototype&&r.prototype.isPureReactComponent?!bs(a,c)||!bs(f,g):!0}function Id(n,r,a){var c=!1,f=kr,g=r.contextType;return typeof g=="object"&&g!==null?g=un(g):(f=Wt(r)?Yr:It.current,c=r.contextTypes,g=(c=c!=null)?Fi(n,f):kr),r=new r(a,g),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=aa,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),r}function Fd(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&aa.enqueueReplaceState(r,r.state,null)}function du(n,r,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Zl(n);var g=r.contextType;typeof g=="object"&&g!==null?f.context=un(g):(g=Wt(r)?Yr:It.current,f.context=Fi(n,g)),f.state=n.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(hu(n,r,g,a),f.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&aa.enqueueReplaceState(f,f.state,null),ea(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function $i(n,r){try{var a="",c=r;do a+=Re(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:r,stack:f,digest:null}}function fu(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function pu(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Vm=typeof WeakMap=="function"?WeakMap:Map;function Ld(n,r,a){a=nr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){pa||(pa=!0,Eu=c),pu(n,r)},a}function zd(n,r,a){a=nr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=r.value;a.payload=function(){return c(f)},a.callback=function(){pu(n,r)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){pu(n,r),typeof c!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})}),a}function Bd(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Vm;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(a)||(f.add(a),n=og.bind(null,n,r,a),r.then(n,n))}function jd(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Dd(n,r,a,c,f){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=nr(-1,1),r.tag=2,Ar(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Ym=R.ReactCurrentOwner,Gt=!1;function jt(n,r,a,c){r.child=n===null?id(r,null,a,c):ji(r,n.child,a,c)}function Od(n,r,a,c,f){a=a.render;var g=r.ref;return Oi(r,f),c=su(n,r,a,c,g,f),a=ou(),n!==null&&!Gt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~f,rr(n,r,f)):(Je&&a&&Ul(r),r.flags|=1,jt(n,r,c,f),r.child)}function Nd(n,r,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!Bu(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=g,$d(n,r,g,c,f)):(n=_a(a.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,(n.lanes&f)===0){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:bs,a(v,c)&&n.ref===r.ref)return rr(n,r,f)}return r.flags|=1,n=Ir(g,c),n.ref=r.ref,n.return=r,r.child=n}function $d(n,r,a,c,f){if(n!==null){var g=n.memoizedProps;if(bs(g,c)&&n.ref===r.ref)if(Gt=!1,r.pendingProps=c=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Gt=!0);else return r.lanes=n.lanes,rr(n,r,f)}return mu(n,r,a,c,f)}function Ud(n,r,a){var c=r.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Wi,nn),nn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Ve(Wi,nn),nn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Ve(Wi,nn),nn|=c}else g!==null?(c=g.baseLanes|a,r.memoizedState=null):c=a,Ve(Wi,nn),nn|=c;return jt(n,r,f,a),r.child}function Wd(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function mu(n,r,a,c,f){var g=Wt(a)?Yr:It.current;return g=Fi(r,g),Oi(r,f),a=su(n,r,a,c,g,f),c=ou(),n!==null&&!Gt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~f,rr(n,r,f)):(Je&&c&&Ul(r),r.flags|=1,jt(n,r,a,f),r.child)}function Gd(n,r,a,c,f){if(Wt(a)){var g=!0;Ho(r)}else g=!1;if(Oi(r,f),r.stateNode===null)ua(n,r),Id(r,a,c),du(r,a,c,f),c=!0;else if(n===null){var v=r.stateNode,C=r.memoizedProps;v.props=C;var P=v.context,j=a.contextType;typeof j=="object"&&j!==null?j=un(j):(j=Wt(a)?Yr:It.current,j=Fi(r,j));var Y=a.getDerivedStateFromProps,q=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function";q||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==c||P!==j)&&Fd(r,v,c,j),Cr=!1;var V=r.memoizedState;v.state=V,ea(r,c,v,f),P=r.memoizedState,C!==c||V!==P||Ut.current||Cr?(typeof Y=="function"&&(hu(r,a,Y,c),P=r.memoizedState),(C=Cr||Rd(r,a,C,c,V,P,j))?(q||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=P),v.props=c,v.state=P,v.context=j,c=C):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,od(n,r),C=r.memoizedProps,j=r.type===r.elementType?C:bn(r.type,C),v.props=j,q=r.pendingProps,V=v.context,P=a.contextType,typeof P=="object"&&P!==null?P=un(P):(P=Wt(a)?Yr:It.current,P=Fi(r,P));var le=a.getDerivedStateFromProps;(Y=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==q||V!==P)&&Fd(r,v,c,P),Cr=!1,V=r.memoizedState,v.state=V,ea(r,c,v,f);var ce=r.memoizedState;C!==q||V!==ce||Ut.current||Cr?(typeof le=="function"&&(hu(r,a,le,c),ce=r.memoizedState),(j=Cr||Rd(r,a,j,c,V,ce,P)||!1)?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ce,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ce,P)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&V===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&V===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ce),v.props=c,v.state=ce,v.context=P,c=j):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&V===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&V===n.memoizedState||(r.flags|=1024),c=!1)}return gu(n,r,a,c,g,f)}function gu(n,r,a,c,f,g){Wd(n,r);var v=(r.flags&128)!==0;if(!c&&!v)return f&&qh(r,a,!1),rr(n,r,g);c=r.stateNode,Ym.current=r;var C=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&v?(r.child=ji(r,n.child,null,g),r.child=ji(r,null,C,g)):jt(n,r,C,g),r.memoizedState=c.state,f&&qh(r,a,!0),r.child}function Hd(n){var r=n.stateNode;r.pendingContext?Yh(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Yh(n,r.context,!1),Jl(n,r.containerInfo)}function Vd(n,r,a,c,f){return Bi(),Vl(f),r.flags|=256,jt(n,r,a,c),r.child}var yu={dehydrated:null,treeContext:null,retryLane:0};function xu(n){return{baseLanes:n,cachePool:null,transitions:null}}function Yd(n,r,a){var c=r.pendingProps,f=st.current,g=!1,v=(r.flags&128)!==0,C;if((C=v)||(C=n!==null&&n.memoizedState===null?!1:(f&2)!==0),C?(g=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Ve(st,f&1),n===null)return Hl(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(v=c.children,n=c.fallback,g?(c=r.mode,g=r.child,v={mode:"hidden",children:v},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=wa(v,c,0,null),n=ri(n,c,a,null),g.return=r,n.return=r,g.sibling=n,r.child=g,r.child.memoizedState=xu(a),r.memoizedState=yu,n):vu(r,v));if(f=n.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return Xm(n,r,v,c,C,f,a);if(g){g=c.fallback,v=r.mode,f=n.child,C=f.sibling;var P={mode:"hidden",children:c.children};return(v&1)===0&&r.child!==f?(c=r.child,c.childLanes=0,c.pendingProps=P,r.deletions=null):(c=Ir(f,P),c.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=Ir(C,g):(g=ri(g,v,a,null),g.flags|=2),g.return=r,c.return=r,c.sibling=g,r.child=c,c=g,g=r.child,v=n.child.memoizedState,v=v===null?xu(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~a,r.memoizedState=yu,c}return g=n.child,n=g.sibling,c=Ir(g,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function vu(n,r){return r=wa({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function la(n,r,a,c){return c!==null&&Vl(c),ji(r,n.child,null,a),n=vu(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Xm(n,r,a,c,f,g,v){if(a)return r.flags&256?(r.flags&=-257,c=fu(Error(t(422))),la(n,r,v,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(g=c.fallback,f=r.mode,c=wa({mode:"visible",children:c.children},f,0,null),g=ri(g,f,v,null),g.flags|=2,c.return=r,g.return=r,c.sibling=g,r.child=c,(r.mode&1)!==0&&ji(r,n.child,null,v),r.child.memoizedState=xu(v),r.memoizedState=yu,g);if((r.mode&1)===0)return la(n,r,v,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var C=c.dgst;return c=C,g=Error(t(419)),c=fu(g,c,void 0),la(n,r,v,c)}if(C=(v&n.childLanes)!==0,Gt||C){if(c=bt,c!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|v))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,tr(n,f),Pn(c,n,f,-1))}return zu(),c=fu(Error(t(421))),la(n,r,v,c)}return f.data==="$?"?(r.flags|=128,r.child=n.child,r=ag.bind(null,n),f._reactRetry=r,null):(n=g.treeContext,tn=wr(f.nextSibling),en=r,Je=!0,kn=null,n!==null&&(an[ln++]=Jn,an[ln++]=er,an[ln++]=Xr,Jn=n.id,er=n.overflow,Xr=r),r=vu(r,c.children),r.flags|=4096,r)}function Xd(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Kl(n.return,r,a)}function _u(n,r,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function qd(n,r,a){var c=r.pendingProps,f=c.revealOrder,g=c.tail;if(jt(n,r,c.children,a),c=st.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xd(n,a,r);else if(n.tag===19)Xd(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ve(st,c),(r.mode&1)===0)r.memoizedState=null;else switch(f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&ta(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),_u(r,!1,f,a,g);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&ta(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}_u(r,!0,a,null,g);break;case"together":_u(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ua(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function rr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Jr|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=Ir(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Ir(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function qm(n,r,a){switch(r.tag){case 3:Hd(r),Bi();break;case 5:ud(r);break;case 1:Wt(r.type)&&Ho(r);break;case 4:Jl(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,f=r.memoizedProps.value;Ve(Qo,c._currentValue),c._currentValue=f;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Ve(st,st.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Yd(n,r,a):(Ve(st,st.current&1),n=rr(n,r,a),n!==null?n.sibling:null);Ve(st,st.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return qd(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ve(st,st.current),c)break;return null;case 22:case 23:return r.lanes=0,Ud(n,r,a)}return rr(n,r,a)}var Kd,wu,Qd,Zd;Kd=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},wu=function(){},Qd=function(n,r,a,c){var f=n.memoizedProps;if(f!==c){n=r.stateNode,Qr(On.current);var g=null;switch(a){case"input":f=Nt(n,f),c=Nt(n,c),g=[];break;case"select":f=re({},f,{value:void 0}),c=re({},c,{value:void 0}),g=[];break;case"textarea":f=pi(n,f),c=pi(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Uo)}us(a,c);var v;a=null;for(j in f)if(!c.hasOwnProperty(j)&&f.hasOwnProperty(j)&&f[j]!=null)if(j==="style"){var C=f[j];for(v in C)C.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?g||(g=[]):(g=g||[]).push(j,null));for(j in c){var P=c[j];if(C=f!=null?f[j]:void 0,c.hasOwnProperty(j)&&P!==C&&(P!=null||C!=null))if(j==="style")if(C){for(v in C)!C.hasOwnProperty(v)||P&&P.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in P)P.hasOwnProperty(v)&&C[v]!==P[v]&&(a||(a={}),a[v]=P[v])}else a||(g||(g=[]),g.push(j,a)),a=P;else j==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,C=C?C.__html:void 0,P!=null&&C!==P&&(g=g||[]).push(j,P)):j==="children"?typeof P!="string"&&typeof P!="number"||(g=g||[]).push(j,""+P):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(o.hasOwnProperty(j)?(P!=null&&j==="onScroll"&&Xe("scroll",n),g||C===P||(g=[])):(g=g||[]).push(j,P))}a&&(g=g||[]).push("style",a);var j=g;(r.updateQueue=j)&&(r.flags|=4)}},Zd=function(n,r,a,c){a!==c&&(r.flags|=4)};function Os(n,r){if(!Je)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Lt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function Km(n,r,a){var c=r.pendingProps;switch(Wl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(r),null;case 1:return Wt(r.type)&&Go(),Lt(r),null;case 3:return c=r.stateNode,Ni(),qe(Ut),qe(It),nu(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(qo(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,kn!==null&&(Iu(kn),kn=null))),wu(n,r),Lt(r),null;case 5:eu(r);var f=Qr(Ls.current);if(a=r.type,n!==null&&r.stateNode!=null)Qd(n,r,a,c,f),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Lt(r),null}if(n=Qr(On.current),qo(r)){c=r.stateNode,a=r.type;var g=r.memoizedProps;switch(c[Dn]=r,c[Es]=g,n=(r.mode&1)!==0,a){case"dialog":Xe("cancel",c),Xe("close",c);break;case"iframe":case"object":case"embed":Xe("load",c);break;case"video":case"audio":for(f=0;f<As.length;f++)Xe(As[f],c);break;case"source":Xe("error",c);break;case"img":case"image":case"link":Xe("error",c),Xe("load",c);break;case"details":Xe("toggle",c);break;case"input":qt(c,g),Xe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Xe("invalid",c);break;case"textarea":vn(c,g),Xe("invalid",c)}us(a,g),f=null;for(var v in g)if(g.hasOwnProperty(v)){var C=g[v];v==="children"?typeof C=="string"?c.textContent!==C&&(g.suppressHydrationWarning!==!0&&$o(c.textContent,C,n),f=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&$o(c.textContent,C,n),f=["children",""+C]):o.hasOwnProperty(v)&&C!=null&&v==="onScroll"&&Xe("scroll",c)}switch(a){case"input":Bn(c),vt(c,g,!0);break;case"textarea":Bn(c),yo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Uo)}c=f,r.updateQueue=c,c!==null&&(r.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=mi(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Dn]=r,n[Es]=c,Kd(n,r,!1,!1),r.stateNode=n;e:{switch(v=Nr(a,c),a){case"dialog":Xe("cancel",n),Xe("close",n),f=c;break;case"iframe":case"object":case"embed":Xe("load",n),f=c;break;case"video":case"audio":for(f=0;f<As.length;f++)Xe(As[f],n);f=c;break;case"source":Xe("error",n),f=c;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),f=c;break;case"details":Xe("toggle",n),f=c;break;case"input":qt(n,c),f=Nt(n,c),Xe("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=re({},c,{value:void 0}),Xe("invalid",n);break;case"textarea":vn(n,c),f=pi(n,c),Xe("invalid",n);break;default:f=c}us(a,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var P=C[g];g==="style"?Kt(n,P):g==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Or(n,P)):g==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&hr(n,P):typeof P=="number"&&hr(n,""+P):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?P!=null&&g==="onScroll"&&Xe("scroll",n):P!=null&&E(n,g,P,v))}switch(a){case"input":Bn(n),vt(n,c,!1);break;case"textarea":Bn(n),yo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ie(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?xn(n,!!c.multiple,g,!1):c.defaultValue!=null&&xn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Uo)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Lt(r),null;case 6:if(n&&r.stateNode!=null)Zd(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Qr(Ls.current),Qr(On.current),qo(r)){if(c=r.stateNode,a=r.memoizedProps,c[Dn]=r,(g=c.nodeValue!==a)&&(n=en,n!==null))switch(n.tag){case 3:$o(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&$o(c.nodeValue,a,(n.mode&1)!==0)}g&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Dn]=r,r.stateNode=c}return Lt(r),null;case 13:if(qe(st),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Je&&tn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)td(),Bi(),r.flags|=98560,g=!1;else if(g=qo(r),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Dn]=r}else Bi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Lt(r),g=!1}else kn!==null&&(Iu(kn),kn=null),g=!0;if(!g)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(st.current&1)!==0?St===0&&(St=3):zu())),r.updateQueue!==null&&(r.flags|=4),Lt(r),null);case 4:return Ni(),wu(n,r),n===null&&Ps(r.stateNode.containerInfo),Lt(r),null;case 10:return ql(r.type._context),Lt(r),null;case 17:return Wt(r.type)&&Go(),Lt(r),null;case 19:if(qe(st),g=r.memoizedState,g===null)return Lt(r),null;if(c=(r.flags&128)!==0,v=g.rendering,v===null)if(c)Os(g,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(v=ta(n),v!==null){for(r.flags|=128,Os(g,!1),c=v.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)g=a,n=c,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ve(st,st.current&1|2),r.child}n=n.sibling}g.tail!==null&&tt()>Gi&&(r.flags|=128,c=!0,Os(g,!1),r.lanes=4194304)}else{if(!c)if(n=ta(v),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Os(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Je)return Lt(r),null}else 2*tt()-g.renderingStartTime>Gi&&a!==1073741824&&(r.flags|=128,c=!0,Os(g,!1),r.lanes=4194304);g.isBackwards?(v.sibling=r.child,r.child=v):(a=g.last,a!==null?a.sibling=v:r.child=v,g.last=v)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=tt(),r.sibling=null,a=st.current,Ve(st,c?a&1|2:a&1),r):(Lt(r),null);case 22:case 23:return Lu(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(nn&1073741824)!==0&&(Lt(r),r.subtreeFlags&6&&(r.flags|=8192)):Lt(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function Qm(n,r){switch(Wl(r),r.tag){case 1:return Wt(r.type)&&Go(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Ni(),qe(Ut),qe(It),nu(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return eu(r),null;case 13:if(qe(st),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Bi()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return qe(st),null;case 4:return Ni(),null;case 10:return ql(r.type._context),null;case 22:case 23:return Lu(),null;case 24:return null;default:return null}}var ca=!1,zt=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Ui(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ut(n,r,c)}else a.current=null}function Su(n,r,a){try{a()}catch(c){ut(n,r,c)}}var Jd=!1;function Jm(n,r){if(Ll=Mo,n=Rh(),Al(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var v=0,C=-1,P=-1,j=0,Y=0,q=n,V=null;t:for(;;){for(var le;q!==a||f!==0&&q.nodeType!==3||(C=v+f),q!==g||c!==0&&q.nodeType!==3||(P=v+c),q.nodeType===3&&(v+=q.nodeValue.length),(le=q.firstChild)!==null;)V=q,q=le;for(;;){if(q===n)break t;if(V===a&&++j===f&&(C=v),V===g&&++Y===c&&(P=v),(le=q.nextSibling)!==null)break;q=V,V=q.parentNode}q=le}a=C===-1||P===-1?null:{start:C,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(zl={focusedElem:n,selectionRange:a},Mo=!1,ue=r;ue!==null;)if(r=ue,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ue=n;else for(;ue!==null;){r=ue;try{var ce=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,mt=ce.memoizedState,L=r.stateNode,M=L.getSnapshotBeforeUpdate(r.elementType===r.type?he:bn(r.type,he),mt);L.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var z=r.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(K){ut(r,r.return,K)}if(n=r.sibling,n!==null){n.return=r.return,ue=n;break}ue=r.return}return ce=Jd,Jd=!1,ce}function Ns(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&Su(r,a,g)}f=f.next}while(f!==c)}}function ha(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function ku(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function ef(n){var r=n.alternate;r!==null&&(n.alternate=null,ef(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Dn],delete r[Es],delete r[Ol],delete r[zm],delete r[Bm])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function tf(n){return n.tag===5||n.tag===3||n.tag===4}function nf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function bu(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Uo));else if(c!==4&&(n=n.child,n!==null))for(bu(n,r,a),n=n.sibling;n!==null;)bu(n,r,a),n=n.sibling}function Cu(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Cu(n,r,a),n=n.sibling;n!==null;)Cu(n,r,a),n=n.sibling}var Pt=null,Cn=!1;function Pr(n,r,a){for(a=a.child;a!==null;)rf(n,r,a),a=a.sibling}function rf(n,r,a){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Si,a)}catch{}switch(a.tag){case 5:zt||Ui(a,r);case 6:var c=Pt,f=Cn;Pt=null,Pr(n,r,a),Pt=c,Cn=f,Pt!==null&&(Cn?(n=Pt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&(Cn?(n=Pt,a=a.stateNode,n.nodeType===8?Dl(n.parentNode,a):n.nodeType===1&&Dl(n,a),xs(n)):Dl(Pt,a.stateNode));break;case 4:c=Pt,f=Cn,Pt=a.stateNode.containerInfo,Cn=!0,Pr(n,r,a),Pt=c,Cn=f;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&Su(a,r,v),f=f.next}while(f!==c)}Pr(n,r,a);break;case 1:if(!zt&&(Ui(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){ut(a,r,C)}Pr(n,r,a);break;case 21:Pr(n,r,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,Pr(n,r,a),zt=c):Pr(n,r,a);break;default:Pr(n,r,a)}}function sf(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Zm),r.forEach(function(c){var f=lg.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function An(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,v=r,C=v;e:for(;C!==null;){switch(C.tag){case 5:Pt=C.stateNode,Cn=!1;break e;case 3:Pt=C.stateNode.containerInfo,Cn=!0;break e;case 4:Pt=C.stateNode.containerInfo,Cn=!0;break e}C=C.return}if(Pt===null)throw Error(t(160));rf(g,v,f),Pt=null,Cn=!1;var P=f.alternate;P!==null&&(P.return=null),f.return=null}catch(j){ut(f,r,j)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)of(r,n),r=r.sibling}function of(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(An(r,n),$n(n),c&4){try{Ns(3,n,n.return),ha(3,n)}catch(he){ut(n,n.return,he)}try{Ns(5,n,n.return)}catch(he){ut(n,n.return,he)}}break;case 1:An(r,n),$n(n),c&512&&a!==null&&Ui(a,a.return);break;case 5:if(An(r,n),$n(n),c&512&&a!==null&&Ui(a,a.return),n.flags&32){var f=n.stateNode;try{hr(f,"")}catch(he){ut(n,n.return,he)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,v=a!==null?a.memoizedProps:g,C=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&gt(f,g),Nr(C,v);var j=Nr(C,g);for(v=0;v<P.length;v+=2){var Y=P[v],q=P[v+1];Y==="style"?Kt(f,q):Y==="dangerouslySetInnerHTML"?Or(f,q):Y==="children"?hr(f,q):E(f,Y,q,j)}switch(C){case"input":yn(f,g);break;case"textarea":Dr(f,g);break;case"select":var V=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var le=g.value;le!=null?xn(f,!!g.multiple,le,!1):V!==!!g.multiple&&(g.defaultValue!=null?xn(f,!!g.multiple,g.defaultValue,!0):xn(f,!!g.multiple,g.multiple?[]:"",!1))}f[Es]=g}catch(he){ut(n,n.return,he)}}break;case 6:if(An(r,n),$n(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(he){ut(n,n.return,he)}}break;case 3:if(An(r,n),$n(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{xs(r.containerInfo)}catch(he){ut(n,n.return,he)}break;case 4:An(r,n),$n(n);break;case 13:An(r,n),$n(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Tu=tt())),c&4&&sf(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(zt=(j=zt)||Y,An(r,n),zt=j):An(r,n),$n(n),c&8192){if(j=n.memoizedState!==null,(n.stateNode.isHidden=j)&&!Y&&(n.mode&1)!==0)for(ue=n,Y=n.child;Y!==null;){for(q=ue=Y;ue!==null;){switch(V=ue,le=V.child,V.tag){case 0:case 11:case 14:case 15:Ns(4,V,V.return);break;case 1:Ui(V,V.return);var ce=V.stateNode;if(typeof ce.componentWillUnmount=="function"){c=V,a=V.return;try{r=c,ce.props=r.memoizedProps,ce.state=r.memoizedState,ce.componentWillUnmount()}catch(he){ut(c,a,he)}}break;case 5:Ui(V,V.return);break;case 22:if(V.memoizedState!==null){uf(q);continue}}le!==null?(le.return=V,ue=le):uf(q)}Y=Y.sibling}e:for(Y=null,q=n;;){if(q.tag===5){if(Y===null){Y=q;try{f=q.stateNode,j?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=q.stateNode,P=q.memoizedProps.style,v=P!=null&&P.hasOwnProperty("display")?P.display:null,C.style.display=fr("display",v))}catch(he){ut(n,n.return,he)}}}else if(q.tag===6){if(Y===null)try{q.stateNode.nodeValue=j?"":q.memoizedProps}catch(he){ut(n,n.return,he)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===n)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===n)break e;for(;q.sibling===null;){if(q.return===null||q.return===n)break e;Y===q&&(Y=null),q=q.return}Y===q&&(Y=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:An(r,n),$n(n),c&4&&sf(n);break;case 21:break;default:An(r,n),$n(n)}}function $n(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(tf(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(hr(f,""),c.flags&=-33);var g=nf(n);Cu(n,g,f);break;case 3:case 4:var v=c.stateNode.containerInfo,C=nf(n);bu(n,C,v);break;default:throw Error(t(161))}}catch(P){ut(n,n.return,P)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function eg(n,r,a){ue=n,af(n)}function af(n,r,a){for(var c=(n.mode&1)!==0;ue!==null;){var f=ue,g=f.child;if(f.tag===22&&c){var v=f.memoizedState!==null||ca;if(!v){var C=f.alternate,P=C!==null&&C.memoizedState!==null||zt;C=ca;var j=zt;if(ca=v,(zt=P)&&!j)for(ue=f;ue!==null;)v=ue,P=v.child,v.tag===22&&v.memoizedState!==null?cf(f):P!==null?(P.return=v,ue=P):cf(f);for(;g!==null;)ue=g,af(g),g=g.sibling;ue=f,ca=C,zt=j}lf(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ue=g):lf(n)}}function lf(n){for(;ue!==null;){var r=ue;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:zt||ha(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!zt)if(a===null)c.componentDidMount();else{var f=r.elementType===r.type?a.memoizedProps:bn(r.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&ld(r,g,c);break;case 3:var v=r.updateQueue;if(v!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}ld(r,v,a)}break;case 5:var C=r.stateNode;if(a===null&&r.flags&4){a=C;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var j=r.alternate;if(j!==null){var Y=j.memoizedState;if(Y!==null){var q=Y.dehydrated;q!==null&&xs(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||r.flags&512&&ku(r)}catch(V){ut(r,r.return,V)}}if(r===n){ue=null;break}if(a=r.sibling,a!==null){a.return=r.return,ue=a;break}ue=r.return}}function uf(n){for(;ue!==null;){var r=ue;if(r===n){ue=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ue=a;break}ue=r.return}}function cf(n){for(;ue!==null;){var r=ue;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{ha(4,r)}catch(P){ut(r,a,P)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var f=r.return;try{c.componentDidMount()}catch(P){ut(r,f,P)}}var g=r.return;try{ku(r)}catch(P){ut(r,g,P)}break;case 5:var v=r.return;try{ku(r)}catch(P){ut(r,v,P)}}}catch(P){ut(r,r.return,P)}if(r===n){ue=null;break}var C=r.sibling;if(C!==null){C.return=r.return,ue=C;break}ue=r.return}}var tg=Math.ceil,da=R.ReactCurrentDispatcher,Au=R.ReactCurrentOwner,hn=R.ReactCurrentBatchConfig,Ne=0,bt=null,yt=null,Tt=0,nn=0,Wi=Sr(0),St=0,$s=null,Jr=0,fa=0,Pu=0,Us=null,Ht=null,Tu=0,Gi=1/0,ir=null,pa=!1,Eu=null,Tr=null,ma=!1,Er=null,ga=0,Ws=0,Mu=null,ya=-1,xa=0;function Dt(){return(Ne&6)!==0?tt():ya!==-1?ya:ya=tt()}function Mr(n){return(n.mode&1)===0?1:(Ne&2)!==0&&Tt!==0?Tt&-Tt:Dm.transition!==null?(xa===0&&(xa=ve()),xa):(n=fe,n!==0||(n=window.event,n=n===void 0?16:hh(n.type)),n)}function Pn(n,r,a,c){if(50<Ws)throw Ws=0,Mu=null,Error(t(185));ye(n,a,c),((Ne&2)===0||n!==bt)&&(n===bt&&((Ne&2)===0&&(fa|=a),St===4&&Rr(n,Tt)),Vt(n,c),a===1&&Ne===0&&(r.mode&1)===0&&(Gi=tt()+500,Vo&&br()))}function Vt(n,r){var a=n.callbackNode;$(n,r);var c=H(n,n===bt?Tt:0);if(c===0)a!==null&&Co(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&Co(a),r===1)n.tag===0?jm(df.bind(null,n)):Kh(df.bind(null,n)),Fm(function(){(Ne&6)===0&&br()}),a=null;else{switch($e(c)){case 1:a=_t;break;case 4:a=We;break;case 16:a=wi;break;case 536870912:a=Kn;break;default:a=wi}a=_f(a,hf.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function hf(n,r){if(ya=-1,xa=0,(Ne&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Hi()&&n.callbackNode!==a)return null;var c=H(n,n===bt?Tt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=va(n,c);else{r=c;var f=Ne;Ne|=2;var g=pf();(bt!==n||Tt!==r)&&(ir=null,Gi=tt()+500,ti(n,r));do try{ig();break}catch(C){ff(n,C)}while(!0);Xl(),da.current=g,Ne=f,yt!==null?r=0:(bt=null,Tt=0,r=St)}if(r!==0){if(r===2&&(f=Z(n),f!==0&&(c=f,r=Ru(n,f))),r===1)throw a=$s,ti(n,0),Rr(n,c),Vt(n,tt()),a;if(r===6)Rr(n,c);else{if(f=n.current.alternate,(c&30)===0&&!ng(f)&&(r=va(n,c),r===2&&(g=Z(n),g!==0&&(c=g,r=Ru(n,g))),r===1))throw a=$s,ti(n,0),Rr(n,c),Vt(n,tt()),a;switch(n.finishedWork=f,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:ni(n,Ht,ir);break;case 3:if(Rr(n,c),(c&130023424)===c&&(r=Tu+500-tt(),10<r)){if(H(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){Dt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=jl(ni.bind(null,n,Ht,ir),r);break}ni(n,Ht,ir);break;case 4:if(Rr(n,c),(c&4194240)===c)break;for(r=n.eventTimes,f=-1;0<c;){var v=31-$t(c);g=1<<v,v=r[v],v>f&&(f=v),c&=~g}if(c=f,c=tt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*tg(c/1960))-c,10<c){n.timeoutHandle=jl(ni.bind(null,n,Ht,ir),c);break}ni(n,Ht,ir);break;case 5:ni(n,Ht,ir);break;default:throw Error(t(329))}}}return Vt(n,tt()),n.callbackNode===a?hf.bind(null,n):null}function Ru(n,r){var a=Us;return n.current.memoizedState.isDehydrated&&(ti(n,r).flags|=256),n=va(n,r),n!==2&&(r=Ht,Ht=a,r!==null&&Iu(r)),n}function Iu(n){Ht===null?Ht=n:Ht.push.apply(Ht,n)}function ng(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!Sn(g(),f))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Rr(n,r){for(r&=~Pu,r&=~fa,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-$t(r),c=1<<a;n[a]=-1,r&=~c}}function df(n){if((Ne&6)!==0)throw Error(t(327));Hi();var r=H(n,0);if((r&1)===0)return Vt(n,tt()),null;var a=va(n,r);if(n.tag!==0&&a===2){var c=Z(n);c!==0&&(r=c,a=Ru(n,c))}if(a===1)throw a=$s,ti(n,0),Rr(n,r),Vt(n,tt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,ni(n,Ht,ir),Vt(n,tt()),null}function Fu(n,r){var a=Ne;Ne|=1;try{return n(r)}finally{Ne=a,Ne===0&&(Gi=tt()+500,Vo&&br())}}function ei(n){Er!==null&&Er.tag===0&&(Ne&6)===0&&Hi();var r=Ne;Ne|=1;var a=hn.transition,c=fe;try{if(hn.transition=null,fe=1,n)return n()}finally{fe=c,hn.transition=a,Ne=r,(Ne&6)===0&&br()}}function Lu(){nn=Wi.current,qe(Wi)}function ti(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Im(a)),yt!==null)for(a=yt.return;a!==null;){var c=a;switch(Wl(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Go();break;case 3:Ni(),qe(Ut),qe(It),nu();break;case 5:eu(c);break;case 4:Ni();break;case 13:qe(st);break;case 19:qe(st);break;case 10:ql(c.type._context);break;case 22:case 23:Lu()}a=a.return}if(bt=n,yt=n=Ir(n.current,null),Tt=nn=r,St=0,$s=null,Pu=fa=Jr=0,Ht=Us=null,Kr!==null){for(r=0;r<Kr.length;r++)if(a=Kr[r],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var v=g.next;g.next=f,c.next=v}a.pending=c}Kr=null}return n}function ff(n,r){do{var a=yt;try{if(Xl(),na.current=oa,ra){for(var c=ot.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}ra=!1}if(Zr=0,kt=wt=ot=null,zs=!1,Bs=0,Au.current=null,a===null||a.return===null){St=1,$s=r,yt=null;break}e:{var g=n,v=a.return,C=a,P=r;if(r=Tt,C.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var j=P,Y=C,q=Y.tag;if((Y.mode&1)===0&&(q===0||q===11||q===15)){var V=Y.alternate;V?(Y.updateQueue=V.updateQueue,Y.memoizedState=V.memoizedState,Y.lanes=V.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var le=jd(v);if(le!==null){le.flags&=-257,Dd(le,v,C,g,r),le.mode&1&&Bd(g,j,r),r=le,P=j;var ce=r.updateQueue;if(ce===null){var he=new Set;he.add(P),r.updateQueue=he}else ce.add(P);break e}else{if((r&1)===0){Bd(g,j,r),zu();break e}P=Error(t(426))}}else if(Je&&C.mode&1){var mt=jd(v);if(mt!==null){(mt.flags&65536)===0&&(mt.flags|=256),Dd(mt,v,C,g,r),Vl($i(P,C));break e}}g=P=$i(P,C),St!==4&&(St=2),Us===null?Us=[g]:Us.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,r&=-r,g.lanes|=r;var L=Ld(g,P,r);ad(g,L);break e;case 1:C=P;var M=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Tr===null||!Tr.has(z)))){g.flags|=65536,r&=-r,g.lanes|=r;var K=zd(g,C,r);ad(g,K);break e}}g=g.return}while(g!==null)}gf(a)}catch(me){r=me,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function pf(){var n=da.current;return da.current=oa,n===null?oa:n}function zu(){(St===0||St===3||St===2)&&(St=4),bt===null||(Jr&268435455)===0&&(fa&268435455)===0||Rr(bt,Tt)}function va(n,r){var a=Ne;Ne|=2;var c=pf();(bt!==n||Tt!==r)&&(ir=null,ti(n,r));do try{rg();break}catch(f){ff(n,f)}while(!0);if(Xl(),Ne=a,da.current=c,yt!==null)throw Error(t(261));return bt=null,Tt=0,St}function rg(){for(;yt!==null;)mf(yt)}function ig(){for(;yt!==null&&!fl();)mf(yt)}function mf(n){var r=vf(n.alternate,n,nn);n.memoizedProps=n.pendingProps,r===null?gf(n):yt=r,Au.current=null}function gf(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=Km(a,r,nn),a!==null){yt=a;return}}else{if(a=Qm(a,r),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{St=6,yt=null;return}}if(r=r.sibling,r!==null){yt=r;return}yt=r=n}while(r!==null);St===0&&(St=5)}function ni(n,r,a){var c=fe,f=hn.transition;try{hn.transition=null,fe=1,sg(n,r,a,c)}finally{hn.transition=f,fe=c}return null}function sg(n,r,a,c){do Hi();while(Er!==null);if((Ne&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(Ce(n,g),n===bt&&(yt=bt=null,Tt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ma||(ma=!0,_f(wi,function(){return Hi(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=hn.transition,hn.transition=null;var v=fe;fe=1;var C=Ne;Ne|=4,Au.current=null,Jm(n,a),of(a,n),Cm(zl),Mo=!!Ll,zl=Ll=null,n.current=a,eg(a),pl(),Ne=C,fe=v,hn.transition=g}else n.current=a;if(ma&&(ma=!1,Er=n,ga=f),g=n.pendingLanes,g===0&&(Tr=null),Ao(a.stateNode),Vt(n,tt()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)f=r[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(pa)throw pa=!1,n=Eu,Eu=null,n;return(ga&1)!==0&&n.tag!==0&&Hi(),g=n.pendingLanes,(g&1)!==0?n===Mu?Ws++:(Ws=0,Mu=n):Ws=0,br(),null}function Hi(){if(Er!==null){var n=$e(ga),r=hn.transition,a=fe;try{if(hn.transition=null,fe=16>n?16:n,Er===null)var c=!1;else{if(n=Er,Er=null,ga=0,(Ne&6)!==0)throw Error(t(331));var f=Ne;for(Ne|=4,ue=n.current;ue!==null;){var g=ue,v=g.child;if((ue.flags&16)!==0){var C=g.deletions;if(C!==null){for(var P=0;P<C.length;P++){var j=C[P];for(ue=j;ue!==null;){var Y=ue;switch(Y.tag){case 0:case 11:case 15:Ns(8,Y,g)}var q=Y.child;if(q!==null)q.return=Y,ue=q;else for(;ue!==null;){Y=ue;var V=Y.sibling,le=Y.return;if(ef(Y),Y===j){ue=null;break}if(V!==null){V.return=le,ue=V;break}ue=le}}}var ce=g.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var mt=he.sibling;he.sibling=null,he=mt}while(he!==null)}}ue=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,ue=v;else e:for(;ue!==null;){if(g=ue,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ns(9,g,g.return)}var L=g.sibling;if(L!==null){L.return=g.return,ue=L;break e}ue=g.return}}var M=n.current;for(ue=M;ue!==null;){v=ue;var z=v.child;if((v.subtreeFlags&2064)!==0&&z!==null)z.return=v,ue=z;else e:for(v=M;ue!==null;){if(C=ue,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:ha(9,C)}}catch(me){ut(C,C.return,me)}if(C===v){ue=null;break e}var K=C.sibling;if(K!==null){K.return=C.return,ue=K;break e}ue=C.return}}if(Ne=f,br(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Si,n)}catch{}c=!0}return c}finally{fe=a,hn.transition=r}}return!1}function yf(n,r,a){r=$i(a,r),r=Ld(n,r,1),n=Ar(n,r,1),r=Dt(),n!==null&&(ye(n,1,r),Vt(n,r))}function ut(n,r,a){if(n.tag===3)yf(n,n,a);else for(;r!==null;){if(r.tag===3){yf(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Tr===null||!Tr.has(c))){n=$i(a,n),n=zd(r,n,1),r=Ar(r,n,1),n=Dt(),r!==null&&(ye(r,1,n),Vt(r,n));break}}r=r.return}}function og(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=Dt(),n.pingedLanes|=n.suspendedLanes&a,bt===n&&(Tt&a)===a&&(St===4||St===3&&(Tt&130023424)===Tt&&500>tt()-Tu?ti(n,0):Pu|=a),Vt(n,r)}function xf(n,r){r===0&&((n.mode&1)===0?r=1:(r=ie,ie<<=1,(ie&130023424)===0&&(ie=4194304)));var a=Dt();n=tr(n,r),n!==null&&(ye(n,r,a),Vt(n,a))}function ag(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),xf(n,a)}function lg(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),xf(n,a)}var vf;vf=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Ut.current)Gt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Gt=!1,qm(n,r,a);Gt=(n.flags&131072)!==0}else Gt=!1,Je&&(r.flags&1048576)!==0&&Qh(r,Xo,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;ua(n,r),n=r.pendingProps;var f=Fi(r,It.current);Oi(r,a),f=su(null,r,c,n,f,a);var g=ou();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Wt(c)?(g=!0,Ho(r)):g=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Zl(r),f.updater=aa,r.stateNode=f,f._reactInternals=r,du(r,c,n,a),r=gu(null,r,c,!0,g,a)):(r.tag=0,Je&&g&&Ul(r),jt(null,r,f,a),r=r.child),r;case 16:c=r.elementType;e:{switch(ua(n,r),n=r.pendingProps,f=c._init,c=f(c._payload),r.type=c,f=r.tag=cg(c),n=bn(c,n),f){case 0:r=mu(null,r,c,n,a);break e;case 1:r=Gd(null,r,c,n,a);break e;case 11:r=Od(null,r,c,n,a);break e;case 14:r=Nd(null,r,c,bn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:bn(c,f),mu(n,r,c,f,a);case 1:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:bn(c,f),Gd(n,r,c,f,a);case 3:e:{if(Hd(r),n===null)throw Error(t(387));c=r.pendingProps,g=r.memoizedState,f=g.element,od(n,r),ea(r,c,null,a);var v=r.memoizedState;if(c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){f=$i(Error(t(423)),r),r=Vd(n,r,c,a,f);break e}else if(c!==f){f=$i(Error(t(424)),r),r=Vd(n,r,c,a,f);break e}else for(tn=wr(r.stateNode.containerInfo.firstChild),en=r,Je=!0,kn=null,a=id(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Bi(),c===f){r=rr(n,r,a);break e}jt(n,r,c,a)}r=r.child}return r;case 5:return ud(r),n===null&&Hl(r),c=r.type,f=r.pendingProps,g=n!==null?n.memoizedProps:null,v=f.children,Bl(c,f)?v=null:g!==null&&Bl(c,g)&&(r.flags|=32),Wd(n,r),jt(n,r,v,a),r.child;case 6:return n===null&&Hl(r),null;case 13:return Yd(n,r,a);case 4:return Jl(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=ji(r,null,c,a):jt(n,r,c,a),r.child;case 11:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:bn(c,f),Od(n,r,c,f,a);case 7:return jt(n,r,r.pendingProps,a),r.child;case 8:return jt(n,r,r.pendingProps.children,a),r.child;case 12:return jt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,f=r.pendingProps,g=r.memoizedProps,v=f.value,Ve(Qo,c._currentValue),c._currentValue=v,g!==null)if(Sn(g.value,v)){if(g.children===f.children&&!Ut.current){r=rr(n,r,a);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var C=g.dependencies;if(C!==null){v=g.child;for(var P=C.firstContext;P!==null;){if(P.context===c){if(g.tag===1){P=nr(-1,a&-a),P.tag=2;var j=g.updateQueue;if(j!==null){j=j.shared;var Y=j.pending;Y===null?P.next=P:(P.next=Y.next,Y.next=P),j.pending=P}}g.lanes|=a,P=g.alternate,P!==null&&(P.lanes|=a),Kl(g.return,a,r),C.lanes|=a;break}P=P.next}}else if(g.tag===10)v=g.type===r.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=a,C=v.alternate,C!==null&&(C.lanes|=a),Kl(v,a,r),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===r){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}jt(n,r,f.children,a),r=r.child}return r;case 9:return f=r.type,c=r.pendingProps.children,Oi(r,a),f=un(f),c=c(f),r.flags|=1,jt(n,r,c,a),r.child;case 14:return c=r.type,f=bn(c,r.pendingProps),f=bn(c.type,f),Nd(n,r,c,f,a);case 15:return $d(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:bn(c,f),ua(n,r),r.tag=1,Wt(c)?(n=!0,Ho(r)):n=!1,Oi(r,a),Id(r,c,f),du(r,c,f,a),gu(null,r,c,!0,n,a);case 19:return qd(n,r,a);case 22:return Ud(n,r,a)}throw Error(t(156,r.tag))};function _f(n,r){return bo(n,r)}function ug(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(n,r,a,c){return new ug(n,r,a,c)}function Bu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cg(n){if(typeof n=="function")return Bu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Te)return 11;if(n===dt)return 14}return 2}function Ir(n,r){var a=n.alternate;return a===null?(a=dn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function _a(n,r,a,c,f,g){var v=2;if(c=n,typeof n=="function")Bu(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case D:return ri(a.children,f,g,r);case oe:v=8,f|=8;break;case ae:return n=dn(12,a,r,f|2),n.elementType=ae,n.lanes=g,n;case pe:return n=dn(13,a,r,f),n.elementType=pe,n.lanes=g,n;case Ee:return n=dn(19,a,r,f),n.elementType=Ee,n.lanes=g,n;case se:return wa(a,f,g,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:v=10;break e;case ne:v=9;break e;case Te:v=11;break e;case dt:v=14;break e;case te:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=dn(v,a,r,f),r.elementType=n,r.type=c,r.lanes=g,r}function ri(n,r,a,c){return n=dn(7,n,c,r),n.lanes=a,n}function wa(n,r,a,c){return n=dn(22,n,c,r),n.elementType=se,n.lanes=a,n.stateNode={isHidden:!1},n}function ju(n,r,a){return n=dn(6,n,null,r),n.lanes=a,n}function Du(n,r,a){return r=dn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function hg(n,r,a,c,f){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ze(0),this.expirationTimes=ze(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ze(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Ou(n,r,a,c,f,g,v,C,P){return n=new hg(n,r,a,C,P),r===1?(r=1,g===!0&&(r|=8)):r=0,g=dn(3,null,null,r),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zl(g),n}function dg(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function wf(n){if(!n)return kr;n=n._reactInternals;e:{if(qn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Wt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Wt(a))return Xh(n,a,r)}return r}function Sf(n,r,a,c,f,g,v,C,P){return n=Ou(a,c,!0,n,f,g,v,C,P),n.context=wf(null),a=n.current,c=Dt(),f=Mr(a),g=nr(c,f),g.callback=r??null,Ar(a,g,f),n.current.lanes=f,ye(n,f,c),Vt(n,c),n}function Sa(n,r,a,c){var f=r.current,g=Dt(),v=Mr(f);return a=wf(a),r.context===null?r.context=a:r.pendingContext=a,r=nr(g,v),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=Ar(f,r,v),n!==null&&(Pn(n,f,v,g),Jo(n,f,v)),v}function ka(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function kf(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Nu(n,r){kf(n,r),(n=n.alternate)&&kf(n,r)}function fg(){return null}var bf=typeof reportError=="function"?reportError:function(n){console.error(n)};function $u(n){this._internalRoot=n}ba.prototype.render=$u.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));Sa(n,r,null,null)},ba.prototype.unmount=$u.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;ei(function(){Sa(null,n,null,null)}),r[Qn]=null}};function ba(n){this._internalRoot=n}ba.prototype.unstable_scheduleHydration=function(n){if(n){var r=Zt();n={blockedOn:null,target:n,priority:r};for(var a=0;a<xr.length&&r!==0&&r<xr[a].priority;a++);xr.splice(a,0,n),a===0&&uh(n)}};function Uu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ca(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Cf(){}function pg(n,r,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var j=ka(v);g.call(j)}}var v=Sf(r,c,n,0,null,!1,!1,"",Cf);return n._reactRootContainer=v,n[Qn]=v.current,Ps(n.nodeType===8?n.parentNode:n),ei(),v}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var C=c;c=function(){var j=ka(P);C.call(j)}}var P=Ou(n,0,!1,null,null,!1,!1,"",Cf);return n._reactRootContainer=P,n[Qn]=P.current,Ps(n.nodeType===8?n.parentNode:n),ei(function(){Sa(r,P,a,c)}),P}function Aa(n,r,a,c,f){var g=a._reactRootContainer;if(g){var v=g;if(typeof f=="function"){var C=f;f=function(){var P=ka(v);C.call(P)}}Sa(r,v,n,f)}else v=pg(a,r,n,f,c);return ka(v)}pt=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=U(r.pendingLanes);a!==0&&(ke(r,a|1),Vt(r,tt()),(Ne&6)===0&&(Gi=tt()+500,br()))}break;case 13:ei(function(){var c=tr(n,1);if(c!==null){var f=Dt();Pn(c,n,1,f)}}),Nu(n,1)}},rt=function(n){if(n.tag===13){var r=tr(n,134217728);if(r!==null){var a=Dt();Pn(r,n,134217728,a)}Nu(n,134217728)}},it=function(n){if(n.tag===13){var r=Mr(n),a=tr(n,r);if(a!==null){var c=Dt();Pn(a,n,r,c)}Nu(n,r)}},Zt=function(){return fe},ki=function(n,r){var a=fe;try{return fe=n,r()}finally{fe=a}},de=function(n,r,a){switch(r){case"input":if(yn(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var f=Wo(c);if(!f)throw Error(t(90));on(c),yn(c,f)}}}break;case"textarea":Dr(n,a);break;case"select":r=a.value,r!=null&&xn(n,!!a.multiple,r,!1)}},hs=Fu,xi=ei;var mg={usingClientEntryPoint:!1,Events:[Ms,Ri,Wo,_o,yi,Fu]},Gs={findFiberByHostInstance:Vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gg={bundleType:Gs.bundleType,version:Gs.version,rendererPackageName:Gs.rendererPackageName,rendererConfig:Gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=So(n),n===null?null:n.stateNode},findFiberByHostInstance:Gs.findFiberByHostInstance||fg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pa.isDisabled&&Pa.supportsFiber)try{Si=Pa.inject(gg),Qt=Pa}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mg,Yt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uu(r))throw Error(t(200));return dg(n,r,null,a)},Yt.createRoot=function(n,r){if(!Uu(n))throw Error(t(299));var a=!1,c="",f=bf;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=Ou(n,1,!1,null,null,a,!1,c,f),n[Qn]=r.current,Ps(n.nodeType===8?n.parentNode:n),new $u(r)},Yt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=So(r),n=n===null?null:n.stateNode,n},Yt.flushSync=function(n){return ei(n)},Yt.hydrate=function(n,r,a){if(!Ca(r))throw Error(t(200));return Aa(null,n,r,!0,a)},Yt.hydrateRoot=function(n,r,a){if(!Uu(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",v=bf;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),r=Sf(r,null,n,1,a??null,f,!1,g,v),n[Qn]=r.current,Ps(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,f]:r.mutableSourceEagerHydrationData.push(a,f);return new ba(r)},Yt.render=function(n,r,a){if(!Ca(r))throw Error(t(200));return Aa(null,n,r,!1,a)},Yt.unmountComponentAtNode=function(n){if(!Ca(n))throw Error(t(40));return n._reactRootContainer?(ei(function(){Aa(null,null,n,!1,function(){n._reactRootContainer=null,n[Qn]=null})}),!0):!1},Yt.unstable_batchedUpdates=Fu,Yt.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!Ca(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Aa(n,r,a,!1,c)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var Ff;function bg(){if(Ff)return Hu.exports;Ff=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hu.exports=kg(),Hu.exports}var Lf;function Cg(){if(Lf)return Ta;Lf=1;var i=bg();return Ta.createRoot=i.createRoot,Ta.hydrateRoot=i.hydrateRoot,Ta}var Ag=Cg();const Pg=Hc(Ag);var Pe=Vc();const Tg="modulepreload",Eg=function(i){return"/"+i},zf={},Ka=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let u=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=u(t.map(m=>{if(m=Eg(m),m in zf)return;zf[m]=!0;const p=m.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":Tg,p||(x.as="script"),x.crossOrigin="",x.href=m,d&&x.setAttribute("nonce",d),document.head.appendChild(x),p)return new Promise((_,S)=>{x.addEventListener("load",_),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return o.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})};var xe=(i=>(i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i.ShapeBuilder="shape-builder",i.Batcher="batcher",i))(xe||{});const bc=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},Ea=(i,e)=>bc(i).priority??e,Mt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(bc).forEach(e=>{e.type.forEach(t=>{var s,o;return(o=(s=this._removeHandlers)[t])==null?void 0:o.call(s,e)})}),this},add(...i){return i.map(bc).forEach(e=>{e.type.forEach(t=>{var l,u;const s=this._addHandlers,o=this._queue;s[t]?(u=s[t])==null||u.call(s,e):(o[t]=o[t]||[],(l=o[t])==null||l.push(e))})}),this},handle(i,e,t){var u;const s=this._addHandlers,o=this._removeHandlers;if(s[i]||o[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=e,o[i]=t;const l=this._queue;return l[i]&&((u=l[i])==null||u.forEach(h=>e(h)),delete l[i]),this},handleByMap(i,e){return this.handle(i,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(i,e,t=-1){return this.handle(i,s=>{e.findIndex(l=>l.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((l,u)=>Ea(u.value,t)-Ea(l.value,t)))},s=>{const o=e.findIndex(l=>l.name===s.name);o!==-1&&e.splice(o,1)})},handleByList(i,e,t=-1){return this.handle(i,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((o,l)=>Ea(l,t)-Ea(o,t)))},s=>{const o=e.indexOf(s.ref);o!==-1&&e.splice(o,1)})},mixin(i,...e){for(const t of e)Object.defineProperties(i.prototype,Object.getOwnPropertyDescriptors(t))}},Mg={extension:{type:xe.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Ka(()=>import("./browserAll-C1DhD64G.js"),__vite__mapDeps([0,1,2]))}},Rg={extension:{type:xe.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Ka(()=>import("./webworkerAll-BXZLQuQu.js"),__vite__mapDeps([1,2]))}};class Et{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new Et(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Xu={exports:{}},Bf;function Ig(){return Bf||(Bf=1,(function(i){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function o(d,m,p){this.fn=d,this.context=m,this.once=p||!1}function l(d,m,p,y,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var _=new o(p,y||d,x),S=t?t+m:m;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],_]:d._events[S].push(_):(d._events[S]=_,d._eventsCount++),d}function u(d,m){--d._eventsCount===0?d._events=new s:delete d._events[m]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],p,y;if(this._eventsCount===0)return m;for(y in p=this._events)e.call(p,y)&&m.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(p)):m},h.prototype.listeners=function(m){var p=t?t+m:m,y=this._events[p];if(!y)return[];if(y.fn)return[y.fn];for(var x=0,_=y.length,S=new Array(_);x<_;x++)S[x]=y[x].fn;return S},h.prototype.listenerCount=function(m){var p=t?t+m:m,y=this._events[p];return y?y.fn?1:y.length:0},h.prototype.emit=function(m,p,y,x,_,S){var b=t?t+m:m;if(!this._events[b])return!1;var w=this._events[b],A=arguments.length,T,E;if(w.fn){switch(w.once&&this.removeListener(m,w.fn,void 0,!0),A){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,y),!0;case 4:return w.fn.call(w.context,p,y,x),!0;case 5:return w.fn.call(w.context,p,y,x,_),!0;case 6:return w.fn.call(w.context,p,y,x,_,S),!0}for(E=1,T=new Array(A-1);E<A;E++)T[E-1]=arguments[E];w.fn.apply(w.context,T)}else{var R=w.length,X;for(E=0;E<R;E++)switch(w[E].once&&this.removeListener(m,w[E].fn,void 0,!0),A){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,p);break;case 3:w[E].fn.call(w[E].context,p,y);break;case 4:w[E].fn.call(w[E].context,p,y,x);break;default:if(!T)for(X=1,T=new Array(A-1);X<A;X++)T[X-1]=arguments[X];w[E].fn.apply(w[E].context,T)}}return!0},h.prototype.on=function(m,p,y){return l(this,m,p,y,!1)},h.prototype.once=function(m,p,y){return l(this,m,p,y,!0)},h.prototype.removeListener=function(m,p,y,x){var _=t?t+m:m;if(!this._events[_])return this;if(!p)return u(this,_),this;var S=this._events[_];if(S.fn)S.fn===p&&(!x||S.once)&&(!y||S.context===y)&&u(this,_);else{for(var b=0,w=[],A=S.length;b<A;b++)(S[b].fn!==p||x&&!S[b].once||y&&S[b].context!==y)&&w.push(S[b]);w.length?this._events[_]=w.length===1?w[0]:w:u(this,_)}return this},h.prototype.removeAllListeners=function(m){var p;return m?(p=t?t+m:m,this._events[p]&&u(this,p)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,i.exports=h})(Xu)),Xu.exports}var Fg=Ig();const Fn=Hc(Fg),Lg=Math.PI*2,zg=180/Math.PI,Bg=Math.PI/180;class Bt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Bt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return qu.x=0,qu.y=0,qu}}const qu=new Bt;class Be{constructor(e=1,t=0,s=0,o=1,l=0,u=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,o,l,u){return this.a=e,this.b=t,this.c=s,this.d=o,this.tx=l,this.ty=u,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new Bt;const s=e.x,o=e.y;return t.x=this.a*s+this.c*o+this.tx,t.y=this.b*s+this.d*o+this.ty,t}applyInverse(e,t){t=t||new Bt;const s=this.a,o=this.b,l=this.c,u=this.d,h=this.tx,d=this.ty,m=1/(s*u+l*-o),p=e.x,y=e.y;return t.x=u*m*p+-l*m*y+(d*l-h*u)*m,t.y=s*m*y+-o*m*p+(-d*s+h*o)*m,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),o=this.a,l=this.c,u=this.tx;return this.a=o*t-this.b*s,this.b=o*s+this.b*t,this.c=l*t-this.d*s,this.d=l*s+this.d*t,this.tx=u*t-this.ty*s,this.ty=u*s+this.ty*t,this}append(e){const t=this.a,s=this.b,o=this.c,l=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*s+e.b*l,this.c=e.c*t+e.d*o,this.d=e.c*s+e.d*l,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*s+e.ty*l+this.ty,this}appendFrom(e,t){const s=e.a,o=e.b,l=e.c,u=e.d,h=e.tx,d=e.ty,m=t.a,p=t.b,y=t.c,x=t.d;return this.a=s*m+o*y,this.b=s*p+o*x,this.c=l*m+u*y,this.d=l*p+u*x,this.tx=h*m+d*y+t.tx,this.ty=h*p+d*x+t.ty,this}setTransform(e,t,s,o,l,u,h,d,m){return this.a=Math.cos(h+m)*l,this.b=Math.sin(h+m)*l,this.c=-Math.sin(h-d)*u,this.d=Math.cos(h-d)*u,this.tx=e-(s*this.a+o*this.c),this.ty=t-(s*this.b+o*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,o=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,o=this.c,l=this.d,u=e.pivot,h=-Math.atan2(-o,l),d=Math.atan2(s,t),m=Math.abs(h+d);return m<1e-5||Math.abs(Lg-m)<1e-5?(e.rotation=d,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=h,e.skew.y=d),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(o*o+l*l),e.position.x=this.tx+(u.x*t+u.y*o),e.position.y=this.ty+(u.x*s+u.y*l),e}invert(){const e=this.a,t=this.b,s=this.c,o=this.d,l=this.tx,u=e*o-t*s;return this.a=o/u,this.b=-t/u,this.c=-s/u,this.d=e/u,this.tx=(s*this.ty-o*l)/u,this.ty=-(e*this.ty-t*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Be;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Dg.identity()}static get shared(){return jg.identity()}}const jg=new Be,Dg=new Be,oi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ai=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],li=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ui=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Cc=[],op=[],Ma=Math.sign;function Og(){for(let i=0;i<16;i++){const e=[];Cc.push(e);for(let t=0;t<16;t++){const s=Ma(oi[i]*oi[t]+li[i]*ai[t]),o=Ma(ai[i]*oi[t]+ui[i]*ai[t]),l=Ma(oi[i]*li[t]+li[i]*ui[t]),u=Ma(ai[i]*li[t]+ui[i]*ui[t]);for(let h=0;h<16;h++)if(oi[h]===s&&ai[h]===o&&li[h]===l&&ui[h]===u){e.push(h);break}}}for(let i=0;i<16;i++){const e=new Be;e.set(oi[i],ai[i],li[i],ui[i],0,0),op.push(e)}}Og();const He={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>oi[i],uY:i=>ai[i],vX:i=>li[i],vY:i=>ui[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>Cc[i][e],sub:(i,e)=>Cc[i][He.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?He.S:He.N:Math.abs(e)*2<=Math.abs(i)?i>0?He.E:He.W:e>0?i>0?He.SE:He.SW:i>0?He.NE:He.NW,matrixAppendRotationInv:(i,e,t=0,s=0)=>{const o=op[He.inv(e)];o.tx=t,o.ty=s,i.append(o)},transformRectCoords:(i,e,t,s)=>{const{x:o,y:l,width:u,height:h}=i,{x:d,y:m,width:p,height:y}=e;return t===He.E?(s.set(o+d,l+m,u,h),s):t===He.S?s.set(p-l-h+d,o+m,h,u):t===He.W?s.set(p-o-u+d,y-l-h+m,u,h):t===He.N?s.set(l+d,y-o-u+m,h,u):s.set(o+d,l+m,u,h)}},Ra=[new Bt,new Bt,new Bt,new Bt];class et{constructor(e=0,t=0,s=0,o=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new et(0,0,0,0)}clone(){return new et(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,o=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,d=this.y,m=s*(1-o),p=s-m,y=h-m,x=h+l+m,_=d-m,S=d+u+m,b=h+p,w=h+l-p,A=d+p,T=d+u-p;return e>=y&&e<=x&&t>=_&&t<=S&&!(e>b&&e<w&&t>A&&t<T)}intersects(e,t){if(!t){const oe=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=oe)return!1;const Q=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>Q}const s=this.left,o=this.right,l=this.top,u=this.bottom;if(o<=s||u<=l)return!1;const h=Ra[0].set(e.left,e.top),d=Ra[1].set(e.left,e.bottom),m=Ra[2].set(e.right,e.top),p=Ra[3].set(e.right,e.bottom);if(m.x<=h.x||d.y<=h.y)return!1;const y=Math.sign(t.a*t.d-t.b*t.c);if(y===0||(t.apply(h,h),t.apply(d,d),t.apply(m,m),t.apply(p,p),Math.max(h.x,d.x,m.x,p.x)<=s||Math.min(h.x,d.x,m.x,p.x)>=o||Math.max(h.y,d.y,m.y,p.y)<=l||Math.min(h.y,d.y,m.y,p.y)>=u))return!1;const x=y*(d.y-h.y),_=y*(h.x-d.x),S=x*s+_*l,b=x*o+_*l,w=x*s+_*u,A=x*o+_*u;if(Math.max(S,b,w,A)<=x*h.x+_*h.y||Math.min(S,b,w,A)>=x*p.x+_*p.y)return!1;const T=y*(h.y-m.y),E=y*(m.x-h.x),R=T*s+E*l,X=T*o+E*l,N=T*s+E*u,D=T*o+E*u;return!(Math.max(R,X,N,D)<=T*h.x+E*h.y||Math.min(R,X,N,D)>=T*p.x+E*p.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),l=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=o,this.height=Math.max(l-o,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,o=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=o-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),l=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=o,this.height=l-o,this}getBounds(e){return e||(e=new et),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,o=e.x+e.width,l=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&l>=this.y&&l<this.y+this.height}set(e,t,s,o){return this.x=e,this.y=t,this.width=s,this.height=o,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Ku={default:-1};function ht(i="default"){return Ku[i]===void 0&&(Ku[i]=-1),++Ku[i]}const jf=new Set,Ge="8.0.0",Ng="8.3.4",Ki={quiet:!1,noColor:!1},Le=(i,e,t=3)=>{if(Ki.quiet||jf.has(e))return;let s=new Error().stack;const o=`${e}
Deprecated since v${i}`,l=typeof console.groupCollapsed=="function"&&!Ki.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",o):(s=s.split(`
`).splice(t).join(`
`),l?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",o),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",o),console.warn(s))),jf.add(e)};Object.defineProperties(Le,{quiet:{get:()=>Ki.quiet,set:i=>{Ki.quiet=i},enumerable:!0,configurable:!1},noColor:{get:()=>Ki.noColor,set:i=>{Ki.noColor=i},enumerable:!0,configurable:!1}});const ap=()=>{};function es(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Df(i){return!(i&i-1)&&!!i}function lp(i){const e={};for(const t in i)i[t]!==void 0&&(e[t]=i[t]);return e}const Of=Object.create(null);function $g(i){const e=Of[i];return e===void 0&&(Of[i]=ht("resource")),e}const up=class cp extends Fn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...cp.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Le(Ge,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=$g(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};up.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let ts=up;const hp=class dp extends Fn{constructor(e={}){super(),this.options=e,this.uid=ht("textureSource"),this._resourceType="textureSource",this._resourceId=ht("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...dp.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new ts(lp(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ht("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const o=Math.round(e*s),l=Math.round(t*s);return this.width=o/s,this.height=l/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=l,this.emit("resize",this),this._resourceId=ht("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Df(this.pixelWidth)&&Df(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};hp.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Ln=hp;class Yc extends Ln{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Yc.extension=xe.TextureSource;const Nf=new Be;class Ug{constructor(e,t){this.mapCoord=new Be,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let o=0;o<e.length;o+=2){const l=e[o],u=e[o+1];t[o]=l*s.a+u*s.c+s.tx,t[o+1]=l*s.b+u*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,o=e.trim;o&&(Nf.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Nf));const l=e.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,d=this.clampOffset/l._resolution;return u[0]=(e.frame.x+h+d)/l.width,u[1]=(e.frame.y+h+d)/l.height,u[2]=(e.frame.x+e.frame.width-h+d)/l.width,u[3]=(e.frame.y+e.frame.height-h+d)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=e.frame.width===l.width&&e.frame.height===l.height&&e.rotate===0,!0}}class De extends Fn{constructor({source:e,label:t,frame:s,orig:o,trim:l,defaultAnchor:u,defaultBorders:h,rotate:d,dynamic:m}={}){if(super(),this.uid=ht("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new et,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new Ln,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:p,height:y}=this._source;this.frame.width=p,this.frame.height=y}this.orig=o||this.frame,this.trim=l,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=m||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Ug(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:o}=this._source,l=t.x/s,u=t.y/o,h=t.width/s,d=t.height/o;let m=this.rotate;if(m){const p=h/2,y=d/2,x=l+p,_=u+y;m=He.add(m,He.NW),e.x0=x+p*He.uX(m),e.y0=_+y*He.uY(m),m=He.add(m,2),e.x1=x+p*He.uX(m),e.y1=_+y*He.uY(m),m=He.add(m,2),e.x2=x+p*He.uX(m),e.y2=_+y*He.uY(m),m=He.add(m,2),e.x3=x+p*He.uX(m),e.y3=_+y*He.uY(m)}else e.x0=l,e.y0=u,e.x1=l+h,e.y1=u,e.x2=l+h,e.y2=u+d,e.x3=l,e.y3=u+d}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Le(Ge,"Texture.baseTexture is now Texture.source"),this._source}}De.EMPTY=new De({label:"EMPTY",source:new Ln({label:"EMPTY"})});De.EMPTY.destroy=ap;De.WHITE=new De({source:new Yc({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});De.WHITE.destroy=ap;function Wg(i,e,t){const{width:s,height:o}=t.orig,l=t.trim;if(l){const u=l.width,h=l.height;i.minX=l.x-e._x*s,i.maxX=i.minX+u,i.minY=l.y-e._y*o,i.maxY=i.minY+h}else i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*o,i.maxY=i.minY+o}const $f=new Be;class In{constructor(e=1/0,t=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=$f,this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new et);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=$f,this}set(e,t,s,o){this.minX=e,this.minY=t,this.maxX=s,this.maxY=o}addFrame(e,t,s,o,l){l||(l=this.matrix);const u=l.a,h=l.b,d=l.c,m=l.d,p=l.tx,y=l.ty;let x=this.minX,_=this.minY,S=this.maxX,b=this.maxY,w=u*e+d*t+p,A=h*e+m*t+y;w<x&&(x=w),A<_&&(_=A),w>S&&(S=w),A>b&&(b=A),w=u*s+d*t+p,A=h*s+m*t+y,w<x&&(x=w),A<_&&(_=A),w>S&&(S=w),A>b&&(b=A),w=u*e+d*o+p,A=h*e+m*o+y,w<x&&(x=w),A<_&&(_=A),w>S&&(S=w),A>b&&(b=A),w=u*s+d*o+p,A=h*s+m*o+y,w<x&&(x=w),A<_&&(_=A),w>S&&(S=w),A>b&&(b=A),this.minX=x,this.minY=_,this.maxX=S,this.maxY=b}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,o=this.maxX,l=this.maxY,{a:u,b:h,c:d,d:m,tx:p,ty:y}=e;let x=u*t+d*s+p,_=h*t+m*s+y;this.minX=x,this.minY=_,this.maxX=x,this.maxY=_,x=u*o+d*s+p,_=h*o+m*s+y,this.minX=x<this.minX?x:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=_>this.maxY?_:this.maxY,x=u*t+d*l+p,_=h*t+m*l+y,this.minX=x<this.minX?x:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=_>this.maxY?_:this.maxY,x=u*o+d*l+p,_=h*o+m*l+y,this.minX=x<this.minX?x:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=x>this.maxX?x:this.maxX,this.maxY=_>this.maxY?_:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,o){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new In(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,o){let l=this.minX,u=this.minY,h=this.maxX,d=this.maxY;o||(o=this.matrix);const m=o.a,p=o.b,y=o.c,x=o.d,_=o.tx,S=o.ty;for(let b=t;b<s;b+=2){const w=e[b],A=e[b+1],T=m*w+y*A+_,E=p*w+x*A+S;l=T<l?T:l,u=E<u?E:u,h=T>h?T:h,d=E>d?E:d}this.minX=l,this.minY=u,this.maxX=h,this.maxY=d}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var Gg={grad:.9,turn:360,rad:360/(2*Math.PI)},sr=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},At=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},pn=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},fp=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},Uf=function(i){return{r:pn(i.r,0,255),g:pn(i.g,0,255),b:pn(i.b,0,255),a:pn(i.a)}},Qu=function(i){return{r:At(i.r),g:At(i.g),b:At(i.b),a:At(i.a,3)}},Hg=/^#([0-9a-f]{3,8})$/i,Ia=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},pp=function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=Math.max(e,t,s),u=l-Math.min(e,t,s),h=u?l===e?(t-s)/u:l===t?2+(s-e)/u:4+(e-t)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a:o}},mp=function(i){var e=i.h,t=i.s,s=i.v,o=i.a;e=e/360*6,t/=100,s/=100;var l=Math.floor(e),u=s*(1-t),h=s*(1-(e-l)*t),d=s*(1-(1-e+l)*t),m=l%6;return{r:255*[s,h,u,u,d,s][m],g:255*[d,s,s,h,u,u][m],b:255*[u,u,d,s,s,h][m],a:o}},Wf=function(i){return{h:fp(i.h),s:pn(i.s,0,100),l:pn(i.l,0,100),a:pn(i.a)}},Gf=function(i){return{h:At(i.h),s:At(i.s),l:At(i.l),a:At(i.a,3)}},Hf=function(i){return mp((t=(e=i).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},ro=function(i){return{h:(e=pp(i)).h,s:(o=(200-(t=e.s))*(s=e.v)/100)>0&&o<200?t*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,t,s,o},Vg=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Yg=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Xg=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qg=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ac={string:[[function(i){var e=Hg.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?At(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?At(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=Xg.exec(i)||qg.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:Uf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=Vg.exec(i)||Yg.exec(i);if(!e)return null;var t,s,o=Wf({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(Gg[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Hf(o)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,s=i.b,o=i.a,l=o===void 0?1:o;return sr(e)&&sr(t)&&sr(s)?Uf({r:Number(e),g:Number(t),b:Number(s),a:Number(l)}):null},"rgb"],[function(i){var e=i.h,t=i.s,s=i.l,o=i.a,l=o===void 0?1:o;if(!sr(e)||!sr(t)||!sr(s))return null;var u=Wf({h:Number(e),s:Number(t),l:Number(s),a:Number(l)});return Hf(u)},"hsl"],[function(i){var e=i.h,t=i.s,s=i.v,o=i.a,l=o===void 0?1:o;if(!sr(e)||!sr(t)||!sr(s))return null;var u=(function(h){return{h:fp(h.h),s:pn(h.s,0,100),v:pn(h.v,0,100),a:pn(h.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(l)});return mp(u)},"hsv"]]},Vf=function(i,e){for(var t=0;t<e.length;t++){var s=e[t][0](i);if(s)return[s,e[t][1]]}return[null,void 0]},Kg=function(i){return typeof i=="string"?Vf(i.trim(),Ac.string):typeof i=="object"&&i!==null?Vf(i,Ac.object):[null,void 0]},Zu=function(i,e){var t=ro(i);return{h:t.h,s:pn(t.s+100*e,0,100),l:t.l,a:t.a}},Ju=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},Yf=function(i,e){var t=ro(i);return{h:t.h,s:t.s,l:pn(t.l+100*e,0,100),a:t.a}},Pc=(function(){function i(e){this.parsed=Kg(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return At(Ju(this.rgba),2)},i.prototype.isDark=function(){return Ju(this.rgba)<.5},i.prototype.isLight=function(){return Ju(this.rgba)>=.5},i.prototype.toHex=function(){return e=Qu(this.rgba),t=e.r,s=e.g,o=e.b,u=(l=e.a)<1?Ia(At(255*l)):"","#"+Ia(t)+Ia(s)+Ia(o)+u;var e,t,s,o,l,u},i.prototype.toRgb=function(){return Qu(this.rgba)},i.prototype.toRgbString=function(){return e=Qu(this.rgba),t=e.r,s=e.g,o=e.b,(l=e.a)<1?"rgba("+t+", "+s+", "+o+", "+l+")":"rgb("+t+", "+s+", "+o+")";var e,t,s,o,l},i.prototype.toHsl=function(){return Gf(ro(this.rgba))},i.prototype.toHslString=function(){return e=Gf(ro(this.rgba)),t=e.h,s=e.s,o=e.l,(l=e.a)<1?"hsla("+t+", "+s+"%, "+o+"%, "+l+")":"hsl("+t+", "+s+"%, "+o+"%)";var e,t,s,o,l},i.prototype.toHsv=function(){return e=pp(this.rgba),{h:At(e.h),s:At(e.s),v:At(e.v),a:At(e.a,3)};var e},i.prototype.invert=function(){return Wn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),Wn(Zu(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),Wn(Zu(this.rgba,-e))},i.prototype.grayscale=function(){return Wn(Zu(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),Wn(Yf(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),Wn(Yf(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?Wn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):At(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=ro(this.rgba);return typeof e=="number"?Wn({h:e,s:t.s,l:t.l,a:t.a}):At(t.h)},i.prototype.isEqual=function(e){return this.toHex()===Wn(e).toHex()},i})(),Wn=function(i){return i instanceof Pc?i:new Pc(i)},Xf=[],Qg=function(i){i.forEach(function(e){Xf.indexOf(e)<0&&(e(Pc,Ac),Xf.push(e))})};function Zg(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in t)s[t[o]]=o;var l={};i.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,d,m=s[this.toHex()];if(m)return m;if(u!=null&&u.closest){var p=this.toRgb(),y=1/0,x="black";if(!l.length)for(var _ in t)l[_]=new i(t[_]).toRgb();for(var S in t){var b=(h=p,d=l[S],Math.pow(h.r-d.r,2)+Math.pow(h.g-d.g,2)+Math.pow(h.b-d.b,2));b<y&&(y=b,x=S)}return x}},e.string.push([function(u){var h=u.toLowerCase(),d=h==="transparent"?"#0000":t[h];return d?new i(d).toRgb():null},"name"])}Qg([Zg]);const ns=class Js{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Js)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((l,u)=>l===t[u]);if(e!==null&&t!==null){const l=Object.keys(e),u=Object.keys(t);return l.length!==u.length?!1:l.every(h=>e[h]===t[h])}return e===t}toRgba(){const[e,t,s,o]=this._components;return{r:e,g:t,b:s,a:o}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(o*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,o,l]=this._components;return e[0]=t,e[1]=s,e[2]=o,e[3]=l,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,o]=this._components;return e[0]=t,e[1]=s,e[2]=o,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,o,l]=Js._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=o,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,l=this._int&255;return t&&(s=s*e+.5|0,o=o*e+.5|0,l=l*e+.5|0),(e*255<<24)+(s<<16)+(o<<8)+l}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,o,l;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const u=e;t=(u>>16&255)/255,s=(u>>8&255)/255,o=(u&255)/255,l=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,o,l=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,o,l=255]=e,t/=255,s/=255,o/=255,l/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const h=Js.HEX_PATTERN.exec(e);h&&(e=`#${h[2]}`)}const u=Wn(e);u.isValid()&&({r:t,g:s,b:o,a:l}=u.rgba,t/=255,s/=255,o/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=o,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((o,l)=>{e[l]=Math.min(Math.max(o,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Js||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};ns.shared=new ns;ns._temp=new ns;ns.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let xt=ns;const Jg={cullArea:null,cullable:!1,cullableChildren:!0};let ec=0;const qf=500;function Qe(...i){ec!==qf&&(ec++,ec===qf?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}const go={_registeredResources:new Set,register(i){this._registeredResources.add(i)},unregister(i){this._registeredResources.delete(i)},release(){this._registeredResources.forEach(i=>i.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(i){return this._registeredResources.has(i)},reset(){this._registeredResources.clear()}};class e2{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class t2{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new e2(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const gn=new t2;go.register(gn);const n2={get isCachedAsTexture(){var i;return!!((i=this.renderGroup)!=null&&i.isCachedAsTexture)},cacheAsTexture(i){typeof i=="boolean"&&i===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(i===!0?{}:i))},updateCacheTexture(){var i;(i=this.renderGroup)==null||i.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(i){Le("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(i)}};function r2(i,e,t){const s=i.length;let o;if(e>=s||t===0)return;t=e+t>s?s-e:t;const l=s-t;for(o=e;o<l;++o)i[o]=i[o+t];i.length=l}const i2={allowChildren:!0,removeChildren(i=0,e){var l;const t=e??this.children.length,s=t-i,o=[];if(s>0&&s<=t){for(let h=t-1;h>=i;h--){const d=this.children[h];d&&(o.push(d),d.parent=null)}r2(this.children,i,t);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(o);for(let h=0;h<o.length;++h){const d=o[h];(l=d.parentRenderLayer)==null||l.detach(d),this.emit("childRemoved",d,this,h),o[h].emit("removed",this)}return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){const e=this.getChildAt(i);return this.removeChild(e)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,e)},getChildIndex(i){const e=this.children.indexOf(i);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(i,e){this.allowChildren||Le(Ge,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${i}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(i.parent){const o=i.parent.children.indexOf(i);if(i.parent===this&&o===e)return i;o!==-1&&i.parent.children.splice(o,1)}e===t.length?t.push(i):t.splice(e,0,i),i.parent=this,i.didChange=!0,i._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,e),i.emit("added",this),i},swapChildren(i,e){if(i===e)return;const t=this.getChildIndex(i),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=i;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var i;(i=this.parent)==null||i.removeChild(this)},reparentChild(...i){return i.length===1?this.reparentChildAt(i[0],this.children.length):(i.forEach(e=>this.reparentChildAt(e,this.children.length)),i[0])},reparentChildAt(i,e){if(i.parent===this)return this.setChildIndex(i,e),i;const t=i.worldTransform.clone();i.removeFromParent(),this.addChildAt(i,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),i.setFromMatrix(t),i},replaceChild(i,e){i.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(i)),e.setFromMatrix(i.localTransform),e.updateLocalTransform(),this.removeChild(i)}},s2={collectRenderables(i,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(i,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,i):this.collectRenderablesWithEffects(i,e,t))},collectRenderablesSimple(i,e,t){const s=this.children,o=s.length;for(let l=0;l<o;l++)s[l].collectRenderables(i,e,t)},collectRenderablesWithEffects(i,e,t){const{renderPipes:s}=e;for(let o=0;o<this.effects.length;o++){const l=this.effects[o];s[l.pipe].push(l,this,i)}this.collectRenderablesSimple(i,e,t);for(let o=this.effects.length-1;o>=0;o--){const l=this.effects[o];s[l.pipe].pop(l,this,i)}}};class Kf{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class o2{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return gn.get(s.maskClass,e)}return e}returnMaskEffect(e){gn.return(e)}}const Tc=new o2;Mt.handleByList(xe.MaskEffect,Tc._effectClasses);const a2={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)},addEffect(i){this.effects.indexOf(i)===-1&&(this.effects.push(i),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(i){const e=this.effects.indexOf(i);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(i){const e=this._maskEffect;(e==null?void 0:e.mask)!==i&&(e&&(this.removeEffect(e),Tc.returnMaskEffect(e),this._maskEffect=null),i!=null&&(this._maskEffect=Tc.getMaskEffect(i),this.addEffect(this._maskEffect)))},get mask(){var i;return(i=this._maskEffect)==null?void 0:i.mask},setMask(i){this._maskOptions={...this._maskOptions,...i},i.mask&&(this.mask=i.mask),this._markStructureAsChanged()},set filters(i){var l;!Array.isArray(i)&&i&&(i=[i]);const e=this._filterEffect||(this._filterEffect=new Kf);i=i;const t=(i==null?void 0:i.length)>0,s=((l=e.filters)==null?void 0:l.length)>0,o=t!==s;i=Array.isArray(i)?i.slice(0):i,e.filters=Object.freeze(i),o&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=i??null))},get filters(){var i;return(i=this._filterEffect)==null?void 0:i.filters},set filterArea(i){this._filterEffect||(this._filterEffect=new Kf),this._filterEffect.filterArea=i},get filterArea(){var i;return(i=this._filterEffect)==null?void 0:i.filterArea}},l2={label:null,get name(){return Le(Ge,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){Le(Ge,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,e=!1){return this.getChildByLabel(i,e)},getChildByLabel(i,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const o=t[s];if(o.label===i||i instanceof RegExp&&i.test(o.label))return o}if(e)for(let s=0;s<t.length;s++){const l=t[s].getChildByLabel(i,!0);if(l)return l}return null},getChildrenByLabel(i,e=!1,t=[]){const s=this.children;for(let o=0;o<s.length;o++){const l=s[o];(l.label===i||i instanceof RegExp&&i.test(l.label))&&t.push(l)}if(e)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(i,!0,t);return t}},Ot=gn.getPool(Be),lr=gn.getPool(In),u2=new Be,c2={getFastGlobalBounds(i,e){e||(e=new In),e.clear(),this._getGlobalBoundsRecursive(!!i,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(i,e,t){let s=e;if(i&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=lr.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;s.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(i,s,t)}if(o){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,s.applyMatrix(u.worldTransform)),this.effects[h].addBounds(s,!0));l&&s.applyMatrix(u.worldTransform.copyTo(u2).invert()),e.addBounds(s),lr.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),lr.return(s))}};function gp(i,e,t){t.clear();let s,o;return i.parent?e?s=i.parent.worldTransform:(o=Ot.get().identity(),s=Xc(i,o)):s=Be.IDENTITY,yp(i,t,s,e),o&&Ot.return(o),t.isValid||t.set(0,0,0,0),t}function yp(i,e,t,s){var h,d;if(!i.visible||!i.measurable)return;let o;s?o=i.worldTransform:(i.updateLocalTransform(),o=Ot.get(),o.appendFrom(i.localTransform,t));const l=e,u=!!i.effects.length;if(u&&(e=lr.get().clear()),i.boundsArea)e.addRect(i.boundsArea,o);else{const m=i.bounds;m&&!m.isEmpty()&&(e.matrix=o,e.addBounds(m));for(let p=0;p<i.children.length;p++)yp(i.children[p],e,o,s)}if(u){for(let m=0;m<i.effects.length;m++)(d=(h=i.effects[m]).addBounds)==null||d.call(h,e);l.addBounds(e,Be.IDENTITY),lr.return(e)}s||Ot.return(o)}function Xc(i,e){const t=i.parent;return t&&(Xc(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function xp(i,e){if(i===16777215||!e)return e;if(e===16777215||!i)return i;const t=i>>16&255,s=i>>8&255,o=i&255,l=e>>16&255,u=e>>8&255,h=e&255,d=t*l/255|0,m=s*u/255|0,p=o*h/255|0;return(d<<16)+(m<<8)+p}const Qf=16777215;function Zf(i,e){return i===Qf?e:e===Qf?i:xp(i,e)}function Va(i){return((i&255)<<16)+(i&65280)+(i>>16&255)}const h2={getGlobalAlpha(i){if(i)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(i=new Be,e){if(e)return i.copyFrom(this.worldTransform);this.updateLocalTransform();const t=Xc(this,Ot.get().identity());return i.appendFrom(this.localTransform,t),Ot.return(t),i},getGlobalTint(i){if(i)return this.renderGroup?Va(this.renderGroup.worldColor):this.parentRenderGroup?Va(Zf(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Zf(e,t.localColor),t=t.parent;return Va(e)}};function vp(i,e,t){return e.clear(),t||(t=Be.IDENTITY),_p(i,e,t,i,!0),e.isValid||e.set(0,0,0,0),e}function _p(i,e,t,s,o){var d,m;let l;if(o)l=Ot.get(),l=t.copyTo(l);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const p=i.localTransform;l=Ot.get(),l.appendFrom(p,t)}const u=e,h=!!i.effects.length;if(h&&(e=lr.get().clear()),i.boundsArea)e.addRect(i.boundsArea,l);else{i.renderPipeId&&(e.matrix=l,e.addBounds(i.bounds));const p=i.children;for(let y=0;y<p.length;y++)_p(p[y],e,l,s,!1)}if(h){for(let p=0;p<i.effects.length;p++)(m=(d=i.effects[p]).addLocalBounds)==null||m.call(d,e,s);u.addBounds(e,Be.IDENTITY),lr.return(e)}Ot.return(l)}function wp(i,e){const t=i.children;for(let s=0;s<t.length;s++){const o=t[s],l=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,h=e.index;(e.data[h]!==l||e.data[h+1]!==u)&&(e.data[e.index]=l,e.data[e.index+1]=u,e.didChange=!0),e.index=h+2,o.children.length&&wp(o,e)}return e.didChange}const d2=new Be,f2={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(i,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=i/e*t:this.scale.x=t},_setHeight(i,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=i/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new In});const i=this._localBoundsCacheData;return i.index=1,i.didChange=!1,i.data[0]!==this._didViewChangeTick&&(i.didChange=!0,i.data[0]=this._didViewChangeTick),wp(this,i),i.didChange&&vp(this,i.localBounds,d2),i.localBounds},getBounds(i,e){return gp(this,i,e||new In)}},p2={_onRender:null,set onRender(i){const e=this.renderGroup||this.parentRenderGroup;if(!i){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}},m2={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(g2))}};function g2(i,e){return i._zIndex-e._zIndex}const y2={getGlobalPosition(i=new Bt,e=!1){return this.parent?this.parent.toGlobal(this._position,i,e):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,e,t=!1){const s=this.getGlobalTransform(Ot.get(),t);return e=s.apply(i,e),Ot.return(s),e},toLocal(i,e,t,s){e&&(i=e.toGlobal(i,t,s));const o=this.getGlobalTransform(Ot.get(),s);return t=o.applyInverse(i,t),Ot.return(o),t}};class Sp{constructor(){this.uid=ht("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let x2=0;class v2{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new ts(this.textureOptions)}createTexture(e,t,s){const o=new Ln({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new De({source:o,label:`texturePool_${x2++}`})}getOptimalTexture(e,t,s=1,o){let l=Math.ceil(e*s-1e-6),u=Math.ceil(t*s-1e-6);l=es(l),u=es(u);const h=(l<<17)+(u<<1)+(o?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let d=this._texturePool[h].pop();return d||(d=this.createTexture(l,u,o)),d.source._resolution=s,d.source.width=l/s,d.source.height=u/s,d.source.pixelWidth=l,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=e,d.frame.height=t,d.updateUvs(),this._poolKeyHash[d.uid]=h,d}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const kp=new v2;go.register(kp);class _2{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Be,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Sp,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const o=t[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(kp.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Be),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Be),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Be),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function w2(i,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(i[s]=e[s])}const tc=new Et(null),Fa=new Et(null),nc=new Et(null,1,1),La=new Et(null),Jf=1,S2=2,rc=4;class mn extends Fn{constructor(e={}){var t,s;super(),this.uid=ht("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Be,this.relativeGroupTransform=new Be,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Et(this,0,0),this._scale=nc,this._pivot=Fa,this._origin=La,this._skew=tc,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],w2(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(o=>this.addChild(o)),(s=e.parent)==null||s.addChild(this)}static mixin(e){Le("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Mt.mixin(mn,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Le(Ge,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let o=0;o<e.length;o++)this.addChild(e[o]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let o=0;o<e.length;o++)this.removeChild(e[o]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=gn.get(_2,this),this.groupTransform=Be.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),gn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Be),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*zg}set angle(e){this.rotation=e*Bg}get pivot(){return this._pivot===Fa&&(this._pivot=new Et(this,0,0)),this._pivot}set pivot(e){this._pivot===Fa&&(this._pivot=new Et(this,0,0),this._origin!==La&&Qe("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===tc&&(this._skew=new Et(this,0,0)),this._skew}set skew(e){this._skew===tc&&(this._skew=new Et(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===nc&&(this._scale=new Et(this,1,1)),this._scale}set scale(e){this._scale===nc&&(this._scale=new Et(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===La&&(this._origin=new Et(this,0,0)),this._origin}set origin(e){this._origin===La&&(this._origin=new Et(this,0,0),this._pivot!==Fa&&Qe("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,o=this._pivot,l=this._origin,u=this._position,h=s._x,d=s._y,m=o._x,p=o._y,y=-l._x,x=-l._y;t.a=this._cx*h,t.b=this._sx*h,t.c=this._cy*d,t.d=this._sy*d,t.tx=u._x-(m*t.a+p*t.c)+(y*t.a+x*t.c)-y,t.ty=u._y-(m*t.b+p*t.d)+(y*t.b+x*t.d)-x}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Jf,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=xt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=Jf,this._onUpdate())}get tint(){return Va(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=S2,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=rc,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=rc,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=rc,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var o;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let l=0;l<t.length;++l)t[l].destroy(e);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}Mt.mixin(mn,i2,c2,y2,p2,f2,a2,l2,m2,Jg,n2,h2,s2);class qc extends mn{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new In(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:o}=e;return s>=t.minX&&s<=t.maxX&&o>=t.minY&&o<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var t,s;super.destroy(e),this._bounds=null;for(const o in this._gpuData)(s=(t=this._gpuData[o]).destroy)==null||s.call(t);this._gpuData=null}collectRenderablesSimple(e,t,s){const{renderPipes:o}=t;o.blendMode.pushBlendMode(this,this.groupBlendMode,e),o[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const u=this.children,h=u.length;for(let d=0;d<h;d++)u[d].collectRenderables(e,t,s);o.blendMode.popBlendMode(e)}}class zr extends qc{constructor(e=De.EMPTY){e instanceof De&&(e={texture:e});const{texture:t=De.EMPTY,anchor:s,roundPixels:o,width:l,height:u,...h}=e;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Et({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=o??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(e,t=!1){return e instanceof De?new zr(e):new zr(De.from(e,t))}set texture(e){e||(e=De.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Wg(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Le("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:o,height:l}=t.orig;s.minX=-e._x*o,s.maxX=s.minX+o,s.minY=-e._y*l,s.maxY=s.minY+l}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const k2=new In;function bp(i,e,t){const s=k2;i.measurable=!0,gp(i,t,s),e.addBoundsMask(s),i.measurable=!1}function Cp(i,e,t){const s=lr.get();i.measurable=!0;const o=Ot.get().identity(),l=Ap(i,t,o);vp(i,s,l),i.measurable=!1,e.addBoundsMask(s),Ot.return(o),lr.return(s)}function Ap(i,e,t){return i?(i!==e&&(Ap(i.parent,e,t),i.updateLocalTransform(),t.append(i.localTransform)),t):(Qe("Mask bounds, renderable is not inside the root container"),t)}class Pp{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof zr),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||bp(this.mask,e,t)}addLocalBounds(e,t){Cp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof zr}}Pp.extension=xe.MaskEffect;class Tp{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}Tp.extension=xe.MaskEffect;class Ep{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){bp(this.mask,e,t)}addLocalBounds(e,t){Cp(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof mn}}Ep.extension=xe.MaskEffect;const b2={createCanvas:(i,e)=>{const t=document.createElement("canvas");return t.width=i,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,e)=>fetch(i,e),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};let e1=b2;const Ye={get(){return e1},set(i){e1=i}};class Mp extends Ln{constructor(e){e.resource||(e.resource=Ye.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const o=super.resize(e,t,s);return o&&this.resizeCanvas(),o}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Mp.extension=xe.TextureSource;class di extends Ln{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}di.extension=xe.TextureSource;var Ec=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(Ec||{});class ic{constructor(e,t=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=o}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Rp=class rn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ic(null,null,1/0),this.deltaMS=1/rn.targetFPMS,this.elapsedMS=1/rn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Ec.NORMAL){return this._addListener(new ic(e,t,s))}addOnce(e,t,s=Ec.NORMAL){return this._addListener(new ic(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const l=e-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=e-l%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*rn.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,rn.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!rn._shared){const e=rn._shared=new rn;e.autoStart=!0,e._protected=!0}return rn._shared}static get system(){if(!rn._system){const e=rn._system=new rn;e.autoStart=!0,e._protected=!0}return rn._system}};Rp.targetFPMS=.06;let za=Rp,sc;async function Ip(){return sc??(sc=(async()=>{var u;const e=Ye.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(h=>{const d=document.createElement("video");d.onloadeddata=()=>h(d),d.onerror=()=>h(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),e.deleteFramebuffer(o),e.deleteTexture(s),(u=e.getExtension("WEBGL_lose_context"))==null||u.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),sc}const nl=class Fp extends Ln{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...Fp.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=za.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Ip(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(za.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(za.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(za.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};nl.extension=xe.TextureSource;nl.defaultOptions={...Ln.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};nl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let io=nl;const Rn=(i,e,t=!1)=>(Array.isArray(i)||(i=[i]),e?i.map(s=>typeof s=="string"||t?e(s):s):i);class C2{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Qe(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=Rn(e);let o;for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];if(m.test(t)){o=m.getCacheableAssets(s,t);break}}const l=new Map(Object.entries(o||{}));o||s.forEach(d=>{l.set(d,t)});const u=[...l.keys()],h={cacheKeys:u,keys:s};s.forEach(d=>{this._cacheMap.set(d,h)}),u.forEach(d=>{const m=o?o[d]:t;this._cache.has(d)&&this._cache.get(d)!==m&&Qe("[Cache] already has key:",d),this._cache.set(d,l.get(d))})}remove(e){if(!this._cacheMap.has(e)){Qe(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(o=>{this._cache.delete(o)}),t.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const Ke=new C2,Mc=[];Mt.handleByList(xe.TextureSource,Mc);function Lp(i={}){const e=i&&i.resource,t=e?i.resource:i,s=e?i:{resource:i};for(let o=0;o<Mc.length;o++){const l=Mc[o];if(l.test(t))return new l(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function A2(i={},e=!1){const t=i&&i.resource,s=t?i.resource:i,o=t?i:{resource:i};if(!e&&Ke.has(s))return Ke.get(s);const l=new De({source:Lp(o)});return l.on("destroy",()=>{Ke.has(s)&&Ke.remove(s)}),e||Ke.set(s,l),l}function P2(i,e=!1){return typeof i=="string"?Ke.get(i):i instanceof Ln?new De({source:i}):A2(i,e)}De.from=P2;Ln.from=Lp;Mt.add(Pp,Tp,Ep,io,di,Mp,Yc);var Br=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(Br||{});function Tn(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Vs(i){return i.split("?")[0].split("#")[0]}function T2(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E2(i,e,t){return i.replace(new RegExp(T2(e),"g"),t)}function M2(i,e){let t="",s=0,o=-1,l=0,u=-1;for(let h=0;h<=i.length;++h){if(h<i.length)u=i.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(o===h-1||l===1))if(o!==h-1&&l===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const d=t.lastIndexOf("/");if(d!==t.length-1){d===-1?(t="",s=0):(t=t.slice(0,d),s=t.length-1-t.lastIndexOf("/")),o=h,l=0;continue}}else if(t.length===2||t.length===1){t="",s=0,o=h,l=0;continue}}}else t.length>0?t+=`/${i.slice(o+1,h)}`:t=i.slice(o+1,h),s=h-o-1;o=h,l=0}else u===46&&l!==-1?++l:l=-1}return t}const sn={toPosix(i){return E2(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){Tn(i),i=this.toPosix(i);const e=/^file:\/\/\//.exec(i);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(i);return t?t[0]:""},toAbsolute(i,e,t){if(Tn(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const s=Vs(this.toPosix(e??Ye.get().getBaseUrl())),o=Vs(this.toPosix(t??this.rootname(s)));return i=this.toPosix(i),i.startsWith("/")?sn.join(o,i.slice(1)):this.isAbsolute(i)?i:this.join(s,i)},normalize(i){if(Tn(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let e="";const t=i.startsWith("/");this.hasProtocol(i)&&(e=this.rootname(i),i=i.slice(e.length));const s=i.endsWith("/");return i=M2(i),i.length>0&&s&&(i+="/"),t?`/${i}`:e+i},isAbsolute(i){return Tn(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const s=i[t];if(Tn(s),s.length>0)if(e===void 0)e=s;else{const o=i[t-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(i){if(Tn(i),i.length===0)return".";i=this.toPosix(i);let e=i.charCodeAt(0);const t=e===47;let s=-1,o=!0;const l=this.getProtocol(i),u=i;i=i.slice(l.length);for(let h=i.length-1;h>=1;--h)if(e=i.charCodeAt(h),e===47){if(!o){s=h;break}}else o=!1;return s===-1?t?"/":this.isUrl(u)?l+i:l:t&&s===1?"//":l+i.slice(0,s)},rootname(i){Tn(i),i=this.toPosix(i);let e="";if(i.startsWith("/")?e="/":e=this.getProtocol(i),this.isUrl(i)){const t=i.indexOf("/",e.length);t!==-1?e=i.slice(0,t):e=i,e.endsWith("/")||(e+="/")}return e},basename(i,e){Tn(i),e&&Tn(e),i=Vs(this.toPosix(i));let t=0,s=-1,o=!0,l;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";let u=e.length-1,h=-1;for(l=i.length-1;l>=0;--l){const d=i.charCodeAt(l);if(d===47){if(!o){t=l+1;break}}else h===-1&&(o=!1,h=l+1),u>=0&&(d===e.charCodeAt(u)?--u===-1&&(s=l):(u=-1,s=h))}return t===s?s=h:s===-1&&(s=i.length),i.slice(t,s)}for(l=i.length-1;l>=0;--l)if(i.charCodeAt(l)===47){if(!o){t=l+1;break}}else s===-1&&(o=!1,s=l+1);return s===-1?"":i.slice(t,s)},extname(i){Tn(i),i=Vs(this.toPosix(i));let e=-1,t=0,s=-1,o=!0,l=0;for(let u=i.length-1;u>=0;--u){const h=i.charCodeAt(u);if(h===47){if(!o){t=u+1;break}continue}s===-1&&(o=!1,s=u+1),h===46?e===-1?e=u:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||s===-1||l===0||l===1&&e===s-1&&e===t+1?"":i.slice(e,s)},parse(i){Tn(i);const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;i=Vs(this.toPosix(i));let t=i.charCodeAt(0);const s=this.isAbsolute(i);let o;e.root=this.rootname(i),s||this.hasProtocol(i)?o=1:o=0;let l=-1,u=0,h=-1,d=!0,m=i.length-1,p=0;for(;m>=o;--m){if(t=i.charCodeAt(m),t===47){if(!d){u=m+1;break}continue}h===-1&&(d=!1,h=m+1),t===46?l===-1?l=m:p!==1&&(p=1):l!==-1&&(p=-1)}return l===-1||h===-1||p===0||p===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&s?e.base=e.name=i.slice(1,h):e.base=e.name=i.slice(u,h)):(u===0&&s?(e.name=i.slice(1,l),e.base=i.slice(1,h)):(e.name=i.slice(u,l),e.base=i.slice(u,h)),e.ext=i.slice(l,h)),e.dir=this.dirname(i),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function zp(i,e,t,s,o){const l=e[t];for(let u=0;u<l.length;u++){const h=l[u];t<e.length-1?zp(i.replace(s[t],h),e,t+1,s,o):o.push(i.replace(s[t],h))}}function R2(i){const e=/\{(.*?)\}/g,t=i.match(e),s=[];if(t){const o=[];t.forEach(l=>{const u=l.substring(1,l.length-1).split(",");o.push(u)}),zp(i,o,0,t,s)}else s.push(i);return s}const Qa=i=>!Array.isArray(i);class ss{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return Rn(t||s,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>(u==null?void 0:u.src)??u):l!=null&&l.src?l.src:l,!0)}addManifest(e){this._manifest&&Qe("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let o=t;Array.isArray(t)||(o=Object.entries(t).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),o.forEach(l=>{const u=l.src,h=l.alias;let d;if(typeof h=="string"){const m=this._createBundleAssetId(e,h);s.push(m),d=[h,m]}else{const m=h.map(p=>this._createBundleAssetId(e,p));s.push(...m),d=[...h,...m]}this.add({...l,alias:d,src:u})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=l=>{this.hasKey(l)&&Qe(`[Resolver] already has key: ${l} overwriting`)},Rn(t).forEach(l=>{const{src:u}=l;let{data:h,format:d,loadParser:m,parser:p}=l;const y=Rn(u).map(b=>typeof b=="string"?R2(b):Array.isArray(b)?b:[b]),x=this.getAlias(l);Array.isArray(x)?x.forEach(s):s(x);const _=[],S=b=>{const w=this._parsers.find(A=>A.test(b));return{...w==null?void 0:w.parse(b),src:b}};y.forEach(b=>{b.forEach(w=>{let A={};if(typeof w!="object"?A=S(w):(h=w.data??h,d=w.format??d,(w.loadParser||w.parser)&&(m=w.loadParser??m,p=w.parser??p),A={...S(w.src),...w}),!x)throw new Error(`[Resolver] alias is undefined for this asset: ${A.src}`);A=this._buildResolvedAsset(A,{aliases:x,data:h,format:d,loadParser:m,parser:p,progressSize:l.progressSize}),_.push(A)})}),x.forEach(b=>{this._assetMap[b]=_})})}resolveBundle(e){const t=Qa(e);e=Rn(e);const s={};return e.forEach(o=>{const l=this._bundles[o];if(l){const u=this.resolve(l),h={};for(const d in u){const m=u[d];h[this._extractAssetIdFromBundle(o,d)]=m}s[o]=h}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const o in t)s[o]=t[o].src;return s}return t.src}resolve(e){const t=Qa(e);e=Rn(e);const s={};return e.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let l=this._assetMap[o];const u=this._getPreferredOrder(l);u==null||u.priority.forEach(h=>{u.params[h].forEach(d=>{const m=l.filter(p=>p[h]?p[h]===d:!1);m.length&&(l=m)})}),this._resolverHash[o]=l[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],o=this._preferredOrder.find(l=>l.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:o,loadParser:l,parser:u,format:h,progressSize:d}=t;return(this._basePath||this._rootPath)&&(e.src=sn.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...o||{},...e.data},e.loadParser=l??e.loadParser,e.parser=u??e.parser,e.format=h??e.format??I2(e.src),d!==void 0&&(e.progressSize=d),e}}ss.RETINA_PREFIX=/@([0-9\.]+)x/;function I2(i){return i.split(".").pop().split("?").shift().split("#").shift()}const Rc=(i,e)=>{const t=e.split("?")[1];return t&&(i+=`?${t}`),i},Bp=class eo{constructor(e,t){this.linkedSheets=[];let s=e;(e==null?void 0:e.source)instanceof Ln&&(s={texture:e,data:t});const{texture:o,data:l,cachePrefix:u=""}=s;this.cachePrefix=u,this._texture=o instanceof De?o:null,this.textureSource=o.source,this.textures={},this.animations={},this.data=l;const h=parseFloat(l.meta.scale);h?(this.resolution=h,o.source.resolution=this.resolution):this.resolution=o.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=eo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=eo.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const o=this._frameKeys[t],l=this._frames[o],u=l.frame;if(u){let h=null,d=null;const m=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,p=new et(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);l.rotated?h=new et(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new et(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(d=new et(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new De({source:this.textureSource,frame:h,orig:p,trim:d,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:o.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const o=e[t][s];this.animations[t].push(this.textures[o])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*eo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*eo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Bp.BATCH_SIZE=1e3;let t1=Bp;const F2=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function jp(i,e,t){const s={};if(i.forEach(o=>{s[o]=e}),Object.keys(e.textures).forEach(o=>{s[`${e.cachePrefix}${o}`]=e.textures[o]}),!t){const o=sn.dirname(i[0]);e.linkedSheets.forEach((l,u)=>{const h=jp([`${o}/${e.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(s,h)})}return s}const L2={extension:xe.Asset,cache:{test:i=>i instanceof t1,getCacheableAssets:(i,e)=>jp(i,e,!1)},resolver:{extension:{type:xe.ResolveParser,name:"resolveSpritesheet"},test:i=>{const t=i.split("?")[0].split("."),s=t.pop(),o=t.pop();return s==="json"&&F2.includes(o)},parse:i=>{var t;const e=i.split(".");return{resolution:parseFloat(((t=ss.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:e[e.length-2],src:i}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:xe.LoadParser,priority:Br.Normal,name:"spritesheetLoader"},async testParse(i,e){return sn.extname(e.src).toLowerCase()===".json"&&!!i.frames},async parse(i,e,t){var y,x;const{texture:s,imageFilename:o,textureOptions:l,cachePrefix:u}=(e==null?void 0:e.data)??{};let h=sn.dirname(e.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let d;if(s instanceof De)d=s;else{const _=Rc(h+(o??i.meta.image),e.src);d=(await t.load([{src:_,data:l}]))[_]}const m=new t1({texture:d.source,data:i,cachePrefix:u});await m.parse();const p=(y=i==null?void 0:i.meta)==null?void 0:y.related_multi_packs;if(Array.isArray(p)){const _=[];for(const b of p){if(typeof b!="string")continue;let w=h+b;(x=e.data)!=null&&x.ignoreMultiPack||(w=Rc(w,e.src),_.push(t.load({src:w,data:{textureOptions:l,ignoreMultiPack:!0}})))}const S=await Promise.all(_);m.linkedSheets=S,S.forEach(b=>{b.linkedSheets=[m].concat(m.linkedSheets.filter(w=>w!==b))})}return m},async unload(i,e,t){await t.unload(i.textureSource._sourceOrigin),i.destroy(!1)}}};Mt.add(L2);const oc=Object.create(null),n1=Object.create(null);function Kc(i,e){let t=n1[i];return t===void 0&&(oc[e]===void 0&&(oc[e]=1),n1[i]=t=oc[e]++),t}let Vi;function Dp(){return(!Vi||Vi!=null&&Vi.isContextLost())&&(Vi=Ye.get().createCanvas().getContext("webgl",{})),Vi}let Ba;function z2(){if(!Ba){Ba="mediump";const i=Dp();i&&i.getShaderPrecisionFormat&&(Ba=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?"highp":"mediump")}return Ba}function B2(i,e,t){return e?i:t?(i=i.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${i}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${i}
        `}function j2(i,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(i.substring(0,9)!=="precision"){let o=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${i}`}else if(s!=="highp"&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}function D2(i,e){return e?`#version 300 es
${i}`:i}const O2={},N2={};function $2(i,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?O2:N2;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,i.indexOf("#define SHADER_NAME")!==-1?i:`${`#define SHADER_NAME ${e}`}
${i}`}function U2(i,e){return e?i.replace("#version 300 es",""):i}const ac={stripVersion:U2,ensurePrecision:j2,addProgramDefines:B2,setProgramName:$2,insertVersion:D2},Ys=Object.create(null),Op=class Ic{constructor(e){e={...Ic.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:z2()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let o=e.fragment,l=e.vertex;Object.keys(ac).forEach(u=>{const h=s[u];o=ac[u](o,h,!0),l=ac[u](l,h,!1)}),this.fragment=o,this.vertex=l,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Kc(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Ys[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return Ys[t]||(Ys[t]=new Ic(e),Ys[t]._cacheKey=t),Ys[t]}};Op.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Np=Op;const r1={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function W2(i){return r1[i]??r1.float32}const G2={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function H2({source:i,entryPoint:e}){const t={},s=i.indexOf(`fn ${e}`);if(s!==-1){const o=i.indexOf("->",s);if(o!==-1){const l=i.substring(s,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const d=G2[h[3]]??"float32";t[h[2]]={location:parseInt(h[1],10),format:d,stride:W2(d).stride,offset:0,instance:!1,start:0}}}}return t}function lc(i){var y,x;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,m=(y=i.match(e))==null?void 0:y.map(_=>({group:parseInt(_.match(t)[1],10),binding:parseInt(_.match(s)[1],10),name:_.match(o)[2],isUniform:_.match(o)[1]==="<uniform>",type:_.match(l)[1]}));if(!m)return{groups:[],structs:[]};const p=((x=i.match(u))==null?void 0:x.map(_=>{const S=_.match(d)[1],b=_.match(h).reduce((w,A)=>{const[T,E]=A.split(":");return w[T.trim()]=E.trim(),w},{});return b?{name:S,members:b}:null}).filter(({name:_})=>m.some(S=>S.type===_)))??[];return{groups:m,structs:p}}var to=(i=>(i[i.VERTEX=1]="VERTEX",i[i.FRAGMENT=2]="FRAGMENT",i[i.COMPUTE=4]="COMPUTE",i))(to||{});function V2({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:to.VERTEX|to.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:to.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&e[s.group].push({binding:s.binding,visibility:to.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function Y2({groups:i}){const e=[];for(let t=0;t<i.length;t++){const s=i[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function X2(i,e){const t=new Set,s=new Set,o=[...i.structs,...e.structs].filter(u=>t.has(u.name)?!1:(t.add(u.name),!0)),l=[...i.groups,...e.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return s.has(h)?!1:(s.add(h),!0)});return{structs:o,groups:l}}const Xs=Object.create(null);class rl{constructor(e){var h,d;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:o,gpuLayout:l,name:u}=e;if(this.name=u,this.fragment=t,this.vertex=s,t.source===s.source){const m=lc(t.source);this.structsAndGroups=m}else{const m=lc(s.source),p=lc(t.source);this.structsAndGroups=X2(m,p)}this.layout=o??Y2(this.structsAndGroups),this.gpuLayout=l??V2(this.structsAndGroups),this.autoAssignGlobalUniforms=((h=this.layout[0])==null?void 0:h.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((d=this.layout[1])==null?void 0:d.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Kc(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=H2(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Xs[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Xs[t]||(Xs[t]=new rl(e),Xs[t]._cacheKey=t),Xs[t]}}const $p=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],q2=$p.reduce((i,e)=>(i[e]=!0,i),{});function K2(i,e){switch(i){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Up=class Wp{constructor(e,t){this._touched=0,this.uid=ht("uniform"),this._resourceType="uniformGroup",this._resourceId=ht("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...Wp.defaultOptions,...t},this.uniformStructures=e;const s={};for(const o in e){const l=e[o];if(l.name=o,l.size=l.size??1,!q2[l.type]){const u=l.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(u){const[,h,d]=u;throw new Error(`Uniform type ${l.type} is not supported. Use type: '${h}', size: ${d} instead.`)}throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${$p.join(", ")}`)}l.value??(l.value=K2(l.type,l.size)),s[o]=l.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Kc(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};Up.defaultOptions={ubo:!1,isStatic:!1};let Gp=Up;class Ya{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const o=e[s];this.setResource(o,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){var o,l;const s=this.resources[t];e!==s&&(s&&((o=e.off)==null||o.call(e,"change",this.onResourceChange,this)),(l=e.on)==null||l.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const s in t)t[s]._touched=e}destroy(){var t;const e=this.resources;for(const s in e){const o=e[s];(t=o==null?void 0:o.off)==null||t.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var Fc=(i=>(i[i.WEBGL=1]="WEBGL",i[i.WEBGPU=2]="WEBGPU",i[i.BOTH=3]="BOTH",i))(Fc||{});class Qc extends Fn{constructor(e){super(),this.uid=ht("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:o,resources:l,compatibleRenderers:u,groupMap:h}=e;this.gpuProgram=t,this.glProgram=s,u===void 0&&(u=0,t&&(u|=Fc.WEBGPU),s&&(u|=Fc.WEBGL)),this.compatibleRenderers=u;const d={};if(!l&&!o&&(l={}),l&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&o&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&o&&h)for(const m in h)for(const p in h[m]){const y=h[m][p];d[y]={group:m,binding:p,name:y}}else if(t&&o&&!h){const m=t.structsAndGroups.groups;h={},m.forEach(p=>{h[p.group]=h[p.group]||{},h[p.group][p.binding]=p.name,d[p.name]=p})}else if(l){o={},h={},t&&t.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,d[y.name]=y});let m=0;for(const p in l)d[p]||(o[99]||(o[99]=new Ya,this._ownedBindGroups.push(o[99])),d[p]={group:99,binding:m,name:p},h[99]=h[99]||{},h[99][m]=p,m++);for(const p in l){const y=p;let x=l[p];!x.source&&!x._resourceType&&(x=new Gp(x));const _=d[y];_&&(o[_.group]||(o[_.group]=new Ya,this._ownedBindGroups.push(o[_.group])),o[_.group].setResource(x,_.binding))}}this.groups=o,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(o,d)}addResource(e,t,s){var o,l;(o=this._uniformBindMap)[t]||(o[t]={}),(l=this._uniformBindMap[t])[s]||(l[s]=e),this.groups[t]||(this.groups[t]=new Ya,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const o in t){const l=t[o];Object.defineProperty(s,l.name,{get(){return e[l.group].getResource(l.binding)},set(u){e[l.group].setResource(u,l.binding)}})}return s}destroy(e=!1){var t,s;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...o}=e;let l,u;return t&&(l=rl.from(t)),s&&(u=Np.from(s)),new Qc({gpuProgram:l,glProgram:u,...o})}}const Lc=[];Mt.handleByNamedList(xe.Environment,Lc);async function Q2(i){if(!i)for(let e=0;e<Lc.length;e++){const t=Lc[e];if(t.value.test()){await t.value.load();return}}}let qs;function Z2(){if(typeof qs=="boolean")return qs;try{qs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{qs=!1}return qs}function i1(i,e,t=2){const s=e&&e.length,o=s?e[0]*t:i.length;let l=Hp(i,0,o,t,!0);const u=[];if(!l||l.next===l.prev)return u;let h,d,m;if(s&&(l=ry(i,e,l,t)),i.length>80*t){h=i[0],d=i[1];let p=h,y=d;for(let x=t;x<o;x+=t){const _=i[x],S=i[x+1];_<h&&(h=_),S<d&&(d=S),_>p&&(p=_),S>y&&(y=S)}m=Math.max(p-h,y-d),m=m!==0?32767/m:0}return lo(l,u,t,h,d,m,0),u}function Hp(i,e,t,s,o){let l;if(o===py(i,e,t,s)>0)for(let u=e;u<t;u+=s)l=s1(u/s|0,i[u],i[u+1],l);else for(let u=t-s;u>=e;u-=s)l=s1(u/s|0,i[u],i[u+1],l);return l&&rs(l,l.next)&&(co(l),l=l.next),l}function fi(i,e){if(!i)return i;e||(e=i);let t=i,s;do if(s=!1,!t.steiner&&(rs(t,t.next)||lt(t.prev,t,t.next)===0)){if(co(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function lo(i,e,t,s,o,l,u){if(!i)return;!u&&l&&ly(i,s,o,l);let h=i;for(;i.prev!==i.next;){const d=i.prev,m=i.next;if(l?ey(i,s,o,l):J2(i)){e.push(d.i,i.i,m.i),co(i),i=m.next,h=m.next;continue}if(i=m,i===h){u?u===1?(i=ty(fi(i),e),lo(i,e,t,s,o,l,2)):u===2&&ny(i,e,t,s,o,l):lo(fi(i),e,t,s,o,l,1);break}}}function J2(i){const e=i.prev,t=i,s=i.next;if(lt(e,t,s)>=0)return!1;const o=e.x,l=t.x,u=s.x,h=e.y,d=t.y,m=s.y,p=Math.min(o,l,u),y=Math.min(h,d,m),x=Math.max(o,l,u),_=Math.max(h,d,m);let S=s.next;for(;S!==e;){if(S.x>=p&&S.x<=x&&S.y>=y&&S.y<=_&&no(o,h,l,d,u,m,S.x,S.y)&&lt(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function ey(i,e,t,s){const o=i.prev,l=i,u=i.next;if(lt(o,l,u)>=0)return!1;const h=o.x,d=l.x,m=u.x,p=o.y,y=l.y,x=u.y,_=Math.min(h,d,m),S=Math.min(p,y,x),b=Math.max(h,d,m),w=Math.max(p,y,x),A=zc(_,S,e,t,s),T=zc(b,w,e,t,s);let E=i.prevZ,R=i.nextZ;for(;E&&E.z>=A&&R&&R.z<=T;){if(E.x>=_&&E.x<=b&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&no(h,p,d,y,m,x,E.x,E.y)&&lt(E.prev,E,E.next)>=0||(E=E.prevZ,R.x>=_&&R.x<=b&&R.y>=S&&R.y<=w&&R!==o&&R!==u&&no(h,p,d,y,m,x,R.x,R.y)&&lt(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;E&&E.z>=A;){if(E.x>=_&&E.x<=b&&E.y>=S&&E.y<=w&&E!==o&&E!==u&&no(h,p,d,y,m,x,E.x,E.y)&&lt(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;R&&R.z<=T;){if(R.x>=_&&R.x<=b&&R.y>=S&&R.y<=w&&R!==o&&R!==u&&no(h,p,d,y,m,x,R.x,R.y)&&lt(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function ty(i,e){let t=i;do{const s=t.prev,o=t.next.next;!rs(s,o)&&Yp(s,t,t.next,o)&&uo(s,o)&&uo(o,s)&&(e.push(s.i,t.i,o.i),co(t),co(t.next),t=i=o),t=t.next}while(t!==i);return fi(t)}function ny(i,e,t,s,o,l){let u=i;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&hy(u,h)){let d=Xp(u,h);u=fi(u,u.next),d=fi(d,d.next),lo(u,e,t,s,o,l,0),lo(d,e,t,s,o,l,0);return}h=h.next}u=u.next}while(u!==i)}function ry(i,e,t,s){const o=[];for(let l=0,u=e.length;l<u;l++){const h=e[l]*s,d=l<u-1?e[l+1]*s:i.length,m=Hp(i,h,d,s,!1);m===m.next&&(m.steiner=!0),o.push(cy(m))}o.sort(iy);for(let l=0;l<o.length;l++)t=sy(o[l],t);return t}function iy(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const s=(i.next.y-i.y)/(i.next.x-i.x),o=(e.next.y-e.y)/(e.next.x-e.x);t=s-o}return t}function sy(i,e){const t=oy(i,e);if(!t)return e;const s=Xp(t,i);return fi(s,s.next),fi(t,t.next)}function oy(i,e){let t=e;const s=i.x,o=i.y;let l=-1/0,u;if(rs(i,t))return t;do{if(rs(i,t.next))return t.next;if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>l&&(l=y,u=t.x<t.next.x?t:t.next,y===s))return u}t=t.next}while(t!==e);if(!u)return null;const h=u,d=u.x,m=u.y;let p=1/0;t=u;do{if(s>=t.x&&t.x>=d&&s!==t.x&&Vp(o<m?s:l,o,d,m,o<m?l:s,o,t.x,t.y)){const y=Math.abs(o-t.y)/(s-t.x);uo(t,i)&&(y<p||y===p&&(t.x>u.x||t.x===u.x&&ay(u,t)))&&(u=t,p=y)}t=t.next}while(t!==h);return u}function ay(i,e){return lt(i.prev,i,e.prev)<0&&lt(e.next,i,i.next)<0}function ly(i,e,t,s){let o=i;do o.z===0&&(o.z=zc(o.x,o.y,e,t,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==i);o.prevZ.nextZ=null,o.prevZ=null,uy(o)}function uy(i){let e,t=1;do{let s=i,o;i=null;let l=null;for(e=0;s;){e++;let u=s,h=0;for(let m=0;m<t&&(h++,u=u.nextZ,!!u);m++);let d=t;for(;h>0||d>0&&u;)h!==0&&(d===0||!u||s.z<=u.z)?(o=s,s=s.nextZ,h--):(o=u,u=u.nextZ,d--),l?l.nextZ=o:i=o,o.prevZ=l,l=o;s=u}l.nextZ=null,t*=2}while(e>1);return i}function zc(i,e,t,s,o){return i=(i-t)*o|0,e=(e-s)*o|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function cy(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Vp(i,e,t,s,o,l,u,h){return(o-u)*(e-h)>=(i-u)*(l-h)&&(i-u)*(s-h)>=(t-u)*(e-h)&&(t-u)*(l-h)>=(o-u)*(s-h)}function no(i,e,t,s,o,l,u,h){return!(i===u&&e===h)&&Vp(i,e,t,s,o,l,u,h)}function hy(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!dy(i,e)&&(uo(i,e)&&uo(e,i)&&fy(i,e)&&(lt(i.prev,i,e.prev)||lt(i,e.prev,e))||rs(i,e)&&lt(i.prev,i,i.next)>0&&lt(e.prev,e,e.next)>0)}function lt(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function rs(i,e){return i.x===e.x&&i.y===e.y}function Yp(i,e,t,s){const o=Da(lt(i,e,t)),l=Da(lt(i,e,s)),u=Da(lt(t,s,i)),h=Da(lt(t,s,e));return!!(o!==l&&u!==h||o===0&&ja(i,t,e)||l===0&&ja(i,s,e)||u===0&&ja(t,i,s)||h===0&&ja(t,e,s))}function ja(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Da(i){return i>0?1:i<0?-1:0}function dy(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&Yp(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function uo(i,e){return lt(i.prev,i,i.next)<0?lt(i,e,i.next)>=0&&lt(i,i.prev,e)>=0:lt(i,e,i.prev)<0||lt(i,i.next,e)<0}function fy(i,e){let t=i,s=!1;const o=(i.x+e.x)/2,l=(i.y+e.y)/2;do t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==i);return s}function Xp(i,e){const t=Bc(i.i,i.x,i.y),s=Bc(e.i,e.x,e.y),o=i.next,l=e.prev;return i.next=e,e.prev=i,t.next=o,o.prev=t,s.next=t,t.prev=s,l.next=s,s.prev=l,s}function s1(i,e,t,s){const o=Bc(i,e,t);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function co(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Bc(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function py(i,e,t,s){let o=0;for(let l=e,u=t-s;l<t;l+=s)o+=(i[u]-i[l])*(i[l+1]+i[u+1]),u=l;return o}const my=i1.default||i1;var qp=(i=>(i[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i))(qp||{});class gy{constructor(e){this.items=[],this._name=e}emit(e,t,s,o,l,u,h,d){const{name:m,items:p}=this;for(let y=0,x=p.length;y<x;y++)p[y][m](e,t,s,o,l,u,h,d);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const yy=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Kp=class Qp extends Fn{constructor(e){super(),this.uid=ht("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...yy,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await Q2(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...Qp.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof mn&&(s={container:s},t&&(Le(Ge,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:xt.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const o=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=qp.ALL);const{clear:s,clearColor:o,target:l}=e;xt.shared.setValue(o??this.background.colorRgba),t.renderTarget.clear(l,s,xt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new gy(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(e,t){const s=t.reduce((o,l)=>(o[l.name]=l.value,o),{});e.forEach(o=>{const l=o.value,u=o.name,h=s[u];this.renderPipes[u]=new l(this,h?new h:null),this.runners.destroy.add(this.renderPipes[u])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&go.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Z2())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Kp.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Zp=Kp,Oa;function xy(i){return Oa!==void 0||(Oa=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:i??Zp.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ye.get().getWebGLRenderingContext())return!1;let o=Ye.get().createCanvas().getContext("webgl",e);const l=!!((t=o==null?void 0:o.getContextAttributes())!=null&&t.stencil);if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,l}catch{return!1}})()),Oa}let Na;async function vy(i={}){return Na!==void 0||(Na=await(async()=>{const e=Ye.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(i)).requestDevice(),!0}catch{return!1}})()),Na}const o1=["webgl","webgpu","canvas"];async function _y(i){let e=[];i.preference?(e.push(i.preference),o1.forEach(l=>{l!==i.preference&&e.push(l)})):e=o1.slice();let t,s={};for(let l=0;l<e.length;l++){const u=e[l];if(u==="webgpu"&&await vy()){const{WebGPURenderer:h}=await Ka(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-B-VVkoef.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]));t=h,s={...i,...i.webgpu};break}else if(u==="webgl"&&xy(i.failIfMajorPerformanceCaveat??Zp.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await Ka(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-DCkHzk4j.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]));t=h,s={...i,...i.webgl};break}else if(u==="canvas")throw s={...i},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const o=new t;return await o.init(s),o}const Jp="8.14.3";class e0{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,Jp)}static destroy(){}}e0.extension=xe.Application;class wy{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,Jp)}destroy(){this._renderer=null}}wy.extension={type:[xe.WebGLSystem,xe.WebGPUSystem],name:"initHook",priority:-10};const t0=class jc{constructor(...e){this.stage=new mn,e[0]!==void 0&&Le(Ge,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new mn),this.renderer=await _y(e),jc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Le(Ge,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=jc._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};t0._plugins=[];let n0=t0;Mt.handleByList(xe.Application,n0._plugins);Mt.add(e0);class r0 extends Fn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Le(Ge,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Le(Ge,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Le(Ge,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Le(Ge,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Le(Ge,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(t=this.chars[s].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class Sy{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let o=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(o={...this.first},this.evict(!0));let l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=l:this.last.next=l,this.last=l}return o}set(e,t,s=!1,o=this.resetTtl){let l=this.items[e];return s||l!==void 0?(l.value=t,s===!1&&o&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(l)):(this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=l:this.last.next=l,this.last=l),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function i0(i=1e3,e=0,t=!1){if(isNaN(i)||i<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new Sy(i,e,t)}const ky=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Za(i){const e=typeof i.fontSize=="number"?`${i.fontSize}px`:i.fontSize;let t=i.fontFamily;Array.isArray(i.fontFamily)||(t=i.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let o=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!ky.includes(o)&&(o=`"${o}"`),t[s]=o}return`${i.fontStyle} ${i.fontVariant} ${i.fontWeight} ${e} ${t.join(",")}`}const uc={willReadFrequently:!0},zn=class ge{static get experimentalLetterSpacingSupported(){let e=ge._experimentalLetterSpacingSupported;if(e===void 0){const t=Ye.get().getCanvasRenderingContext2D().prototype;e=ge._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,o,l,u,h,d,m){this.text=e,this.style=t,this.width=s,this.height=o,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=d,this.fontProperties=m}static measureText(e=" ",t,s=ge._canvas,o=t.wordWrap){var T;const l=`${e}-${t.styleKey}-wordWrap-${o}`;if(ge._measurementCache.has(l))return ge._measurementCache.get(l);const u=Za(t),h=ge.measureFont(u);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);const d=ge.__context;d.font=u;const p=(o?ge._wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),y=new Array(p.length);let x=0;for(let E=0;E<p.length;E++){const R=ge._measureText(p[E],t.letterSpacing,d);y[E]=R,x=Math.max(x,R)}const _=((T=t._stroke)==null?void 0:T.width)||0;let S=x+_;t.dropShadow&&(S+=t.dropShadow.distance);const b=t.lineHeight||h.fontSize;let w=Math.max(b,h.fontSize+_)+(p.length-1)*(b+t.leading);t.dropShadow&&(w+=t.dropShadow.distance);const A=new ge(e,t,S,w,p,y,b+t.leading,x,h);return ge._measurementCache.set(l,A),A}static _measureText(e,t,s){let o=!1;ge.experimentalLetterSpacingSupported&&(ge.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const l=s.measureText(e);let u=l.width;const h=-l.actualBoundingBoxLeft;let m=l.actualBoundingBoxRight-h;if(u>0)if(o)u-=t,m-=t;else{const p=(ge.graphemeSegmenter(e).length-1)*t;u+=p,m+=p}return Math.max(u,m)}static _wordWrap(e,t,s=ge._canvas){const o=s.getContext("2d",uc);let l=0,u="",h="";const d=Object.create(null),{letterSpacing:m,whiteSpace:p}=t,y=ge._collapseSpaces(p),x=ge._collapseNewlines(p);let _=!y;const S=t.wordWrapWidth+m,b=ge._tokenize(e);for(let w=0;w<b.length;w++){let A=b[w];if(ge._isNewline(A)){if(!x){h+=ge._addLine(u),_=!y,u="",l=0;continue}A=" "}if(y){const E=ge.isBreakingSpace(A),R=ge.isBreakingSpace(u[u.length-1]);if(E&&R)continue}const T=ge._getFromCache(A,m,d,o);if(T>S)if(u!==""&&(h+=ge._addLine(u),u="",l=0),ge.canBreakWords(A,t.breakWords)){const E=ge.wordWrapSplit(A);for(let R=0;R<E.length;R++){let X=E[R],N=X,D=1;for(;E[R+D];){const ae=E[R+D];if(!ge.canBreakChars(N,ae,A,R,t.breakWords))X+=ae;else break;N=ae,D++}R+=D-1;const oe=ge._getFromCache(X,m,d,o);oe+l>S&&(h+=ge._addLine(u),_=!1,u="",l=0),u+=X,l+=oe}}else{u.length>0&&(h+=ge._addLine(u),u="",l=0);const E=w===b.length-1;h+=ge._addLine(A,!E),_=!1,u="",l=0}else T+l>S&&(_=!1,h+=ge._addLine(u),u="",l=0),(u.length>0||!ge.isBreakingSpace(A)||_)&&(u+=A,l+=T)}return h+=ge._addLine(u,!1),h}static _addLine(e,t=!0){return e=ge._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,s,o){let l=s[e];return typeof l!="number"&&(l=ge._measureText(e,t,o)+t,s[e]=l),l}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const s=e[t];if(!ge.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ge._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ge._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let s="";if(typeof e!="string")return t;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1];if(ge.isBreakingSpace(l,u)||ge._isNewline(l)){s!==""&&(t.push(s),s=""),l==="\r"&&u===`
`?(t.push(`\r
`),o++):t.push(l);continue}s+=l}return s!==""&&t.push(s),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,o,l){return!0}static wordWrapSplit(e){return ge.graphemeSegmenter(e)}static measureFont(e){if(ge._fonts[e])return ge._fonts[e];const t=ge._context;t.font=e;const s=t.measureText(ge.METRICS_STRING+ge.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return ge._fonts[e]=o,o}static clearMetrics(e=""){e?delete ge._fonts[e]:ge._fonts={}}static get _canvas(){if(!ge.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",uc);if(s!=null&&s.measureText)return ge.__canvas=t,t;e=Ye.get().createCanvas()}catch{e=Ye.get().createCanvas()}e.width=e.height=10,ge.__canvas=e}return ge.__canvas}static get _context(){return ge.__context||(ge.__context=ge._canvas.getContext("2d",uc)),ge.__context}};zn.METRICS_STRING="|q";zn.BASELINE_SYMBOL="M";zn.BASELINE_MULTIPLIER=1.4;zn.HEIGHT_MULTIPLIER=2;zn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return e=>{const t=i.segment(e),s=[];let o=0;for(const l of t)s[o++]=l.segment;return s}}return i=>[...i]})();zn.experimentalLetterSpacing=!1;zn._fonts={};zn._newlines=[10,13];zn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];zn._measurementCache=i0(1e3);let Vn=zn;const a1=[{offset:0,color:"white"},{offset:1,color:"black"}],Zc=class Dc{constructor(...e){this.uid=ht("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=by(e);t={...t.type==="radial"?Dc.defaultRadialOptions:Dc.defaultLinearOptions,...lp(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:xt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:o}=this.end,l=s-e,u=o-t;const h=l<0||u<0;if(this._wrapMode==="clamp-to-edge"){if(l<0){const w=e;e=s,s=w,l*=-1}if(u<0){const w=t;t=o,o=w,u*=-1}}const d=this.colorStops.length?this.colorStops:a1,m=this._textureSize,{canvas:p,context:y}=u1(m,1),x=h?y.createLinearGradient(this._textureSize,0,0,0):y.createLinearGradient(0,0,this._textureSize,0);l1(x,d),y.fillStyle=x,y.fillRect(0,0,m,1),this.texture=new De({source:new di({resource:p,addressMode:this._wrapMode})});const _=Math.sqrt(l*l+u*u),S=Math.atan2(u,l),b=new Be;b.scale(_/m,1),b.rotate(S),b.translate(e,t),this.textureSpace==="local"&&b.scale(m,m),this.transform=b}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:a1,t=this._textureSize,{canvas:s,context:o}=u1(t,t),{x:l,y:u}=this.center,{x:h,y:d}=this.outerCenter,m=this.innerRadius,p=this.outerRadius,y=h-p,x=d-p,_=t/(p*2),S=(l-y)*_,b=(u-x)*_,w=o.createRadialGradient(S,b,m*_,(h-y)*_,(d-x)*_,p*_);l1(w,e),o.fillStyle=e[e.length-1].color,o.fillRect(0,0,t,t),o.fillStyle=w,o.translate(S,b),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-S,-b),o.fillRect(0,0,t,t),this.texture=new De({source:new di({resource:s,addressMode:this._wrapMode})});const A=new Be;A.scale(1/_,1/_),A.translate(y,x),this.textureSpace==="local"&&A.scale(t,t),this.transform=A}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Zc.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Zc.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let cr=Zc;function l1(i,e){for(let t=0;t<e.length;t++){const s=e[t];i.addColorStop(s.offset,s.color)}}function u1(i,e){const t=Ye.get().createCanvas(i,e),s=t.getContext("2d");return{canvas:t,context:s}}function by(i){let e=i[0]??{};return(typeof e=="number"||i[1])&&(Le("8.5.2","use options object instead"),e={type:"linear",start:{x:i[0],y:i[1]},end:{x:i[2],y:i[3]},textureSpace:i[4],textureSize:i[5]??cr.defaultLinearOptions.textureSize}),e}const c1={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class il{constructor(e,t){this.uid=ht("fillPattern"),this._tick=0,this.transform=new Be,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=c1[t].addressModeU,e.source.style.addressModeV=c1[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var cc,h1;function Cy(){if(h1)return cc;h1=1,cc=t;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(l){var u=[];return l.replace(e,function(h,d,m){var p=d.toLowerCase();for(m=o(m),p=="m"&&m.length>2&&(u.push([d].concat(m.splice(0,2))),p="l",d=d=="m"?"l":"L");;){if(m.length==i[p])return m.unshift(d),u.push(m);if(m.length<i[p])throw new Error("malformed path data");u.push([d].concat(m.splice(0,i[p])))}}),u}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(l){var u=l.match(s);return u?u.map(Number):[]}return cc}var Ay=Cy();const Py=Hc(Ay);function Ty(i,e){const t=Py(i),s=[];let o=null,l=0,u=0;for(let h=0;h<t.length;h++){const d=t[h],m=d[0],p=d;switch(m){case"M":l=p[1],u=p[2],e.moveTo(l,u);break;case"m":l+=p[1],u+=p[2],e.moveTo(l,u);break;case"H":l=p[1],e.lineTo(l,u);break;case"h":l+=p[1],e.lineTo(l,u);break;case"V":u=p[1],e.lineTo(l,u);break;case"v":u+=p[1],e.lineTo(l,u);break;case"L":l=p[1],u=p[2],e.lineTo(l,u);break;case"l":l+=p[1],u+=p[2],e.lineTo(l,u);break;case"C":l=p[5],u=p[6],e.bezierCurveTo(p[1],p[2],p[3],p[4],l,u);break;case"c":e.bezierCurveTo(l+p[1],u+p[2],l+p[3],u+p[4],l+p[5],u+p[6]),l+=p[5],u+=p[6];break;case"S":l=p[3],u=p[4],e.bezierCurveToShort(p[1],p[2],l,u);break;case"s":e.bezierCurveToShort(l+p[1],u+p[2],l+p[3],u+p[4]),l+=p[3],u+=p[4];break;case"Q":l=p[3],u=p[4],e.quadraticCurveTo(p[1],p[2],l,u);break;case"q":e.quadraticCurveTo(l+p[1],u+p[2],l+p[3],u+p[4]),l+=p[3],u+=p[4];break;case"T":l=p[1],u=p[2],e.quadraticCurveToShort(l,u);break;case"t":l+=p[1],u+=p[2],e.quadraticCurveToShort(l,u);break;case"A":l=p[6],u=p[7],e.arcToSvg(p[1],p[2],p[3],p[4],p[5],l,u);break;case"a":l+=p[6],u+=p[7],e.arcToSvg(p[1],p[2],p[3],p[4],p[5],l,u);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(l=o.startX,u=o.startY):(l=0,u=0)),o=null;break;default:Qe(`Unknown SVG path command: ${m}`)}m!=="Z"&&m!=="z"&&o===null&&(o={startX:l,startY:u},s.push(o))}return e}class Jc{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new Jc(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-e,l=this.y-t;return o*=o,l*=l,o+l<=s}strokeContains(e,t,s,o=.5){if(this.radius===0)return!1;const l=this.x-e,u=this.y-t,h=this.radius,d=(1-o)*s,m=Math.sqrt(l*l+u*u);return m<=h+d&&m>h-(s-d)}getBounds(e){return e||(e=new et),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class eh{constructor(e=0,t=0,s=0,o=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=o}clone(){return new eh(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,o=(t-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(e,t,s,o=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=s*(1-o),d=s-h,m=l-d,p=u-d,y=l+h,x=u+h,_=e-this.x,S=t-this.y,b=_*_/(m*m)+S*S/(p*p),w=_*_/(y*y)+S*S/(x*x);return b>1&&w<=1}getBounds(e){return e||(e=new et),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Ey(i,e,t,s,o,l){const u=i-t,h=e-s,d=o-t,m=l-s,p=u*d+h*m,y=d*d+m*m;let x=-1;y!==0&&(x=p/y);let _,S;x<0?(_=t,S=s):x>1?(_=o,S=l):(_=t+x*d,S=s+x*m);const b=i-_,w=e-S;return b*b+w*w}let My,Ry;class so{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let o=0,l=t.length;o<l;o++)s.push(t[o].x,t[o].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let o=0;o<s;o+=2){const l=t[o],u=t[o+1],h=t[(o+2)%s],d=t[(o+3)%s];e+=(h-l)*(d+u)}return e<0}containsPolygon(e){const t=this.getBounds(My),s=e.getBounds(Ry);if(!t.containsRect(s))return!1;const o=e.points;for(let l=0;l<o.length;l+=2){const u=o[l],h=o[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const e=this.points.slice(),t=new so(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const o=this.points.length/2;for(let l=0,u=o-1;l<o;u=l++){const h=this.points[l*2],d=this.points[l*2+1],m=this.points[u*2],p=this.points[u*2+1];d>t!=p>t&&e<(m-h)*((t-d)/(p-d))+h&&(s=!s)}return s}strokeContains(e,t,s,o=.5){const l=s*s,u=l*(1-o),h=l-u,{points:d}=this,m=d.length-(this.closePath?0:2);for(let p=0;p<m;p+=2){const y=d[p],x=d[p+1],_=d[(p+2)%d.length],S=d[(p+3)%d.length],b=Ey(e,t,y,x,_,S),w=Math.sign((_-y)*(t-x)-(S-x)*(e-y));if(b<=(w<0?h:u))return!0}return!1}getBounds(e){e||(e=new et);const t=this.points;let s=1/0,o=-1/0,l=1/0,u=-1/0;for(let h=0,d=t.length;h<d;h+=2){const m=t[h],p=t[h+1];s=m<s?m:s,o=m>o?m:o,l=p<l?p:l,u=p>u?p:u}return e.x=s,e.width=o-s,e.y=l,e.height=u-l,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Le("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Le("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const $a=(i,e,t,s,o,l,u)=>{const h=i-t,d=e-s,m=Math.sqrt(h*h+d*d);return m>=o-l&&m<=o+u};class th{constructor(e=0,t=0,s=0,o=0,l=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=o,this.radius=l}getBounds(e){return e||(e=new et),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new th(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let o=e-(this.x+s),l=t-(this.y+s);const u=s*s;if(o*o+l*l<=u||(o=e-(this.x+this.width-s),o*o+l*l<=u)||(l=t-(this.y+this.height-s),o*o+l*l<=u)||(o=e-(this.x+s),o*o+l*l<=u))return!0}return!1}strokeContains(e,t,s,o=.5){const{x:l,y:u,width:h,height:d,radius:m}=this,p=s*(1-o),y=s-p,x=l+m,_=u+m,S=h-m*2,b=d-m*2,w=l+h,A=u+d;return(e>=l-p&&e<=l+y||e>=w-y&&e<=w+p)&&t>=_&&t<=_+b||(t>=u-p&&t<=u+y||t>=A-y&&t<=A+p)&&e>=x&&e<=x+S?!0:e<x&&t<_&&$a(e,t,x,_,m,y,p)||e>w-m&&t<_&&$a(e,t,w-m,_,m,y,p)||e>w-m&&t>A-m&&$a(e,t,w-m,A-m,m,y,p)||e<x&&t>A-m&&$a(e,t,x,A-m,m,y,p)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const s0={};function Iy(i,e,t){let s=2166136261;for(let o=0;o<e;o++)s^=i[o].uid,s=Math.imul(s,16777619),s>>>=0;return s0[s]||Fy(i,e,s,t)}function Fy(i,e,t,s){const o={};let l=0;for(let h=0;h<s;h++){const d=h<e?i[h]:De.EMPTY.source;o[l++]=d.source,o[l++]=d.style}const u=new Ya(o);return s0[t]=u,u}class d1{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function f1(i,e){const t=i.byteLength/8|0,s=new Float64Array(i,0,t);new Float64Array(e,0,t).set(s);const l=i.byteLength-t*8;if(l>0){const u=new Uint8Array(i,t*8,l);new Uint8Array(e,t*8,l).set(u)}}const Ly={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var zy=(i=>(i[i.DISABLED=0]="DISABLED",i[i.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",i[i.MASK_ACTIVE=2]="MASK_ACTIVE",i[i.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",i[i.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",i[i.NONE=5]="NONE",i))(zy||{});function p1(i,e){return e.alphaMode==="no-premultiply-alpha"&&Ly[i]||i}const By=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function jy(i){let e="";for(let t=0;t<i;++t)t>0&&(e+=`
else `),t<i-1&&(e+=`if(test == ${t}.0){}`);return e}function Dy(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=By.replace(/%forloop%/gi,jy(i));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))i=i/2|0;else break}}finally{e.deleteShader(t)}return i}let Yi=null;function Oy(){var e;if(Yi)return Yi;const i=Dp();return Yi=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),Yi=Dy(Yi,i),(e=i.getExtension("WEBGL_lose_context"))==null||e.loseContext(),Yi}class Ny{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class $y{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new Ny,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const oo=[];let Ja=0;go.register({clear:()=>{if(oo.length>0)for(const i of oo)i&&i.destroy();oo.length=0,Ja=0}});function m1(){return Ja>0?oo[--Ja]:new $y}function g1(i){oo[Ja++]=i}let Ks=0;const o0=class a0{constructor(e){this.uid=ht("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...a0.defaultOptions,...e},e.maxTextures||(Le("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=Oy());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new d1(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)g1(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=m1(),o=s.textures;o.clear();const l=t[this.elementStart];let u=p1(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,m=this.attributeBuffer.uint32View,p=this.indexBuffer;let y=this._batchIndexSize,x=this._batchIndexStart,_="startBatch";const S=this.maxTextures;for(let b=this.elementStart;b<this.elementSize;++b){const w=t[b];t[b]=null;const T=w.texture._source,E=p1(w.blendMode,T),R=u!==E||h!==w.topology;if(T._batchTick===Ks&&!R){w._textureId=T._textureBindLocation,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,m,w._attributeStart,w._textureId),this.packQuadIndex(p,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,m,w._attributeStart,w._textureId),this.packIndex(w,p,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}T._batchTick=Ks,(o.count>=S||R)&&(this._finishBatch(s,x,y-x,o,u,h,e,_),_="renderBatch",x=y,u=E,h=w.topology,s=m1(),o=s.textures,o.clear(),++Ks),w._textureId=T._textureBindLocation=o.count,o.ids[T.uid]=o.count,o.textures[o.count++]=T,w._batch=s,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,d,m,w._attributeStart,w._textureId),this.packQuadIndex(p,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,d,m,w._attributeStart,w._textureId),this.packIndex(w,p,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,x,y-x,o,u,h,e,_),x=y,++Ks),this.elementStart=this.elementSize,this._batchIndexStart=x,this._batchIndexSize=y}_finishBatch(e,t,s,o,l,u,h,d){e.gpuBindGroup=null,e.bindGroup=null,e.action=d,e.batcher=this,e.textures=o,e.blendMode=l,e.topology=u,e.start=t,e.size=s,++Ks,this.batches[this.batchIndex++]=e,h.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new d1(t);f1(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let l=0;l<t.length;l++)o[l]=t[l];else f1(t.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,o){const l=e.indices,u=e.indexSize,h=e.indexOffset,d=e.attributeOffset;for(let m=0;m<u;m++)t[s++]=o+l[m+h]-d}destroy(e={}){var t;if(this.batches!==null){for(let s=0;s<this.batches.length;s++)g1(this.batches[s]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((t=this.shader)==null||t.destroy(),this.shader=null);for(let s=0;s<this._elements.length;s++)this._elements[s]&&(this._elements[s]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};o0.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Uy=o0;var Xt=(i=>(i[i.MAP_READ=1]="MAP_READ",i[i.MAP_WRITE=2]="MAP_WRITE",i[i.COPY_SRC=4]="COPY_SRC",i[i.COPY_DST=8]="COPY_DST",i[i.INDEX=16]="INDEX",i[i.VERTEX=32]="VERTEX",i[i.UNIFORM=64]="UNIFORM",i[i.STORAGE=128]="STORAGE",i[i.INDIRECT=256]="INDIRECT",i[i.QUERY_RESOLVE=512]="QUERY_RESOLVE",i[i.STATIC=1024]="STATIC",i))(Xt||{});class ho extends Fn{constructor(e){let{data:t,size:s}=e;const{usage:o,label:l,shrinkToFit:u}=e;super(),this.uid=ht("buffer"),this._resourceType="buffer",this._resourceId=ht("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t==null?void 0:t.byteLength);const h=!!t;this.descriptor={size:s,usage:o,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Xt.STATIC)}set static(e){e?this.descriptor.usage|=Xt.STATIC:this.descriptor.usage&=~Xt.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const o=this._data;if(this._data=e,this._dataInt32=null,!o||o.length!==e.length){!this.shrinkToFit&&o&&e.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=ht("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function l0(i,e){if(!(i instanceof ho)){let t=e?Xt.INDEX:Xt.VERTEX;i instanceof Array&&(e?(i=new Uint32Array(i),t=Xt.INDEX|Xt.COPY_DST):(i=new Float32Array(i),t=Xt.VERTEX|Xt.COPY_DST)),i=new ho({data:i,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return i}function Wy(i,e,t){const s=i.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const o=s.buffer.data;let l=1/0,u=1/0,h=-1/0,d=-1/0;const m=o.BYTES_PER_ELEMENT,p=(s.offset||0)/m,y=(s.stride||8)/m;for(let x=p;x<o.length;x+=y){const _=o[x],S=o[x+1];_>h&&(h=_),S>d&&(d=S),_<l&&(l=_),S<u&&(u=S)}return t.minX=l,t.minY=u,t.maxX=h,t.maxY=d,t}function Gy(i){return(i instanceof ho||Array.isArray(i)||i.BYTES_PER_ELEMENT)&&(i={buffer:i}),i.buffer=l0(i.buffer,!1),i}class Hy extends Fn{constructor(e={}){super(),this.uid=ht("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new In,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:o}=e;if(this.buffers=[],this.attributes={},t)for(const l in t)this.addAttribute(l,t[l]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=Gy(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=l0(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,Wy(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(s=>s.destroy()),(t=this.indexBuffer)==null||t.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Vy=new Float32Array(1),Yy=new Uint32Array(1);class Xy extends Hy{constructor(){const t=new ho({data:Vy,label:"attribute-batch-buffer",usage:Xt.VERTEX|Xt.COPY_DST,shrinkToFit:!1}),s=new ho({data:Yy,label:"index-batch-buffer",usage:Xt.INDEX|Xt.COPY_DST,shrinkToFit:!1}),o=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:o,offset:0},aUV:{buffer:t,format:"float32x2",stride:o,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:o,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:o,offset:20}},indexBuffer:s})}}function y1(i,e,t){if(i)for(const s in i){const o=s.toLocaleLowerCase(),l=e[o];if(l){let u=i[s];s==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&l.push(`//----${t}----//`),l.push(u)}else Qe(`${s} placement hook does not exist in shader`)}}const qy=/\{\{(.*?)\}\}/g;function x1(i){var s;const e={};return(((s=i.match(qy))==null?void 0:s.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{e[o]=[]}),e}function v1(i,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function _1(i,e,t=!1){const s=[];v1(e,s),i.forEach(h=>{h.header&&v1(h.header,s)});const o=s;t&&o.sort();const l=o.map((h,d)=>`       @location(${d}) ${h},`).join(`
`);let u=e.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function w1(i,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(i))!==null;)e.push(t[1])}function Ky(i){const t=/\b(\w+)\s*:/g.exec(i);return t?t[1]:""}function Qy(i){const e=/@.*?\s+/g;return i.replace(e,"")}function Zy(i,e){const t=[];w1(e,t),i.forEach(d=>{d.header&&w1(d.header,t)});let s=0;const o=t.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${s++}) ${d}`).join(`,
`),l=t.sort().map(d=>`       var ${Qy(d)};`).join(`
`),u=`return VSOutput(
            ${t.sort().map(d=>` ${Ky(d)}`).join(`,
`)});`;let h=e.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${o}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function S1(i,e){let t=i;for(const s in e){const o=e[s];o.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const Lr=Object.create(null),hc=new Map;let Jy=0;function e3({template:i,bits:e}){const t=u0(i,e);if(Lr[t])return Lr[t];const{vertex:s,fragment:o}=n3(i,e);return Lr[t]=c0(s,o,e),Lr[t]}function t3({template:i,bits:e}){const t=u0(i,e);return Lr[t]||(Lr[t]=c0(i.vertex,i.fragment,e)),Lr[t]}function n3(i,e){const t=e.map(u=>u.vertex).filter(u=>!!u),s=e.map(u=>u.fragment).filter(u=>!!u);let o=_1(t,i.vertex,!0);o=Zy(t,o);const l=_1(s,i.fragment,!0);return{vertex:o,fragment:l}}function u0(i,e){return e.map(t=>(hc.has(t)||hc.set(t,Jy++),hc.get(t))).sort((t,s)=>t-s).join("-")+i.vertex+i.fragment}function c0(i,e,t){const s=x1(i),o=x1(e);return t.forEach(l=>{y1(l.vertex,s,l.name),y1(l.fragment,o,l.name)}),{vertex:S1(i,s),fragment:S1(e,o)}}const r3=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,i3=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,s3=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,o3=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,a3={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},l3={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function u3({bits:i,name:e}){const t=e3({template:{fragment:i3,vertex:r3},bits:[a3,...i]});return rl.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function c3({bits:i,name:e}){return new Np({name:e,...t3({template:{vertex:s3,fragment:o3},bits:[l3,...i]})})}const h3={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},d3={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},dc={};function f3(i){const e=[];if(i===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<i;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function p3(i){const e=[];if(i===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<i;t++)t===i-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function m3(i){return dc[i]||(dc[i]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${f3(i)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${p3(i)}
            `}}),dc[i]}const fc={};function g3(i){const e=[];for(let t=0;t<i;t++)t>0&&e.push("else"),t<i-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function y3(i){return fc[i]||(fc[i]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${i}];

            `,main:`

                ${g3(i)}
            `}}),fc[i]}const x3={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},v3={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},k1={};function _3(i){let e=k1[i];if(e)return e;const t=new Int32Array(i);for(let s=0;s<i;s++)t[s]=s;return e=k1[i]=new Gp({uTextures:{value:t,type:"i32",size:i}},{isStatic:!0}),e}class b1 extends Qc{constructor(e){const t=c3({name:"batch",bits:[d3,y3(e),v3]}),s=u3({name:"batch",bits:[h3,m3(e),x3]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:_3(e)}}),this.maxTextures=e}}let Qs=null;const h0=class d0 extends Uy{constructor(e){super(e),this.geometry=new Xy,this.name=d0.extension.name,this.vertexSize=6,Qs??(Qs=new b1(e.maxTextures)),this.shader=Qs}packAttributes(e,t,s,o,l){const u=l<<16|e.roundPixels&65535,h=e.transform,d=h.a,m=h.b,p=h.c,y=h.d,x=h.tx,_=h.ty,{positions:S,uvs:b}=e,w=e.color,A=e.attributeOffset,T=A+e.attributeSize;for(let E=A;E<T;E++){const R=E*2,X=S[R],N=S[R+1];t[o++]=d*X+p*N+x,t[o++]=y*N+m*X+_,t[o++]=b[R],t[o++]=b[R+1],s[o++]=w,s[o++]=u}}packQuadAttributes(e,t,s,o,l){const u=e.texture,h=e.transform,d=h.a,m=h.b,p=h.c,y=h.d,x=h.tx,_=h.ty,S=e.bounds,b=S.maxX,w=S.minX,A=S.maxY,T=S.minY,E=u.uvs,R=e.color,X=l<<16|e.roundPixels&65535;t[o+0]=d*w+p*T+x,t[o+1]=y*T+m*w+_,t[o+2]=E.x0,t[o+3]=E.y0,s[o+4]=R,s[o+5]=X,t[o+6]=d*b+p*T+x,t[o+7]=y*T+m*b+_,t[o+8]=E.x1,t[o+9]=E.y1,s[o+10]=R,s[o+11]=X,t[o+12]=d*b+p*A+x,t[o+13]=y*A+m*b+_,t[o+14]=E.x2,t[o+15]=E.y2,s[o+16]=R,s[o+17]=X,t[o+18]=d*w+p*A+x,t[o+19]=y*A+m*w+_,t[o+20]=E.x3,t[o+21]=E.y3,s[o+22]=R,s[o+23]=X}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Qs=new b1(e),this.shader=Qs)}destroy(){this.shader=null,super.destroy()}};h0.extension={type:[xe.Batcher],name:"default"};let w3=h0;function S3(i,e,t,s,o,l,u,h=null){let d=0;t*=e,o*=l;const m=h.a,p=h.b,y=h.c,x=h.d,_=h.tx,S=h.ty;for(;d<u;){const b=i[t],w=i[t+1];s[o]=m*b+y*w+_,s[o+1]=p*b+x*w+S,o+=l,t+=e,d++}}function k3(i,e,t,s){let o=0;for(e*=t;o<s;)i[e]=0,i[e+1]=0,e+=t,o++}function f0(i,e,t,s,o){const l=e.a,u=e.b,h=e.c,d=e.d,m=e.tx,p=e.ty;t||(t=0),s||(s=2),o||(o=i.length/s-t);let y=t*s;for(let x=0;x<o;x++){const _=i[y],S=i[y+1];i[y]=l*_+h*S+m,i[y+1]=u*_+d*S+p,y+=s}}const b3=new Be;class p0{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?xp(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||b3}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const fo={extension:{type:xe.ShapeBuilder,name:"circle"},build(i,e){let t,s,o,l,u,h;if(i.type==="circle"){const R=i;if(u=h=R.radius,u<=0)return!1;t=R.x,s=R.y,o=l=0}else if(i.type==="ellipse"){const R=i;if(u=R.halfWidth,h=R.halfHeight,u<=0||h<=0)return!1;t=R.x,s=R.y,o=l=0}else{const R=i,X=R.width/2,N=R.height/2;t=R.x+X,s=R.y+N,u=h=Math.max(0,Math.min(R.radius,Math.min(X,N))),o=X-u,l=N-h}if(o<0||l<0)return!1;const d=Math.ceil(2.3*Math.sqrt(u+h)),m=d*8+(o?4:0)+(l?4:0);if(m===0)return!1;if(d===0)return e[0]=e[6]=t+o,e[1]=e[3]=s+l,e[2]=e[4]=t-o,e[5]=e[7]=s-l,!0;let p=0,y=d*4+(o?2:0)+2,x=y,_=m,S=o+u,b=l,w=t+S,A=t-S,T=s+b;if(e[p++]=w,e[p++]=T,e[--y]=T,e[--y]=A,l){const R=s-b;e[x++]=A,e[x++]=R,e[--_]=R,e[--_]=w}for(let R=1;R<d;R++){const X=Math.PI/2*(R/d),N=o+Math.cos(X)*u,D=l+Math.sin(X)*h,oe=t+N,ae=t-N,Q=s+D,ne=s-D;e[p++]=oe,e[p++]=Q,e[--y]=Q,e[--y]=ae,e[x++]=ae,e[x++]=ne,e[--_]=ne,e[--_]=oe}S=o,b=l+h,w=t+S,A=t-S,T=s+b;const E=s-b;return e[p++]=w,e[p++]=T,e[--_]=E,e[--_]=w,o&&(e[p++]=A,e[p++]=T,e[--_]=E,e[--_]=A),!0},triangulate(i,e,t,s,o,l){if(i.length===0)return;let u=0,h=0;for(let p=0;p<i.length;p+=2)u+=i[p],h+=i[p+1];u/=i.length/2,h/=i.length/2;let d=s;e[d*t]=u,e[d*t+1]=h;const m=d++;for(let p=0;p<i.length;p+=2)e[d*t]=i[p],e[d*t+1]=i[p+1],p>0&&(o[l++]=d,o[l++]=m,o[l++]=d-1),d++;o[l++]=m+1,o[l++]=m,o[l++]=d-1}},C3={...fo,extension:{...fo.extension,name:"ellipse"}},A3={...fo,extension:{...fo.extension,name:"roundedRectangle"}},m0=1e-4,C1=1e-4;function P3(i){const e=i.length;if(e<6)return 1;let t=0;for(let s=0,o=i[e-2],l=i[e-1];s<e;s+=2){const u=i[s],h=i[s+1];t+=(u-o)*(h+l),o=u,l=h}return t<0?-1:1}function A1(i,e,t,s,o,l,u,h){const d=i-t*o,m=e-s*o,p=i+t*l,y=e+s*l;let x,_;u?(x=s,_=-t):(x=-s,_=t);const S=d+x,b=m+_,w=p+x,A=y+_;return h.push(S,b),h.push(w,A),2}function ii(i,e,t,s,o,l,u,h){const d=t-i,m=s-e;let p=Math.atan2(d,m),y=Math.atan2(o-i,l-e);h&&p<y?p+=Math.PI*2:!h&&p>y&&(y+=Math.PI*2);let x=p;const _=y-p,S=Math.abs(_),b=Math.sqrt(d*d+m*m),w=(15*S*Math.sqrt(b)/Math.PI>>0)+1,A=_/w;if(x+=A,h){u.push(i,e),u.push(t,s);for(let T=1,E=x;T<w;T++,E+=A)u.push(i,e),u.push(i+Math.sin(E)*b,e+Math.cos(E)*b);u.push(i,e),u.push(o,l)}else{u.push(t,s),u.push(i,e);for(let T=1,E=x;T<w;T++,E+=A)u.push(i+Math.sin(E)*b,e+Math.cos(E)*b),u.push(i,e);u.push(o,l),u.push(i,e)}return w*2}function T3(i,e,t,s,o,l){const u=m0;if(i.length===0)return;const h=e;let d=h.alignment;if(e.alignment!==.5){let ee=P3(i);d=(d-.5)*ee+.5}const m=new Bt(i[0],i[1]),p=new Bt(i[i.length-2],i[i.length-1]),y=s,x=Math.abs(m.x-p.x)<u&&Math.abs(m.y-p.y)<u;if(y){i=i.slice(),x&&(i.pop(),i.pop(),p.set(i[i.length-2],i[i.length-1]));const ee=(m.x+p.x)*.5,re=(p.y+m.y)*.5;i.unshift(ee,re),i.push(ee,re)}const _=o,S=i.length/2;let b=i.length;const w=_.length/2,A=h.width/2,T=A*A,E=h.miterLimit*h.miterLimit;let R=i[0],X=i[1],N=i[2],D=i[3],oe=0,ae=0,Q=-(X-D),ne=R-N,Te=0,pe=0,Ee=Math.sqrt(Q*Q+ne*ne);Q/=Ee,ne/=Ee,Q*=A,ne*=A;const dt=d,te=(1-dt)*2,se=dt*2;y||(h.cap==="round"?b+=ii(R-Q*(te-se)*.5,X-ne*(te-se)*.5,R-Q*te,X-ne*te,R+Q*se,X+ne*se,_,!0)+2:h.cap==="square"&&(b+=A1(R,X,Q,ne,te,se,!0,_))),_.push(R-Q*te,X-ne*te),_.push(R+Q*se,X+ne*se);for(let ee=1;ee<S-1;++ee){R=i[(ee-1)*2],X=i[(ee-1)*2+1],N=i[ee*2],D=i[ee*2+1],oe=i[(ee+1)*2],ae=i[(ee+1)*2+1],Q=-(X-D),ne=R-N,Ee=Math.sqrt(Q*Q+ne*ne),Q/=Ee,ne/=Ee,Q*=A,ne*=A,Te=-(D-ae),pe=N-oe,Ee=Math.sqrt(Te*Te+pe*pe),Te/=Ee,pe/=Ee,Te*=A,pe*=A;const re=N-R,I=X-D,G=N-oe,be=ae-D,Me=re*G+I*be,Re=I*G-be*re,_e=Re<0;if(Math.abs(Re)<.001*Math.abs(Me)){_.push(N-Q*te,D-ne*te),_.push(N+Q*se,D+ne*se),Me>=0&&(h.join==="round"?b+=ii(N,D,N-Q*te,D-ne*te,N-Te*te,D-pe*te,_,!1)+4:b+=2,_.push(N-Te*se,D-pe*se),_.push(N+Te*te,D+pe*te));continue}const Oe=(-Q+R)*(-ne+D)-(-Q+N)*(-ne+X),Ie=(-Te+oe)*(-pe+D)-(-Te+N)*(-pe+ae),je=(re*Ie-G*Oe)/Re,ft=(be*Oe-I*Ie)/Re,Bn=(je-N)*(je-N)+(ft-D)*(ft-D),on=N+(je-N)*te,Rt=D+(ft-D)*te,Nt=N-(je-N)*se,qt=D-(ft-D)*se,gt=Math.min(re*re+I*I,G*G+be*be),yn=_e?te:se,vt=gt+yn*yn*T;Bn<=vt?h.join==="bevel"||Bn/T>E?(_e?(_.push(on,Rt),_.push(N+Q*se,D+ne*se),_.push(on,Rt),_.push(N+Te*se,D+pe*se)):(_.push(N-Q*te,D-ne*te),_.push(Nt,qt),_.push(N-Te*te,D-pe*te),_.push(Nt,qt)),b+=2):h.join==="round"?_e?(_.push(on,Rt),_.push(N+Q*se,D+ne*se),b+=ii(N,D,N+Q*se,D+ne*se,N+Te*se,D+pe*se,_,!0)+4,_.push(on,Rt),_.push(N+Te*se,D+pe*se)):(_.push(N-Q*te,D-ne*te),_.push(Nt,qt),b+=ii(N,D,N-Q*te,D-ne*te,N-Te*te,D-pe*te,_,!1)+4,_.push(N-Te*te,D-pe*te),_.push(Nt,qt)):(_.push(on,Rt),_.push(Nt,qt)):(_.push(N-Q*te,D-ne*te),_.push(N+Q*se,D+ne*se),h.join==="round"?_e?b+=ii(N,D,N+Q*se,D+ne*se,N+Te*se,D+pe*se,_,!0)+2:b+=ii(N,D,N-Q*te,D-ne*te,N-Te*te,D-pe*te,_,!1)+2:h.join==="miter"&&Bn/T<=E&&(_e?(_.push(Nt,qt),_.push(Nt,qt)):(_.push(on,Rt),_.push(on,Rt)),b+=2),_.push(N-Te*te,D-pe*te),_.push(N+Te*se,D+pe*se),b+=2)}R=i[(S-2)*2],X=i[(S-2)*2+1],N=i[(S-1)*2],D=i[(S-1)*2+1],Q=-(X-D),ne=R-N,Ee=Math.sqrt(Q*Q+ne*ne),Q/=Ee,ne/=Ee,Q*=A,ne*=A,_.push(N-Q*te,D-ne*te),_.push(N+Q*se,D+ne*se),y||(h.cap==="round"?b+=ii(N-Q*(te-se)*.5,D-ne*(te-se)*.5,N-Q*te,D-ne*te,N+Q*se,D+ne*se,_,!1)+2:h.cap==="square"&&(b+=A1(N,D,Q,ne,te,se,!1,_)));const J=C1*C1;for(let ee=w;ee<b+w-2;++ee)R=_[ee*2],X=_[ee*2+1],N=_[(ee+1)*2],D=_[(ee+1)*2+1],oe=_[(ee+2)*2],ae=_[(ee+2)*2+1],!(Math.abs(R*(D-ae)+N*(ae-X)+oe*(X-D))<J)&&l.push(ee,ee+1,ee+2)}function E3(i,e,t,s){const o=m0;if(i.length===0)return;const l=i[0],u=i[1],h=i[i.length-2],d=i[i.length-1],m=e||Math.abs(l-h)<o&&Math.abs(u-d)<o,p=t,y=i.length/2,x=p.length/2;for(let _=0;_<y;_++)p.push(i[_*2]),p.push(i[_*2+1]);for(let _=0;_<y-1;_++)s.push(x+_,x+_+1);m&&s.push(x+y-1,x)}function g0(i,e,t,s,o,l,u){const h=my(i,e,2);if(!h)return;for(let m=0;m<h.length;m+=3)l[u++]=h[m]+o,l[u++]=h[m+1]+o,l[u++]=h[m+2]+o;let d=o*s;for(let m=0;m<i.length;m+=2)t[d]=i[m],t[d+1]=i[m+1],d+=s}const M3=[],R3={extension:{type:xe.ShapeBuilder,name:"polygon"},build(i,e){for(let t=0;t<i.points.length;t++)e[t]=i.points[t];return!0},triangulate(i,e,t,s,o,l){g0(i,M3,e,t,s,o,l)}},I3={extension:{type:xe.ShapeBuilder,name:"rectangle"},build(i,e){const t=i,s=t.x,o=t.y,l=t.width,u=t.height;return l>0&&u>0?(e[0]=s,e[1]=o,e[2]=s+l,e[3]=o,e[4]=s+l,e[5]=o+u,e[6]=s,e[7]=o+u,!0):!1},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[6],e[s+u+1]=i[7],u+=t,e[s+u]=i[4],e[s+u+1]=i[5],u+=t;const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2,o[l++]=h+1,o[l++]=h+3,o[l++]=h+2}},F3={extension:{type:xe.ShapeBuilder,name:"triangle"},build(i,e){return e[0]=i.x,e[1]=i.y,e[2]=i.x2,e[3]=i.y2,e[4]=i.x3,e[5]=i.y3,!0},triangulate(i,e,t,s,o,l){let u=0;s*=t,e[s+u]=i[0],e[s+u+1]=i[1],u+=t,e[s+u]=i[2],e[s+u+1]=i[3],u+=t,e[s+u]=i[4],e[s+u+1]=i[5];const h=s/t;o[l++]=h,o[l++]=h+1,o[l++]=h+2}},L3=new Be,z3=new et;function B3(i,e,t,s){const o=e.matrix?i.copyFrom(e.matrix).invert():i.identity();if(e.textureSpace==="local"){const u=t.getBounds(z3);e.width&&u.pad(e.width);const{x:h,y:d}=u,m=1/u.width,p=1/u.height,y=-h*m,x=-d*p,_=o.a,S=o.b,b=o.c,w=o.d;o.a*=m,o.b*=m,o.c*=p,o.d*=p,o.tx=y*_+x*b+o.tx,o.ty=y*S+x*w+o.ty}else o.translate(e.texture.frame.x,e.texture.frame.y),o.scale(1/e.texture.source.width,1/e.texture.source.height);const l=e.texture.source.style;return!(e.fill instanceof cr)&&l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update()),s&&o.append(L3.copyFrom(s).invert()),o}const sl={};Mt.handleByMap(xe.ShapeBuilder,sl);Mt.add(I3,R3,F3,fo,C3,A3);const j3=new et,D3=new Be;function O3(i,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let o=0;o<i.instructions.length;o++){const l=i.instructions[o];if(l.action==="texture")N3(l.data,s,t);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,d=l.data.style,m=l.data.hole;u&&m&&P1(m.shapePath,d,!0,s,t),m&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=m.shapePath.shapePrimitives),P1(h,d,u,s,t)}}}function N3(i,e,t){const s=[],o=sl.rectangle,l=j3;l.x=i.dx,l.y=i.dy,l.width=i.dw,l.height=i.dh;const u=i.transform;if(!o.build(l,s))return;const{vertices:h,uvs:d,indices:m}=t,p=m.length,y=h.length/2;u&&f0(s,u),o.triangulate(s,h,2,y,m,p);const x=i.image,_=x.uvs;d.push(_.x0,_.y0,_.x1,_.y1,_.x3,_.y3,_.x2,_.y2);const S=gn.get(p0);S.indexOffset=p,S.indexSize=m.length-p,S.attributeOffset=y,S.attributeSize=h.length/2-y,S.baseColor=i.style,S.alpha=i.alpha,S.texture=x,S.geometryData=t,e.push(S)}function P1(i,e,t,s,o){const{vertices:l,uvs:u,indices:h}=o;i.shapePrimitives.forEach(({shape:d,transform:m,holes:p})=>{const y=[],x=sl[d.type];if(!x.build(d,y))return;const _=h.length,S=l.length/2;let b="triangle-list";if(m&&f0(y,m),t){const E=d.closePath??!0,R=e;R.pixelLine?(E3(y,E,l,h),b="line-list"):T3(y,R,!1,E,l,h)}else if(p){const E=[],R=y.slice();$3(p).forEach(N=>{E.push(R.length/2),R.push(...N)}),g0(R,E,l,2,S,h,_)}else x.triangulate(y,l,2,S,h,_);const w=u.length/2,A=e.texture;if(A!==De.WHITE){const E=B3(D3,e,d,m);S3(l,2,S,u,w,2,l.length/2-S,E)}else k3(u,w,2,l.length/2-S);const T=gn.get(p0);T.indexOffset=_,T.indexSize=h.length-_,T.attributeOffset=S,T.attributeSize=l.length/2-S,T.baseColor=e.color,T.alpha=e.alpha,T.texture=A,T.geometryData=o,T.topology=b,s.push(T)})}function $3(i){const e=[];for(let t=0;t<i.length;t++){const s=i[t].shape,o=[];sl[s.type].build(s,o)&&e.push(o)}return e}class U3{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class W3{constructor(){this.instructions=new Sp}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new w3({maxTextures:t}),this.instructions.reset()}get geometry(){return Le(Ng,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const nh=class Oc{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Oc.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??Oc.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),O3(e,t);const s=e.batchMode;e.customShader||s==="no-batch"?t.isBatchable=!1:s==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=gn.get(W3,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:s,geometryData:o}=this._gpuContextHash[e.uid],l=o.vertices.length,u=o.indices.length;for(let p=0;p<s.length;p++)s[p].applyTransform=!1;const h=t.batcher;h.ensureAttributeBuffer(l),h.ensureIndexBuffer(u),h.begin();for(let p=0;p<s.length;p++){const y=s[p];h.add(y)}h.finish(t.instructions);const d=h.geometry;d.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),d.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const m=h.batches;for(let p=0;p<m.length;p++){const y=m[p];y.bindGroup=Iy(y.textures.textures,y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new U3;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(gn.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(s=>{gn.return(s)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};nh.extension={type:[xe.WebGLSystem,xe.WebGPUSystem,xe.CanvasSystem],name:"graphicsContext"};nh.defaultOptions={bezierSmoothness:.5};let y0=nh;const G3=8,Ua=11920929e-14,H3=1;function x0(i,e,t,s,o,l,u,h,d,m){const y=Math.min(.99,Math.max(0,m??y0.defaultOptions.bezierSmoothness));let x=(H3-y)/1;return x*=x,V3(e,t,s,o,l,u,h,d,i,x),i}function V3(i,e,t,s,o,l,u,h,d,m){Nc(i,e,t,s,o,l,u,h,d,m,0),d.push(u,h)}function Nc(i,e,t,s,o,l,u,h,d,m,p){if(p>G3)return;const y=(i+t)/2,x=(e+s)/2,_=(t+o)/2,S=(s+l)/2,b=(o+u)/2,w=(l+h)/2,A=(y+_)/2,T=(x+S)/2,E=(_+b)/2,R=(S+w)/2,X=(A+E)/2,N=(T+R)/2;if(p>0){let D=u-i,oe=h-e;const ae=Math.abs((t-u)*oe-(s-h)*D),Q=Math.abs((o-u)*oe-(l-h)*D);if(ae>Ua&&Q>Ua){if((ae+Q)*(ae+Q)<=m*(D*D+oe*oe)){d.push(X,N);return}}else if(ae>Ua){if(ae*ae<=m*(D*D+oe*oe)){d.push(X,N);return}}else if(Q>Ua){if(Q*Q<=m*(D*D+oe*oe)){d.push(X,N);return}}else if(D=X-(i+u)/2,oe=N-(e+h)/2,D*D+oe*oe<=m){d.push(X,N);return}}Nc(i,e,y,x,A,T,X,N,d,m,p+1),Nc(X,N,E,R,b,w,u,h,d,m,p+1)}const Y3=8,X3=11920929e-14,q3=1;function K3(i,e,t,s,o,l,u,h){const m=Math.min(.99,Math.max(0,h??y0.defaultOptions.bezierSmoothness));let p=(q3-m)/1;return p*=p,Q3(e,t,s,o,l,u,i,p),i}function Q3(i,e,t,s,o,l,u,h){$c(u,i,e,t,s,o,l,h,0),u.push(o,l)}function $c(i,e,t,s,o,l,u,h,d){if(d>Y3)return;const m=(e+s)/2,p=(t+o)/2,y=(s+l)/2,x=(o+u)/2,_=(m+y)/2,S=(p+x)/2;let b=l-e,w=u-t;const A=Math.abs((s-l)*w-(o-u)*b);if(A>X3){if(A*A<=h*(b*b+w*w)){i.push(_,S);return}}else if(b=_-(e+l)/2,w=S-(t+u)/2,b*b+w*w<=h){i.push(_,S);return}$c(i,e,t,m,p,_,S,h,d+1),$c(i,_,S,y,x,l,u,h,d+1)}function v0(i,e,t,s,o,l,u,h){let d=Math.abs(o-l);(!u&&o>l||u&&l>o)&&(d=2*Math.PI-d),h||(h=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(d/Math.PI)))),h=Math.max(h,3);let m=d/h,p=o;m*=u?-1:1;for(let y=0;y<h+1;y++){const x=Math.cos(p),_=Math.sin(p),S=e+x*s,b=t+_*s;i.push(S,b),p+=m}}function Z3(i,e,t,s,o,l){const u=i[i.length-2],d=i[i.length-1]-t,m=u-e,p=o-t,y=s-e,x=Math.abs(d*y-m*p);if(x<1e-8||l===0){(i[i.length-2]!==e||i[i.length-1]!==t)&&i.push(e,t);return}const _=d*d+m*m,S=p*p+y*y,b=d*p+m*y,w=l*Math.sqrt(_)/x,A=l*Math.sqrt(S)/x,T=w*b/_,E=A*b/S,R=w*y+A*m,X=w*p+A*d,N=m*(A+T),D=d*(A+T),oe=y*(w+E),ae=p*(w+E),Q=Math.atan2(D-X,N-R),ne=Math.atan2(ae-X,oe-R);v0(i,R+e,X+t,l,Q,ne,m*p>y*d)}const ao=Math.PI*2,pc={centerX:0,centerY:0,ang1:0,ang2:0},mc=({x:i,y:e},t,s,o,l,u,h,d)=>{i*=t,e*=s;const m=o*i-l*e,p=l*i+o*e;return d.x=m+u,d.y=p+h,d};function J3(i,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,o=Math.cos(i),l=Math.sin(i),u=Math.cos(i+e),h=Math.sin(i+e);return[{x:o-l*s,y:l+o*s},{x:u+h*s,y:h-u*s},{x:u,y:h}]}const T1=(i,e,t,s)=>{const o=i*s-e*t<0?-1:1;let l=i*t+e*s;return l>1&&(l=1),l<-1&&(l=-1),o*Math.acos(l)},e8=(i,e,t,s,o,l,u,h,d,m,p,y,x)=>{const _=Math.pow(o,2),S=Math.pow(l,2),b=Math.pow(p,2),w=Math.pow(y,2);let A=_*S-_*w-S*b;A<0&&(A=0),A/=_*w+S*b,A=Math.sqrt(A)*(u===h?-1:1);const T=A*o/l*y,E=A*-l/o*p,R=m*T-d*E+(i+t)/2,X=d*T+m*E+(e+s)/2,N=(p-T)/o,D=(y-E)/l,oe=(-p-T)/o,ae=(-y-E)/l,Q=T1(1,0,N,D);let ne=T1(N,D,oe,ae);h===0&&ne>0&&(ne-=ao),h===1&&ne<0&&(ne+=ao),x.centerX=R,x.centerY=X,x.ang1=Q,x.ang2=ne};function t8(i,e,t,s,o,l,u,h=0,d=0,m=0){if(l===0||u===0)return;const p=Math.sin(h*ao/360),y=Math.cos(h*ao/360),x=y*(e-s)/2+p*(t-o)/2,_=-p*(e-s)/2+y*(t-o)/2;if(x===0&&_===0)return;l=Math.abs(l),u=Math.abs(u);const S=Math.pow(x,2)/Math.pow(l,2)+Math.pow(_,2)/Math.pow(u,2);S>1&&(l*=Math.sqrt(S),u*=Math.sqrt(S)),e8(e,t,s,o,l,u,d,m,p,y,x,_,pc);let{ang1:b,ang2:w}=pc;const{centerX:A,centerY:T}=pc;let E=Math.abs(w)/(ao/4);Math.abs(1-E)<1e-7&&(E=1);const R=Math.max(Math.ceil(E),1);w/=R;let X=i[i.length-2],N=i[i.length-1];const D={x:0,y:0};for(let oe=0;oe<R;oe++){const ae=J3(b,w),{x:Q,y:ne}=mc(ae[0],l,u,y,p,A,T,D),{x:Te,y:pe}=mc(ae[1],l,u,y,p,A,T,D),{x:Ee,y:dt}=mc(ae[2],l,u,y,p,A,T,D);x0(i,X,N,Q,ne,Te,pe,Ee,dt),X=Ee,N=dt,b+=w}}function n8(i,e,t){const s=(u,h)=>{const d=h.x-u.x,m=h.y-u.y,p=Math.sqrt(d*d+m*m),y=d/p,x=m/p;return{len:p,nx:y,ny:x}},o=(u,h)=>{u===0?i.moveTo(h.x,h.y):i.lineTo(h.x,h.y)};let l=e[e.length-1];for(let u=0;u<e.length;u++){const h=e[u%e.length],d=h.radius??t;if(d<=0){o(u,h),l=h;continue}const m=e[(u+1)%e.length],p=s(h,l),y=s(h,m);if(p.len<1e-4||y.len<1e-4){o(u,h),l=h;continue}let x=Math.asin(p.nx*y.ny-p.ny*y.nx),_=1,S=!1;p.nx*y.nx-p.ny*-y.ny<0?x<0?x=Math.PI+x:(x=Math.PI-x,_=-1,S=!0):x>0&&(_=-1,S=!0);const b=x/2;let w,A=Math.abs(Math.cos(b)*d/Math.sin(b));A>Math.min(p.len/2,y.len/2)?(A=Math.min(p.len/2,y.len/2),w=Math.abs(A*Math.sin(b)/Math.cos(b))):w=d;const T=h.x+y.nx*A+-y.ny*w*_,E=h.y+y.ny*A+y.nx*w*_,R=Math.atan2(p.ny,p.nx)+Math.PI/2*_,X=Math.atan2(y.ny,y.nx)-Math.PI/2*_;u===0&&i.moveTo(T+Math.cos(R)*w,E+Math.sin(R)*w),i.arc(T,E,w,R,X,S),l=h}}function r8(i,e,t,s){const o=(h,d)=>Math.sqrt((h.x-d.x)**2+(h.y-d.y)**2),l=(h,d,m)=>({x:h.x+(d.x-h.x)*m,y:h.y+(d.y-h.y)*m}),u=e.length;for(let h=0;h<u;h++){const d=e[(h+1)%u],m=d.radius??t;if(m<=0){h===0?i.moveTo(d.x,d.y):i.lineTo(d.x,d.y);continue}const p=e[h],y=e[(h+2)%u],x=o(p,d);let _;if(x<1e-4)_=d;else{const w=Math.min(x/2,m);_=l(d,p,w/x)}const S=o(y,d);let b;if(S<1e-4)b=d;else{const w=Math.min(S/2,m);b=l(d,y,w/S)}h===0?i.moveTo(_.x,_.y):i.lineTo(_.x,_.y),i.quadraticCurveTo(d.x,d.y,b.x,b.y,s)}}const i8=new et;class s8{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new In,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],l=s[s.length-1];return(o!==e||l!==t)&&s.push(e,t),this}arc(e,t,s,o,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return v0(h,e,t,s,o,l,u),this}arcTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly.points;return Z3(u,e,t,s,o,l),this}arcToSvg(e,t,s,o,l,u,h){const d=this._currentPoly.points;return t8(d,this._currentPoly.lastX,this._currentPoly.lastY,u,h,e,t,s,o,l),this}bezierCurveTo(e,t,s,o,l,u,h){this._ensurePoly();const d=this._currentPoly;return x0(this._currentPoly.points,d.lastX,d.lastY,e,t,s,o,l,u,h),this}quadraticCurveTo(e,t,s,o,l){this._ensurePoly();const u=this._currentPoly;return K3(this._currentPoly.points,u.lastX,u.lastY,e,t,s,o,l),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,o=s.length;for(let l=0;l<e.instructions.length;l++){const u=e.instructions[l];this[u.action](...u.data)}if(e.checkForHoles&&s.length-o>1){let l=null;for(let u=o;u<s.length;u++){const h=s[u];if(h.shape.type==="polygon"){const d=h.shape,m=l==null?void 0:l.shape;m&&m.containsPolygon(d)?(l.holes||(l.holes=[]),l.holes.push(h),s.copyWithin(u,u+1),s.length--,u--):l=h}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,o,l){return this.drawShape(new et(e,t,s,o),l),this}circle(e,t,s,o){return this.drawShape(new Jc(e,t,s),o),this}poly(e,t,s){const o=new so(e);return o.closePath=t,this.drawShape(o,s),this}regularPoly(e,t,s,o,l=0,u){o=Math.max(o|0,3);const h=-1*Math.PI/2+l,d=Math.PI*2/o,m=[];for(let p=0;p<o;p++){const y=h-p*d;m.push(e+s*Math.cos(y),t+s*Math.sin(y))}return this.poly(m,!0,u),this}roundPoly(e,t,s,o,l,u=0,h){if(o=Math.max(o|0,3),l<=0)return this.regularPoly(e,t,s,o,u);const d=s*Math.sin(Math.PI/o)-.001;l=Math.min(l,d);const m=-1*Math.PI/2+u,p=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let x=0;x<o;x++){const _=x*p+m,S=e+s*Math.cos(_),b=t+s*Math.sin(_),w=_+Math.PI+y,A=_-Math.PI-y,T=S+l*Math.cos(w),E=b+l*Math.sin(w),R=S+l*Math.cos(A),X=b+l*Math.sin(A);x===0?this.moveTo(T,E):this.lineTo(T,E),this.quadraticCurveTo(S,b,R,X,h)}return this.closePath()}roundShape(e,t,s=!1,o){return e.length<3?this:(s?r8(this,e,t,o):n8(this,e,t),this.closePath())}filletRect(e,t,s,o,l){if(l===0)return this.rect(e,t,s,o);const u=Math.min(s,o)/2,h=Math.min(u,Math.max(-u,l)),d=e+s,m=t+o,p=h<0?-h:0,y=Math.abs(h);return this.moveTo(e,t+y).arcTo(e+p,t+p,e+y,t,y).lineTo(d-y,t).arcTo(d-p,t+p,d,t+y,y).lineTo(d,m-y).arcTo(d-p,m-p,e+s-y,m,y).lineTo(e+y,m).arcTo(e+p,m-p,e,m-y,y).closePath()}chamferRect(e,t,s,o,l,u){if(l<=0)return this.rect(e,t,s,o);const h=Math.min(l,Math.min(s,o)/2),d=e+s,m=t+o,p=[e+h,t,d-h,t,d,t+h,d,m-h,d-h,m,e+h,m,e,m-h,e,t+h];for(let y=p.length-1;y>=2;y-=2)p[y]===p[y-2]&&p[y-1]===p[y-3]&&p.splice(y-1,2);return this.poly(p,!0,u)}ellipse(e,t,s,o,l){return this.drawShape(new eh(e,t,s,o),l),this}roundRect(e,t,s,o,l,u){return this.drawShape(new th(e,t,s,o,l),u),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new so,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new so,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,o=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const l=t.transform,u=s;s=l.a*s+l.c*o+l.tx,o=l.b*u+l.d*o+l.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const o=t[s],l=o.shape.getBounds(i8);o.transform?e.addRect(l,o.transform):e.addRect(l)}return e}}class ur{constructor(e,t=!1){this.instructions=[],this.uid=ht("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?Ty(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new s8(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,o,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(Bt.shared);let d=0,m=0;if(!u||u.action!=="bezierCurveTo")d=h.x,m=h.y;else{d=u.data[2],m=u.data[3];const p=h.x,y=h.y;d=p+(p-d),m=y+(y-m)}return this.instructions.push({action:"bezierCurveTo",data:[d,m,e,t,s,o,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(Bt.shared);let u=0,h=0;if(!o||o.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=o.data[0],h=o.data[1];const d=l.x,m=l.y;u=d+(d-u),h=m+(m-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,e,t,s]}),this._dirty=!0,this}rect(e,t,s,o,l){return this.instructions.push({action:"rect",data:[e,t,s,o,l]}),this._dirty=!0,this}circle(e,t,s,o){return this.instructions.push({action:"circle",data:[e,t,s,o]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,o,l,u,h){l||(l=o/2);const d=-1*Math.PI/2+u,m=s*2,p=Math.PI*2/m,y=[];for(let x=0;x<m;x++){const _=x%2?l:o,S=x*p+d;y.push(e+_*Math.cos(S),t+_*Math.sin(S))}return this.poly(y,!0,h),this}clone(e=!1){const t=new ur;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];t.instructions.push({action:o.action,data:o.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,o=e.c,l=e.d,u=e.tx,h=e.ty;let d=0,m=0,p=0,y=0,x=0,_=0,S=0,b=0;for(let w=0;w<this.instructions.length;w++){const A=this.instructions[w],T=A.data;switch(A.action){case"moveTo":case"lineTo":d=T[0],m=T[1],T[0]=t*d+o*m+u,T[1]=s*d+l*m+h;break;case"bezierCurveTo":p=T[0],y=T[1],x=T[2],_=T[3],d=T[4],m=T[5],T[0]=t*p+o*y+u,T[1]=s*p+l*y+h,T[2]=t*x+o*_+u,T[3]=s*x+l*_+h,T[4]=t*d+o*m+u,T[5]=s*d+l*m+h;break;case"quadraticCurveTo":p=T[0],y=T[1],d=T[2],m=T[3],T[0]=t*p+o*y+u,T[1]=s*p+l*y+h,T[2]=t*d+o*m+u,T[3]=s*d+l*m+h;break;case"arcToSvg":d=T[5],m=T[6],S=T[0],b=T[1],T[0]=t*S+o*b,T[1]=s*S+l*b,T[5]=t*d+o*m+u,T[6]=s*d+l*m+h;break;case"circle":T[4]=Zs(T[3],e);break;case"rect":T[4]=Zs(T[4],e);break;case"ellipse":T[8]=Zs(T[8],e);break;case"roundRect":T[5]=Zs(T[5],e);break;case"addPath":T[0].transform(e);break;case"poly":T[2]=Zs(T[2],e);break;default:Qe("unknown transform action",A.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function Zs(i,e){return i?i.prepend(e):e.clone()}function ct(i,e,t){const s=i.getAttribute(e);return s?Number(s):t}function o8(i,e){const t=i.querySelectorAll("defs");for(let s=0;s<t.length;s++){const o=t[s];for(let l=0;l<o.children.length;l++){const u=o.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":e.defs[u.id]=a8(u);break;case"radialgradient":e.defs[u.id]=l8();break}}}}function a8(i){const e=ct(i,"x1",0),t=ct(i,"y1",0),s=ct(i,"x2",1),o=ct(i,"y2",0),l=i.getAttribute("gradientUnits")||"objectBoundingBox",u=new cr(e,t,s,o,l==="objectBoundingBox"?"local":"global");for(let h=0;h<i.children.length;h++){const d=i.children[h],m=ct(d,"offset",0),p=xt.shared.setValue(d.getAttribute("stop-color")).toNumber();u.addColorStop(m,p)}return u}function l8(i){return Qe("[SVG Parser] Radial gradients are not yet supported"),new cr(0,0,1,0)}function E1(i){const e=i.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const M1={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function _0(i,e){const t=i.getAttribute("style"),s={},o={},l={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const u in M1){const h=i.getAttribute(u);h&&R1(e,l,u,h.trim())}if(t){const u=t.split(";");for(let h=0;h<u.length;h++){const d=u[h].trim(),[m,p]=d.split(":");M1[m]&&R1(e,l,m,p.trim())}}return{strokeStyle:l.useStroke?s:null,fillStyle:l.useFill?o:null,useFill:l.useFill,useStroke:l.useStroke}}function R1(i,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=E1(s);e.strokeStyle.fill=i.defs[o]}else e.strokeStyle.color=xt.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=E1(s);e.fillStyle.fill=i.defs[o]}else e.fillStyle.color=xt.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function u8(i){if(i.length<=2)return!0;const e=i.map(h=>h.area).sort((h,d)=>d-h),[t,s]=e,o=e[e.length-1],l=t/s,u=s/o;return!(l>3&&u<2)}function c8(i){return i.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function h8(i){const e=i.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],o=[];for(let p=0;p<t.length;p+=2)p+1<t.length&&(s.push(t[p]),o.push(t[p+1]));if(s.length===0||o.length===0)return 0;const l=Math.min(...s),u=Math.max(...s),h=Math.min(...o),d=Math.max(...o);return(u-l)*(d-h)}function I1(i,e){const t=new ur(i,!1);for(const s of t.instructions)e.instructions.push(s)}function d8(i,e){if(typeof i=="string"){const u=document.createElement("div");u.innerHTML=i.trim(),i=u.querySelector("svg")}const t={context:e,defs:{},path:new ur};o8(i,t);const s=i.children,{fillStyle:o,strokeStyle:l}=_0(i,t);for(let u=0;u<s.length;u++){const h=s[u];h.nodeName.toLowerCase()!=="defs"&&w0(h,t,o,l)}return e}function w0(i,e,t,s){const o=i.children,{fillStyle:l,strokeStyle:u}=_0(i,e);l&&t?t={...t,...l}:l&&(t=l),u&&s?s={...s,...u}:u&&(s=u);const h=!t&&!s;h&&(t={color:0});let d,m,p,y,x,_,S,b,w,A,T,E,R,X,N,D,oe;switch(i.nodeName.toLowerCase()){case"path":{X=i.getAttribute("d");const ae=i.getAttribute("fill-rule"),Q=c8(X),ne=ae==="evenodd",Te=Q.length>1;if(ne&&Te){const Ee=Q.map(te=>({path:te,area:h8(te)}));if(Ee.sort((te,se)=>se.area-te.area),Q.length>3||!u8(Ee))for(let te=0;te<Ee.length;te++){const se=Ee[te],J=te===0;e.context.beginPath();const ee=new ur(void 0,!0);I1(se.path,ee),e.context.path(ee),J?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let te=0;te<Ee.length;te++){const se=Ee[te],J=te%2===1;e.context.beginPath();const ee=new ur(void 0,!0);I1(se.path,ee),e.context.path(ee),J?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const Ee=ae?ae==="evenodd":!0;N=new ur(X,Ee),e.context.path(N),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":S=ct(i,"cx",0),b=ct(i,"cy",0),w=ct(i,"r",0),e.context.ellipse(S,b,w,w),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":d=ct(i,"x",0),m=ct(i,"y",0),D=ct(i,"width",0),oe=ct(i,"height",0),A=ct(i,"rx",0),T=ct(i,"ry",0),A||T?e.context.roundRect(d,m,D,oe,A||T):e.context.rect(d,m,D,oe),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":S=ct(i,"cx",0),b=ct(i,"cy",0),A=ct(i,"rx",0),T=ct(i,"ry",0),e.context.beginPath(),e.context.ellipse(S,b,A,T),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":p=ct(i,"x1",0),y=ct(i,"y1",0),x=ct(i,"x2",0),_=ct(i,"y2",0),e.context.beginPath(),e.context.moveTo(p,y),e.context.lineTo(x,_),s&&e.context.stroke(s);break;case"polygon":R=i.getAttribute("points"),E=R.match(/\d+/g).map(ae=>parseInt(ae,10)),e.context.poly(E,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":R=i.getAttribute("points"),E=R.match(/\d+/g).map(ae=>parseInt(ae,10)),e.context.poly(E,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{Qe(`[SVG parser] <${i.nodeName}> elements unsupported`);break}}h&&(t=null);for(let ae=0;ae<o.length;ae++)w0(o[ae],e,t,s)}function f8(i){return xt.isColorLike(i)}function F1(i){return i instanceof il}function L1(i){return i instanceof cr}function p8(i){return i instanceof De}function m8(i,e,t){const s=xt.shared.setValue(e??0);return i.color=s.toNumber(),i.alpha=s.alpha===1?t.alpha:s.alpha,i.texture=De.WHITE,{...t,...i}}function g8(i,e,t){return i.texture=e,{...t,...i}}function z1(i,e,t){return i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,{...t,...i}}function B1(i,e,t){return e.buildGradient(),i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,i.textureSpace=e.textureSpace,{...t,...i}}function y8(i,e){const t={...e,...i},s=xt.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function ci(i,e){if(i==null)return null;const t={},s=i;return f8(i)?m8(t,i,e):p8(i)?g8(t,i,e):F1(i)?z1(t,i,e):L1(i)?B1(t,i,e):s.fill&&F1(s.fill)?z1(s,s.fill,e):s.fill&&L1(s.fill)?B1(s,s.fill,e):y8(s,e)}function el(i,e){const{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...d}=e,m=ci(i,d);return m?{width:t,alignment:s,miterLimit:o,cap:l,join:u,pixelLine:h,...m}:null}const x8=new Bt,j1=new Be,rh=class Gn extends Fn{constructor(){super(...arguments),this.uid=ht("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new ur,this._transform=new Be,this._fillStyle={...Gn.defaultFillStyle},this._strokeStyle={...Gn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new In,this._boundsDirty=!0}clone(){const e=new Gn;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=ci(e,Gn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=el(e,Gn.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=ci(e,Gn.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=ci(e,Gn.defaultStrokeStyle),this}texture(e,t,s,o,l,u){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:o||0,dw:l||e.frame.width,dh:u||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?xt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ur,this}fill(e,t){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&(o==null?void 0:o.action)==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(Le(Ge,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=ci(e,Gn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Bt.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&(s==null?void 0:s.action)==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=el(e,Gn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,o,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,s,o,l,u),this}arcTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}arcToSvg(e,t,s,o,l,u,h){this._tick++;const d=this._transform;return this._activePath.arcToSvg(e,t,s,o,l,d.a*u+d.c*h+d.tx,d.b*u+d.d*h+d.ty),this}bezierCurveTo(e,t,s,o,l,u,h){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*e+d.c*t+d.tx,d.b*e+d.d*t+d.ty,d.a*s+d.c*o+d.tx,d.b*s+d.d*o+d.ty,d.a*l+d.c*u+d.tx,d.b*l+d.d*u+d.ty,h),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,s,o){return this._tick++,this._activePath.ellipse(e,t,s,o,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,o=this._activePath.instructions,l=s.a*e+s.c*t+s.tx,u=s.b*e+s.d*t+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=l,o[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(e,t,s,o,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,l),this}rect(e,t,s,o){return this._tick++,this._activePath.rect(e,t,s,o,this._transform.clone()),this}roundRect(e,t,s,o,l){return this._tick++,this._activePath.roundRect(e,t,s,o,l,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,o,l=0,u){return this._tick++,this._activePath.regularPoly(e,t,s,o,l,u),this}roundPoly(e,t,s,o,l,u){return this._tick++,this._activePath.roundPoly(e,t,s,o,l,u),this}roundShape(e,t,s,o){return this._tick++,this._activePath.roundShape(e,t,s,o),this}filletRect(e,t,s,o,l){return this._tick++,this._activePath.filletRect(e,t,s,o,l),this}chamferRect(e,t,s,o,l,u){return this._tick++,this._activePath.chamferRect(e,t,s,o,l,u),this}star(e,t,s,o,l=0,u=0){return this._tick++,this._activePath.star(e,t,s,o,l,u,this._transform.clone()),this}svg(e){return this._tick++,d8(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,o,l,u){return e instanceof Be?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,o,l,u),this)}transform(e,t,s,o,l,u){return e instanceof Be?(this._transform.append(e),this):(j1.set(e,t,s,o,l,u),this._transform.append(j1),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],o=s.action;if(o==="fill"){const l=s.data;e.addBounds(l.path.bounds)}else if(o==="texture"){const l=s.data;e.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(o==="stroke"){const l=s.data,u=l.style.alignment,h=l.style.width*(1-u),d=l.path.bounds;e.addFrame(d.minX-h,d.minY-h,d.maxX+h,d.maxY+h)}}return e}containsPoint(e){var o;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let l=0;l<t.length;l++){const u=t[l],h=u.data,d=h.path;if(!u.action||!d)continue;const m=h.style,p=d.shapePath.shapePrimitives;for(let y=0;y<p.length;y++){const x=p[y].shape;if(!m||!x)continue;const _=p[y].transform,S=_?_.applyInverse(e,x8):e;if(u.action==="fill")s=x.contains(S.x,S.y);else{const w=m;s=x.strokeContains(S.x,S.y,w.width,w.alignment)}const b=h.hole;if(b){const w=(o=b.shapePath)==null?void 0:o.shapePrimitives;if(w)for(let A=0;A<w.length;A++)w[A].shape.contains(S.x,S.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};rh.defaultFillStyle={color:16777215,alpha:1,texture:De.WHITE,matrix:null,fill:null,textureSpace:"local"};rh.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:De.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let fn=rh;const ih=class Xi extends Fn{constructor(e={}){super(),this.uid=ht("textStyle"),this._tick=0,v8(e);const t={...Xi.defaultTextStyle,...e};for(const s in t){const o=s;this[o]=t[s]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Xi.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Xi.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...fn.defaultFillStyle,...e},()=>{this._fill=ci({...this._originalFill},fn.defaultFillStyle)})),this._fill=ci(e===0?"black":e,fn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...fn.defaultStrokeStyle,...e},()=>{this._stroke=el({...this._originalStroke},fn.defaultStrokeStyle)})),this._stroke=el(e,fn.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=Xi.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Xi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){var s,o,l,u;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const h=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(h),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(h),(l=this._stroke)!=null&&l.texture&&this._stroke.texture.destroy(h),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(h)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,o,l)=>(s[o]===l||(s[o]=l,t==null||t(o,l),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(xt.isColorLike(e)||e instanceof cr||e instanceof il)}};ih.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};ih.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let po=ih;function v8(i){const e=i;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=po.defaultDropShadow;i.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Le(Ge,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(xt.isColorLike(t))s.color=t;else if(t instanceof cr||t instanceof il)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");i.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Le(Ge,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Qe("The number of fill colors must match the number of fill gradient stops.");const t=new cr({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),o=e.fill.map(l=>xt.shared.setValue(l).toNumber());s.forEach((l,u)=>{t.addColorStop(l,o[u])}),i.fill={fill:t}}}class _8{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=Ye.get().createCanvas();s.width=e,s.height=t;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=es(e),t=es(t);const o=(e<<17)+(t<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let l=this._canvasPool[o].pop();return l||(l=this._createCanvasAndContext(e,t)),l}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:o}=t,l=(s<<17)+(o<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,o),this._canvasPool[l].push(e)}clear(){this._canvasPool={}}}const mo=new _8;go.register(mo);const D1=1e5;function tl(i,e,t,s=0){if(i.texture===De.WHITE&&!i.fill)return xt.shared.setValue(i.color).setAlpha(i.alpha??1).toHexa();if(i.fill){if(i.fill instanceof il){const o=i.fill,l=e.createPattern(o.texture.source.resource,"repeat"),u=o.transform.copyTo(Be.shared);return u.scale(o.texture.frame.width,o.texture.frame.height),l.setTransform(u),l}else if(i.fill instanceof cr){const o=i.fill,l=o.type==="linear",u=o.textureSpace==="local";let h=1,d=1;u&&t&&(h=t.width+s,d=t.height+s);let m,p=!1;if(l){const{start:y,end:x}=o;m=e.createLinearGradient(y.x*h,y.y*d,x.x*h,x.y*d),p=Math.abs(x.x-y.x)<Math.abs((x.y-y.y)*.1)}else{const{center:y,innerRadius:x,outerCenter:_,outerRadius:S}=o;m=e.createRadialGradient(y.x*h,y.y*d,x*h,_.x*h,_.y*d,S*h)}if(p&&u&&t){const y=t.lineHeight/d;for(let x=0;x<t.lines.length;x++){const _=(x*t.lineHeight+s/2)/d;o.colorStops.forEach(S=>{const b=_+S.offset*y;m.addColorStop(Math.floor(b*D1)/D1,xt.shared.setValue(S.color).toHex())})}}else o.colorStops.forEach(y=>{m.addColorStop(y.offset,xt.shared.setValue(y.color).toHex())});return m}}else{const o=e.createPattern(i.texture.source.resource,"repeat"),l=i.matrix.copyTo(Be.shared);return l.scale(i.texture.frame.width,i.texture.frame.height),o.setTransform(l),o}return Qe("FillStyle not recognised",i),"red"}const S0=class k0 extends r0{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...k0.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const s=t.style.clone();t.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=De.WHITE,s._fill.fill=null),this.applyFillAsTint=t.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const l=Za(s);t.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof ts?t.textureStyle:new ts(t.textureStyle)),this.fontMetrics=Vn.measureFont(l),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(e){var w,A;const t=Vn.graphemeSegmenter(e).filter(T=>!this._currentChars.includes(T)).filter((T,E,R)=>R.indexOf(T)===E);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:l}=s.canvasAndContext,u=s.texture.source;const h=this._style;let d=this._currentX,m=this._currentY,p=this._currentMaxCharHeight;const y=this.baseRenderedFontSize/this.baseMeasurementFontSize,x=this._padding*y;let _=!1;const S=o.width/this.resolution,b=o.height/this.resolution;for(let T=0;T<t.length;T++){const E=t[T],R=Vn.measureText(E,h,o,!1);R.lineHeight=R.height;const X=R.width*y,N=Math.ceil((h.fontStyle==="italic"?2:1)*X),D=R.height*y,oe=N+x*2,ae=D+x*2;if(_=!1,E!==`
`&&E!=="\r"&&E!=="	"&&E!==" "&&(_=!0,p=Math.ceil(Math.max(ae,p))),d+oe>S&&(m+=p,p=ae,d=0,m+p>b)){u.update();const ne=this._nextPage();o=ne.canvasAndContext.canvas,l=ne.canvasAndContext.context,u=ne.texture.source,d=0,m=0,p=0}const Q=X/y-(((w=h.dropShadow)==null?void 0:w.distance)??0)-(((A=h._stroke)==null?void 0:A.width)??0);if(this.chars[E]={id:E.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:Q,kerning:{}},_){this._drawGlyph(l,R,d+x,m+x,y,h);const ne=u.width*y,Te=u.height*y,pe=new et(d/ne*u.width,m/Te*u.height,oe/ne*u.width,ae/Te*u.height);this.chars[E].texture=new De({source:u,frame:pe}),d+=Math.ceil(oe)}}u.update(),this._currentX=d,this._currentY=m,this._currentMaxCharHeight=p,this._skipKerning&&this._applyKerning(t,l)}get pageTextures(){return Le(Ge,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const s=this._measureCache;for(let o=0;o<e.length;o++){const l=e[o];for(let u=0;u<this._currentChars.length;u++){const h=this._currentChars[u];let d=s[l];d||(d=s[l]=t.measureText(l).width);let m=s[h];m||(m=s[h]=t.measureText(h).width);let p=t.measureText(l+h).width,y=p-(d+m);y&&(this.chars[l].kerning[h]=y),p=t.measureText(l+h).width,y=p-(d+m),y&&(this.chars[h].kerning[l]=y)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=mo.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const s=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new De({source:new di({resource:t.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(o.source.style=this._textureStyle);const l={canvasAndContext:t,texture:o};return this.pages[this._currentPageIndex]=l,l}_setupContext(e,t,s){t.fontSize=this.baseRenderedFontSize,e.scale(s,s),e.font=Za(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const o=t._stroke,l=(o==null?void 0:o.width)??0;if(o&&(e.lineWidth=l,e.lineJoin=o.join,e.miterLimit=o.miterLimit,e.strokeStyle=tl(o,e)),t._fill&&(e.fillStyle=tl(t._fill,e)),t.dropShadow){const u=t.dropShadow,h=xt.shared.setValue(u.color).toArray(),d=u.blur*s,m=u.distance*s;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${u.alpha})`,e.shadowBlur=d,e.shadowOffsetX=Math.cos(u.angle)*m,e.shadowOffsetY=Math.sin(u.angle)*m}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,s,o,l,u){const h=t.text,d=t.fontProperties,m=u._stroke,p=((m==null?void 0:m.width)??0)*l,y=s+p/2,x=o-p/2,_=d.descent*l,S=t.lineHeight*l;let b=!1;u.stroke&&p&&(b=!0,e.strokeText(h,y,x+S-_));const{shadowBlur:w,shadowOffsetX:A,shadowOffsetY:T}=e;u._fill&&(b&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(h,y,x+S-_)),b&&(e.shadowBlur=w,e.shadowOffsetX=A,e.shadowOffsetY=T)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:s}=this.pages[e];mo.returnCanvasAndContext(t),s.destroy(!0)}this.pages=null}};S0.defaultOptions={textureSize:512,style:new po,mipmap:!0};let O1=S0;function w8(i,e,t,s){const o={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=t.baseLineOffset;let l=o.lines[0],u=null,h=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},m=t.baseMeasurementFontSize/e.fontSize,p=e.letterSpacing*m,y=e.wordWrapWidth*m,x=e.lineHeight?e.lineHeight*m:t.lineHeight,_=e.wordWrap&&e.breakWords,S=A=>{const T=l.width;for(let E=0;E<d.index;E++){const R=A.positions[E];l.chars.push(A.chars[E]),l.charPositions.push(R+T)}l.width+=A.width,h=!1,d.width=0,d.index=0,d.chars.length=0},b=()=>{let A=l.chars.length-1;if(s){let T=l.chars[A];for(;T===" ";)l.width-=t.chars[T].xAdvance,T=l.chars[--A]}o.width=Math.max(o.width,l.width),l={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,o.lines.push(l),o.height+=x},w=A=>A-p>y;for(let A=0;A<i.length+1;A++){let T;const E=A===i.length;E||(T=i[A]);const R=t.chars[T]||t.chars[" "];if(/(?:\s)/.test(T)||T==="\r"||T===`
`||E){if(!h&&e.wordWrap&&w(l.width+d.width)?(b(),S(d),E||l.charPositions.push(0)):(d.start=l.width,S(d),E||l.charPositions.push(0)),T==="\r"||T===`
`)b();else if(!E){const oe=R.xAdvance+(R.kerning[u]||0)+p;l.width+=oe,l.spaceWidth=oe,l.spacesIndex.push(l.charPositions.length),l.chars.push(T)}}else{const D=R.kerning[u]||0,oe=R.xAdvance+D+p;_&&w(l.width+d.width+oe)&&(S(d),b()),d.positions[d.index++]=d.width+D,d.chars.push(T),d.width+=oe}u=T}return b(),e.align==="center"?S8(o):e.align==="right"?k8(o):e.align==="justify"&&b8(o),o}function S8(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width/2-t.width/2;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function k8(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],s=i.width-t.width;for(let o=0;o<t.charPositions.length;o++)t.charPositions[o]+=s}}function b8(i){const e=i.width;for(let t=0;t<i.lines.length;t++){const s=i.lines[t];let o=0,l=s.spacesIndex[o++],u=0;const h=s.spacesIndex.length,m=(e-s.width)/h;for(let p=0;p<s.charPositions.length;p++)p===l&&(l=s.spacesIndex[o++],u+=m),s.charPositions[p]+=u}}function C8(i){if(i==="")return[];typeof i=="string"&&(i=[i]);const e=[];for(let t=0,s=i.length;t<s;t++){const o=i[t];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const l=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<l)throw new Error("[BitmapFont]: Invalid character range.");for(let h=l,d=u;h<=d;h++)e.push(String.fromCharCode(h))}else e.push(...Array.from(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let Wa=0;class A8{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=i0(1e3)}getFont(e,t){var u;let s=`${t.fontFamily}-bitmap`,o=!0;if(t._fill.fill&&!t._stroke?(s+=t._fill.fill.styleKey,o=!1):(t._stroke||t.dropShadow)&&(s=`${t.styleKey}-bitmap`,o=!1),!Ke.has(s)){const h=Object.create(t);h.lineHeight=0;const d=new O1({style:h,overrideFill:o,overrideSize:!0,...this.defaultOptions});Wa++,Wa>50&&Qe("BitmapText",`You have dynamically created ${Wa} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),d.once("destroy",()=>{Wa--,Ke.remove(s)}),Ke.set(s,d)}const l=Ke.get(s);return(u=l.ensureCharacters)==null||u.call(l,e),l}getLayout(e,t,s=!0){const o=this.getFont(e,t),l=`${e}-${t.styleKey}-${s}`;if(this.measureCache.has(l))return this.measureCache.get(l);const u=Vn.graphemeSegmenter(e),h=w8(u,t,o,s);return this.measureCache.set(l,h),h}measureText(e,t,s=!0){return this.getLayout(e,t,s)}install(...e){var m,p,y,x;let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:(m=e[2])==null?void 0:m.chars,resolution:(p=e[2])==null?void 0:p.resolution,padding:(y=e[2])==null?void 0:y.padding,skipKerning:(x=e[2])==null?void 0:x.skipKerning},Le(Ge,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=t==null?void 0:t.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const o=t.style,l=o instanceof po?o:new po(o),u=t.dynamicFill??this._canUseTintForStyle(l),h=new O1({style:l,overrideFill:u,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),d=C8(t.chars);return h.ensureCharacters(d.join("")),Ke.set(`${s}-bitmap`,h),h.once("destroy",()=>Ke.remove(`${s}-bitmap`)),h}uninstall(e){const t=`${e}-bitmap`,s=Ke.get(t);s&&s.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const N1=new A8;class b0 extends r0{constructor(e,t){super();const{textures:s,data:o}=e;Object.keys(o.pages).forEach(l=>{const u=o.pages[parseInt(l,10)],h=s[u.id];this.pages.push({texture:h})}),Object.keys(o.chars).forEach(l=>{const u=o.chars[l],{frame:h,source:d,rotate:m}=s[u.page],p=He.transformRectCoords(u,h,m,new et),y=new De({frame:p,orig:new et(0,0,u.width,u.height),source:d,rotate:m});this.chars[l]={id:l.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:y}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){N1.install(e)}static uninstall(e){N1.uninstall(e)}}const gc={test(i){return typeof i=="string"&&i.startsWith("info face=")},parse(i){const e=i.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in e){const x=e[y].match(/^[a-z]+/gm)[0],_=e[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),S={};for(const b in _){const w=_[b].split("="),A=w[0],T=w[1].replace(/"/gm,""),E=parseFloat(T),R=isNaN(E)?T:E;S[A]=R}t[x].push(S)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=t.info,[l]=t.common,[u]=t.distanceField??[];u&&(s.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(l.lineHeight,10);const h=t.page;for(let y=0;y<h.length;y++)s.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const d={};s.baseLineOffset=s.lineHeight-parseInt(l.base,10);const m=t.char;for(let y=0;y<m.length;y++){const x=m[y],_=parseInt(x.id,10);let S=x.letter??x.char??String.fromCharCode(_);S==="space"&&(S=" "),d[_]=S,s.chars[S]={id:_,page:parseInt(x.page,10)||0,x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xOffset:parseInt(x.xoffset,10),yOffset:parseInt(x.yoffset,10),xAdvance:parseInt(x.xadvance,10),kerning:{}}}const p=t.kerning||[];for(let y=0;y<p.length;y++){const x=parseInt(p[y].first,10),_=parseInt(p[y].second,10),S=parseInt(p[y].amount,10);s.chars[d[_]].kerning[d[x]]=S}return s}},$1={test(i){const e=i;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(i){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=i.getElementsByTagName("info")[0],s=i.getElementsByTagName("common")[0],o=i.getElementsByTagName("distanceField")[0];o&&(e.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const l=i.getElementsByTagName("page"),u=i.getElementsByTagName("char"),h=i.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let m=0;m<l.length;m++)e.pages.push({id:parseInt(l[m].getAttribute("id"),10)||0,file:l[m].getAttribute("file")});const d={};e.baseLineOffset=e.lineHeight-parseInt(s.getAttribute("base"),10);for(let m=0;m<u.length;m++){const p=u[m],y=parseInt(p.getAttribute("id"),10);let x=p.getAttribute("letter")??p.getAttribute("char")??String.fromCharCode(y);x==="space"&&(x=" "),d[y]=x,e.chars[x]={id:y,page:parseInt(p.getAttribute("page"),10)||0,x:parseInt(p.getAttribute("x"),10),y:parseInt(p.getAttribute("y"),10),width:parseInt(p.getAttribute("width"),10),height:parseInt(p.getAttribute("height"),10),xOffset:parseInt(p.getAttribute("xoffset"),10),yOffset:parseInt(p.getAttribute("yoffset"),10),xAdvance:parseInt(p.getAttribute("xadvance"),10),kerning:{}}}for(let m=0;m<h.length;m++){const p=parseInt(h[m].getAttribute("first"),10),y=parseInt(h[m].getAttribute("second"),10),x=parseInt(h[m].getAttribute("amount"),10);e.chars[d[y]].kerning[d[p]]=x}return e}},U1={test(i){return typeof i=="string"&&i.match(/<font(\s|>)/)?$1.test(Ye.get().parseXML(i)):!1},parse(i){return $1.parse(Ye.get().parseXML(i))}},P8=[".xml",".fnt"],T8={extension:{type:xe.CacheParser,name:"cacheBitmapFont"},test:i=>i instanceof b0,getCacheableAssets(i,e){const t={};return i.forEach(s=>{t[s]=e,t[`${s}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},E8={extension:{type:xe.LoadParser,priority:Br.Normal},name:"loadBitmapFont",id:"bitmap-font",test(i){return P8.includes(sn.extname(i).toLowerCase())},async testParse(i){return gc.test(i)||U1.test(i)},async parse(i,e,t){const s=gc.test(i)?gc.parse(i):U1.parse(i),{src:o}=e,{pages:l}=s,u=[],h=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<l.length;++y){const x=l[y].file;let _=sn.join(sn.dirname(o),x);_=Rc(_,o),u.push({src:_,data:h})}const d=await t.load(u),m=u.map(y=>d[y.src]);return new b0({data:s,textures:m},o)},async load(i,e){return await(await Ye.get().fetch(i)).text()},async unload(i,e,t){await Promise.all(i.pages.map(s=>t.unload(s.texture.source._sourceOrigin))),i.destroy()}};class M8{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<t;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const R8={extension:{type:xe.CacheParser,name:"cacheTextureArray"},test:i=>Array.isArray(i)&&i.every(e=>e instanceof De),getCacheableAssets:(i,e)=>{const t={};return i.forEach(s=>{e.forEach((o,l)=>{t[s+(l===0?"":l+1)]=o})}),t}};async function C0(i){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(i)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const I8={extension:{type:xe.DetectionParser,priority:1},test:async()=>C0("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(e=>e!=="avif")},W1=["png","jpg","jpeg"],F8={extension:{type:xe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...W1],remove:async i=>i.filter(e=>!W1.includes(e))},L8="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function ol(i){return L8?!1:document.createElement("video").canPlayType(i)!==""}const z8={extension:{type:xe.DetectionParser,priority:0},test:async()=>ol("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(e=>e!=="mp4"&&e!=="m4v")},B8={extension:{type:xe.DetectionParser,priority:0},test:async()=>ol("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(e=>e!=="ogv")},j8={extension:{type:xe.DetectionParser,priority:0},test:async()=>ol("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(e=>e!=="webm")},D8={extension:{type:xe.DetectionParser,priority:0},test:async()=>C0("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(e=>e!=="webp")},A0=class Xa{constructor(){this.loadOptions={...Xa.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,s)=>(this._parsersValidated=!1,e[t]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const s={promise:null,parser:null};return s.promise=(async()=>{var u,h;let o=null,l=null;if((t.parser||t.loadParser)&&(l=this._parserHash[t.parser||t.loadParser],t.loadParser&&Qe(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),l||Qe(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!l){for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];if(m.load&&((u=m.test)!=null&&u.call(m,e,t,this))){l=m;break}}if(!l)return Qe(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await l.load(e,t,this),s.parser=l;for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];m.parse&&m.parse&&await((h=m.testParse)==null?void 0:h.call(m,o,t,this))&&(o=await m.parse(o,t,this)||o,s.parser=m)}return o})(),s}async load(e,t){this._parsersValidated||this._validateParsers();const s=typeof t=="function"?{...Xa.defaultOptions,...this.loadOptions,onProgress:t}:{...Xa.defaultOptions,...this.loadOptions,...t||{}},{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:d}=s;let m=0;const p={},y=Qa(e),x=Rn(e,b=>({alias:[b],src:b,data:{}})),_=x.reduce((b,w)=>b+(w.progressSize||1),0),S=x.map(async b=>{const w=sn.toAbsolute(b.src);p[b.src]||(await this._loadAssetWithRetry(w,b,{onProgress:o,onError:l,strategy:u,retryCount:h,retryDelay:d},p),m+=b.progressSize||1,o&&o(m/_))});return await Promise.all(S),y?p[x[0].src]:p}async unload(e){const s=Rn(e,o=>({alias:[o],src:o})).map(async o=>{var h,d;const l=sn.toAbsolute(o.src),u=this.promiseCache[l];if(u){const m=await u.promise;delete this.promiseCache[l],await((d=(h=u.parser)==null?void 0:h.unload)==null?void 0:d.call(h,m,o,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?Qe("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&Qe(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,s,o){let l=0;const{onError:u,strategy:h,retryCount:d,retryDelay:m}=s,p=y=>new Promise(x=>setTimeout(x,y));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),o[t.src]=await this.promiseCache[e].promise;return}catch(y){delete this.promiseCache[e],delete o[t.src],l++;const x=h!=="retry"||l>d;if(h==="retry"&&!x){u&&u(y,t),await p(m);continue}if(h==="skip"){u&&u(y,t);return}throw u&&u(y,t),new Error(`[Loader.load] Failed to load ${e}.
${y}`)}}};A0.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let O8=A0;function os(i,e){if(Array.isArray(e)){for(const t of e)if(i.startsWith(`data:${t}`))return!0;return!1}return i.startsWith(`data:${e}`)}function as(i,e){const t=i.split("?")[0],s=sn.extname(t).toLowerCase();return Array.isArray(e)?e.includes(s):s===e}const N8=".json",$8="application/json",U8={extension:{type:xe.LoadParser,priority:Br.Low},name:"loadJson",id:"json",test(i){return os(i,$8)||as(i,N8)},async load(i){return await(await Ye.get().fetch(i)).json()}},W8=".txt",G8="text/plain",H8={name:"loadTxt",id:"text",extension:{type:xe.LoadParser,priority:Br.Low,name:"loadTxt"},test(i){return os(i,G8)||as(i,W8)},async load(i){return await(await Ye.get().fetch(i)).text()}},V8=["normal","bold","100","200","300","400","500","600","700","800","900"],Y8=[".ttf",".otf",".woff",".woff2"],X8=["font/ttf","font/otf","font/woff","font/woff2"],q8=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function K8(i){const e=sn.extname(i),o=sn.basename(i,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let l=o.length>0;for(const h of o)if(!h.match(q8)){l=!1;break}let u=o.join(" ");return l||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const Q8=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Z8(i){return Q8.test(i)?i:encodeURI(i)}const J8={extension:{type:xe.LoadParser,priority:Br.Low},name:"loadWebFont",id:"web-font",test(i){return os(i,X8)||as(i,Y8)},async load(i,e){var s,o,l;const t=Ye.get().getFontFaceSet();if(t){const u=[],h=((s=e.data)==null?void 0:s.family)??K8(i),d=((l=(o=e.data)==null?void 0:o.weights)==null?void 0:l.filter(p=>V8.includes(p)))??["normal"],m=e.data??{};for(let p=0;p<d.length;p++){const y=d[p],x=new FontFace(h,`url(${Z8(i)})`,{...m,weight:y});await x.load(),t.add(x),u.push(x)}return Ke.has(`${h}-and-url`)?Ke.get(`${h}-and-url`).entries.push({url:i,faces:u}):Ke.set(`${h}-and-url`,{entries:[{url:i,faces:u}]}),u.length===1?u[0]:u}return Qe("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){const e=Array.isArray(i)?i:[i],t=e[0].family,s=Ke.get(`${t}-and-url`),o=s.entries.find(l=>l.faces.some(u=>e.indexOf(u)!==-1));o.faces=o.faces.filter(l=>e.indexOf(l)===-1),o.faces.length===0&&(s.entries=s.entries.filter(l=>l!==o)),e.forEach(l=>{Ye.get().getFontFaceSet().delete(l)}),s.entries.length===0&&Ke.remove(`${t}-and-url`)}};function sh(i,e=1){var s;const t=(s=ss.RETINA_PREFIX)==null?void 0:s.exec(i);return t?parseFloat(t[1]):e}function oh(i,e,t){i.label=t,i._sourceOrigin=t;const s=new De({source:i,label:t}),o=()=>{delete e.promiseCache[t],Ke.has(t)&&Ke.remove(t)};return s.source.once("destroy",()=>{e.promiseCache[t]&&(Qe("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{i.destroyed||(Qe("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const e5=".svg",t5="image/svg+xml",n5={extension:{type:xe.LoadParser,priority:Br.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(i){return os(i,t5)||as(i,e5)},async load(i,e,t){var s;return((s=e.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?i5(i):r5(i,e,t,this.config.crossOrigin)},unload(i){i.destroy(!0)}};async function r5(i,e,t,s){var w,A,T;const o=await Ye.get().fetch(i),l=Ye.get().createImage();l.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await o.text())}`,l.crossOrigin=s,await l.decode();const u=((w=e.data)==null?void 0:w.width)??l.width,h=((A=e.data)==null?void 0:A.height)??l.height,d=((T=e.data)==null?void 0:T.resolution)||sh(i),m=Math.ceil(u*d),p=Math.ceil(h*d),y=Ye.get().createCanvas(m,p),x=y.getContext("2d");x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.drawImage(l,0,0,u*d,h*d);const{parseAsGraphicsContext:_,...S}=e.data??{},b=new di({resource:y,alphaMode:"premultiply-alpha-on-upload",resolution:d,...S});return oh(b,t,i)}async function i5(i){const t=await(await Ye.get().fetch(i)).text(),s=new fn;return s.svg(t),s}const s5=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Zi=null,Uc=class{constructor(){Zi||(Zi=URL.createObjectURL(new Blob([s5],{type:"application/javascript"}))),this.worker=new Worker(Zi)}};Uc.revokeObjectURL=function(){Zi&&(URL.revokeObjectURL(Zi),Zi=null)};const o5=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Ji=null;class P0{constructor(){Ji||(Ji=URL.createObjectURL(new Blob([o5],{type:"application/javascript"}))),this.worker=new Worker(Ji)}}P0.revokeObjectURL=function(){Ji&&(URL.revokeObjectURL(Ji),Ji=null)};let G1=0,yc;class a5{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Uc;t.addEventListener("message",s=>{t.terminate(),Uc.revokeObjectURL(),e(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){var s;return this._run("loadImageBitmap",[e,(s=t==null?void 0:t.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){yc===void 0&&(yc=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<yc&&(this._createdWorkers++,e=new P0().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const s=new Promise((o,l)=>{this._queue.push({id:e,arguments:t,resolve:o,reject:l})});return this._next(),s}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),s=t.id;this._resolveHash[G1]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:G1++,id:s})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const H1=new a5,l5=[".jpeg",".jpg",".png",".webp",".avif"],u5=["image/jpeg","image/png","image/webp","image/avif"];async function c5(i,e){var o;const t=await Ye.get().fetch(i);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${t.status} ${t.statusText}`);const s=await t.blob();return((o=e==null?void 0:e.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const T0={name:"loadTextures",id:"texture",extension:{type:xe.LoadParser,priority:Br.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return os(i,u5)||as(i,l5)},async load(i,e,t){var l;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await H1.isImageBitmapSupported()?s=await H1.loadImageBitmap(i,e):s=await c5(i,e):s=await new Promise((u,h)=>{s=Ye.get().createImage(),s.crossOrigin=this.config.crossOrigin,s.src=i,s.complete?u(s):(s.onload=()=>{u(s)},s.onerror=h)});const o=new di({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((l=e.data)==null?void 0:l.resolution)||sh(i),...e.data});return oh(o,t,i)},unload(i){i.destroy(!0)}},h5=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let xc,vc;function d5(i,e,t){t===void 0&&!e.startsWith("data:")?i.crossOrigin=p5(e):t!==!1&&(i.crossOrigin=typeof t=="string"?t:"anonymous")}function f5(i){return new Promise((e,t)=>{i.addEventListener("canplaythrough",s),i.addEventListener("error",o),i.load();function s(){l(),e()}function o(u){l(),t(u)}function l(){i.removeEventListener("canplaythrough",s),i.removeEventListener("error",o)}})}function p5(i,e=globalThis.location){if(i.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(i,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function m5(){const i=[],e=[];for(const t of h5){const s=io.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;ol(s)&&(i.push(t),e.includes(s)||e.push(s))}return{validVideoExtensions:i,validVideoMime:e}}const g5={name:"loadVideo",id:"video",extension:{type:xe.LoadParser,name:"loadVideo"},test(i){if(!xc||!vc){const{validVideoExtensions:s,validVideoMime:o}=m5();xc=s,vc=o}const e=os(i,vc),t=as(i,xc);return e||t},async load(i,e,t){var d,m;const s={...io.defaultOptions,resolution:((d=e.data)==null?void 0:d.resolution)||sh(i),alphaMode:((m=e.data)==null?void 0:m.alphaMode)||await Ip(),...e.data},o=document.createElement("video"),l={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(l).forEach(p=>{const y=l[p];y!==void 0&&o.setAttribute(p,y)}),s.muted===!0&&(o.muted=!0),d5(o,i,s.crossorigin);const u=document.createElement("source");let h;if(s.mime)h=s.mime;else if(i.startsWith("data:"))h=i.slice(5,i.indexOf(";"));else if(!i.startsWith("blob:")){const p=i.split("?")[0].slice(i.lastIndexOf(".")+1).toLowerCase();h=io.MIME_TYPES[p]||`video/${p}`}return u.src=i,h&&(u.type=h),new Promise(p=>{const y=async()=>{const x=new io({...s,resource:o});o.removeEventListener("canplay",y),e.data.preload&&await f5(o),p(oh(x,t,i))};s.preload&&!s.autoPlay&&o.load(),o.addEventListener("canplay",y),o.appendChild(u)})},unload(i){i.destroy(!0)}},E0={extension:{type:xe.ResolveParser,name:"resolveTexture"},test:T0.test,parse:i=>{var e;return{resolution:parseFloat(((e=ss.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:i.split(".").pop(),src:i}}},y5={extension:{type:xe.ResolveParser,priority:-2,name:"resolveJson"},test:i=>ss.RETINA_PREFIX.test(i)&&i.endsWith(".json"),parse:E0.parse};class x5{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ss,this.loader=new O8,this.cache=Ke,this._backgroundLoader=new M8(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var l,u;if(this._initialized){Qe("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let h=e.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}const t=((l=e.texturePreference)==null?void 0:l.resolution)??1,s=typeof t=="number"?[t]:t,o=await this._detectFormats({preferredFormats:(u=e.texturePreference)==null?void 0:u.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const s=Qa(e),o=Rn(e).map(h=>{if(typeof h!="string"){const d=this.resolver.getAlias(h);return d.some(m=>!this.resolver.hasKey(m))&&this.add(h),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),l=this.resolver.resolve(o),u=await this._mapLoadToResolve(l,t);return s?u[o[0]]:u}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const o=this.resolver.resolveBundle(e),l={},u=Object.keys(o);let h=0;const d=[],m=()=>{t==null||t(d.reduce((y,x)=>y+x,0)/h)},p=u.map((y,x)=>{const _=o[y],S=Object.values(_),w=[...new Set(S.flat())].reduce((A,T)=>A+(T.progressSize||1),0);return d.push(0),h+=w,this._mapLoadToResolve(_,A=>{d[x]=A*w,m()}).then(A=>{l[y]=A})});return await Promise.all(p),s?l[e[0]]:l}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Ke.get(e);const t={};for(let s=0;s<e.length;s++)t[s]=Ke.get(e[s]);return t}async _mapLoadToResolve(e,t){const s=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,t);this._backgroundLoader.active=!0;const l={};return s.forEach(u=>{const h=o[u.src],d=[u.src];u.alias&&d.push(...u.alias),d.forEach(m=>{l[m]=h}),Ke.set(d,h)}),l}async unload(e){this._initialized||await this.init();const t=Rn(e).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(t);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=Rn(e);const t=this.resolver.resolveBundle(e),s=Object.keys(t).map(o=>this._unloadFromResolved(t[o]));await Promise.all(s)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(s=>{Ke.remove(s.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const s of e.detections)e.skipDetections||await s.test()?t=await s.add(t):e.skipDetections||(t=await s.remove(t));return t=t.filter((s,o)=>t.indexOf(s)===o),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(s=>s in e).forEach(s=>{t.config[s]=e[s]})})}}const Qi=new x5;Mt.handleByList(xe.LoadParser,Qi.loader.parsers).handleByList(xe.ResolveParser,Qi.resolver.parsers).handleByList(xe.CacheParser,Qi.cache.parsers).handleByList(xe.DetectionParser,Qi.detections);Mt.add(R8,F8,I8,D8,z8,B8,j8,U8,H8,J8,n5,T0,g5,E8,T8,E0,y5);const V1={loader:xe.LoadParser,resolver:xe.ResolveParser,cache:xe.CacheParser,detection:xe.DetectionParser};Mt.handle(xe.Asset,i=>{const e=i.ref;Object.entries(V1).filter(([t])=>!!e[t]).forEach(([t,s])=>Mt.add(Object.assign(e[t],{extension:e[t].extension??s})))},i=>{const e=i.ref;Object.keys(V1).filter(t=>!!e[t]).forEach(t=>Mt.remove(e[t]))});class hi extends qc{constructor(e){e instanceof fn&&(e={context:e});const{context:t,roundPixels:s,...o}=e||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new fn,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new hi(this._context.clone()):(this._ownedContext=null,new hi(this._context))}lineStyle(e,t,s){Le(Ge,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return e&&(o.width=e),t&&(o.color=t),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(e,t){Le(Ge,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){Le(Ge,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==fn.defaultStrokeStyle.width||e.color!==fn.defaultStrokeStyle.color||e.alpha!==fn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Le(Ge,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Le(Ge,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Le(Ge,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Le(Ge,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Le(Ge,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Le(Ge,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class v5 extends qc{constructor(e,t){const{text:s,resolution:o,style:l,anchor:u,width:h,height:d,roundPixels:m,...p}=e;super({...p}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=s??"",this.style=l,this.resolution=o??null,this.allowChildren=!1,this._anchor=new Et({_onUpdate:()=>{this.onViewUpdate()}}),u&&(this.anchor=u),this.roundPixels=m??!1,h!==void 0&&(this.width=h),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,s=this.bounds.height,o=-t*this.anchor.x;let l=0;return e.x>=o&&e.x<=o+t&&(l=-s*this.anchor.y,e.y>=l&&e.y<=l+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function _5(i,e){let t=i[0]??{};return(typeof t=="string"||i[1])&&(Le(Ge,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:i[1]}),t}let si=null,or=null;function w5(i,e){si||(si=Ye.get().createCanvas(256,128),or=si.getContext("2d",{willReadFrequently:!0}),or.globalCompositeOperation="copy",or.globalAlpha=1),(si.width<i||si.height<e)&&(si.width=es(i),si.height=es(e))}function Y1(i,e,t){for(let s=0,o=4*t*e;s<e;++s,o+=4)if(i[o+3]!==0)return!1;return!0}function X1(i,e,t,s,o){const l=4*e;for(let u=s,h=s*l+4*t;u<=o;++u,h+=l)if(i[h+3]!==0)return!1;return!0}function S5(...i){let e=i[0];e.canvas||(e={canvas:i[0],resolution:i[1]});const{canvas:t}=e,s=Math.min(e.resolution??1,1),o=e.width??t.width,l=e.height??t.height;let u=e.output;if(w5(o,l),!or)throw new TypeError("Failed to get canvas 2D context");or.drawImage(t,0,0,o,l,0,0,o*s,l*s);const d=or.getImageData(0,0,o,l).data;let m=0,p=0,y=o-1,x=l-1;for(;p<l&&Y1(d,o,p);)++p;if(p===l)return et.EMPTY;for(;Y1(d,o,x);)--x;for(;X1(d,o,m,p,x);)++m;for(;X1(d,o,y,p,x);)--y;return++y,++x,or.globalCompositeOperation="source-over",or.strokeRect(m,p,y-m,x-p),or.globalCompositeOperation="copy",u??(u=new et),u.set(m/s,p/s,(y-m)/s,(x-p)/s),u}const q1=new et;class k5{getCanvasAndContext(e){const{text:t,style:s,resolution:o=1}=e,l=s._getFinalPadding(),u=Vn.measureText(t||" ",s),h=Math.ceil(Math.ceil(Math.max(1,u.width)+l*2)*o),d=Math.ceil(Math.ceil(Math.max(1,u.height)+l*2)*o),m=mo.getOptimalCanvasAndContext(h,d);this._renderTextToCanvas(t,s,l,o,m);const p=s.trim?S5({canvas:m.canvas,width:h,height:d,resolution:1,output:q1}):q1.set(0,0,h,d);return{canvasAndContext:m,frame:p}}returnCanvasAndContext(e){mo.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,s,o,l){var E,R,X,N;const{canvas:u,context:h}=l,d=Za(t),m=Vn.measureText(e||" ",t),p=m.lines,y=m.lineHeight,x=m.lineWidths,_=m.maxLineWidth,S=m.fontProperties,b=u.height;if(h.resetTransform(),h.scale(o,o),h.textBaseline=t.textBaseline,(E=t._stroke)!=null&&E.width){const D=t._stroke;h.lineWidth=D.width,h.miterLimit=D.miterLimit,h.lineJoin=D.join,h.lineCap=D.cap}h.font=d;let w,A;const T=t.dropShadow?2:1;for(let D=0;D<T;++D){const oe=t.dropShadow&&D===0,ae=oe?Math.ceil(Math.max(1,b)+s*2):0,Q=ae*o;if(oe){h.fillStyle="black",h.strokeStyle="black";const pe=t.dropShadow,Ee=pe.color,dt=pe.alpha;h.shadowColor=xt.shared.setValue(Ee).setAlpha(dt).toRgbaString();const te=pe.blur*o,se=pe.distance*o;h.shadowBlur=te,h.shadowOffsetX=Math.cos(pe.angle)*se,h.shadowOffsetY=Math.sin(pe.angle)*se+Q}else{if(h.fillStyle=t._fill?tl(t._fill,h,m,s*2):null,(R=t._stroke)!=null&&R.width){const pe=t._stroke.width*.5+s*2;h.strokeStyle=tl(t._stroke,h,m,pe)}h.shadowColor="black"}let ne=(y-S.fontSize)/2;y-S.fontSize<0&&(ne=0);const Te=((X=t._stroke)==null?void 0:X.width)??0;for(let pe=0;pe<p.length;pe++)w=Te/2,A=Te/2+pe*y+S.ascent+ne,t.align==="right"?w+=_-x[pe]:t.align==="center"&&(w+=(_-x[pe])/2),(N=t._stroke)!=null&&N.width&&this._drawLetterSpacing(p[pe],t,l,w+s,A+s-ae,!0),t._fill!==void 0&&this._drawLetterSpacing(p[pe],t,l,w+s,A+s-ae)}}_drawLetterSpacing(e,t,s,o,l,u=!1){const{context:h}=s,d=t.letterSpacing;let m=!1;if(Vn.experimentalLetterSpacingSupported&&(Vn.experimentalLetterSpacing?(h.letterSpacing=`${d}px`,h.textLetterSpacing=`${d}px`,m=!0):(h.letterSpacing="0px",h.textLetterSpacing="0px")),d===0||m){u?h.strokeText(e,o,l):h.fillText(e,o,l);return}let p=o;const y=Vn.graphemeSegmenter(e);let x=h.measureText(e).width,_=0;for(let S=0;S<y.length;++S){const b=y[S];u?h.strokeText(b,p,l):h.fillText(b,p,l);let w="";for(let A=S+1;A<y.length;++A)w+=y[A];_=h.measureText(w).width,p+=x-_+d,x=_}}}const K1=new k5;class b5 extends v5{constructor(...e){const t=_5(e,"Text");super(t,po),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof ts?t.textureStyle:new ts(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let s=0,o=0;if(this._style.trim){const{frame:l,canvasAndContext:u}=K1.getCanvasAndContext({text:this.text,style:this._style,resolution:1});K1.returnCanvasAndContext(u),s=l.width,o=l.height}else{const l=Vn.measureText(this._text,this._style);s=l.width,o=l.height}e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*o,e.maxY=e.minY+o}}Mt.add(Mg,Rg);const Un={nom:{nomcomplet:"Test Hero"},niveauGlobal:1,classe:{1:{classeId:"fighter"}},pvActuels:12,pvMax:12,CA:16,caracs:{force:{FOR:16},dexterite:{DEX:14,modDEX:2},constitution:{CON:14}}},C5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   width="174.61385mm"
   height="234.6797mm"
   viewBox="0 0 174.61385 234.6797"
   version="1.1"
   id="svg1"
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"
   sodipodi:docname="gentil.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview1"
     pagecolor="#191919"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#bd2727ff"
     inkscape:document-units="mm"
     inkscape:zoom="0.72604517"
     inkscape:cx="331.24661"
     inkscape:cy="485.50698"
     inkscape:window-width="1920"
     inkscape:window-height="1017"
     inkscape:window-x="1912"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1"
     showgrid="true">
    <inkscape:grid
       id="grid1"
       units="mm"
       originx="-17.307133"
       originy="-20.032634"
       spacingx="0.99999998"
       spacingy="1"
       empcolor="#0099e5"
       empopacity="0.30196078"
       color="#0099e5"
       opacity="0.14901961"
       empspacing="5"
       enabled="true"
       visible="true" />
  </sodipodi:namedview>
  <defs
     id="defs1" />
  <g
     inkscape:label="Calque 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(-17.307132,-20.032634)">
    <path
       d="m 69.048457,20.142976 c -0.141111,0.105834 -1.234722,0.282223 -2.434166,0.352778 -2.504723,0.176389 -3.633611,0.740834 -4.445,2.293056 -0.352778,0.599722 -0.9525,1.622778 -1.411111,2.328333 -0.881945,1.340556 -2.046111,4.233334 -2.328334,5.891389 -0.105833,0.564445 -0.599722,2.2225 -1.093611,3.633611 -0.458611,1.446389 -1.093611,4.021667 -1.375833,5.785556 -0.282222,1.763888 -0.740833,3.421944 -1.023056,3.774721 -0.282222,0.3175 -0.599722,0.811389 -0.740833,1.093611 -0.141111,0.282223 0.07056,0.141112 0.458611,-0.352777 0.846667,-1.023056 0.9525,-0.740834 0.211667,0.670277 -0.282222,0.564445 -0.423333,1.093612 -0.282222,1.199445 0.105833,0.105833 -0.176389,0.811389 -0.635,1.516944 -0.740834,1.234722 -0.811389,1.27 -1.128889,0.564445 -0.176389,-0.388056 -0.881945,-0.987778 -1.516945,-1.305278 -1.093611,-0.529167 -1.305277,-0.529167 -2.434166,0.03528 -1.940278,0.917222 -4.233333,3.139722 -5.115278,4.974167 -0.670278,1.411111 -1.27,1.975555 -3.598333,3.457222 -3.033889,1.905 -5.750277,4.797777 -7.161388,7.584722 -0.458612,0.917222 -1.305278,2.116666 -1.869723,2.681111 -1.305277,1.340555 -3.139722,6.0325 -2.575277,6.596944 0.246944,0.246945 1.411111,0.423334 2.892777,0.388056 l 2.434167,-0.03528 -0.176389,1.093611 c -0.105833,0.599722 -0.352778,2.187222 -0.564444,3.563056 -0.176389,1.340555 -0.599723,2.751666 -0.917223,3.069166 -0.423333,0.458611 -0.493888,1.023056 -0.3175,2.257778 0.211667,1.763889 0.705556,2.610555 1.481667,2.610555 0.352778,0 0.423333,0.3175 0.246945,1.093611 -0.105834,0.635 -0.03528,1.199445 0.176388,1.340556 0.246945,0.141111 0.282223,0.987778 0.07056,2.681111 -0.176388,1.375833 -0.211666,2.822222 -0.105833,3.280833 0.246945,1.093611 -0.529167,3.774722 -1.340555,4.515556 -0.388056,0.3175 -0.670278,0.846666 -0.670278,1.199444 0,0.317504 -0.493889,0.740834 -1.234722,1.023054 -1.693334,0.59972 -2.081389,1.44639 -1.799167,4.1275 0.352778,3.35139 -0.282222,6.70278 -1.446389,7.69056 -1.128889,0.98778 -1.234722,2.61055 -0.282222,4.40972 0.3175,0.635 0.635,1.79917 0.705555,2.61056 0.529167,5.53861 0.529167,5.82083 -0.03528,6.0325 -0.3175,0.10583 -0.599722,0.21166 -0.670277,0.21166 -0.03528,0 -0.176389,-0.635 -0.3175,-1.44639 -0.176388,-1.02305 -0.423333,-1.51694 -0.917222,-1.62277 -0.529166,-0.14112 -0.705555,-0.49389 -0.705555,-1.30528 -0.03528,-2.11667 -2.575278,-6.17361 -3.633611,-5.75028 -1.023056,0.38806 -1.093611,2.54 -0.246945,4.86833 0.705556,1.79917 0.740834,2.2225 0.352778,2.96334 -0.246944,0.49389 -0.352778,1.30527 -0.246944,1.905 0.141111,0.70555 0,1.5875 -0.458612,2.57527 -0.388055,0.84667 -0.705555,2.2225 -0.705555,3.06917 0,1.51694 0,1.51694 -0.776111,0.9525 -2.081389,-1.44639 -2.187222,-1.44639 -1.940278,-0.0706 0.105833,0.70556 0.529167,1.72862 0.881945,2.25778 0.846666,1.16417 3.563055,7.51417 4.656666,10.83028 1.305278,3.98639 3.386667,7.83167 5.432778,9.91305 2.786944,2.89278 3.986389,2.46945 5.185833,-1.86972 1.058333,-3.81 0.917222,-5.57389 -0.635,-7.83166 -0.705556,-1.02306 -1.340556,-1.76389 -1.375833,-1.5875 -0.03528,0.17639 -0.176389,0.74083 -0.282223,1.27 -0.3175,1.37583 -0.670277,1.23472 -1.340555,-0.56445 l -0.564444,-1.55222 2.151944,0.17639 c 1.199444,0.0705 3.175,0.28222 4.374444,0.49389 2.434166,0.35278 3.739444,0.0705 4.303889,-1.05834 0.599722,-1.05833 0.458611,-2.08138 -0.3175,-2.8575 -0.881945,-0.88194 -1.305278,-1.94027 -2.010834,-4.7625 -0.246944,-1.16416 -0.846666,-2.75167 -1.305277,-3.52778 -0.705556,-1.16416 -0.811389,-1.69333 -0.564445,-2.99861 0.141111,-0.88194 0.529167,-2.15194 0.881945,-2.82222 1.164166,-2.18722 1.234722,-2.43417 1.234722,-3.52778 0,-1.23472 1.093611,-3.56305 2.116666,-4.58611 0.388056,-0.38805 0.705556,-0.98778 0.705556,-1.34055 0,-0.35278 0.246944,-0.9525 0.529167,-1.37584 0.3175,-0.45861 0.529166,-1.37583 0.458611,-2.11666 -0.03528,-0.74084 0.282222,-2.99862 0.705555,-5.04473 0.423334,-2.04611 0.9525,-4.58611 1.128889,-5.67972 0.246945,-1.19944 0.987778,-2.99861 1.905,-4.550832 0.846667,-1.375834 1.834444,-3.386667 2.187222,-4.445 0.352778,-1.058333 0.776111,-1.905 0.917222,-1.905 0.141112,0 0.529167,0.529167 0.846667,1.128889 0.3175,0.635 1.411111,2.434166 2.363611,3.951111 1.340556,2.046111 1.869722,3.280833 2.046111,4.691942 0.141111,1.05834 0.564445,2.32834 0.917222,2.82222 2.293056,3.24556 2.328334,4.37445 0.352778,7.09084 -0.670278,0.91722 -1.905,2.92805 -2.716389,4.445 -1.552222,2.96333 -1.552222,3.10444 -1.058333,9.03111 0.03528,0.28222 -0.105833,2.64583 -0.3175,5.22111 -0.352778,4.23334 -0.529167,4.97417 -1.658055,7.40834 -1.869723,3.95111 -1.940278,4.19805 -2.293056,7.65527 -0.211667,2.08139 -0.211667,4.09223 0.03528,5.89139 0.352778,2.61056 0.3175,2.92806 -0.917222,7.69056 -1.481667,5.57389 -1.516945,5.32694 1.199444,6.0325 0.881944,0.24694 1.658056,0.70555 1.905,1.12889 0.9525,1.79916 -0.599722,8.5725 -3.457222,14.99305 -1.058334,2.43417 -4.621389,7.16139 -5.185833,6.94972 -0.564445,-0.21166 -1.023056,0.14112 -1.693334,1.37584 -0.529166,0.9525 -1.058333,1.23472 -2.328333,1.34055 -0.246944,0.0353 -0.458611,0.21167 -0.458611,0.38806 0,0.17639 -0.3175,0.74083 -0.670278,1.27 -0.634999,0.88194 -0.634999,1.05833 -0.211666,1.905 0.458611,0.88194 0.352777,1.19944 -1.305278,4.72722 l -1.799166,3.81 -0.07055,5.46806 c -0.07056,7.76111 -0.458612,12.94694 -1.305278,17.85055 l -0.740834,4.30389 -1.552222,0.77611 c -0.846666,0.42333 -1.481666,0.84667 -1.375833,0.9525 0.07056,0.10583 -0.07056,0.81139 -0.352778,1.62278 -0.458611,1.30528 -0.458611,1.51694 0,1.86972 1.093611,0.77611 1.27,2.15195 0.917222,6.42056 -0.211666,2.25777 -0.493888,4.97416 -0.635,5.96194 -0.176388,1.02306 -0.211666,2.01083 -0.105833,2.15195 0.493889,0.74083 9.524999,4.7625 11.429999,5.07999 2.645833,0.45862 9.489722,-0.21166 11.006666,-1.09361 0.917222,-0.49388 1.058334,-0.84666 1.164167,-2.25777 0.07055,-1.19945 -0.105833,-2.01084 -0.599722,-2.82223 -0.776111,-1.27 -6.632222,-7.05555 -8.466667,-8.32555 -1.09361,-0.77611 -1.164165,-0.9525 -0.9525,-2.29306 0.141111,-0.81139 0.529167,-1.69333 0.9525,-1.97555 0.493889,-0.42334 0.776111,-1.19945 1.023056,-2.99861 0.388055,-3.21028 4.7625,-14.78139 8.290277,-21.94278 1.481667,-2.92806 2.822223,-6.17361 2.998611,-7.19667 0.635001,-3.38666 3.598334,-7.3025 6.138334,-8.07861 0.811388,-0.28222 1.552222,-0.81139 1.905,-1.41111 0.493888,-0.88194 0.740833,-0.98778 2.187222,-0.91722 2.081389,0.10583 3.139722,0.70555 6.35,3.56305 1.446388,1.30528 3.069166,2.43417 3.598333,2.54 0.529167,0.10584 1.199444,0.56445 1.516944,1.02306 0.846667,1.30528 3.245556,8.29028 3.527778,10.23055 0.282222,2.04612 1.516944,6.52639 1.940278,6.985 0.141111,0.14112 0.141111,0.74084 0,1.27 -0.176389,0.56445 -0.211667,1.09362 -0.105834,1.19945 0.105834,0.10583 0.03528,0.38805 -0.141111,0.635 -0.529166,0.635 -0.881944,2.99861 -0.529166,3.24555 0.176388,0.10584 0.246944,0.9525 0.176388,1.86973 -0.246944,2.50472 0.493889,7.86694 1.164167,8.60777 0.811389,0.91723 3.280833,1.16417 6.244177,0.67028 4.833056,-0.81139 6.596945,-0.81139 10.583333,-0.0353 2.610561,0.49389 5.185841,0.74084 8.219731,0.74084 3.98639,0 4.445,-0.0706 5.11528,-0.74084 0.56444,-0.56444 0.70555,-0.98777 0.52916,-1.83444 -0.10583,-0.56444 -0.38805,-1.23472 -0.56444,-1.48167 -0.17639,-0.24694 -2.04611,-0.88194 -4.1275,-1.41111 -2.11667,-0.52916 -4.02167,-1.16416 -4.30389,-1.37583 -0.52917,-0.42333 -2.50472,-1.48167 -4.974173,-2.71639 -3.421944,-1.65806 -5.679722,-4.19806 -4.974167,-5.53861 0.246945,-0.42333 0.105834,-1.27 -0.388055,-2.71639 -0.635,-1.905 -0.705556,-2.61056 -0.493889,-7.05556 0.141111,-2.71638 0.3175,-5.43277 0.423333,-5.99722 0.105834,-0.59972 0.3175,-3.38666 0.423334,-6.24416 0.141111,-3.13973 0.423333,-5.36223 0.635,-5.60917 0.599722,-0.56444 1.516944,-0.17639 3.280833,1.44639 1.552222,1.41111 2.504722,1.62278 2.504722,0.52917 0,-0.77612 -1.234722,-3.10445 -1.940278,-3.70417 -1.023055,-0.84667 -1.234722,-1.5875 -0.846666,-2.99861 0.211666,-0.74084 0.599722,-1.5875 0.881944,-1.83445 0.282222,-0.28222 0.493889,-0.81139 0.493889,-1.19944 0,-1.48167 3.139733,-0.59972 8.255003,2.39889 0.84667,0.49389 2.89278,0.59972 3.175,0.17639 0.10584,-0.17639 -1.05833,-1.37584 -2.54,-2.68111 -2.54,-2.29306 -6.84389,-4.79778 -8.255003,-4.79778 -0.3175,0 -0.705556,-0.17639 -0.811389,-0.35278 -0.105834,-0.21167 -0.670278,-0.35278 -1.234723,-0.35278 -0.811389,0 -1.058333,-0.21166 -1.375833,-1.12889 -0.317499,-0.84666 -0.493889,-1.02305 -0.811389,-0.70555 -1.128889,1.12889 -1.199445,0.0353 -0.352778,-4.62139 0.352778,-1.86972 1.128889,-3.06917 1.128889,-1.69333 0,1.5875 0.635,0.35277 0.776111,-1.55223 0.105833,-1.30527 0.423333,-2.29305 0.917222,-2.92805 2.751673,-3.42195 3.245563,-4.72722 3.245563,-8.71361 0,-1.72861 0.17639,-3.03389 0.42333,-3.28084 0.45861,-0.45861 0.49389,-3.56305 0.10584,-10.58333 -0.24695,-4.1275 -0.21167,-4.65667 0.3175,-4.65667 0.59972,0 0.77611,0.56445 1.05833,3.42195 0.24694,2.46944 1.16417,4.1275 3.66889,6.56167 2.18722,2.18722 3.03389,2.2225 1.94028,0.14111 -0.35278,-0.635 -1.02306,-1.905 -1.48167,-2.78695 -0.77611,-1.48166 -0.81139,-1.69333 -0.35278,-2.71639 0.3175,-0.67027 0.74083,-1.09361 1.16417,-1.09361 0.38805,0 1.19944,-0.17639 1.79916,-0.38805 2.01084,-0.74084 10.05417,1.65805 13.22917,3.91583 0.91722,0.635 1.23472,0.70556 2.36361,0.38806 0.74083,-0.21167 1.83444,-0.38806 2.46944,-0.38806 1.5875,0 4.97417,1.12889 6.70278,2.2225 1.34055,0.84667 1.94028,0.98778 5.29167,1.09361 5.78555,0.24695 15.98083,2.25778 19.685,3.91583 0.98777,0.42334 2.8575,0.88195 4.19805,0.98778 1.34056,0.14111 3.10444,0.56445 3.95111,0.9525 1.09361,0.56445 3.73945,1.02306 9.91306,1.76389 9.17222,1.16417 14.9225,1.62278 14.9225,1.30528 0,-0.49389 -3.66889,-2.01084 -10.58334,-4.445 -3.98639,-1.41111 -8.07861,-2.8575 -9.10166,-3.21028 -1.05834,-0.38805 -2.68111,-0.70555 -3.66889,-0.70555 -0.98778,0 -2.68111,-0.35278 -3.91584,-0.84667 -1.23472,-0.45861 -3.35138,-0.91722 -4.83305,-1.05833 -4.55083,-0.35278 -16.05139,-3.59834 -19.93194,-5.60917 -1.12889,-0.59972 -2.08139,-0.74083 -4.93889,-0.77611 -3.73945,0 -6.10306,-0.74084 -7.83167,-2.36361 -0.70556,-0.635 -1.16417,-0.70556 -4.445,-0.67028 -4.65666,0.10583 -11.21833,-1.27 -12.24138,-2.50472 -1.44639,-1.72861 -0.38806,-3.31611 3.31611,-5.00945 1.76389,-0.81139 2.96333,-1.79917 2.61055,-2.18722 -0.10583,-0.0706 -1.55222,0.17639 -3.24555,0.59972 -3.4925,0.88194 -6.49111,2.54 -8.21972,4.51556 -1.37584,1.65805 -2.32834,1.97555 -3.13973,1.05833 -0.49389,-0.56444 -0.52916,-0.84667 -0.21166,-1.5875 0.84666,-1.76389 0.21166,-6.6675 -1.12889,-8.78417 -0.705564,-1.12889 -1.340564,-6.87917 -1.09362,-9.63083 0.246945,-2.2225 0.176389,-2.54 -0.493888,-3.21028 -0.670278,-0.67028 -0.740834,-1.16417 -0.776112,-4.30389 0,-2.46944 -0.246944,-4.23333 -0.705555,-5.67972 C 96.988477,101.5993 96.600422,99.835411 96.45931,98.812356 96.318199,97.7893 95.965422,96.484022 95.683199,95.919578 95.400977,95.319856 94.836533,93.450133 94.483755,91.7568 c -0.599722,-3.033889 -0.599722,-3.139722 0.03528,-3.704166 0.811389,-0.740834 1.622778,-3.316111 1.340555,-4.339167 -0.105833,-0.423333 0.03528,-1.869722 0.282223,-3.210278 0.282222,-1.340555 0.529166,-3.245555 0.529166,-4.233333 0,-1.763889 0,-1.799167 0.705556,-1.164167 0.599722,0.529167 0.811389,0.564445 1.763889,0.176389 1.763896,-0.740833 2.116676,-1.516944 1.587506,-3.4925 -0.49389,-1.905 -1.05834,-3.069166 -1.69334,-3.457222 -1.093611,-0.705555 -1.305278,-2.116666 -0.776111,-4.974166 0.917222,-4.7625 0.599722,-8.149167 -0.846667,-8.748889 -0.3175,-0.105833 -1.904999,-0.3175 -3.563055,-0.458611 l -2.963333,-0.211667 -0.105834,-3.175 c -0.141123,-3.845214 -0.4939,-5.150492 -1.834456,-7.302436 -1.375833,-2.151944 -2.575288,-2.928055 -4.480288,-2.822222 l -1.552222,0.07056 0.07055,-1.340555 c 0.07056,-1.975556 -0.246939,-3.598334 -1.305273,-6.173612 -0.493889,-1.27 -0.987777,-2.610555 -1.058333,-2.963333 -0.282222,-1.375833 -1.058333,-3.175 -1.834444,-4.233333 -0.458611,-0.599722 -0.811389,-1.27 -0.811389,-1.446389 0,-0.388056 -3.139722,-3.351389 -4.092222,-3.845278 -0.811389,-0.458611 -4.550834,-0.881945 -4.833056,-0.564445 z m 26.35251,79.798332 c -0.282222,0.317502 -0.776111,-0.423333 -0.599722,-0.917222 0.211667,-0.529166 0.246944,-0.493889 0.458611,0.105834 0.141111,0.352777 0.211667,0.740833 0.141111,0.811388 z m -20.249454,68.615272 1.5875,0.74084 0.599722,2.99861 c 1.375833,6.73805 1.164166,11.04194 -0.635,12.73528 -0.458611,0.42333 -0.846667,1.02305 -0.846667,1.30527 0,0.28223 -0.3175,0.91723 -0.705555,1.48167 -0.811389,1.16417 -1.023056,4.02167 -0.388056,5.57389 0.246945,0.56444 0.388056,1.79917 0.3175,2.75167 l -0.105833,1.72861 -2.116667,-3.13972 c -1.834444,-2.75167 -5.609166,-6.56167 -6.491111,-6.56167 -0.141111,0 -0.458611,-0.38806 -0.670278,-0.88195 -0.246944,-0.49388 -0.811388,-1.05833 -1.305277,-1.23472 -0.493889,-0.17639 -0.917223,-0.56444 -0.917223,-0.88194 -0.211666,-2.64584 -0.176388,-2.82222 1.128889,-4.23334 2.116667,-2.29305 7.373056,-11.71222 7.373056,-13.22916 0,-0.45861 0.881944,-0.24695 3.175,0.84666 z"
       id="path3"
       style="fill:currentColor;fill-opacity:1;stroke:none;stroke-width:0.0352778" />
  </g>
</svg>
`,A5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r
<svg\r
   width="2342"\r
   height="3750"\r
   viewBox="0 0 2342 3750"\r
   version="1.1"\r
   id="svg1"\r
   sodipodi:docname="mechant.svg"\r
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"\r
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r
   xmlns="http://www.w3.org/2000/svg"\r
   xmlns:svg="http://www.w3.org/2000/svg">\r
  <defs\r
     id="defs1" />\r
  <sodipodi:namedview\r
     id="namedview1"\r
     pagecolor="#ffffff"\r
     bordercolor="#000000"\r
     borderopacity="0.25"\r
     inkscape:showpageshadow="2"\r
     inkscape:pageopacity="0.0"\r
     inkscape:pagecheckerboard="0"\r
     inkscape:deskcolor="#d1d1d1"\r
     inkscape:zoom="0.21733333"\r
     inkscape:cx="1171.0123"\r
     inkscape:cy="1875"\r
     inkscape:window-width="1920"\r
     inkscape:window-height="1017"\r
     inkscape:window-x="-"\r
     inkscape:window-y="-8"\r
     inkscape:window-maximized="1"\r
     inkscape:current-layer="svg1" />\r
  <path\r
     fill-rule="nonzero"\r
     fill="#000000"\r
     fill-opacity="1"\r
     d="m 1179.4102,3716.9922 c -17.3907,-74.8555 -35.9414,-120.9844 -69.0313,-171.7774 -30.6094,-46.9726 -82.0898,-92.3789 -115.62499,-102 -9.15235,-2.625 -10.1875,-2.039 -14.46875,8.211 -2.53907,6.0703 -9.29688,27.6328 -15.01954,47.9101 -11.40625,40.4102 -25.3125,77.6563 -29,77.6563 -1.29296,0 -4.19531,-12.1133 -6.44921,-26.918 -6.85938,-45.0625 -25.47266,-111.832 -39.1875,-140.5703 -15.55469,-32.5898 -37.56641,-58.125 -60.26954,-69.918 -13.26171,-6.8906 -21.32421,-8.6875 -39.5039,-8.7929 -26.72266,-0.1563 -41.25781,5.8086 -60.45703,24.8164 -14.30469,14.164 -16.1836,14.9531 -16.28516,6.8594 -0.14062,-11.0079 -12.54687,-33.0313 -25.9375,-46.0235 -52.17578,-50.6328 -129.63672,-52.4961 -178.97266,-4.3008 -10.42578,10.1836 -21.48828,22.1836 -24.58203,26.6719 -5.5625,8.0625 -5.60937,7.9258 -4.17187,-11.4219 0.92187,-12.4336 11.65625,-51.1172 29.42578,-106.0351 62.49609,-193.1406 112.14844,-389.7969 155.69141,-616.6485 18.38671,-95.7812 35.44921,-222.3007 35.53125,-263.4609 l 0.0391,-17.1289 h -13.9961 c -32.30859,0 -86.14843,-21.6016 -135.19531,-54.2305 C 451.2891,2202.9102 384.21879,2073.8789 376.1602,1931.6914 l -2.07813,-36.6133 -92.28125,-185.9687 C 231.04687,1606.8203 167.20703,1474.6797 139.93359,1415.4609 76.816406,1278.4102 44.253906,1214.0586 17.546875,1173.6094 1.621094,1149.4805 -2.457031,1141.1289 1.300781,1140.3281 c 9.125,-1.9375 67.613281,12.9532 128.253909,32.6524 63.97656,20.789 114.91015,41.039 149.80859,59.5781 11.91406,6.3203 22.19141,10.9727 22.83203,10.332 0.64453,-0.6406 -6.85156,-34.75 -16.65625,-75.8008 -39.96484,-167.3398 -42.8164,-188.92964 -42.79297,-324.23043 0.0117,-82.66015 1.15625,-109.98046 5.83985,-139.60937 5.70703,-36.10156 23.48047,-112.28125 28.19531,-120.85156 2.13672,-3.87891 46.05469,69.26172 73.13281,121.80078 4.625,8.97265 11.3086,19.98047 14.85938,24.46094 l 6.44922,8.14843 7.98046,-17.9375 C 383.59375,709.01172 394.86328,683.32031 404.25,661.78125 442.76172,573.42969 496.08984,474 550.375,389.35156 c 9.78125,-15.26172 42.82031,-62.97265 73.42187,-106.04297 92.47657,-130.14843 130.32813,-180.25 132.13282,-174.89843 0.52734,1.57031 -3.46485,20.37109 -8.8711,41.78906 C 721.60937,251 718.21094,332 737.92187,367.83984 c 6.26954,11.39844 9.09766,13.5 19.33985,14.35157 15.53515,1.29687 20.58203,-1.5 82.62109,-45.72266 88.19531,-62.85938 122.33594,-82.6875 262.98829,-152.70703 50.1602,-24.97266 103.6289,-53.5 118.8008,-63.40234 40.8789,-26.64063 78.0976,-63.898442 97.6562,-97.757818 18.8321,-32.570312 19.3516,-32.203124 22.7032,16.007813 4.6406,66.839845 14.1093,105.718745 36.3984,149.460935 39.6289,77.75781 131.8516,149.3711 209.5,162.69141 26.8906,4.60937 41.2109,1.53906 61.5508,-13.20313 14.6797,-10.6289 35.6992,-47.6875 45.5781,-80.34765 10.5898,-35.05078 6.3516,-154.75 -7.5391,-212.890628 -0.9687,-4.039062 -0.3476,-7.339843 1.3711,-7.339843 5.0391,0 37.711,72.480471 57.3477,127.238281 9.9805,27.82031 29.4219,85.8125 43.2031,128.88281 29.3477,91.63672 46.9688,137.10938 72.8789,188.08985 19.2891,37.9375 83.0508,148.6289 89,154.48828 2.2188,2.1914 5.0313,0.57031 8.5195,-4.89844 19.4883,-30.47266 67.8711,-61.78125 106.2383,-68.76172 30.1407,-5.46875 31.6211,-2.66016 10.6211,20.03125 -22.9492,24.77734 -41.9375,63.57813 -49.4179,100.9375 -6.1602,30.76172 -5.543,104.87109 1.8984,228.39063 6.1016,101.17189 1.6406,283.24219 -8.4883,346.44139 l -1.9297,12.0078 35.5469,-20.2773 c 63.1797,-36.0625 178.2109,-81.5899 255.332,-101.082 17.0508,-4.3086 31.5782,-7.3204 32.3008,-6.6875 0.7188,0.6289 -6.7226,11.8085 -16.5312,24.8476 -42.1719,56.0508 -67.0704,92.3399 -95.8086,139.6328 -20.2422,33.3086 -84.3907,159.8594 -122.0118,240.6875 -34.7109,74.5703 -100.9687,208.5625 -127.4492,257.7422 l -23.3711,43.3789 8.5899,35.9297 c 16.332,68.2813 18.1992,120.6406 6.5,181.9883 -25.9492,136.0625 -111.0977,238.8125 -220.3477,265.8828 -25.1523,6.2305 -61.0625,6.8594 -84.3633,1.4805 -9.0976,-2.1016 -17.3789,-2.9805 -18.3984,-1.961 -4.8398,4.8282 8.7109,166.6875 23.0195,275.0703 17.5508,132.9375 27.0586,180.9141 70.461,355.5157 28.9687,116.5781 29.8789,119.8476 68.6992,247.1328 18.5117,60.7148 32.0703,110.7187 31.4101,115.8242 l -1.1796,8.9883 -4.2696,-8.5586 c -7.6523,-15.3281 -27.9804,-24.0664 -55.9804,-24.0664 -21.9102,0 -27.3789,1.3554 -49.5,12.2851 -29.7813,14.7227 -53.0586,38.4688 -58.8204,60.0157 -2.0898,7.7851 -4.5898,14.0351 -5.5585,13.8867 -0.9727,-0.1485 -9.1524,-9.2617 -18.1797,-20.2461 -20.6914,-25.1797 -39.4102,-35.2813 -69.2227,-37.336 -60.5976,-4.1835 -103.5703,40.6055 -123.25,128.4571 -9.0703,40.4883 -17.8281,95.0742 -17.8594,111.2929 -0.01,5.8321 -1.3086,10.6016 -2.8906,10.6016 -4.5898,0 -24.7695,-44.2031 -37.9805,-83.1992 -6.6875,-19.7383 -14.9375,-41.3984 -18.3476,-48.1367 l -6.1992,-12.2461 -11.3125,4.7226 c -43.5196,18.1836 -98.4805,81.2813 -124.461,142.8907 -14.9687,35.4882 -28.9883,82.4218 -37.3086,124.8437 -3.8711,19.7422 -8.1406,37.9609 -9.5,40.4883 -1.4882,2.8008 -5.8398,-9.9649 -11.1093,-32.625 z m 252.4492,-526.6289 c 3.8906,-143.336 6.4297,-182.332 19.8515,-305.0625 18.1993,-166.4805 34.3594,-261.8906 58.8282,-347.4727 14.3515,-50.1875 37.332,-110.7578 52.6015,-138.6679 5.3985,-9.8711 7.5391,-15.7383 4.7696,-13.0508 -6.1797,6.0117 -51.3204,90.9023 -63.0313,118.5195 -56.9883,134.5508 -90.5781,340.2422 -97.3281,596.0117 -3.1602,119.4805 5.8008,284.1328 17.1094,314.8203 1.3281,3.6055 2.7382,-17.6718 3.1289,-47.2812 0.3906,-29.6094 2.2304,-109.625 4.0703,-177.8164 z m -476.23831,206.4961 c 0,-2.168 2.36719,-23.0938 5.25782,-46.4922 4.29687,-34.7774 4.93359,-63.4024 3.49218,-156.7422 -1.72656,-111.3477 -5.07812,-159.8398 -20.32031,-293.6406 -22.0625,-193.7344 -77.27344,-378.336 -148.32812,-495.9727 -9.19532,-15.2304 -17.26172,-27.6914 -17.92188,-27.6914 -0.66016,0 3.71484,10.6485 9.72266,23.6602 36.0039,77.9804 83.30859,259.0898 109.29297,418.4375 28.6875,175.9179 46.22265,350.1601 50.98046,506.5312 1.26563,41.7227 3.54688,75.8594 5.06641,75.8594 1.51563,0 2.75781,-1.7773 2.75781,-3.9492 z m 707.76951,-177.1328 c -3.2617,-23.3282 -9.0117,-67.375 -12.789,-97.8789 -12.5821,-101.6602 -23.0625,-175.3789 -37.543,-264.2774 -7.8984,-48.4531 -16.0703,-100.207 -18.168,-115.0117 -9.4101,-66.6992 -7.3203,-3.0469 3.7891,115.0117 8.3789,88.9766 17.1406,155.0156 30.7617,231.7617 16.3399,92.086 35.4883,177.8164 38.8594,173.9766 0.5586,-0.6406 -1.6406,-20.2539 -4.9102,-43.582 z m -949.50779,-83.1953 c 16.32422,-93.6016 27.94922,-209.0079 31.05078,-308.3243 1.99219,-63.6757 -0.17187,-59.7031 -12.4375,22.836 -11.72656,78.9179 -28.77734,273.2695 -27.84375,317.375 0.34766,16.3008 1.54688,12.1523 9.23047,-31.8867 z m 514.98829,-8.211 c 22.2187,-19.0234 25.4883,-43.332 8.8008,-65.5586 -16.1133,-21.4648 -45.2617,-26.3398 -66.6133,-11.1367 -38.3867,27.3398 -18.0898,88.168 29.4414,88.168 12.3984,0 17.2617,-1.9649 28.3711,-11.4727 z m -13.7617,-365.2578 c 18.5625,-10.875 33.1406,-28.2422 45.1797,-53.793 8.6718,-18.3906 10.0625,-24.9882 9.9922,-47.4609 -0.1016,-30.0078 -6.9805,-48.8867 -26.5196,-72.7383 -42.4531,-51.8008 -123.2617,-33.3008 -142.8711,32.6914 -6.3203,21.2891 -6.3906,61.8086 -0.1523,82.8281 16.9101,56.9336 70.3711,84.2618 114.3711,58.4727 z m 110.8203,-103.7031 c 13.6289,-29.9688 22.25,-69.7578 22.4609,-103.5899 0.1602,-26.8281 -0.9687,-33.4804 -8.3906,-49.5078 -18.2109,-39.3125 -52.2109,-64.4336 -90.9414,-67.2031 -21.3672,-1.5273 -22.9492,-1.0977 -49.7695,13.5195 -34.418,18.7617 -47.1289,19.6836 -67.5703,4.8711 -45.0391,-32.6289 -88.5391,-30.6875 -124.0782,5.5196 -7.82419,7.9726 -15.46873,14.5 -16.98826,14.5 -3.83984,0 -17.79687,-31.668 -20.48047,-46.4688 -2.41796,-13.3203 0.16016,-28.5703 4.82422,-28.5703 1.61328,0 6.10938,9.5391 9.99219,21.1992 3.87891,11.6719 7.77344,21.2109 8.65234,21.2109 0.87891,0 8.46878,-5.789 16.85938,-12.8789 21.6719,-18.2617 43.0195,-26.9296 66.3906,-26.9296 16.3203,0 24.3086,2.3906 51.0313,15.1992 l 31.6875,15.1992 24.4297,-10.4688 c 55.5898,-23.8007 110.25,-13.0898 153.3711,30.0274 16.539,16.543 32.2812,44.8125 35.9101,64.4726 1.8594,10.0704 2.5899,10.8594 4.8516,5.3204 30.8398,-75.6719 66.789,-146.0704 97.039,-190.0313 23.0274,-33.4492 56.0079,-63.6211 79.6172,-72.8398 17.2735,-6.7383 24.9414,-7.4883 81.0625,-7.9297 66.7188,-0.5196 81.5196,-2.8907 114.4492,-18.2696 44.629,-20.8515 80.8985,-57.6914 105.6993,-107.3515 26.0507,-52.1797 34.0898,-90.3711 34,-161.5 -0.078,-57.7891 -3.25,-84.5899 -19.6993,-166.3985 -21.1679,-105.3515 -21.4609,-171.0312 -1.289,-290.3593 19.039,-112.6211 19.1992,-140.1211 1.2578,-213.6133 -25.0586,-102.6367 -62.8984,-173.5195 -126.4375,-236.8399 -57.4922,-57.289 -123.7109,-96.88668 -205.8594,-123.07809 C 1489.1992,921 1462.5703,916.85156 1422.0781,918.5 c -38.1992,1.57031 -54.3086,7.64062 -80.7578,30.46094 -25.0586,21.61718 -48.6406,78.78906 -76.5586,185.61716 l -7.6015,29.0703 -13.4297,-22.5898 c -30.0899,-50.6602 -95.6211,-94.6602 -190.2305,-127.7383 -85.77734,-29.99999 -150.83984,-40.78905 -244.69922,-40.62108 -76.19531,0.15234 -114.875,5.90234 -168.39062,25.01953 C 568,1023.6016 519.32422,1062.7109 494.09375,1115.3008 c -26.625,55.4805 -32.33984,108.2773 -29.84375,275.6875 1.03125,69.0898 1.22656,124.1523 0.43359,122.3515 -1.96875,-4.4609 -23.82422,-162.3203 -27.78125,-200.6484 -4.76953,-46.2617 -4.02734,-122.2812 1.50782,-154.0117 5.64453,-32.3594 24.76562,-89.2305 37.05468,-110.1992 11.125,-18.9805 42.41407,-56.30081 60.10157,-71.67191 56.8164,-49.38672 122.34375,-72.59765 223.70312,-79.23828 48.76953,-3.19922 56.28906,-4.39844 54.91016,-8.80859 -0.87891,-2.82031 -8.45703,-21.89063 -16.84375,-42.39063 -16.83985,-41.16015 -28.78516,-89.58984 -34.03516,-137.97265 -4.05859,-37.38672 -4.15625,-96.07813 -0.17578,-105.33985 2.27344,-5.29687 2.84766,-4.29687 3.03516,5.26172 0.32812,16.98828 18.11718,113.19141 27.84375,150.60938 13.96875,53.71093 46.52343,139.12109 53.20312,139.55078 1.30859,0.0898 17.79688,2.10937 36.63672,4.5 18.84375,2.3789 34.63672,4.00781 35.10156,3.62109 0.46485,-0.39062 -3.46875,-11.17187 -8.73828,-23.96094 -19.42969,-47.10937 -42.05859,-133.53906 -50.56641,-193.12109 -9.62109,-67.39062 -15.23828,-183.39844 -9.0664,-187.21094 1.4375,-0.88672 6.70312,25.8125 11.69922,59.35157 23.42968,157.30859 33.05078,203.39843 59.07422,283.01171 22.79296,69.73829 15.39062,61.48829 71.80859,80.06641 68.50395,22.57031 126.62505,52.65234 179.18355,92.76172 15.2188,11.6211 29,21.1211 30.6094,21.1211 1.6602,0 1.8711,-6.7109 0.4805,-15.5 -1.3399,-8.5195 -4.1289,-42.66016 -6.1992,-75.85157 -4.211,-67.67969 -13.3907,-162.50781 -23.0196,-237.94922 -3.5312,-27.6914 -5.8125,-50.96094 -5.0625,-51.71094 2.6329,-2.6289 21.5235,63.10157 27.9414,97.16016 10.8399,57.55078 13.3516,89.08203 15.2188,190.87109 1.582,86.71098 2.4922,99.51958 8.0195,112.32028 3.5235,8.1485 7.4102,13.1289 8.9102,11.418 1.4726,-1.6601 6.0625,-16.2383 10.1914,-32.3906 8.3789,-32.7578 21.4922,-68.63674 43.7187,-119.67971 23.7618,-54.58984 26.293,-68.78906 26.3008,-147.85937 0,-72.57813 -3.4883,-115.6875 -16.6289,-205.55078 -8.9492,-61.12891 -38.0312,-207.4375 -51.8906,-261.00782 -0.9414,-3.62109 0.7617,-2.21093 3.8008,3.16797 27.3593,48.26172 59,171.13282 77.75,301.89063 16.039,111.92969 17.7187,172.16015 6.4609,231.65234 -2.5508,13.45703 -4.6328,24.53906 -4.6328,24.62891 0,0.0781 10.9297,-5.17969 24.293,-11.69922 28.3984,-13.85156 65.2773,-22.72266 94.457,-22.72266 48,0 110.8711,16.92188 167.3633,45.05078 107.2695,53.40235 184.0195,129.41013 239.457,237.17193 23.1524,45 22.8399,41.4101 -4.0781,-47.3125 -30.4492,-100.32818 -36.75,-134.62896 -36.5625,-199.01958 0.1133,-39.21094 1.5117,-57.82031 5.1211,-68.50781 l 4.9609,-14.67188 2.2305,26.08984 c 6.1992,72.40235 17.6484,138.17969 34.539,198.40233 19.6016,69.8867 42.5704,175.5899 48.879,224.8672 3.621,28.2422 6.9531,74.7422 7.4101,103.3399 0.4609,28.6093 1.8399,50.2304 3.0703,48.0507 3.5391,-6.3007 21.5899,-120.7187 25.5508,-161.9414 5.9102,-61.6679 7.8984,-226.61716 3.4492,-287.11716 -7.3398,-99.88282 -29.6797,-190.25 -63.3789,-256.3711 l -14.832,-29.10937 -0.2188,22.83984 c -0.3007,31.21094 -5.9492,82.60938 -9.8007,89.21094 -2.2774,3.89062 -3.1875,-0.53125 -3.2696,-15.80078 -0.2773,-54.83985 -15.8906,-108.83985 -55.6484,-192.5 -28.582,-60.14063 -49.2813,-109.46875 -60.2617,-143.55078 -3.1797,-9.8711 -6.2383,-18.48828 -6.8086,-19.14844 -0.5703,-0.67188 -7.3516,4.20703 -15.0586,10.83984 -17.2422,14.8086 -53.8321,32.5586 -76.9922,37.34766 -24.9688,5.17187 -69.1797,4.40234 -95.8594,-1.66797 -44.8008,-10.19141 -83.2305,-29.62109 -128.289,-64.87109 -62.4219,-48.83985 -93.2305,-93.89063 -108.1211,-158.08985 -2.7305,-11.73828 -5.4883,-21.89062 -6.1485,-22.55078 -0.6523,-0.64844 -13.3906,5.44141 -28.2929,13.53906 -14.8985,8.10157 -59.3985,28.65235 -98.879,45.66016 -174.10152,75.03125 -254.00386,120.72266 -363.22261,207.74219 -27.48047,21.89844 -55.1836,41.98828 -61.56641,44.66015 -29.54687,12.33985 -66.04687,-8.82031 -87.19531,-50.55078 -8.75391,-17.26953 -18.125,-57.89062 -18.33985,-79.48047 l -0.13671,-14.00781 -7.89063,22.83985 c -17.38281,50.32031 -21.99219,78.25 -21.80859,132.13671 0.35937,104.04297 24.70312,220.21094 67.28906,321.10157 18.46875,43.76172 18.64453,44.32031 13.90625,44.32031 -4.48047,0 -25.25391,-32.60938 -41.46875,-65.08984 -23.32422,-46.73047 -51.96094,-131.92969 -66.39844,-197.55079 -7.16797,-32.58984 -12.86328,-95 -10.41406,-114.17968 l 2.08203,-16.32813 -13.63281,22.83985 c -31.75391,53.17968 -63.24219,126.92968 -97.83594,229.16015 -26.28906,77.66797 -34.85547,96.83985 -50.46484,112.91797 -14.48438,14.91016 -27.87891,15.98047 -41.14063,3.26953 l -9.02344,-8.64844 1.48047,11.09766 c 0.81641,6.10156 3.76953,34.58203 6.5625,63.29297 2.79297,28.71875 9.60938,82.30855 15.14844,119.08985 9.47266,62.8789 10.16406,73.918 11.5625,184.3398 0.82031,64.6094 0.75781,116.7305 -0.13281,115.8282 -1.8711,-1.8789 -9.66016,-66.4805 -17.10938,-141.9297 C 367.98047,1046.4102 353.51953,961.58984 326.375,865.69922 317.48437,834.30078 308.64844,802 306.74219,793.92187 c -5.32813,-22.52343 -1.75,137.27735 4.45703,199.01954 6.73047,66.99999 18.66406,146.99999 30.90625,207.17969 11.53125,56.6875 11.94922,58.207 46.29687,167.8281 58.89063,187.9727 70.33594,263.5508 66.24219,437.4102 -1.89844,80.4492 -1.42969,94.2695 4.52344,133.7617 17.55078,116.418 61.64453,200.2383 134.25781,255.2187 45.15234,34.1915 91.67969,50.8711 151.75391,54.4219 49.69922,2.9297 58.85156,6.5196 89.80078,35.168 21.3789,19.8008 68.35547,80.6797 107.24609,138.9805 35.01563,52.5 72.19534,128.8711 92.39454,189.7812 l 17.25,52.0391 1.9375,-28.1211 c 1.4531,-21.0391 4.1211,-32.5899 10.6406,-45.9102 22.8399,-46.6679 83.3594,-77.1679 134.5508,-67.8086 54.8984,10.0313 93.3086,47.8985 105.3203,103.8399 8.9883,41.8789 10.9414,49.7578 12.3399,49.7578 0.8086,0 4.9804,-7.707 9.2695,-17.1289 z m -159.8594,-285.9375 c -29,-7.5508 -63.1211,-34.8516 -80.9414,-64.7617 -8.3594,-14.0196 -11.707,-17.1016 -16.9375,-15.6094 -3.5898,1.0195 -23.7812,3.5195 -44.8711,5.539 -21.082,2.0313 -38.33202,4.9297 -38.33202,6.4493 0,7.6406 -7.60937,1.1523 -13.01953,-11.0977 -23.05078,-52.1719 2.92187,-130.7226 50.54295,-152.8516 18.8594,-8.7617 33.6602,-7.8398 51.0469,3.1915 24.3633,15.4375 35.1211,39.8789 41.832,95.0078 1.8594,15.25 5.6211,34.3398 8.3477,42.4218 6.3515,18.75 24.8828,44.0586 38.3711,52.3907 17.582,10.8593 24.1211,11.1484 38.332,1.75 25.8477,-17.1016 42.2969,-49.3321 48.6172,-95.2032 4.793,-34.75 11.6328,-54.1992 25.4297,-72.2773 l 11.5508,-15.1211 -8.3985,-7.2187 c -16.9101,-14.543 -1.1601,-14.9415 32.7305,-0.8399 41.1484,17.1367 59.3906,41.7969 68.1992,92.2383 5.211,29.7891 1.8594,69.6601 -7.3594,87.4609 -5.0312,9.7383 -5.6992,10.0782 -8.1914,4.0977 -1.5,-3.5664 -5.6211,-13.4492 -9.1601,-21.9375 l -6.4297,-15.4414 -15.6406,6.9219 c -15.9883,7.0781 -45.8203,9.75 -58.1602,5.1992 -5.75,-2.1094 -7.2187,-0.4492 -11.0703,12.5898 -6.1602,20.8711 -22.0469,40.7305 -39.418,49.2578 -16.5,8.1016 -42.4023,11.6602 -57.0703,7.8438 z m 158.2383,-113.9922 c 23.1133,-16.668 24.582,-48.5195 3.2227,-69.8906 -16.211,-16.1993 -26.4297,-16.2188 -41.6524,-0.09 -19.6992,20.8906 -26.3789,49.5 -15.2578,65.3711 9.8594,14.0899 37.2891,16.4414 53.6875,4.6094 z m -255.8789,1.1797 c 8.5508,-3.5781 13.1406,-8.6094 18.1406,-19.9102 7.4688,-16.8789 6.4805,-30.4375 -3.6601,-50.1992 -17.2813,-33.6992 -45.5586,-37.0781 -64.9688,-7.7812 -17.1211,25.8515 -16.2812,46.3203 2.6484,64.4531 7.1993,6.8984 26.3399,16.6562 35.4688,18.0781 0.5,0.078 6.0703,-2.0117 12.3711,-4.6406 z m -385.56251,-65.1289 c -22.03125,-5 -47.78907,-17.0391 -69.1836,-32.3399 -17.65234,-12.6211 -45.46875,-49.0195 -60.24609,-78.832 -17.97656,-36.2695 -17.69922,-41.1367 0.93359,-16.3086 48.14453,64.1406 95.76953,97.1406 167.28125,115.8906 18.02735,4.7188 27.52735,8.6602 25.58594,10.5977 -5.19141,5.1914 -43.3125,5.7812 -64.37109,0.9922 z m 926.86331,-3.4024 c -37.211,-8.0976 -88.6914,-33.207 -105.9492,-51.6797 -5.2305,-5.5976 -8.9727,-10.707 -8.3204,-11.3593 0.6485,-0.6485 14.1602,3.2226 30.0196,8.6015 66.8593,22.6602 132.289,27.9805 175.6679,14.3086 41.6016,-13.1094 92.711,-47.6289 120.6914,-81.5078 13.4493,-16.2812 15.8204,-12.6211 5.3204,8.1797 -44.0704,87.3086 -130.4805,132.3984 -217.4297,113.457 z m -395.0196,-32.7187 c 5.2696,-20.5313 8.2383,-114.668 4.8399,-153.7305 -3.6719,-42.0898 -2.0195,-105.2695 2.9805,-114.1992 1.8085,-3.2383 6.1484,5.9609 13.5703,28.8086 6,18.4609 13.3398,39.3203 16.3203,46.3633 l 5.4062,12.789 7.3711,-11.9218 c 18.8906,-30.5586 127.1602,-124.4883 232.0313,-201.2969 167.7578,-122.8633 214.2695,-150.0508 256.6797,-150.0508 22.6914,0 33.6992,9.3789 33.6992,28.7187 0,17.2813 -12.3008,33.4102 -44.0508,57.7383 -14.0469,10.7735 -30.8086,24.4922 -37.2383,30.5117 -11.1289,10.3907 -11.1914,10.6016 -1.5,4.1407 24.6914,-16.4297 93.0586,-49.3321 102.5078,-49.3321 15.8516,0 10.9922,9.3829 -11.5781,22.3516 -124.8906,71.7813 -165.8711,100.8984 -235.0508,167.0313 -24.0976,23.039 -53.5586,48.8398 -65.4687,57.3398 l -21.6524,15.4492 14.25,4.1992 c 26.711,7.8907 61.711,11.8789 88.2305,10.0586 67.9727,-4.6562 113.3828,-51.289 135.0117,-138.6562 4.1602,-16.7813 9.3086,-32.6133 11.4414,-35.1914 3.9492,-4.7617 35.1172,-15.5117 56.7188,-19.5586 l 11.8984,-2.2305 -1.9375,35.457 c -4.4805,82.4414 -14.3398,131.7618 -34.8125,174.1329 -45.7305,94.6601 -168.3984,138.3593 -277.6992,98.9296 -42.5,-15.332 -90.9688,-54.0898 -113.1797,-90.5312 -6.9883,-11.4688 -8.1602,-12.1914 -11.2617,-6.8984 -26.3164,44.8281 -66.0664,65.5468 -101.8985,53.1093 l -13.5898,-4.7304 0.4883,42.7617 c 0.5312,46.457 -4.6875,72.5078 -17.4883,87.2265 -6,6.9024 -6.5391,7.0313 -5.0391,1.211 z M 1629.5,2047.7383 c 14.4297,-5.1289 33.1094,-13.3399 41.5,-18.2578 19.5117,-11.4414 51.1602,-40.8086 59.2109,-54.9492 5.2696,-9.2696 4.0977,-8.5625 -7.6992,4.6484 -16.4023,18.3789 -46.2109,40.1406 -73.5703,53.7305 -26.3828,13.1093 -37.6016,16.4609 -73.6719,22.0312 l -30.7304,4.7383 29.3593,-1.3086 c 21.461,-0.9609 36.4297,-3.8203 55.6016,-10.6328 z m -896.38281,28.293 c -45.44141,-11.1719 -85.6875,-31.5196 -118.67969,-60 -33.39453,-28.8399 -64.13672,-85.75 -77.66016,-143.793 -6.39843,-27.457 -18.75781,-103.457 -17.09375,-105.1172 2.60938,-2.6094 49.9961,10 59.69532,15.8789 10.66015,6.4688 11.28515,7.7695 28.79296,59.8711 11.84766,35.2695 24.22657,56.1289 44.92188,75.6992 45.03516,42.5899 113.66797,55.7695 180.57031,34.6797 l 17.51953,-5.5195 -16.6914,-9.1289 c -21.45313,-11.7305 -38.53125,-25.7618 -82.77735,-68.0118 -59.21875,-56.5585 -87.95703,-76.1406 -191.6914,-130.6289 -31.85157,-16.7421 -57.91407,-31.6601 -57.91407,-33.1718 0,-1.5078 3.64454,-4.1289 8.10157,-5.8203 11.37109,-4.3282 33.42968,3.3007 85.69922,29.621 23.77734,11.9688 43.23046,21.25 43.23046,20.6094 0,-0.6406 -20.92187,-14.9297 -46.49218,-31.75 -48.83594,-32.1406 -58.57422,-40.5195 -64.14063,-55.2109 -4.17578,-11.0195 -0.77344,-20.8164 11.04688,-31.8086 7.96093,-7.3984 11.40625,-8.1602 37.05078,-8.1602 27.66797,0 29.08984,0.4024 65.80078,18.211 41.65234,20.2109 87.77734,48.4101 182.71094,111.7109 117.4414,78.3203 193.72261,143.1367 237.75391,202.0391 6.3594,8.5078 12.6484,14.3789 13.9687,13.0508 1.3204,-1.3399 7.4805,-17.5821 13.6915,-36.0899 6.1992,-18.5195 12,-34.3906 12.8789,-35.2695 3.8593,-3.8633 5.5898,45.0976 2.3711,67.2969 -5.6602,39.121 -25.5508,61.9609 -53.961,61.9804 -18.6719,0.02 -33.9609,-9.3906 -48.2305,-29.6679 -6.81636,-9.6915 -13.42183,-17.8516 -14.67964,-18.1329 -1.26172,-0.2773 -9.63282,8.0899 -18.60547,18.6016 -29.4961,34.5313 -90.2461,70.5 -135.14844,80.0195 -29.51172,6.2618 -71.875,5.4297 -102.03906,-1.9882 z m 101.98047,-32.9024 c 23.76562,-5.9805 58.53515,-20.0781 58.53515,-23.75 0,-0.6484 -8.82031,2.3711 -19.60156,6.7305 -10.78125,4.3515 -30.85156,10.789 -44.59766,14.3008 -23.10937,5.9101 -32.80468,9.6406 -25.05859,9.6406 1.75,0 15.57812,-3.1094 30.72266,-6.9219 z M 1060.0313,1744.5508 C 999.94531,1685.6406 863.01172,1611.5586 626.08984,1509.7891 l -17.9414,-7.711 13.50781,-0.078 c 43.24219,-0.25 165.47266,47.5 279.54297,109.1914 76.83984,41.5586 139.81248,86.8477 164.99218,118.668 9.5899,12.1211 21.4492,36.6914 17.3281,35.9101 -1.2578,-0.2382 -11.8281,-9.789 -23.4882,-21.2187 z m 159.9375,-3.2813 c 0.2109,-35.8906 25.6015,-61.6797 92.8007,-94.2382 138.8203,-67.25 229.6524,-108.0704 272.2188,-122.3321 34.3125,-11.5 46.6328,-12.7187 28.0117,-2.789 -7.1406,3.8203 -33.5508,18.7695 -58.6797,33.2187 -65.8789,37.9024 -101.832,57.1094 -182.6992,97.6406 -84.543,42.3516 -116.9023,62.3594 -136.9922,84.6993 l -14.7305,16.3906 z m -37.5899,-133.4297 -9.7891,-4.4804 14.9102,-0.1485 c 32.9805,-0.3203 66.8398,-17.4101 106.6289,-53.8125 23.25,-21.2773 27.6211,-17.4101 9,7.9532 -31.1601,42.4375 -87.168,65.8672 -120.75,50.4882 z M 1124.4219,1479 c -18.8633,-4.75 -60.6602,-27.5703 -57.0821,-31.1484 0.6407,-0.6407 10.629,2.707 22.211,7.4375 29.9609,12.2304 72.0078,12.0625 109.1406,-0.461 14.3594,-4.8281 29.5391,-11.0195 33.7305,-13.7383 10.957,-7.1015 12.9375,-2.5507 4.9297,11.3086 -11.1602,19.293 -30.8399,27.4922 -68.961,28.6914 -17.4297,0.5508 -37.2187,-0.3906 -43.9687,-2.0898 z M 432.74609,1028.1016 c 1.48047,-42.71098 8.55469,-119.91019 14.42578,-157.51176 l 4.07813,-26.10156 2.34766,14.69141 c 4.03906,25.23047 3.04296,77.64843 -2.16407,113.76953 -6.52734,45.28128 -14.57812,86.23048 -17.57812,89.41018 -1.3125,1.3906 -1.8125,-14.0196 -1.11328,-34.2578 z m 22.1211,8.8867 c 19.54687,-57.41018 40.63672,-145.94924 56.73437,-238.16799 7.20703,-41.28125 14.07813,-79.85156 15.27735,-85.71875 4.67578,-22.9414 7.85937,-12.38281 7.85937,26.07813 0,91 -20.74219,193.60937 -52.28906,258.66015 -12.03516,24.80856 -32.67578,54.10936 -27.58203,39.14846 z m 685.09371,-71.77736 c -16.6601,-35.24219 -45.4726,-111.69922 -60.8515,-161.5 -19.3594,-62.65235 -88.47659,-329.74219 -85.9844,-332.23047 2.48828,-2.49219 23.8164,47.35937 39.3047,91.84765 21.5703,61.96094 46.4805,146.8125 74.8789,255.0625 13.6523,52.03907 30.7227,111.9375 37.9297,133.09766 7.2109,21.17188 12.4531,40.26172 11.6406,42.42188 -0.8203,2.16015 -8.4297,-10.75 -16.918,-28.69922 z M 593.96875,876.30859 c -8.24609,-15.77734 -17.69922,-78.3789 -10.6875,-70.80859 2.85156,3.07812 19.97266,65.41016 19.97266,72.69922 0,5.76953 -5.90235,4.57031 -9.28516,-1.89063 z m 394.95312,-11.4375 c -9.93359,-11.96093 -25.72656,-69.1914 -20.0664,-72.6914 2.60937,-1.6211 10.59375,17.80078 20.83594,50.67968 3.07421,9.8711 6.16406,19.78125 6.86718,22.01954 1.64844,5.28125 -3.26172,5.26953 -7.63672,0 z M 701.69922,804.51953 C 687.97656,768.75 684.83203,755.64062 685.04687,735.19141 c 0.14844,-14.28125 0.79688,-16.42188 3.1875,-10.46094 2.51954,6.26953 19.28907,73.1289 24.51563,97.73828 3.04687,14.35156 -1.49219,6.98047 -11.05078,-17.94922 z m 833.41018,10.10156 c -1.0781,-6.90234 -4.9805,-47.05078 -8.668,-89.21093 -7.0117,-80.14063 -14.6914,-136.42969 -27.0312,-198.21875 -4.0391,-20.17969 -6.4805,-36.70313 -5.4297,-36.70313 3.8281,0 26.2812,57.90234 34.1601,88.08984 20.3477,77.92188 28.1992,172.8711 18.4883,223.35157 -4.7187,24.4414 -8.9687,29.1289 -11.5195,12.6914 z m -74.8906,-54.14062 c -1.0274,-7.62891 -2.6485,-25.60938 -3.6094,-39.96875 l -1.75,-26.10156 5.3906,11.41796 c 6.2188,13.19141 10.3594,68.51172 5.1211,68.51172 -1.8125,0 -4.1328,-6.23047 -5.1523,-13.85937 z m 254.5195,-97.87891 c -1.8594,-35.38281 -7.5195,-76.32031 -18.3594,-132.58203 -4.6875,-24.34766 -4.2891,-26.26953 3.1406,-15.05859 7.6211,11.5 20.8516,50.78906 26.1524,77.64843 7.039,35.64063 2.707,109.96094 -6.4024,109.96094 -1.3398,0 -3.3789,-17.99219 -4.5312,-39.96875 z m -38.0586,-36.71094 c 0,-33.67187 0.8086,-41.26953 4.0703,-38.01171 2.75,2.74218 4.0781,15.21093 4.0781,38.01171 0,22.78907 -1.3281,35.26954 -4.0781,38.00782 -3.2617,3.26172 -4.0703,-4.32813 -4.0703,-38.00782 z M 417.36719,1744.5586 c -14.4336,-199.7891 -75.11328,-338.3398 -190.38672,-434.668 -39.04688,-32.6406 -130.617189,-91.7304 -135.132814,-87.2187 -1.113281,1.1172 2.4375,6.7695 7.886719,12.5781 28.312495,30.1602 113.593745,153.4102 160.898435,232.5 49.9375,83.5195 125.22656,236.8789 148.55078,302.6211 4.95313,13.9492 9.60938,24.7695 10.34375,24.0273 0.73828,-0.7265 -0.23437,-23.1601 -2.16015,-49.8398 z m 1481.08201,10.2227 c 24.5899,-73 102.6211,-221.3321 167.3594,-318.1094 46.8203,-69.9922 93.2305,-129.211 136.9805,-174.7735 26.1914,-27.2773 31.7812,-35.8086 16.3125,-24.8984 -4.9414,3.4883 -16.6016,10.1797 -25.9219,14.8711 -29.8399,15.0391 -102.8594,66.0195 -132.3008,92.3789 -77.0976,69.0391 -139.5898,174.3906 -166.0898,280.0195 -5.0703,20.1719 -6.9493,41.3203 -8.2891,92.9922 -1.0586,40.6797 -0.5586,65.6094 1.2617,63.6172 1.6485,-1.7891 6.4571,-13.5391 10.6875,-26.0976 z m 0,0"\r
     id="path1"\r
     inkscape:highlight-color="#aaaaaa"\r
     style="fill:#ffffff;fill-opacity:1" />\r
</svg>\r
`,P5="#87CEFA",T5="#FF0000";function M0(i){const e=i.match(/viewBox\s*=\s*"([^"]+)"/i),t=i.match(/<path[^>]*\sd="([^"]+)"[^>]*>/i);if(!e||!t)throw new Error("Cannot parse SVG path/viewBox from source.");const s=t[0].match(/transform="([^"]+)"/i);return{d:t[1],transform:s?s[1]:void 0,viewBox:e[1]}}const E5=M0(C5),M5=M0(A5);function R5(i){return i==="player"?P5:T5}function I5(i){const e=i==="player"?E5:M5,t=R5(i),s=e.transform?` transform="${e.transform}"`:"";return[`<svg viewBox="${e.viewBox}" xmlns="http://www.w3.org/2000/svg" style="background:none">`,"<g>",`<path d="${e.d}"${s} fill="${t}" />`,"</g>","</svg>"].join("")}function Wc(i){const e=I5(i);return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}const R0="token-player-svg",I0="token-enemy-svg";async function F5(){const i=[{alias:R0,src:Wc("player")},{alias:I0,src:Wc("enemy")}];for(const e of i)Qi.add(e);await Qi.load(i.map(e=>e.alias))}const L5=["./brute.json","./archer.json","./assassin.json","./ghost.json"],Q1={types:L5},z5="brute",B5="Brute",j5="Frontliner robuste qui avance pour engager le joueur.",D5="brute",O5={hp:10,moveRange:3,attackDamage:2,armorClass:14,attackRange:1,maxAttacksPerTurn:2},N5={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},$5={shape:"cone",range:4,apertureDeg:90,canSeeInDark:!1},U5={id:z5,label:B5,description:j5,aiRole:D5,baseStats:O5,movement:N5,vision:$5},W5="archer",G5="Archer",H5="Tireur qui prefere garder une distance de securite avant de frapper.",V5="archer",Y5={hp:7,moveRange:2,attackDamage:2,armorClass:13,attackRange:6,maxAttacksPerTurn:1},X5={type:"ground",speed:2,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},q5={shape:"cone",range:15,apertureDeg:60,canSeeInDark:!1},K5={id:W5,label:G5,description:H5,aiRole:V5,baseStats:Y5,movement:X5,vision:q5},Q5="assassin",Z5="Assassin",J5="Frappeur rapide qui cherche a se rapprocher pour porter un coup decisif.",ex="assassin",tx={hp:6,moveRange:3,attackDamage:3,armorClass:15},nx={type:"ground",speed:3,canPassThroughWalls:!1,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},rx={shape:"cone",range:6,apertureDeg:80,canSeeInDark:!1},ix={id:Q5,label:Z5,description:J5,aiRole:ex,baseStats:tx,movement:nx,vision:rx},sx="ghost",ox="Fantome",ax="Esprit intangible capable de traverser les autres creatures.",lx="ghost",ux={hp:8,moveRange:4,attackDamage:3,armorClass:12},cx={type:"ghost",speed:4,canPassThroughWalls:!0,canPassThroughEntities:!0,canStopOnOccupiedTile:!1},hx={shape:"circle",range:6,canSeeInDark:!0},dx={id:sx,label:ox,description:ax,aiRole:lx,baseStats:ux,movement:cx,vision:hx},fx=["./melee-strike.json","./dash.json","./second-wind.json","./throw-dagger.json"],Z1={actions:fx},px="melee-strike",mx="Frappe basique",gx="Attaque de melee simple contre une cible a 1 case.",yx="attack",xx={actionType:"action",movementCost:0},vx={target:"enemy",range:{min:0,max:1,shape:"single"},maxTargets:1,requiresLos:!0},_x={perTurn:1,perEncounter:null,resource:null},wx=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_max",target:"primary",max:1,reason:"Portee de melee uniquement."},{type:"target_alive",target:"primary",reason:"La cible doit avoir des PV restants."}],Sx={bonus:5,critRange:20},kx={formula:"1d6+3",critRule:"double-dice",damageType:"slashing"},bx=[{type:"damage",target:"primary",formula:"1d6 + modFOR",damageType:"slashing"},{type:"log",message:"Frappe basique inflige 1d6+FOR a la cible."}],Cx={priority:"finish_low_hp_target",successLog:"Attaque de melee effectuee.",failureLog:"Cible hors portee ou deja a terre."},Ax=["martial","arme","starter"],Px={id:px,name:mx,summary:gx,category:yx,actionCost:xx,targeting:vx,usage:_x,conditions:wx,attack:Sx,damage:kx,effects:bx,aiHints:Cx,tags:Ax},Tx="dash",Ex="Course",Mx="Transforme l'action en 3 cases de mouvement en plus.",Rx="movement",Ix={actionType:"action",movementCost:0},Fx={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},Lx={perTurn:1,perEncounter:null,resource:null},zx=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."}],Bx=[{type:"modify_path_limit",target:"self",delta:3,duration:"this_turn"},{type:"log",message:"Course: +3 cases de mouvement pour ce tour."}],jx={priority:"close_gap",successLog:"Course utilisee pour approcher.",failureLog:"Deja a portee, course ignoree."},Dx=["mobilite","deplacement"],Ox={id:Tx,name:Ex,summary:Mx,category:Rx,actionCost:Ix,targeting:Fx,usage:Lx,conditions:zx,effects:Bx,aiHints:jx,tags:Dx},Nx="second-wind",$x="Second souffle",Ux="Restaure une partie des PV en bonus action.",Wx="support",Gx={actionType:"bonus",movementCost:0},Hx={target:"self",range:{min:0,max:0,shape:"self"},maxTargets:1,requiresLos:!1},Vx={perTurn:null,perEncounter:1,resource:null},Yx=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"stat_below_percent",who:"self",stat:"hp",percentMax:.75,reason:"Economiser tant que les PV sont hauts."}],Xx=[{type:"heal",target:"self",formula:"1d10 + niveau",min:1},{type:"temp_hp",target:"self",amount:2,duration:"end_of_turn"},{type:"log",message:"Second souffle: soigne 1d10 + niveau."}],qx={priority:"survive",successLog:"Second souffle declenche.",failureLog:"PV trop hauts ou tour non joueur."},Kx=["soin","defense","survie"],Qx={id:Nx,name:$x,summary:Ux,category:Wx,actionCost:Gx,targeting:Hx,usage:Vx,conditions:Yx,effects:Xx,aiHints:qx,tags:Kx},Zx="throw-dagger",Jx="Lancer de dague",e4="Attaque a distance courte avec une dague a lancer.",t4="attack",n4={actionType:"action",movementCost:0},r4={target:"enemy",range:{min:1,max:4,shape:"single"},maxTargets:1,requiresLos:!0},i4={perTurn:1,perEncounter:null,resource:{name:"dagger",pool:"bandolier",min:1}},s4=[{type:"phase",mustBe:"player",reason:"Tour joueur requis."},{type:"distance_between",target:"primary",min:1,max:4,reason:"Hors de melee mais a portee de lancer."},{type:"resource_at_least",resource:"dagger",pool:"bandolier",value:1,reason:"Besoin d'une dague a lancer."}],o4={bonus:4,critRange:20},a4={formula:"1d4+2",critRule:"double-dice",damageType:"piercing"},l4=[{type:"damage",target:"primary",formula:"1d4 + modDEX",damageType:"piercing"},{type:"resource_spend",resource:"dagger",pool:"bandolier",amount:1},{type:"log",message:"Dague lancee: 1d4+DEX degats perforants."}],u4={priority:"poke_from_range",successLog:"Dague lancee.",failureLog:"Pas de dague ou cible hors portee."},c4=["distance","arme","jet"],h4={id:Zx,name:Jx,summary:e4,category:t4,actionCost:n4,targeting:r4,usage:i4,conditions:s4,attack:o4,damage:a4,effects:l4,aiHints:u4,tags:c4},ar=12,Hn=8,at=64,qa=ar*at,_c=Hn*at,F0=at,ah=at*.5,L0=qa/2,z0=ah*2,d4=1841961;function is(i,e){return i>=0&&i<ar&&e>=0&&e<Hn}function En(i,e){const t=F0/2,s=ah/2,o=(i-e)*t+L0,l=(i+e)*s+z0;return{x:o,y:l}}function f4(i,e){const t=F0/2,s=ah/2,o=i-L0,l=e-z0,u=o/t,h=l/s,d=(u+h)/2,m=(h-u)/2,p=Math.round(d),y=Math.round(m);return{x:p,y}}function B0(i,e,t,s){const o=[];for(let l=-s;l<=s;l++)for(let u=-s;u<=s;u++){const h=e+u,d=t+l;if(!is(h,d))continue;Math.sqrt(u*u+l*l)<=s+.01&&o.push({x:h,y:d})}return{id:i,type:"circle",cells:o}}function p4(i,e,t,s,o){const l=[],u=Math.floor(s/2),h=Math.floor(o/2);for(let d=t-h;d<=t+h;d++)for(let m=e-u;m<=e+u;m++)is(m,d)&&l.push({x:m,y:d});return{id:i,type:"rectangle",cells:l}}function j0(i,e,t,s,o,l){const u=[],d=typeof l=="number"&&l>0&&l<180?l*Math.PI/360:null;for(let m=1;m<=s;m++){let p=m;if(d!==null){const y=Math.tan(d)*m;p=Math.floor(y),p<0&&(p=0),p>m&&(p=m)}for(let y=-p;y<=p;y++){let x=e,_=t;switch(o){case"right":x=e+m,_=t+y;break;case"left":x=e-m,_=t+y;break;case"down":x=e+y,_=t+m;break;case"up":x=e+y,_=t-m;break}is(x,_)&&u.push({x,y:_})}}return{id:i,type:"cone",cells:u}}function qi(i,e=1){const t=[];for(let o=0;o<e;o++)t.push(1+Math.floor(Math.random()*i));const s=t.reduce((o,l)=>o+l,0);return{rolls:t,total:s}}function m4(i,e="normal",t=20){if(e==="advantage"){const o=qi(20),l=qi(20),u=Math.max(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:i,total:u+i,mode:e,isCrit:u>=t}}if(e==="disadvantage"){const o=qi(20),l=qi(20),u=Math.min(o.total,l.total);return{d20:{rolls:[o.total,l.total],total:u},bonus:i,total:u+i,mode:e,isCrit:u>=t}}const s=qi(20);return{d20:s,bonus:i,total:s.total+i,mode:e,isCrit:s.total>=t}}function g4(i){const e=[],s=i.replace(/\s+/g,"").split(/(?=[+-])/);for(const o of s){if(!o)continue;const l=o.startsWith("-")?-1:1,u=o.replace(/^[+-]/,""),h=u.match(/^(\d*)d(\d+)$/i);if(h){const m=h[1]?parseInt(h[1],10):1,p=parseInt(h[2],10);e.push({diceCount:l*m,diceSides:p,modifier:0});continue}const d=parseInt(u,10);Number.isNaN(d)||e.push({diceCount:0,diceSides:0,modifier:l*d})}return e}function y4(i,e){const t=!!(e!=null&&e.isCrit),s=(e==null?void 0:e.critRule)??"double-dice",o=g4(i),l=[];let u=0;for(const m of o)if(m.diceCount!==0&&m.diceSides>0){const p=Math.abs(m.diceCount),y=t&&s==="double-dice"?p*2:p,x=qi(m.diceSides,y);l.push(m.diceCount<0?{rolls:x.rolls,total:-x.total}:x)}else u+=m.modifier;let d=l.reduce((m,p)=>m+p.total,0)+u;return t&&s==="double-total"&&(d*=2),{dice:l,flatModifier:u,total:d,formula:i,isCrit:t}}function wc(i,e){return`${i},${e}`}function x4(i){return i.movementProfile?i.movementProfile:typeof i.moveRange=="number"?{type:"ground",speed:i.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1}:null}function v4(i,e,t,s,o,l,u){if(t<0||s<0||t>=ar||s>=Hn||!is(t,s))return!1;const h=t===u.x&&s===u.y;return!o.some(m=>m.id!==i.id&&m.hp>0&&m.x===t&&m.y===s)||h&&l?!0:e&&e.canPassThroughEntities?!(h&&e.canStopOnOccupiedTile===!1):!1}function J1(i,e,t,s){const o=x4(i),l=o&&o.speed>0?Math.min(s.maxDistance,o.speed):s.maxDistance,u={x:i.x,y:i.y};if(u.x===e.x&&u.y===e.y)return[];const h=new Set,d=new Map,m=new Map,p=[],y=wc(u.x,u.y);h.add(y),d.set(y,null),m.set(y,0),p.push(u);let x=null;const _=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];for(;p.length>0;){const E=p.shift(),R=wc(E.x,E.y),X=m.get(R)??0;if(!(X>=l))for(const N of _){const D=E.x+N.x,oe=E.y+N.y,ae=wc(D,oe);if(h.has(ae)||!v4(i,o,D,oe,t,s.allowTargetOccupied??!1,e))continue;h.add(ae),d.set(ae,R),m.set(ae,X+1);const Q={x:D,y:oe};if(p.push(Q),D===e.x&&oe===e.y){x=ae,p.length=0;break}}}let S=x;if(!S){let E=null,R=Number.POSITIVE_INFINITY;for(const X of h){const[N,D]=X.split(",").map(Number),oe=Math.abs(N-e.x)+Math.abs(D-e.y),ae=m.get(X)??0;ae!==0&&(ae>l||oe<R&&(R=oe,E=X))}if(!E)return[];S=E}const b=[];let w=S;for(;w;){const[E,R]=w.split(",").map(Number);if(b.push({x:E,y:R}),w===y)break;w=d.get(w)??null}const A=b.reverse(),T=l+1;return A.length>T?A.slice(0,T):A}function _4(i,e){return e.find(t=>t.hp>0&&t.x===i.x&&t.y===i.y)??null}const w4=30,S4={shape:"cone",range:w4};function k4(i){return i.facing?i.facing:i.type==="player"?"right":"left"}function b4(i){return i.visionProfile?i.visionProfile:S4}function D0(i){const e=b4(i),t=k4(i),s=`vision-${i.id}`;return e.range<=0?{id:s,type:e.shape==="circle"?"circle":"cone",cells:[]}:e.shape==="circle"?B0(s,i.x,i.y,e.range):j0(s,i.x,i.y,e.range,t,e.apertureDeg)}function ep(i){return`${i.x},${i.y}`}function C4(i,e){const t=D0(i);if(!t.cells.length)return[];const s=new Set;for(const o of t.cells)s.add(ep(o));return e.filter(o=>o.id!==i.id&&o.hp>0&&s.has(ep({x:o.x,y:o.y})))}function O0(i,e,t){return e.hp<=0?!1:C4(i,t).some(o=>o.id===e.id)}let Gc=[],A4=0;function Ga(i){const e={id:`evt-${Date.now()}-${A4++}`,round:i.round,phase:i.phase,kind:i.kind,actorId:i.actorId,actorKind:i.actorKind,targetId:i.targetId??null,targetKind:i.targetKind??null,summary:i.summary,data:i.data??{},timestamp:Date.now()};Gc.push(e)}function P4(){const i=Gc;return Gc=[],i}function tp(i,e,t){if(!t.length)return{summary:i==="player"?"Le heros observe le champ de bataille, en quete d'une action decisive.":"Les ennemis se tiennent prudemment, indecis quant a leur prochaine action."};const s=t.filter(d=>d.kind==="player_attack"||d.kind==="enemy_attack"),o=t.filter(d=>d.kind==="death"),l=[];s.length?s[s.length-1].actorKind==="player"?l.push("Le heros frappe avec determination, frappant son adversaire au coeur de la melee."):l.push("Les ennemis redoublent de violence, tentant de submerger le heros sous leurs assauts."):l.push("Le heros se repositionne prudemment, jaugeant la situation."),o.length&&l.push(o.length===1?"Une silhouette s'effondre sur le champ de bataille, laissant un silence pesant derriere elle.":"Plusieurs corps tombent au sol, marquant un tournant sanglant dans l'affrontement.");const u=l.join(" ");let h;return e.actors.find(m=>m.kind==="player")&&(h="Le heros, essouffle mais resolu, cherche a reprendre l'avantage dans ce combat incertain."),{summary:u,playerPerspective:h}}async function T4(i,e){var o;const t=P4(),s={focusSide:i,focusActorId:((o=e.actors.find(l=>l.kind==="player"))==null?void 0:o.id)??null,state:e,events:t};if(!t.length)return tp(i,e,t);try{const l=await fetch("/api/narration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!l.ok)throw new Error(`HTTP ${l.status}`);const u=await l.json();if(!u||typeof u.summary!="string")throw new Error("Reponse narration invalide");return u}catch{return tp(i,e,t)}}const E4={"./melee-strike.json":Px,"./dash.json":Ox,"./second-wind.json":Qx,"./throw-dagger.json":h4},M4={"./brute.json":U5,"./archer.json":K5,"./assassin.json":ix,"./ghost.json":dx};function R4(){const i=Array.isArray(Q1.types)?Q1.types:[],e=[];for(const t of i){const s=M4[t];s?e.push(s):console.warn("[enemy-types] Type path missing in bundle:",t)}return e.length===0&&console.warn("[enemy-types] No enemy types loaded from index.json"),e}function I4(i,e,t){const{x:s,y:o}=t,l=e.baseStats;return{id:`enemy-${i+1}`,type:"enemy",enemyTypeId:e.id,enemyTypeLabel:e.label,aiRole:e.aiRole,moveRange:l.moveRange,attackDamage:l.attackDamage,attackRange:typeof l.attackRange=="number"?l.attackRange:1,maxAttacksPerTurn:typeof l.maxAttacksPerTurn=="number"?l.maxAttacksPerTurn:1,armorClass:l.armorClass,movementProfile:e.movement?e.movement:{type:"ground",speed:e.baseStats.moveRange,canPassThroughWalls:!1,canPassThroughEntities:!1,canStopOnOccupiedTile:!1},facing:"left",visionProfile:e.vision?e.vision:{shape:"cone",range:5},x:s,y:o,hp:l.hp,maxHp:l.hp}}function np(i,e,t){return Math.max(e,Math.min(t,i))}function Ha(i,e){return Math.abs(i.x-e.x)+Math.abs(i.y-e.y)}function Mn(i){return i.hp<=0}function rp(i){return typeof i.attackRange=="number"&&i.attackRange>0?i.attackRange:1}function ip(i){return typeof i.maxAttacksPerTurn=="number"&&i.maxAttacksPerTurn>0?i.maxAttacksPerTurn:1}function Sc(i,e,t){return Mn(i)||Mn(e)?!1:O0(i,e,t)}function kc(i,e){const t=e.x-i.x,s=e.y-i.y;return Math.abs(t)>=Math.abs(s)?t>=0?"right":"left":s>=0?"down":"up"}function F4(i){const e=Hn,t=ar,s=Math.floor(i/e),o=i%e;return{x:Math.max(0,t-1-s),y:o}}const sp=[{action:"move",label:"Se deplacer jusqu'a 3 cases (Manhattan)",color:"#2ecc71"},{action:"attack",label:"Attaque le joueur a distance 1 (2 degats)",color:"#e74c3c"},{action:"wait",label:"Attend si aucune action viable",color:"#7f8c8d"}],L4=()=>{var Qt,Ao,$t,Po;const i=Pe.useRef(null),e=Pe.useRef(null),t=Pe.useRef(null),s=Pe.useRef(null),[o,l]=Pe.useState([]),[u,h]=Pe.useState([]),[d,m]=Pe.useState([]),[p,y]=Pe.useState({id:"player-1",type:"player",x:0,y:Math.floor(Hn/2),facing:"right",visionProfile:{shape:"cone",range:5},hp:Un.pvActuels,maxHp:Un.pvMax}),[x,_]=Pe.useState([]),[S,b]=Pe.useState([]),[w,A]=Pe.useState("player"),[T,E]=Pe.useState(1),[R,X]=Pe.useState(!1),[N,D]=Pe.useState(!1),[oe,ae]=Pe.useState(null),[Q,ne]=Pe.useState([]),[Te,pe]=Pe.useState(0),[Ee,dt]=Pe.useState(!1),[te,se]=Pe.useState(3),[J,ee]=Pe.useState([]),[re,I]=Pe.useState(null),[G,be]=Pe.useState(null),[Me,Re]=Pe.useState("normal"),[_e,Oe]=Pe.useState(null),[Ie,je]=Pe.useState(null),[ft,Bn]=Pe.useState([]),[on,Rt]=Pe.useState(!1),[Nt,qt]=Pe.useState({usedAction:!1,usedBonus:!1}),[gt,yn]=Pe.useState([]),[vt,Yn]=Pe.useState(null),[jr,xn]=Pe.useState("none"),[pi,vn]=Pe.useState([]),[Dr,yo]=Pe.useState(!1),[mi,ls]=Pe.useState(null),[Xn,Or]=Pe.useState(null),[hr,dr]=Pe.useState(null),[xo,fr]=Pe.useState(!1),[Kt,al]=Pe.useState(!1);function us(k){if(xo)return"Fallback local : poursuite/attaque basique du joueur";if(Xn===null)return"IA non appele pour l'instant";const B=Xn.find(O=>O.enemyId===k);if(!B)return"Aucune dcision reue pour cet ennemi";if(B.action==="move"){const O=typeof B.targetX=="number"?B.targetX:"?",ie=typeof B.targetY=="number"?B.targetY:"?";return`Dplacement vers (${O}, ${ie})`}return B.action==="attack"?"Attaque le joueur (distance 1)":"Attend ce tour"}function Nr(){if(!N||Q.length===0)return null;const k=Te>=0&&Te<Q.length?Te:0;return Q[k]??null}function gi(){Q.length!==0&&pe(k=>{const B=(k+1)%Q.length;return B===0&&E(O=>O+1),B})}function cs(){if(N)return;const k=Un.caracs.dexterite.modDEX,B=()=>Math.floor(Math.random()*20)+1,O=B(),ie=O+k,U=[];U.push({id:p.id,kind:"player",initiative:ie});const H=S.map($=>{const ve=B();return U.push({id:$.id,kind:"enemy",initiative:ve}),{...$,initiative:ve}});ae(ie),b(H),U.sort(($,Z)=>Z.initiative-$.initiative),ne(U),pe(0),D(!0);const W=U[0];W&&(W.kind==="player"?de(`Initiative: Joueur ${ie} (d20=${O}, mod=${k})  le joueur commence.`):de(`Initiative: Joueur ${ie} (d20=${O}, mod=${k})  ${W.id} commence (initiative ${W.initiative}).`))}function de(k){l(B=>[k,...B].slice(0,12))}function pr(k){h(B=>[k,...B].slice(0,20))}function jn(k){Bn(B=>[k,...B].slice(0,6)),de(k)}function vo(k){if(!k||!k.length)return;const B=Date.now()+3500;m(O=>{const ie=O.filter(H=>!k.some(W=>W.enemyId===H.tokenId)),U=k.map(H=>({tokenId:H.enemyId,text:H.line,expiresAt:B}));return[...ie,...U]})}function _o(k){const B=[{id:p.id,kind:"player",label:"Heros",aiRole:null,x:p.x,y:p.y,hp:p.hp,maxHp:p.maxHp},...S.map(O=>({id:O.id,kind:"enemy",label:O.enemyTypeLabel||O.enemyTypeId||O.id,aiRole:O.aiRole??null,x:O.x,y:O.y,hp:O.hp,maxHp:O.maxHp}))];return{round:T,phase:k,grid:{cols:ar,rows:Hn},actors:B}}Pe.useEffect(()=>{const k=R4();_(k)},[]),Pe.useEffect(()=>{Ee&&!N&&S.length>0&&cs()},[Ee,N,S.length]),Pe.useEffect(()=>{const k=Array.isArray(Z1.actions)?Z1.actions:[],B=[];for(const O of k){const ie=E4[O];ie?B.push(ie):console.warn("[actions] Action path missing in bundle:",O)}B.length===0&&console.warn("[actions] No actions loaded from index.json"),ee(B),I(B.length?B[0].id:null)},[]),Pe.useEffect(()=>{if(!Ee||!N)return;const k=Nr();if(k){if(k.kind==="player"){A("player"),qt({usedAction:!1,usedBonus:!1}),Rt(!1),Oe(null),je(null);return}R||(A("enemies"),ko(k.id))}},[Ee,N,Q,Te,R]);function yi(){if(S.length===0)return null;let k=null;for(const B of S){const O=Ha(p,B);(k===null||O<k)&&(k=O)}return k}function hs(k,B,O,ie){if(B.type!=="enemy")return{ok:!1,reason:"La cible selectionnee n'est pas un ennemi."};if(B.hp<=0)return{ok:!1,reason:"La cible est deja a terre."};const U=k.targeting;if(!U||U.target!=="enemy")return{ok:!1,reason:"Cette action ne cible pas un ennemi."};const H=Ha(O,B),W=U.range;if(W){if(typeof W.min=="number"&&H<W.min)return{ok:!1,reason:`Cible trop proche pour ${k.name} (distance ${H}, min ${W.min}).`};if(typeof W.max=="number"&&H>W.max)return{ok:!1,reason:`Cible hors portee pour ${k.name} (distance ${H}, max ${W.max}).`}}for(const $ of k.conditions||[]){if($.type==="distance_max"&&typeof $.max=="number"&&H>$.max)return{ok:!1,reason:$.reason||`Distance cible > ${$.max}.`};if($.type==="distance_between"){const Z=typeof $.min=="number"?$.min:typeof(W==null?void 0:W.min)=="number"?W.min:null,ve=typeof $.max=="number"?$.max:typeof(W==null?void 0:W.max)=="number"?W.max:null;if(Z!==null&&H<Z)return{ok:!1,reason:$.reason||`Distance cible < ${Z}.`};if(ve!==null&&H>ve)return{ok:!1,reason:$.reason||`Distance cible > ${ve}.`}}if($.type==="target_alive"&&B.hp<=0)return{ok:!1,reason:$.reason||"La cible doit avoir des PV restants."}}return U.requiresLos&&!O0(O,B,ie)?{ok:!1,reason:"Cible hors du champ de vision ou derriere un obstacle (ligne de vue requise)."}:{ok:!0}}function xi(k){var H,W;const B=[],O=[];w!=="player"&&B.push("Action bloquee pendant le tour des ennemis.");const ie=(H=k.targeting)==null?void 0:H.target,U=(W=k.targeting)==null?void 0:W.range;if(ie==="enemy"){const $=yi();$===null?B.push("Aucune cible ennemie presente."):(O.push(`Distance mini ennemie: ${$}`),typeof(U==null?void 0:U.min)=="number"&&$<U.min&&B.push(`Trop proche (< ${U.min}).`),typeof(U==null?void 0:U.max)=="number"&&$>U.max&&B.push(`Hors portee (> ${U.max}).`))}for(const $ of k.conditions||[]){if($.type==="phase"&&$.mustBe&&$.mustBe!==w&&B.push($.reason||"Phase incorrecte."),$.type==="distance_max"&&ie==="enemy"){const Z=yi();Z!==null&&typeof $.max=="number"&&Z>$.max&&B.push($.reason||`Distance > ${$.max}.`)}if($.type==="distance_between"&&ie==="enemy"){const Z=yi();Z!==null&&(typeof $.min=="number"&&Z<$.min&&B.push($.reason||`Distance < ${$.min}.`),typeof $.max=="number"&&Z>$.max&&B.push($.reason||`Distance > ${$.max}.`))}}return{enabled:B.length===0,reasons:B,details:O}}function vi(k){var O;const B=[];if(k.perTurn&&B.push(`${k.perTurn}/tour`),k.perEncounter&&B.push(`${k.perEncounter}/rencontre`),(O=k.resource)!=null&&O.name){const ie=k.resource.pool?` (${k.resource.pool})`:"";B.push(`Ressource: ${k.resource.name}${ie}`)}return B.length?B.join(" | "):"Libre"}function ds(k){const{range:B,target:O}=k;return B.shape==="self"?"Portee: soi-meme":B.min===B.max?`Portee: ${B.max} (${O})`:`Portee: ${B.min}-${B.max} (${O})`}function $r(k){switch(k.type){case"phase":return`Phase requise: ${k.mustBe??"?"}`;case"distance_max":return`Distance <= ${k.max??"?"}`;case"distance_between":return`Distance ${k.min??0}-${k.max??"?"}`;case"stat_below_percent":return`Stat ${k.stat} < ${Math.round((k.percentMax??0)*100)}%`;case"target_alive":return"Cible doit etre vivante";case"resource_at_least":return`Ressource ${k.resource??"?"} >= ${k.value??"?"}`;default:return k.reason||k.type}}function fs(k){switch(k.type){case"damage":return`Degats ${k.damageType??""} (${k.formula??"?"})`;case"heal":return`Soin (${k.formula??"?"})`;case"status":return`Etat: ${k.status??"?"} (${k.duration??"?"} tour)`;case"temp_hp":return`PV temporaires: ${k.amount??"?"}`;case"move":return`Deplacement +${k.maxSteps??"?"} (${k.direction??"direction libre"})`;case"resource_spend":return`Consomme ${k.amount??1} ${k.resource??"ressource"}`;case"modify_path_limit":return`+${k.delta??"?"} cases de mouvement ce tour`;default:return k.type}}function Ur(k){var ie;const B=(ie=k.targeting)==null?void 0:ie.range;if(!B)return;const O=`preview-${k.id}`;if(B.shape==="rectangle"){vn([{id:O,kind:"rectangle",width:Math.max(1,B.max),height:Math.max(1,B.max)}]),de(`Previsualisation rectangle pour ${k.name}.`);return}if(B.shape==="cone"){vn([{id:O,kind:"cone",range:Math.max(1,B.max),direction:"right"}]),de(`Previsualisation cone (direction droite) pour ${k.name}.`);return}vn([{id:O,kind:"circle",radius:Math.max(1,B.max)}]),de(`Previsualisation de portee pour ${k.name}.`)}function ll(k){var W,$,Z;const B=(W=k.actionCost)==null?void 0:W.actionType,O=B==="action",ie=B==="bonus";if(O&&Nt.usedAction){de(`Action ${k.name} refusee: action principale deja utilisee ce tour.`);return}if(ie&&Nt.usedBonus){de(`Action ${k.name} refusee: action bonus deja utilisee ce tour.`);return}const U=xi(k);if(!U.enabled){de(`Action ${k.name} bloque: ${U.reasons.join(" | ")}`);return}be(k.id),Oe(null),je(null),Rt(!1),qt(ve=>({usedAction:ve.usedAction||O,usedBonus:ve.usedBonus||ie}));const H=(($=k.aiHints)==null?void 0:$.successLog)||"Action validee. Prets pour les jets.";de(`${k.name}: ${H}`),((Z=k.targeting)==null?void 0:Z.target)==="enemy"?(xn("selecting"),Yn(null),de("Selection de cible: cliquez sur un ennemi sur la grille ou dans la liste.")):(xn("none"),Yn(null))}function _n(){return G&&J.find(k=>k.id===G)||null}function _i(k){return k?k.attack||k.damage||k.skillCheck?!0:(k.effects||[]).some(O=>typeof O.formula=="string"&&O.formula.trim().length>0):!1}function Wr(){var W,$;if(Kt||Mn(p))return;const k=_n();if(!k){de("Aucune action validee pour lancer un jet.");return}if(!k.attack){de("Cette action ne requiert pas de jet de touche.");return}if(on){de("Jet de touche deja effectue pour cette action ce tour. Validez une nouvelle action ou terminez le tour.");return}let B=null;if(((W=k.targeting)==null?void 0:W.target)==="enemy"){if(!vt){de("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet.");return}const Z=S.find(ve=>ve.id===vt);if(!Z){de("Cible ennemie introuvable ou deja vaincue.");return}B=typeof Z.armorClass=="number"?Z.armorClass:null}const O=m4(k.attack.bonus,Me,k.attack.critRange??20);Oe(O),Rt(!0),je(null);const ie=O.mode==="normal"?`${O.d20.total}`:`${O.d20.rolls.join(" / ")} -> ${O.d20.total}`,U=(($=k.targeting)==null?void 0:$.target)==="enemy"&&vt?` sur ${vt}`:"",H=`Jet de touche (${k.name})${U} : ${ie} + ${O.bonus} = ${O.total}`;if(B!==null){const ve=O.total>=B||O.isCrit?`TOUCHE (CA ${B})${O.isCrit?" (critique!)":""}`:`RATE (CA ${B})`;jn(`${H} -> ${ve}`)}else jn(`${H}${O.isCrit?" (critique!)":""}`)}function Gr(){var Z,ve,ze;if(Kt||Mn(p))return;const k=_n();if(!k){de("Aucune action validee pour lancer un jet.");return}if(!k.damage){de("Cette action ne requiert pas de jet de degats.");return}if(k.attack&&!_e){de("Un jet de touche est requis avant les degats pour cette action.");return}let B=null,O=null;if(((Z=k.targeting)==null?void 0:Z.target)==="enemy"){if(!vt){de("Aucune cible ennemie selectionnee pour cette action. Selectionnez une cible avant le jet de degats.");return}if(B=S.findIndex(Ce=>Ce.id===vt),B===-1){de("Cible ennemie introuvable ou deja vaincue.");return}const ye=S[B];O=typeof ye.armorClass=="number"?ye.armorClass:null}const ie=!!(_e!=null&&_e.isCrit);if(O!==null&&k.attack&&_e&&!(_e.total>=O||_e.isCrit)){const ke=((ve=k.targeting)==null?void 0:ve.target)==="enemy"&&vt?` sur ${vt}`:"";de(`L'attaque (${k.name})${ke} a manque la cible (CA ${O}). Pas de degats.`);return}const U=y4(k.damage.formula,{isCrit:ie,critRule:k.damage.critRule});je(U);const H=U.dice.map(ye=>ye.rolls.join("+")).join(" | "),W=U.total,$=((ze=k.targeting)==null?void 0:ze.target)==="enemy"&&vt?` sur ${vt}`:"";jn(`Degats (${k.name})${$} : ${H||"0"} + ${U.flatModifier} = ${W}${ie?" (critique)":""}`),typeof B=="number"&&B>=0&&(b(ye=>{if(B===null||B<0||B>=ye.length)return ye;const Ce=[...ye],ke={...Ce[B]},fe=ke.hp;return ke.hp=Math.max(0,ke.hp-W),Ce[B]=ke,Ga({round:T,phase:w,kind:"player_attack",actorId:p.id,actorKind:"player",targetId:ke.id,targetKind:"enemy",summary:`Le heros frappe ${ke.id} et inflige ${W} degats (PV ${fe} -> ${ke.hp}).`,data:{actionId:k.id,damage:W,isCrit:ie,targetHpBefore:fe,targetHpAfter:ke.hp}}),ke.hp<=0&&fe>0&&Ga({round:T,phase:w,kind:"death",actorId:ke.id,actorKind:"enemy",summary:`${ke.id} s'effondre, hors de combat.`,targetId:ke.id,targetKind:"enemy",data:{killedBy:p.id}}),Ce}),(async()=>{try{const ye=_o("player"),Ce=await T4("player",ye),ke=Ce.playerPerspective||Ce.summary||null;ke&&pr(ke),vo(Ce.enemySpeeches??[])}catch{}})())}function ul(){const k=_n();if(!k){de("Aucune action validee pour lancer un jet.");return}if(!k.attack){de("Mode auto: pas de jet de touche necessaire."),k.damage&&Gr();return}Wr(),setTimeout(()=>{k.damage&&Gr()},50)}function cl(k){if(w!=="player"||Kt||Mn(p))return;const B=i.current;if(!B)return;const O=B.querySelector("canvas");if(!O)return;const ie=O.getBoundingClientRect(),U=k.clientX-ie.left,H=k.clientY-ie.top,W=U/ie.width*qa,$=H/ie.height*_c,{x:Z,y:ve}=f4(W,$),ze=Z,ye=ve;if(!is(ze,ye))return;if(jr==="selecting"){const ke=[p,...S],fe=_4({x:ze,y:ye},ke);if(!fe||fe.type!=="enemy"){de(`Pas d'ennemi sur (${ze}, ${ye}).`);return}const $e=_n();if(!$e){de("Aucune action validee pour selectionner une cible.");return}const pt=hs($e,fe,p,[p,...S]);if(!pt.ok){de(pt.reason||"Cette cible n'est pas valide pour cette action.");return}Yn(fe.id),xn("none"),de(`Cible selectionnee: ${fe.id}.`);return}const Ce=(ke,fe)=>S.some($e=>$e.hp>0&&$e.x===ke&&$e.y===fe);if(Ce(ze,ye)){de(`Case (${ze}, ${ye}) occupee par un ennemi : impossible de s'y deplacer.`);return}yn(ke=>{const $e=[...ke];if($e.length>=5)return de("Limite de 5 cases atteinte pour ce tour."),$e;let pt=$e.length>0?$e[$e.length-1]:{x:p.x,y:p.y};if(pt.x===ze&&pt.y===ye)return $e;let rt=pt.x,it=pt.y,Zt=5-$e.length;for(;rt!==ze&&Zt>0;){const ki=Math.sign(ze-rt),wn=rt+ki;if(Ce(wn,it)){de(`Trajectoire bloquee par un ennemi en (${wn}, ${it}).`);break}rt=wn,$e.push({x:rt,y:it}),Zt--}for(;it!==ye&&Zt>0;){const ki=Math.sign(ye-it),wn=it+ki;if(Ce(rt,wn)){de(`Trajectoire bloquee par un ennemi en (${rt}, ${wn}).`);break}it=wn,$e.push({x:rt,y:it}),Zt--}return de(Zt===0&&(rt!==ze||it!==ye)?"Trajectoire tronquee: limite de 5 cases atteinte.":`Trajectoire: ajout de la case (${ze}, ${ye}).`),$e})}function hl(){if(w!=="player"||Kt||Mn(p)||gt.length===0)return;const k=gt[gt.length-1];y(B=>({...B,x:k.x,y:k.y})),de(`Deplacement valide vers (${k.x}, ${k.y}) via ${gt.length} etape(s).`),yn([])}function qn(){w==="player"&&(Kt||(yn([]),de("Trajectoire reinitialisee.")))}function Hr(k){w==="player"&&(Kt||(y(B=>({...B,facing:k})),de(`Orientation du joueur mise a jour: ${k}.`)))}function wo(){const k={x:p.x,y:p.y,hp:p.hp,maxHp:p.maxHp},B=S.map(O=>({id:O.id,x:O.x,y:O.y,hp:O.hp,maxHp:O.maxHp,type:O.enemyTypeId,aiRole:O.aiRole??null,moveRange:O.moveRange??null,attackDamage:O.attackDamage??null}));return{round:T,phase:w,grid:{cols:ar,rows:Hn},player:k,enemies:B}}function dl(k){const B=new Set(S.map(U=>U.id)),O=new Set(["move","attack","wait"]),ie=[];for(const U of k){if(!U||typeof U!="object")continue;if(!B.has(U.enemyId)){console.warn("[enemy-ai] Decision ignoree (enemyId inconnu):",U);continue}const H=(U.action||"wait").toLowerCase();if(!O.has(H)){console.warn("[enemy-ai] Decision ignoree (action invalide):",U);continue}if(H==="move"&&(typeof U.targetX!="number"||typeof U.targetY!="number")){console.warn("[enemy-ai] Decision move ignoree (cible manquante):",U);continue}ie.push({...U,action:H})}return ie}async function So(k){console.log("[enemy-ai] Envoi tat au backend:",k),ls(k),dr(null),fr(!1);try{const B=await fetch("/api/enemy-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!B.ok)throw new Error(`HTTP ${B.status}`);const O=await B.json();if(!O.decisions||!Array.isArray(O.decisions))throw new Error("Rponse backend invalide (decisions manquant).");const ie=dl(O.decisions);return console.log("[enemy-ai] Dcisions reues (filtres):",ie),Or(ie),ie.length===0&&fr(!0),ie}catch(B){return console.warn("[enemy-ai] Erreur lors de la requete IA:",B),dr(B instanceof Error?B.message:String(B??"unknown")),Or(null),fr(!0),console.warn("[enemy-ai] Dcisions manquantes, utilisation du fallback local."),[]}}async function ko(k){X(!0),yn([]),vn([]);const B=wo(),ie=(await So(B)).filter(U=>U.enemyId===k);ie.length===0?(fr(!0),Or([]),b(U=>{const H=U.map(Ce=>({...Ce}));let W={...p};const $=H.find(Ce=>Ce.id===k);if(!$||Mn($))return U;const Z=[W,...H];if(!Sc($,W,Z))return de(`${$.id} ne voit pas le joueur et reste en alerte (fallback).`),H;const ve=typeof $.moveRange=="number"?$.moveRange:3,ze=[W,...H],ye=J1($,{x:W.x,y:W.y},ze,{maxDistance:ve,allowTargetOccupied:!0});if($.plannedPath=ye,ye.length===0)de(`${$.id} ne trouve pas de chemin valide vers le joueur (fallback, reste en place).`);else{const Ce=ye[ye.length-1];$.x=Ce.x,$.y=Ce.y,$.facing=kc($,W);const ke=Ha($,W),fe=rp($);if(ke<=fe){const $e=typeof $.attackDamage=="number"?$.attackDamage:2,pt=ip($),rt=$e*pt,it=W.hp;W={...W,hp:Math.max(0,W.hp-rt)},de(pt>1?`${$.id} suit un chemin et effectue ${pt} attaques pour un total de ${rt} degats (fallback).`:`${$.id} suit un chemin et attaque le joueur pour ${rt} degats (fallback).`),Ga({round:T,phase:w,kind:"enemy_attack",actorId:$.id,actorKind:"enemy",targetId:W.id,targetKind:"player",summary:`${$.id} atteint le heros pour ${rt} degats (PV ${it} -> ${W.hp}).`,data:{damage:rt,attacks:pt,playerHpBefore:it,playerHpAfter:W.hp,fallback:!0}}),W.hp<=0&&it>0&&Ga({round:T,phase:w,kind:"death",actorId:W.id,actorKind:"player",summary:"Le heros s'effondre sous les coups ennemis.",targetId:W.id,targetKind:"player",data:{killedBy:$.id}})}else de(`${$.id} suit un chemin vers (${Ce.x}, ${Ce.y}) (fallback).`)}return y(W),H})):(fr(!1),Or(ie),b(U=>{const H=U.map($=>({...$}));let W={...p};for(const $ of ie){const Z=H.find(ye=>ye.id===$.enemyId);if(!Z)continue;const ve=[W,...H],ze=($.action||"wait").toLowerCase();if(ze==="wait"){de(`${Z.id} attend.`);continue}if(ze==="move"){if(!Sc(Z,W,ve)){de(`${Z.id} ne voit pas le joueur et reste en alerte.`);continue}let ye=$.targetX,Ce=$.targetY;const ke=$;if((typeof ye!="number"||typeof Ce!="number")&&ke.target&&typeof ke.target.x=="number"&&typeof ke.target.y=="number"&&(ye=ke.target.x,Ce=ke.target.y),typeof ye!="number"||typeof Ce!="number"){de(`${Z.id}: decision MOVE ignoree (pas de cible valide).`);continue}const fe=typeof Z.moveRange=="number"?Z.moveRange:3,$e=np(ye,0,ar-1),pt=np(Ce,0,Hn-1),rt=[W,...H],it=J1(Z,{x:$e,y:pt},rt,{maxDistance:fe,allowTargetOccupied:!0});if(Z.plannedPath=it,it.length===0){de(`${Z.id}: aucun trajet valide vers (${$e}, ${pt}), reste en place.`);continue}const Zt=it[it.length-1];Z.x=Zt.x,Z.y=Zt.y,Z.facing=kc(Z,W),de(`${Z.id} suit un chemin vers (${Zt.x}, ${Zt.y}).`);continue}if(ze==="attack"){if(Z.facing=kc(Z,W),!Sc(Z,W,ve)){de(`${Z.id} voulait attaquer mais ne voit pas le joueur.`);continue}const ye=Ha(Z,W),Ce=rp(Z);if(ye<=Ce){const ke=typeof Z.attackDamage=="number"?Z.attackDamage:2,fe=ip(Z),$e=ke*fe;W={...W,hp:Math.max(0,W.hp-$e)},de(fe>1?`${Z.id} effectue ${fe} attaques et inflige ${$e} degats au joueur.`:`${Z.id} attaque le joueur pour ${$e} degats.`)}else de(`${Z.id} voulait attaquer mais est trop loin (ignore).`)}}return y(W),H})),X(!1),gi()}function bo(){if(Kt)return;const k=Nr();!k||k.kind!=="player"||(de(`Fin du tour joueur (round ${T}).`),gi())}function Co(){vn([{id:"demo-circle",kind:"circle",radius:2}]),de("Zone d'effet: cercle (rayon 2) autour du joueur.")}function fl(){vn([{id:"demo-rect",kind:"rectangle",width:3,height:3}]),de("Zone d'effet: rectangle 3x3 centre sur le joueur.")}function pl(){vn([{id:"demo-cone",kind:"cone",range:4,direction:"right"}]),de("Zone d'effet: cone vers la droite (portee 4).")}function tt(){vn([]),de("Zones d'effet effacees.")}Pe.useEffect(()=>{if(!Ee||!i.current||e.current)return;const k=new n0;e.current=k;let B=!1,O=null,ie=!1;return(async()=>{if(await k.init({width:qa,height:_c,background:d4,antialias:!0}),ie=!0,await F5(),B)return;const H=i.current;if(!H)return;H.appendChild(k.canvas);const W=new mn;k.stage.addChild(W);const $=new hi;W.addChild($),(()=>{$.clear();for(let Ce=0;Ce<Hn;Ce++)for(let ke=0;ke<ar;ke++){if(!is(ke,Ce))continue;const fe=En(ke,Ce),$e=at,pt=at*.5,rt=[fe.x,fe.y-pt/2,fe.x+$e/2,fe.y,fe.x,fe.y+pt/2,fe.x-$e/2,fe.y],it=(ke+Ce)%2===0;$.poly(rt).fill({color:it?1381666:1908016,alpha:1})}})();const ve=new hi;W.addChild(ve),s.current=ve;const ze=new mn;W.addChild(ze),t.current=ze;const ye=()=>{const Ce=k.canvas,ke=Ce.parentElement;if(!ke)return;const fe=Math.min(ke.clientWidth/qa,ke.clientHeight/_c);Ce.style.transformOrigin="top left",Ce.style.transform=`scale(${fe})`};O=ye,ye(),window.addEventListener("resize",ye)})(),()=>{B=!0,O&&window.removeEventListener("resize",O),ie&&e.current&&e.current.destroy(!0),e.current=null,t.current=null,s.current=null}},[Ee]),Pe.useEffect(()=>{Kt||p.hp<=0&&([p,...S].some(B=>B.type==="player"&&!Mn(B))||al(!0))},[p,S,Kt]),Pe.useEffect(()=>{const k=t.current;if(!k)return;k.removeChildren();const B=[p,...S];for(const O of B){const ie=new mn,U=O.type==="player"?R0:I0,H=zr.from(U);H.anchor.set(.5,1),H.width=at*.9,H.height=at*.9,ie.addChild(H);const W=En(O.x,O.y);ie.x=W.x+at*.05,ie.y=W.y,k.addChild(ie)}},[p,S]),Pe.useEffect(()=>{const k=t.current;if(!k)return;const B=[p,...S];k.children.forEach((O,ie)=>{const U=B[ie];if(!U||!(O instanceof mn))return;const H=O;let W=null;for(const ve of H.children)if(ve instanceof zr){W=ve;break}if(!W)return;const $=H.children.filter(ve=>!(ve instanceof zr));for(const ve of $)H.removeChild(ve);if(!Mn(U)){const ve=new hi;ve.beginFill(0,.4),ve.drawEllipse(0,0,at*.4,at*.15),ve.endFill(),H.addChildAt(ve,0)}Mn(U)?(W.rotation=Math.PI/2,W.alpha=.7):(W.rotation=0,W.alpha=1);const Z=d.find(ve=>ve.tokenId===U.id);if(Z&&Z.text.trim().length>0){const ze=new hi;ze.beginFill(16777215,.9);const ye=new b5(Z.text,{fontFamily:"Arial",fontSize:10,fill:0,align:"center",wordWrap:!0,wordWrapWidth:112}),Ce=Math.min(120,ye.width+8),ke=ye.height+6;ze.drawRoundedRect(-Ce/2,-at,Ce,ke,6),ze.endFill(),ye.x=-ye.width/2,ye.y=-at+3,H.addChild(ze),H.addChild(ye)}})},[p,S,d]),Pe.useEffect(()=>{const k=s.current;if(!k)return;k.clear();const B=pi.map(U=>{switch(U.kind){case"circle":return B0(U.id,p.x,p.y,U.radius??1);case"rectangle":return p4(U.id,p.x,p.y,U.width??1,U.height??1);case"cone":return j0(U.id,p.x,p.y,U.range??1,U.direction??"right");default:return{id:U.id,type:"circle",cells:[]}}});for(const U of B)for(const H of U.cells){const W=En(H.x,H.y),$=at,Z=at*.5,ve=[W.x,W.y-Z/2,W.x+$/2,W.y,W.x,W.y+Z/2,W.x-$/2,W.y],ze=U.type==="circle"?3447003:U.type==="rectangle"?3066993:15158332;k.poly(ve).fill({color:ze,alpha:.45})}if(Dr){const U=[p,...S];for(const H of U){const W=D0(H);for(const $ of W.cells){const Z=En($.x,$.y),ve=at,ze=at*.5,ye=[Z.x,Z.y-ze/2,Z.x+ve/2,Z.y,Z.x,Z.y+ze/2,Z.x-ve/2,Z.y],Ce=H.type==="player"?2719929:12597547;k.poly(ye).fill({color:Ce,alpha:H.type==="player"?.25:.2})}}}const O=[p,...S];for(const U of O){const H=En(U.x,U.y),W=at,$=at*.5,Z=[H.x,H.y-$/2,H.x+W/2,H.y,H.x,H.y+$/2,H.x-W/2,H.y],ve=U.type==="player"?3066993:15158332;k.poly(Z).fill({color:ve,alpha:.2})}if(vt){const U=S.find(H=>H.id===vt);if(U){const H=En(U.x,U.y),W=at,$=at*.5,Z=[H.x,H.y-$/2,H.x+W/2,H.y,H.x,H.y+$/2,H.x-W/2,H.y];k.poly(Z).fill({color:3447003,alpha:.6})}}if(gt.length>0){const U=gt[gt.length-1],H=En(U.x,U.y),W=at,$=at*.5,Z=[H.x,H.y-$/2,H.x+W/2,H.y,H.x,H.y+$/2,H.x-W/2,H.y];k.poly(Z).fill({color:15844367,alpha:.2})}for(const U of S){if(!U.plannedPath||U.plannedPath.length===0)continue;const H=U.plannedPath,W=H[0],$=En(W.x,W.y);k.setStrokeStyle({width:3,color:15158332,alpha:.9}),k.moveTo($.x,$.y);for(const Z of H.slice(1)){const ve=En(Z.x,Z.y);k.lineTo(ve.x,ve.y)}k.stroke()}if(gt.length===0)return;k.setStrokeStyle({width:6,color:15844367,alpha:1});const ie=En(p.x,p.y);k.moveTo(ie.x,ie.y);for(const U of gt){const H=En(U.x,U.y);k.lineTo(H.x,H.y)}k.stroke()},[p,S,gt,pi,vt,Dr]);const nt=J.find(k=>k.id===re)||J[0]||null,_t=nt?xi(nt):null,We=_n(),wi=_i(We),Ze=w==="player",Kn=Nr(),Si=Q;return Ee?F.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"16px",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:"16px",boxSizing:"border-box",position:"relative"},children:[Kt&&F.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:F.jsxs("div",{style:{background:"#141421",borderRadius:12,border:"1px solid #f1c40f",padding:"24px 32px",maxWidth:360,textAlign:"center",boxShadow:"0 0 24px rgba(0,0,0,0.6)"},children:[F.jsx("h2",{style:{margin:"0 0 8px"},children:"Game Over"}),F.jsx("p",{style:{fontSize:13,margin:"0 0 16px"},children:"Le heros est tombe et aucun allie n'est en mesure de continuer."}),F.jsx("button",{type:"button",onClick:()=>window.location.reload(),style:{padding:"6px 12px",background:"#e67e22",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:600},children:"Recommencer le combat"})]})}),F.jsxs("div",{style:{flex:"1 1 auto",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"},children:[F.jsxs("div",{style:{marginBottom:8,padding:"6px 10px",background:"#111322",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%"},children:[F.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[F.jsx("span",{style:{fontSize:12,color:"#b0b8c4"},children:"Narration du tour"}),F.jsxs("span",{style:{fontSize:11,color:"#9aa0b5"},children:["Round ",T]})]}),F.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2,maxHeight:80,overflowY:"auto"},children:[u.length===0&&F.jsx("span",{style:{fontSize:11,color:"#7f8694"},children:"En attente d'actions pour raconter le tour..."}),u.slice(0,6).map((k,B)=>F.jsxs("span",{style:{fontSize:11,color:"#e0e4ff"},children:["- ",k]},B))]})]}),F.jsxs("div",{style:{marginBottom:8,padding:"6px 10px",background:"#111322",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:4,maxWidth:"100%"},children:[F.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[F.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["Ordre d'initiative (round ",T,")"]}),Kn&&F.jsxs("span",{style:{fontSize:11,color:"#f1c40f"},children:["Tour actuel :"," ",Kn.kind==="player"?"Joueur":Kn.id]})]}),F.jsx("div",{style:{display:"flex",gap:8,alignItems:"center",overflowX:"auto",paddingBottom:2},children:Si.map(k=>{const B=Kn&&k.id===Kn.id&&k.kind===Kn.kind,O=k.kind==="player",ie=Wc(O?"player":"enemy"),U=k.kind==="player"?p:S.find($=>$.id===k.id)||null,H=U?Mn(U):!1,W=O?{svg:ie,label:"PJ"}:{svg:ie,label:k.id};return F.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:4,borderRadius:6,border:B?"2px solid #f1c40f":"1px solid #333",background:H?"#111118":B?"#1b1b30":"#101020",minWidth:48},children:[F.jsx("img",{src:W.svg,alt:W.label,style:{width:32,height:32,objectFit:"contain",filter:H?"grayscale(1)":O?"none":"grayscale(0.2)"}}),F.jsx("span",{style:{fontSize:10,marginTop:2,color:H?"#777a8a":"#d0d6e0",whiteSpace:"nowrap",textDecoration:H?"line-through":"none"},children:W.label}),F.jsxs("span",{style:{fontSize:9,color:"#9aa0b5"},children:["Init ",k.initiative]})]},`${k.kind}-${k.id}`)})})]}),F.jsx("h1",{style:{marginBottom:8},children:"Mini Donjon (test-GAME)"}),F.jsx("p",{style:{marginBottom:8},children:"Tour par tour simple. Cliquez sur la grille pour definir une trajectoire (max 5 cases), validez le dplacement, puis terminez le tour pour laisser l'IA des ennemis jouer."}),F.jsx("div",{ref:i,onClick:cl,style:{flex:"1 1 auto",border:"1px solid #333",overflow:"hidden",maxHeight:"min(80vh, 640px)",maxWidth:"min(100%, 1024px)"}}),F.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,flexWrap:"wrap"},children:[F.jsx("button",{type:"button",onClick:hl,style:{padding:"4px 8px",background:Ze&&gt.length?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze&&gt.length?"pointer":"default"},disabled:!Ze||gt.length===0,children:"Valider le deplacement"}),F.jsx("button",{type:"button",onClick:qn,style:{padding:"4px 8px",background:Ze?"#e67e22":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default"},disabled:!Ze,children:"Reinitialiser trajet"}),F.jsx("button",{type:"button",onClick:bo,style:{padding:"4px 8px",background:Ze?"#9b59b6":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default"},disabled:!Ze||R,children:"Fin du tour joueur"}),F.jsx("button",{type:"button",onClick:()=>Hr("up"),style:{padding:"4px 8px",background:Ze?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default",fontSize:11},disabled:!Ze,children:"Regarder haut"}),F.jsx("button",{type:"button",onClick:()=>Hr("down"),style:{padding:"4px 8px",background:Ze?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default",fontSize:11},disabled:!Ze,children:"Regarder bas"}),F.jsx("button",{type:"button",onClick:()=>Hr("left"),style:{padding:"4px 8px",background:Ze?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default",fontSize:11},disabled:!Ze,children:"Regarder gauche"}),F.jsx("button",{type:"button",onClick:()=>Hr("right"),style:{padding:"4px 8px",background:Ze?"#34495e":"#555",color:"#fff",border:"none",borderRadius:4,cursor:Ze?"pointer":"default",fontSize:11},disabled:!Ze,children:"Regarder droite"}),!Ze&&F.jsx("span",{style:{fontSize:12,alignSelf:"center"},children:"Tour des ennemis en cours..."})]})]}),F.jsxs("div",{style:{width:"360px",display:"flex",flexDirection:"column",gap:"12px"},children:[F.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333"},children:[F.jsx("h2",{style:{margin:"0 0 8px"},children:"Etat du combat"}),F.jsxs("div",{children:[F.jsx("strong",{children:"Round :"})," ",T," |"," ",F.jsx("strong",{children:"Phase :"})," ",w==="player"?"Joueur":"Ennemis"]}),F.jsxs("div",{style:{fontSize:12,marginTop:4},children:[F.jsx("strong",{children:"Initiative PJ :"})," ",oe??"en cours..."," "]}),F.jsxs("div",{children:[F.jsx("strong",{children:"Nom :"})," ",Un.nom.nomcomplet]}),F.jsxs("div",{children:[F.jsx("strong",{children:"Niveau :"})," ",Un.niveauGlobal," |"," ",F.jsx("strong",{children:"Classe :"})," ",Un.classe[1].classeId]}),F.jsxs("div",{children:[F.jsx("strong",{children:"PV :"})," ",p.hp," / ",p.maxHp]}),F.jsxs("div",{children:[F.jsx("strong",{children:"CA :"})," ",Un.CA]}),F.jsxs("div",{style:{marginTop:8},children:[F.jsx("strong",{children:"Caracs :"})," ","FOR ",Un.caracs.force.FOR," | DEX"," ",Un.caracs.dexterite.DEX," | CON"," ",Un.caracs.constitution.CON]}),F.jsxs("div",{style:{marginTop:8,fontSize:12},children:[F.jsx("strong",{children:"Trajectoire :"})," ",gt.length===0?"aucune":`(${p.x}, ${p.y}) -> `+gt.map(k=>`(${k.x}, ${k.y})`).join(" -> ")]}),F.jsxs("div",{style:{marginTop:8,fontSize:11,opacity:.85},children:[F.jsx("strong",{children:"IA ennemis (debug) :"}),F.jsxs("div",{children:["Dernier appel :"," ",mi?`round ${mi.round}, phase ${mi.phase}`:"aucun"]}),F.jsxs("div",{children:["Dcisions reues :"," ",Xn===null?"n/a":`${Xn.length} (fallback: ${xo?"oui":"non"})`]}),hr&&F.jsxs("div",{children:["Erreur : ",hr]})]})]}),F.jsxs("section",{style:{padding:"8px 12px",background:"#151524",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[F.jsx("h2",{style:{margin:"0 0 4px"},children:"Ennemis"}),F.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Chaque ennemi est une entit propre. Capacits IA : dplacement, attaque au contact, attente si aucune option."}),F.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:S.map(k=>{var B;return F.jsxs("div",{style:{background:"#0f0f19",border:"1px solid #2a2a3a",borderRadius:8,padding:"8px 10px",display:"flex",flexDirection:"column",gap:6},children:[F.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[F.jsx("strong",{style:{color:"#f5f5f5"},children:k.id}),F.jsxs("span",{style:{fontSize:12,color:"#b0b8c4"},children:["PV ",k.hp," / ",k.maxHp]})]}),F.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Position : (",k.x,", ",k.y,")"]}),F.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Initiative :"," ",typeof k.initiative=="number"?k.initiative:"non definie"]}),F.jsxs("div",{style:{fontSize:12,color:"#b0b8c4"},children:["Type : ",k.enemyTypeLabel||k.enemyTypeId||"inconnu"," ",k.aiRole?`(role: ${k.aiRole})`:""]}),F.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:sp.map(O=>F.jsx("span",{style:{background:O.color,color:"#0b0b12",borderRadius:4,padding:"2px 6px",fontSize:11,fontWeight:700},children:O.action.toUpperCase()},`${k.id}-${O.action}`))}),F.jsxs("div",{style:{fontSize:12,color:"#d0d6e0"},children:["Ce qu'il peut faire :"," ",sp.map(O=>O.label).join(" | ")]}),We&&((B=We.targeting)==null?void 0:B.target)==="enemy"&&(()=>{const O=hs(We,k,p,[p,...S]),ie=O.ok,U=vt===k.id;return F.jsx("button",{type:"button",onClick:()=>{if(!ie){de(O.reason||`Cible ${k.id} invalide pour ${We.name}.`);return}Yn(k.id),xn("none"),de(`Cible selectionnee: ${k.id}.`)},disabled:!ie,style:{marginTop:6,alignSelf:"flex-start",padding:"4px 8px",fontSize:11,borderRadius:4,border:"none",cursor:ie?"pointer":"default",background:ie?"#3498db":"#555",color:"#fff",opacity:U?1:.9},children:U?"Cible actuelle":"Cibler avec l'action validee"})})(),F.jsxs("div",{style:{fontSize:12,color:"#9cb2ff"},children:["Dernire dcision IA : ",us(k.id)]})]},k.id)})})]}),F.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[F.jsx("h2",{style:{margin:"0 0 4px"},children:"Actions detaillees"}),F.jsxs("p",{style:{margin:0,fontSize:12,opacity:.85},children:["Source: ",F.jsx("code",{children:"action-game/actions/index.json"}),". Liste chargee et verifiee localement (phase, distance)."]}),F.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[F.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:"180px",overflowY:"auto",paddingRight:4},children:[J.map(k=>{const B=xi(k),O=(nt==null?void 0:nt.id)===k.id,ie=k.actionCost.actionType==="action"?"#8e44ad":k.actionCost.actionType==="bonus"?"#27ae60":k.actionCost.actionType==="reaction"?"#e67e22":"#2980b9",U=O?"#6c5ce7":"#2a2a3a";return F.jsxs("button",{type:"button",onClick:()=>I(k.id),style:{textAlign:"left",background:O?"#1e1e2f":"#0f0f19",color:"#f5f5f5",border:`1px solid ${U}`,borderRadius:6,padding:"8px 10px",cursor:"pointer"},children:[F.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,marginBottom:4,alignItems:"center"},children:[F.jsx("span",{style:{fontWeight:600},children:k.name}),F.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:ie,color:"#fff"},children:k.actionCost.actionType})]}),F.jsx("div",{style:{fontSize:12,opacity:.9},children:k.summary||k.category}),F.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:4,fontSize:11,alignItems:"center"},children:[F.jsx("span",{style:{color:B.enabled?"#2ecc71":"#e74c3c"},children:B.enabled?"Disponible":B.reasons[0]||"Bloquee"}),F.jsx("span",{style:{color:"#9aa0b5"},children:ds(k.targeting)}),F.jsx("span",{style:{color:"#9aa0b5"},children:vi(k.usage)})]})]},k.id)}),J.length===0&&F.jsx("div",{style:{fontSize:12,opacity:.8},children:"Aucune action chargee pour le moment."})]}),nt&&F.jsxs("div",{style:{borderTop:"1px solid #2a2a3a",paddingTop:8,display:"flex",flexDirection:"column",gap:6},children:[F.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",fontSize:11},children:[F.jsx("span",{style:{background:"#2d2d40",color:"#d0d4f7",padding:"2px 6px",borderRadius:4},children:nt.category}),(Qt=nt.tags)==null?void 0:Qt.slice(0,4).map(k=>F.jsx("span",{style:{background:"#1f2a38",color:"#9bb0d6",padding:"2px 6px",borderRadius:4},children:k},k))]}),F.jsx("div",{style:{fontSize:12},children:nt.summary||"Pas de resume."}),F.jsxs("div",{style:{fontSize:12},children:[F.jsx("strong",{children:"Cout:"})," ",nt.actionCost.actionType," ","| Mouvement ",nt.actionCost.movementCost]}),F.jsxs("div",{style:{fontSize:12},children:[F.jsx("strong",{children:"Portee:"})," ",ds(nt.targeting)]}),F.jsxs("div",{style:{fontSize:12},children:[F.jsx("strong",{children:"Usage:"})," ",vi(nt.usage)]}),F.jsxs("div",{style:{fontSize:12},children:[F.jsx("strong",{children:"Conditions:"}),F.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:[nt.conditions.length===0&&F.jsx("span",{style:{color:"#9aa0b5"},children:"Aucune condition."}),nt.conditions.map((k,B)=>F.jsxs("div",{style:{color:"#cfd3ec"},children:[$r(k),k.reason?`  ${k.reason}`:""]},`${k.type}-${B}`)),_t&&F.jsxs("div",{style:{color:_t.enabled?"#2ecc71":"#e74c3c"},children:["Etat:"," ",_t.enabled?"OK pour ce tour":_t.reasons.join(" | ")||"Bloque",_t.details.length>0&&F.jsx("div",{style:{color:"#9aa0b5",marginTop:2},children:_t.details.join(" / ")})]})]})]}),F.jsxs("div",{style:{fontSize:12},children:[F.jsx("strong",{children:"Effets:"}),F.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,marginTop:4},children:nt.effects.map((k,B)=>F.jsx("div",{style:{color:"#cfd3ec"},children:fs(k)},`${k.type}-${B}`))})]}),F.jsxs("div",{style:{fontSize:12},children:[F.jsx("strong",{children:"Hints IA:"})," ",((Ao=nt.aiHints)==null?void 0:Ao.priority)||"n/a",F.jsxs("div",{style:{color:"#9aa0b5"},children:["Success: ",(($t=nt.aiHints)==null?void 0:$t.successLog)||"n/a"]}),F.jsxs("div",{style:{color:"#9aa0b5"},children:["Failure: ",((Po=nt.aiHints)==null?void 0:Po.failureLog)||"n/a"]})]}),F.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[F.jsx("button",{type:"button",onClick:()=>Ur(nt),style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Previsualiser"}),F.jsx("button",{type:"button",onClick:()=>ll(nt),disabled:!(_t!=null&&_t.enabled),style:{padding:"4px 8px",background:_t!=null&&_t.enabled?"#2ecc71":"#555",color:"#fff",border:"none",borderRadius:4,cursor:_t!=null&&_t.enabled?"pointer":"default",fontSize:12},children:"Valider l'action"})]})]})]})]}),wi&&F.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[F.jsx("h2",{style:{margin:"0 0 4px"},children:"Jets de des"}),F.jsx("p",{style:{margin:0,fontSize:12,opacity:.85},children:"Choisir une action, la valider, puis lancer le jet de touche et/ou de degats. Mode auto: enchaine touche + degats."}),F.jsxs("div",{style:{fontSize:12},children:["Action validee :"," ",We?`${We.name} (${We.id})`:"aucune (valider une action d'abord)"]}),F.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["normal","advantage","disadvantage"].map(k=>F.jsx("button",{type:"button",onClick:()=>Re(k),style:{padding:"4px 8px",background:Me===k?"#8e44ad":"#2c2c3a",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:k},k))}),F.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[F.jsx("button",{type:"button",onClick:Wr,disabled:!(We!=null&&We.attack),style:{padding:"4px 8px",background:We!=null&&We.attack?"#2980b9":"#555",color:"#fff",border:"none",borderRadius:4,cursor:We!=null&&We.attack?"pointer":"default",fontSize:12},children:"Lancer jet de touche"}),F.jsx("button",{type:"button",onClick:Gr,disabled:!(We!=null&&We.damage),style:{padding:"4px 8px",background:We!=null&&We.damage?"#27ae60":"#555",color:"#fff",border:"none",borderRadius:4,cursor:We!=null&&We.damage?"pointer":"default",fontSize:12},children:"Lancer degats"}),F.jsx("button",{type:"button",onClick:ul,style:{padding:"4px 8px",background:"#9b59b6",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Mode auto (touche + degats)"})]}),F.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[F.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[F.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de touche"}),_e?F.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["d20: ",_e.d20.rolls.join(" / "),"  ",_e.d20.total," ","| bonus ",_e.bonus," | total ",_e.total," ",_e.isCrit?"(critique)":""]}):F.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lance."})]}),F.jsxs("div",{style:{background:"#101020",borderRadius:6,padding:8,border:"1px solid #26263a"},children:[F.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:12},children:"Jet de degats"}),Ie?F.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:["Des:"," ",Ie.dice.length?Ie.dice.map(k=>k.rolls.join("+")).join(" | "):""," ","| mod ",Ie.flatModifier," | total ",Ie.total," ",Ie.isCrit?"(critique)":""]}):F.jsx("div",{style:{fontSize:12,opacity:.7},children:"Pas encore lance."})]})]}),F.jsxs("div",{style:{fontSize:12},children:[F.jsx("strong",{children:"Logs des jets:"}),F.jsxs("div",{style:{marginTop:4,display:"flex",flexDirection:"column",gap:2},children:[ft.map((k,B)=>F.jsxs("div",{style:{color:"#dfe6ff"},children:["- ",k]},B)),ft.length===0&&F.jsx("div",{style:{color:"#9aa0b5"},children:"Aucun jet enregistre."})]})]})]}),F.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",display:"flex",flexDirection:"column",gap:8},children:[F.jsx("h2",{style:{margin:"0 0 4px"},children:"Zones d'effet (demo)"}),F.jsxs("p",{style:{margin:0,fontSize:12},children:["Ces boutons utilisent les helpers de ",F.jsx("code",{children:"boardEffects.ts"})," ","pour dessiner des zones en coordonnees de grille autour du joueur."]}),F.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8},children:[F.jsx("button",{type:"button",onClick:Co,style:{padding:"4px 8px",background:"#2980b9",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cercle R=2"}),F.jsx("button",{type:"button",onClick:fl,style:{padding:"4px 8px",background:"#27ae60",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Rectangle 3x3"}),F.jsx("button",{type:"button",onClick:pl,style:{padding:"4px 8px",background:"#c0392b",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Cone portee 4"}),F.jsx("button",{type:"button",onClick:()=>yo(k=>!k),style:{padding:"4px 8px",background:Dr?"#f1c40f":"#555",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:Dr?"Masquer vision":"Afficher vision"}),F.jsx("button",{type:"button",onClick:tt,style:{padding:"4px 8px",background:"#7f8c8d",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:12},children:"Effacer zones"})]})]}),F.jsxs("section",{style:{padding:"8px 12px",background:"#141421",borderRadius:8,border:"1px solid #333",flex:"1 1 auto",display:"flex",flexDirection:"column"},children:[F.jsx("h2",{style:{margin:"0 0 8px"},children:"Log"}),F.jsx("div",{style:{flex:"1 1 auto",overflowY:"auto",fontSize:12,lineHeight:1.4},children:o.map((k,B)=>F.jsxs("div",{children:["- ",k]},B))})]})]})]}):F.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0b0b12",color:"#f5f5f5",fontFamily:"system-ui, sans-serif",padding:16,boxSizing:"border-box"},children:[F.jsx("h1",{style:{marginBottom:8},children:"Prparation du combat"}),F.jsx("p",{style:{marginBottom:16,fontSize:13,maxWidth:480,textAlign:"center"},children:"Configurez le combat avant de lancer la grille : nombre d'ennemis, puis dmarrez pour effectuer les jets d'initiative et entrer en mode tour par tour."}),F.jsxs("div",{style:{padding:16,borderRadius:8,background:"#141421",border:"1px solid #333",minWidth:260,display:"flex",flexDirection:"column",gap:12},children:[F.jsxs("label",{style:{fontSize:13},children:["Nombre d'ennemis :",F.jsx("input",{type:"number",min:1,max:8,value:te,onChange:k=>se(Math.max(1,Math.min(8,Number(k.target.value)||1))),style:{marginLeft:8,width:60,background:"#0f0f19",color:"#f5f5f5",border:"1px solid #333",borderRadius:4,padding:"2px 4px"}})]}),F.jsxs("p",{style:{fontSize:11,color:"#b0b8c4",margin:0},children:["Taille de la carte : actuellement fixe (",ar," x ",Hn,"). Un redimensionnement dynamique demandera une refonte de boardConfig.ts."]}),F.jsx("button",{type:"button",onClick:()=>{if(x.length===0){de("Aucun type d'ennemi charge (enemyTypes). Impossible de generer le combat.");return}const k=[],B=O=>x[O%x.length];for(let O=0;O<te;O++)k.push(I4(O,B(O),F4(O)));b(k),E(1),D(!1),ne([]),pe(0),dt(!0)},style:{marginTop:8,padding:"6px 12px",background:"#2ecc71",color:"#0b0b12",border:"none",borderRadius:4,cursor:"pointer",fontWeight:600,fontSize:13},children:"Lancer le combat"})]})]})},z4=document.getElementById("root");Pg.createRoot(z4).render(F.jsx(L4,{}));export{_2 as $,Zp as A,Xt as B,mn as C,Ye as D,xe as E,kp as F,rl as G,Kf as H,zr as I,W2 as J,Z2 as K,go as L,Be as M,ht as N,et as O,Bt as P,gy as Q,Fc as R,Qc as S,za as T,Ec as U,Zf as V,rc as W,Jf as X,S2 as Y,ts as Z,xt as _,Np as a,vp as a0,Jp as a1,Le as a2,Ge as a3,wy as a4,Hy as a5,Dy as a6,c3 as a7,d3 as a8,y3 as a9,v3 as aa,_3 as ab,p0 as ac,p1 as ad,d1 as ae,N1 as af,Vn as ag,w8 as ah,Ke as ai,hi as aj,Wg as ak,po as al,K1 as am,y0 as an,Fn as b,zy as c,ho as d,Mt as e,f1 as f,Iy as g,Ya as h,Kc as i,qp as j,Mp as k,Ln as l,Gp as m,mo as n,u3 as o,h3 as p,m3 as q,r2 as r,x3 as s,De as t,Ug as u,w3 as v,Qe as w,gn as x,gp as y,In as z};
